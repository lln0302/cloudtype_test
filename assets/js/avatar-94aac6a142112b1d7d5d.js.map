{"version":3,"file":"assets/js/avatar-94aac6a142112b1d7d5d.js","mappings":"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ACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,UACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,aAAc,MACd,IAAO,KACP,QAAS,MACT,QAAS,MACT,YAAa,iBACb,aAAc,mBACd,QAAS,MACT,YAAa,MACb,QAAS,KACT,UAAW,gBACX,WAAY,KACZ,QAAS,MACT,QAAS,MACT,QAAS,MACT,QAAS,MACT,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,GAAM,KACN,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,GAAM,KACN,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,SAAU,KACV,YAAa,KACb,SAAU,KACV,aAAc,KACd,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,QACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,YAAa,MACb,YAAa,MACb,SAAU,MACV,YAAa,MACb,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,GAAM,UACN,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,GAAM,MACN,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,QACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,aAAc,SACd,cAAe,MACf,cAAe,MACf,aAAc,MACd,YAAa,MACb,qBAAsB,cACtB,aAAc,MACd,cAAe,MACf,YAAa,MACb,YAAa,MACb,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,SAAU,KACV,cAAe,UACf,cAAe,UACf,SAAU,MACV,WAAY,KACZ,WAAY,MACZ,SAAU,eACV,aAAc,MACd,SAAU,MACV,WAAY,MACZ,SAAU,MACV,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MAEXjC,EAAQgC,eAAiB,CACrB,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,sCACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,WACP,IAAO,KACP,IAAO,WACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,cACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,+CACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,oBACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,UACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,WACN,IAAO,KACP,IAAO,WACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,QACN,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,QACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,GAAM,QACN,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,cACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,+CACN,IAAO,+CACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO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AO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,WAAY,cACZ,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,QAAS,aACT,QAAS,aACT,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,IAAO,cACP,IAAO,cACP,GAAM,cACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,IAAO,cACP,GAAM,aACN,GAAM,aACN,GAAM,cACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,cACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,eACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,UAAW,aACX,QAAS,aACT,QAAS,aACT,QAAS,aACT,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,UAAW,aACX,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,SAAU,cACV,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,UAAW,aACX,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,eACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,eACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,SAAU,cACV,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,UAAW,aACX,UAAW,aACX,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,QAAS,aACT,QAAS,aACT,QAAS,aACT,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,QAAS,aACT,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,aACP,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,cACX,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,cACV,SAAU,aACV,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,cACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,cACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,cACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,cACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,cACV,WAAY,cACZ,cAAe,cACf,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,cACV,SAAU,aACV,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,aACf,SAAU,aACV,SAAU,aACV,WAAY,aACZ,cAAe,aACf,cAAe,cACf,cAAe,cACf,cAAe,cACf,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,cAAe,cACf,SAAU,cACV,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,WAAY,aACZ,WAAY,cACZ,WAAY,aACZ,WAAY,aACZ,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,SAAU,cACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SA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AO,cACP,GAAM,aACN,QAAS,aACT,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,cACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,cACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,SAAU,cACV,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,QAAS,aACT,UAAW,aACX,QA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","sources":["webpack://hubs/webpack/runtime/chunk loaded","webpack://hubs/webpack/runtime/create fake namespace object","webpack://hubs/webpack/runtime/load script","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/index.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/aliases.generated.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/canonicalizer.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/emitter.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/likelySubtags.generated.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/parser.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/types.js","webpack://hubs/./node_modules/@formatjs/intl-locale/get_internal_slots.js","webpack://hubs/./node_modules/@formatjs/intl-locale/index.js","webpack://hubs/./node_modules/@formatjs/intl-locale/polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-locale/should-polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/abstract/GetOperands.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/abstract/InitializePluralRules.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/abstract/ResolvePlural.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/get_internal_slots.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/index.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/locale-data/en.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/should-polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/supported-locales.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/get_internal_slots.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/index.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/locale-data/en.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/utils.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/utils.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/types/date-time.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/skeleton.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/BestFitFormatMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/CanonicalizeLocaleList.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/CanonicalizeTimeZoneName.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/262.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/CoerceOptionsToObject.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/BasicFormatMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/DateTimeStyleFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/ToLocalTime.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PartitionPattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/PartitionDateTimePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTime.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/PartitionDateTimeRangePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimeRange.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimeRangeToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimeToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/ToDateTimeOptions.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/GetOption.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/BestAvailableLocale.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/UnicodeExtensionValue.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/ResolveLocale.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/LookupMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/BestFitMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsValidTimeZoneName.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DefaultNumberOption.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/GetNumberOption.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/InitializeDateTimeFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsWellFormedCurrencyCode.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DisplayNames/CanonicalCodeForDisplayNames.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/GetOptionsObject.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsSanctionedSimpleUnitIdentifier.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsWellFormedUnitIdentifier.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ComputeExponentForMagnitude.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ToRawPrecision.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ToRawFixed.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/FormatNumericToString.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ComputeExponent.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/CurrencyDigits.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/format_to_parts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/PartitionNumberPattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/FormatNumericToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/SetNumberFormatUnitOptions.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/SetNumberFormatDigitOptions.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/InitializeNumberFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PluralRules/GetOperands.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PluralRules/InitializePluralRules.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PluralRules/ResolvePlural.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/SingularRelativeTimeUnit.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/MakePartsList.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/PartitionRelativeTimePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/FormatRelativeTime.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/FormatRelativeTimeToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/InitializeRelativeTimeFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/data.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/SupportedLocales.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/LookupSupportedLocales.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/should-polyfill.js","webpack://hubs/./src/assets/locales/locale_config.js","webpack://hubs/./src/utils/i18n.js","webpack://hubs/./src/utils/configs.js","webpack://hubs/./node_modules/deepmerge/dist/es.js","webpack://hubs/./src/utils/qs_truthy.js","webpack://hubs/./src/utils/detect-touchscreen.js","webpack://hubs/./src/utils/is-mobile.js","webpack://hubs/./src/utils/phoenix-utils.js","webpack://hubs/./src/utils/identity.js","webpack://hubs/./src/utils/media-devices-utils.js","webpack://hubs/./src/constants.ts","webpack://hubs/./src/storage/store.js","webpack://hubs/./src/utils/store-instance.ts","webpack://hubs/./src/utils/theme.js","webpack://hubs/./src/utils/async-utils.js","webpack://hubs/./src/utils/logging.js","webpack://hubs/./src/react-components/wrapped-intl-provider.js","webpack://hubs/./src/utils/disable-ios-zoom.js","webpack://hubs/./src/components/environment-map.js","webpack://hubs/./node_modules/three-gltf-extensions/loaders/GLB_range_requests/GLB_range_requests.js","webpack://hubs/./node_modules/three-gltf-extensions/loaders/MSFT_lod/MSFT_lod.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVHNode.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/ArrayBoxUtilities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/buildFunctions.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/SeparatingAxisBounds.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/MathUtilities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/SeparatingAxisTriangle.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/OrientedBox.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/TriangleUtils.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/ThreeIntersectionUtilities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/RayIntersectTriUtlities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/castFunctions.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Constants.js","webpack://hubs/./node_modules/three-mesh-bvh/src/castFunctionsBuffer.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVH.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVHVisualizer.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVHDebug.js","webpack://hubs/./node_modules/three-mesh-bvh/src/index.js","webpack://hubs/./src/loaders/HubsTextureLoader.js","webpack://hubs/./src/utils/material-utils.js","webpack://hubs/./src/utils/media-url-utils.js","webpack://hubs/./src/camera-layers.ts","webpack://hubs/./src/utils/three-utils.js","webpack://hubs/./src/components/gltf-model-plus.js","webpack://hubs/./src/utils/promisify-worker.js","webpack://hubs/./src/workers/sketchfab-zip.worker.js","webpack://hubs/./src/utils/next-tick.js","webpack://hubs/./src/utils/avatar-utils.js","webpack://hubs/./src/utils/image-bitmap-utils.js","webpack://hubs/./src/assets/stylesheets/avatar-preview.scss","webpack://hubs/./src/react-components/avatar-preview.js","webpack://hubs/./src/assets/stylesheets/avatar.scss","webpack://hubs/./src/react-components/styles/theme.js","webpack://hubs/./src/avatar.js","webpack://hubs/./node_modules/process/browser.js","webpack://hubs/./node_modules/url/node_modules/punycode/punycode.js","webpack://hubs/./node_modules/url/node_modules/querystring/decode.js","webpack://hubs/./node_modules/url/node_modules/querystring/encode.js","webpack://hubs/./node_modules/url/node_modules/querystring/index.js","webpack://hubs/./node_modules/url/url.js","webpack://hubs/./node_modules/url/util.js","webpack://hubs/./node_modules/worker-loader/dist/runtime/inline.js","webpack://hubs/./src/assets/locales/ lazy ^\\.\\/.*\\.json$ namespace object","webpack://hubs/./node_modules/bitecs/dist/index.mjs","webpack://hubs/webpack/bootstrap","webpack://hubs/webpack/runtime/compat get default export","webpack://hubs/webpack/runtime/define property getters","webpack://hubs/webpack/runtime/ensure chunk","webpack://hubs/webpack/runtime/get javascript chunk filename","webpack://hubs/webpack/runtime/get mini-css chunk filename","webpack://hubs/webpack/runtime/global","webpack://hubs/webpack/runtime/hasOwnProperty shorthand","webpack://hubs/webpack/runtime/make namespace object","webpack://hubs/webpack/runtime/node module decorator","webpack://hubs/webpack/runtime/runtimeId","webpack://hubs/webpack/runtime/publicPath","webpack://hubs/webpack/runtime/jsonp chunk loading","webpack://hubs/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"hubs:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isUnicodeLanguageSubtag = exports.isUnicodeScriptSubtag = exports.isUnicodeRegionSubtag = exports.isStructurallyValidLanguageTag = exports.parseUnicodeLanguageId = exports.parseUnicodeLocaleId = exports.getCanonicalLocales = void 0;\nvar tslib_1 = require(\"tslib\");\nvar parser_1 = require(\"./src/parser\");\nvar emitter_1 = require(\"./src/emitter\");\nvar canonicalizer_1 = require(\"./src/canonicalizer\");\n/**\n * https://tc39.es/ecma402/#sec-canonicalizelocalelist\n * @param locales\n */\nfunction CanonicalizeLocaleList(locales) {\n    if (locales === undefined) {\n        return [];\n    }\n    var seen = [];\n    if (typeof locales === 'string') {\n        locales = [locales];\n    }\n    for (var _i = 0, locales_1 = locales; _i < locales_1.length; _i++) {\n        var locale = locales_1[_i];\n        var canonicalizedTag = (0, emitter_1.emitUnicodeLocaleId)((0, canonicalizer_1.canonicalizeUnicodeLocaleId)((0, parser_1.parseUnicodeLocaleId)(locale)));\n        if (seen.indexOf(canonicalizedTag) < 0) {\n            seen.push(canonicalizedTag);\n        }\n    }\n    return seen;\n}\nfunction getCanonicalLocales(locales) {\n    return CanonicalizeLocaleList(locales);\n}\nexports.getCanonicalLocales = getCanonicalLocales;\nvar parser_2 = require(\"./src/parser\");\nObject.defineProperty(exports, \"parseUnicodeLocaleId\", { enumerable: true, get: function () { return parser_2.parseUnicodeLocaleId; } });\nObject.defineProperty(exports, \"parseUnicodeLanguageId\", { enumerable: true, get: function () { return parser_2.parseUnicodeLanguageId; } });\nObject.defineProperty(exports, \"isStructurallyValidLanguageTag\", { enumerable: true, get: function () { return parser_2.isStructurallyValidLanguageTag; } });\nObject.defineProperty(exports, \"isUnicodeRegionSubtag\", { enumerable: true, get: function () { return parser_2.isUnicodeRegionSubtag; } });\nObject.defineProperty(exports, \"isUnicodeScriptSubtag\", { enumerable: true, get: function () { return parser_2.isUnicodeScriptSubtag; } });\nObject.defineProperty(exports, \"isUnicodeLanguageSubtag\", { enumerable: true, get: function () { return parser_2.isUnicodeLanguageSubtag; } });\n(0, tslib_1.__exportStar)(require(\"./src/types\"), exports);\n(0, tslib_1.__exportStar)(require(\"./src/emitter\"), exports);\n(0, tslib_1.__exportStar)(require(\"./src/likelySubtags.generated\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.variantAlias = exports.scriptAlias = exports.territoryAlias = exports.languageAlias = void 0;\n/* @generated */\n// prettier-ignore  \nexports.languageAlias = {\n    \"aa-saaho\": \"ssy\",\n    \"aam\": \"aas\",\n    \"aar\": \"aa\",\n    \"abk\": \"ab\",\n    \"adp\": \"dz\",\n    \"afr\": \"af\",\n    \"agp\": \"apf\",\n    \"ais\": \"ami\",\n    \"aju\": \"jrb\",\n    \"aka\": \"ak\",\n    \"alb\": \"sq\",\n    \"als\": \"sq\",\n    \"amh\": \"am\",\n    \"ara\": \"ar\",\n    \"arb\": \"ar\",\n    \"arg\": \"an\",\n    \"arm\": \"hy\",\n    \"art-lojban\": \"jbo\",\n    \"asd\": \"snz\",\n    \"asm\": \"as\",\n    \"aue\": \"ktz\",\n    \"ava\": \"av\",\n    \"ave\": \"ae\",\n    \"aym\": \"ay\",\n    \"ayr\": \"ay\",\n    \"ayx\": \"nun\",\n    \"aze\": \"az\",\n    \"azj\": \"az\",\n    \"bak\": \"ba\",\n    \"bam\": \"bm\",\n    \"baq\": \"eu\",\n    \"baz\": \"nvo\",\n    \"bcc\": \"bal\",\n    \"bcl\": \"bik\",\n    \"bel\": \"be\",\n    \"ben\": \"bn\",\n    \"bgm\": \"bcg\",\n    \"bh\": \"bho\",\n    \"bhk\": \"fbl\",\n    \"bic\": \"bir\",\n    \"bih\": \"bho\",\n    \"bis\": \"bi\",\n    \"bjd\": \"drl\",\n    \"bjq\": \"bzc\",\n    \"bkb\": \"ebk\",\n    \"blg\": \"iba\",\n    \"bod\": \"bo\",\n    \"bos\": \"bs\",\n    \"bre\": \"br\",\n    \"btb\": \"beb\",\n    \"bul\": \"bg\",\n    \"bur\": \"my\",\n    \"bxk\": \"luy\",\n    \"bxr\": \"bua\",\n    \"cat\": \"ca\",\n    \"ccq\": \"rki\",\n    \"cel-gaulish\": \"xtg\",\n    \"ces\": \"cs\",\n    \"cha\": \"ch\",\n    \"che\": \"ce\",\n    \"chi\": \"zh\",\n    \"chu\": \"cu\",\n    \"chv\": \"cv\",\n    \"cjr\": \"mom\",\n    \"cka\": \"cmr\",\n    \"cld\": \"syr\",\n    \"cmk\": \"xch\",\n    \"cmn\": \"zh\",\n    \"cnr\": \"sr-ME\",\n    \"cor\": \"kw\",\n    \"cos\": \"co\",\n    \"coy\": \"pij\",\n    \"cqu\": \"quh\",\n    \"cre\": \"cr\",\n    \"cwd\": \"cr\",\n    \"cym\": \"cy\",\n    \"cze\": \"cs\",\n    \"daf\": \"dnj\",\n    \"dan\": \"da\",\n    \"dap\": \"njz\",\n    \"deu\": \"de\",\n    \"dgo\": \"doi\",\n    \"dhd\": \"mwr\",\n    \"dik\": \"din\",\n    \"diq\": \"zza\",\n    \"dit\": \"dif\",\n    \"div\": \"dv\",\n    \"djl\": \"dze\",\n    \"dkl\": \"aqd\",\n    \"drh\": \"mn\",\n    \"drr\": \"kzk\",\n    \"drw\": \"fa-AF\",\n    \"dud\": \"uth\",\n    \"duj\": \"dwu\",\n    \"dut\": \"nl\",\n    \"dwl\": \"dbt\",\n    \"dzo\": \"dz\",\n    \"ekk\": \"et\",\n    \"ell\": \"el\",\n    \"elp\": \"amq\",\n    \"emk\": \"man\",\n    \"en-GB-oed\": \"en-GB-oxendict\",\n    \"eng\": \"en\",\n    \"epo\": \"eo\",\n    \"esk\": \"ik\",\n    \"est\": \"et\",\n    \"eus\": \"eu\",\n    \"ewe\": \"ee\",\n    \"fao\": \"fo\",\n    \"fas\": \"fa\",\n    \"fat\": \"ak\",\n    \"fij\": \"fj\",\n    \"fin\": \"fi\",\n    \"fra\": \"fr\",\n    \"fre\": \"fr\",\n    \"fry\": \"fy\",\n    \"fuc\": \"ff\",\n    \"ful\": \"ff\",\n    \"gav\": \"dev\",\n    \"gaz\": \"om\",\n    \"gbc\": \"wny\",\n    \"gbo\": \"grb\",\n    \"geo\": \"ka\",\n    \"ger\": \"de\",\n    \"gfx\": \"vaj\",\n    \"ggn\": \"gvr\",\n    \"ggo\": \"esg\",\n    \"ggr\": \"gtu\",\n    \"gio\": \"aou\",\n    \"gla\": \"gd\",\n    \"gle\": \"ga\",\n    \"glg\": \"gl\",\n    \"gli\": \"kzk\",\n    \"glv\": \"gv\",\n    \"gno\": \"gon\",\n    \"gre\": \"el\",\n    \"grn\": \"gn\",\n    \"gti\": \"nyc\",\n    \"gug\": \"gn\",\n    \"guj\": \"gu\",\n    \"guv\": \"duz\",\n    \"gya\": \"gba\",\n    \"hat\": \"ht\",\n    \"hau\": \"ha\",\n    \"hbs\": \"sr-Latn\",\n    \"hdn\": \"hai\",\n    \"hea\": \"hmn\",\n    \"heb\": \"he\",\n    \"her\": \"hz\",\n    \"him\": \"srx\",\n    \"hin\": \"hi\",\n    \"hmo\": \"ho\",\n    \"hrr\": \"jal\",\n    \"hrv\": \"hr\",\n    \"hun\": \"hu\",\n    \"hy-arevmda\": \"hyw\",\n    \"hye\": \"hy\",\n    \"i-ami\": \"ami\",\n    \"i-bnn\": \"bnn\",\n    \"i-default\": \"en-x-i-default\",\n    \"i-enochian\": \"und-x-i-enochian\",\n    \"i-hak\": \"hak\",\n    \"i-klingon\": \"tlh\",\n    \"i-lux\": \"lb\",\n    \"i-mingo\": \"see-x-i-mingo\",\n    \"i-navajo\": \"nv\",\n    \"i-pwn\": \"pwn\",\n    \"i-tao\": \"tao\",\n    \"i-tay\": \"tay\",\n    \"i-tsu\": \"tsu\",\n    \"ibi\": \"opa\",\n    \"ibo\": \"ig\",\n    \"ice\": \"is\",\n    \"ido\": \"io\",\n    \"iii\": \"ii\",\n    \"ike\": \"iu\",\n    \"iku\": \"iu\",\n    \"ile\": \"ie\",\n    \"ill\": \"ilm\",\n    \"ilw\": \"gal\",\n    \"in\": \"id\",\n    \"ina\": \"ia\",\n    \"ind\": \"id\",\n    \"ipk\": \"ik\",\n    \"isl\": \"is\",\n    \"ita\": \"it\",\n    \"iw\": \"he\",\n    \"izi\": \"eza\",\n    \"jar\": \"jgk\",\n    \"jav\": \"jv\",\n    \"jeg\": \"oyb\",\n    \"ji\": \"yi\",\n    \"jpn\": \"ja\",\n    \"jw\": \"jv\",\n    \"kal\": \"kl\",\n    \"kan\": \"kn\",\n    \"kas\": \"ks\",\n    \"kat\": \"ka\",\n    \"kau\": \"kr\",\n    \"kaz\": \"kk\",\n    \"kdv\": \"zkd\",\n    \"kgc\": \"tdf\",\n    \"kgd\": \"ncq\",\n    \"kgh\": \"kml\",\n    \"khk\": \"mn\",\n    \"khm\": \"km\",\n    \"kik\": \"ki\",\n    \"kin\": \"rw\",\n    \"kir\": \"ky\",\n    \"kmr\": \"ku\",\n    \"knc\": \"kr\",\n    \"kng\": \"kg\",\n    \"knn\": \"kok\",\n    \"koj\": \"kwv\",\n    \"kom\": \"kv\",\n    \"kon\": \"kg\",\n    \"kor\": \"ko\",\n    \"kpp\": \"jkm\",\n    \"kpv\": \"kv\",\n    \"krm\": \"bmf\",\n    \"ktr\": \"dtp\",\n    \"kua\": \"kj\",\n    \"kur\": \"ku\",\n    \"kvs\": \"gdj\",\n    \"kwq\": \"yam\",\n    \"kxe\": \"tvd\",\n    \"kxl\": \"kru\",\n    \"kzh\": \"dgl\",\n    \"kzj\": \"dtp\",\n    \"kzt\": \"dtp\",\n    \"lao\": \"lo\",\n    \"lat\": \"la\",\n    \"lav\": \"lv\",\n    \"lbk\": \"bnc\",\n    \"leg\": \"enl\",\n    \"lii\": \"raq\",\n    \"lim\": \"li\",\n    \"lin\": \"ln\",\n    \"lit\": \"lt\",\n    \"llo\": \"ngt\",\n    \"lmm\": \"rmx\",\n    \"ltz\": \"lb\",\n    \"lub\": \"lu\",\n    \"lug\": \"lg\",\n    \"lvs\": \"lv\",\n    \"mac\": \"mk\",\n    \"mah\": \"mh\",\n    \"mal\": \"ml\",\n    \"mao\": \"mi\",\n    \"mar\": \"mr\",\n    \"may\": \"ms\",\n    \"meg\": \"cir\",\n    \"mgx\": \"jbk\",\n    \"mhr\": \"chm\",\n    \"mkd\": \"mk\",\n    \"mlg\": \"mg\",\n    \"mlt\": \"mt\",\n    \"mnk\": \"man\",\n    \"mnt\": \"wnn\",\n    \"mo\": \"ro\",\n    \"mof\": \"xnt\",\n    \"mol\": \"ro\",\n    \"mon\": \"mn\",\n    \"mri\": \"mi\",\n    \"msa\": \"ms\",\n    \"mst\": \"mry\",\n    \"mup\": \"raj\",\n    \"mwd\": \"dmw\",\n    \"mwj\": \"vaj\",\n    \"mya\": \"my\",\n    \"myd\": \"aog\",\n    \"myt\": \"mry\",\n    \"nad\": \"xny\",\n    \"nau\": \"na\",\n    \"nav\": \"nv\",\n    \"nbf\": \"nru\",\n    \"nbl\": \"nr\",\n    \"nbx\": \"ekc\",\n    \"ncp\": \"kdz\",\n    \"nde\": \"nd\",\n    \"ndo\": \"ng\",\n    \"nep\": \"ne\",\n    \"nld\": \"nl\",\n    \"nln\": \"azd\",\n    \"nlr\": \"nrk\",\n    \"nno\": \"nn\",\n    \"nns\": \"nbr\",\n    \"nnx\": \"ngv\",\n    \"no-bok\": \"nb\",\n    \"no-bokmal\": \"nb\",\n    \"no-nyn\": \"nn\",\n    \"no-nynorsk\": \"nn\",\n    \"nob\": \"nb\",\n    \"noo\": \"dtd\",\n    \"nor\": \"no\",\n    \"npi\": \"ne\",\n    \"nts\": \"pij\",\n    \"nxu\": \"bpp\",\n    \"nya\": \"ny\",\n    \"oci\": \"oc\",\n    \"ojg\": \"oj\",\n    \"oji\": \"oj\",\n    \"ori\": \"or\",\n    \"orm\": \"om\",\n    \"ory\": \"or\",\n    \"oss\": \"os\",\n    \"oun\": \"vaj\",\n    \"pan\": \"pa\",\n    \"pat\": \"kxr\",\n    \"pbu\": \"ps\",\n    \"pcr\": \"adx\",\n    \"per\": \"fa\",\n    \"pes\": \"fa\",\n    \"pli\": \"pi\",\n    \"plt\": \"mg\",\n    \"pmc\": \"huw\",\n    \"pmu\": \"phr\",\n    \"pnb\": \"lah\",\n    \"pol\": \"pl\",\n    \"por\": \"pt\",\n    \"ppa\": \"bfy\",\n    \"ppr\": \"lcq\",\n    \"prs\": \"fa-AF\",\n    \"pry\": \"prt\",\n    \"pus\": \"ps\",\n    \"puz\": \"pub\",\n    \"que\": \"qu\",\n    \"quz\": \"qu\",\n    \"rmr\": \"emx\",\n    \"rmy\": \"rom\",\n    \"roh\": \"rm\",\n    \"ron\": \"ro\",\n    \"rum\": \"ro\",\n    \"run\": \"rn\",\n    \"rus\": \"ru\",\n    \"sag\": \"sg\",\n    \"san\": \"sa\",\n    \"sap\": \"aqt\",\n    \"sca\": \"hle\",\n    \"scc\": \"sr\",\n    \"scr\": \"hr\",\n    \"sgl\": \"isk\",\n    \"sgn-BE-FR\": \"sfb\",\n    \"sgn-BE-NL\": \"vgt\",\n    \"sgn-BR\": \"bzs\",\n    \"sgn-CH-DE\": \"sgg\",\n    \"sgn-CO\": \"csn\",\n    \"sgn-DE\": \"gsg\",\n    \"sgn-DK\": \"dsl\",\n    \"sgn-ES\": \"ssp\",\n    \"sgn-FR\": \"fsl\",\n    \"sgn-GB\": \"bfi\",\n    \"sgn-GR\": \"gss\",\n    \"sgn-IE\": \"isg\",\n    \"sgn-IT\": \"ise\",\n    \"sgn-JP\": \"jsl\",\n    \"sgn-MX\": \"mfs\",\n    \"sgn-NI\": \"ncs\",\n    \"sgn-NL\": \"dse\",\n    \"sgn-NO\": \"nsi\",\n    \"sgn-PT\": \"psr\",\n    \"sgn-SE\": \"swl\",\n    \"sgn-US\": \"ase\",\n    \"sgn-ZA\": \"sfs\",\n    \"sh\": \"sr-Latn\",\n    \"sin\": \"si\",\n    \"skk\": \"oyb\",\n    \"slk\": \"sk\",\n    \"slo\": \"sk\",\n    \"slv\": \"sl\",\n    \"sme\": \"se\",\n    \"smo\": \"sm\",\n    \"sna\": \"sn\",\n    \"snd\": \"sd\",\n    \"som\": \"so\",\n    \"sot\": \"st\",\n    \"spa\": \"es\",\n    \"spy\": \"kln\",\n    \"sqi\": \"sq\",\n    \"src\": \"sc\",\n    \"srd\": \"sc\",\n    \"srp\": \"sr\",\n    \"ssw\": \"ss\",\n    \"sul\": \"sgd\",\n    \"sum\": \"ulw\",\n    \"sun\": \"su\",\n    \"swa\": \"sw\",\n    \"swc\": \"sw-CD\",\n    \"swe\": \"sv\",\n    \"swh\": \"sw\",\n    \"tah\": \"ty\",\n    \"tam\": \"ta\",\n    \"tat\": \"tt\",\n    \"tdu\": \"dtp\",\n    \"tel\": \"te\",\n    \"tgg\": \"bjp\",\n    \"tgk\": \"tg\",\n    \"tgl\": \"fil\",\n    \"tha\": \"th\",\n    \"thc\": \"tpo\",\n    \"thw\": \"ola\",\n    \"thx\": \"oyb\",\n    \"tib\": \"bo\",\n    \"tid\": \"itd\",\n    \"tie\": \"ras\",\n    \"tir\": \"ti\",\n    \"tkk\": \"twm\",\n    \"tl\": \"fil\",\n    \"tlw\": \"weo\",\n    \"tmp\": \"tyj\",\n    \"tne\": \"kak\",\n    \"tnf\": \"fa-AF\",\n    \"ton\": \"to\",\n    \"tsf\": \"taj\",\n    \"tsn\": \"tn\",\n    \"tso\": \"ts\",\n    \"ttq\": \"tmh\",\n    \"tuk\": \"tk\",\n    \"tur\": \"tr\",\n    \"tw\": \"ak\",\n    \"twi\": \"ak\",\n    \"uig\": \"ug\",\n    \"ukr\": \"uk\",\n    \"umu\": \"del\",\n    \"und-aaland\": \"und-AX\",\n    \"und-arevela\": \"und\",\n    \"und-arevmda\": \"und\",\n    \"und-bokmal\": \"und\",\n    \"und-hakka\": \"und\",\n    \"und-hepburn-heploc\": \"und-alalc97\",\n    \"und-lojban\": \"und\",\n    \"und-nynorsk\": \"und\",\n    \"und-saaho\": \"und\",\n    \"und-xiang\": \"und\",\n    \"unp\": \"wro\",\n    \"uok\": \"ema\",\n    \"urd\": \"ur\",\n    \"uzb\": \"uz\",\n    \"uzn\": \"uz\",\n    \"ven\": \"ve\",\n    \"vie\": \"vi\",\n    \"vol\": \"vo\",\n    \"wel\": \"cy\",\n    \"wgw\": \"wgb\",\n    \"wit\": \"nol\",\n    \"wiw\": \"nwo\",\n    \"wln\": \"wa\",\n    \"wol\": \"wo\",\n    \"xba\": \"cax\",\n    \"xho\": \"xh\",\n    \"xia\": \"acn\",\n    \"xkh\": \"waw\",\n    \"xpe\": \"kpe\",\n    \"xrq\": \"dmw\",\n    \"xsj\": \"suj\",\n    \"xsl\": \"den\",\n    \"ybd\": \"rki\",\n    \"ydd\": \"yi\",\n    \"yen\": \"ynq\",\n    \"yid\": \"yi\",\n    \"yiy\": \"yrm\",\n    \"yma\": \"lrr\",\n    \"ymt\": \"mtm\",\n    \"yor\": \"yo\",\n    \"yos\": \"zom\",\n    \"yuu\": \"yug\",\n    \"zai\": \"zap\",\n    \"zh-cmn\": \"zh\",\n    \"zh-cmn-Hans\": \"zh-Hans\",\n    \"zh-cmn-Hant\": \"zh-Hant\",\n    \"zh-gan\": \"gan\",\n    \"zh-guoyu\": \"zh\",\n    \"zh-hakka\": \"hak\",\n    \"zh-min\": \"nan-x-zh-min\",\n    \"zh-min-nan\": \"nan\",\n    \"zh-wuu\": \"wuu\",\n    \"zh-xiang\": \"hsn\",\n    \"zh-yue\": \"yue\",\n    \"zha\": \"za\",\n    \"zho\": \"zh\",\n    \"zir\": \"scv\",\n    \"zsm\": \"ms\",\n    \"zul\": \"zu\",\n    \"zyb\": \"za\"\n};\nexports.territoryAlias = {\n    \"100\": \"BG\",\n    \"104\": \"MM\",\n    \"108\": \"BI\",\n    \"112\": \"BY\",\n    \"116\": \"KH\",\n    \"120\": \"CM\",\n    \"124\": \"CA\",\n    \"132\": \"CV\",\n    \"136\": \"KY\",\n    \"140\": \"CF\",\n    \"144\": \"LK\",\n    \"148\": \"TD\",\n    \"152\": \"CL\",\n    \"156\": \"CN\",\n    \"158\": \"TW\",\n    \"162\": \"CX\",\n    \"166\": \"CC\",\n    \"170\": \"CO\",\n    \"172\": \"RU AM AZ BY GE KG KZ MD TJ TM UA UZ\",\n    \"174\": \"KM\",\n    \"175\": \"YT\",\n    \"178\": \"CG\",\n    \"180\": \"CD\",\n    \"184\": \"CK\",\n    \"188\": \"CR\",\n    \"191\": \"HR\",\n    \"192\": \"CU\",\n    \"196\": \"CY\",\n    \"200\": \"CZ SK\",\n    \"203\": \"CZ\",\n    \"204\": \"BJ\",\n    \"208\": \"DK\",\n    \"212\": \"DM\",\n    \"214\": \"DO\",\n    \"218\": \"EC\",\n    \"222\": \"SV\",\n    \"226\": \"GQ\",\n    \"230\": \"ET\",\n    \"231\": \"ET\",\n    \"232\": \"ER\",\n    \"233\": \"EE\",\n    \"234\": \"FO\",\n    \"238\": \"FK\",\n    \"239\": \"GS\",\n    \"242\": \"FJ\",\n    \"246\": \"FI\",\n    \"248\": \"AX\",\n    \"249\": \"FR\",\n    \"250\": \"FR\",\n    \"254\": \"GF\",\n    \"258\": \"PF\",\n    \"260\": \"TF\",\n    \"262\": \"DJ\",\n    \"266\": \"GA\",\n    \"268\": \"GE\",\n    \"270\": \"GM\",\n    \"275\": \"PS\",\n    \"276\": \"DE\",\n    \"278\": \"DE\",\n    \"280\": \"DE\",\n    \"288\": \"GH\",\n    \"292\": \"GI\",\n    \"296\": \"KI\",\n    \"300\": \"GR\",\n    \"304\": \"GL\",\n    \"308\": \"GD\",\n    \"312\": \"GP\",\n    \"316\": \"GU\",\n    \"320\": \"GT\",\n    \"324\": \"GN\",\n    \"328\": \"GY\",\n    \"332\": \"HT\",\n    \"334\": \"HM\",\n    \"336\": \"VA\",\n    \"340\": \"HN\",\n    \"344\": \"HK\",\n    \"348\": \"HU\",\n    \"352\": \"IS\",\n    \"356\": \"IN\",\n    \"360\": \"ID\",\n    \"364\": \"IR\",\n    \"368\": \"IQ\",\n    \"372\": \"IE\",\n    \"376\": \"IL\",\n    \"380\": \"IT\",\n    \"384\": \"CI\",\n    \"388\": \"JM\",\n    \"392\": \"JP\",\n    \"398\": \"KZ\",\n    \"400\": \"JO\",\n    \"404\": \"KE\",\n    \"408\": \"KP\",\n    \"410\": \"KR\",\n    \"414\": \"KW\",\n    \"417\": \"KG\",\n    \"418\": \"LA\",\n    \"422\": \"LB\",\n    \"426\": \"LS\",\n    \"428\": \"LV\",\n    \"430\": \"LR\",\n    \"434\": \"LY\",\n    \"438\": \"LI\",\n    \"440\": \"LT\",\n    \"442\": \"LU\",\n    \"446\": \"MO\",\n    \"450\": \"MG\",\n    \"454\": \"MW\",\n    \"458\": \"MY\",\n    \"462\": \"MV\",\n    \"466\": \"ML\",\n    \"470\": \"MT\",\n    \"474\": \"MQ\",\n    \"478\": \"MR\",\n    \"480\": \"MU\",\n    \"484\": \"MX\",\n    \"492\": \"MC\",\n    \"496\": \"MN\",\n    \"498\": \"MD\",\n    \"499\": \"ME\",\n    \"500\": \"MS\",\n    \"504\": \"MA\",\n    \"508\": \"MZ\",\n    \"512\": \"OM\",\n    \"516\": \"NA\",\n    \"520\": \"NR\",\n    \"524\": \"NP\",\n    \"528\": \"NL\",\n    \"530\": \"CW SX BQ\",\n    \"531\": \"CW\",\n    \"532\": \"CW SX BQ\",\n    \"533\": \"AW\",\n    \"534\": \"SX\",\n    \"535\": \"BQ\",\n    \"536\": \"SA IQ\",\n    \"540\": \"NC\",\n    \"548\": \"VU\",\n    \"554\": \"NZ\",\n    \"558\": \"NI\",\n    \"562\": \"NE\",\n    \"566\": \"NG\",\n    \"570\": \"NU\",\n    \"574\": \"NF\",\n    \"578\": \"NO\",\n    \"580\": \"MP\",\n    \"581\": \"UM\",\n    \"582\": \"FM MH MP PW\",\n    \"583\": \"FM\",\n    \"584\": \"MH\",\n    \"585\": \"PW\",\n    \"586\": \"PK\",\n    \"591\": \"PA\",\n    \"598\": \"PG\",\n    \"600\": \"PY\",\n    \"604\": \"PE\",\n    \"608\": \"PH\",\n    \"612\": \"PN\",\n    \"616\": \"PL\",\n    \"620\": \"PT\",\n    \"624\": \"GW\",\n    \"626\": \"TL\",\n    \"630\": \"PR\",\n    \"634\": \"QA\",\n    \"638\": \"RE\",\n    \"642\": \"RO\",\n    \"643\": \"RU\",\n    \"646\": \"RW\",\n    \"652\": \"BL\",\n    \"654\": \"SH\",\n    \"659\": \"KN\",\n    \"660\": \"AI\",\n    \"662\": \"LC\",\n    \"663\": \"MF\",\n    \"666\": \"PM\",\n    \"670\": \"VC\",\n    \"674\": \"SM\",\n    \"678\": \"ST\",\n    \"682\": \"SA\",\n    \"686\": \"SN\",\n    \"688\": \"RS\",\n    \"690\": \"SC\",\n    \"694\": \"SL\",\n    \"702\": \"SG\",\n    \"703\": \"SK\",\n    \"704\": \"VN\",\n    \"705\": \"SI\",\n    \"706\": \"SO\",\n    \"710\": \"ZA\",\n    \"716\": \"ZW\",\n    \"720\": \"YE\",\n    \"724\": \"ES\",\n    \"728\": \"SS\",\n    \"729\": \"SD\",\n    \"732\": \"EH\",\n    \"736\": \"SD\",\n    \"740\": \"SR\",\n    \"744\": \"SJ\",\n    \"748\": \"SZ\",\n    \"752\": \"SE\",\n    \"756\": \"CH\",\n    \"760\": \"SY\",\n    \"762\": \"TJ\",\n    \"764\": \"TH\",\n    \"768\": \"TG\",\n    \"772\": \"TK\",\n    \"776\": \"TO\",\n    \"780\": \"TT\",\n    \"784\": \"AE\",\n    \"788\": \"TN\",\n    \"792\": \"TR\",\n    \"795\": \"TM\",\n    \"796\": \"TC\",\n    \"798\": \"TV\",\n    \"800\": \"UG\",\n    \"804\": \"UA\",\n    \"807\": \"MK\",\n    \"810\": \"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ\",\n    \"818\": \"EG\",\n    \"826\": \"GB\",\n    \"830\": \"JE GG\",\n    \"831\": \"GG\",\n    \"832\": \"JE\",\n    \"833\": \"IM\",\n    \"834\": \"TZ\",\n    \"840\": \"US\",\n    \"850\": \"VI\",\n    \"854\": \"BF\",\n    \"858\": \"UY\",\n    \"860\": \"UZ\",\n    \"862\": \"VE\",\n    \"876\": \"WF\",\n    \"882\": \"WS\",\n    \"886\": \"YE\",\n    \"887\": \"YE\",\n    \"890\": \"RS ME SI HR MK BA\",\n    \"891\": \"RS ME\",\n    \"894\": \"ZM\",\n    \"958\": \"AA\",\n    \"959\": \"QM\",\n    \"960\": \"QN\",\n    \"962\": \"QP\",\n    \"963\": \"QQ\",\n    \"964\": \"QR\",\n    \"965\": \"QS\",\n    \"966\": \"QT\",\n    \"967\": \"EU\",\n    \"968\": \"QV\",\n    \"969\": \"QW\",\n    \"970\": \"QX\",\n    \"971\": \"QY\",\n    \"972\": \"QZ\",\n    \"973\": \"XA\",\n    \"974\": \"XB\",\n    \"975\": \"XC\",\n    \"976\": \"XD\",\n    \"977\": \"XE\",\n    \"978\": \"XF\",\n    \"979\": \"XG\",\n    \"980\": \"XH\",\n    \"981\": \"XI\",\n    \"982\": \"XJ\",\n    \"983\": \"XK\",\n    \"984\": \"XL\",\n    \"985\": \"XM\",\n    \"986\": \"XN\",\n    \"987\": \"XO\",\n    \"988\": \"XP\",\n    \"989\": \"XQ\",\n    \"990\": \"XR\",\n    \"991\": \"XS\",\n    \"992\": \"XT\",\n    \"993\": \"XU\",\n    \"994\": \"XV\",\n    \"995\": \"XW\",\n    \"996\": \"XX\",\n    \"997\": \"XY\",\n    \"998\": \"XZ\",\n    \"999\": \"ZZ\",\n    \"004\": \"AF\",\n    \"008\": \"AL\",\n    \"010\": \"AQ\",\n    \"012\": \"DZ\",\n    \"016\": \"AS\",\n    \"020\": \"AD\",\n    \"024\": \"AO\",\n    \"028\": \"AG\",\n    \"031\": \"AZ\",\n    \"032\": \"AR\",\n    \"036\": \"AU\",\n    \"040\": \"AT\",\n    \"044\": \"BS\",\n    \"048\": \"BH\",\n    \"050\": \"BD\",\n    \"051\": \"AM\",\n    \"052\": \"BB\",\n    \"056\": \"BE\",\n    \"060\": \"BM\",\n    \"062\": \"034 143\",\n    \"064\": \"BT\",\n    \"068\": \"BO\",\n    \"070\": \"BA\",\n    \"072\": \"BW\",\n    \"074\": \"BV\",\n    \"076\": \"BR\",\n    \"084\": \"BZ\",\n    \"086\": \"IO\",\n    \"090\": \"SB\",\n    \"092\": \"VG\",\n    \"096\": \"BN\",\n    \"AAA\": \"AA\",\n    \"ABW\": \"AW\",\n    \"AFG\": \"AF\",\n    \"AGO\": \"AO\",\n    \"AIA\": \"AI\",\n    \"ALA\": \"AX\",\n    \"ALB\": \"AL\",\n    \"AN\": \"CW SX BQ\",\n    \"AND\": \"AD\",\n    \"ANT\": \"CW SX BQ\",\n    \"ARE\": \"AE\",\n    \"ARG\": \"AR\",\n    \"ARM\": \"AM\",\n    \"ASC\": \"AC\",\n    \"ASM\": \"AS\",\n    \"ATA\": \"AQ\",\n    \"ATF\": \"TF\",\n    \"ATG\": \"AG\",\n    \"AUS\": \"AU\",\n    \"AUT\": \"AT\",\n    \"AZE\": \"AZ\",\n    \"BDI\": \"BI\",\n    \"BEL\": \"BE\",\n    \"BEN\": \"BJ\",\n    \"BES\": \"BQ\",\n    \"BFA\": \"BF\",\n    \"BGD\": \"BD\",\n    \"BGR\": \"BG\",\n    \"BHR\": \"BH\",\n    \"BHS\": \"BS\",\n    \"BIH\": \"BA\",\n    \"BLM\": \"BL\",\n    \"BLR\": \"BY\",\n    \"BLZ\": \"BZ\",\n    \"BMU\": \"BM\",\n    \"BOL\": \"BO\",\n    \"BRA\": \"BR\",\n    \"BRB\": \"BB\",\n    \"BRN\": \"BN\",\n    \"BTN\": \"BT\",\n    \"BU\": \"MM\",\n    \"BUR\": \"MM\",\n    \"BVT\": \"BV\",\n    \"BWA\": \"BW\",\n    \"CAF\": \"CF\",\n    \"CAN\": \"CA\",\n    \"CCK\": \"CC\",\n    \"CHE\": \"CH\",\n    \"CHL\": \"CL\",\n    \"CHN\": \"CN\",\n    \"CIV\": \"CI\",\n    \"CMR\": \"CM\",\n    \"COD\": \"CD\",\n    \"COG\": \"CG\",\n    \"COK\": \"CK\",\n    \"COL\": \"CO\",\n    \"COM\": \"KM\",\n    \"CPT\": \"CP\",\n    \"CPV\": \"CV\",\n    \"CRI\": \"CR\",\n    \"CS\": \"RS ME\",\n    \"CT\": \"KI\",\n    \"CUB\": \"CU\",\n    \"CUW\": \"CW\",\n    \"CXR\": \"CX\",\n    \"CYM\": \"KY\",\n    \"CYP\": \"CY\",\n    \"CZE\": \"CZ\",\n    \"DD\": \"DE\",\n    \"DDR\": \"DE\",\n    \"DEU\": \"DE\",\n    \"DGA\": \"DG\",\n    \"DJI\": \"DJ\",\n    \"DMA\": \"DM\",\n    \"DNK\": \"DK\",\n    \"DOM\": \"DO\",\n    \"DY\": \"BJ\",\n    \"DZA\": \"DZ\",\n    \"ECU\": \"EC\",\n    \"EGY\": \"EG\",\n    \"ERI\": \"ER\",\n    \"ESH\": \"EH\",\n    \"ESP\": \"ES\",\n    \"EST\": \"EE\",\n    \"ETH\": \"ET\",\n    \"FIN\": \"FI\",\n    \"FJI\": \"FJ\",\n    \"FLK\": \"FK\",\n    \"FQ\": \"AQ TF\",\n    \"FRA\": \"FR\",\n    \"FRO\": \"FO\",\n    \"FSM\": \"FM\",\n    \"FX\": \"FR\",\n    \"FXX\": \"FR\",\n    \"GAB\": \"GA\",\n    \"GBR\": \"GB\",\n    \"GEO\": \"GE\",\n    \"GGY\": \"GG\",\n    \"GHA\": \"GH\",\n    \"GIB\": \"GI\",\n    \"GIN\": \"GN\",\n    \"GLP\": \"GP\",\n    \"GMB\": \"GM\",\n    \"GNB\": \"GW\",\n    \"GNQ\": \"GQ\",\n    \"GRC\": \"GR\",\n    \"GRD\": \"GD\",\n    \"GRL\": \"GL\",\n    \"GTM\": \"GT\",\n    \"GUF\": \"GF\",\n    \"GUM\": \"GU\",\n    \"GUY\": \"GY\",\n    \"HKG\": \"HK\",\n    \"HMD\": \"HM\",\n    \"HND\": \"HN\",\n    \"HRV\": \"HR\",\n    \"HTI\": \"HT\",\n    \"HUN\": \"HU\",\n    \"HV\": \"BF\",\n    \"IDN\": \"ID\",\n    \"IMN\": \"IM\",\n    \"IND\": \"IN\",\n    \"IOT\": \"IO\",\n    \"IRL\": \"IE\",\n    \"IRN\": \"IR\",\n    \"IRQ\": \"IQ\",\n    \"ISL\": \"IS\",\n    \"ISR\": \"IL\",\n    \"ITA\": \"IT\",\n    \"JAM\": \"JM\",\n    \"JEY\": \"JE\",\n    \"JOR\": \"JO\",\n    \"JPN\": \"JP\",\n    \"JT\": \"UM\",\n    \"KAZ\": \"KZ\",\n    \"KEN\": \"KE\",\n    \"KGZ\": \"KG\",\n    \"KHM\": \"KH\",\n    \"KIR\": \"KI\",\n    \"KNA\": \"KN\",\n    \"KOR\": \"KR\",\n    \"KWT\": \"KW\",\n    \"LAO\": \"LA\",\n    \"LBN\": \"LB\",\n    \"LBR\": \"LR\",\n    \"LBY\": \"LY\",\n    \"LCA\": \"LC\",\n    \"LIE\": \"LI\",\n    \"LKA\": \"LK\",\n    \"LSO\": \"LS\",\n    \"LTU\": \"LT\",\n    \"LUX\": \"LU\",\n    \"LVA\": \"LV\",\n    \"MAC\": \"MO\",\n    \"MAF\": \"MF\",\n    \"MAR\": \"MA\",\n    \"MCO\": \"MC\",\n    \"MDA\": \"MD\",\n    \"MDG\": \"MG\",\n    \"MDV\": \"MV\",\n    \"MEX\": \"MX\",\n    \"MHL\": \"MH\",\n    \"MI\": \"UM\",\n    \"MKD\": \"MK\",\n    \"MLI\": \"ML\",\n    \"MLT\": \"MT\",\n    \"MMR\": \"MM\",\n    \"MNE\": \"ME\",\n    \"MNG\": \"MN\",\n    \"MNP\": \"MP\",\n    \"MOZ\": \"MZ\",\n    \"MRT\": \"MR\",\n    \"MSR\": \"MS\",\n    \"MTQ\": \"MQ\",\n    \"MUS\": \"MU\",\n    \"MWI\": \"MW\",\n    \"MYS\": \"MY\",\n    \"MYT\": \"YT\",\n    \"NAM\": \"NA\",\n    \"NCL\": \"NC\",\n    \"NER\": \"NE\",\n    \"NFK\": \"NF\",\n    \"NGA\": \"NG\",\n    \"NH\": \"VU\",\n    \"NIC\": \"NI\",\n    \"NIU\": \"NU\",\n    \"NLD\": \"NL\",\n    \"NOR\": \"NO\",\n    \"NPL\": \"NP\",\n    \"NQ\": \"AQ\",\n    \"NRU\": \"NR\",\n    \"NT\": \"SA IQ\",\n    \"NTZ\": \"SA IQ\",\n    \"NZL\": \"NZ\",\n    \"OMN\": \"OM\",\n    \"PAK\": \"PK\",\n    \"PAN\": \"PA\",\n    \"PC\": \"FM MH MP PW\",\n    \"PCN\": \"PN\",\n    \"PER\": \"PE\",\n    \"PHL\": \"PH\",\n    \"PLW\": \"PW\",\n    \"PNG\": \"PG\",\n    \"POL\": \"PL\",\n    \"PRI\": \"PR\",\n    \"PRK\": \"KP\",\n    \"PRT\": \"PT\",\n    \"PRY\": \"PY\",\n    \"PSE\": \"PS\",\n    \"PU\": \"UM\",\n    \"PYF\": \"PF\",\n    \"PZ\": \"PA\",\n    \"QAT\": \"QA\",\n    \"QMM\": \"QM\",\n    \"QNN\": \"QN\",\n    \"QPP\": \"QP\",\n    \"QQQ\": \"QQ\",\n    \"QRR\": \"QR\",\n    \"QSS\": \"QS\",\n    \"QTT\": \"QT\",\n    \"QU\": \"EU\",\n    \"QUU\": \"EU\",\n    \"QVV\": \"QV\",\n    \"QWW\": \"QW\",\n    \"QXX\": \"QX\",\n    \"QYY\": \"QY\",\n    \"QZZ\": \"QZ\",\n    \"REU\": \"RE\",\n    \"RH\": \"ZW\",\n    \"ROU\": \"RO\",\n    \"RUS\": \"RU\",\n    \"RWA\": \"RW\",\n    \"SAU\": \"SA\",\n    \"SCG\": \"RS ME\",\n    \"SDN\": \"SD\",\n    \"SEN\": \"SN\",\n    \"SGP\": \"SG\",\n    \"SGS\": \"GS\",\n    \"SHN\": \"SH\",\n    \"SJM\": \"SJ\",\n    \"SLB\": \"SB\",\n    \"SLE\": \"SL\",\n    \"SLV\": \"SV\",\n    \"SMR\": \"SM\",\n    \"SOM\": \"SO\",\n    \"SPM\": \"PM\",\n    \"SRB\": \"RS\",\n    \"SSD\": \"SS\",\n    \"STP\": \"ST\",\n    \"SU\": \"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ\",\n    \"SUN\": \"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ\",\n    \"SUR\": \"SR\",\n    \"SVK\": \"SK\",\n    \"SVN\": \"SI\",\n    \"SWE\": \"SE\",\n    \"SWZ\": \"SZ\",\n    \"SXM\": \"SX\",\n    \"SYC\": \"SC\",\n    \"SYR\": \"SY\",\n    \"TAA\": \"TA\",\n    \"TCA\": \"TC\",\n    \"TCD\": \"TD\",\n    \"TGO\": \"TG\",\n    \"THA\": \"TH\",\n    \"TJK\": \"TJ\",\n    \"TKL\": \"TK\",\n    \"TKM\": \"TM\",\n    \"TLS\": \"TL\",\n    \"TMP\": \"TL\",\n    \"TON\": \"TO\",\n    \"TP\": \"TL\",\n    \"TTO\": \"TT\",\n    \"TUN\": \"TN\",\n    \"TUR\": \"TR\",\n    \"TUV\": \"TV\",\n    \"TWN\": \"TW\",\n    \"TZA\": \"TZ\",\n    \"UGA\": \"UG\",\n    \"UK\": \"GB\",\n    \"UKR\": \"UA\",\n    \"UMI\": \"UM\",\n    \"URY\": \"UY\",\n    \"USA\": \"US\",\n    \"UZB\": \"UZ\",\n    \"VAT\": \"VA\",\n    \"VCT\": \"VC\",\n    \"VD\": \"VN\",\n    \"VEN\": \"VE\",\n    \"VGB\": \"VG\",\n    \"VIR\": \"VI\",\n    \"VNM\": \"VN\",\n    \"VUT\": \"VU\",\n    \"WK\": \"UM\",\n    \"WLF\": \"WF\",\n    \"WSM\": \"WS\",\n    \"XAA\": \"XA\",\n    \"XBB\": \"XB\",\n    \"XCC\": \"XC\",\n    \"XDD\": \"XD\",\n    \"XEE\": \"XE\",\n    \"XFF\": \"XF\",\n    \"XGG\": \"XG\",\n    \"XHH\": \"XH\",\n    \"XII\": \"XI\",\n    \"XJJ\": \"XJ\",\n    \"XKK\": \"XK\",\n    \"XLL\": \"XL\",\n    \"XMM\": \"XM\",\n    \"XNN\": \"XN\",\n    \"XOO\": \"XO\",\n    \"XPP\": \"XP\",\n    \"XQQ\": \"XQ\",\n    \"XRR\": \"XR\",\n    \"XSS\": \"XS\",\n    \"XTT\": \"XT\",\n    \"XUU\": \"XU\",\n    \"XVV\": \"XV\",\n    \"XWW\": \"XW\",\n    \"XXX\": \"XX\",\n    \"XYY\": \"XY\",\n    \"XZZ\": \"XZ\",\n    \"YD\": \"YE\",\n    \"YEM\": \"YE\",\n    \"YMD\": \"YE\",\n    \"YU\": \"RS ME\",\n    \"YUG\": \"RS ME\",\n    \"ZAF\": \"ZA\",\n    \"ZAR\": \"CD\",\n    \"ZMB\": \"ZM\",\n    \"ZR\": \"CD\",\n    \"ZWE\": \"ZW\",\n    \"ZZZ\": \"ZZ\"\n};\nexports.scriptAlias = {\n    \"Qaai\": \"Zinh\"\n};\nexports.variantAlias = {\n    \"heploc\": \"alalc97\",\n    \"polytoni\": \"polyton\"\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canonicalizeUnicodeLocaleId = exports.canonicalizeUnicodeLanguageId = void 0;\nvar tslib_1 = require(\"tslib\");\nvar aliases_generated_1 = require(\"./aliases.generated\");\nvar parser_1 = require(\"./parser\");\nvar likelySubtags_generated_1 = require(\"./likelySubtags.generated\");\nvar emitter_1 = require(\"./emitter\");\nfunction canonicalizeAttrs(strs) {\n    return Object.keys(strs.reduce(function (all, str) {\n        all[str.toLowerCase()] = 1;\n        return all;\n    }, {})).sort();\n}\nfunction canonicalizeKVs(arr) {\n    var all = {};\n    var result = [];\n    for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n        var kv = arr_1[_i];\n        if (kv[0] in all) {\n            continue;\n        }\n        all[kv[0]] = 1;\n        if (!kv[1] || kv[1] === 'true') {\n            result.push([kv[0].toLowerCase()]);\n        }\n        else {\n            result.push([kv[0].toLowerCase(), kv[1].toLowerCase()]);\n        }\n    }\n    return result.sort(compareKV);\n}\nfunction compareKV(t1, t2) {\n    return t1[0] < t2[0] ? -1 : t1[0] > t2[0] ? 1 : 0;\n}\nfunction compareExtension(e1, e2) {\n    return e1.type < e2.type ? -1 : e1.type > e2.type ? 1 : 0;\n}\nfunction mergeVariants(v1, v2) {\n    var result = (0, tslib_1.__spreadArray)([], v1, true);\n    for (var _i = 0, v2_1 = v2; _i < v2_1.length; _i++) {\n        var v = v2_1[_i];\n        if (v1.indexOf(v) < 0) {\n            result.push(v);\n        }\n    }\n    return result;\n}\n/**\n * CAVEAT: We don't do this section in the spec bc they have no JSON data\n * Use the bcp47 data to replace keys, types, tfields, and tvalues by their canonical forms. See Section 3.6.4 U Extension Data Files) and Section 3.7.1 T Extension Data Files. The aliases are in the alias attribute value, while the canonical is in the name attribute value. For example,\nBecause of the following bcp47 data:\n<key name=\"ms\"…>…<type name=\"uksystem\" … alias=\"imperial\" … />…</key>\nWe get the following transformation:\nen-u-ms-imperial ⇒ en-u-ms-uksystem\n * @param lang\n */\nfunction canonicalizeUnicodeLanguageId(unicodeLanguageId) {\n    /**\n     * If the language subtag matches the type attribute of a languageAlias element in Supplemental Data, replace the language subtag with the replacement value.\n     *  1. If there are additional subtags in the replacement value, add them to the result, but only if there is no corresponding subtag already in the tag.\n     *  2. Five special deprecated grandfathered codes (such as i-default) are in type attributes, and are also replaced.\n     */\n    // From https://github.com/unicode-org/icu/blob/master/icu4j/main/classes/core/src/com/ibm/icu/util/ULocale.java#L1246\n    // Try language _ variant\n    var finalLangAst = unicodeLanguageId;\n    if (unicodeLanguageId.variants.length) {\n        var replacedLang_1 = '';\n        for (var _i = 0, _a = unicodeLanguageId.variants; _i < _a.length; _i++) {\n            var variant = _a[_i];\n            if ((replacedLang_1 =\n                aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n                    lang: unicodeLanguageId.lang,\n                    variants: [variant],\n                })])) {\n                var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_1.split(parser_1.SEPARATOR));\n                finalLangAst = {\n                    lang: replacedLangAst.lang,\n                    script: finalLangAst.script || replacedLangAst.script,\n                    region: finalLangAst.region || replacedLangAst.region,\n                    variants: mergeVariants(finalLangAst.variants, replacedLangAst.variants),\n                };\n                break;\n            }\n        }\n    }\n    // language _ script _ country\n    // ug-Arab-CN -> ug-CN\n    if (finalLangAst.script && finalLangAst.region) {\n        var replacedLang_2 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n            lang: finalLangAst.lang,\n            script: finalLangAst.script,\n            region: finalLangAst.region,\n            variants: [],\n        })];\n        if (replacedLang_2) {\n            var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_2.split(parser_1.SEPARATOR));\n            finalLangAst = {\n                lang: replacedLangAst.lang,\n                script: replacedLangAst.script,\n                region: replacedLangAst.region,\n                variants: finalLangAst.variants,\n            };\n        }\n    }\n    // language _ country\n    // eg. az_AZ -> az_Latn_A\n    if (finalLangAst.region) {\n        var replacedLang_3 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n            lang: finalLangAst.lang,\n            region: finalLangAst.region,\n            variants: [],\n        })];\n        if (replacedLang_3) {\n            var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_3.split(parser_1.SEPARATOR));\n            finalLangAst = {\n                lang: replacedLangAst.lang,\n                script: finalLangAst.script || replacedLangAst.script,\n                region: replacedLangAst.region,\n                variants: finalLangAst.variants,\n            };\n        }\n    }\n    // only language\n    // e.g. twi -> ak\n    var replacedLang = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n        lang: finalLangAst.lang,\n        variants: [],\n    })];\n    if (replacedLang) {\n        var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang.split(parser_1.SEPARATOR));\n        finalLangAst = {\n            lang: replacedLangAst.lang,\n            script: finalLangAst.script || replacedLangAst.script,\n            region: finalLangAst.region || replacedLangAst.region,\n            variants: finalLangAst.variants,\n        };\n    }\n    if (finalLangAst.region) {\n        var region = finalLangAst.region.toUpperCase();\n        var regionAlias = aliases_generated_1.territoryAlias[region];\n        var replacedRegion = void 0;\n        if (regionAlias) {\n            var regions = regionAlias.split(' ');\n            replacedRegion = regions[0];\n            var likelySubtag = likelySubtags_generated_1.likelySubtags[(0, emitter_1.emitUnicodeLanguageId)({\n                lang: finalLangAst.lang,\n                script: finalLangAst.script,\n                variants: [],\n            })];\n            if (likelySubtag) {\n                var likelyRegion = (0, parser_1.parseUnicodeLanguageId)(likelySubtag.split(parser_1.SEPARATOR)).region;\n                if (likelyRegion && regions.indexOf(likelyRegion) > -1) {\n                    replacedRegion = likelyRegion;\n                }\n            }\n        }\n        if (replacedRegion) {\n            finalLangAst.region = replacedRegion;\n        }\n        finalLangAst.region = finalLangAst.region.toUpperCase();\n    }\n    if (finalLangAst.script) {\n        finalLangAst.script =\n            finalLangAst.script[0].toUpperCase() +\n                finalLangAst.script.slice(1).toLowerCase();\n        if (aliases_generated_1.scriptAlias[finalLangAst.script]) {\n            finalLangAst.script = aliases_generated_1.scriptAlias[finalLangAst.script];\n        }\n    }\n    if (finalLangAst.variants.length) {\n        for (var i = 0; i < finalLangAst.variants.length; i++) {\n            var variant = finalLangAst.variants[i].toLowerCase();\n            if (aliases_generated_1.variantAlias[variant]) {\n                var alias = aliases_generated_1.variantAlias[variant];\n                if ((0, parser_1.isUnicodeVariantSubtag)(alias)) {\n                    finalLangAst.variants[i] = alias;\n                }\n                else if ((0, parser_1.isUnicodeLanguageSubtag)(alias)) {\n                    // Yes this can happen per the spec\n                    finalLangAst.lang = alias;\n                }\n            }\n        }\n        finalLangAst.variants.sort();\n    }\n    return finalLangAst;\n}\nexports.canonicalizeUnicodeLanguageId = canonicalizeUnicodeLanguageId;\n/**\n * Canonicalize based on\n * https://www.unicode.org/reports/tr35/tr35.html#Canonical_Unicode_Locale_Identifiers\n * https://tc39.es/ecma402/#sec-canonicalizeunicodelocaleid\n * IMPORTANT: This modifies the object inline\n * @param locale\n */\nfunction canonicalizeUnicodeLocaleId(locale) {\n    locale.lang = canonicalizeUnicodeLanguageId(locale.lang);\n    if (locale.extensions) {\n        for (var _i = 0, _a = locale.extensions; _i < _a.length; _i++) {\n            var extension = _a[_i];\n            switch (extension.type) {\n                case 'u':\n                    extension.keywords = canonicalizeKVs(extension.keywords);\n                    if (extension.attributes) {\n                        extension.attributes = canonicalizeAttrs(extension.attributes);\n                    }\n                    break;\n                case 't':\n                    if (extension.lang) {\n                        extension.lang = canonicalizeUnicodeLanguageId(extension.lang);\n                    }\n                    extension.fields = canonicalizeKVs(extension.fields);\n                    break;\n                default:\n                    extension.value = extension.value.toLowerCase();\n                    break;\n            }\n        }\n        locale.extensions.sort(compareExtension);\n    }\n    return locale;\n}\nexports.canonicalizeUnicodeLocaleId = canonicalizeUnicodeLocaleId;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.emitUnicodeLocaleId = exports.emitUnicodeLanguageId = void 0;\nvar tslib_1 = require(\"tslib\");\nfunction emitUnicodeLanguageId(lang) {\n    if (!lang) {\n        return '';\n    }\n    return (0, tslib_1.__spreadArray)([lang.lang, lang.script, lang.region], (lang.variants || []), true).filter(Boolean)\n        .join('-');\n}\nexports.emitUnicodeLanguageId = emitUnicodeLanguageId;\nfunction emitUnicodeLocaleId(_a) {\n    var lang = _a.lang, extensions = _a.extensions;\n    var chunks = [emitUnicodeLanguageId(lang)];\n    for (var _i = 0, extensions_1 = extensions; _i < extensions_1.length; _i++) {\n        var ext = extensions_1[_i];\n        chunks.push(ext.type);\n        switch (ext.type) {\n            case 'u':\n                chunks.push.apply(chunks, (0, tslib_1.__spreadArray)((0, tslib_1.__spreadArray)([], ext.attributes, false), ext.keywords.reduce(function (all, kv) { return all.concat(kv); }, []), false));\n                break;\n            case 't':\n                chunks.push.apply(chunks, (0, tslib_1.__spreadArray)([emitUnicodeLanguageId(ext.lang)], ext.fields.reduce(function (all, kv) { return all.concat(kv); }, []), false));\n                break;\n            default:\n                chunks.push(ext.value);\n                break;\n        }\n    }\n    return chunks.filter(Boolean).join('-');\n}\nexports.emitUnicodeLocaleId = emitUnicodeLocaleId;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.likelySubtags = void 0;\n/* @generated */\n// prettier-ignore  \nexports.likelySubtags = {\n    \"aa\": \"aa-Latn-ET\",\n    \"aai\": \"aai-Latn-ZZ\",\n    \"aak\": \"aak-Latn-ZZ\",\n    \"aau\": \"aau-Latn-ZZ\",\n    \"ab\": \"ab-Cyrl-GE\",\n    \"abi\": \"abi-Latn-ZZ\",\n    \"abq\": \"abq-Cyrl-ZZ\",\n    \"abr\": \"abr-Latn-GH\",\n    \"abt\": \"abt-Latn-ZZ\",\n    \"aby\": \"aby-Latn-ZZ\",\n    \"acd\": \"acd-Latn-ZZ\",\n    \"ace\": \"ace-Latn-ID\",\n    \"ach\": \"ach-Latn-UG\",\n    \"ada\": \"ada-Latn-GH\",\n    \"ade\": \"ade-Latn-ZZ\",\n    \"adj\": \"adj-Latn-ZZ\",\n    \"adp\": \"adp-Tibt-BT\",\n    \"ady\": \"ady-Cyrl-RU\",\n    \"adz\": \"adz-Latn-ZZ\",\n    \"ae\": \"ae-Avst-IR\",\n    \"aeb\": \"aeb-Arab-TN\",\n    \"aey\": \"aey-Latn-ZZ\",\n    \"af\": \"af-Latn-ZA\",\n    \"agc\": \"agc-Latn-ZZ\",\n    \"agd\": \"agd-Latn-ZZ\",\n    \"agg\": \"agg-Latn-ZZ\",\n    \"agm\": \"agm-Latn-ZZ\",\n    \"ago\": \"ago-Latn-ZZ\",\n    \"agq\": \"agq-Latn-CM\",\n    \"aha\": \"aha-Latn-ZZ\",\n    \"ahl\": \"ahl-Latn-ZZ\",\n    \"aho\": \"aho-Ahom-IN\",\n    \"ajg\": \"ajg-Latn-ZZ\",\n    \"ak\": \"ak-Latn-GH\",\n    \"akk\": \"akk-Xsux-IQ\",\n    \"ala\": \"ala-Latn-ZZ\",\n    \"ali\": \"ali-Latn-ZZ\",\n    \"aln\": \"aln-Latn-XK\",\n    \"alt\": \"alt-Cyrl-RU\",\n    \"am\": \"am-Ethi-ET\",\n    \"amm\": \"amm-Latn-ZZ\",\n    \"amn\": \"amn-Latn-ZZ\",\n    \"amo\": \"amo-Latn-NG\",\n    \"amp\": \"amp-Latn-ZZ\",\n    \"an\": \"an-Latn-ES\",\n    \"anc\": \"anc-Latn-ZZ\",\n    \"ank\": \"ank-Latn-ZZ\",\n    \"ann\": \"ann-Latn-ZZ\",\n    \"any\": \"any-Latn-ZZ\",\n    \"aoj\": \"aoj-Latn-ZZ\",\n    \"aom\": \"aom-Latn-ZZ\",\n    \"aoz\": \"aoz-Latn-ID\",\n    \"apc\": \"apc-Arab-ZZ\",\n    \"apd\": \"apd-Arab-TG\",\n    \"ape\": \"ape-Latn-ZZ\",\n    \"apr\": \"apr-Latn-ZZ\",\n    \"aps\": \"aps-Latn-ZZ\",\n    \"apz\": \"apz-Latn-ZZ\",\n    \"ar\": \"ar-Arab-EG\",\n    \"arc\": \"arc-Armi-IR\",\n    \"arc-Nbat\": \"arc-Nbat-JO\",\n    \"arc-Palm\": \"arc-Palm-SY\",\n    \"arh\": \"arh-Latn-ZZ\",\n    \"arn\": \"arn-Latn-CL\",\n    \"aro\": \"aro-Latn-BO\",\n    \"arq\": \"arq-Arab-DZ\",\n    \"ars\": \"ars-Arab-SA\",\n    \"ary\": \"ary-Arab-MA\",\n    \"arz\": \"arz-Arab-EG\",\n    \"as\": \"as-Beng-IN\",\n    \"asa\": \"asa-Latn-TZ\",\n    \"ase\": \"ase-Sgnw-US\",\n    \"asg\": \"asg-Latn-ZZ\",\n    \"aso\": \"aso-Latn-ZZ\",\n    \"ast\": \"ast-Latn-ES\",\n    \"ata\": \"ata-Latn-ZZ\",\n    \"atg\": \"atg-Latn-ZZ\",\n    \"atj\": \"atj-Latn-CA\",\n    \"auy\": \"auy-Latn-ZZ\",\n    \"av\": \"av-Cyrl-RU\",\n    \"avl\": \"avl-Arab-ZZ\",\n    \"avn\": \"avn-Latn-ZZ\",\n    \"avt\": \"avt-Latn-ZZ\",\n    \"avu\": \"avu-Latn-ZZ\",\n    \"awa\": \"awa-Deva-IN\",\n    \"awb\": \"awb-Latn-ZZ\",\n    \"awo\": \"awo-Latn-ZZ\",\n    \"awx\": \"awx-Latn-ZZ\",\n    \"ay\": \"ay-Latn-BO\",\n    \"ayb\": \"ayb-Latn-ZZ\",\n    \"az\": \"az-Latn-AZ\",\n    \"az-Arab\": \"az-Arab-IR\",\n    \"az-IQ\": \"az-Arab-IQ\",\n    \"az-IR\": \"az-Arab-IR\",\n    \"az-RU\": \"az-Cyrl-RU\",\n    \"ba\": \"ba-Cyrl-RU\",\n    \"bal\": \"bal-Arab-PK\",\n    \"ban\": \"ban-Latn-ID\",\n    \"bap\": \"bap-Deva-NP\",\n    \"bar\": \"bar-Latn-AT\",\n    \"bas\": \"bas-Latn-CM\",\n    \"bav\": \"bav-Latn-ZZ\",\n    \"bax\": \"bax-Bamu-CM\",\n    \"bba\": \"bba-Latn-ZZ\",\n    \"bbb\": \"bbb-Latn-ZZ\",\n    \"bbc\": \"bbc-Latn-ID\",\n    \"bbd\": \"bbd-Latn-ZZ\",\n    \"bbj\": \"bbj-Latn-CM\",\n    \"bbp\": \"bbp-Latn-ZZ\",\n    \"bbr\": \"bbr-Latn-ZZ\",\n    \"bcf\": \"bcf-Latn-ZZ\",\n    \"bch\": \"bch-Latn-ZZ\",\n    \"bci\": \"bci-Latn-CI\",\n    \"bcm\": \"bcm-Latn-ZZ\",\n    \"bcn\": \"bcn-Latn-ZZ\",\n    \"bco\": \"bco-Latn-ZZ\",\n    \"bcq\": \"bcq-Ethi-ZZ\",\n    \"bcu\": \"bcu-Latn-ZZ\",\n    \"bdd\": \"bdd-Latn-ZZ\",\n    \"be\": \"be-Cyrl-BY\",\n    \"bef\": \"bef-Latn-ZZ\",\n    \"beh\": \"beh-Latn-ZZ\",\n    \"bej\": \"bej-Arab-SD\",\n    \"bem\": \"bem-Latn-ZM\",\n    \"bet\": \"bet-Latn-ZZ\",\n    \"bew\": \"bew-Latn-ID\",\n    \"bex\": \"bex-Latn-ZZ\",\n    \"bez\": \"bez-Latn-TZ\",\n    \"bfd\": \"bfd-Latn-CM\",\n    \"bfq\": \"bfq-Taml-IN\",\n    \"bft\": \"bft-Arab-PK\",\n    \"bfy\": \"bfy-Deva-IN\",\n    \"bg\": \"bg-Cyrl-BG\",\n    \"bgc\": \"bgc-Deva-IN\",\n    \"bgn\": \"bgn-Arab-PK\",\n    \"bgx\": \"bgx-Grek-TR\",\n    \"bhb\": \"bhb-Deva-IN\",\n    \"bhg\": \"bhg-Latn-ZZ\",\n    \"bhi\": \"bhi-Deva-IN\",\n    \"bhl\": \"bhl-Latn-ZZ\",\n    \"bho\": \"bho-Deva-IN\",\n    \"bhy\": \"bhy-Latn-ZZ\",\n    \"bi\": \"bi-Latn-VU\",\n    \"bib\": \"bib-Latn-ZZ\",\n    \"big\": \"big-Latn-ZZ\",\n    \"bik\": \"bik-Latn-PH\",\n    \"bim\": \"bim-Latn-ZZ\",\n    \"bin\": \"bin-Latn-NG\",\n    \"bio\": \"bio-Latn-ZZ\",\n    \"biq\": \"biq-Latn-ZZ\",\n    \"bjh\": \"bjh-Latn-ZZ\",\n    \"bji\": \"bji-Ethi-ZZ\",\n    \"bjj\": \"bjj-Deva-IN\",\n    \"bjn\": \"bjn-Latn-ID\",\n    \"bjo\": \"bjo-Latn-ZZ\",\n    \"bjr\": \"bjr-Latn-ZZ\",\n    \"bjt\": \"bjt-Latn-SN\",\n    \"bjz\": \"bjz-Latn-ZZ\",\n    \"bkc\": \"bkc-Latn-ZZ\",\n    \"bkm\": \"bkm-Latn-CM\",\n    \"bkq\": \"bkq-Latn-ZZ\",\n    \"bku\": \"bku-Latn-PH\",\n    \"bkv\": \"bkv-Latn-ZZ\",\n    \"blg\": \"blg-Latn-MY\",\n    \"blt\": \"blt-Tavt-VN\",\n    \"bm\": \"bm-Latn-ML\",\n    \"bmh\": \"bmh-Latn-ZZ\",\n    \"bmk\": \"bmk-Latn-ZZ\",\n    \"bmq\": \"bmq-Latn-ML\",\n    \"bmu\": \"bmu-Latn-ZZ\",\n    \"bn\": \"bn-Beng-BD\",\n    \"bng\": \"bng-Latn-ZZ\",\n    \"bnm\": \"bnm-Latn-ZZ\",\n    \"bnp\": \"bnp-Latn-ZZ\",\n    \"bo\": \"bo-Tibt-CN\",\n    \"boj\": \"boj-Latn-ZZ\",\n    \"bom\": \"bom-Latn-ZZ\",\n    \"bon\": \"bon-Latn-ZZ\",\n    \"bpy\": \"bpy-Beng-IN\",\n    \"bqc\": \"bqc-Latn-ZZ\",\n    \"bqi\": \"bqi-Arab-IR\",\n    \"bqp\": \"bqp-Latn-ZZ\",\n    \"bqv\": \"bqv-Latn-CI\",\n    \"br\": \"br-Latn-FR\",\n    \"bra\": \"bra-Deva-IN\",\n    \"brh\": \"brh-Arab-PK\",\n    \"brx\": \"brx-Deva-IN\",\n    \"brz\": \"brz-Latn-ZZ\",\n    \"bs\": \"bs-Latn-BA\",\n    \"bsj\": \"bsj-Latn-ZZ\",\n    \"bsq\": \"bsq-Bass-LR\",\n    \"bss\": \"bss-Latn-CM\",\n    \"bst\": \"bst-Ethi-ZZ\",\n    \"bto\": \"bto-Latn-PH\",\n    \"btt\": \"btt-Latn-ZZ\",\n    \"btv\": \"btv-Deva-PK\",\n    \"bua\": \"bua-Cyrl-RU\",\n    \"buc\": \"buc-Latn-YT\",\n    \"bud\": \"bud-Latn-ZZ\",\n    \"bug\": \"bug-Latn-ID\",\n    \"buk\": \"buk-Latn-ZZ\",\n    \"bum\": \"bum-Latn-CM\",\n    \"buo\": \"buo-Latn-ZZ\",\n    \"bus\": \"bus-Latn-ZZ\",\n    \"buu\": \"buu-Latn-ZZ\",\n    \"bvb\": \"bvb-Latn-GQ\",\n    \"bwd\": \"bwd-Latn-ZZ\",\n    \"bwr\": \"bwr-Latn-ZZ\",\n    \"bxh\": \"bxh-Latn-ZZ\",\n    \"bye\": \"bye-Latn-ZZ\",\n    \"byn\": \"byn-Ethi-ER\",\n    \"byr\": \"byr-Latn-ZZ\",\n    \"bys\": \"bys-Latn-ZZ\",\n    \"byv\": \"byv-Latn-CM\",\n    \"byx\": \"byx-Latn-ZZ\",\n    \"bza\": \"bza-Latn-ZZ\",\n    \"bze\": \"bze-Latn-ML\",\n    \"bzf\": \"bzf-Latn-ZZ\",\n    \"bzh\": \"bzh-Latn-ZZ\",\n    \"bzw\": \"bzw-Latn-ZZ\",\n    \"ca\": \"ca-Latn-ES\",\n    \"cad\": \"cad-Latn-US\",\n    \"can\": \"can-Latn-ZZ\",\n    \"cbj\": \"cbj-Latn-ZZ\",\n    \"cch\": \"cch-Latn-NG\",\n    \"ccp\": \"ccp-Cakm-BD\",\n    \"ce\": \"ce-Cyrl-RU\",\n    \"ceb\": \"ceb-Latn-PH\",\n    \"cfa\": \"cfa-Latn-ZZ\",\n    \"cgg\": \"cgg-Latn-UG\",\n    \"ch\": \"ch-Latn-GU\",\n    \"chk\": \"chk-Latn-FM\",\n    \"chm\": \"chm-Cyrl-RU\",\n    \"cho\": \"cho-Latn-US\",\n    \"chp\": \"chp-Latn-CA\",\n    \"chr\": \"chr-Cher-US\",\n    \"cic\": \"cic-Latn-US\",\n    \"cja\": \"cja-Arab-KH\",\n    \"cjm\": \"cjm-Cham-VN\",\n    \"cjv\": \"cjv-Latn-ZZ\",\n    \"ckb\": \"ckb-Arab-IQ\",\n    \"ckl\": \"ckl-Latn-ZZ\",\n    \"cko\": \"cko-Latn-ZZ\",\n    \"cky\": \"cky-Latn-ZZ\",\n    \"cla\": \"cla-Latn-ZZ\",\n    \"cme\": \"cme-Latn-ZZ\",\n    \"cmg\": \"cmg-Soyo-MN\",\n    \"co\": \"co-Latn-FR\",\n    \"cop\": \"cop-Copt-EG\",\n    \"cps\": \"cps-Latn-PH\",\n    \"cr\": \"cr-Cans-CA\",\n    \"crh\": \"crh-Cyrl-UA\",\n    \"crj\": \"crj-Cans-CA\",\n    \"crk\": \"crk-Cans-CA\",\n    \"crl\": \"crl-Cans-CA\",\n    \"crm\": \"crm-Cans-CA\",\n    \"crs\": \"crs-Latn-SC\",\n    \"cs\": \"cs-Latn-CZ\",\n    \"csb\": \"csb-Latn-PL\",\n    \"csw\": \"csw-Cans-CA\",\n    \"ctd\": \"ctd-Pauc-MM\",\n    \"cu\": \"cu-Cyrl-RU\",\n    \"cu-Glag\": \"cu-Glag-BG\",\n    \"cv\": \"cv-Cyrl-RU\",\n    \"cy\": \"cy-Latn-GB\",\n    \"da\": \"da-Latn-DK\",\n    \"dad\": \"dad-Latn-ZZ\",\n    \"daf\": \"daf-Latn-CI\",\n    \"dag\": \"dag-Latn-ZZ\",\n    \"dah\": \"dah-Latn-ZZ\",\n    \"dak\": \"dak-Latn-US\",\n    \"dar\": \"dar-Cyrl-RU\",\n    \"dav\": \"dav-Latn-KE\",\n    \"dbd\": \"dbd-Latn-ZZ\",\n    \"dbq\": \"dbq-Latn-ZZ\",\n    \"dcc\": \"dcc-Arab-IN\",\n    \"ddn\": \"ddn-Latn-ZZ\",\n    \"de\": \"de-Latn-DE\",\n    \"ded\": \"ded-Latn-ZZ\",\n    \"den\": \"den-Latn-CA\",\n    \"dga\": \"dga-Latn-ZZ\",\n    \"dgh\": \"dgh-Latn-ZZ\",\n    \"dgi\": \"dgi-Latn-ZZ\",\n    \"dgl\": \"dgl-Arab-ZZ\",\n    \"dgr\": \"dgr-Latn-CA\",\n    \"dgz\": \"dgz-Latn-ZZ\",\n    \"dia\": \"dia-Latn-ZZ\",\n    \"dje\": \"dje-Latn-NE\",\n    \"dmf\": \"dmf-Medf-NG\",\n    \"dnj\": \"dnj-Latn-CI\",\n    \"dob\": \"dob-Latn-ZZ\",\n    \"doi\": \"doi-Deva-IN\",\n    \"dop\": \"dop-Latn-ZZ\",\n    \"dow\": \"dow-Latn-ZZ\",\n    \"drh\": \"drh-Mong-CN\",\n    \"dri\": \"dri-Latn-ZZ\",\n    \"drs\": \"drs-Ethi-ZZ\",\n    \"dsb\": \"dsb-Latn-DE\",\n    \"dtm\": \"dtm-Latn-ML\",\n    \"dtp\": \"dtp-Latn-MY\",\n    \"dts\": \"dts-Latn-ZZ\",\n    \"dty\": \"dty-Deva-NP\",\n    \"dua\": \"dua-Latn-CM\",\n    \"duc\": \"duc-Latn-ZZ\",\n    \"dud\": \"dud-Latn-ZZ\",\n    \"dug\": \"dug-Latn-ZZ\",\n    \"dv\": \"dv-Thaa-MV\",\n    \"dva\": \"dva-Latn-ZZ\",\n    \"dww\": \"dww-Latn-ZZ\",\n    \"dyo\": \"dyo-Latn-SN\",\n    \"dyu\": \"dyu-Latn-BF\",\n    \"dz\": \"dz-Tibt-BT\",\n    \"dzg\": \"dzg-Latn-ZZ\",\n    \"ebu\": \"ebu-Latn-KE\",\n    \"ee\": \"ee-Latn-GH\",\n    \"efi\": \"efi-Latn-NG\",\n    \"egl\": \"egl-Latn-IT\",\n    \"egy\": \"egy-Egyp-EG\",\n    \"eka\": \"eka-Latn-ZZ\",\n    \"eky\": \"eky-Kali-MM\",\n    \"el\": \"el-Grek-GR\",\n    \"ema\": \"ema-Latn-ZZ\",\n    \"emi\": \"emi-Latn-ZZ\",\n    \"en\": \"en-Latn-US\",\n    \"en-Shaw\": \"en-Shaw-GB\",\n    \"enn\": \"enn-Latn-ZZ\",\n    \"enq\": \"enq-Latn-ZZ\",\n    \"eo\": \"eo-Latn-001\",\n    \"eri\": \"eri-Latn-ZZ\",\n    \"es\": \"es-Latn-ES\",\n    \"esg\": \"esg-Gonm-IN\",\n    \"esu\": \"esu-Latn-US\",\n    \"et\": \"et-Latn-EE\",\n    \"etr\": \"etr-Latn-ZZ\",\n    \"ett\": \"ett-Ital-IT\",\n    \"etu\": \"etu-Latn-ZZ\",\n    \"etx\": \"etx-Latn-ZZ\",\n    \"eu\": \"eu-Latn-ES\",\n    \"ewo\": \"ewo-Latn-CM\",\n    \"ext\": \"ext-Latn-ES\",\n    \"eza\": \"eza-Latn-ZZ\",\n    \"fa\": \"fa-Arab-IR\",\n    \"faa\": \"faa-Latn-ZZ\",\n    \"fab\": \"fab-Latn-ZZ\",\n    \"fag\": \"fag-Latn-ZZ\",\n    \"fai\": \"fai-Latn-ZZ\",\n    \"fan\": \"fan-Latn-GQ\",\n    \"ff\": \"ff-Latn-SN\",\n    \"ff-Adlm\": \"ff-Adlm-GN\",\n    \"ffi\": \"ffi-Latn-ZZ\",\n    \"ffm\": \"ffm-Latn-ML\",\n    \"fi\": \"fi-Latn-FI\",\n    \"fia\": \"fia-Arab-SD\",\n    \"fil\": \"fil-Latn-PH\",\n    \"fit\": \"fit-Latn-SE\",\n    \"fj\": \"fj-Latn-FJ\",\n    \"flr\": \"flr-Latn-ZZ\",\n    \"fmp\": \"fmp-Latn-ZZ\",\n    \"fo\": \"fo-Latn-FO\",\n    \"fod\": \"fod-Latn-ZZ\",\n    \"fon\": \"fon-Latn-BJ\",\n    \"for\": \"for-Latn-ZZ\",\n    \"fpe\": \"fpe-Latn-ZZ\",\n    \"fqs\": \"fqs-Latn-ZZ\",\n    \"fr\": \"fr-Latn-FR\",\n    \"frc\": \"frc-Latn-US\",\n    \"frp\": \"frp-Latn-FR\",\n    \"frr\": \"frr-Latn-DE\",\n    \"frs\": \"frs-Latn-DE\",\n    \"fub\": \"fub-Arab-CM\",\n    \"fud\": \"fud-Latn-WF\",\n    \"fue\": \"fue-Latn-ZZ\",\n    \"fuf\": \"fuf-Latn-GN\",\n    \"fuh\": \"fuh-Latn-ZZ\",\n    \"fuq\": \"fuq-Latn-NE\",\n    \"fur\": \"fur-Latn-IT\",\n    \"fuv\": \"fuv-Latn-NG\",\n    \"fuy\": \"fuy-Latn-ZZ\",\n    \"fvr\": \"fvr-Latn-SD\",\n    \"fy\": \"fy-Latn-NL\",\n    \"ga\": \"ga-Latn-IE\",\n    \"gaa\": \"gaa-Latn-GH\",\n    \"gaf\": \"gaf-Latn-ZZ\",\n    \"gag\": \"gag-Latn-MD\",\n    \"gah\": \"gah-Latn-ZZ\",\n    \"gaj\": \"gaj-Latn-ZZ\",\n    \"gam\": \"gam-Latn-ZZ\",\n    \"gan\": \"gan-Hans-CN\",\n    \"gaw\": \"gaw-Latn-ZZ\",\n    \"gay\": \"gay-Latn-ID\",\n    \"gba\": \"gba-Latn-ZZ\",\n    \"gbf\": \"gbf-Latn-ZZ\",\n    \"gbm\": \"gbm-Deva-IN\",\n    \"gby\": \"gby-Latn-ZZ\",\n    \"gbz\": \"gbz-Arab-IR\",\n    \"gcr\": \"gcr-Latn-GF\",\n    \"gd\": \"gd-Latn-GB\",\n    \"gde\": \"gde-Latn-ZZ\",\n    \"gdn\": \"gdn-Latn-ZZ\",\n    \"gdr\": \"gdr-Latn-ZZ\",\n    \"geb\": \"geb-Latn-ZZ\",\n    \"gej\": \"gej-Latn-ZZ\",\n    \"gel\": \"gel-Latn-ZZ\",\n    \"gez\": \"gez-Ethi-ET\",\n    \"gfk\": \"gfk-Latn-ZZ\",\n    \"ggn\": \"ggn-Deva-NP\",\n    \"ghs\": \"ghs-Latn-ZZ\",\n    \"gil\": \"gil-Latn-KI\",\n    \"gim\": \"gim-Latn-ZZ\",\n    \"gjk\": \"gjk-Arab-PK\",\n    \"gjn\": \"gjn-Latn-ZZ\",\n    \"gju\": \"gju-Arab-PK\",\n    \"gkn\": \"gkn-Latn-ZZ\",\n    \"gkp\": \"gkp-Latn-ZZ\",\n    \"gl\": \"gl-Latn-ES\",\n    \"glk\": \"glk-Arab-IR\",\n    \"gmm\": \"gmm-Latn-ZZ\",\n    \"gmv\": \"gmv-Ethi-ZZ\",\n    \"gn\": \"gn-Latn-PY\",\n    \"gnd\": \"gnd-Latn-ZZ\",\n    \"gng\": \"gng-Latn-ZZ\",\n    \"god\": \"god-Latn-ZZ\",\n    \"gof\": \"gof-Ethi-ZZ\",\n    \"goi\": \"goi-Latn-ZZ\",\n    \"gom\": \"gom-Deva-IN\",\n    \"gon\": \"gon-Telu-IN\",\n    \"gor\": \"gor-Latn-ID\",\n    \"gos\": \"gos-Latn-NL\",\n    \"got\": \"got-Goth-UA\",\n    \"grb\": \"grb-Latn-ZZ\",\n    \"grc\": \"grc-Cprt-CY\",\n    \"grc-Linb\": \"grc-Linb-GR\",\n    \"grt\": \"grt-Beng-IN\",\n    \"grw\": \"grw-Latn-ZZ\",\n    \"gsw\": \"gsw-Latn-CH\",\n    \"gu\": \"gu-Gujr-IN\",\n    \"gub\": \"gub-Latn-BR\",\n    \"guc\": \"guc-Latn-CO\",\n    \"gud\": \"gud-Latn-ZZ\",\n    \"gur\": \"gur-Latn-GH\",\n    \"guw\": \"guw-Latn-ZZ\",\n    \"gux\": \"gux-Latn-ZZ\",\n    \"guz\": \"guz-Latn-KE\",\n    \"gv\": \"gv-Latn-IM\",\n    \"gvf\": \"gvf-Latn-ZZ\",\n    \"gvr\": \"gvr-Deva-NP\",\n    \"gvs\": \"gvs-Latn-ZZ\",\n    \"gwc\": \"gwc-Arab-ZZ\",\n    \"gwi\": \"gwi-Latn-CA\",\n    \"gwt\": \"gwt-Arab-ZZ\",\n    \"gyi\": \"gyi-Latn-ZZ\",\n    \"ha\": \"ha-Latn-NG\",\n    \"ha-CM\": \"ha-Arab-CM\",\n    \"ha-SD\": \"ha-Arab-SD\",\n    \"hag\": \"hag-Latn-ZZ\",\n    \"hak\": \"hak-Hans-CN\",\n    \"ham\": \"ham-Latn-ZZ\",\n    \"haw\": \"haw-Latn-US\",\n    \"haz\": \"haz-Arab-AF\",\n    \"hbb\": \"hbb-Latn-ZZ\",\n    \"hdy\": \"hdy-Ethi-ZZ\",\n    \"he\": \"he-Hebr-IL\",\n    \"hhy\": \"hhy-Latn-ZZ\",\n    \"hi\": \"hi-Deva-IN\",\n    \"hia\": \"hia-Latn-ZZ\",\n    \"hif\": \"hif-Latn-FJ\",\n    \"hig\": \"hig-Latn-ZZ\",\n    \"hih\": \"hih-Latn-ZZ\",\n    \"hil\": \"hil-Latn-PH\",\n    \"hla\": \"hla-Latn-ZZ\",\n    \"hlu\": \"hlu-Hluw-TR\",\n    \"hmd\": \"hmd-Plrd-CN\",\n    \"hmt\": \"hmt-Latn-ZZ\",\n    \"hnd\": \"hnd-Arab-PK\",\n    \"hne\": \"hne-Deva-IN\",\n    \"hnj\": \"hnj-Hmnp-US\",\n    \"hnn\": \"hnn-Latn-PH\",\n    \"hno\": \"hno-Arab-PK\",\n    \"ho\": \"ho-Latn-PG\",\n    \"hoc\": \"hoc-Deva-IN\",\n    \"hoj\": \"hoj-Deva-IN\",\n    \"hot\": \"hot-Latn-ZZ\",\n    \"hr\": \"hr-Latn-HR\",\n    \"hsb\": \"hsb-Latn-DE\",\n    \"hsn\": \"hsn-Hans-CN\",\n    \"ht\": \"ht-Latn-HT\",\n    \"hu\": \"hu-Latn-HU\",\n    \"hui\": \"hui-Latn-ZZ\",\n    \"hy\": \"hy-Armn-AM\",\n    \"hz\": \"hz-Latn-NA\",\n    \"ia\": \"ia-Latn-001\",\n    \"ian\": \"ian-Latn-ZZ\",\n    \"iar\": \"iar-Latn-ZZ\",\n    \"iba\": \"iba-Latn-MY\",\n    \"ibb\": \"ibb-Latn-NG\",\n    \"iby\": \"iby-Latn-ZZ\",\n    \"ica\": \"ica-Latn-ZZ\",\n    \"ich\": \"ich-Latn-ZZ\",\n    \"id\": \"id-Latn-ID\",\n    \"idd\": \"idd-Latn-ZZ\",\n    \"idi\": \"idi-Latn-ZZ\",\n    \"idu\": \"idu-Latn-ZZ\",\n    \"ife\": \"ife-Latn-TG\",\n    \"ig\": \"ig-Latn-NG\",\n    \"igb\": \"igb-Latn-ZZ\",\n    \"ige\": \"ige-Latn-ZZ\",\n    \"ii\": \"ii-Yiii-CN\",\n    \"ijj\": \"ijj-Latn-ZZ\",\n    \"ik\": \"ik-Latn-US\",\n    \"ikk\": \"ikk-Latn-ZZ\",\n    \"ikt\": \"ikt-Latn-CA\",\n    \"ikw\": \"ikw-Latn-ZZ\",\n    \"ikx\": \"ikx-Latn-ZZ\",\n    \"ilo\": \"ilo-Latn-PH\",\n    \"imo\": \"imo-Latn-ZZ\",\n    \"in\": \"in-Latn-ID\",\n    \"inh\": \"inh-Cyrl-RU\",\n    \"io\": \"io-Latn-001\",\n    \"iou\": \"iou-Latn-ZZ\",\n    \"iri\": \"iri-Latn-ZZ\",\n    \"is\": \"is-Latn-IS\",\n    \"it\": \"it-Latn-IT\",\n    \"iu\": \"iu-Cans-CA\",\n    \"iw\": \"iw-Hebr-IL\",\n    \"iwm\": \"iwm-Latn-ZZ\",\n    \"iws\": \"iws-Latn-ZZ\",\n    \"izh\": \"izh-Latn-RU\",\n    \"izi\": \"izi-Latn-ZZ\",\n    \"ja\": \"ja-Jpan-JP\",\n    \"jab\": \"jab-Latn-ZZ\",\n    \"jam\": \"jam-Latn-JM\",\n    \"jar\": \"jar-Latn-ZZ\",\n    \"jbo\": \"jbo-Latn-001\",\n    \"jbu\": \"jbu-Latn-ZZ\",\n    \"jen\": \"jen-Latn-ZZ\",\n    \"jgk\": \"jgk-Latn-ZZ\",\n    \"jgo\": \"jgo-Latn-CM\",\n    \"ji\": \"ji-Hebr-UA\",\n    \"jib\": \"jib-Latn-ZZ\",\n    \"jmc\": \"jmc-Latn-TZ\",\n    \"jml\": \"jml-Deva-NP\",\n    \"jra\": \"jra-Latn-ZZ\",\n    \"jut\": \"jut-Latn-DK\",\n    \"jv\": \"jv-Latn-ID\",\n    \"jw\": \"jw-Latn-ID\",\n    \"ka\": \"ka-Geor-GE\",\n    \"kaa\": \"kaa-Cyrl-UZ\",\n    \"kab\": \"kab-Latn-DZ\",\n    \"kac\": \"kac-Latn-MM\",\n    \"kad\": \"kad-Latn-ZZ\",\n    \"kai\": \"kai-Latn-ZZ\",\n    \"kaj\": \"kaj-Latn-NG\",\n    \"kam\": \"kam-Latn-KE\",\n    \"kao\": \"kao-Latn-ML\",\n    \"kbd\": \"kbd-Cyrl-RU\",\n    \"kbm\": \"kbm-Latn-ZZ\",\n    \"kbp\": \"kbp-Latn-ZZ\",\n    \"kbq\": \"kbq-Latn-ZZ\",\n    \"kbx\": \"kbx-Latn-ZZ\",\n    \"kby\": \"kby-Arab-NE\",\n    \"kcg\": \"kcg-Latn-NG\",\n    \"kck\": \"kck-Latn-ZW\",\n    \"kcl\": \"kcl-Latn-ZZ\",\n    \"kct\": \"kct-Latn-ZZ\",\n    \"kde\": \"kde-Latn-TZ\",\n    \"kdh\": \"kdh-Latn-TG\",\n    \"kdl\": \"kdl-Latn-ZZ\",\n    \"kdt\": \"kdt-Thai-TH\",\n    \"kea\": \"kea-Latn-CV\",\n    \"ken\": \"ken-Latn-CM\",\n    \"kez\": \"kez-Latn-ZZ\",\n    \"kfo\": \"kfo-Latn-CI\",\n    \"kfr\": \"kfr-Deva-IN\",\n    \"kfy\": \"kfy-Deva-IN\",\n    \"kg\": \"kg-Latn-CD\",\n    \"kge\": \"kge-Latn-ID\",\n    \"kgf\": \"kgf-Latn-ZZ\",\n    \"kgp\": \"kgp-Latn-BR\",\n    \"kha\": \"kha-Latn-IN\",\n    \"khb\": \"khb-Talu-CN\",\n    \"khn\": \"khn-Deva-IN\",\n    \"khq\": \"khq-Latn-ML\",\n    \"khs\": \"khs-Latn-ZZ\",\n    \"kht\": \"kht-Mymr-IN\",\n    \"khw\": \"khw-Arab-PK\",\n    \"khz\": \"khz-Latn-ZZ\",\n    \"ki\": \"ki-Latn-KE\",\n    \"kij\": \"kij-Latn-ZZ\",\n    \"kiu\": \"kiu-Latn-TR\",\n    \"kiw\": \"kiw-Latn-ZZ\",\n    \"kj\": \"kj-Latn-NA\",\n    \"kjd\": \"kjd-Latn-ZZ\",\n    \"kjg\": \"kjg-Laoo-LA\",\n    \"kjs\": \"kjs-Latn-ZZ\",\n    \"kjy\": \"kjy-Latn-ZZ\",\n    \"kk\": \"kk-Cyrl-KZ\",\n    \"kk-AF\": \"kk-Arab-AF\",\n    \"kk-Arab\": \"kk-Arab-CN\",\n    \"kk-CN\": \"kk-Arab-CN\",\n    \"kk-IR\": \"kk-Arab-IR\",\n    \"kk-MN\": \"kk-Arab-MN\",\n    \"kkc\": \"kkc-Latn-ZZ\",\n    \"kkj\": \"kkj-Latn-CM\",\n    \"kl\": \"kl-Latn-GL\",\n    \"kln\": \"kln-Latn-KE\",\n    \"klq\": \"klq-Latn-ZZ\",\n    \"klt\": \"klt-Latn-ZZ\",\n    \"klx\": \"klx-Latn-ZZ\",\n    \"km\": \"km-Khmr-KH\",\n    \"kmb\": \"kmb-Latn-AO\",\n    \"kmh\": \"kmh-Latn-ZZ\",\n    \"kmo\": \"kmo-Latn-ZZ\",\n    \"kms\": \"kms-Latn-ZZ\",\n    \"kmu\": \"kmu-Latn-ZZ\",\n    \"kmw\": \"kmw-Latn-ZZ\",\n    \"kn\": \"kn-Knda-IN\",\n    \"knf\": \"knf-Latn-GW\",\n    \"knp\": \"knp-Latn-ZZ\",\n    \"ko\": \"ko-Kore-KR\",\n    \"koi\": \"koi-Cyrl-RU\",\n    \"kok\": \"kok-Deva-IN\",\n    \"kol\": \"kol-Latn-ZZ\",\n    \"kos\": \"kos-Latn-FM\",\n    \"koz\": \"koz-Latn-ZZ\",\n    \"kpe\": \"kpe-Latn-LR\",\n    \"kpf\": \"kpf-Latn-ZZ\",\n    \"kpo\": \"kpo-Latn-ZZ\",\n    \"kpr\": \"kpr-Latn-ZZ\",\n    \"kpx\": \"kpx-Latn-ZZ\",\n    \"kqb\": \"kqb-Latn-ZZ\",\n    \"kqf\": \"kqf-Latn-ZZ\",\n    \"kqs\": \"kqs-Latn-ZZ\",\n    \"kqy\": \"kqy-Ethi-ZZ\",\n    \"kr\": \"kr-Latn-ZZ\",\n    \"krc\": \"krc-Cyrl-RU\",\n    \"kri\": \"kri-Latn-SL\",\n    \"krj\": \"krj-Latn-PH\",\n    \"krl\": \"krl-Latn-RU\",\n    \"krs\": \"krs-Latn-ZZ\",\n    \"kru\": \"kru-Deva-IN\",\n    \"ks\": \"ks-Arab-IN\",\n    \"ksb\": \"ksb-Latn-TZ\",\n    \"ksd\": \"ksd-Latn-ZZ\",\n    \"ksf\": \"ksf-Latn-CM\",\n    \"ksh\": \"ksh-Latn-DE\",\n    \"ksj\": \"ksj-Latn-ZZ\",\n    \"ksr\": \"ksr-Latn-ZZ\",\n    \"ktb\": \"ktb-Ethi-ZZ\",\n    \"ktm\": \"ktm-Latn-ZZ\",\n    \"kto\": \"kto-Latn-ZZ\",\n    \"ktr\": \"ktr-Latn-MY\",\n    \"ku\": \"ku-Latn-TR\",\n    \"ku-Arab\": \"ku-Arab-IQ\",\n    \"ku-LB\": \"ku-Arab-LB\",\n    \"ku-Yezi\": \"ku-Yezi-GE\",\n    \"kub\": \"kub-Latn-ZZ\",\n    \"kud\": \"kud-Latn-ZZ\",\n    \"kue\": \"kue-Latn-ZZ\",\n    \"kuj\": \"kuj-Latn-ZZ\",\n    \"kum\": \"kum-Cyrl-RU\",\n    \"kun\": \"kun-Latn-ZZ\",\n    \"kup\": \"kup-Latn-ZZ\",\n    \"kus\": \"kus-Latn-ZZ\",\n    \"kv\": \"kv-Cyrl-RU\",\n    \"kvg\": \"kvg-Latn-ZZ\",\n    \"kvr\": \"kvr-Latn-ID\",\n    \"kvx\": \"kvx-Arab-PK\",\n    \"kw\": \"kw-Latn-GB\",\n    \"kwj\": \"kwj-Latn-ZZ\",\n    \"kwo\": \"kwo-Latn-ZZ\",\n    \"kwq\": \"kwq-Latn-ZZ\",\n    \"kxa\": \"kxa-Latn-ZZ\",\n    \"kxc\": \"kxc-Ethi-ZZ\",\n    \"kxe\": \"kxe-Latn-ZZ\",\n    \"kxl\": \"kxl-Deva-IN\",\n    \"kxm\": \"kxm-Thai-TH\",\n    \"kxp\": \"kxp-Arab-PK\",\n    \"kxw\": \"kxw-Latn-ZZ\",\n    \"kxz\": \"kxz-Latn-ZZ\",\n    \"ky\": \"ky-Cyrl-KG\",\n    \"ky-Arab\": \"ky-Arab-CN\",\n    \"ky-CN\": \"ky-Arab-CN\",\n    \"ky-Latn\": \"ky-Latn-TR\",\n    \"ky-TR\": \"ky-Latn-TR\",\n    \"kye\": \"kye-Latn-ZZ\",\n    \"kyx\": \"kyx-Latn-ZZ\",\n    \"kzh\": \"kzh-Arab-ZZ\",\n    \"kzj\": \"kzj-Latn-MY\",\n    \"kzr\": \"kzr-Latn-ZZ\",\n    \"kzt\": \"kzt-Latn-MY\",\n    \"la\": \"la-Latn-VA\",\n    \"lab\": \"lab-Lina-GR\",\n    \"lad\": \"lad-Hebr-IL\",\n    \"lag\": \"lag-Latn-TZ\",\n    \"lah\": \"lah-Arab-PK\",\n    \"laj\": \"laj-Latn-UG\",\n    \"las\": \"las-Latn-ZZ\",\n    \"lb\": \"lb-Latn-LU\",\n    \"lbe\": \"lbe-Cyrl-RU\",\n    \"lbu\": \"lbu-Latn-ZZ\",\n    \"lbw\": \"lbw-Latn-ID\",\n    \"lcm\": \"lcm-Latn-ZZ\",\n    \"lcp\": \"lcp-Thai-CN\",\n    \"ldb\": \"ldb-Latn-ZZ\",\n    \"led\": \"led-Latn-ZZ\",\n    \"lee\": \"lee-Latn-ZZ\",\n    \"lem\": \"lem-Latn-ZZ\",\n    \"lep\": \"lep-Lepc-IN\",\n    \"leq\": \"leq-Latn-ZZ\",\n    \"leu\": \"leu-Latn-ZZ\",\n    \"lez\": \"lez-Cyrl-RU\",\n    \"lg\": \"lg-Latn-UG\",\n    \"lgg\": \"lgg-Latn-ZZ\",\n    \"li\": \"li-Latn-NL\",\n    \"lia\": \"lia-Latn-ZZ\",\n    \"lid\": \"lid-Latn-ZZ\",\n    \"lif\": \"lif-Deva-NP\",\n    \"lif-Limb\": \"lif-Limb-IN\",\n    \"lig\": \"lig-Latn-ZZ\",\n    \"lih\": \"lih-Latn-ZZ\",\n    \"lij\": \"lij-Latn-IT\",\n    \"lis\": \"lis-Lisu-CN\",\n    \"ljp\": \"ljp-Latn-ID\",\n    \"lki\": \"lki-Arab-IR\",\n    \"lkt\": \"lkt-Latn-US\",\n    \"lle\": \"lle-Latn-ZZ\",\n    \"lln\": \"lln-Latn-ZZ\",\n    \"lmn\": \"lmn-Telu-IN\",\n    \"lmo\": \"lmo-Latn-IT\",\n    \"lmp\": \"lmp-Latn-ZZ\",\n    \"ln\": \"ln-Latn-CD\",\n    \"lns\": \"lns-Latn-ZZ\",\n    \"lnu\": \"lnu-Latn-ZZ\",\n    \"lo\": \"lo-Laoo-LA\",\n    \"loj\": \"loj-Latn-ZZ\",\n    \"lok\": \"lok-Latn-ZZ\",\n    \"lol\": \"lol-Latn-CD\",\n    \"lor\": \"lor-Latn-ZZ\",\n    \"los\": \"los-Latn-ZZ\",\n    \"loz\": \"loz-Latn-ZM\",\n    \"lrc\": \"lrc-Arab-IR\",\n    \"lt\": \"lt-Latn-LT\",\n    \"ltg\": \"ltg-Latn-LV\",\n    \"lu\": \"lu-Latn-CD\",\n    \"lua\": \"lua-Latn-CD\",\n    \"luo\": \"luo-Latn-KE\",\n    \"luy\": \"luy-Latn-KE\",\n    \"luz\": \"luz-Arab-IR\",\n    \"lv\": \"lv-Latn-LV\",\n    \"lwl\": \"lwl-Thai-TH\",\n    \"lzh\": \"lzh-Hans-CN\",\n    \"lzz\": \"lzz-Latn-TR\",\n    \"mad\": \"mad-Latn-ID\",\n    \"maf\": \"maf-Latn-CM\",\n    \"mag\": \"mag-Deva-IN\",\n    \"mai\": \"mai-Deva-IN\",\n    \"mak\": \"mak-Latn-ID\",\n    \"man\": \"man-Latn-GM\",\n    \"man-GN\": \"man-Nkoo-GN\",\n    \"man-Nkoo\": \"man-Nkoo-GN\",\n    \"mas\": \"mas-Latn-KE\",\n    \"maw\": \"maw-Latn-ZZ\",\n    \"maz\": \"maz-Latn-MX\",\n    \"mbh\": \"mbh-Latn-ZZ\",\n    \"mbo\": \"mbo-Latn-ZZ\",\n    \"mbq\": \"mbq-Latn-ZZ\",\n    \"mbu\": \"mbu-Latn-ZZ\",\n    \"mbw\": \"mbw-Latn-ZZ\",\n    \"mci\": \"mci-Latn-ZZ\",\n    \"mcp\": \"mcp-Latn-ZZ\",\n    \"mcq\": \"mcq-Latn-ZZ\",\n    \"mcr\": \"mcr-Latn-ZZ\",\n    \"mcu\": \"mcu-Latn-ZZ\",\n    \"mda\": \"mda-Latn-ZZ\",\n    \"mde\": \"mde-Arab-ZZ\",\n    \"mdf\": \"mdf-Cyrl-RU\",\n    \"mdh\": \"mdh-Latn-PH\",\n    \"mdj\": \"mdj-Latn-ZZ\",\n    \"mdr\": \"mdr-Latn-ID\",\n    \"mdx\": \"mdx-Ethi-ZZ\",\n    \"med\": \"med-Latn-ZZ\",\n    \"mee\": \"mee-Latn-ZZ\",\n    \"mek\": \"mek-Latn-ZZ\",\n    \"men\": \"men-Latn-SL\",\n    \"mer\": \"mer-Latn-KE\",\n    \"met\": \"met-Latn-ZZ\",\n    \"meu\": \"meu-Latn-ZZ\",\n    \"mfa\": \"mfa-Arab-TH\",\n    \"mfe\": \"mfe-Latn-MU\",\n    \"mfn\": \"mfn-Latn-ZZ\",\n    \"mfo\": \"mfo-Latn-ZZ\",\n    \"mfq\": \"mfq-Latn-ZZ\",\n    \"mg\": \"mg-Latn-MG\",\n    \"mgh\": \"mgh-Latn-MZ\",\n    \"mgl\": \"mgl-Latn-ZZ\",\n    \"mgo\": \"mgo-Latn-CM\",\n    \"mgp\": \"mgp-Deva-NP\",\n    \"mgy\": \"mgy-Latn-TZ\",\n    \"mh\": \"mh-Latn-MH\",\n    \"mhi\": \"mhi-Latn-ZZ\",\n    \"mhl\": \"mhl-Latn-ZZ\",\n    \"mi\": \"mi-Latn-NZ\",\n    \"mif\": \"mif-Latn-ZZ\",\n    \"min\": \"min-Latn-ID\",\n    \"miw\": \"miw-Latn-ZZ\",\n    \"mk\": \"mk-Cyrl-MK\",\n    \"mki\": \"mki-Arab-ZZ\",\n    \"mkl\": \"mkl-Latn-ZZ\",\n    \"mkp\": \"mkp-Latn-ZZ\",\n    \"mkw\": \"mkw-Latn-ZZ\",\n    \"ml\": \"ml-Mlym-IN\",\n    \"mle\": \"mle-Latn-ZZ\",\n    \"mlp\": \"mlp-Latn-ZZ\",\n    \"mls\": \"mls-Latn-SD\",\n    \"mmo\": \"mmo-Latn-ZZ\",\n    \"mmu\": \"mmu-Latn-ZZ\",\n    \"mmx\": \"mmx-Latn-ZZ\",\n    \"mn\": \"mn-Cyrl-MN\",\n    \"mn-CN\": \"mn-Mong-CN\",\n    \"mn-Mong\": \"mn-Mong-CN\",\n    \"mna\": \"mna-Latn-ZZ\",\n    \"mnf\": \"mnf-Latn-ZZ\",\n    \"mni\": \"mni-Beng-IN\",\n    \"mnw\": \"mnw-Mymr-MM\",\n    \"mo\": \"mo-Latn-RO\",\n    \"moa\": \"moa-Latn-ZZ\",\n    \"moe\": \"moe-Latn-CA\",\n    \"moh\": \"moh-Latn-CA\",\n    \"mos\": \"mos-Latn-BF\",\n    \"mox\": \"mox-Latn-ZZ\",\n    \"mpp\": \"mpp-Latn-ZZ\",\n    \"mps\": \"mps-Latn-ZZ\",\n    \"mpt\": \"mpt-Latn-ZZ\",\n    \"mpx\": \"mpx-Latn-ZZ\",\n    \"mql\": \"mql-Latn-ZZ\",\n    \"mr\": \"mr-Deva-IN\",\n    \"mrd\": \"mrd-Deva-NP\",\n    \"mrj\": \"mrj-Cyrl-RU\",\n    \"mro\": \"mro-Mroo-BD\",\n    \"ms\": \"ms-Latn-MY\",\n    \"ms-CC\": \"ms-Arab-CC\",\n    \"mt\": \"mt-Latn-MT\",\n    \"mtc\": \"mtc-Latn-ZZ\",\n    \"mtf\": \"mtf-Latn-ZZ\",\n    \"mti\": \"mti-Latn-ZZ\",\n    \"mtr\": \"mtr-Deva-IN\",\n    \"mua\": \"mua-Latn-CM\",\n    \"mur\": \"mur-Latn-ZZ\",\n    \"mus\": \"mus-Latn-US\",\n    \"mva\": \"mva-Latn-ZZ\",\n    \"mvn\": \"mvn-Latn-ZZ\",\n    \"mvy\": \"mvy-Arab-PK\",\n    \"mwk\": \"mwk-Latn-ML\",\n    \"mwr\": \"mwr-Deva-IN\",\n    \"mwv\": \"mwv-Latn-ID\",\n    \"mww\": \"mww-Hmnp-US\",\n    \"mxc\": \"mxc-Latn-ZW\",\n    \"mxm\": \"mxm-Latn-ZZ\",\n    \"my\": \"my-Mymr-MM\",\n    \"myk\": \"myk-Latn-ZZ\",\n    \"mym\": \"mym-Ethi-ZZ\",\n    \"myv\": \"myv-Cyrl-RU\",\n    \"myw\": \"myw-Latn-ZZ\",\n    \"myx\": \"myx-Latn-UG\",\n    \"myz\": \"myz-Mand-IR\",\n    \"mzk\": \"mzk-Latn-ZZ\",\n    \"mzm\": \"mzm-Latn-ZZ\",\n    \"mzn\": \"mzn-Arab-IR\",\n    \"mzp\": \"mzp-Latn-ZZ\",\n    \"mzw\": \"mzw-Latn-ZZ\",\n    \"mzz\": \"mzz-Latn-ZZ\",\n    \"na\": \"na-Latn-NR\",\n    \"nac\": \"nac-Latn-ZZ\",\n    \"naf\": \"naf-Latn-ZZ\",\n    \"nak\": \"nak-Latn-ZZ\",\n    \"nan\": \"nan-Hans-CN\",\n    \"nap\": \"nap-Latn-IT\",\n    \"naq\": \"naq-Latn-NA\",\n    \"nas\": \"nas-Latn-ZZ\",\n    \"nb\": \"nb-Latn-NO\",\n    \"nca\": \"nca-Latn-ZZ\",\n    \"nce\": \"nce-Latn-ZZ\",\n    \"ncf\": \"ncf-Latn-ZZ\",\n    \"nch\": \"nch-Latn-MX\",\n    \"nco\": \"nco-Latn-ZZ\",\n    \"ncu\": \"ncu-Latn-ZZ\",\n    \"nd\": \"nd-Latn-ZW\",\n    \"ndc\": \"ndc-Latn-MZ\",\n    \"nds\": \"nds-Latn-DE\",\n    \"ne\": \"ne-Deva-NP\",\n    \"neb\": \"neb-Latn-ZZ\",\n    \"new\": \"new-Deva-NP\",\n    \"nex\": \"nex-Latn-ZZ\",\n    \"nfr\": \"nfr-Latn-ZZ\",\n    \"ng\": \"ng-Latn-NA\",\n    \"nga\": \"nga-Latn-ZZ\",\n    \"ngb\": \"ngb-Latn-ZZ\",\n    \"ngl\": \"ngl-Latn-MZ\",\n    \"nhb\": \"nhb-Latn-ZZ\",\n    \"nhe\": \"nhe-Latn-MX\",\n    \"nhw\": \"nhw-Latn-MX\",\n    \"nif\": \"nif-Latn-ZZ\",\n    \"nii\": \"nii-Latn-ZZ\",\n    \"nij\": \"nij-Latn-ID\",\n    \"nin\": \"nin-Latn-ZZ\",\n    \"niu\": \"niu-Latn-NU\",\n    \"niy\": \"niy-Latn-ZZ\",\n    \"niz\": \"niz-Latn-ZZ\",\n    \"njo\": \"njo-Latn-IN\",\n    \"nkg\": \"nkg-Latn-ZZ\",\n    \"nko\": \"nko-Latn-ZZ\",\n    \"nl\": \"nl-Latn-NL\",\n    \"nmg\": \"nmg-Latn-CM\",\n    \"nmz\": \"nmz-Latn-ZZ\",\n    \"nn\": \"nn-Latn-NO\",\n    \"nnf\": \"nnf-Latn-ZZ\",\n    \"nnh\": \"nnh-Latn-CM\",\n    \"nnk\": \"nnk-Latn-ZZ\",\n    \"nnm\": \"nnm-Latn-ZZ\",\n    \"nnp\": \"nnp-Wcho-IN\",\n    \"no\": \"no-Latn-NO\",\n    \"nod\": \"nod-Lana-TH\",\n    \"noe\": \"noe-Deva-IN\",\n    \"non\": \"non-Runr-SE\",\n    \"nop\": \"nop-Latn-ZZ\",\n    \"nou\": \"nou-Latn-ZZ\",\n    \"nqo\": \"nqo-Nkoo-GN\",\n    \"nr\": \"nr-Latn-ZA\",\n    \"nrb\": \"nrb-Latn-ZZ\",\n    \"nsk\": \"nsk-Cans-CA\",\n    \"nsn\": \"nsn-Latn-ZZ\",\n    \"nso\": \"nso-Latn-ZA\",\n    \"nss\": \"nss-Latn-ZZ\",\n    \"nst\": \"nst-Tnsa-IN\",\n    \"ntm\": \"ntm-Latn-ZZ\",\n    \"ntr\": \"ntr-Latn-ZZ\",\n    \"nui\": \"nui-Latn-ZZ\",\n    \"nup\": \"nup-Latn-ZZ\",\n    \"nus\": \"nus-Latn-SS\",\n    \"nuv\": \"nuv-Latn-ZZ\",\n    \"nux\": \"nux-Latn-ZZ\",\n    \"nv\": \"nv-Latn-US\",\n    \"nwb\": \"nwb-Latn-ZZ\",\n    \"nxq\": \"nxq-Latn-CN\",\n    \"nxr\": \"nxr-Latn-ZZ\",\n    \"ny\": \"ny-Latn-MW\",\n    \"nym\": \"nym-Latn-TZ\",\n    \"nyn\": \"nyn-Latn-UG\",\n    \"nzi\": \"nzi-Latn-GH\",\n    \"oc\": \"oc-Latn-FR\",\n    \"ogc\": \"ogc-Latn-ZZ\",\n    \"okr\": \"okr-Latn-ZZ\",\n    \"okv\": \"okv-Latn-ZZ\",\n    \"om\": \"om-Latn-ET\",\n    \"ong\": \"ong-Latn-ZZ\",\n    \"onn\": \"onn-Latn-ZZ\",\n    \"ons\": \"ons-Latn-ZZ\",\n    \"opm\": \"opm-Latn-ZZ\",\n    \"or\": \"or-Orya-IN\",\n    \"oro\": \"oro-Latn-ZZ\",\n    \"oru\": \"oru-Arab-ZZ\",\n    \"os\": \"os-Cyrl-GE\",\n    \"osa\": \"osa-Osge-US\",\n    \"ota\": \"ota-Arab-ZZ\",\n    \"otk\": \"otk-Orkh-MN\",\n    \"oui\": \"oui-Ougr-143\",\n    \"ozm\": \"ozm-Latn-ZZ\",\n    \"pa\": \"pa-Guru-IN\",\n    \"pa-Arab\": \"pa-Arab-PK\",\n    \"pa-PK\": \"pa-Arab-PK\",\n    \"pag\": \"pag-Latn-PH\",\n    \"pal\": \"pal-Phli-IR\",\n    \"pal-Phlp\": \"pal-Phlp-CN\",\n    \"pam\": \"pam-Latn-PH\",\n    \"pap\": \"pap-Latn-AW\",\n    \"pau\": \"pau-Latn-PW\",\n    \"pbi\": \"pbi-Latn-ZZ\",\n    \"pcd\": \"pcd-Latn-FR\",\n    \"pcm\": \"pcm-Latn-NG\",\n    \"pdc\": \"pdc-Latn-US\",\n    \"pdt\": \"pdt-Latn-CA\",\n    \"ped\": \"ped-Latn-ZZ\",\n    \"peo\": \"peo-Xpeo-IR\",\n    \"pex\": \"pex-Latn-ZZ\",\n    \"pfl\": \"pfl-Latn-DE\",\n    \"phl\": \"phl-Arab-ZZ\",\n    \"phn\": \"phn-Phnx-LB\",\n    \"pil\": \"pil-Latn-ZZ\",\n    \"pip\": \"pip-Latn-ZZ\",\n    \"pka\": \"pka-Brah-IN\",\n    \"pko\": \"pko-Latn-KE\",\n    \"pl\": \"pl-Latn-PL\",\n    \"pla\": \"pla-Latn-ZZ\",\n    \"pms\": \"pms-Latn-IT\",\n    \"png\": \"png-Latn-ZZ\",\n    \"pnn\": \"pnn-Latn-ZZ\",\n    \"pnt\": \"pnt-Grek-GR\",\n    \"pon\": \"pon-Latn-FM\",\n    \"ppa\": \"ppa-Deva-IN\",\n    \"ppo\": \"ppo-Latn-ZZ\",\n    \"pra\": \"pra-Khar-PK\",\n    \"prd\": \"prd-Arab-IR\",\n    \"prg\": \"prg-Latn-001\",\n    \"ps\": \"ps-Arab-AF\",\n    \"pss\": \"pss-Latn-ZZ\",\n    \"pt\": \"pt-Latn-BR\",\n    \"ptp\": \"ptp-Latn-ZZ\",\n    \"puu\": \"puu-Latn-GA\",\n    \"pwa\": \"pwa-Latn-ZZ\",\n    \"qu\": \"qu-Latn-PE\",\n    \"quc\": \"quc-Latn-GT\",\n    \"qug\": \"qug-Latn-EC\",\n    \"rai\": \"rai-Latn-ZZ\",\n    \"raj\": \"raj-Deva-IN\",\n    \"rao\": \"rao-Latn-ZZ\",\n    \"rcf\": \"rcf-Latn-RE\",\n    \"rej\": \"rej-Latn-ID\",\n    \"rel\": \"rel-Latn-ZZ\",\n    \"res\": \"res-Latn-ZZ\",\n    \"rgn\": \"rgn-Latn-IT\",\n    \"rhg\": \"rhg-Rohg-MM\",\n    \"ria\": \"ria-Latn-IN\",\n    \"rif\": \"rif-Tfng-MA\",\n    \"rif-NL\": \"rif-Latn-NL\",\n    \"rjs\": \"rjs-Deva-NP\",\n    \"rkt\": \"rkt-Beng-BD\",\n    \"rm\": \"rm-Latn-CH\",\n    \"rmf\": \"rmf-Latn-FI\",\n    \"rmo\": \"rmo-Latn-CH\",\n    \"rmt\": \"rmt-Arab-IR\",\n    \"rmu\": \"rmu-Latn-SE\",\n    \"rn\": \"rn-Latn-BI\",\n    \"rna\": \"rna-Latn-ZZ\",\n    \"rng\": \"rng-Latn-MZ\",\n    \"ro\": \"ro-Latn-RO\",\n    \"rob\": \"rob-Latn-ID\",\n    \"rof\": \"rof-Latn-TZ\",\n    \"roo\": \"roo-Latn-ZZ\",\n    \"rro\": \"rro-Latn-ZZ\",\n    \"rtm\": \"rtm-Latn-FJ\",\n    \"ru\": \"ru-Cyrl-RU\",\n    \"rue\": \"rue-Cyrl-UA\",\n    \"rug\": \"rug-Latn-SB\",\n    \"rw\": \"rw-Latn-RW\",\n    \"rwk\": \"rwk-Latn-TZ\",\n    \"rwo\": \"rwo-Latn-ZZ\",\n    \"ryu\": \"ryu-Kana-JP\",\n    \"sa\": \"sa-Deva-IN\",\n    \"saf\": \"saf-Latn-GH\",\n    \"sah\": \"sah-Cyrl-RU\",\n    \"saq\": \"saq-Latn-KE\",\n    \"sas\": \"sas-Latn-ID\",\n    \"sat\": \"sat-Olck-IN\",\n    \"sav\": \"sav-Latn-SN\",\n    \"saz\": \"saz-Saur-IN\",\n    \"sba\": \"sba-Latn-ZZ\",\n    \"sbe\": \"sbe-Latn-ZZ\",\n    \"sbp\": \"sbp-Latn-TZ\",\n    \"sc\": \"sc-Latn-IT\",\n    \"sck\": \"sck-Deva-IN\",\n    \"scl\": \"scl-Arab-ZZ\",\n    \"scn\": \"scn-Latn-IT\",\n    \"sco\": \"sco-Latn-GB\",\n    \"scs\": \"scs-Latn-CA\",\n    \"sd\": \"sd-Arab-PK\",\n    \"sd-Deva\": \"sd-Deva-IN\",\n    \"sd-Khoj\": \"sd-Khoj-IN\",\n    \"sd-Sind\": \"sd-Sind-IN\",\n    \"sdc\": \"sdc-Latn-IT\",\n    \"sdh\": \"sdh-Arab-IR\",\n    \"se\": \"se-Latn-NO\",\n    \"sef\": \"sef-Latn-CI\",\n    \"seh\": \"seh-Latn-MZ\",\n    \"sei\": \"sei-Latn-MX\",\n    \"ses\": \"ses-Latn-ML\",\n    \"sg\": \"sg-Latn-CF\",\n    \"sga\": \"sga-Ogam-IE\",\n    \"sgs\": \"sgs-Latn-LT\",\n    \"sgw\": \"sgw-Ethi-ZZ\",\n    \"sgz\": \"sgz-Latn-ZZ\",\n    \"shi\": \"shi-Tfng-MA\",\n    \"shk\": \"shk-Latn-ZZ\",\n    \"shn\": \"shn-Mymr-MM\",\n    \"shu\": \"shu-Arab-ZZ\",\n    \"si\": \"si-Sinh-LK\",\n    \"sid\": \"sid-Latn-ET\",\n    \"sig\": \"sig-Latn-ZZ\",\n    \"sil\": \"sil-Latn-ZZ\",\n    \"sim\": \"sim-Latn-ZZ\",\n    \"sjr\": \"sjr-Latn-ZZ\",\n    \"sk\": \"sk-Latn-SK\",\n    \"skc\": \"skc-Latn-ZZ\",\n    \"skr\": \"skr-Arab-PK\",\n    \"sks\": \"sks-Latn-ZZ\",\n    \"sl\": \"sl-Latn-SI\",\n    \"sld\": \"sld-Latn-ZZ\",\n    \"sli\": \"sli-Latn-PL\",\n    \"sll\": \"sll-Latn-ZZ\",\n    \"sly\": \"sly-Latn-ID\",\n    \"sm\": \"sm-Latn-WS\",\n    \"sma\": \"sma-Latn-SE\",\n    \"smj\": \"smj-Latn-SE\",\n    \"smn\": \"smn-Latn-FI\",\n    \"smp\": \"smp-Samr-IL\",\n    \"smq\": \"smq-Latn-ZZ\",\n    \"sms\": \"sms-Latn-FI\",\n    \"sn\": \"sn-Latn-ZW\",\n    \"snc\": \"snc-Latn-ZZ\",\n    \"snk\": \"snk-Latn-ML\",\n    \"snp\": \"snp-Latn-ZZ\",\n    \"snx\": \"snx-Latn-ZZ\",\n    \"sny\": \"sny-Latn-ZZ\",\n    \"so\": \"so-Latn-SO\",\n    \"sog\": \"sog-Sogd-UZ\",\n    \"sok\": \"sok-Latn-ZZ\",\n    \"soq\": \"soq-Latn-ZZ\",\n    \"sou\": \"sou-Thai-TH\",\n    \"soy\": \"soy-Latn-ZZ\",\n    \"spd\": \"spd-Latn-ZZ\",\n    \"spl\": \"spl-Latn-ZZ\",\n    \"sps\": \"sps-Latn-ZZ\",\n    \"sq\": \"sq-Latn-AL\",\n    \"sr\": \"sr-Cyrl-RS\",\n    \"sr-ME\": \"sr-Latn-ME\",\n    \"sr-RO\": \"sr-Latn-RO\",\n    \"sr-RU\": \"sr-Latn-RU\",\n    \"sr-TR\": \"sr-Latn-TR\",\n    \"srb\": \"srb-Sora-IN\",\n    \"srn\": \"srn-Latn-SR\",\n    \"srr\": \"srr-Latn-SN\",\n    \"srx\": \"srx-Deva-IN\",\n    \"ss\": \"ss-Latn-ZA\",\n    \"ssd\": \"ssd-Latn-ZZ\",\n    \"ssg\": \"ssg-Latn-ZZ\",\n    \"ssy\": \"ssy-Latn-ER\",\n    \"st\": \"st-Latn-ZA\",\n    \"stk\": \"stk-Latn-ZZ\",\n    \"stq\": \"stq-Latn-DE\",\n    \"su\": \"su-Latn-ID\",\n    \"sua\": \"sua-Latn-ZZ\",\n    \"sue\": \"sue-Latn-ZZ\",\n    \"suk\": \"suk-Latn-TZ\",\n    \"sur\": \"sur-Latn-ZZ\",\n    \"sus\": \"sus-Latn-GN\",\n    \"sv\": \"sv-Latn-SE\",\n    \"sw\": \"sw-Latn-TZ\",\n    \"swb\": \"swb-Arab-YT\",\n    \"swc\": \"swc-Latn-CD\",\n    \"swg\": \"swg-Latn-DE\",\n    \"swp\": \"swp-Latn-ZZ\",\n    \"swv\": \"swv-Deva-IN\",\n    \"sxn\": \"sxn-Latn-ID\",\n    \"sxw\": \"sxw-Latn-ZZ\",\n    \"syl\": \"syl-Beng-BD\",\n    \"syr\": \"syr-Syrc-IQ\",\n    \"szl\": \"szl-Latn-PL\",\n    \"ta\": \"ta-Taml-IN\",\n    \"taj\": \"taj-Deva-NP\",\n    \"tal\": \"tal-Latn-ZZ\",\n    \"tan\": \"tan-Latn-ZZ\",\n    \"taq\": \"taq-Latn-ZZ\",\n    \"tbc\": \"tbc-Latn-ZZ\",\n    \"tbd\": \"tbd-Latn-ZZ\",\n    \"tbf\": \"tbf-Latn-ZZ\",\n    \"tbg\": \"tbg-Latn-ZZ\",\n    \"tbo\": \"tbo-Latn-ZZ\",\n    \"tbw\": \"tbw-Latn-PH\",\n    \"tbz\": \"tbz-Latn-ZZ\",\n    \"tci\": \"tci-Latn-ZZ\",\n    \"tcy\": \"tcy-Knda-IN\",\n    \"tdd\": \"tdd-Tale-CN\",\n    \"tdg\": \"tdg-Deva-NP\",\n    \"tdh\": \"tdh-Deva-NP\",\n    \"tdu\": \"tdu-Latn-MY\",\n    \"te\": \"te-Telu-IN\",\n    \"ted\": \"ted-Latn-ZZ\",\n    \"tem\": \"tem-Latn-SL\",\n    \"teo\": \"teo-Latn-UG\",\n    \"tet\": \"tet-Latn-TL\",\n    \"tfi\": \"tfi-Latn-ZZ\",\n    \"tg\": \"tg-Cyrl-TJ\",\n    \"tg-Arab\": \"tg-Arab-PK\",\n    \"tg-PK\": \"tg-Arab-PK\",\n    \"tgc\": \"tgc-Latn-ZZ\",\n    \"tgo\": \"tgo-Latn-ZZ\",\n    \"tgu\": \"tgu-Latn-ZZ\",\n    \"th\": \"th-Thai-TH\",\n    \"thl\": \"thl-Deva-NP\",\n    \"thq\": \"thq-Deva-NP\",\n    \"thr\": \"thr-Deva-NP\",\n    \"ti\": \"ti-Ethi-ET\",\n    \"tif\": \"tif-Latn-ZZ\",\n    \"tig\": \"tig-Ethi-ER\",\n    \"tik\": \"tik-Latn-ZZ\",\n    \"tim\": \"tim-Latn-ZZ\",\n    \"tio\": \"tio-Latn-ZZ\",\n    \"tiv\": \"tiv-Latn-NG\",\n    \"tk\": \"tk-Latn-TM\",\n    \"tkl\": \"tkl-Latn-TK\",\n    \"tkr\": \"tkr-Latn-AZ\",\n    \"tkt\": \"tkt-Deva-NP\",\n    \"tl\": \"tl-Latn-PH\",\n    \"tlf\": \"tlf-Latn-ZZ\",\n    \"tlx\": \"tlx-Latn-ZZ\",\n    \"tly\": \"tly-Latn-AZ\",\n    \"tmh\": \"tmh-Latn-NE\",\n    \"tmy\": \"tmy-Latn-ZZ\",\n    \"tn\": \"tn-Latn-ZA\",\n    \"tnh\": \"tnh-Latn-ZZ\",\n    \"to\": \"to-Latn-TO\",\n    \"tof\": \"tof-Latn-ZZ\",\n    \"tog\": \"tog-Latn-MW\",\n    \"toq\": \"toq-Latn-ZZ\",\n    \"tpi\": \"tpi-Latn-PG\",\n    \"tpm\": \"tpm-Latn-ZZ\",\n    \"tpz\": \"tpz-Latn-ZZ\",\n    \"tqo\": \"tqo-Latn-ZZ\",\n    \"tr\": \"tr-Latn-TR\",\n    \"tru\": \"tru-Latn-TR\",\n    \"trv\": \"trv-Latn-TW\",\n    \"trw\": \"trw-Arab-PK\",\n    \"ts\": \"ts-Latn-ZA\",\n    \"tsd\": \"tsd-Grek-GR\",\n    \"tsf\": \"tsf-Deva-NP\",\n    \"tsg\": \"tsg-Latn-PH\",\n    \"tsj\": \"tsj-Tibt-BT\",\n    \"tsw\": \"tsw-Latn-ZZ\",\n    \"tt\": \"tt-Cyrl-RU\",\n    \"ttd\": \"ttd-Latn-ZZ\",\n    \"tte\": \"tte-Latn-ZZ\",\n    \"ttj\": \"ttj-Latn-UG\",\n    \"ttr\": \"ttr-Latn-ZZ\",\n    \"tts\": \"tts-Thai-TH\",\n    \"ttt\": \"ttt-Latn-AZ\",\n    \"tuh\": \"tuh-Latn-ZZ\",\n    \"tul\": \"tul-Latn-ZZ\",\n    \"tum\": \"tum-Latn-MW\",\n    \"tuq\": \"tuq-Latn-ZZ\",\n    \"tvd\": \"tvd-Latn-ZZ\",\n    \"tvl\": \"tvl-Latn-TV\",\n    \"tvu\": \"tvu-Latn-ZZ\",\n    \"twh\": \"twh-Latn-ZZ\",\n    \"twq\": \"twq-Latn-NE\",\n    \"txg\": \"txg-Tang-CN\",\n    \"txo\": \"txo-Toto-IN\",\n    \"ty\": \"ty-Latn-PF\",\n    \"tya\": \"tya-Latn-ZZ\",\n    \"tyv\": \"tyv-Cyrl-RU\",\n    \"tzm\": \"tzm-Latn-MA\",\n    \"ubu\": \"ubu-Latn-ZZ\",\n    \"udi\": \"udi-Aghb-RU\",\n    \"udm\": \"udm-Cyrl-RU\",\n    \"ug\": \"ug-Arab-CN\",\n    \"ug-Cyrl\": \"ug-Cyrl-KZ\",\n    \"ug-KZ\": \"ug-Cyrl-KZ\",\n    \"ug-MN\": \"ug-Cyrl-MN\",\n    \"uga\": \"uga-Ugar-SY\",\n    \"uk\": \"uk-Cyrl-UA\",\n    \"uli\": \"uli-Latn-FM\",\n    \"umb\": \"umb-Latn-AO\",\n    \"und\": \"en-Latn-US\",\n    \"und-002\": \"en-Latn-NG\",\n    \"und-003\": \"en-Latn-US\",\n    \"und-005\": \"pt-Latn-BR\",\n    \"und-009\": \"en-Latn-AU\",\n    \"und-011\": \"en-Latn-NG\",\n    \"und-013\": \"es-Latn-MX\",\n    \"und-014\": \"sw-Latn-TZ\",\n    \"und-015\": \"ar-Arab-EG\",\n    \"und-017\": \"sw-Latn-CD\",\n    \"und-018\": \"en-Latn-ZA\",\n    \"und-019\": \"en-Latn-US\",\n    \"und-021\": \"en-Latn-US\",\n    \"und-029\": \"es-Latn-CU\",\n    \"und-030\": \"zh-Hans-CN\",\n    \"und-034\": \"hi-Deva-IN\",\n    \"und-035\": \"id-Latn-ID\",\n    \"und-039\": \"it-Latn-IT\",\n    \"und-053\": \"en-Latn-AU\",\n    \"und-054\": \"en-Latn-PG\",\n    \"und-057\": \"en-Latn-GU\",\n    \"und-061\": \"sm-Latn-WS\",\n    \"und-142\": \"zh-Hans-CN\",\n    \"und-143\": \"uz-Latn-UZ\",\n    \"und-145\": \"ar-Arab-SA\",\n    \"und-150\": \"ru-Cyrl-RU\",\n    \"und-151\": \"ru-Cyrl-RU\",\n    \"und-154\": \"en-Latn-GB\",\n    \"und-155\": \"de-Latn-DE\",\n    \"und-202\": \"en-Latn-NG\",\n    \"und-419\": \"es-Latn-419\",\n    \"und-AD\": \"ca-Latn-AD\",\n    \"und-Adlm\": \"ff-Adlm-GN\",\n    \"und-AE\": \"ar-Arab-AE\",\n    \"und-AF\": \"fa-Arab-AF\",\n    \"und-Aghb\": \"udi-Aghb-RU\",\n    \"und-Ahom\": \"aho-Ahom-IN\",\n    \"und-AL\": \"sq-Latn-AL\",\n    \"und-AM\": \"hy-Armn-AM\",\n    \"und-AO\": \"pt-Latn-AO\",\n    \"und-AQ\": \"und-Latn-AQ\",\n    \"und-AR\": \"es-Latn-AR\",\n    \"und-Arab\": \"ar-Arab-EG\",\n    \"und-Arab-CC\": \"ms-Arab-CC\",\n    \"und-Arab-CN\": \"ug-Arab-CN\",\n    \"und-Arab-GB\": \"ks-Arab-GB\",\n    \"und-Arab-ID\": \"ms-Arab-ID\",\n    \"und-Arab-IN\": \"ur-Arab-IN\",\n    \"und-Arab-KH\": \"cja-Arab-KH\",\n    \"und-Arab-MM\": \"rhg-Arab-MM\",\n    \"und-Arab-MN\": \"kk-Arab-MN\",\n    \"und-Arab-MU\": \"ur-Arab-MU\",\n    \"und-Arab-NG\": \"ha-Arab-NG\",\n    \"und-Arab-PK\": \"ur-Arab-PK\",\n    \"und-Arab-TG\": \"apd-Arab-TG\",\n    \"und-Arab-TH\": \"mfa-Arab-TH\",\n    \"und-Arab-TJ\": \"fa-Arab-TJ\",\n    \"und-Arab-TR\": \"az-Arab-TR\",\n    \"und-Arab-YT\": \"swb-Arab-YT\",\n    \"und-Armi\": \"arc-Armi-IR\",\n    \"und-Armn\": \"hy-Armn-AM\",\n    \"und-AS\": \"sm-Latn-AS\",\n    \"und-AT\": \"de-Latn-AT\",\n    \"und-Avst\": \"ae-Avst-IR\",\n    \"und-AW\": \"nl-Latn-AW\",\n    \"und-AX\": \"sv-Latn-AX\",\n    \"und-AZ\": \"az-Latn-AZ\",\n    \"und-BA\": \"bs-Latn-BA\",\n    \"und-Bali\": \"ban-Bali-ID\",\n    \"und-Bamu\": \"bax-Bamu-CM\",\n    \"und-Bass\": \"bsq-Bass-LR\",\n    \"und-Batk\": \"bbc-Batk-ID\",\n    \"und-BD\": \"bn-Beng-BD\",\n    \"und-BE\": \"nl-Latn-BE\",\n    \"und-Beng\": \"bn-Beng-BD\",\n    \"und-BF\": \"fr-Latn-BF\",\n    \"und-BG\": \"bg-Cyrl-BG\",\n    \"und-BH\": \"ar-Arab-BH\",\n    \"und-Bhks\": \"sa-Bhks-IN\",\n    \"und-BI\": \"rn-Latn-BI\",\n    \"und-BJ\": \"fr-Latn-BJ\",\n    \"und-BL\": \"fr-Latn-BL\",\n    \"und-BN\": \"ms-Latn-BN\",\n    \"und-BO\": \"es-Latn-BO\",\n    \"und-Bopo\": \"zh-Bopo-TW\",\n    \"und-BQ\": \"pap-Latn-BQ\",\n    \"und-BR\": \"pt-Latn-BR\",\n    \"und-Brah\": \"pka-Brah-IN\",\n    \"und-Brai\": \"fr-Brai-FR\",\n    \"und-BT\": \"dz-Tibt-BT\",\n    \"und-Bugi\": \"bug-Bugi-ID\",\n    \"und-Buhd\": \"bku-Buhd-PH\",\n    \"und-BV\": \"und-Latn-BV\",\n    \"und-BY\": \"be-Cyrl-BY\",\n    \"und-Cakm\": \"ccp-Cakm-BD\",\n    \"und-Cans\": \"cr-Cans-CA\",\n    \"und-Cari\": \"xcr-Cari-TR\",\n    \"und-CD\": \"sw-Latn-CD\",\n    \"und-CF\": \"fr-Latn-CF\",\n    \"und-CG\": \"fr-Latn-CG\",\n    \"und-CH\": \"de-Latn-CH\",\n    \"und-Cham\": \"cjm-Cham-VN\",\n    \"und-Cher\": \"chr-Cher-US\",\n    \"und-Chrs\": \"xco-Chrs-UZ\",\n    \"und-CI\": \"fr-Latn-CI\",\n    \"und-CL\": \"es-Latn-CL\",\n    \"und-CM\": \"fr-Latn-CM\",\n    \"und-CN\": \"zh-Hans-CN\",\n    \"und-CO\": \"es-Latn-CO\",\n    \"und-Copt\": \"cop-Copt-EG\",\n    \"und-CP\": \"und-Latn-CP\",\n    \"und-Cpmn\": \"und-Cpmn-CY\",\n    \"und-Cpmn-CY\": \"und-Cpmn-CY\",\n    \"und-Cprt\": \"grc-Cprt-CY\",\n    \"und-CR\": \"es-Latn-CR\",\n    \"und-CU\": \"es-Latn-CU\",\n    \"und-CV\": \"pt-Latn-CV\",\n    \"und-CW\": \"pap-Latn-CW\",\n    \"und-CY\": \"el-Grek-CY\",\n    \"und-Cyrl\": \"ru-Cyrl-RU\",\n    \"und-Cyrl-AL\": \"mk-Cyrl-AL\",\n    \"und-Cyrl-BA\": \"sr-Cyrl-BA\",\n    \"und-Cyrl-GE\": \"os-Cyrl-GE\",\n    \"und-Cyrl-GR\": \"mk-Cyrl-GR\",\n    \"und-Cyrl-MD\": \"uk-Cyrl-MD\",\n    \"und-Cyrl-RO\": \"bg-Cyrl-RO\",\n    \"und-Cyrl-SK\": \"uk-Cyrl-SK\",\n    \"und-Cyrl-TR\": \"kbd-Cyrl-TR\",\n    \"und-Cyrl-XK\": \"sr-Cyrl-XK\",\n    \"und-CZ\": \"cs-Latn-CZ\",\n    \"und-DE\": \"de-Latn-DE\",\n    \"und-Deva\": \"hi-Deva-IN\",\n    \"und-Deva-BT\": \"ne-Deva-BT\",\n    \"und-Deva-FJ\": \"hif-Deva-FJ\",\n    \"und-Deva-MU\": \"bho-Deva-MU\",\n    \"und-Deva-PK\": \"btv-Deva-PK\",\n    \"und-Diak\": \"dv-Diak-MV\",\n    \"und-DJ\": \"aa-Latn-DJ\",\n    \"und-DK\": \"da-Latn-DK\",\n    \"und-DO\": \"es-Latn-DO\",\n    \"und-Dogr\": \"doi-Dogr-IN\",\n    \"und-Dupl\": \"fr-Dupl-FR\",\n    \"und-DZ\": \"ar-Arab-DZ\",\n    \"und-EA\": \"es-Latn-EA\",\n    \"und-EC\": \"es-Latn-EC\",\n    \"und-EE\": \"et-Latn-EE\",\n    \"und-EG\": \"ar-Arab-EG\",\n    \"und-Egyp\": \"egy-Egyp-EG\",\n    \"und-EH\": \"ar-Arab-EH\",\n    \"und-Elba\": \"sq-Elba-AL\",\n    \"und-Elym\": \"arc-Elym-IR\",\n    \"und-ER\": \"ti-Ethi-ER\",\n    \"und-ES\": \"es-Latn-ES\",\n    \"und-ET\": \"am-Ethi-ET\",\n    \"und-Ethi\": \"am-Ethi-ET\",\n    \"und-EU\": \"en-Latn-IE\",\n    \"und-EZ\": \"de-Latn-EZ\",\n    \"und-FI\": \"fi-Latn-FI\",\n    \"und-FO\": \"fo-Latn-FO\",\n    \"und-FR\": \"fr-Latn-FR\",\n    \"und-GA\": \"fr-Latn-GA\",\n    \"und-GE\": \"ka-Geor-GE\",\n    \"und-Geor\": \"ka-Geor-GE\",\n    \"und-GF\": \"fr-Latn-GF\",\n    \"und-GH\": \"ak-Latn-GH\",\n    \"und-GL\": \"kl-Latn-GL\",\n    \"und-Glag\": \"cu-Glag-BG\",\n    \"und-GN\": \"fr-Latn-GN\",\n    \"und-Gong\": \"wsg-Gong-IN\",\n    \"und-Gonm\": \"esg-Gonm-IN\",\n    \"und-Goth\": \"got-Goth-UA\",\n    \"und-GP\": \"fr-Latn-GP\",\n    \"und-GQ\": \"es-Latn-GQ\",\n    \"und-GR\": \"el-Grek-GR\",\n    \"und-Gran\": \"sa-Gran-IN\",\n    \"und-Grek\": \"el-Grek-GR\",\n    \"und-Grek-TR\": \"bgx-Grek-TR\",\n    \"und-GS\": \"und-Latn-GS\",\n    \"und-GT\": \"es-Latn-GT\",\n    \"und-Gujr\": \"gu-Gujr-IN\",\n    \"und-Guru\": \"pa-Guru-IN\",\n    \"und-GW\": \"pt-Latn-GW\",\n    \"und-Hanb\": \"zh-Hanb-TW\",\n    \"und-Hang\": \"ko-Hang-KR\",\n    \"und-Hani\": \"zh-Hani-CN\",\n    \"und-Hano\": \"hnn-Hano-PH\",\n    \"und-Hans\": \"zh-Hans-CN\",\n    \"und-Hant\": \"zh-Hant-TW\",\n    \"und-Hebr\": \"he-Hebr-IL\",\n    \"und-Hebr-CA\": \"yi-Hebr-CA\",\n    \"und-Hebr-GB\": \"yi-Hebr-GB\",\n    \"und-Hebr-SE\": \"yi-Hebr-SE\",\n    \"und-Hebr-UA\": \"yi-Hebr-UA\",\n    \"und-Hebr-US\": \"yi-Hebr-US\",\n    \"und-Hira\": \"ja-Hira-JP\",\n    \"und-HK\": \"zh-Hant-HK\",\n    \"und-Hluw\": \"hlu-Hluw-TR\",\n    \"und-HM\": \"und-Latn-HM\",\n    \"und-Hmng\": \"hnj-Hmng-LA\",\n    \"und-Hmnp\": \"hnj-Hmnp-US\",\n    \"und-HN\": \"es-Latn-HN\",\n    \"und-HR\": \"hr-Latn-HR\",\n    \"und-HT\": \"ht-Latn-HT\",\n    \"und-HU\": \"hu-Latn-HU\",\n    \"und-Hung\": \"hu-Hung-HU\",\n    \"und-IC\": \"es-Latn-IC\",\n    \"und-ID\": \"id-Latn-ID\",\n    \"und-IL\": \"he-Hebr-IL\",\n    \"und-IN\": \"hi-Deva-IN\",\n    \"und-IQ\": \"ar-Arab-IQ\",\n    \"und-IR\": \"fa-Arab-IR\",\n    \"und-IS\": \"is-Latn-IS\",\n    \"und-IT\": \"it-Latn-IT\",\n    \"und-Ital\": \"ett-Ital-IT\",\n    \"und-Jamo\": \"ko-Jamo-KR\",\n    \"und-Java\": \"jv-Java-ID\",\n    \"und-JO\": \"ar-Arab-JO\",\n    \"und-JP\": \"ja-Jpan-JP\",\n    \"und-Jpan\": \"ja-Jpan-JP\",\n    \"und-Kali\": \"eky-Kali-MM\",\n    \"und-Kana\": \"ja-Kana-JP\",\n    \"und-KE\": \"sw-Latn-KE\",\n    \"und-KG\": \"ky-Cyrl-KG\",\n    \"und-KH\": \"km-Khmr-KH\",\n    \"und-Khar\": \"pra-Khar-PK\",\n    \"und-Khmr\": \"km-Khmr-KH\",\n    \"und-Khoj\": \"sd-Khoj-IN\",\n    \"und-Kits\": \"zkt-Kits-CN\",\n    \"und-KM\": \"ar-Arab-KM\",\n    \"und-Knda\": \"kn-Knda-IN\",\n    \"und-Kore\": \"ko-Kore-KR\",\n    \"und-KP\": \"ko-Kore-KP\",\n    \"und-KR\": \"ko-Kore-KR\",\n    \"und-Kthi\": \"bho-Kthi-IN\",\n    \"und-KW\": \"ar-Arab-KW\",\n    \"und-KZ\": \"ru-Cyrl-KZ\",\n    \"und-LA\": \"lo-Laoo-LA\",\n    \"und-Lana\": \"nod-Lana-TH\",\n    \"und-Laoo\": \"lo-Laoo-LA\",\n    \"und-Latn-AF\": \"tk-Latn-AF\",\n    \"und-Latn-AM\": \"ku-Latn-AM\",\n    \"und-Latn-CN\": \"za-Latn-CN\",\n    \"und-Latn-CY\": \"tr-Latn-CY\",\n    \"und-Latn-DZ\": \"fr-Latn-DZ\",\n    \"und-Latn-ET\": \"en-Latn-ET\",\n    \"und-Latn-GE\": \"ku-Latn-GE\",\n    \"und-Latn-IR\": \"tk-Latn-IR\",\n    \"und-Latn-KM\": \"fr-Latn-KM\",\n    \"und-Latn-MA\": \"fr-Latn-MA\",\n    \"und-Latn-MK\": \"sq-Latn-MK\",\n    \"und-Latn-MM\": \"kac-Latn-MM\",\n    \"und-Latn-MO\": \"pt-Latn-MO\",\n    \"und-Latn-MR\": \"fr-Latn-MR\",\n    \"und-Latn-RU\": \"krl-Latn-RU\",\n    \"und-Latn-SY\": \"fr-Latn-SY\",\n    \"und-Latn-TN\": \"fr-Latn-TN\",\n    \"und-Latn-TW\": \"trv-Latn-TW\",\n    \"und-Latn-UA\": \"pl-Latn-UA\",\n    \"und-LB\": \"ar-Arab-LB\",\n    \"und-Lepc\": \"lep-Lepc-IN\",\n    \"und-LI\": \"de-Latn-LI\",\n    \"und-Limb\": \"lif-Limb-IN\",\n    \"und-Lina\": \"lab-Lina-GR\",\n    \"und-Linb\": \"grc-Linb-GR\",\n    \"und-Lisu\": \"lis-Lisu-CN\",\n    \"und-LK\": \"si-Sinh-LK\",\n    \"und-LS\": \"st-Latn-LS\",\n    \"und-LT\": \"lt-Latn-LT\",\n    \"und-LU\": \"fr-Latn-LU\",\n    \"und-LV\": \"lv-Latn-LV\",\n    \"und-LY\": \"ar-Arab-LY\",\n    \"und-Lyci\": \"xlc-Lyci-TR\",\n    \"und-Lydi\": \"xld-Lydi-TR\",\n    \"und-MA\": \"ar-Arab-MA\",\n    \"und-Mahj\": \"hi-Mahj-IN\",\n    \"und-Maka\": \"mak-Maka-ID\",\n    \"und-Mand\": \"myz-Mand-IR\",\n    \"und-Mani\": \"xmn-Mani-CN\",\n    \"und-Marc\": \"bo-Marc-CN\",\n    \"und-MC\": \"fr-Latn-MC\",\n    \"und-MD\": \"ro-Latn-MD\",\n    \"und-ME\": \"sr-Latn-ME\",\n    \"und-Medf\": \"dmf-Medf-NG\",\n    \"und-Mend\": \"men-Mend-SL\",\n    \"und-Merc\": \"xmr-Merc-SD\",\n    \"und-Mero\": \"xmr-Mero-SD\",\n    \"und-MF\": \"fr-Latn-MF\",\n    \"und-MG\": \"mg-Latn-MG\",\n    \"und-MK\": \"mk-Cyrl-MK\",\n    \"und-ML\": \"bm-Latn-ML\",\n    \"und-Mlym\": \"ml-Mlym-IN\",\n    \"und-MM\": \"my-Mymr-MM\",\n    \"und-MN\": \"mn-Cyrl-MN\",\n    \"und-MO\": \"zh-Hant-MO\",\n    \"und-Modi\": \"mr-Modi-IN\",\n    \"und-Mong\": \"mn-Mong-CN\",\n    \"und-MQ\": \"fr-Latn-MQ\",\n    \"und-MR\": \"ar-Arab-MR\",\n    \"und-Mroo\": \"mro-Mroo-BD\",\n    \"und-MT\": \"mt-Latn-MT\",\n    \"und-Mtei\": \"mni-Mtei-IN\",\n    \"und-MU\": \"mfe-Latn-MU\",\n    \"und-Mult\": \"skr-Mult-PK\",\n    \"und-MV\": \"dv-Thaa-MV\",\n    \"und-MX\": \"es-Latn-MX\",\n    \"und-MY\": \"ms-Latn-MY\",\n    \"und-Mymr\": \"my-Mymr-MM\",\n    \"und-Mymr-IN\": \"kht-Mymr-IN\",\n    \"und-Mymr-TH\": \"mnw-Mymr-TH\",\n    \"und-MZ\": \"pt-Latn-MZ\",\n    \"und-NA\": \"af-Latn-NA\",\n    \"und-Nand\": \"sa-Nand-IN\",\n    \"und-Narb\": \"xna-Narb-SA\",\n    \"und-Nbat\": \"arc-Nbat-JO\",\n    \"und-NC\": \"fr-Latn-NC\",\n    \"und-NE\": \"ha-Latn-NE\",\n    \"und-Newa\": \"new-Newa-NP\",\n    \"und-NI\": \"es-Latn-NI\",\n    \"und-Nkoo\": \"man-Nkoo-GN\",\n    \"und-NL\": \"nl-Latn-NL\",\n    \"und-NO\": \"nb-Latn-NO\",\n    \"und-NP\": \"ne-Deva-NP\",\n    \"und-Nshu\": \"zhx-Nshu-CN\",\n    \"und-Ogam\": \"sga-Ogam-IE\",\n    \"und-Olck\": \"sat-Olck-IN\",\n    \"und-OM\": \"ar-Arab-OM\",\n    \"und-Orkh\": \"otk-Orkh-MN\",\n    \"und-Orya\": \"or-Orya-IN\",\n    \"und-Osge\": \"osa-Osge-US\",\n    \"und-Osma\": \"so-Osma-SO\",\n    \"und-Ougr\": \"oui-Ougr-143\",\n    \"und-PA\": \"es-Latn-PA\",\n    \"und-Palm\": \"arc-Palm-SY\",\n    \"und-Pauc\": \"ctd-Pauc-MM\",\n    \"und-PE\": \"es-Latn-PE\",\n    \"und-Perm\": \"kv-Perm-RU\",\n    \"und-PF\": \"fr-Latn-PF\",\n    \"und-PG\": \"tpi-Latn-PG\",\n    \"und-PH\": \"fil-Latn-PH\",\n    \"und-Phag\": \"lzh-Phag-CN\",\n    \"und-Phli\": \"pal-Phli-IR\",\n    \"und-Phlp\": \"pal-Phlp-CN\",\n    \"und-Phnx\": \"phn-Phnx-LB\",\n    \"und-PK\": \"ur-Arab-PK\",\n    \"und-PL\": \"pl-Latn-PL\",\n    \"und-Plrd\": \"hmd-Plrd-CN\",\n    \"und-PM\": \"fr-Latn-PM\",\n    \"und-PR\": \"es-Latn-PR\",\n    \"und-Prti\": \"xpr-Prti-IR\",\n    \"und-PS\": \"ar-Arab-PS\",\n    \"und-PT\": \"pt-Latn-PT\",\n    \"und-PW\": \"pau-Latn-PW\",\n    \"und-PY\": \"gn-Latn-PY\",\n    \"und-QA\": \"ar-Arab-QA\",\n    \"und-QO\": \"en-Latn-DG\",\n    \"und-RE\": \"fr-Latn-RE\",\n    \"und-Rjng\": \"rej-Rjng-ID\",\n    \"und-RO\": \"ro-Latn-RO\",\n    \"und-Rohg\": \"rhg-Rohg-MM\",\n    \"und-RS\": \"sr-Cyrl-RS\",\n    \"und-RU\": \"ru-Cyrl-RU\",\n    \"und-Runr\": \"non-Runr-SE\",\n    \"und-RW\": \"rw-Latn-RW\",\n    \"und-SA\": \"ar-Arab-SA\",\n    \"und-Samr\": \"smp-Samr-IL\",\n    \"und-Sarb\": \"xsa-Sarb-YE\",\n    \"und-Saur\": \"saz-Saur-IN\",\n    \"und-SC\": \"fr-Latn-SC\",\n    \"und-SD\": \"ar-Arab-SD\",\n    \"und-SE\": \"sv-Latn-SE\",\n    \"und-Sgnw\": \"ase-Sgnw-US\",\n    \"und-Shaw\": \"en-Shaw-GB\",\n    \"und-Shrd\": \"sa-Shrd-IN\",\n    \"und-SI\": \"sl-Latn-SI\",\n    \"und-Sidd\": \"sa-Sidd-IN\",\n    \"und-Sind\": \"sd-Sind-IN\",\n    \"und-Sinh\": \"si-Sinh-LK\",\n    \"und-SJ\": \"nb-Latn-SJ\",\n    \"und-SK\": \"sk-Latn-SK\",\n    \"und-SM\": \"it-Latn-SM\",\n    \"und-SN\": \"fr-Latn-SN\",\n    \"und-SO\": \"so-Latn-SO\",\n    \"und-Sogd\": \"sog-Sogd-UZ\",\n    \"und-Sogo\": \"sog-Sogo-UZ\",\n    \"und-Sora\": \"srb-Sora-IN\",\n    \"und-Soyo\": \"cmg-Soyo-MN\",\n    \"und-SR\": \"nl-Latn-SR\",\n    \"und-ST\": \"pt-Latn-ST\",\n    \"und-Sund\": \"su-Sund-ID\",\n    \"und-SV\": \"es-Latn-SV\",\n    \"und-SY\": \"ar-Arab-SY\",\n    \"und-Sylo\": \"syl-Sylo-BD\",\n    \"und-Syrc\": \"syr-Syrc-IQ\",\n    \"und-Tagb\": \"tbw-Tagb-PH\",\n    \"und-Takr\": \"doi-Takr-IN\",\n    \"und-Tale\": \"tdd-Tale-CN\",\n    \"und-Talu\": \"khb-Talu-CN\",\n    \"und-Taml\": \"ta-Taml-IN\",\n    \"und-Tang\": \"txg-Tang-CN\",\n    \"und-Tavt\": \"blt-Tavt-VN\",\n    \"und-TD\": \"fr-Latn-TD\",\n    \"und-Telu\": \"te-Telu-IN\",\n    \"und-TF\": \"fr-Latn-TF\",\n    \"und-Tfng\": \"zgh-Tfng-MA\",\n    \"und-TG\": \"fr-Latn-TG\",\n    \"und-Tglg\": \"fil-Tglg-PH\",\n    \"und-TH\": \"th-Thai-TH\",\n    \"und-Thaa\": \"dv-Thaa-MV\",\n    \"und-Thai\": \"th-Thai-TH\",\n    \"und-Thai-CN\": \"lcp-Thai-CN\",\n    \"und-Thai-KH\": \"kdt-Thai-KH\",\n    \"und-Thai-LA\": \"kdt-Thai-LA\",\n    \"und-Tibt\": \"bo-Tibt-CN\",\n    \"und-Tirh\": \"mai-Tirh-IN\",\n    \"und-TJ\": \"tg-Cyrl-TJ\",\n    \"und-TK\": \"tkl-Latn-TK\",\n    \"und-TL\": \"pt-Latn-TL\",\n    \"und-TM\": \"tk-Latn-TM\",\n    \"und-TN\": \"ar-Arab-TN\",\n    \"und-Tnsa\": \"nst-Tnsa-IN\",\n    \"und-TO\": \"to-Latn-TO\",\n    \"und-Toto\": \"txo-Toto-IN\",\n    \"und-TR\": \"tr-Latn-TR\",\n    \"und-TV\": \"tvl-Latn-TV\",\n    \"und-TW\": \"zh-Hant-TW\",\n    \"und-TZ\": \"sw-Latn-TZ\",\n    \"und-UA\": \"uk-Cyrl-UA\",\n    \"und-UG\": \"sw-Latn-UG\",\n    \"und-Ugar\": \"uga-Ugar-SY\",\n    \"und-UY\": \"es-Latn-UY\",\n    \"und-UZ\": \"uz-Latn-UZ\",\n    \"und-VA\": \"it-Latn-VA\",\n    \"und-Vaii\": \"vai-Vaii-LR\",\n    \"und-VE\": \"es-Latn-VE\",\n    \"und-Vith\": \"sq-Vith-AL\",\n    \"und-VN\": \"vi-Latn-VN\",\n    \"und-VU\": \"bi-Latn-VU\",\n    \"und-Wara\": \"hoc-Wara-IN\",\n    \"und-Wcho\": \"nnp-Wcho-IN\",\n    \"und-WF\": \"fr-Latn-WF\",\n    \"und-WS\": \"sm-Latn-WS\",\n    \"und-XK\": \"sq-Latn-XK\",\n    \"und-Xpeo\": \"peo-Xpeo-IR\",\n    \"und-Xsux\": \"akk-Xsux-IQ\",\n    \"und-YE\": \"ar-Arab-YE\",\n    \"und-Yezi\": \"ku-Yezi-GE\",\n    \"und-Yiii\": \"ii-Yiii-CN\",\n    \"und-YT\": \"fr-Latn-YT\",\n    \"und-Zanb\": \"cmg-Zanb-MN\",\n    \"und-ZW\": \"sn-Latn-ZW\",\n    \"unr\": \"unr-Beng-IN\",\n    \"unr-Deva\": \"unr-Deva-NP\",\n    \"unr-NP\": \"unr-Deva-NP\",\n    \"unx\": \"unx-Beng-IN\",\n    \"uok\": \"uok-Latn-ZZ\",\n    \"ur\": \"ur-Arab-PK\",\n    \"uri\": \"uri-Latn-ZZ\",\n    \"urt\": \"urt-Latn-ZZ\",\n    \"urw\": \"urw-Latn-ZZ\",\n    \"usa\": \"usa-Latn-ZZ\",\n    \"uth\": \"uth-Latn-ZZ\",\n    \"utr\": \"utr-Latn-ZZ\",\n    \"uvh\": \"uvh-Latn-ZZ\",\n    \"uvl\": \"uvl-Latn-ZZ\",\n    \"uz\": \"uz-Latn-UZ\",\n    \"uz-AF\": \"uz-Arab-AF\",\n    \"uz-Arab\": \"uz-Arab-AF\",\n    \"uz-CN\": \"uz-Cyrl-CN\",\n    \"vag\": \"vag-Latn-ZZ\",\n    \"vai\": \"vai-Vaii-LR\",\n    \"van\": \"van-Latn-ZZ\",\n    \"ve\": \"ve-Latn-ZA\",\n    \"vec\": \"vec-Latn-IT\",\n    \"vep\": \"vep-Latn-RU\",\n    \"vi\": \"vi-Latn-VN\",\n    \"vic\": \"vic-Latn-SX\",\n    \"viv\": \"viv-Latn-ZZ\",\n    \"vls\": \"vls-Latn-BE\",\n    \"vmf\": \"vmf-Latn-DE\",\n    \"vmw\": \"vmw-Latn-MZ\",\n    \"vo\": \"vo-Latn-001\",\n    \"vot\": \"vot-Latn-RU\",\n    \"vro\": \"vro-Latn-EE\",\n    \"vun\": \"vun-Latn-TZ\",\n    \"vut\": \"vut-Latn-ZZ\",\n    \"wa\": \"wa-Latn-BE\",\n    \"wae\": \"wae-Latn-CH\",\n    \"waj\": \"waj-Latn-ZZ\",\n    \"wal\": \"wal-Ethi-ET\",\n    \"wan\": \"wan-Latn-ZZ\",\n    \"war\": \"war-Latn-PH\",\n    \"wbp\": \"wbp-Latn-AU\",\n    \"wbq\": \"wbq-Telu-IN\",\n    \"wbr\": \"wbr-Deva-IN\",\n    \"wci\": \"wci-Latn-ZZ\",\n    \"wer\": \"wer-Latn-ZZ\",\n    \"wgi\": \"wgi-Latn-ZZ\",\n    \"whg\": \"whg-Latn-ZZ\",\n    \"wib\": \"wib-Latn-ZZ\",\n    \"wiu\": \"wiu-Latn-ZZ\",\n    \"wiv\": \"wiv-Latn-ZZ\",\n    \"wja\": \"wja-Latn-ZZ\",\n    \"wji\": \"wji-Latn-ZZ\",\n    \"wls\": \"wls-Latn-WF\",\n    \"wmo\": \"wmo-Latn-ZZ\",\n    \"wnc\": \"wnc-Latn-ZZ\",\n    \"wni\": \"wni-Arab-KM\",\n    \"wnu\": \"wnu-Latn-ZZ\",\n    \"wo\": \"wo-Latn-SN\",\n    \"wob\": \"wob-Latn-ZZ\",\n    \"wos\": \"wos-Latn-ZZ\",\n    \"wrs\": \"wrs-Latn-ZZ\",\n    \"wsg\": \"wsg-Gong-IN\",\n    \"wsk\": \"wsk-Latn-ZZ\",\n    \"wtm\": \"wtm-Deva-IN\",\n    \"wuu\": \"wuu-Hans-CN\",\n    \"wuv\": \"wuv-Latn-ZZ\",\n    \"wwa\": \"wwa-Latn-ZZ\",\n    \"xav\": \"xav-Latn-BR\",\n    \"xbi\": \"xbi-Latn-ZZ\",\n    \"xco\": \"xco-Chrs-UZ\",\n    \"xcr\": \"xcr-Cari-TR\",\n    \"xes\": \"xes-Latn-ZZ\",\n    \"xh\": \"xh-Latn-ZA\",\n    \"xla\": \"xla-Latn-ZZ\",\n    \"xlc\": \"xlc-Lyci-TR\",\n    \"xld\": \"xld-Lydi-TR\",\n    \"xmf\": \"xmf-Geor-GE\",\n    \"xmn\": \"xmn-Mani-CN\",\n    \"xmr\": \"xmr-Merc-SD\",\n    \"xna\": \"xna-Narb-SA\",\n    \"xnr\": \"xnr-Deva-IN\",\n    \"xog\": \"xog-Latn-UG\",\n    \"xon\": \"xon-Latn-ZZ\",\n    \"xpr\": \"xpr-Prti-IR\",\n    \"xrb\": \"xrb-Latn-ZZ\",\n    \"xsa\": \"xsa-Sarb-YE\",\n    \"xsi\": \"xsi-Latn-ZZ\",\n    \"xsm\": \"xsm-Latn-ZZ\",\n    \"xsr\": \"xsr-Deva-NP\",\n    \"xwe\": \"xwe-Latn-ZZ\",\n    \"yam\": \"yam-Latn-ZZ\",\n    \"yao\": \"yao-Latn-MZ\",\n    \"yap\": \"yap-Latn-FM\",\n    \"yas\": \"yas-Latn-ZZ\",\n    \"yat\": \"yat-Latn-ZZ\",\n    \"yav\": \"yav-Latn-CM\",\n    \"yay\": \"yay-Latn-ZZ\",\n    \"yaz\": \"yaz-Latn-ZZ\",\n    \"yba\": \"yba-Latn-ZZ\",\n    \"ybb\": \"ybb-Latn-CM\",\n    \"yby\": \"yby-Latn-ZZ\",\n    \"yer\": \"yer-Latn-ZZ\",\n    \"ygr\": \"ygr-Latn-ZZ\",\n    \"ygw\": \"ygw-Latn-ZZ\",\n    \"yi\": \"yi-Hebr-001\",\n    \"yko\": \"yko-Latn-ZZ\",\n    \"yle\": \"yle-Latn-ZZ\",\n    \"ylg\": \"ylg-Latn-ZZ\",\n    \"yll\": \"yll-Latn-ZZ\",\n    \"yml\": \"yml-Latn-ZZ\",\n    \"yo\": \"yo-Latn-NG\",\n    \"yon\": \"yon-Latn-ZZ\",\n    \"yrb\": \"yrb-Latn-ZZ\",\n    \"yre\": \"yre-Latn-ZZ\",\n    \"yrl\": \"yrl-Latn-BR\",\n    \"yss\": \"yss-Latn-ZZ\",\n    \"yua\": \"yua-Latn-MX\",\n    \"yue\": \"yue-Hant-HK\",\n    \"yue-CN\": \"yue-Hans-CN\",\n    \"yue-Hans\": \"yue-Hans-CN\",\n    \"yuj\": \"yuj-Latn-ZZ\",\n    \"yut\": \"yut-Latn-ZZ\",\n    \"yuw\": \"yuw-Latn-ZZ\",\n    \"za\": \"za-Latn-CN\",\n    \"zag\": \"zag-Latn-SD\",\n    \"zdj\": \"zdj-Arab-KM\",\n    \"zea\": \"zea-Latn-NL\",\n    \"zgh\": \"zgh-Tfng-MA\",\n    \"zh\": \"zh-Hans-CN\",\n    \"zh-AU\": \"zh-Hant-AU\",\n    \"zh-BN\": \"zh-Hant-BN\",\n    \"zh-Bopo\": \"zh-Bopo-TW\",\n    \"zh-GB\": \"zh-Hant-GB\",\n    \"zh-GF\": \"zh-Hant-GF\",\n    \"zh-Hanb\": \"zh-Hanb-TW\",\n    \"zh-Hant\": \"zh-Hant-TW\",\n    \"zh-HK\": \"zh-Hant-HK\",\n    \"zh-ID\": \"zh-Hant-ID\",\n    \"zh-MO\": \"zh-Hant-MO\",\n    \"zh-PA\": \"zh-Hant-PA\",\n    \"zh-PF\": \"zh-Hant-PF\",\n    \"zh-PH\": \"zh-Hant-PH\",\n    \"zh-SR\": \"zh-Hant-SR\",\n    \"zh-TH\": \"zh-Hant-TH\",\n    \"zh-TW\": \"zh-Hant-TW\",\n    \"zh-US\": \"zh-Hant-US\",\n    \"zh-VN\": \"zh-Hant-VN\",\n    \"zhx\": \"zhx-Nshu-CN\",\n    \"zia\": \"zia-Latn-ZZ\",\n    \"zkt\": \"zkt-Kits-CN\",\n    \"zlm\": \"zlm-Latn-TG\",\n    \"zmi\": \"zmi-Latn-MY\",\n    \"zne\": \"zne-Latn-ZZ\",\n    \"zu\": \"zu-Latn-ZA\",\n    \"zza\": \"zza-Latn-TR\"\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseUnicodeLocaleId = exports.parseUnicodeLanguageId = exports.isUnicodeVariantSubtag = exports.isUnicodeScriptSubtag = exports.isUnicodeRegionSubtag = exports.isStructurallyValidLanguageTag = exports.isUnicodeLanguageSubtag = exports.SEPARATOR = void 0;\nvar tslib_1 = require(\"tslib\");\nvar ALPHANUM_1_8 = /^[a-z0-9]{1,8}$/i;\nvar ALPHANUM_2_8 = /^[a-z0-9]{2,8}$/i;\nvar ALPHANUM_3_8 = /^[a-z0-9]{3,8}$/i;\nvar KEY_REGEX = /^[a-z0-9][a-z]$/i;\nvar TYPE_REGEX = /^[a-z0-9]{3,8}$/i;\nvar ALPHA_4 = /^[a-z]{4}$/i;\n// alphanum-[tTuUxX]\nvar OTHER_EXTENSION_TYPE = /^[0-9a-svwyz]$/i;\nvar UNICODE_REGION_SUBTAG_REGEX = /^([a-z]{2}|[0-9]{3})$/i;\nvar UNICODE_VARIANT_SUBTAG_REGEX = /^([a-z0-9]{5,8}|[0-9][a-z0-9]{3})$/i;\nvar UNICODE_LANGUAGE_SUBTAG_REGEX = /^([a-z]{2,3}|[a-z]{5,8})$/i;\nvar TKEY_REGEX = /^[a-z][0-9]$/i;\nexports.SEPARATOR = '-';\nfunction isUnicodeLanguageSubtag(lang) {\n    return UNICODE_LANGUAGE_SUBTAG_REGEX.test(lang);\n}\nexports.isUnicodeLanguageSubtag = isUnicodeLanguageSubtag;\nfunction isStructurallyValidLanguageTag(tag) {\n    try {\n        parseUnicodeLanguageId(tag.split(exports.SEPARATOR));\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nexports.isStructurallyValidLanguageTag = isStructurallyValidLanguageTag;\nfunction isUnicodeRegionSubtag(region) {\n    return UNICODE_REGION_SUBTAG_REGEX.test(region);\n}\nexports.isUnicodeRegionSubtag = isUnicodeRegionSubtag;\nfunction isUnicodeScriptSubtag(script) {\n    return ALPHA_4.test(script);\n}\nexports.isUnicodeScriptSubtag = isUnicodeScriptSubtag;\nfunction isUnicodeVariantSubtag(variant) {\n    return UNICODE_VARIANT_SUBTAG_REGEX.test(variant);\n}\nexports.isUnicodeVariantSubtag = isUnicodeVariantSubtag;\nfunction parseUnicodeLanguageId(chunks) {\n    if (typeof chunks === 'string') {\n        chunks = chunks.split(exports.SEPARATOR);\n    }\n    var lang = chunks.shift();\n    if (!lang) {\n        throw new RangeError('Missing unicode_language_subtag');\n    }\n    if (lang === 'root') {\n        return { lang: 'root', variants: [] };\n    }\n    // unicode_language_subtag\n    if (!isUnicodeLanguageSubtag(lang)) {\n        throw new RangeError('Malformed unicode_language_subtag');\n    }\n    var script;\n    // unicode_script_subtag\n    if (chunks.length && isUnicodeScriptSubtag(chunks[0])) {\n        script = chunks.shift();\n    }\n    var region;\n    // unicode_region_subtag\n    if (chunks.length && isUnicodeRegionSubtag(chunks[0])) {\n        region = chunks.shift();\n    }\n    var variants = {};\n    while (chunks.length && isUnicodeVariantSubtag(chunks[0])) {\n        var variant = chunks.shift();\n        if (variant in variants) {\n            throw new RangeError(\"Duplicate variant \\\"\".concat(variant, \"\\\"\"));\n        }\n        variants[variant] = 1;\n    }\n    return {\n        lang: lang,\n        script: script,\n        region: region,\n        variants: Object.keys(variants),\n    };\n}\nexports.parseUnicodeLanguageId = parseUnicodeLanguageId;\nfunction parseUnicodeExtension(chunks) {\n    var keywords = [];\n    var keyword;\n    while (chunks.length && (keyword = parseKeyword(chunks))) {\n        keywords.push(keyword);\n    }\n    if (keywords.length) {\n        return {\n            type: 'u',\n            keywords: keywords,\n            attributes: [],\n        };\n    }\n    // Mix of attributes & keywords\n    // Check for attributes first\n    var attributes = [];\n    while (chunks.length && ALPHANUM_3_8.test(chunks[0])) {\n        attributes.push(chunks.shift());\n    }\n    while (chunks.length && (keyword = parseKeyword(chunks))) {\n        keywords.push(keyword);\n    }\n    if (keywords.length || attributes.length) {\n        return {\n            type: 'u',\n            attributes: attributes,\n            keywords: keywords,\n        };\n    }\n    throw new RangeError('Malformed unicode_extension');\n}\nfunction parseKeyword(chunks) {\n    var key;\n    if (!KEY_REGEX.test(chunks[0])) {\n        return;\n    }\n    key = chunks.shift();\n    var type = [];\n    while (chunks.length && TYPE_REGEX.test(chunks[0])) {\n        type.push(chunks.shift());\n    }\n    var value = '';\n    if (type.length) {\n        value = type.join(exports.SEPARATOR);\n    }\n    return [key, value];\n}\nfunction parseTransformedExtension(chunks) {\n    var lang;\n    try {\n        lang = parseUnicodeLanguageId(chunks);\n    }\n    catch (e) {\n        // Try just parsing tfield\n    }\n    var fields = [];\n    while (chunks.length && TKEY_REGEX.test(chunks[0])) {\n        var key = chunks.shift();\n        var value = [];\n        while (chunks.length && ALPHANUM_3_8.test(chunks[0])) {\n            value.push(chunks.shift());\n        }\n        if (!value.length) {\n            throw new RangeError(\"Missing tvalue for tkey \\\"\".concat(key, \"\\\"\"));\n        }\n        fields.push([key, value.join(exports.SEPARATOR)]);\n    }\n    if (fields.length) {\n        return {\n            type: 't',\n            fields: fields,\n            lang: lang,\n        };\n    }\n    throw new RangeError('Malformed transformed_extension');\n}\nfunction parsePuExtension(chunks) {\n    var exts = [];\n    while (chunks.length && ALPHANUM_1_8.test(chunks[0])) {\n        exts.push(chunks.shift());\n    }\n    if (exts.length) {\n        return {\n            type: 'x',\n            value: exts.join(exports.SEPARATOR),\n        };\n    }\n    throw new RangeError('Malformed private_use_extension');\n}\nfunction parseOtherExtensionValue(chunks) {\n    var exts = [];\n    while (chunks.length && ALPHANUM_2_8.test(chunks[0])) {\n        exts.push(chunks.shift());\n    }\n    if (exts.length) {\n        return exts.join(exports.SEPARATOR);\n    }\n    return '';\n}\nfunction parseExtensions(chunks) {\n    if (!chunks.length) {\n        return { extensions: [] };\n    }\n    var extensions = [];\n    var unicodeExtension;\n    var transformedExtension;\n    var puExtension;\n    var otherExtensionMap = {};\n    do {\n        var type = chunks.shift();\n        switch (type) {\n            case 'u':\n            case 'U':\n                if (unicodeExtension) {\n                    throw new RangeError('There can only be 1 -u- extension');\n                }\n                unicodeExtension = parseUnicodeExtension(chunks);\n                extensions.push(unicodeExtension);\n                break;\n            case 't':\n            case 'T':\n                if (transformedExtension) {\n                    throw new RangeError('There can only be 1 -t- extension');\n                }\n                transformedExtension = parseTransformedExtension(chunks);\n                extensions.push(transformedExtension);\n                break;\n            case 'x':\n            case 'X':\n                if (puExtension) {\n                    throw new RangeError('There can only be 1 -x- extension');\n                }\n                puExtension = parsePuExtension(chunks);\n                extensions.push(puExtension);\n                break;\n            default:\n                if (!OTHER_EXTENSION_TYPE.test(type)) {\n                    throw new RangeError('Malformed extension type');\n                }\n                if (type in otherExtensionMap) {\n                    throw new RangeError(\"There can only be 1 -\".concat(type, \"- extension\"));\n                }\n                var extension = {\n                    type: type,\n                    value: parseOtherExtensionValue(chunks),\n                };\n                otherExtensionMap[extension.type] = extension;\n                extensions.push(extension);\n                break;\n        }\n    } while (chunks.length);\n    return { extensions: extensions };\n}\nfunction parseUnicodeLocaleId(locale) {\n    var chunks = locale.split(exports.SEPARATOR);\n    var lang = parseUnicodeLanguageId(chunks);\n    return (0, tslib_1.__assign)({ lang: lang }, parseExtensions(chunks));\n}\nexports.parseUnicodeLocaleId = parseUnicodeLocaleId;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\n// Type-only circular import\n// eslint-disable-next-line import/no-cycle\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar internalSlotMap = new WeakMap();\nfunction getInternalSlots(x) {\n    var internalSlots = internalSlotMap.get(x);\n    if (!internalSlots) {\n        internalSlots = Object.create(null);\n        internalSlotMap.set(x, internalSlots);\n    }\n    return internalSlots;\n}\nexports.default = getInternalSlots;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Locale = void 0;\nvar tslib_1 = require(\"tslib\");\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar intl_getcanonicallocales_1 = require(\"@formatjs/intl-getcanonicallocales\");\nvar get_internal_slots_1 = (0, tslib_1.__importDefault)(require(\"./get_internal_slots\"));\nvar RELEVANT_EXTENSION_KEYS = ['ca', 'co', 'hc', 'kf', 'kn', 'nu'];\nvar UNICODE_TYPE_REGEX = /^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;\nfunction applyOptionsToTag(tag, options) {\n    (0, ecma402_abstract_1.invariant)(typeof tag === 'string', 'language tag must be a string');\n    (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isStructurallyValidLanguageTag)(tag), 'malformed language tag', RangeError);\n    var language = (0, ecma402_abstract_1.GetOption)(options, 'language', 'string', undefined, undefined);\n    if (language !== undefined) {\n        (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isUnicodeLanguageSubtag)(language), 'Malformed unicode_language_subtag', RangeError);\n    }\n    var script = (0, ecma402_abstract_1.GetOption)(options, 'script', 'string', undefined, undefined);\n    if (script !== undefined) {\n        (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isUnicodeScriptSubtag)(script), 'Malformed unicode_script_subtag', RangeError);\n    }\n    var region = (0, ecma402_abstract_1.GetOption)(options, 'region', 'string', undefined, undefined);\n    if (region !== undefined) {\n        (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isUnicodeRegionSubtag)(region), 'Malformed unicode_region_subtag', RangeError);\n    }\n    var languageId = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(tag);\n    if (language !== undefined) {\n        languageId.lang = language;\n    }\n    if (script !== undefined) {\n        languageId.script = script;\n    }\n    if (region !== undefined) {\n        languageId.region = region;\n    }\n    return Intl.getCanonicalLocales((0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag)), { lang: languageId })))[0];\n}\nfunction applyUnicodeExtensionToTag(tag, options, relevantExtensionKeys) {\n    var unicodeExtension;\n    var keywords = [];\n    var ast = (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag);\n    for (var _i = 0, _a = ast.extensions; _i < _a.length; _i++) {\n        var ext = _a[_i];\n        if (ext.type === 'u') {\n            unicodeExtension = ext;\n            if (Array.isArray(ext.keywords))\n                keywords = ext.keywords;\n        }\n    }\n    var result = Object.create(null);\n    for (var _b = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _b < relevantExtensionKeys_1.length; _b++) {\n        var key = relevantExtensionKeys_1[_b];\n        var value = void 0, entry = void 0;\n        for (var _c = 0, keywords_1 = keywords; _c < keywords_1.length; _c++) {\n            var keyword = keywords_1[_c];\n            if (keyword[0] === key) {\n                entry = keyword;\n                value = entry[1];\n            }\n        }\n        (0, ecma402_abstract_1.invariant)(key in options, \"\".concat(key, \" must be in options\"));\n        var optionsValue = options[key];\n        if (optionsValue !== undefined) {\n            (0, ecma402_abstract_1.invariant)(typeof optionsValue === 'string', \"Value for \".concat(key, \" must be a string\"));\n            value = optionsValue;\n            if (entry) {\n                entry[1] = value;\n            }\n            else {\n                keywords.push([key, value]);\n            }\n        }\n        result[key] = value;\n    }\n    if (!unicodeExtension) {\n        if (keywords.length) {\n            ast.extensions.push({\n                type: 'u',\n                keywords: keywords,\n                attributes: [],\n            });\n        }\n    }\n    else {\n        unicodeExtension.keywords = keywords;\n    }\n    result.locale = Intl.getCanonicalLocales((0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast))[0];\n    return result;\n}\nfunction mergeUnicodeLanguageId(lang, script, region, variants, replacement) {\n    if (variants === void 0) { variants = []; }\n    if (!replacement) {\n        return {\n            lang: lang || 'und',\n            script: script,\n            region: region,\n            variants: variants,\n        };\n    }\n    return {\n        lang: !lang || lang === 'und' ? replacement.lang : lang,\n        script: script || replacement.script,\n        region: region || replacement.region,\n        variants: (0, tslib_1.__spreadArray)((0, tslib_1.__spreadArray)([], variants, true), replacement.variants, true),\n    };\n}\nfunction addLikelySubtags(tag) {\n    var ast = (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag);\n    var unicodeLangId = ast.lang;\n    var lang = unicodeLangId.lang, script = unicodeLangId.script, region = unicodeLangId.region, variants = unicodeLangId.variants;\n    if (script && region) {\n        var match_1 = intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, script: script, region: region, variants: [] })];\n        if (match_1) {\n            var parts_1 = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match_1);\n            ast.lang = mergeUnicodeLanguageId(undefined, undefined, undefined, variants, parts_1);\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n        }\n    }\n    if (script) {\n        var match_2 = intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, script: script, variants: [] })];\n        if (match_2) {\n            var parts_2 = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match_2);\n            ast.lang = mergeUnicodeLanguageId(undefined, undefined, region, variants, parts_2);\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n        }\n    }\n    if (region) {\n        var match_3 = intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, region: region, variants: [] })];\n        if (match_3) {\n            var parts_3 = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match_3);\n            ast.lang = mergeUnicodeLanguageId(undefined, script, undefined, variants, parts_3);\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n        }\n    }\n    var match = intl_getcanonicallocales_1.likelySubtags[lang] ||\n        intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: 'und', script: script, variants: [] })];\n    if (!match) {\n        throw new Error(\"No match for addLikelySubtags\");\n    }\n    var parts = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match);\n    ast.lang = mergeUnicodeLanguageId(undefined, script, region, variants, parts);\n    return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n}\n/**\n * From: https://github.com/unicode-org/icu/blob/4231ca5be053a22a1be24eb891817458c97db709/icu4j/main/classes/core/src/com/ibm/icu/util/ULocale.java#L2395\n * @param tag\n */\nfunction removeLikelySubtags(tag) {\n    var maxLocale = addLikelySubtags(tag);\n    if (!maxLocale) {\n        return tag;\n    }\n    maxLocale = (0, intl_getcanonicallocales_1.emitUnicodeLanguageId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(maxLocale)), { variants: [] }));\n    var ast = (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag);\n    var _a = ast.lang, lang = _a.lang, script = _a.script, region = _a.region, variants = _a.variants;\n    var trial = addLikelySubtags((0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, variants: [] }));\n    if (trial === maxLocale) {\n        return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, ast), { lang: mergeUnicodeLanguageId(lang, undefined, undefined, variants) }));\n    }\n    if (region) {\n        var trial_1 = addLikelySubtags((0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, region: region, variants: [] }));\n        if (trial_1 === maxLocale) {\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, ast), { lang: mergeUnicodeLanguageId(lang, undefined, region, variants) }));\n        }\n    }\n    if (script) {\n        var trial_2 = addLikelySubtags((0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, script: script, variants: [] }));\n        if (trial_2 === maxLocale) {\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, ast), { lang: mergeUnicodeLanguageId(lang, script, undefined, variants) }));\n        }\n    }\n    return tag;\n}\nvar Locale = /** @class */ (function () {\n    function Locale(tag, opts) {\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof Locale ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.Locale must be called with 'new'\");\n        }\n        var relevantExtensionKeys = Locale.relevantExtensionKeys;\n        var internalSlotsList = [\n            'initializedLocale',\n            'locale',\n            'calendar',\n            'collation',\n            'hourCycle',\n            'numberingSystem',\n        ];\n        if (relevantExtensionKeys.indexOf('kf') > -1) {\n            internalSlotsList.push('caseFirst');\n        }\n        if (relevantExtensionKeys.indexOf('kn') > -1) {\n            internalSlotsList.push('numeric');\n        }\n        if (tag === undefined) {\n            throw new TypeError(\"First argument to Intl.Locale constructor can't be empty or missing\");\n        }\n        if (typeof tag !== 'string' && typeof tag !== 'object') {\n            throw new TypeError('tag must be a string or object');\n        }\n        var internalSlots;\n        if (typeof tag === 'object' &&\n            (internalSlots = (0, get_internal_slots_1.default)(tag)) &&\n            internalSlots.initializedLocale) {\n            tag = internalSlots.locale;\n        }\n        else {\n            tag = tag.toString();\n        }\n        internalSlots = (0, get_internal_slots_1.default)(this);\n        var options = (0, ecma402_abstract_1.CoerceOptionsToObject)(opts);\n        tag = applyOptionsToTag(tag, options);\n        var opt = Object.create(null);\n        var calendar = (0, ecma402_abstract_1.GetOption)(options, 'calendar', 'string', undefined, undefined);\n        if (calendar !== undefined) {\n            if (!UNICODE_TYPE_REGEX.test(calendar)) {\n                throw new RangeError('invalid calendar');\n            }\n        }\n        opt.ca = calendar;\n        var collation = (0, ecma402_abstract_1.GetOption)(options, 'collation', 'string', undefined, undefined);\n        if (collation !== undefined) {\n            if (!UNICODE_TYPE_REGEX.test(collation)) {\n                throw new RangeError('invalid collation');\n            }\n        }\n        opt.co = collation;\n        var hc = (0, ecma402_abstract_1.GetOption)(options, 'hourCycle', 'string', ['h11', 'h12', 'h23', 'h24'], undefined);\n        opt.hc = hc;\n        var kf = (0, ecma402_abstract_1.GetOption)(options, 'caseFirst', 'string', ['upper', 'lower', 'false'], undefined);\n        opt.kf = kf;\n        var _kn = (0, ecma402_abstract_1.GetOption)(options, 'numeric', 'boolean', undefined, undefined);\n        var kn;\n        if (_kn !== undefined) {\n            kn = String(_kn);\n        }\n        opt.kn = kn;\n        var numberingSystem = (0, ecma402_abstract_1.GetOption)(options, 'numberingSystem', 'string', undefined, undefined);\n        if (numberingSystem !== undefined) {\n            if (!UNICODE_TYPE_REGEX.test(numberingSystem)) {\n                throw new RangeError('Invalid numberingSystem');\n            }\n        }\n        opt.nu = numberingSystem;\n        var r = applyUnicodeExtensionToTag(tag, opt, relevantExtensionKeys);\n        internalSlots.locale = r.locale;\n        internalSlots.calendar = r.ca;\n        internalSlots.collation = r.co;\n        internalSlots.hourCycle = r.hc;\n        if (relevantExtensionKeys.indexOf('kf') > -1) {\n            internalSlots.caseFirst = r.kf;\n        }\n        if (relevantExtensionKeys.indexOf('kn') > -1) {\n            internalSlots.numeric = (0, ecma402_abstract_1.SameValue)(r.kn, 'true');\n        }\n        internalSlots.numberingSystem = r.nu;\n    }\n    /**\n     * https://www.unicode.org/reports/tr35/#Likely_Subtags\n     */\n    Locale.prototype.maximize = function () {\n        var locale = (0, get_internal_slots_1.default)(this).locale;\n        try {\n            var maximizedLocale = addLikelySubtags(locale);\n            return new Locale(maximizedLocale);\n        }\n        catch (e) {\n            return new Locale(locale);\n        }\n    };\n    /**\n     * https://www.unicode.org/reports/tr35/#Likely_Subtags\n     */\n    Locale.prototype.minimize = function () {\n        var locale = (0, get_internal_slots_1.default)(this).locale;\n        try {\n            var minimizedLocale = removeLikelySubtags(locale);\n            return new Locale(minimizedLocale);\n        }\n        catch (e) {\n            return new Locale(locale);\n        }\n    };\n    Locale.prototype.toString = function () {\n        return (0, get_internal_slots_1.default)(this).locale;\n    };\n    Object.defineProperty(Locale.prototype, \"baseName\", {\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.emitUnicodeLanguageId)((0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"calendar\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).calendar;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"collation\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).collation;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"hourCycle\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).hourCycle;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"caseFirst\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).caseFirst;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"numeric\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).numeric;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"numberingSystem\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).numberingSystem;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"language\", {\n        /**\n         * https://tc39.es/proposal-intl-locale/#sec-Intl.Locale.prototype.language\n         */\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale).lang;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"script\", {\n        /**\n         * https://tc39.es/proposal-intl-locale/#sec-Intl.Locale.prototype.script\n         */\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale).script;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"region\", {\n        /**\n         * https://tc39.es/proposal-intl-locale/#sec-Intl.Locale.prototype.region\n         */\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale).region;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Locale.relevantExtensionKeys = RELEVANT_EXTENSION_KEYS;\n    return Locale;\n}());\nexports.Locale = Locale;\ntry {\n    if (typeof Symbol !== 'undefined') {\n        Object.defineProperty(Locale.prototype, Symbol.toStringTag, {\n            value: 'Intl.Locale',\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    Object.defineProperty(Locale.prototype.constructor, 'length', {\n        value: 1,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n}\ncatch (e) {\n    // Meta fix so we're test262-compliant, not important\n}\nexports.default = Locale;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _1 = require(\"./\");\nvar should_polyfill_1 = require(\"./should-polyfill\");\nif ((0, should_polyfill_1.shouldPolyfill)()) {\n    Object.defineProperty(Intl, 'Locale', {\n        value: _1.Locale,\n        writable: true,\n        enumerable: false,\n        configurable: true,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldPolyfill = void 0;\n/**\n * https://bugs.chromium.org/p/v8/issues/detail?id=10682\n */\nfunction hasIntlGetCanonicalLocalesBug() {\n    try {\n        return new Intl.Locale('und-x-private').toString() === 'x-private';\n    }\n    catch (e) {\n        return true;\n    }\n}\nfunction shouldPolyfill() {\n    return !('Locale' in Intl) || hasIntlGetCanonicalLocalesBug();\n}\nexports.shouldPolyfill = shouldPolyfill;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GetOperands = void 0;\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-getoperands\n * @param s\n */\nfunction GetOperands(s) {\n    (0, ecma402_abstract_1.invariant)(typeof s === 'string', \"GetOperands should have been called with a string\");\n    var n = (0, ecma402_abstract_1.ToNumber)(s);\n    (0, ecma402_abstract_1.invariant)(isFinite(n), 'n should be finite');\n    var dp = s.indexOf('.');\n    var iv;\n    var f;\n    var v;\n    var fv = '';\n    if (dp === -1) {\n        iv = n;\n        f = 0;\n        v = 0;\n    }\n    else {\n        iv = s.slice(0, dp);\n        fv = s.slice(dp, s.length);\n        f = (0, ecma402_abstract_1.ToNumber)(fv);\n        v = fv.length;\n    }\n    var i = Math.abs((0, ecma402_abstract_1.ToNumber)(iv));\n    var w;\n    var t;\n    if (f !== 0) {\n        var ft = fv.replace(/0+$/, '');\n        w = ft.length;\n        t = (0, ecma402_abstract_1.ToNumber)(ft);\n    }\n    else {\n        w = 0;\n        t = 0;\n    }\n    return {\n        Number: n,\n        IntegerDigits: i,\n        NumberOfFractionDigits: v,\n        NumberOfFractionDigitsWithoutTrailing: w,\n        FractionDigits: f,\n        FractionDigitsWithoutTrailing: t,\n    };\n}\nexports.GetOperands = GetOperands;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InitializePluralRules = void 0;\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar intl_localematcher_1 = require(\"@formatjs/intl-localematcher\");\nfunction InitializePluralRules(pl, locales, options, _a) {\n    var availableLocales = _a.availableLocales, relevantExtensionKeys = _a.relevantExtensionKeys, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale, getInternalSlots = _a.getInternalSlots;\n    var requestedLocales = (0, ecma402_abstract_1.CanonicalizeLocaleList)(locales);\n    var opt = Object.create(null);\n    var opts = (0, ecma402_abstract_1.CoerceOptionsToObject)(options);\n    var internalSlots = getInternalSlots(pl);\n    internalSlots.initializedPluralRules = true;\n    var matcher = (0, ecma402_abstract_1.GetOption)(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n    opt.localeMatcher = matcher;\n    internalSlots.type = (0, ecma402_abstract_1.GetOption)(opts, 'type', 'string', ['cardinal', 'ordinal'], 'cardinal');\n    (0, ecma402_abstract_1.SetNumberFormatDigitOptions)(internalSlots, opts, 0, 3, 'standard');\n    var r = (0, intl_localematcher_1.ResolveLocale)(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    internalSlots.locale = r.locale;\n    return pl;\n}\nexports.InitializePluralRules = InitializePluralRules;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResolvePlural = void 0;\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar GetOperands_1 = require(\"./GetOperands\");\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-resolveplural\n * @param pl\n * @param n\n * @param PluralRuleSelect Has to pass in bc it's implementation-specific\n */\nfunction ResolvePlural(pl, n, _a) {\n    var getInternalSlots = _a.getInternalSlots, PluralRuleSelect = _a.PluralRuleSelect;\n    var internalSlots = getInternalSlots(pl);\n    (0, ecma402_abstract_1.invariant)((0, ecma402_abstract_1.Type)(internalSlots) === 'Object', 'pl has to be an object');\n    (0, ecma402_abstract_1.invariant)('initializedPluralRules' in internalSlots, 'pluralrules must be initialized');\n    (0, ecma402_abstract_1.invariant)((0, ecma402_abstract_1.Type)(n) === 'Number', 'n must be a number');\n    if (!isFinite(n)) {\n        return 'other';\n    }\n    var locale = internalSlots.locale, type = internalSlots.type;\n    var res = (0, ecma402_abstract_1.FormatNumericToString)(internalSlots, n);\n    var s = res.formattedString;\n    var operands = (0, GetOperands_1.GetOperands)(s);\n    return PluralRuleSelect(locale, type, n, operands);\n}\nexports.ResolvePlural = ResolvePlural;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar internalSlotMap = new WeakMap();\nfunction getInternalSlots(x) {\n    var internalSlots = internalSlotMap.get(x);\n    if (!internalSlots) {\n        internalSlots = Object.create(null);\n        internalSlotMap.set(x, internalSlots);\n    }\n    return internalSlots;\n}\nexports.default = getInternalSlots;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PluralRules = void 0;\nvar tslib_1 = require(\"tslib\");\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar InitializePluralRules_1 = require(\"./abstract/InitializePluralRules\");\nvar ResolvePlural_1 = require(\"./abstract/ResolvePlural\");\nvar get_internal_slots_1 = (0, tslib_1.__importDefault)(require(\"./get_internal_slots\"));\nfunction validateInstance(instance, method) {\n    if (!(instance instanceof PluralRules)) {\n        throw new TypeError(\"Method Intl.PluralRules.prototype.\".concat(method, \" called on incompatible receiver \").concat(String(instance)));\n    }\n}\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-pluralruleselect\n * @param locale\n * @param type\n * @param _n\n * @param param3\n */\nfunction PluralRuleSelect(locale, type, _n, _a) {\n    var IntegerDigits = _a.IntegerDigits, NumberOfFractionDigits = _a.NumberOfFractionDigits, FractionDigits = _a.FractionDigits;\n    return PluralRules.localeData[locale].fn(NumberOfFractionDigits\n        ? \"\".concat(IntegerDigits, \".\").concat(FractionDigits)\n        : IntegerDigits, type === 'ordinal');\n}\nvar PluralRules = /** @class */ (function () {\n    function PluralRules(locales, options) {\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof PluralRules ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.PluralRules must be called with 'new'\");\n        }\n        return (0, InitializePluralRules_1.InitializePluralRules)(this, locales, options, {\n            availableLocales: PluralRules.availableLocales,\n            relevantExtensionKeys: PluralRules.relevantExtensionKeys,\n            localeData: PluralRules.localeData,\n            getDefaultLocale: PluralRules.getDefaultLocale,\n            getInternalSlots: get_internal_slots_1.default,\n        });\n    }\n    PluralRules.prototype.resolvedOptions = function () {\n        validateInstance(this, 'resolvedOptions');\n        var opts = Object.create(null);\n        var internalSlots = (0, get_internal_slots_1.default)(this);\n        opts.locale = internalSlots.locale;\n        opts.type = internalSlots.type;\n        [\n            'minimumIntegerDigits',\n            'minimumFractionDigits',\n            'maximumFractionDigits',\n            'minimumSignificantDigits',\n            'maximumSignificantDigits',\n        ].forEach(function (field) {\n            var val = internalSlots[field];\n            if (val !== undefined) {\n                opts[field] = val;\n            }\n        });\n        opts.pluralCategories = (0, tslib_1.__spreadArray)([], PluralRules.localeData[opts.locale].categories[opts.type], true);\n        return opts;\n    };\n    PluralRules.prototype.select = function (val) {\n        var pr = this;\n        validateInstance(pr, 'select');\n        var n = (0, ecma402_abstract_1.ToNumber)(val);\n        return (0, ResolvePlural_1.ResolvePlural)(pr, n, { getInternalSlots: get_internal_slots_1.default, PluralRuleSelect: PluralRuleSelect });\n    };\n    PluralRules.prototype.toString = function () {\n        return '[object Intl.PluralRules]';\n    };\n    PluralRules.supportedLocalesOf = function (locales, options) {\n        return (0, ecma402_abstract_1.SupportedLocales)(PluralRules.availableLocales, (0, ecma402_abstract_1.CanonicalizeLocaleList)(locales), options);\n    };\n    PluralRules.__addLocaleData = function () {\n        var data = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            data[_i] = arguments[_i];\n        }\n        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n            var _b = data_1[_a], d = _b.data, locale = _b.locale;\n            PluralRules.localeData[locale] = d;\n            PluralRules.availableLocales.add(locale);\n            if (!PluralRules.__defaultLocale) {\n                PluralRules.__defaultLocale = locale;\n            }\n        }\n    };\n    PluralRules.getDefaultLocale = function () {\n        return PluralRules.__defaultLocale;\n    };\n    PluralRules.localeData = {};\n    PluralRules.availableLocales = new Set();\n    PluralRules.__defaultLocale = '';\n    PluralRules.relevantExtensionKeys = [];\n    PluralRules.polyfilled = true;\n    return PluralRules;\n}());\nexports.PluralRules = PluralRules;\ntry {\n    // IE11 does not have Symbol\n    if (typeof Symbol !== 'undefined') {\n        Object.defineProperty(PluralRules.prototype, Symbol.toStringTag, {\n            value: 'Intl.PluralRules',\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    try {\n        // https://github.com/tc39/test262/blob/master/test/intl402/PluralRules/length.js\n        Object.defineProperty(PluralRules, 'length', {\n            value: 0,\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    catch (error) {\n        // IE 11 sets Function.prototype.length to be non-configurable which will cause the\n        // above Object.defineProperty to throw an error.\n    }\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/length.js\n    Object.defineProperty(PluralRules.prototype.constructor, 'length', {\n        value: 0,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/length.js\n    Object.defineProperty(PluralRules.supportedLocalesOf, 'length', {\n        value: 1,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n}\ncatch (ex) {\n    // Meta fixes for test262\n}\n","/* @generated */\n// prettier-ignore\nif (Intl.PluralRules && typeof Intl.PluralRules.__addLocaleData === 'function') {\n  Intl.PluralRules.__addLocaleData({\"data\":{\"categories\":{\"cardinal\":[\"one\",\"other\"],\"ordinal\":[\"one\",\"two\",\"few\",\"other\"]},\"fn\":function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n, n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return n10 == 1 && n100 != 11 ? 'one'\n    : n10 == 2 && n100 != 12 ? 'two'\n    : n10 == 3 && n100 != 13 ? 'few'\n    : 'other';\n  return n == 1 && v0 ? 'one' : 'other';\n}},\"locale\":\"en\"})\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _1 = require(\"./\");\nvar should_polyfill_1 = require(\"./should-polyfill\");\nif ((0, should_polyfill_1.shouldPolyfill)()) {\n    Object.defineProperty(Intl, 'PluralRules', {\n        value: _1.PluralRules,\n        writable: true,\n        enumerable: false,\n        configurable: true,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldPolyfill = void 0;\nvar intl_localematcher_1 = require(\"@formatjs/intl-localematcher\");\nvar supported_locales_1 = require(\"./supported-locales\");\nfunction supportedLocalesOf(locale) {\n    if (!locale) {\n        return true;\n    }\n    var locales = Array.isArray(locale) ? locale : [locale];\n    return Intl.PluralRules.supportedLocalesOf(locales).length === locales.length;\n}\nfunction shouldPolyfill(locale) {\n    if (locale === void 0) { locale = 'en'; }\n    if (!('PluralRules' in Intl) ||\n        new Intl.PluralRules('en', { minimumFractionDigits: 2 }).select(1) ===\n            'one' ||\n        !supportedLocalesOf(locale)) {\n        return locale ? (0, intl_localematcher_1.match)([locale], supported_locales_1.supportedLocales, 'en') : undefined;\n    }\n}\nexports.shouldPolyfill = shouldPolyfill;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.supportedLocales = void 0;\n// This file is generated from supported-locales-gen.ts\nexports.supportedLocales = [\"af\", \"ak\", \"am\", \"an\", \"ar\", \"ars\", \"as\", \"asa\", \"ast\", \"az\", \"bal\", \"be\", \"bem\", \"bez\", \"bg\", \"bho\", \"bm\", \"bn\", \"bo\", \"br\", \"brx\", \"bs\", \"ca\", \"ce\", \"ceb\", \"cgg\", \"chr\", \"ckb\", \"cs\", \"cy\", \"da\", \"de\", \"doi\", \"dsb\", \"dv\", \"dz\", \"ee\", \"el\", \"en\", \"eo\", \"es\", \"et\", \"eu\", \"fa\", \"ff\", \"fi\", \"fil\", \"fo\", \"fr\", \"fur\", \"fy\", \"ga\", \"gd\", \"gl\", \"gsw\", \"gu\", \"guw\", \"gv\", \"ha\", \"haw\", \"he\", \"hi\", \"hnj\", \"hr\", \"hsb\", \"hu\", \"hy\", \"ia\", \"id\", \"ig\", \"ii\", \"io\", \"is\", \"it\", \"iu\", \"ja\", \"jbo\", \"jgo\", \"jmc\", \"jv\", \"jw\", \"ka\", \"kab\", \"kaj\", \"kcg\", \"kde\", \"kea\", \"kk\", \"kkj\", \"kl\", \"km\", \"kn\", \"ko\", \"ks\", \"ksb\", \"ksh\", \"ku\", \"kw\", \"ky\", \"lag\", \"lb\", \"lg\", \"lij\", \"lkt\", \"ln\", \"lo\", \"lt\", \"lv\", \"mas\", \"mg\", \"mgo\", \"mk\", \"ml\", \"mn\", \"mo\", \"mr\", \"ms\", \"mt\", \"my\", \"nah\", \"naq\", \"nb\", \"nd\", \"ne\", \"nl\", \"nn\", \"nnh\", \"no\", \"nqo\", \"nr\", \"nso\", \"ny\", \"nyn\", \"om\", \"or\", \"os\", \"osa\", \"pa\", \"pap\", \"pcm\", \"pl\", \"prg\", \"ps\", \"pt-PT\", \"pt\", \"rm\", \"ro\", \"rof\", \"ru\", \"rwk\", \"sah\", \"saq\", \"sat\", \"sc\", \"scn\", \"sd\", \"sdh\", \"se\", \"seh\", \"ses\", \"sg\", \"sh\", \"shi\", \"si\", \"sk\", \"sl\", \"sma\", \"smi\", \"smj\", \"smn\", \"sms\", \"sn\", \"so\", \"sq\", \"sr\", \"ss\", \"ssy\", \"st\", \"su\", \"sv\", \"sw\", \"syr\", \"ta\", \"te\", \"teo\", \"th\", \"ti\", \"tig\", \"tk\", \"tl\", \"tn\", \"to\", \"tpi\", \"tr\", \"ts\", \"tzm\", \"ug\", \"uk\", \"und\", \"ur\", \"uz\", \"ve\", \"vi\", \"vo\", \"vun\", \"wa\", \"wae\", \"wo\", \"xh\", \"xog\", \"yi\", \"yo\", \"yue\", \"zh\", \"zu\"];\n","\"use strict\";\n// Type-only circular import\n// eslint-disable-next-line import/no-cycle\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar internalSlotMap = new WeakMap();\nfunction getInternalSlots(x) {\n    var internalSlots = internalSlotMap.get(x);\n    if (!internalSlots) {\n        internalSlots = Object.create(null);\n        internalSlotMap.set(x, internalSlots);\n    }\n    return internalSlots;\n}\nexports.default = getInternalSlots;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar get_internal_slots_1 = tslib_1.__importDefault(require(\"./get_internal_slots\"));\nvar RelativeTimeFormat = /** @class */ (function () {\n    function RelativeTimeFormat(locales, options) {\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof RelativeTimeFormat ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.RelativeTimeFormat must be called with 'new'\");\n        }\n        return ecma402_abstract_1.InitializeRelativeTimeFormat(this, locales, options, {\n            getInternalSlots: get_internal_slots_1.default,\n            availableLocales: RelativeTimeFormat.availableLocales,\n            relevantExtensionKeys: RelativeTimeFormat.relevantExtensionKeys,\n            localeData: RelativeTimeFormat.localeData,\n            getDefaultLocale: RelativeTimeFormat.getDefaultLocale,\n        });\n    }\n    RelativeTimeFormat.prototype.format = function (value, unit) {\n        if (typeof this !== 'object') {\n            throw new TypeError('format was called on a non-object');\n        }\n        var internalSlots = get_internal_slots_1.default(this);\n        if (!internalSlots.initializedRelativeTimeFormat) {\n            throw new TypeError('format was called on a invalid context');\n        }\n        return ecma402_abstract_1.PartitionRelativeTimePattern(this, Number(value), ecma402_abstract_1.ToString(unit), {\n            getInternalSlots: get_internal_slots_1.default,\n        })\n            .map(function (el) { return el.value; })\n            .join('');\n    };\n    RelativeTimeFormat.prototype.formatToParts = function (value, unit) {\n        if (typeof this !== 'object') {\n            throw new TypeError('formatToParts was called on a non-object');\n        }\n        var internalSlots = get_internal_slots_1.default(this);\n        if (!internalSlots.initializedRelativeTimeFormat) {\n            throw new TypeError('formatToParts was called on a invalid context');\n        }\n        return ecma402_abstract_1.PartitionRelativeTimePattern(this, Number(value), ecma402_abstract_1.ToString(unit), { getInternalSlots: get_internal_slots_1.default });\n    };\n    RelativeTimeFormat.prototype.resolvedOptions = function () {\n        if (typeof this !== 'object') {\n            throw new TypeError('resolvedOptions was called on a non-object');\n        }\n        var internalSlots = get_internal_slots_1.default(this);\n        if (!internalSlots.initializedRelativeTimeFormat) {\n            throw new TypeError('resolvedOptions was called on a invalid context');\n        }\n        // test262/test/intl402/RelativeTimeFormat/prototype/resolvedOptions/type.js\n        return {\n            locale: internalSlots.locale,\n            style: internalSlots.style,\n            numeric: internalSlots.numeric,\n            numberingSystem: internalSlots.numberingSystem,\n        };\n    };\n    RelativeTimeFormat.supportedLocalesOf = function (locales, options) {\n        return ecma402_abstract_1.SupportedLocales(RelativeTimeFormat.availableLocales, ecma402_abstract_1.CanonicalizeLocaleList(locales), options);\n    };\n    RelativeTimeFormat.__addLocaleData = function () {\n        var data = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            data[_i] = arguments[_i];\n        }\n        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n            var _b = data_1[_a], d = _b.data, locale = _b.locale;\n            var minimizedLocale = new Intl.Locale(locale)\n                .minimize()\n                .toString();\n            RelativeTimeFormat.localeData[locale] = RelativeTimeFormat.localeData[minimizedLocale] = d;\n            RelativeTimeFormat.availableLocales.add(minimizedLocale);\n            RelativeTimeFormat.availableLocales.add(locale);\n            if (!RelativeTimeFormat.__defaultLocale) {\n                RelativeTimeFormat.__defaultLocale = minimizedLocale;\n            }\n        }\n    };\n    RelativeTimeFormat.getDefaultLocale = function () {\n        return RelativeTimeFormat.__defaultLocale;\n    };\n    RelativeTimeFormat.localeData = {};\n    RelativeTimeFormat.availableLocales = new Set();\n    RelativeTimeFormat.__defaultLocale = '';\n    RelativeTimeFormat.relevantExtensionKeys = ['nu'];\n    RelativeTimeFormat.polyfilled = true;\n    return RelativeTimeFormat;\n}());\nexports.default = RelativeTimeFormat;\ntry {\n    // IE11 does not have Symbol\n    if (typeof Symbol !== 'undefined') {\n        Object.defineProperty(RelativeTimeFormat.prototype, Symbol.toStringTag, {\n            value: 'Intl.RelativeTimeFormat',\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/length.js\n    Object.defineProperty(RelativeTimeFormat.prototype.constructor, 'length', {\n        value: 0,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/length.js\n    Object.defineProperty(RelativeTimeFormat.supportedLocalesOf, 'length', {\n        value: 1,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n}\ncatch (e) {\n    // Meta fix so we're test262-compliant, not important\n}\n","/* @generated */\t\n// prettier-ignore\nif (Intl.RelativeTimeFormat && typeof Intl.RelativeTimeFormat.__addLocaleData === 'function') {\n  Intl.RelativeTimeFormat.__addLocaleData({\"data\":{\"nu\":[\"latn\"],\"year\":{\"0\":\"this year\",\"1\":\"next year\",\"future\":{\"one\":\"in {0} year\",\"other\":\"in {0} years\"},\"past\":{\"one\":\"{0} year ago\",\"other\":\"{0} years ago\"},\"-1\":\"last year\"},\"year-short\":{\"0\":\"this yr.\",\"1\":\"next yr.\",\"future\":{\"one\":\"in {0} yr.\",\"other\":\"in {0} yr.\"},\"past\":{\"one\":\"{0} yr. ago\",\"other\":\"{0} yr. ago\"},\"-1\":\"last yr.\"},\"year-narrow\":{\"0\":\"this yr.\",\"1\":\"next yr.\",\"future\":{\"one\":\"in {0} yr.\",\"other\":\"in {0} yr.\"},\"past\":{\"one\":\"{0} yr. ago\",\"other\":\"{0} yr. ago\"},\"-1\":\"last yr.\"},\"quarter\":{\"0\":\"this quarter\",\"1\":\"next quarter\",\"future\":{\"one\":\"in {0} quarter\",\"other\":\"in {0} quarters\"},\"past\":{\"one\":\"{0} quarter ago\",\"other\":\"{0} quarters ago\"},\"-1\":\"last quarter\"},\"quarter-short\":{\"0\":\"this qtr.\",\"1\":\"next qtr.\",\"future\":{\"one\":\"in {0} qtr.\",\"other\":\"in {0} qtrs.\"},\"past\":{\"one\":\"{0} qtr. ago\",\"other\":\"{0} qtrs. ago\"},\"-1\":\"last qtr.\"},\"quarter-narrow\":{\"0\":\"this qtr.\",\"1\":\"next qtr.\",\"future\":{\"one\":\"in {0} qtr.\",\"other\":\"in {0} qtrs.\"},\"past\":{\"one\":\"{0} qtr. ago\",\"other\":\"{0} qtrs. ago\"},\"-1\":\"last qtr.\"},\"month\":{\"0\":\"this month\",\"1\":\"next month\",\"future\":{\"one\":\"in {0} month\",\"other\":\"in {0} months\"},\"past\":{\"one\":\"{0} month ago\",\"other\":\"{0} months ago\"},\"-1\":\"last month\"},\"month-short\":{\"0\":\"this mo.\",\"1\":\"next mo.\",\"future\":{\"one\":\"in {0} mo.\",\"other\":\"in {0} mo.\"},\"past\":{\"one\":\"{0} mo. ago\",\"other\":\"{0} mo. ago\"},\"-1\":\"last mo.\"},\"month-narrow\":{\"0\":\"this mo.\",\"1\":\"next mo.\",\"future\":{\"one\":\"in {0} mo.\",\"other\":\"in {0} mo.\"},\"past\":{\"one\":\"{0} mo. ago\",\"other\":\"{0} mo. ago\"},\"-1\":\"last mo.\"},\"week\":{\"0\":\"this week\",\"1\":\"next week\",\"future\":{\"one\":\"in {0} week\",\"other\":\"in {0} weeks\"},\"past\":{\"one\":\"{0} week ago\",\"other\":\"{0} weeks ago\"},\"-1\":\"last week\"},\"week-short\":{\"0\":\"this wk.\",\"1\":\"next wk.\",\"future\":{\"one\":\"in {0} wk.\",\"other\":\"in {0} wk.\"},\"past\":{\"one\":\"{0} wk. ago\",\"other\":\"{0} wk. ago\"},\"-1\":\"last wk.\"},\"week-narrow\":{\"0\":\"this wk.\",\"1\":\"next wk.\",\"future\":{\"one\":\"in {0} wk.\",\"other\":\"in {0} wk.\"},\"past\":{\"one\":\"{0} wk. ago\",\"other\":\"{0} wk. ago\"},\"-1\":\"last wk.\"},\"day\":{\"0\":\"today\",\"1\":\"tomorrow\",\"future\":{\"one\":\"in {0} day\",\"other\":\"in {0} days\"},\"past\":{\"one\":\"{0} day ago\",\"other\":\"{0} days ago\"},\"-1\":\"yesterday\"},\"day-short\":{\"0\":\"today\",\"1\":\"tomorrow\",\"future\":{\"one\":\"in {0} day\",\"other\":\"in {0} days\"},\"past\":{\"one\":\"{0} day ago\",\"other\":\"{0} days ago\"},\"-1\":\"yesterday\"},\"day-narrow\":{\"0\":\"today\",\"1\":\"tomorrow\",\"future\":{\"one\":\"in {0} day\",\"other\":\"in {0} days\"},\"past\":{\"one\":\"{0} day ago\",\"other\":\"{0} days ago\"},\"-1\":\"yesterday\"},\"hour\":{\"0\":\"this hour\",\"future\":{\"one\":\"in {0} hour\",\"other\":\"in {0} hours\"},\"past\":{\"one\":\"{0} hour ago\",\"other\":\"{0} hours ago\"}},\"hour-short\":{\"0\":\"this hour\",\"future\":{\"one\":\"in {0} hr.\",\"other\":\"in {0} hr.\"},\"past\":{\"one\":\"{0} hr. ago\",\"other\":\"{0} hr. ago\"}},\"hour-narrow\":{\"0\":\"this hour\",\"future\":{\"one\":\"in {0} hr.\",\"other\":\"in {0} hr.\"},\"past\":{\"one\":\"{0} hr. ago\",\"other\":\"{0} hr. ago\"}},\"minute\":{\"0\":\"this minute\",\"future\":{\"one\":\"in {0} minute\",\"other\":\"in {0} minutes\"},\"past\":{\"one\":\"{0} minute ago\",\"other\":\"{0} minutes ago\"}},\"minute-short\":{\"0\":\"this minute\",\"future\":{\"one\":\"in {0} min.\",\"other\":\"in {0} min.\"},\"past\":{\"one\":\"{0} min. ago\",\"other\":\"{0} min. ago\"}},\"minute-narrow\":{\"0\":\"this minute\",\"future\":{\"one\":\"in {0} min.\",\"other\":\"in {0} min.\"},\"past\":{\"one\":\"{0} min. ago\",\"other\":\"{0} min. ago\"}},\"second\":{\"0\":\"now\",\"future\":{\"one\":\"in {0} second\",\"other\":\"in {0} seconds\"},\"past\":{\"one\":\"{0} second ago\",\"other\":\"{0} seconds ago\"}},\"second-short\":{\"0\":\"now\",\"future\":{\"one\":\"in {0} sec.\",\"other\":\"in {0} sec.\"},\"past\":{\"one\":\"{0} sec. ago\",\"other\":\"{0} sec. ago\"}},\"second-narrow\":{\"0\":\"now\",\"future\":{\"one\":\"in {0} sec.\",\"other\":\"in {0} sec.\"},\"past\":{\"one\":\"{0} sec. ago\",\"other\":\"{0} sec. ago\"}}},\"locale\":\"en\"}\n)\n}","/**\n * Cannot do Math.log(x) / Math.log(10) bc if IEEE floating point issue\n * @param x number\n */\nexport function getMagnitude(x) {\n    // Cannot count string length via Number.toString because it may use scientific notation\n    // for very small or very large numbers.\n    return Math.floor(Math.log(x) * Math.LOG10E);\n}\nexport function repeat(s, times) {\n    if (typeof s.repeat === 'function') {\n        return s.repeat(times);\n    }\n    var arr = new Array(times);\n    for (var i = 0; i < arr.length; i++) {\n        arr[i] = s;\n    }\n    return arr.join('');\n}\nexport function setInternalSlot(map, pl, field, value) {\n    if (!map.get(pl)) {\n        map.set(pl, Object.create(null));\n    }\n    var slots = map.get(pl);\n    slots[field] = value;\n}\nexport function setMultiInternalSlots(map, pl, props) {\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\n        var k = _a[_i];\n        setInternalSlot(map, pl, k, props[k]);\n    }\n}\nexport function getInternalSlot(map, pl, field) {\n    return getMultiInternalSlots(map, pl, field)[field];\n}\nexport function getMultiInternalSlots(map, pl) {\n    var fields = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        fields[_i - 2] = arguments[_i];\n    }\n    var slots = map.get(pl);\n    if (!slots) {\n        throw new TypeError(pl + \" InternalSlot has not been initialized\");\n    }\n    return fields.reduce(function (all, f) {\n        all[f] = slots[f];\n        return all;\n    }, Object.create(null));\n}\nexport function isLiteralPart(patternPart) {\n    return patternPart.type === 'literal';\n}\n/*\n  17 ECMAScript Standard Built-in Objects:\n    Every built-in Function object, including constructors, that is not\n    identified as an anonymous function has a name property whose value\n    is a String.\n\n    Unless otherwise specified, the name property of a built-in Function\n    object, if it exists, has the attributes { [[Writable]]: false,\n    [[Enumerable]]: false, [[Configurable]]: true }.\n*/\nexport function defineProperty(target, name, _a) {\n    var value = _a.value;\n    Object.defineProperty(target, name, {\n        configurable: true,\n        enumerable: false,\n        writable: true,\n        value: value,\n    });\n}\nexport var UNICODE_EXTENSION_SEQUENCE_REGEX = /-u(?:-[0-9a-z]{2,8})+/gi;\nexport function invariant(condition, message, Err) {\n    if (Err === void 0) { Err = Error; }\n    if (!condition) {\n        throw new Err(message);\n    }\n}\n","export var DATE_TIME_PROPS = [\n    'weekday',\n    'era',\n    'year',\n    'month',\n    'day',\n    'hour',\n    'minute',\n    'second',\n    'timeZoneName',\n];\nexport var removalPenalty = 120;\nexport var additionPenalty = 20;\nexport var differentNumericTypePenalty = 15;\nexport var longLessPenalty = 8;\nexport var longMorePenalty = 6;\nexport var shortLessPenalty = 6;\nexport var shortMorePenalty = 3;\n","export var RangePatternType;\n(function (RangePatternType) {\n    RangePatternType[\"startRange\"] = \"startRange\";\n    RangePatternType[\"shared\"] = \"shared\";\n    RangePatternType[\"endRange\"] = \"endRange\";\n})(RangePatternType || (RangePatternType = {}));\n","import { __assign } from \"tslib\";\nimport { RangePatternType, } from '../types/date-time';\n/**\n * https://unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * Credit: https://github.com/caridy/intl-datetimeformat-pattern/blob/master/index.js\n * with some tweaks\n */\nvar DATE_TIME_REGEX = /(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;\n// trim patterns after transformations\nvar expPatternTrimmer = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\nfunction matchSkeletonPattern(match, result) {\n    var len = match.length;\n    switch (match[0]) {\n        // Era\n        case 'G':\n            result.era = len === 4 ? 'long' : len === 5 ? 'narrow' : 'short';\n            return '{era}';\n        // Year\n        case 'y':\n        case 'Y':\n        case 'u':\n        case 'U':\n        case 'r':\n            result.year = len === 2 ? '2-digit' : 'numeric';\n            return '{year}';\n        // Quarter\n        case 'q':\n        case 'Q':\n            throw new RangeError('`w/Q` (quarter) patterns are not supported');\n        // Month\n        case 'M':\n        case 'L':\n            result.month = ['numeric', '2-digit', 'short', 'long', 'narrow'][len - 1];\n            return '{month}';\n        // Week\n        case 'w':\n        case 'W':\n            throw new RangeError('`w/W` (week of year) patterns are not supported');\n        case 'd':\n            result.day = ['numeric', '2-digit'][len - 1];\n            return '{day}';\n        case 'D':\n        case 'F':\n        case 'g':\n            result.day = 'numeric';\n            return '{day}';\n        // Weekday\n        case 'E':\n            result.weekday = len === 4 ? 'long' : len === 5 ? 'narrow' : 'short';\n            return '{weekday}';\n        case 'e':\n            result.weekday = [\n                undefined,\n                undefined,\n                'short',\n                'long',\n                'narrow',\n                'short',\n            ][len - 1];\n            return '{weekday}';\n        case 'c':\n            result.weekday = [\n                undefined,\n                undefined,\n                'short',\n                'long',\n                'narrow',\n                'short',\n            ][len - 1];\n            return '{weekday}';\n        // Period\n        case 'a': // AM, PM\n        case 'b': // am, pm, noon, midnight\n        case 'B': // flexible day periods\n            result.hour12 = true;\n            return '{ampm}';\n        // Hour\n        case 'h':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            result.hour12 = true;\n            return '{hour}';\n        case 'H':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            return '{hour}';\n        case 'K':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            result.hour12 = true;\n            return '{hour}';\n        case 'k':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            return '{hour}';\n        case 'j':\n        case 'J':\n        case 'C':\n            throw new RangeError('`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead');\n        // Minute\n        case 'm':\n            result.minute = ['numeric', '2-digit'][len - 1];\n            return '{minute}';\n        // Second\n        case 's':\n            result.second = ['numeric', '2-digit'][len - 1];\n            return '{second}';\n        case 'S':\n        case 'A':\n            result.second = 'numeric';\n            return '{second}';\n        // Zone\n        case 'z': // 1..3, 4: specific non-location format\n        case 'Z': // 1..3, 4, 5: The ISO8601 varios formats\n        case 'O': // 1, 4: miliseconds in day short, long\n        case 'v': // 1, 4: generic non-location format\n        case 'V': // 1, 2, 3, 4: time zone ID or city\n        case 'X': // 1, 2, 3, 4: The ISO8601 varios formats\n        case 'x': // 1, 2, 3, 4: The ISO8601 varios formats\n            result.timeZoneName = len < 4 ? 'short' : 'long';\n            return '{timeZoneName}';\n    }\n    return '';\n}\nfunction skeletonTokenToTable2(c) {\n    switch (c) {\n        // Era\n        case 'G':\n            return 'era';\n        // Year\n        case 'y':\n        case 'Y':\n        case 'u':\n        case 'U':\n        case 'r':\n            return 'year';\n        // Month\n        case 'M':\n        case 'L':\n            return 'month';\n        // Day\n        case 'd':\n        case 'D':\n        case 'F':\n        case 'g':\n            return 'day';\n        // Period\n        case 'a': // AM, PM\n        case 'b': // am, pm, noon, midnight\n        case 'B': // flexible day periods\n            return 'ampm';\n        // Hour\n        case 'h':\n        case 'H':\n        case 'K':\n        case 'k':\n            return 'hour';\n        // Minute\n        case 'm':\n            return 'minute';\n        // Second\n        case 's':\n        case 'S':\n        case 'A':\n            return 'second';\n        default:\n            throw new RangeError('Invalid range pattern token');\n    }\n}\nexport function processDateTimePattern(pattern, result) {\n    var literals = [];\n    // Use skeleton to populate result, but use mapped pattern to populate pattern\n    var pattern12 = pattern\n        // Double apostrophe\n        .replace(/'{2}/g, '{apostrophe}')\n        // Apostrophe-escaped\n        .replace(/'(.*?)'/g, function (_, literal) {\n        literals.push(literal);\n        return \"$$\" + (literals.length - 1) + \"$$\";\n    })\n        .replace(DATE_TIME_REGEX, function (m) { return matchSkeletonPattern(m, result || {}); });\n    //Restore literals\n    if (literals.length) {\n        pattern12 = pattern12\n            .replace(/\\$\\$(\\d+)\\$\\$/g, function (_, i) {\n            return literals[+i];\n        })\n            .replace(/\\{apostrophe\\}/g, \"'\");\n    }\n    // Handle apostrophe-escaped things\n    return [\n        pattern12\n            .replace(/([\\s\\uFEFF\\xA0])\\{ampm\\}([\\s\\uFEFF\\xA0])/, '$1')\n            .replace('{ampm}', '')\n            .replace(expPatternTrimmer, ''),\n        pattern12,\n    ];\n}\n/**\n * Parse Date time skeleton into Intl.DateTimeFormatOptions\n * Ref: https://unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * @public\n * @param skeleton skeleton string\n */\nexport function parseDateTimeSkeleton(skeleton, rawPattern, rangePatterns, intervalFormatFallback) {\n    if (rawPattern === void 0) { rawPattern = skeleton; }\n    var result = {\n        pattern: '',\n        pattern12: '',\n        skeleton: skeleton,\n        rawPattern: rawPattern,\n        rangePatterns: {},\n        rangePatterns12: {},\n    };\n    if (rangePatterns) {\n        for (var k in rangePatterns) {\n            var key = skeletonTokenToTable2(k);\n            var rawPattern_1 = rangePatterns[k];\n            var intervalResult = {\n                patternParts: [],\n            };\n            var _a = processDateTimePattern(rawPattern_1, intervalResult), pattern_1 = _a[0], pattern12_1 = _a[1];\n            result.rangePatterns[key] = __assign(__assign({}, intervalResult), { patternParts: splitRangePattern(pattern_1) });\n            result.rangePatterns12[key] = __assign(__assign({}, intervalResult), { patternParts: splitRangePattern(pattern12_1) });\n        }\n    }\n    else if (intervalFormatFallback) {\n        var patternParts = splitFallbackRangePattern(intervalFormatFallback);\n        result.rangePatterns.default = {\n            patternParts: patternParts,\n        };\n        result.rangePatterns12.default = {\n            patternParts: patternParts,\n        };\n    }\n    // Process skeleton\n    skeleton.replace(DATE_TIME_REGEX, function (m) { return matchSkeletonPattern(m, result); });\n    var _b = processDateTimePattern(rawPattern), pattern = _b[0], pattern12 = _b[1];\n    result.pattern = pattern;\n    result.pattern12 = pattern12;\n    return result;\n}\nexport function splitFallbackRangePattern(pattern) {\n    var parts = pattern.split(/(\\{[0|1]\\})/g).filter(Boolean);\n    return parts.map(function (pattern) {\n        switch (pattern) {\n            case '{0}':\n                return {\n                    source: RangePatternType.startRange,\n                    pattern: pattern,\n                };\n            case '{1}':\n                return {\n                    source: RangePatternType.endRange,\n                    pattern: pattern,\n                };\n            default:\n                return {\n                    source: RangePatternType.shared,\n                    pattern: pattern,\n                };\n        }\n    });\n}\nexport function splitRangePattern(pattern) {\n    var PART_REGEX = /\\{(.*?)\\}/g;\n    // Map of part and index within the string\n    var parts = {};\n    var match;\n    var splitIndex = 0;\n    while ((match = PART_REGEX.exec(pattern))) {\n        if (!(match[0] in parts)) {\n            parts[match[0]] = match.index;\n        }\n        else {\n            splitIndex = match.index;\n            break;\n        }\n    }\n    if (!splitIndex) {\n        return [\n            {\n                source: RangePatternType.startRange,\n                pattern: pattern,\n            },\n        ];\n    }\n    return [\n        {\n            source: RangePatternType.startRange,\n            pattern: pattern.slice(0, splitIndex),\n        },\n        {\n            source: RangePatternType.endRange,\n            pattern: pattern.slice(splitIndex),\n        },\n    ];\n}\n","import { __assign } from \"tslib\";\nimport { invariant } from '../utils';\nimport { DATE_TIME_PROPS, removalPenalty, additionPenalty, differentNumericTypePenalty, longMorePenalty, shortMorePenalty, shortLessPenalty, longLessPenalty, } from './utils';\nimport { processDateTimePattern } from './skeleton';\nfunction isNumericType(t) {\n    return t === 'numeric' || t === '2-digit';\n}\n/**\n * Credit: https://github.com/andyearnshaw/Intl.js/blob/0958dc1ad8153f1056653ea22b8208f0df289a4e/src/12.datetimeformat.js#L611\n * with some modifications\n * @param options\n * @param format\n */\nexport function bestFitFormatMatcherScore(options, format) {\n    var score = 0;\n    if (options.hour12 && !format.hour12) {\n        score -= removalPenalty;\n    }\n    else if (!options.hour12 && format.hour12) {\n        score -= additionPenalty;\n    }\n    for (var _i = 0, DATE_TIME_PROPS_1 = DATE_TIME_PROPS; _i < DATE_TIME_PROPS_1.length; _i++) {\n        var prop = DATE_TIME_PROPS_1[_i];\n        var optionsProp = options[prop];\n        var formatProp = format[prop];\n        if (optionsProp === undefined && formatProp !== undefined) {\n            score -= additionPenalty;\n        }\n        else if (optionsProp !== undefined && formatProp === undefined) {\n            score -= removalPenalty;\n        }\n        else if (optionsProp !== formatProp) {\n            // extra penalty for numeric vs non-numeric\n            if (isNumericType(optionsProp) !==\n                isNumericType(formatProp)) {\n                score -= differentNumericTypePenalty;\n            }\n            else {\n                var values = ['2-digit', 'numeric', 'narrow', 'short', 'long'];\n                var optionsPropIndex = values.indexOf(optionsProp);\n                var formatPropIndex = values.indexOf(formatProp);\n                var delta = Math.max(-2, Math.min(formatPropIndex - optionsPropIndex, 2));\n                if (delta === 2) {\n                    score -= longMorePenalty;\n                }\n                else if (delta === 1) {\n                    score -= shortMorePenalty;\n                }\n                else if (delta === -1) {\n                    score -= shortLessPenalty;\n                }\n                else if (delta === -2) {\n                    score -= longLessPenalty;\n                }\n            }\n        }\n    }\n    return score;\n}\n/**\n * https://tc39.es/ecma402/#sec-bestfitformatmatcher\n * Just alias to basic for now\n * @param options\n * @param formats\n * @param implDetails Implementation details\n */\nexport function BestFitFormatMatcher(options, formats) {\n    var bestScore = -Infinity;\n    var bestFormat = formats[0];\n    invariant(Array.isArray(formats), 'formats should be a list of things');\n    for (var _i = 0, formats_1 = formats; _i < formats_1.length; _i++) {\n        var format = formats_1[_i];\n        var score = bestFitFormatMatcherScore(options, format);\n        if (score > bestScore) {\n            bestScore = score;\n            bestFormat = format;\n        }\n    }\n    var skeletonFormat = __assign({}, bestFormat);\n    var patternFormat = { rawPattern: bestFormat.rawPattern };\n    processDateTimePattern(bestFormat.rawPattern, patternFormat);\n    // Kinda following https://github.com/unicode-org/icu/blob/dd50e38f459d84e9bf1b0c618be8483d318458ad/icu4j/main/classes/core/src/com/ibm/icu/text/DateTimePatternGenerator.java\n    // Method adjustFieldTypes\n    for (var prop in skeletonFormat) {\n        var skeletonValue = skeletonFormat[prop];\n        var patternValue = patternFormat[prop];\n        var requestedValue = options[prop];\n        // Don't mess with minute/second or we can get in the situation of\n        // 7:0:0 which is weird\n        if (prop === 'minute' || prop === 'second') {\n            continue;\n        }\n        // Nothing to do here\n        if (!requestedValue) {\n            continue;\n        }\n        // https://unicode.org/reports/tr35/tr35-dates.html#Matching_Skeletons\n        // Looks like we should not convert numeric to alphabetic but the other way\n        // around is ok\n        if (isNumericType(patternValue) &&\n            !isNumericType(requestedValue)) {\n            continue;\n        }\n        if (skeletonValue === requestedValue) {\n            continue;\n        }\n        patternFormat[prop] = requestedValue;\n    }\n    // Copy those over\n    patternFormat.pattern = skeletonFormat.pattern;\n    patternFormat.pattern12 = skeletonFormat.pattern12;\n    patternFormat.skeleton = skeletonFormat.skeleton;\n    patternFormat.rangePatterns = skeletonFormat.rangePatterns;\n    patternFormat.rangePatterns12 = skeletonFormat.rangePatterns12;\n    return patternFormat;\n}\n","/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-canonicalizelocalelist\n * @param locales\n */\nexport function CanonicalizeLocaleList(locales) {\n    // TODO\n    return Intl.getCanonicalLocales(locales);\n}\n","/**\n * https://tc39.es/ecma402/#sec-canonicalizetimezonename\n * @param tz\n */\nexport function CanonicalizeTimeZoneName(tz, _a) {\n    var tzData = _a.tzData, uppercaseLinks = _a.uppercaseLinks;\n    var uppercasedTz = tz.toUpperCase();\n    var uppercasedZones = Object.keys(tzData).reduce(function (all, z) {\n        all[z.toUpperCase()] = z;\n        return all;\n    }, {});\n    var ianaTimeZone = uppercaseLinks[uppercasedTz] || uppercasedZones[uppercasedTz];\n    if (ianaTimeZone === 'Etc/UTC' || ianaTimeZone === 'Etc/GMT') {\n        return 'UTC';\n    }\n    return ianaTimeZone;\n}\n","/**\n * https://tc39.es/ecma262/#sec-tostring\n */\nexport function ToString(o) {\n    // Only symbol is irregular...\n    if (typeof o === 'symbol') {\n        throw TypeError('Cannot convert a Symbol value to a string');\n    }\n    return String(o);\n}\n/**\n * https://tc39.es/ecma262/#sec-tonumber\n * @param val\n */\nexport function ToNumber(val) {\n    if (val === undefined) {\n        return NaN;\n    }\n    if (val === null) {\n        return +0;\n    }\n    if (typeof val === 'boolean') {\n        return val ? 1 : +0;\n    }\n    if (typeof val === 'number') {\n        return val;\n    }\n    if (typeof val === 'symbol' || typeof val === 'bigint') {\n        throw new TypeError('Cannot convert symbol/bigint to number');\n    }\n    return Number(val);\n}\n/**\n * https://tc39.es/ecma262/#sec-tointeger\n * @param n\n */\nfunction ToInteger(n) {\n    var number = ToNumber(n);\n    if (isNaN(number) || SameValue(number, -0)) {\n        return 0;\n    }\n    if (isFinite(number)) {\n        return number;\n    }\n    var integer = Math.floor(Math.abs(number));\n    if (number < 0) {\n        integer = -integer;\n    }\n    if (SameValue(integer, -0)) {\n        return 0;\n    }\n    return integer;\n}\n/**\n * https://tc39.es/ecma262/#sec-timeclip\n * @param time\n */\nexport function TimeClip(time) {\n    if (!isFinite(time)) {\n        return NaN;\n    }\n    if (Math.abs(time) > 8.64 * 1e15) {\n        return NaN;\n    }\n    return ToInteger(time);\n}\n/**\n * https://tc39.es/ecma262/#sec-toobject\n * @param arg\n */\nexport function ToObject(arg) {\n    if (arg == null) {\n        throw new TypeError('undefined/null cannot be converted to object');\n    }\n    return Object(arg);\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-samevalue\n * @param x\n * @param y\n */\nexport function SameValue(x, y) {\n    if (Object.is) {\n        return Object.is(x, y);\n    }\n    // SameValue algorithm\n    if (x === y) {\n        // Steps 1-5, 7-10\n        // Steps 6.b-6.e: +0 != -0\n        return x !== 0 || 1 / x === 1 / y;\n    }\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-arraycreate\n * @param len\n */\nexport function ArrayCreate(len) {\n    return new Array(len);\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-hasownproperty\n * @param o\n * @param prop\n */\nexport function HasOwnProperty(o, prop) {\n    return Object.prototype.hasOwnProperty.call(o, prop);\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-type\n * @param x\n */\nexport function Type(x) {\n    if (x === null) {\n        return 'Null';\n    }\n    if (typeof x === 'undefined') {\n        return 'Undefined';\n    }\n    if (typeof x === 'function' || typeof x === 'object') {\n        return 'Object';\n    }\n    if (typeof x === 'number') {\n        return 'Number';\n    }\n    if (typeof x === 'boolean') {\n        return 'Boolean';\n    }\n    if (typeof x === 'string') {\n        return 'String';\n    }\n    if (typeof x === 'symbol') {\n        return 'Symbol';\n    }\n    if (typeof x === 'bigint') {\n        return 'BigInt';\n    }\n}\nvar MS_PER_DAY = 86400000;\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#eqn-modulo\n * @param x\n * @param y\n * @return k of the same sign as y\n */\nfunction mod(x, y) {\n    return x - Math.floor(x / y) * y;\n}\n/**\n * https://tc39.es/ecma262/#eqn-Day\n * @param t\n */\nexport function Day(t) {\n    return Math.floor(t / MS_PER_DAY);\n}\n/**\n * https://tc39.es/ecma262/#sec-week-day\n * @param t\n */\nexport function WeekDay(t) {\n    return mod(Day(t) + 4, 7);\n}\n/**\n * https://tc39.es/ecma262/#sec-year-number\n * @param y\n */\nexport function DayFromYear(y) {\n    return Date.UTC(y, 0) / MS_PER_DAY;\n}\n/**\n * https://tc39.es/ecma262/#sec-year-number\n * @param y\n */\nexport function TimeFromYear(y) {\n    return Date.UTC(y, 0);\n}\n/**\n * https://tc39.es/ecma262/#sec-year-number\n * @param t\n */\nexport function YearFromTime(t) {\n    return new Date(t).getUTCFullYear();\n}\nexport function DaysInYear(y) {\n    if (y % 4 !== 0) {\n        return 365;\n    }\n    if (y % 100 !== 0) {\n        return 366;\n    }\n    if (y % 400 !== 0) {\n        return 365;\n    }\n    return 366;\n}\nexport function DayWithinYear(t) {\n    return Day(t) - DayFromYear(YearFromTime(t));\n}\nexport function InLeapYear(t) {\n    return DaysInYear(YearFromTime(t)) === 365 ? 0 : 1;\n}\n/**\n * https://tc39.es/ecma262/#sec-month-number\n * @param t\n */\nexport function MonthFromTime(t) {\n    var dwy = DayWithinYear(t);\n    var leap = InLeapYear(t);\n    if (dwy >= 0 && dwy < 31) {\n        return 0;\n    }\n    if (dwy < 59 + leap) {\n        return 1;\n    }\n    if (dwy < 90 + leap) {\n        return 2;\n    }\n    if (dwy < 120 + leap) {\n        return 3;\n    }\n    if (dwy < 151 + leap) {\n        return 4;\n    }\n    if (dwy < 181 + leap) {\n        return 5;\n    }\n    if (dwy < 212 + leap) {\n        return 6;\n    }\n    if (dwy < 243 + leap) {\n        return 7;\n    }\n    if (dwy < 273 + leap) {\n        return 8;\n    }\n    if (dwy < 304 + leap) {\n        return 9;\n    }\n    if (dwy < 334 + leap) {\n        return 10;\n    }\n    if (dwy < 365 + leap) {\n        return 11;\n    }\n    throw new Error('Invalid time');\n}\nexport function DateFromTime(t) {\n    var dwy = DayWithinYear(t);\n    var mft = MonthFromTime(t);\n    var leap = InLeapYear(t);\n    if (mft === 0) {\n        return dwy + 1;\n    }\n    if (mft === 1) {\n        return dwy - 30;\n    }\n    if (mft === 2) {\n        return dwy - 58 - leap;\n    }\n    if (mft === 3) {\n        return dwy - 89 - leap;\n    }\n    if (mft === 4) {\n        return dwy - 119 - leap;\n    }\n    if (mft === 5) {\n        return dwy - 150 - leap;\n    }\n    if (mft === 6) {\n        return dwy - 180 - leap;\n    }\n    if (mft === 7) {\n        return dwy - 211 - leap;\n    }\n    if (mft === 8) {\n        return dwy - 242 - leap;\n    }\n    if (mft === 9) {\n        return dwy - 272 - leap;\n    }\n    if (mft === 10) {\n        return dwy - 303 - leap;\n    }\n    if (mft === 11) {\n        return dwy - 333 - leap;\n    }\n    throw new Error('Invalid time');\n}\nvar HOURS_PER_DAY = 24;\nvar MINUTES_PER_HOUR = 60;\nvar SECONDS_PER_MINUTE = 60;\nvar MS_PER_SECOND = 1e3;\nvar MS_PER_MINUTE = MS_PER_SECOND * SECONDS_PER_MINUTE;\nvar MS_PER_HOUR = MS_PER_MINUTE * MINUTES_PER_HOUR;\nexport function HourFromTime(t) {\n    return mod(Math.floor(t / MS_PER_HOUR), HOURS_PER_DAY);\n}\nexport function MinFromTime(t) {\n    return mod(Math.floor(t / MS_PER_MINUTE), MINUTES_PER_HOUR);\n}\nexport function SecFromTime(t) {\n    return mod(Math.floor(t / MS_PER_SECOND), SECONDS_PER_MINUTE);\n}\nfunction IsCallable(fn) {\n    return typeof fn === 'function';\n}\n/**\n * The abstract operation OrdinaryHasInstance implements\n * the default algorithm for determining if an object O\n * inherits from the instance object inheritance path\n * provided by constructor C.\n * @param C class\n * @param O object\n * @param internalSlots internalSlots\n */\nexport function OrdinaryHasInstance(C, O, internalSlots) {\n    if (!IsCallable(C)) {\n        return false;\n    }\n    if (internalSlots === null || internalSlots === void 0 ? void 0 : internalSlots.boundTargetFunction) {\n        var BC = internalSlots === null || internalSlots === void 0 ? void 0 : internalSlots.boundTargetFunction;\n        return O instanceof BC;\n    }\n    if (typeof O !== 'object') {\n        return false;\n    }\n    var P = C.prototype;\n    if (typeof P !== 'object') {\n        throw new TypeError('OrdinaryHasInstance called on an object with an invalid prototype property.');\n    }\n    return Object.prototype.isPrototypeOf.call(P, O);\n}\nexport function msFromTime(t) {\n    return mod(t, MS_PER_SECOND);\n}\n","import { ToObject } from './262';\n/**\n * https://tc39.es/ecma402/#sec-coerceoptionstoobject\n * @param options\n * @returns\n */\nexport function CoerceOptionsToObject(options) {\n    if (typeof options === 'undefined') {\n        return Object.create(null);\n    }\n    return ToObject(options);\n}\n","import { __assign } from \"tslib\";\nimport { invariant } from '../utils';\nimport { DATE_TIME_PROPS, additionPenalty, removalPenalty, longMorePenalty, shortMorePenalty, shortLessPenalty, longLessPenalty, } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-basicformatmatcher\n * @param options\n * @param formats\n */\nexport function BasicFormatMatcher(options, formats) {\n    var bestScore = -Infinity;\n    var bestFormat = formats[0];\n    invariant(Array.isArray(formats), 'formats should be a list of things');\n    for (var _i = 0, formats_1 = formats; _i < formats_1.length; _i++) {\n        var format = formats_1[_i];\n        var score = 0;\n        for (var _a = 0, DATE_TIME_PROPS_1 = DATE_TIME_PROPS; _a < DATE_TIME_PROPS_1.length; _a++) {\n            var prop = DATE_TIME_PROPS_1[_a];\n            var optionsProp = options[prop];\n            var formatProp = format[prop];\n            if (optionsProp === undefined && formatProp !== undefined) {\n                score -= additionPenalty;\n            }\n            else if (optionsProp !== undefined && formatProp === undefined) {\n                score -= removalPenalty;\n            }\n            else if (optionsProp !== formatProp) {\n                var values = void 0;\n                if (prop === 'fractionalSecondDigits') {\n                    values = [1, 2, 3];\n                }\n                else {\n                    values = ['2-digit', 'numeric', 'narrow', 'short', 'long'];\n                }\n                var optionsPropIndex = values.indexOf(optionsProp);\n                var formatPropIndex = values.indexOf(formatProp);\n                var delta = Math.max(-2, Math.min(formatPropIndex - optionsPropIndex, 2));\n                if (delta === 2) {\n                    score -= longMorePenalty;\n                }\n                else if (delta === 1) {\n                    score -= shortMorePenalty;\n                }\n                else if (delta === -1) {\n                    score -= shortLessPenalty;\n                }\n                else if (delta === -2) {\n                    score -= longLessPenalty;\n                }\n            }\n        }\n        if (score > bestScore) {\n            bestScore = score;\n            bestFormat = format;\n        }\n    }\n    return __assign({}, bestFormat);\n}\n","import { invariant } from '../utils';\nexport function DateTimeStyleFormat(dateStyle, timeStyle, dataLocaleData) {\n    var dateFormat, timeFormat;\n    if (timeStyle !== undefined) {\n        invariant(timeStyle === 'full' ||\n            timeStyle === 'long' ||\n            timeStyle === 'medium' ||\n            timeStyle === 'short', 'invalid timeStyle');\n        timeFormat = dataLocaleData.timeFormat[timeStyle];\n    }\n    if (dateStyle !== undefined) {\n        invariant(dateStyle === 'full' ||\n            dateStyle === 'long' ||\n            dateStyle === 'medium' ||\n            dateStyle === 'short', 'invalid dateStyle');\n        dateFormat = dataLocaleData.dateFormat[dateStyle];\n    }\n    if (dateStyle !== undefined && timeStyle !== undefined) {\n        var format = {};\n        for (var field in dateFormat) {\n            if (field !== 'pattern') {\n                // @ts-ignore\n                format[field] = dateFormat[field];\n            }\n        }\n        for (var field in timeFormat) {\n            if (field !== 'pattern' && field !== 'pattern12') {\n                // @ts-ignore\n                format[field] = timeFormat[field];\n            }\n        }\n        var connector = dataLocaleData.dateTimeFormat[dateStyle];\n        var pattern = connector\n            .replace('{0}', timeFormat.pattern)\n            .replace('{1}', dateFormat.pattern);\n        format.pattern = pattern;\n        if ('pattern12' in timeFormat) {\n            var pattern12 = connector\n                .replace('{0}', timeFormat.pattern12)\n                .replace('{1}', dateFormat.pattern);\n            format.pattern12 = pattern12;\n        }\n        return format;\n    }\n    if (timeStyle !== undefined) {\n        return timeFormat;\n    }\n    invariant(dateStyle !== undefined, 'dateStyle should not be undefined');\n    return dateFormat;\n}\n","import { invariant } from '../utils';\nimport { Type, YearFromTime, WeekDay, MonthFromTime, DateFromTime, HourFromTime, MinFromTime, SecFromTime, msFromTime, } from '../262';\nfunction getApplicableZoneData(t, timeZone, tzData) {\n    var _a;\n    var zoneData = tzData[timeZone];\n    // We don't have data for this so just say it's UTC\n    if (!zoneData) {\n        return [0, false];\n    }\n    var i = 0;\n    var offset = 0;\n    var dst = false;\n    for (; i <= zoneData.length; i++) {\n        if (i === zoneData.length || zoneData[i][0] * 1e3 > t) {\n            ;\n            _a = zoneData[i - 1], offset = _a[2], dst = _a[3];\n            break;\n        }\n    }\n    return [offset * 1e3, dst];\n}\n/**\n * https://tc39.es/ecma402/#sec-tolocaltime\n * @param t\n * @param calendar\n * @param timeZone\n */\nexport function ToLocalTime(t, calendar, timeZone, _a) {\n    var tzData = _a.tzData;\n    invariant(Type(t) === 'Number', 'invalid time');\n    invariant(calendar === 'gregory', 'We only support Gregory calendar right now');\n    var _b = getApplicableZoneData(t, timeZone, tzData), timeZoneOffset = _b[0], inDST = _b[1];\n    var tz = t + timeZoneOffset;\n    var year = YearFromTime(tz);\n    return {\n        weekday: WeekDay(tz),\n        era: year < 0 ? 'BC' : 'AD',\n        year: year,\n        relatedYear: undefined,\n        yearName: undefined,\n        month: MonthFromTime(tz),\n        day: DateFromTime(tz),\n        hour: HourFromTime(tz),\n        minute: MinFromTime(tz),\n        second: SecFromTime(tz),\n        millisecond: msFromTime(tz),\n        inDST: inDST,\n        // IMPORTANT: Not in spec\n        timeZoneOffset: timeZoneOffset,\n    };\n}\n","import { DATE_TIME_PROPS } from './utils';\nimport { ToLocalTime } from './ToLocalTime';\nimport { TimeClip } from '../262';\nfunction pad(n) {\n    if (n < 10) {\n        return \"0\" + n;\n    }\n    return String(n);\n}\nfunction offsetToGmtString(gmtFormat, hourFormat, offsetInMs, style) {\n    var offsetInMinutes = Math.floor(offsetInMs / 60000);\n    var mins = Math.abs(offsetInMinutes) % 60;\n    var hours = Math.floor(Math.abs(offsetInMinutes) / 60);\n    var _a = hourFormat.split(';'), positivePattern = _a[0], negativePattern = _a[1];\n    var offsetStr = '';\n    var pattern = offsetInMs < 0 ? negativePattern : positivePattern;\n    if (style === 'long') {\n        offsetStr = pattern\n            .replace('HH', pad(hours))\n            .replace('H', String(hours))\n            .replace('mm', pad(mins))\n            .replace('m', String(mins));\n    }\n    else if (mins || hours) {\n        if (!mins) {\n            pattern = pattern.replace(/:?m+/, '');\n        }\n        offsetStr = pattern.replace(/H+/, String(hours)).replace(/m+/, String(mins));\n    }\n    return gmtFormat.replace('{0}', offsetStr);\n}\n/**\n * https://tc39.es/ecma402/#sec-partitiondatetimepattern\n * @param dtf\n * @param x\n */\nexport function FormatDateTimePattern(dtf, patternParts, x, _a) {\n    var getInternalSlots = _a.getInternalSlots, localeData = _a.localeData, getDefaultTimeZone = _a.getDefaultTimeZone, tzData = _a.tzData;\n    x = TimeClip(x);\n    /** IMPL START */\n    var internalSlots = getInternalSlots(dtf);\n    var dataLocale = internalSlots.dataLocale;\n    var dataLocaleData = localeData[dataLocale];\n    /** IMPL END */\n    var locale = internalSlots.locale;\n    var nfOptions = Object.create(null);\n    nfOptions.useGrouping = false;\n    var nf = new Intl.NumberFormat(locale, nfOptions);\n    var nf2Options = Object.create(null);\n    nf2Options.minimumIntegerDigits = 2;\n    nf2Options.useGrouping = false;\n    var nf2 = new Intl.NumberFormat(locale, nf2Options);\n    var fractionalSecondDigits = internalSlots.fractionalSecondDigits;\n    var nf3;\n    if (fractionalSecondDigits !== undefined) {\n        var nf3Options = Object.create(null);\n        nf3Options.minimumIntegerDigits = fractionalSecondDigits;\n        nf3Options.useGrouping = false;\n        nf3 = new Intl.NumberFormat(locale, nf3Options);\n    }\n    var tm = ToLocalTime(x, \n    // @ts-ignore\n    internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n    var result = [];\n    for (var _i = 0, patternParts_1 = patternParts; _i < patternParts_1.length; _i++) {\n        var patternPart = patternParts_1[_i];\n        var p = patternPart.type;\n        if (p === 'literal') {\n            result.push({\n                type: 'literal',\n                value: patternPart.value,\n            });\n        }\n        else if (p === 'fractionalSecondDigits') {\n            var v = Math.floor(tm.millisecond * Math.pow(10, ((fractionalSecondDigits || 0) - 3)));\n            result.push({\n                // @ts-expect-error Spec is not there yet\n                type: 'fractionalSecond',\n                value: nf3.format(v),\n            });\n        }\n        else if (DATE_TIME_PROPS.indexOf(p) > -1) {\n            var fv = '';\n            var f = internalSlots[p];\n            // @ts-ignore\n            var v = tm[p];\n            if (p === 'year' && v <= 0) {\n                v = 1 - v;\n            }\n            if (p === 'month') {\n                v++;\n            }\n            var hourCycle = internalSlots.hourCycle;\n            if (p === 'hour' && (hourCycle === 'h11' || hourCycle === 'h12')) {\n                v = v % 12;\n                if (v === 0 && hourCycle === 'h12') {\n                    v = 12;\n                }\n            }\n            if (p === 'hour' && hourCycle === 'h24') {\n                if (v === 0) {\n                    v = 24;\n                }\n            }\n            if (f === 'numeric') {\n                fv = nf.format(v);\n            }\n            else if (f === '2-digit') {\n                fv = nf2.format(v);\n                if (fv.length > 2) {\n                    fv = fv.slice(fv.length - 2, fv.length);\n                }\n            }\n            else if (f === 'narrow' || f === 'short' || f === 'long') {\n                if (p === 'era') {\n                    fv = dataLocaleData[p][f][v];\n                }\n                else if (p === 'timeZoneName') {\n                    var timeZoneName = dataLocaleData.timeZoneName, gmtFormat = dataLocaleData.gmtFormat, hourFormat = dataLocaleData.hourFormat;\n                    var timeZone = internalSlots.timeZone || getDefaultTimeZone();\n                    var timeZoneData = timeZoneName[timeZone];\n                    if (timeZoneData && timeZoneData[f]) {\n                        fv = timeZoneData[f][+tm.inDST];\n                    }\n                    else {\n                        // Fallback to gmtFormat\n                        fv = offsetToGmtString(gmtFormat, hourFormat, tm.timeZoneOffset, f);\n                    }\n                }\n                else if (p === 'month') {\n                    fv = dataLocaleData.month[f][v - 1];\n                }\n                else {\n                    fv = dataLocaleData[p][f][v];\n                }\n            }\n            result.push({\n                type: p,\n                value: fv,\n            });\n        }\n        else if (p === 'ampm') {\n            var v = tm.hour;\n            var fv = void 0;\n            if (v > 11) {\n                fv = dataLocaleData.pm;\n            }\n            else {\n                fv = dataLocaleData.am;\n            }\n            result.push({\n                type: 'dayPeriod',\n                value: fv,\n            });\n        }\n        else if (p === 'relatedYear') {\n            var v = tm.relatedYear;\n            // @ts-ignore\n            var fv = nf.format(v);\n            result.push({\n                // @ts-ignore TODO: Fix TS type\n                type: 'relatedYear',\n                value: fv,\n            });\n        }\n        else if (p === 'yearName') {\n            var v = tm.yearName;\n            // @ts-ignore\n            var fv = nf.format(v);\n            result.push({\n                // @ts-ignore TODO: Fix TS type\n                type: 'yearName',\n                value: fv,\n            });\n        }\n    }\n    return result;\n}\n","import { invariant } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-partitionpattern\n * @param pattern\n */\nexport function PartitionPattern(pattern) {\n    var result = [];\n    var beginIndex = pattern.indexOf('{');\n    var endIndex = 0;\n    var nextIndex = 0;\n    var length = pattern.length;\n    while (beginIndex < pattern.length && beginIndex > -1) {\n        endIndex = pattern.indexOf('}', beginIndex);\n        invariant(endIndex > beginIndex, \"Invalid pattern \" + pattern);\n        if (beginIndex > nextIndex) {\n            result.push({\n                type: 'literal',\n                value: pattern.substring(nextIndex, beginIndex),\n            });\n        }\n        result.push({\n            type: pattern.substring(beginIndex + 1, endIndex),\n            value: undefined,\n        });\n        nextIndex = endIndex + 1;\n        beginIndex = pattern.indexOf('{', nextIndex);\n    }\n    if (nextIndex < length) {\n        result.push({\n            type: 'literal',\n            value: pattern.substring(nextIndex, length),\n        });\n    }\n    return result;\n}\n","import { TimeClip } from '../262';\nimport { FormatDateTimePattern, } from './FormatDateTimePattern';\nimport { PartitionPattern } from '../PartitionPattern';\n/**\n * https://tc39.es/ecma402/#sec-partitiondatetimepattern\n * @param dtf\n * @param x\n */\nexport function PartitionDateTimePattern(dtf, x, implDetails) {\n    x = TimeClip(x);\n    if (isNaN(x)) {\n        throw new RangeError('invalid time');\n    }\n    /** IMPL START */\n    var getInternalSlots = implDetails.getInternalSlots;\n    var internalSlots = getInternalSlots(dtf);\n    /** IMPL END */\n    var pattern = internalSlots.pattern;\n    return FormatDateTimePattern(dtf, PartitionPattern(pattern), x, implDetails);\n}\n","import { PartitionDateTimePattern } from './PartitionDateTimePattern';\n/**\n * https://tc39.es/ecma402/#sec-formatdatetime\n * @param dtf DateTimeFormat\n * @param x\n */\nexport function FormatDateTime(dtf, x, implDetails) {\n    var parts = PartitionDateTimePattern(dtf, x, implDetails);\n    var result = '';\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result += part.value;\n    }\n    return result;\n}\n","import { RangePatternType, } from '../types/date-time';\nimport { SameValue, TimeClip } from '../262';\nimport { ToLocalTime } from './ToLocalTime';\nimport { FormatDateTimePattern, } from './FormatDateTimePattern';\nimport { PartitionPattern } from '../PartitionPattern';\nvar TABLE_2_FIELDS = [\n    'era',\n    'year',\n    'month',\n    'day',\n    'ampm',\n    'hour',\n    'minute',\n    'second',\n    'fractionalSecondDigits',\n];\nexport function PartitionDateTimeRangePattern(dtf, x, y, implDetails) {\n    x = TimeClip(x);\n    if (isNaN(x)) {\n        throw new RangeError('Invalid start time');\n    }\n    y = TimeClip(y);\n    if (isNaN(y)) {\n        throw new RangeError('Invalid end time');\n    }\n    /** IMPL START */\n    var getInternalSlots = implDetails.getInternalSlots, tzData = implDetails.tzData;\n    var internalSlots = getInternalSlots(dtf);\n    /** IMPL END */\n    var tm1 = ToLocalTime(x, \n    // @ts-ignore\n    internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n    var tm2 = ToLocalTime(y, \n    // @ts-ignore\n    internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n    var pattern = internalSlots.pattern, rangePatterns = internalSlots.rangePatterns;\n    var rangePattern;\n    var dateFieldsPracticallyEqual = true;\n    var patternContainsLargerDateField = false;\n    for (var _i = 0, TABLE_2_FIELDS_1 = TABLE_2_FIELDS; _i < TABLE_2_FIELDS_1.length; _i++) {\n        var fieldName = TABLE_2_FIELDS_1[_i];\n        if (dateFieldsPracticallyEqual && !patternContainsLargerDateField) {\n            if (fieldName === 'ampm') {\n                var rp = rangePatterns.ampm;\n                if (rangePattern !== undefined && rp === undefined) {\n                    patternContainsLargerDateField = true;\n                }\n                else {\n                    var v1 = tm1.hour;\n                    var v2 = tm2.hour;\n                    if ((v1 > 11 && v2 < 11) || (v1 < 11 && v2 > 11)) {\n                        dateFieldsPracticallyEqual = false;\n                    }\n                    rangePattern = rp;\n                }\n            }\n            else if (fieldName === 'fractionalSecondDigits') {\n                var fractionalSecondDigits = internalSlots.fractionalSecondDigits;\n                if (fractionalSecondDigits === undefined) {\n                    fractionalSecondDigits = 3;\n                }\n                var v1 = Math.floor(tm1.millisecond * Math.pow(10, (fractionalSecondDigits - 3)));\n                var v2 = Math.floor(tm2.millisecond * Math.pow(10, (fractionalSecondDigits - 3)));\n                if (v1 !== v2) {\n                    dateFieldsPracticallyEqual = false;\n                }\n            }\n            else {\n                var rp = rangePatterns[fieldName];\n                if (rangePattern !== undefined && rp === undefined) {\n                    patternContainsLargerDateField = true;\n                }\n                else {\n                    var v1 = tm1[fieldName];\n                    var v2 = tm2[fieldName];\n                    if (!SameValue(v1, v2)) {\n                        dateFieldsPracticallyEqual = false;\n                    }\n                    rangePattern = rp;\n                }\n            }\n        }\n    }\n    if (dateFieldsPracticallyEqual) {\n        var result_2 = FormatDateTimePattern(dtf, PartitionPattern(pattern), x, implDetails);\n        for (var _a = 0, result_1 = result_2; _a < result_1.length; _a++) {\n            var r = result_1[_a];\n            r.source = RangePatternType.shared;\n        }\n        return result_2;\n    }\n    var result = [];\n    if (rangePattern === undefined) {\n        rangePattern = rangePatterns.default;\n        /** IMPL DETAILS */\n        // Now we have to replace {0} & {1} with actual pattern\n        for (var _b = 0, _c = rangePattern.patternParts; _b < _c.length; _b++) {\n            var patternPart = _c[_b];\n            if (patternPart.pattern === '{0}' || patternPart.pattern === '{1}') {\n                patternPart.pattern = pattern;\n            }\n        }\n    }\n    for (var _d = 0, _e = rangePattern.patternParts; _d < _e.length; _d++) {\n        var rangePatternPart = _e[_d];\n        var source = rangePatternPart.source, pattern_1 = rangePatternPart.pattern;\n        var z = void 0;\n        if (source === RangePatternType.startRange ||\n            source === RangePatternType.shared) {\n            z = x;\n        }\n        else {\n            z = y;\n        }\n        var patternParts = PartitionPattern(pattern_1);\n        var partResult = FormatDateTimePattern(dtf, patternParts, z, implDetails);\n        for (var _f = 0, partResult_1 = partResult; _f < partResult_1.length; _f++) {\n            var r = partResult_1[_f];\n            r.source = source;\n        }\n        result = result.concat(partResult);\n    }\n    return result;\n}\n","import { PartitionDateTimeRangePattern } from './PartitionDateTimeRangePattern';\nexport function FormatDateTimeRange(dtf, x, y, implDetails) {\n    var parts = PartitionDateTimeRangePattern(dtf, x, y, implDetails);\n    var result = '';\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result += part.value;\n    }\n    return result;\n}\n","import { PartitionDateTimeRangePattern } from './PartitionDateTimeRangePattern';\nexport function FormatDateTimeRangeToParts(dtf, x, y, implDetails) {\n    var parts = PartitionDateTimeRangePattern(dtf, x, y, implDetails);\n    var result = new Array(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result.push({\n            type: part.type,\n            value: part.value,\n            source: part.source,\n        });\n    }\n    return result;\n}\n","import { PartitionDateTimePattern } from './PartitionDateTimePattern';\nimport { ArrayCreate } from '../262';\n/**\n * https://tc39.es/ecma402/#sec-formatdatetimetoparts\n *\n * @param dtf\n * @param x\n * @param implDetails\n */\nexport function FormatDateTimeToParts(dtf, x, implDetails) {\n    var parts = PartitionDateTimePattern(dtf, x, implDetails);\n    var result = ArrayCreate(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result.push({\n            type: part.type,\n            value: part.value,\n        });\n    }\n    return result;\n}\n","import { ToObject } from '../262';\n/**\n * https://tc39.es/ecma402/#sec-todatetimeoptions\n * @param options\n * @param required\n * @param defaults\n */\nexport function ToDateTimeOptions(options, required, defaults) {\n    if (options === undefined) {\n        options = null;\n    }\n    else {\n        options = ToObject(options);\n    }\n    options = Object.create(options);\n    var needDefaults = true;\n    if (required === 'date' || required === 'any') {\n        for (var _i = 0, _a = ['weekday', 'year', 'month', 'day']; _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var value = options[prop];\n            if (value !== undefined) {\n                needDefaults = false;\n            }\n        }\n    }\n    if (required === 'time' || required === 'any') {\n        for (var _b = 0, _c = [\n            'dayPeriod',\n            'hour',\n            'minute',\n            'second',\n            'fractionalSecondDigits',\n        ]; _b < _c.length; _b++) {\n            var prop = _c[_b];\n            var value = options[prop];\n            if (value !== undefined) {\n                needDefaults = false;\n            }\n        }\n    }\n    if (options.dateStyle !== undefined || options.timeStyle !== undefined) {\n        needDefaults = false;\n    }\n    if (required === 'date' && options.timeStyle) {\n        throw new TypeError('Intl.DateTimeFormat date was required but timeStyle was included');\n    }\n    if (required === 'time' && options.dateStyle) {\n        throw new TypeError('Intl.DateTimeFormat time was required but dateStyle was included');\n    }\n    if (needDefaults && (defaults === 'date' || defaults === 'all')) {\n        for (var _d = 0, _e = ['year', 'month', 'day']; _d < _e.length; _d++) {\n            var prop = _e[_d];\n            options[prop] = 'numeric';\n        }\n    }\n    if (needDefaults && (defaults === 'time' || defaults === 'all')) {\n        for (var _f = 0, _g = ['hour', 'minute', 'second']; _f < _g.length; _f++) {\n            var prop = _g[_f];\n            options[prop] = 'numeric';\n        }\n    }\n    return options;\n}\n","import { ToString } from './262';\n/**\n * https://tc39.es/ecma402/#sec-getoption\n * @param opts\n * @param prop\n * @param type\n * @param values\n * @param fallback\n */\nexport function GetOption(opts, prop, type, values, fallback) {\n    if (typeof opts !== 'object') {\n        throw new TypeError('Options must be an object');\n    }\n    var value = opts[prop];\n    if (value !== undefined) {\n        if (type !== 'boolean' && type !== 'string') {\n            throw new TypeError('invalid type');\n        }\n        if (type === 'boolean') {\n            value = Boolean(value);\n        }\n        if (type === 'string') {\n            value = ToString(value);\n        }\n        if (values !== undefined && !values.filter(function (val) { return val == value; }).length) {\n            throw new RangeError(value + \" is not within \" + values.join(', '));\n        }\n        return value;\n    }\n    return fallback;\n}\n","/**\n * https://tc39.es/ecma402/#sec-bestavailablelocale\n * @param availableLocales\n * @param locale\n */\nexport function BestAvailableLocale(availableLocales, locale) {\n    var candidate = locale;\n    while (true) {\n        if (availableLocales.has(candidate)) {\n            return candidate;\n        }\n        var pos = candidate.lastIndexOf('-');\n        if (!~pos) {\n            return undefined;\n        }\n        if (pos >= 2 && candidate[pos - 2] === '-') {\n            pos -= 2;\n        }\n        candidate = candidate.slice(0, pos);\n    }\n}\n","import { invariant } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-unicodeextensionvalue\n * @param extension\n * @param key\n */\nexport function UnicodeExtensionValue(extension, key) {\n    invariant(key.length === 2, 'key must have 2 elements');\n    var size = extension.length;\n    var searchValue = \"-\" + key + \"-\";\n    var pos = extension.indexOf(searchValue);\n    if (pos !== -1) {\n        var start = pos + 4;\n        var end = start;\n        var k = start;\n        var done = false;\n        while (!done) {\n            var e = extension.indexOf('-', k);\n            var len = void 0;\n            if (e === -1) {\n                len = size - k;\n            }\n            else {\n                len = e - k;\n            }\n            if (len === 2) {\n                done = true;\n            }\n            else if (e === -1) {\n                end = size;\n                done = true;\n            }\n            else {\n                end = e;\n                k = e + 1;\n            }\n        }\n        return extension.slice(start, end);\n    }\n    searchValue = \"-\" + key;\n    pos = extension.indexOf(searchValue);\n    if (pos !== -1 && pos + 3 === size) {\n        return '';\n    }\n    return undefined;\n}\n","import { LookupMatcher } from './LookupMatcher';\nimport { BestFitMatcher } from './BestFitMatcher';\nimport { invariant } from './utils';\nimport { UnicodeExtensionValue } from './UnicodeExtensionValue';\n/**\n * https://tc39.es/ecma402/#sec-resolvelocale\n */\nexport function ResolveLocale(availableLocales, requestedLocales, options, relevantExtensionKeys, localeData, getDefaultLocale) {\n    var matcher = options.localeMatcher;\n    var r;\n    if (matcher === 'lookup') {\n        r = LookupMatcher(availableLocales, requestedLocales, getDefaultLocale);\n    }\n    else {\n        r = BestFitMatcher(availableLocales, requestedLocales, getDefaultLocale);\n    }\n    var foundLocale = r.locale;\n    var result = { locale: '', dataLocale: foundLocale };\n    var supportedExtension = '-u';\n    for (var _i = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _i < relevantExtensionKeys_1.length; _i++) {\n        var key = relevantExtensionKeys_1[_i];\n        invariant(foundLocale in localeData, \"Missing locale data for \" + foundLocale);\n        var foundLocaleData = localeData[foundLocale];\n        invariant(typeof foundLocaleData === 'object' && foundLocaleData !== null, \"locale data \" + key + \" must be an object\");\n        var keyLocaleData = foundLocaleData[key];\n        invariant(Array.isArray(keyLocaleData), \"keyLocaleData for \" + key + \" must be an array\");\n        var value = keyLocaleData[0];\n        invariant(typeof value === 'string' || value === null, \"value must be string or null but got \" + typeof value + \" in key \" + key);\n        var supportedExtensionAddition = '';\n        if (r.extension) {\n            var requestedValue = UnicodeExtensionValue(r.extension, key);\n            if (requestedValue !== undefined) {\n                if (requestedValue !== '') {\n                    if (~keyLocaleData.indexOf(requestedValue)) {\n                        value = requestedValue;\n                        supportedExtensionAddition = \"-\" + key + \"-\" + value;\n                    }\n                }\n                else if (~requestedValue.indexOf('true')) {\n                    value = 'true';\n                    supportedExtensionAddition = \"-\" + key;\n                }\n            }\n        }\n        if (key in options) {\n            var optionsValue = options[key];\n            invariant(typeof optionsValue === 'string' ||\n                typeof optionsValue === 'undefined' ||\n                optionsValue === null, 'optionsValue must be String, Undefined or Null');\n            if (~keyLocaleData.indexOf(optionsValue)) {\n                if (optionsValue !== value) {\n                    value = optionsValue;\n                    supportedExtensionAddition = '';\n                }\n            }\n        }\n        result[key] = value;\n        supportedExtension += supportedExtensionAddition;\n    }\n    if (supportedExtension.length > 2) {\n        var privateIndex = foundLocale.indexOf('-x-');\n        if (privateIndex === -1) {\n            foundLocale = foundLocale + supportedExtension;\n        }\n        else {\n            var preExtension = foundLocale.slice(0, privateIndex);\n            var postExtension = foundLocale.slice(privateIndex, foundLocale.length);\n            foundLocale = preExtension + supportedExtension + postExtension;\n        }\n        foundLocale = Intl.getCanonicalLocales(foundLocale)[0];\n    }\n    result.locale = foundLocale;\n    return result;\n}\n","import { UNICODE_EXTENSION_SEQUENCE_REGEX } from './utils';\nimport { BestAvailableLocale } from './BestAvailableLocale';\n/**\n * https://tc39.es/ecma402/#sec-lookupmatcher\n * @param availableLocales\n * @param requestedLocales\n * @param getDefaultLocale\n */\nexport function LookupMatcher(availableLocales, requestedLocales, getDefaultLocale) {\n    var result = { locale: '' };\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n        var locale = requestedLocales_1[_i];\n        var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        var availableLocale = BestAvailableLocale(availableLocales, noExtensionLocale);\n        if (availableLocale) {\n            result.locale = availableLocale;\n            if (locale !== noExtensionLocale) {\n                result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n            }\n            return result;\n        }\n    }\n    result.locale = getDefaultLocale();\n    return result;\n}\n","import { BestAvailableLocale } from './BestAvailableLocale';\nimport { UNICODE_EXTENSION_SEQUENCE_REGEX } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-bestfitmatcher\n * @param availableLocales\n * @param requestedLocales\n * @param getDefaultLocale\n */\nexport function BestFitMatcher(availableLocales, requestedLocales, getDefaultLocale) {\n    var minimizedAvailableLocaleMap = {};\n    var minimizedAvailableLocales = new Set();\n    availableLocales.forEach(function (locale) {\n        var minimizedLocale = new Intl.Locale(locale)\n            .minimize()\n            .toString();\n        minimizedAvailableLocaleMap[minimizedLocale] = locale;\n        minimizedAvailableLocales.add(minimizedLocale);\n    });\n    var foundLocale;\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n        var l = requestedLocales_1[_i];\n        if (foundLocale) {\n            break;\n        }\n        var noExtensionLocale = l.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        if (availableLocales.has(noExtensionLocale)) {\n            foundLocale = noExtensionLocale;\n            break;\n        }\n        if (minimizedAvailableLocales.has(noExtensionLocale)) {\n            foundLocale = minimizedAvailableLocaleMap[noExtensionLocale];\n            break;\n        }\n        var locale = new Intl.Locale(noExtensionLocale);\n        var maximizedRequestedLocale = locale.maximize().toString();\n        var minimizedRequestedLocale = locale.minimize().toString();\n        // Check minimized locale\n        if (minimizedAvailableLocales.has(minimizedRequestedLocale)) {\n            foundLocale = minimizedAvailableLocaleMap[minimizedRequestedLocale];\n            break;\n        }\n        // Lookup algo on maximized locale\n        foundLocale = BestAvailableLocale(minimizedAvailableLocales, maximizedRequestedLocale);\n    }\n    return {\n        locale: foundLocale || getDefaultLocale(),\n    };\n}\n","/**\n * https://tc39.es/ecma402/#sec-isvalidtimezonename\n * @param tz\n * @param implDetails implementation details\n */\nexport function IsValidTimeZoneName(tz, _a) {\n    var tzData = _a.tzData, uppercaseLinks = _a.uppercaseLinks;\n    var uppercasedTz = tz.toUpperCase();\n    var zoneNames = new Set();\n    Object.keys(tzData)\n        .map(function (z) { return z.toUpperCase(); })\n        .forEach(function (z) { return zoneNames.add(z); });\n    return zoneNames.has(uppercasedTz) || uppercasedTz in uppercaseLinks;\n}\n","export function DefaultNumberOption(val, min, max, fallback) {\n    if (val !== undefined) {\n        val = Number(val);\n        if (isNaN(val) || val < min || val > max) {\n            throw new RangeError(val + \" is outside of range [\" + min + \", \" + max + \"]\");\n        }\n        return Math.floor(val);\n    }\n    return fallback;\n}\n","/**\n * https://tc39.es/ecma402/#sec-getnumberoption\n * @param options\n * @param property\n * @param min\n * @param max\n * @param fallback\n */\nimport { DefaultNumberOption } from './DefaultNumberOption';\nexport function GetNumberOption(options, property, minimum, maximum, fallback) {\n    var val = options[property];\n    // @ts-expect-error\n    return DefaultNumberOption(val, minimum, maximum, fallback);\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { ToDateTimeOptions } from './ToDateTimeOptions';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { IsValidTimeZoneName } from '../IsValidTimeZoneName';\nimport { CanonicalizeTimeZoneName } from '../CanonicalizeTimeZoneName';\nimport { BasicFormatMatcher } from './BasicFormatMatcher';\nimport { BestFitFormatMatcher } from './BestFitFormatMatcher';\nimport { invariant } from '../utils';\nimport { DATE_TIME_PROPS } from './utils';\nimport { DateTimeStyleFormat } from './DateTimeStyleFormat';\nimport { GetNumberOption } from '../GetNumberOption';\nfunction isTimeRelated(opt) {\n    for (var _i = 0, _a = ['hour', 'minute', 'second']; _i < _a.length; _i++) {\n        var prop = _a[_i];\n        var value = opt[prop];\n        if (value !== undefined) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction resolveHourCycle(hc, hcDefault, hour12) {\n    if (hc == null) {\n        hc = hcDefault;\n    }\n    if (hour12 !== undefined) {\n        if (hour12) {\n            if (hcDefault === 'h11' || hcDefault === 'h23') {\n                hc = 'h11';\n            }\n            else {\n                hc = 'h12';\n            }\n        }\n        else {\n            invariant(!hour12, 'hour12 must not be set');\n            if (hcDefault === 'h11' || hcDefault === 'h23') {\n                hc = 'h23';\n            }\n            else {\n                hc = 'h24';\n            }\n        }\n    }\n    return hc;\n}\nvar TYPE_REGEX = /^[a-z0-9]{3,8}$/i;\n/**\n * https://tc39.es/ecma402/#sec-initializedatetimeformat\n * @param dtf DateTimeFormat\n * @param locales locales\n * @param opts options\n */\nexport function InitializeDateTimeFormat(dtf, locales, opts, _a) {\n    var getInternalSlots = _a.getInternalSlots, availableLocales = _a.availableLocales, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale, getDefaultTimeZone = _a.getDefaultTimeZone, relevantExtensionKeys = _a.relevantExtensionKeys, tzData = _a.tzData, uppercaseLinks = _a.uppercaseLinks;\n    // @ts-ignore\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var options = ToDateTimeOptions(opts, 'any', 'date');\n    var opt = Object.create(null);\n    var matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    opt.localeMatcher = matcher;\n    var calendar = GetOption(options, 'calendar', 'string', undefined, undefined);\n    if (calendar !== undefined && !TYPE_REGEX.test(calendar)) {\n        throw new RangeError('Malformed calendar');\n    }\n    var internalSlots = getInternalSlots(dtf);\n    opt.ca = calendar;\n    var numberingSystem = GetOption(options, 'numberingSystem', 'string', undefined, undefined);\n    if (numberingSystem !== undefined && !TYPE_REGEX.test(numberingSystem)) {\n        throw new RangeError('Malformed numbering system');\n    }\n    opt.nu = numberingSystem;\n    var hour12 = GetOption(options, 'hour12', 'boolean', undefined, undefined);\n    var hourCycle = GetOption(options, 'hourCycle', 'string', ['h11', 'h12', 'h23', 'h24'], undefined);\n    if (hour12 !== undefined) {\n        // @ts-ignore\n        hourCycle = null;\n    }\n    opt.hc = hourCycle;\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    internalSlots.locale = r.locale;\n    calendar = r.ca;\n    internalSlots.calendar = calendar;\n    internalSlots.hourCycle = r.hc;\n    internalSlots.numberingSystem = r.nu;\n    var dataLocale = r.dataLocale;\n    internalSlots.dataLocale = dataLocale;\n    var timeZone = options.timeZone;\n    if (timeZone !== undefined) {\n        timeZone = String(timeZone);\n        if (!IsValidTimeZoneName(timeZone, { tzData: tzData, uppercaseLinks: uppercaseLinks })) {\n            throw new RangeError('Invalid timeZoneName');\n        }\n        timeZone = CanonicalizeTimeZoneName(timeZone, { tzData: tzData, uppercaseLinks: uppercaseLinks });\n    }\n    else {\n        timeZone = getDefaultTimeZone();\n    }\n    internalSlots.timeZone = timeZone;\n    opt = Object.create(null);\n    opt.weekday = GetOption(options, 'weekday', 'string', ['narrow', 'short', 'long'], undefined);\n    opt.era = GetOption(options, 'era', 'string', ['narrow', 'short', 'long'], undefined);\n    opt.year = GetOption(options, 'year', 'string', ['2-digit', 'numeric'], undefined);\n    opt.month = GetOption(options, 'month', 'string', ['2-digit', 'numeric', 'narrow', 'short', 'long'], undefined);\n    opt.day = GetOption(options, 'day', 'string', ['2-digit', 'numeric'], undefined);\n    opt.hour = GetOption(options, 'hour', 'string', ['2-digit', 'numeric'], undefined);\n    opt.minute = GetOption(options, 'minute', 'string', ['2-digit', 'numeric'], undefined);\n    opt.second = GetOption(options, 'second', 'string', ['2-digit', 'numeric'], undefined);\n    opt.timeZoneName = GetOption(options, 'timeZoneName', 'string', ['short', 'long'], undefined);\n    opt.fractionalSecondDigits = GetNumberOption(options, 'fractionalSecondDigits', 1, 3, \n    // @ts-expect-error\n    undefined);\n    var dataLocaleData = localeData[dataLocale];\n    invariant(!!dataLocaleData, \"Missing locale data for \" + dataLocale);\n    var formats = dataLocaleData.formats[calendar];\n    // UNSPECCED: IMPLEMENTATION DETAILS\n    if (!formats) {\n        throw new RangeError(\"Calendar \\\"\" + calendar + \"\\\" is not supported. Try setting \\\"calendar\\\" to 1 of the following: \" + Object.keys(dataLocaleData.formats).join(', '));\n    }\n    var formatMatcher = GetOption(options, 'formatMatcher', 'string', ['basic', 'best fit'], 'best fit');\n    var dateStyle = GetOption(options, 'dateStyle', 'string', ['full', 'long', 'medium', 'short'], undefined);\n    internalSlots.dateStyle = dateStyle;\n    var timeStyle = GetOption(options, 'timeStyle', 'string', ['full', 'long', 'medium', 'short'], undefined);\n    internalSlots.timeStyle = timeStyle;\n    var bestFormat;\n    if (dateStyle === undefined && timeStyle === undefined) {\n        if (formatMatcher === 'basic') {\n            bestFormat = BasicFormatMatcher(opt, formats);\n        }\n        else {\n            // IMPL DETAILS START\n            if (isTimeRelated(opt)) {\n                var hc = resolveHourCycle(internalSlots.hourCycle, dataLocaleData.hourCycle, hour12);\n                opt.hour12 = hc === 'h11' || hc === 'h12';\n            }\n            // IMPL DETAILS END\n            bestFormat = BestFitFormatMatcher(opt, formats);\n        }\n    }\n    else {\n        for (var _i = 0, DATE_TIME_PROPS_1 = DATE_TIME_PROPS; _i < DATE_TIME_PROPS_1.length; _i++) {\n            var prop = DATE_TIME_PROPS_1[_i];\n            var p = opt[prop];\n            if (p !== undefined) {\n                throw new TypeError(\"Intl.DateTimeFormat can't set option \" + prop + \" when \" + (dateStyle ? 'dateStyle' : 'timeStyle') + \" is used\");\n            }\n        }\n        bestFormat = DateTimeStyleFormat(dateStyle, timeStyle, dataLocaleData);\n    }\n    // IMPL DETAIL START\n    // For debugging\n    internalSlots.format = bestFormat;\n    // IMPL DETAIL END\n    for (var prop in opt) {\n        var p = bestFormat[prop];\n        if (p !== undefined) {\n            internalSlots[prop] = p;\n        }\n    }\n    var pattern;\n    var rangePatterns;\n    if (internalSlots.hour !== undefined) {\n        var hc = resolveHourCycle(internalSlots.hourCycle, dataLocaleData.hourCycle, hour12);\n        internalSlots.hourCycle = hc;\n        if (hc === 'h11' || hc === 'h12') {\n            pattern = bestFormat.pattern12;\n            rangePatterns = bestFormat.rangePatterns12;\n        }\n        else {\n            pattern = bestFormat.pattern;\n            rangePatterns = bestFormat.rangePatterns;\n        }\n    }\n    else {\n        // @ts-ignore\n        internalSlots.hourCycle = undefined;\n        pattern = bestFormat.pattern;\n        rangePatterns = bestFormat.rangePatterns;\n    }\n    internalSlots.pattern = pattern;\n    internalSlots.rangePatterns = rangePatterns;\n    return dtf;\n}\n","/**\n * This follows https://tc39.es/ecma402/#sec-case-sensitivity-and-case-mapping\n * @param str string to convert\n */\nfunction toUpperCase(str) {\n    return str.replace(/([a-z])/g, function (_, c) { return c.toUpperCase(); });\n}\nvar NOT_A_Z_REGEX = /[^A-Z]/;\n/**\n * https://tc39.es/ecma402/#sec-iswellformedcurrencycode\n */\nexport function IsWellFormedCurrencyCode(currency) {\n    currency = toUpperCase(currency);\n    if (currency.length !== 3) {\n        return false;\n    }\n    if (NOT_A_Z_REGEX.test(currency)) {\n        return false;\n    }\n    return true;\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { invariant } from '../utils';\nimport { IsWellFormedCurrencyCode } from '../IsWellFormedCurrencyCode';\nvar UNICODE_REGION_SUBTAG_REGEX = /^([a-z]{2}|[0-9]{3})$/i;\nvar ALPHA_4 = /^[a-z]{4}$/i;\nfunction isUnicodeRegionSubtag(region) {\n    return UNICODE_REGION_SUBTAG_REGEX.test(region);\n}\nfunction isUnicodeScriptSubtag(script) {\n    return ALPHA_4.test(script);\n}\nexport function CanonicalCodeForDisplayNames(type, code) {\n    if (type === 'language') {\n        return CanonicalizeLocaleList([code])[0];\n    }\n    if (type === 'region') {\n        if (!isUnicodeRegionSubtag(code)) {\n            throw RangeError('invalid region');\n        }\n        return code.toUpperCase();\n    }\n    if (type === 'script') {\n        if (!isUnicodeScriptSubtag(code)) {\n            throw RangeError('invalid script');\n        }\n        return \"\" + code[0].toUpperCase() + code.slice(1).toLowerCase();\n    }\n    invariant(type === 'currency', 'invalid type');\n    if (!IsWellFormedCurrencyCode(code)) {\n        throw RangeError('invalid currency');\n    }\n    return code.toUpperCase();\n}\n","/**\n * https://tc39.es/ecma402/#sec-getoptionsobject\n * @param options\n * @returns\n */\nexport function GetOptionsObject(options) {\n    if (typeof options === 'undefined') {\n        return Object.create(null);\n    }\n    if (typeof options === 'object') {\n        return options;\n    }\n    throw new TypeError('Options must be an object');\n}\n","/**\n * https://tc39.es/ecma402/#table-sanctioned-simple-unit-identifiers\n */\nexport var SANCTIONED_UNITS = [\n    'angle-degree',\n    'area-acre',\n    'area-hectare',\n    'concentr-percent',\n    'digital-bit',\n    'digital-byte',\n    'digital-gigabit',\n    'digital-gigabyte',\n    'digital-kilobit',\n    'digital-kilobyte',\n    'digital-megabit',\n    'digital-megabyte',\n    'digital-petabyte',\n    'digital-terabit',\n    'digital-terabyte',\n    'duration-day',\n    'duration-hour',\n    'duration-millisecond',\n    'duration-minute',\n    'duration-month',\n    'duration-second',\n    'duration-week',\n    'duration-year',\n    'length-centimeter',\n    'length-foot',\n    'length-inch',\n    'length-kilometer',\n    'length-meter',\n    'length-mile-scandinavian',\n    'length-mile',\n    'length-millimeter',\n    'length-yard',\n    'mass-gram',\n    'mass-kilogram',\n    'mass-ounce',\n    'mass-pound',\n    'mass-stone',\n    'temperature-celsius',\n    'temperature-fahrenheit',\n    'volume-fluid-ounce',\n    'volume-gallon',\n    'volume-liter',\n    'volume-milliliter',\n];\n// In CLDR, the unit name always follows the form `namespace-unit` pattern.\n// For example: `digital-bit` instead of `bit`. This function removes the namespace prefix.\nexport function removeUnitNamespace(unit) {\n    return unit.slice(unit.indexOf('-') + 1);\n}\n/**\n * https://tc39.es/ecma402/#table-sanctioned-simple-unit-identifiers\n */\nexport var SIMPLE_UNITS = SANCTIONED_UNITS.map(removeUnitNamespace);\n/**\n * https://tc39.es/ecma402/#sec-issanctionedsimpleunitidentifier\n */\nexport function IsSanctionedSimpleUnitIdentifier(unitIdentifier) {\n    return SIMPLE_UNITS.indexOf(unitIdentifier) > -1;\n}\n","import { IsSanctionedSimpleUnitIdentifier } from './IsSanctionedSimpleUnitIdentifier';\n/**\n * This follows https://tc39.es/ecma402/#sec-case-sensitivity-and-case-mapping\n * @param str string to convert\n */\nfunction toLowerCase(str) {\n    return str.replace(/([A-Z])/g, function (_, c) { return c.toLowerCase(); });\n}\n/**\n * https://tc39.es/ecma402/#sec-iswellformedunitidentifier\n * @param unit\n */\nexport function IsWellFormedUnitIdentifier(unit) {\n    unit = toLowerCase(unit);\n    if (IsSanctionedSimpleUnitIdentifier(unit)) {\n        return true;\n    }\n    var units = unit.split('-per-');\n    if (units.length !== 2) {\n        return false;\n    }\n    var numerator = units[0], denominator = units[1];\n    if (!IsSanctionedSimpleUnitIdentifier(numerator) ||\n        !IsSanctionedSimpleUnitIdentifier(denominator)) {\n        return false;\n    }\n    return true;\n}\n","/**\n * The abstract operation ComputeExponentForMagnitude computes an exponent by which to scale a\n * number of the given magnitude (power of ten of the most significant digit) according to the\n * locale and the desired notation (scientific, engineering, or compact).\n */\nexport function ComputeExponentForMagnitude(numberFormat, magnitude, _a) {\n    var getInternalSlots = _a.getInternalSlots;\n    var internalSlots = getInternalSlots(numberFormat);\n    var notation = internalSlots.notation, dataLocaleData = internalSlots.dataLocaleData, numberingSystem = internalSlots.numberingSystem;\n    switch (notation) {\n        case 'standard':\n            return 0;\n        case 'scientific':\n            return magnitude;\n        case 'engineering':\n            return Math.floor(magnitude / 3) * 3;\n        default: {\n            // Let exponent be an implementation- and locale-dependent (ILD) integer by which to scale a\n            // number of the given magnitude in compact notation for the current locale.\n            var compactDisplay = internalSlots.compactDisplay, style = internalSlots.style, currencyDisplay = internalSlots.currencyDisplay;\n            var thresholdMap = void 0;\n            if (style === 'currency' && currencyDisplay !== 'name') {\n                var currency = dataLocaleData.numbers.currency[numberingSystem] ||\n                    dataLocaleData.numbers.currency[dataLocaleData.numbers.nu[0]];\n                thresholdMap = currency.short;\n            }\n            else {\n                var decimal = dataLocaleData.numbers.decimal[numberingSystem] ||\n                    dataLocaleData.numbers.decimal[dataLocaleData.numbers.nu[0]];\n                thresholdMap = compactDisplay === 'long' ? decimal.long : decimal.short;\n            }\n            if (!thresholdMap) {\n                return 0;\n            }\n            var num = String(Math.pow(10, magnitude));\n            var thresholds = Object.keys(thresholdMap); // TODO: this can be pre-processed\n            if (num < thresholds[0]) {\n                return 0;\n            }\n            if (num > thresholds[thresholds.length - 1]) {\n                return thresholds[thresholds.length - 1].length - 1;\n            }\n            var i = thresholds.indexOf(num);\n            if (i === -1) {\n                return 0;\n            }\n            // See https://unicode.org/reports/tr35/tr35-numbers.html#Compact_Number_Formats\n            // Special handling if the pattern is precisely `0`.\n            var magnitudeKey = thresholds[i];\n            // TODO: do we need to handle plural here?\n            var compactPattern = thresholdMap[magnitudeKey].other;\n            if (compactPattern === '0') {\n                return 0;\n            }\n            // Example: in zh-TW, `10000000` maps to `0000萬`. So we need to return 8 - 4 = 4 here.\n            return (magnitudeKey.length -\n                thresholdMap[magnitudeKey].other.match(/0+/)[0].length);\n        }\n    }\n}\n","import { repeat, getMagnitude } from '../utils';\nexport function ToRawPrecision(x, minPrecision, maxPrecision) {\n    var p = maxPrecision;\n    var m;\n    var e;\n    var xFinal;\n    if (x === 0) {\n        m = repeat('0', p);\n        e = 0;\n        xFinal = 0;\n    }\n    else {\n        var xToString = x.toString();\n        // If xToString is formatted as scientific notation, the number is either very small or very\n        // large. If the precision of the formatted string is lower that requested max precision, we\n        // should still infer them from the formatted string, otherwise the formatted result might have\n        // precision loss (e.g. 1e41 will not have 0 in every trailing digits).\n        var xToStringExponentIndex = xToString.indexOf('e');\n        var _a = xToString.split('e'), xToStringMantissa = _a[0], xToStringExponent = _a[1];\n        var xToStringMantissaWithoutDecimalPoint = xToStringMantissa.replace('.', '');\n        if (xToStringExponentIndex >= 0 &&\n            xToStringMantissaWithoutDecimalPoint.length <= p) {\n            e = +xToStringExponent;\n            m =\n                xToStringMantissaWithoutDecimalPoint +\n                    repeat('0', p - xToStringMantissaWithoutDecimalPoint.length);\n            xFinal = x;\n        }\n        else {\n            e = getMagnitude(x);\n            var decimalPlaceOffset = e - p + 1;\n            // n is the integer containing the required precision digits. To derive the formatted string,\n            // we will adjust its decimal place in the logic below.\n            var n = Math.round(adjustDecimalPlace(x, decimalPlaceOffset));\n            // The rounding caused the change of magnitude, so we should increment `e` by 1.\n            if (adjustDecimalPlace(n, p - 1) >= 10) {\n                e = e + 1;\n                // Divide n by 10 to swallow one precision.\n                n = Math.floor(n / 10);\n            }\n            m = n.toString();\n            // Equivalent of n * 10 ** (e - p + 1)\n            xFinal = adjustDecimalPlace(n, p - 1 - e);\n        }\n    }\n    var int;\n    if (e >= p - 1) {\n        m = m + repeat('0', e - p + 1);\n        int = e + 1;\n    }\n    else if (e >= 0) {\n        m = m.slice(0, e + 1) + \".\" + m.slice(e + 1);\n        int = e + 1;\n    }\n    else {\n        m = \"0.\" + repeat('0', -e - 1) + m;\n        int = 1;\n    }\n    if (m.indexOf('.') >= 0 && maxPrecision > minPrecision) {\n        var cut = maxPrecision - minPrecision;\n        while (cut > 0 && m[m.length - 1] === '0') {\n            m = m.slice(0, -1);\n            cut--;\n        }\n        if (m[m.length - 1] === '.') {\n            m = m.slice(0, -1);\n        }\n    }\n    return { formattedString: m, roundedNumber: xFinal, integerDigitsCount: int };\n    // x / (10 ** magnitude), but try to preserve as much floating point precision as possible.\n    function adjustDecimalPlace(x, magnitude) {\n        return magnitude < 0 ? x * Math.pow(10, -magnitude) : x / Math.pow(10, magnitude);\n    }\n}\n","import { repeat } from '../utils';\n/**\n * TODO: dedup with intl-pluralrules and support BigInt\n * https://tc39.es/ecma402/#sec-torawfixed\n * @param x a finite non-negative Number or BigInt\n * @param minFraction and integer between 0 and 20\n * @param maxFraction and integer between 0 and 20\n */\nexport function ToRawFixed(x, minFraction, maxFraction) {\n    var f = maxFraction;\n    var n = Math.round(x * Math.pow(10, f));\n    var xFinal = n / Math.pow(10, f);\n    // n is a positive integer, but it is possible to be greater than 1e21.\n    // In such case we will go the slow path.\n    // See also: https://tc39.es/ecma262/#sec-numeric-types-number-tostring\n    var m;\n    if (n < 1e21) {\n        m = n.toString();\n    }\n    else {\n        m = n.toString();\n        var _a = m.split('e'), mantissa = _a[0], exponent = _a[1];\n        m = mantissa.replace('.', '');\n        m = m + repeat('0', Math.max(+exponent - m.length + 1, 0));\n    }\n    var int;\n    if (f !== 0) {\n        var k = m.length;\n        if (k <= f) {\n            var z = repeat('0', f + 1 - k);\n            m = z + m;\n            k = f + 1;\n        }\n        var a = m.slice(0, k - f);\n        var b = m.slice(k - f);\n        m = a + \".\" + b;\n        int = a.length;\n    }\n    else {\n        int = m.length;\n    }\n    var cut = maxFraction - minFraction;\n    while (cut > 0 && m[m.length - 1] === '0') {\n        m = m.slice(0, -1);\n        cut--;\n    }\n    if (m[m.length - 1] === '.') {\n        m = m.slice(0, -1);\n    }\n    return { formattedString: m, roundedNumber: xFinal, integerDigitsCount: int };\n}\n","import { SameValue } from '../262';\nimport { ToRawPrecision } from './ToRawPrecision';\nimport { repeat } from '../utils';\nimport { ToRawFixed } from './ToRawFixed';\n/**\n * https://tc39.es/ecma402/#sec-formatnumberstring\n */\nexport function FormatNumericToString(intlObject, x) {\n    var isNegative = x < 0 || SameValue(x, -0);\n    if (isNegative) {\n        x = -x;\n    }\n    var result;\n    var rourndingType = intlObject.roundingType;\n    switch (rourndingType) {\n        case 'significantDigits':\n            result = ToRawPrecision(x, intlObject.minimumSignificantDigits, intlObject.maximumSignificantDigits);\n            break;\n        case 'fractionDigits':\n            result = ToRawFixed(x, intlObject.minimumFractionDigits, intlObject.maximumFractionDigits);\n            break;\n        default:\n            result = ToRawPrecision(x, 1, 2);\n            if (result.integerDigitsCount > 1) {\n                result = ToRawFixed(x, 0, 0);\n            }\n            break;\n    }\n    x = result.roundedNumber;\n    var string = result.formattedString;\n    var int = result.integerDigitsCount;\n    var minInteger = intlObject.minimumIntegerDigits;\n    if (int < minInteger) {\n        var forwardZeros = repeat('0', minInteger - int);\n        string = forwardZeros + string;\n    }\n    if (isNegative) {\n        x = -x;\n    }\n    return { roundedNumber: x, formattedString: string };\n}\n","import { getMagnitude } from '../utils';\nimport { ComputeExponentForMagnitude } from './ComputeExponentForMagnitude';\nimport { FormatNumericToString } from './FormatNumericToString';\n/**\n * The abstract operation ComputeExponent computes an exponent (power of ten) by which to scale x\n * according to the number formatting settings. It handles cases such as 999 rounding up to 1000,\n * requiring a different exponent.\n *\n * NOT IN SPEC: it returns [exponent, magnitude].\n */\nexport function ComputeExponent(numberFormat, x, _a) {\n    var getInternalSlots = _a.getInternalSlots;\n    if (x === 0) {\n        return [0, 0];\n    }\n    if (x < 0) {\n        x = -x;\n    }\n    var magnitude = getMagnitude(x);\n    var exponent = ComputeExponentForMagnitude(numberFormat, magnitude, {\n        getInternalSlots: getInternalSlots,\n    });\n    // Preserve more precision by doing multiplication when exponent is negative.\n    x = exponent < 0 ? x * Math.pow(10, -exponent) : x / Math.pow(10, exponent);\n    var formatNumberResult = FormatNumericToString(getInternalSlots(numberFormat), x);\n    if (formatNumberResult.roundedNumber === 0) {\n        return [exponent, magnitude];\n    }\n    var newMagnitude = getMagnitude(formatNumberResult.roundedNumber);\n    if (newMagnitude === magnitude - exponent) {\n        return [exponent, magnitude];\n    }\n    return [\n        ComputeExponentForMagnitude(numberFormat, magnitude + 1, {\n            getInternalSlots: getInternalSlots,\n        }),\n        magnitude + 1,\n    ];\n}\n","import { HasOwnProperty } from '../262';\n/**\n * https://tc39.es/ecma402/#sec-currencydigits\n */\nexport function CurrencyDigits(c, _a) {\n    var currencyDigitsData = _a.currencyDigitsData;\n    return HasOwnProperty(currencyDigitsData, c)\n        ? currencyDigitsData[c]\n        : 2;\n}\n","import { ToRawFixed } from './ToRawFixed';\nimport * as digitMapping from './digit-mapping.json';\n// This is from: unicode-12.1.0/General_Category/Symbol/regex.js\n// IE11 does not support unicode flag, otherwise this is just /\\p{S}/u.\nvar S_UNICODE_REGEX = /[\\$\\+<->\\^`\\|~\\xA2-\\xA6\\xA8\\xA9\\xAC\\xAE-\\xB1\\xB4\\xB8\\xD7\\xF7\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u03F6\\u0482\\u058D-\\u058F\\u0606-\\u0608\\u060B\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u07FE\\u07FF\\u09F2\\u09F3\\u09FA\\u09FB\\u0AF1\\u0B70\\u0BF3-\\u0BFA\\u0C7F\\u0D4F\\u0D79\\u0E3F\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u166D\\u17DB\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u2044\\u2052\\u207A-\\u207C\\u208A-\\u208C\\u20A0-\\u20BF\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116-\\u2118\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u2140-\\u2144\\u214A-\\u214D\\u214F\\u218A\\u218B\\u2190-\\u2307\\u230C-\\u2328\\u232B-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u2767\\u2794-\\u27C4\\u27C7-\\u27E5\\u27F0-\\u2982\\u2999-\\u29D7\\u29DC-\\u29FB\\u29FE-\\u2B73\\u2B76-\\u2B95\\u2B98-\\u2BFF\\u2CE5-\\u2CEA\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u309B\\u309C\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uA828-\\uA82B\\uA836-\\uA839\\uAA77-\\uAA79\\uAB5B\\uFB29\\uFBB2-\\uFBC1\\uFDFC\\uFDFD\\uFE62\\uFE64-\\uFE66\\uFE69\\uFF04\\uFF0B\\uFF1C-\\uFF1E\\uFF3E\\uFF40\\uFF5C\\uFF5E\\uFFE0-\\uFFE6\\uFFE8-\\uFFEE\\uFFFC\\uFFFD]|\\uD800[\\uDD37-\\uDD3F\\uDD79-\\uDD89\\uDD8C-\\uDD8E\\uDD90-\\uDD9B\\uDDA0\\uDDD0-\\uDDFC]|\\uD802[\\uDC77\\uDC78\\uDEC8]|\\uD805\\uDF3F|\\uD807[\\uDFD5-\\uDFF1]|\\uD81A[\\uDF3C-\\uDF3F\\uDF45]|\\uD82F\\uDC9C|\\uD834[\\uDC00-\\uDCF5\\uDD00-\\uDD26\\uDD29-\\uDD64\\uDD6A-\\uDD6C\\uDD83\\uDD84\\uDD8C-\\uDDA9\\uDDAE-\\uDDE8\\uDE00-\\uDE41\\uDE45\\uDF00-\\uDF56]|\\uD835[\\uDEC1\\uDEDB\\uDEFB\\uDF15\\uDF35\\uDF4F\\uDF6F\\uDF89\\uDFA9\\uDFC3]|\\uD836[\\uDC00-\\uDDFF\\uDE37-\\uDE3A\\uDE6D-\\uDE74\\uDE76-\\uDE83\\uDE85\\uDE86]|\\uD838[\\uDD4F\\uDEFF]|\\uD83B[\\uDCAC\\uDCB0\\uDD2E\\uDEF0\\uDEF1]|\\uD83C[\\uDC00-\\uDC2B\\uDC30-\\uDC93\\uDCA0-\\uDCAE\\uDCB1-\\uDCBF\\uDCC1-\\uDCCF\\uDCD1-\\uDCF5\\uDD10-\\uDD6C\\uDD70-\\uDDAC\\uDDE6-\\uDE02\\uDE10-\\uDE3B\\uDE40-\\uDE48\\uDE50\\uDE51\\uDE60-\\uDE65\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDED5\\uDEE0-\\uDEEC\\uDEF0-\\uDEFA\\uDF00-\\uDF73\\uDF80-\\uDFD8\\uDFE0-\\uDFEB]|\\uD83E[\\uDC00-\\uDC0B\\uDC10-\\uDC47\\uDC50-\\uDC59\\uDC60-\\uDC87\\uDC90-\\uDCAD\\uDD00-\\uDD0B\\uDD0D-\\uDD71\\uDD73-\\uDD76\\uDD7A-\\uDDA2\\uDDA5-\\uDDAA\\uDDAE-\\uDDCA\\uDDCD-\\uDE53\\uDE60-\\uDE6D\\uDE70-\\uDE73\\uDE78-\\uDE7A\\uDE80-\\uDE82\\uDE90-\\uDE95]/;\n// /^\\p{S}/u\nvar CARET_S_UNICODE_REGEX = new RegExp(\"^\" + S_UNICODE_REGEX.source);\n// /\\p{S}$/u\nvar S_DOLLAR_UNICODE_REGEX = new RegExp(S_UNICODE_REGEX.source + \"$\");\nvar CLDR_NUMBER_PATTERN = /[#0](?:[\\.,][#0]+)*/g;\nexport default function formatToParts(numberResult, data, pl, options) {\n    var sign = numberResult.sign, exponent = numberResult.exponent, magnitude = numberResult.magnitude;\n    var notation = options.notation, style = options.style, numberingSystem = options.numberingSystem;\n    var defaultNumberingSystem = data.numbers.nu[0];\n    // #region Part 1: partition and interpolate the CLDR number pattern.\n    // ----------------------------------------------------------\n    var compactNumberPattern = null;\n    if (notation === 'compact' && magnitude) {\n        compactNumberPattern = getCompactDisplayPattern(numberResult, pl, data, style, options.compactDisplay, options.currencyDisplay, numberingSystem);\n    }\n    // This is used multiple times\n    var nonNameCurrencyPart;\n    if (style === 'currency' && options.currencyDisplay !== 'name') {\n        var byCurrencyDisplay = data.currencies[options.currency];\n        if (byCurrencyDisplay) {\n            switch (options.currencyDisplay) {\n                case 'code':\n                    nonNameCurrencyPart = options.currency;\n                    break;\n                case 'symbol':\n                    nonNameCurrencyPart = byCurrencyDisplay.symbol;\n                    break;\n                default:\n                    nonNameCurrencyPart = byCurrencyDisplay.narrow;\n                    break;\n            }\n        }\n        else {\n            // Fallback for unknown currency\n            nonNameCurrencyPart = options.currency;\n        }\n    }\n    var numberPattern;\n    if (!compactNumberPattern) {\n        // Note: if the style is unit, or is currency and the currency display is name,\n        // its unit parts will be interpolated in part 2. So here we can fallback to decimal.\n        if (style === 'decimal' ||\n            style === 'unit' ||\n            (style === 'currency' && options.currencyDisplay === 'name')) {\n            // Shortcut for decimal\n            var decimalData = data.numbers.decimal[numberingSystem] ||\n                data.numbers.decimal[defaultNumberingSystem];\n            numberPattern = getPatternForSign(decimalData.standard, sign);\n        }\n        else if (style === 'currency') {\n            var currencyData = data.numbers.currency[numberingSystem] ||\n                data.numbers.currency[defaultNumberingSystem];\n            // We replace number pattern part with `0` for easier postprocessing.\n            numberPattern = getPatternForSign(currencyData[options.currencySign], sign);\n        }\n        else {\n            // percent\n            var percentPattern = data.numbers.percent[numberingSystem] ||\n                data.numbers.percent[defaultNumberingSystem];\n            numberPattern = getPatternForSign(percentPattern, sign);\n        }\n    }\n    else {\n        numberPattern = compactNumberPattern;\n    }\n    // Extract the decimal number pattern string. It looks like \"#,##0,00\", which will later be\n    // used to infer decimal group sizes.\n    var decimalNumberPattern = CLDR_NUMBER_PATTERN.exec(numberPattern)[0];\n    // Now we start to substitute patterns\n    // 1. replace strings like `0` and `#,##0.00` with `{0}`\n    // 2. unquote characters (invariant: the quoted characters does not contain the special tokens)\n    numberPattern = numberPattern\n        .replace(CLDR_NUMBER_PATTERN, '{0}')\n        .replace(/'(.)'/g, '$1');\n    // Handle currency spacing (both compact and non-compact).\n    if (style === 'currency' && options.currencyDisplay !== 'name') {\n        var currencyData = data.numbers.currency[numberingSystem] ||\n            data.numbers.currency[defaultNumberingSystem];\n        // See `currencySpacing` substitution rule in TR-35.\n        // Here we always assume the currencyMatch is \"[:^S:]\" and surroundingMatch is \"[:digit:]\".\n        //\n        // Example 1: for pattern \"#,##0.00¤\" with symbol \"US$\", we replace \"¤\" with the symbol,\n        // but insert an extra non-break space before the symbol, because \"[:^S:]\" matches \"U\" in\n        // \"US$\" and \"[:digit:]\" matches the latn numbering system digits.\n        //\n        // Example 2: for pattern \"¤#,##0.00\" with symbol \"US$\", there is no spacing between symbol\n        // and number, because `$` does not match \"[:^S:]\".\n        //\n        // Implementation note: here we do the best effort to infer the insertion.\n        // We also assume that `beforeInsertBetween` and `afterInsertBetween` will never be `;`.\n        var afterCurrency = currencyData.currencySpacing.afterInsertBetween;\n        if (afterCurrency && !S_DOLLAR_UNICODE_REGEX.test(nonNameCurrencyPart)) {\n            numberPattern = numberPattern.replace('¤{0}', \"\\u00A4\" + afterCurrency + \"{0}\");\n        }\n        var beforeCurrency = currencyData.currencySpacing.beforeInsertBetween;\n        if (beforeCurrency && !CARET_S_UNICODE_REGEX.test(nonNameCurrencyPart)) {\n            numberPattern = numberPattern.replace('{0}¤', \"{0}\" + beforeCurrency + \"\\u00A4\");\n        }\n    }\n    // The following tokens are special: `{0}`, `¤`, `%`, `-`, `+`, `{c:...}.\n    var numberPatternParts = numberPattern.split(/({c:[^}]+}|\\{0\\}|[¤%\\-\\+])/g);\n    var numberParts = [];\n    var symbols = data.numbers.symbols[numberingSystem] ||\n        data.numbers.symbols[defaultNumberingSystem];\n    for (var _i = 0, numberPatternParts_1 = numberPatternParts; _i < numberPatternParts_1.length; _i++) {\n        var part = numberPatternParts_1[_i];\n        if (!part) {\n            continue;\n        }\n        switch (part) {\n            case '{0}': {\n                // We only need to handle scientific and engineering notation here.\n                numberParts.push.apply(numberParts, paritionNumberIntoParts(symbols, numberResult, notation, exponent, numberingSystem, \n                // If compact number pattern exists, do not insert group separators.\n                !compactNumberPattern && options.useGrouping, decimalNumberPattern));\n                break;\n            }\n            case '-':\n                numberParts.push({ type: 'minusSign', value: symbols.minusSign });\n                break;\n            case '+':\n                numberParts.push({ type: 'plusSign', value: symbols.plusSign });\n                break;\n            case '%':\n                numberParts.push({ type: 'percentSign', value: symbols.percentSign });\n                break;\n            case '¤':\n                // Computed above when handling currency spacing.\n                numberParts.push({ type: 'currency', value: nonNameCurrencyPart });\n                break;\n            default:\n                if (/^\\{c:/.test(part)) {\n                    numberParts.push({\n                        type: 'compact',\n                        value: part.substring(3, part.length - 1),\n                    });\n                }\n                else {\n                    // literal\n                    numberParts.push({ type: 'literal', value: part });\n                }\n                break;\n        }\n    }\n    // #endregion\n    // #region Part 2: interpolate unit pattern if necessary.\n    // ----------------------------------------------\n    switch (style) {\n        case 'currency': {\n            // `currencyDisplay: 'name'` has similar pattern handling as units.\n            if (options.currencyDisplay === 'name') {\n                var unitPattern = (data.numbers.currency[numberingSystem] ||\n                    data.numbers.currency[defaultNumberingSystem]).unitPattern;\n                // Select plural\n                var unitName = void 0;\n                var currencyNameData = data.currencies[options.currency];\n                if (currencyNameData) {\n                    unitName = selectPlural(pl, numberResult.roundedNumber * Math.pow(10, exponent), currencyNameData.displayName);\n                }\n                else {\n                    // Fallback for unknown currency\n                    unitName = options.currency;\n                }\n                // Do {0} and {1} substitution\n                var unitPatternParts = unitPattern.split(/(\\{[01]\\})/g);\n                var result = [];\n                for (var _a = 0, unitPatternParts_1 = unitPatternParts; _a < unitPatternParts_1.length; _a++) {\n                    var part = unitPatternParts_1[_a];\n                    switch (part) {\n                        case '{0}':\n                            result.push.apply(result, numberParts);\n                            break;\n                        case '{1}':\n                            result.push({ type: 'currency', value: unitName });\n                            break;\n                        default:\n                            if (part) {\n                                result.push({ type: 'literal', value: part });\n                            }\n                            break;\n                    }\n                }\n                return result;\n            }\n            else {\n                return numberParts;\n            }\n        }\n        case 'unit': {\n            var unit = options.unit, unitDisplay = options.unitDisplay;\n            var unitData = data.units.simple[unit];\n            var unitPattern = void 0;\n            if (unitData) {\n                // Simple unit pattern\n                unitPattern = selectPlural(pl, numberResult.roundedNumber * Math.pow(10, exponent), data.units.simple[unit][unitDisplay]);\n            }\n            else {\n                // See: http://unicode.org/reports/tr35/tr35-general.html#perUnitPatterns\n                // If cannot find unit in the simple pattern, it must be \"per\" compound pattern.\n                // Implementation note: we are not following TR-35 here because we need to format to parts!\n                var _b = unit.split('-per-'), numeratorUnit = _b[0], denominatorUnit = _b[1];\n                unitData = data.units.simple[numeratorUnit];\n                var numeratorUnitPattern = selectPlural(pl, numberResult.roundedNumber * Math.pow(10, exponent), data.units.simple[numeratorUnit][unitDisplay]);\n                var perUnitPattern = data.units.simple[denominatorUnit].perUnit[unitDisplay];\n                if (perUnitPattern) {\n                    // perUnitPattern exists, combine it with numeratorUnitPattern\n                    unitPattern = perUnitPattern.replace('{0}', numeratorUnitPattern);\n                }\n                else {\n                    // get compoundUnit pattern (e.g. \"{0} per {1}\"), repalce {0} with numerator pattern and {1} with\n                    // the denominator pattern in singular form.\n                    var perPattern = data.units.compound.per[unitDisplay];\n                    var denominatorPattern = selectPlural(pl, 1, data.units.simple[denominatorUnit][unitDisplay]);\n                    unitPattern = unitPattern = perPattern\n                        .replace('{0}', numeratorUnitPattern)\n                        .replace('{1}', denominatorPattern.replace('{0}', ''));\n                }\n            }\n            var result = [];\n            // We need spacing around \"{0}\" because they are not treated as \"unit\" parts, but \"literal\".\n            for (var _c = 0, _d = unitPattern.split(/(\\s*\\{0\\}\\s*)/); _c < _d.length; _c++) {\n                var part = _d[_c];\n                var interpolateMatch = /^(\\s*)\\{0\\}(\\s*)$/.exec(part);\n                if (interpolateMatch) {\n                    // Space before \"{0}\"\n                    if (interpolateMatch[1]) {\n                        result.push({ type: 'literal', value: interpolateMatch[1] });\n                    }\n                    // \"{0}\" itself\n                    result.push.apply(result, numberParts);\n                    // Space after \"{0}\"\n                    if (interpolateMatch[2]) {\n                        result.push({ type: 'literal', value: interpolateMatch[2] });\n                    }\n                }\n                else if (part) {\n                    result.push({ type: 'unit', value: part });\n                }\n            }\n            return result;\n        }\n        default:\n            return numberParts;\n    }\n    // #endregion\n}\n// A subset of https://tc39.es/ecma402/#sec-partitionnotationsubpattern\n// Plus the exponent parts handling.\nfunction paritionNumberIntoParts(symbols, numberResult, notation, exponent, numberingSystem, useGrouping, \n/**\n * This is the decimal number pattern without signs or symbols.\n * It is used to infer the group size when `useGrouping` is true.\n *\n * A typical value looks like \"#,##0.00\" (primary group size is 3).\n * Some locales like Hindi has secondary group size of 2 (e.g. \"#,##,##0.00\").\n */\ndecimalNumberPattern) {\n    var result = [];\n    // eslint-disable-next-line prefer-const\n    var n = numberResult.formattedString, x = numberResult.roundedNumber;\n    if (isNaN(x)) {\n        return [{ type: 'nan', value: n }];\n    }\n    else if (!isFinite(x)) {\n        return [{ type: 'infinity', value: n }];\n    }\n    var digitReplacementTable = digitMapping[numberingSystem];\n    if (digitReplacementTable) {\n        n = n.replace(/\\d/g, function (digit) { return digitReplacementTable[+digit] || digit; });\n    }\n    // TODO: Else use an implementation dependent algorithm to map n to the appropriate\n    // representation of n in the given numbering system.\n    var decimalSepIndex = n.indexOf('.');\n    var integer;\n    var fraction;\n    if (decimalSepIndex > 0) {\n        integer = n.slice(0, decimalSepIndex);\n        fraction = n.slice(decimalSepIndex + 1);\n    }\n    else {\n        integer = n;\n    }\n    // #region Grouping integer digits\n    // The weird compact and x >= 10000 check is to ensure consistency with Node.js and Chrome.\n    // Note that `de` does not have compact form for thousands, but Node.js does not insert grouping separator\n    // unless the rounded number is greater than 10000:\n    //   NumberFormat('de', {notation: 'compact', compactDisplay: 'short'}).format(1234) //=> \"1234\"\n    //   NumberFormat('de').format(1234) //=> \"1.234\"\n    if (useGrouping && (notation !== 'compact' || x >= 10000)) {\n        var groupSepSymbol = symbols.group;\n        var groups = [];\n        // > There may be two different grouping sizes: The primary grouping size used for the least\n        // > significant integer group, and the secondary grouping size used for more significant groups.\n        // > If a pattern contains multiple grouping separators, the interval between the last one and the\n        // > end of the integer defines the primary grouping size, and the interval between the last two\n        // > defines the secondary grouping size. All others are ignored.\n        var integerNumberPattern = decimalNumberPattern.split('.')[0];\n        var patternGroups = integerNumberPattern.split(',');\n        var primaryGroupingSize = 3;\n        var secondaryGroupingSize = 3;\n        if (patternGroups.length > 1) {\n            primaryGroupingSize = patternGroups[patternGroups.length - 1].length;\n        }\n        if (patternGroups.length > 2) {\n            secondaryGroupingSize = patternGroups[patternGroups.length - 2].length;\n        }\n        var i = integer.length - primaryGroupingSize;\n        if (i > 0) {\n            // Slice the least significant integer group\n            groups.push(integer.slice(i, i + primaryGroupingSize));\n            // Then iteratively push the more signicant groups\n            // TODO: handle surrogate pairs in some numbering system digits\n            for (i -= secondaryGroupingSize; i > 0; i -= secondaryGroupingSize) {\n                groups.push(integer.slice(i, i + secondaryGroupingSize));\n            }\n            groups.push(integer.slice(0, i + secondaryGroupingSize));\n        }\n        else {\n            groups.push(integer);\n        }\n        while (groups.length > 0) {\n            var integerGroup = groups.pop();\n            result.push({ type: 'integer', value: integerGroup });\n            if (groups.length > 0) {\n                result.push({ type: 'group', value: groupSepSymbol });\n            }\n        }\n    }\n    else {\n        result.push({ type: 'integer', value: integer });\n    }\n    // #endregion\n    if (fraction !== undefined) {\n        result.push({ type: 'decimal', value: symbols.decimal }, { type: 'fraction', value: fraction });\n    }\n    if ((notation === 'scientific' || notation === 'engineering') &&\n        isFinite(x)) {\n        result.push({ type: 'exponentSeparator', value: symbols.exponential });\n        if (exponent < 0) {\n            result.push({ type: 'exponentMinusSign', value: symbols.minusSign });\n            exponent = -exponent;\n        }\n        var exponentResult = ToRawFixed(exponent, 0, 0);\n        result.push({\n            type: 'exponentInteger',\n            value: exponentResult.formattedString,\n        });\n    }\n    return result;\n}\nfunction getPatternForSign(pattern, sign) {\n    if (pattern.indexOf(';') < 0) {\n        pattern = pattern + \";-\" + pattern;\n    }\n    var _a = pattern.split(';'), zeroPattern = _a[0], negativePattern = _a[1];\n    switch (sign) {\n        case 0:\n            return zeroPattern;\n        case -1:\n            return negativePattern;\n        default:\n            return negativePattern.indexOf('-') >= 0\n                ? negativePattern.replace(/-/g, '+')\n                : \"+\" + zeroPattern;\n    }\n}\n// Find the CLDR pattern for compact notation based on the magnitude of data and style.\n//\n// Example return value: \"¤ {c:laki}000;¤{c:laki} -0\" (`sw` locale):\n// - Notice the `{c:...}` token that wraps the compact literal.\n// - The consecutive zeros are normalized to single zero to match CLDR_NUMBER_PATTERN.\n//\n// Returning null means the compact display pattern cannot be found.\nfunction getCompactDisplayPattern(numberResult, pl, data, style, compactDisplay, currencyDisplay, numberingSystem) {\n    var _a;\n    var roundedNumber = numberResult.roundedNumber, sign = numberResult.sign, magnitude = numberResult.magnitude;\n    var magnitudeKey = String(Math.pow(10, magnitude));\n    var defaultNumberingSystem = data.numbers.nu[0];\n    var pattern;\n    if (style === 'currency' && currencyDisplay !== 'name') {\n        var byNumberingSystem = data.numbers.currency;\n        var currencyData = byNumberingSystem[numberingSystem] ||\n            byNumberingSystem[defaultNumberingSystem];\n        // NOTE: compact notation ignores currencySign!\n        var compactPluralRules = (_a = currencyData.short) === null || _a === void 0 ? void 0 : _a[magnitudeKey];\n        if (!compactPluralRules) {\n            return null;\n        }\n        pattern = selectPlural(pl, roundedNumber, compactPluralRules);\n    }\n    else {\n        var byNumberingSystem = data.numbers.decimal;\n        var byCompactDisplay = byNumberingSystem[numberingSystem] ||\n            byNumberingSystem[defaultNumberingSystem];\n        var compactPlaralRule = byCompactDisplay[compactDisplay][magnitudeKey];\n        if (!compactPlaralRule) {\n            return null;\n        }\n        pattern = selectPlural(pl, roundedNumber, compactPlaralRule);\n    }\n    // See https://unicode.org/reports/tr35/tr35-numbers.html#Compact_Number_Formats\n    // > If the value is precisely “0”, either explicit or defaulted, then the normal number format\n    // > pattern for that sort of object is supplied.\n    if (pattern === '0') {\n        return null;\n    }\n    pattern = getPatternForSign(pattern, sign)\n        // Extract compact literal from the pattern\n        .replace(/([^\\s;\\-\\+\\d¤]+)/g, '{c:$1}')\n        // We replace one or more zeros with a single zero so it matches `CLDR_NUMBER_PATTERN`.\n        .replace(/0+/, '0');\n    return pattern;\n}\nfunction selectPlural(pl, x, rules) {\n    return rules[pl.select(x)] || rules.other;\n}\n","import { FormatNumericToString } from './FormatNumericToString';\nimport { SameValue } from '../262';\nimport { ComputeExponent } from './ComputeExponent';\nimport formatToParts from './format_to_parts';\n/**\n * https://tc39.es/ecma402/#sec-formatnumberstring\n */\nexport function PartitionNumberPattern(numberFormat, x, _a) {\n    var _b;\n    var getInternalSlots = _a.getInternalSlots;\n    var internalSlots = getInternalSlots(numberFormat);\n    var pl = internalSlots.pl, dataLocaleData = internalSlots.dataLocaleData, numberingSystem = internalSlots.numberingSystem;\n    var symbols = dataLocaleData.numbers.symbols[numberingSystem] ||\n        dataLocaleData.numbers.symbols[dataLocaleData.numbers.nu[0]];\n    var magnitude = 0;\n    var exponent = 0;\n    var n;\n    if (isNaN(x)) {\n        n = symbols.nan;\n    }\n    else if (!isFinite(x)) {\n        n = symbols.infinity;\n    }\n    else {\n        if (internalSlots.style === 'percent') {\n            x *= 100;\n        }\n        ;\n        _b = ComputeExponent(numberFormat, x, {\n            getInternalSlots: getInternalSlots,\n        }), exponent = _b[0], magnitude = _b[1];\n        // Preserve more precision by doing multiplication when exponent is negative.\n        x = exponent < 0 ? x * Math.pow(10, -exponent) : x / Math.pow(10, exponent);\n        var formatNumberResult = FormatNumericToString(internalSlots, x);\n        n = formatNumberResult.formattedString;\n        x = formatNumberResult.roundedNumber;\n    }\n    // Based on https://tc39.es/ecma402/#sec-getnumberformatpattern\n    // We need to do this before `x` is rounded.\n    var sign;\n    var signDisplay = internalSlots.signDisplay;\n    switch (signDisplay) {\n        case 'never':\n            sign = 0;\n            break;\n        case 'auto':\n            if (SameValue(x, 0) || x > 0 || isNaN(x)) {\n                sign = 0;\n            }\n            else {\n                sign = -1;\n            }\n            break;\n        case 'always':\n            if (SameValue(x, 0) || x > 0 || isNaN(x)) {\n                sign = 1;\n            }\n            else {\n                sign = -1;\n            }\n            break;\n        default:\n            // x === 0 -> x is 0 or x is -0\n            if (x === 0 || isNaN(x)) {\n                sign = 0;\n            }\n            else if (x > 0) {\n                sign = 1;\n            }\n            else {\n                sign = -1;\n            }\n    }\n    return formatToParts({ roundedNumber: x, formattedString: n, exponent: exponent, magnitude: magnitude, sign: sign }, internalSlots.dataLocaleData, pl, internalSlots);\n}\n","import { PartitionNumberPattern } from './PartitionNumberPattern';\nimport { ArrayCreate } from '../262';\nexport function FormatNumericToParts(nf, x, implDetails) {\n    var parts = PartitionNumberPattern(nf, x, implDetails);\n    var result = ArrayCreate(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result.push({\n            type: part.type,\n            value: part.value,\n        });\n    }\n    return result;\n}\n","import { GetOption } from '../GetOption';\nimport { IsWellFormedCurrencyCode } from '../IsWellFormedCurrencyCode';\nimport { IsWellFormedUnitIdentifier } from '../IsWellFormedUnitIdentifier';\n/**\n * https://tc39.es/ecma402/#sec-setnumberformatunitoptions\n */\nexport function SetNumberFormatUnitOptions(nf, options, _a) {\n    if (options === void 0) { options = Object.create(null); }\n    var getInternalSlots = _a.getInternalSlots;\n    var internalSlots = getInternalSlots(nf);\n    var style = GetOption(options, 'style', 'string', ['decimal', 'percent', 'currency', 'unit'], 'decimal');\n    internalSlots.style = style;\n    var currency = GetOption(options, 'currency', 'string', undefined, undefined);\n    if (currency !== undefined && !IsWellFormedCurrencyCode(currency)) {\n        throw RangeError('Malformed currency code');\n    }\n    if (style === 'currency' && currency === undefined) {\n        throw TypeError('currency cannot be undefined');\n    }\n    var currencyDisplay = GetOption(options, 'currencyDisplay', 'string', ['code', 'symbol', 'narrowSymbol', 'name'], 'symbol');\n    var currencySign = GetOption(options, 'currencySign', 'string', ['standard', 'accounting'], 'standard');\n    var unit = GetOption(options, 'unit', 'string', undefined, undefined);\n    if (unit !== undefined && !IsWellFormedUnitIdentifier(unit)) {\n        throw RangeError('Invalid unit argument for Intl.NumberFormat()');\n    }\n    if (style === 'unit' && unit === undefined) {\n        throw TypeError('unit cannot be undefined');\n    }\n    var unitDisplay = GetOption(options, 'unitDisplay', 'string', ['short', 'narrow', 'long'], 'short');\n    if (style === 'currency') {\n        internalSlots.currency = currency.toUpperCase();\n        internalSlots.currencyDisplay = currencyDisplay;\n        internalSlots.currencySign = currencySign;\n    }\n    if (style === 'unit') {\n        internalSlots.unit = unit;\n        internalSlots.unitDisplay = unitDisplay;\n    }\n}\n","import { GetNumberOption } from '../GetNumberOption';\nimport { DefaultNumberOption } from '../DefaultNumberOption';\n/**\n * https://tc39.es/ecma402/#sec-setnfdigitoptions\n */\nexport function SetNumberFormatDigitOptions(internalSlots, opts, mnfdDefault, mxfdDefault, notation) {\n    var mnid = GetNumberOption(opts, 'minimumIntegerDigits', 1, 21, 1);\n    var mnfd = opts.minimumFractionDigits;\n    var mxfd = opts.maximumFractionDigits;\n    var mnsd = opts.minimumSignificantDigits;\n    var mxsd = opts.maximumSignificantDigits;\n    internalSlots.minimumIntegerDigits = mnid;\n    if (mnsd !== undefined || mxsd !== undefined) {\n        internalSlots.roundingType = 'significantDigits';\n        mnsd = DefaultNumberOption(mnsd, 1, 21, 1);\n        mxsd = DefaultNumberOption(mxsd, mnsd, 21, 21);\n        internalSlots.minimumSignificantDigits = mnsd;\n        internalSlots.maximumSignificantDigits = mxsd;\n    }\n    else if (mnfd !== undefined || mxfd !== undefined) {\n        internalSlots.roundingType = 'fractionDigits';\n        mnfd = DefaultNumberOption(mnfd, 0, 20, mnfdDefault);\n        var mxfdActualDefault = Math.max(mnfd, mxfdDefault);\n        mxfd = DefaultNumberOption(mxfd, mnfd, 20, mxfdActualDefault);\n        internalSlots.minimumFractionDigits = mnfd;\n        internalSlots.maximumFractionDigits = mxfd;\n    }\n    else if (notation === 'compact') {\n        internalSlots.roundingType = 'compactRounding';\n    }\n    else {\n        internalSlots.roundingType = 'fractionDigits';\n        internalSlots.minimumFractionDigits = mnfdDefault;\n        internalSlots.maximumFractionDigits = mxfdDefault;\n    }\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { SetNumberFormatUnitOptions } from './SetNumberFormatUnitOptions';\nimport { CurrencyDigits } from './CurrencyDigits';\nimport { SetNumberFormatDigitOptions } from './SetNumberFormatDigitOptions';\nimport { invariant } from '../utils';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\n/**\n * https://tc39.es/ecma402/#sec-initializenumberformat\n */\nexport function InitializeNumberFormat(nf, locales, opts, _a) {\n    var getInternalSlots = _a.getInternalSlots, localeData = _a.localeData, availableLocales = _a.availableLocales, numberingSystemNames = _a.numberingSystemNames, getDefaultLocale = _a.getDefaultLocale, currencyDigitsData = _a.currencyDigitsData;\n    // @ts-ignore\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var options = CoerceOptionsToObject(opts);\n    var opt = Object.create(null);\n    var matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    opt.localeMatcher = matcher;\n    var numberingSystem = GetOption(options, 'numberingSystem', 'string', undefined, undefined);\n    if (numberingSystem !== undefined &&\n        numberingSystemNames.indexOf(numberingSystem) < 0) {\n        // 8.a. If numberingSystem does not match the Unicode Locale Identifier type nonterminal,\n        // throw a RangeError exception.\n        throw RangeError(\"Invalid numberingSystems: \" + numberingSystem);\n    }\n    opt.nu = numberingSystem;\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, \n    // [[RelevantExtensionKeys]] slot, which is a constant\n    ['nu'], localeData, getDefaultLocale);\n    var dataLocaleData = localeData[r.dataLocale];\n    invariant(!!dataLocaleData, \"Missing locale data for \" + r.dataLocale);\n    var internalSlots = getInternalSlots(nf);\n    internalSlots.locale = r.locale;\n    internalSlots.dataLocale = r.dataLocale;\n    internalSlots.numberingSystem = r.nu;\n    internalSlots.dataLocaleData = dataLocaleData;\n    SetNumberFormatUnitOptions(nf, options, { getInternalSlots: getInternalSlots });\n    var style = internalSlots.style;\n    var mnfdDefault;\n    var mxfdDefault;\n    if (style === 'currency') {\n        var currency = internalSlots.currency;\n        var cDigits = CurrencyDigits(currency, { currencyDigitsData: currencyDigitsData });\n        mnfdDefault = cDigits;\n        mxfdDefault = cDigits;\n    }\n    else {\n        mnfdDefault = 0;\n        mxfdDefault = style === 'percent' ? 0 : 3;\n    }\n    var notation = GetOption(options, 'notation', 'string', ['standard', 'scientific', 'engineering', 'compact'], 'standard');\n    internalSlots.notation = notation;\n    SetNumberFormatDigitOptions(internalSlots, options, mnfdDefault, mxfdDefault, notation);\n    var compactDisplay = GetOption(options, 'compactDisplay', 'string', ['short', 'long'], 'short');\n    if (notation === 'compact') {\n        internalSlots.compactDisplay = compactDisplay;\n    }\n    var useGrouping = GetOption(options, 'useGrouping', 'boolean', undefined, true);\n    internalSlots.useGrouping = useGrouping;\n    var signDisplay = GetOption(options, 'signDisplay', 'string', ['auto', 'never', 'always', 'exceptZero'], 'auto');\n    internalSlots.signDisplay = signDisplay;\n    return nf;\n}\n","import { invariant } from '../utils';\nimport { ToNumber } from '../262';\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-getoperands\n * @param s\n */\nexport function GetOperands(s) {\n    invariant(typeof s === 'string', \"GetOperands should have been called with a string\");\n    var n = ToNumber(s);\n    invariant(isFinite(n), 'n should be finite');\n    var dp = s.indexOf('.');\n    var iv;\n    var f;\n    var v;\n    var fv = '';\n    if (dp === -1) {\n        iv = n;\n        f = 0;\n        v = 0;\n    }\n    else {\n        iv = s.slice(0, dp);\n        fv = s.slice(dp, s.length);\n        f = ToNumber(fv);\n        v = fv.length;\n    }\n    var i = Math.abs(ToNumber(iv));\n    var w;\n    var t;\n    if (f !== 0) {\n        var ft = fv.replace(/0+$/, '');\n        w = ft.length;\n        t = ToNumber(ft);\n    }\n    else {\n        w = 0;\n        t = 0;\n    }\n    return {\n        Number: n,\n        IntegerDigits: i,\n        NumberOfFractionDigits: v,\n        NumberOfFractionDigitsWithoutTrailing: w,\n        FractionDigits: f,\n        FractionDigitsWithoutTrailing: t,\n    };\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { SetNumberFormatDigitOptions } from '../NumberFormat/SetNumberFormatDigitOptions';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\nexport function InitializePluralRules(pl, locales, options, _a) {\n    var availableLocales = _a.availableLocales, relevantExtensionKeys = _a.relevantExtensionKeys, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale, getInternalSlots = _a.getInternalSlots;\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var opt = Object.create(null);\n    var opts = CoerceOptionsToObject(options);\n    var internalSlots = getInternalSlots(pl);\n    internalSlots.initializedPluralRules = true;\n    var matcher = GetOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n    opt.localeMatcher = matcher;\n    internalSlots.type = GetOption(opts, 'type', 'string', ['cardinal', 'ordinal'], 'cardinal');\n    SetNumberFormatDigitOptions(internalSlots, opts, 0, 3, 'standard');\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    internalSlots.locale = r.locale;\n    return pl;\n}\n","import { invariant } from '../utils';\nimport { Type } from '../262';\nimport { FormatNumericToString } from '../NumberFormat/FormatNumericToString';\nimport { GetOperands } from './GetOperands';\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-resolveplural\n * @param pl\n * @param n\n * @param PluralRuleSelect Has to pass in bc it's implementation-specific\n */\nexport function ResolvePlural(pl, n, _a) {\n    var getInternalSlots = _a.getInternalSlots, PluralRuleSelect = _a.PluralRuleSelect;\n    var internalSlots = getInternalSlots(pl);\n    invariant(Type(internalSlots) === 'Object', 'pl has to be an object');\n    invariant('initializedPluralRules' in internalSlots, 'pluralrules must be initialized');\n    invariant(Type(n) === 'Number', 'n must be a number');\n    if (!isFinite(n)) {\n        return 'other';\n    }\n    var locale = internalSlots.locale, type = internalSlots.type;\n    var res = FormatNumericToString(internalSlots, n);\n    var s = res.formattedString;\n    var operands = GetOperands(s);\n    return PluralRuleSelect(locale, type, n, operands);\n}\n","import { invariant } from '../utils';\nimport { Type } from '../262';\n/**\n * https://tc39.es/proposal-intl-relative-time/#sec-singularrelativetimeunit\n * @param unit\n */\nexport function SingularRelativeTimeUnit(unit) {\n    invariant(Type(unit) === 'String', 'unit must be a string');\n    if (unit === 'seconds')\n        return 'second';\n    if (unit === 'minutes')\n        return 'minute';\n    if (unit === 'hours')\n        return 'hour';\n    if (unit === 'days')\n        return 'day';\n    if (unit === 'weeks')\n        return 'week';\n    if (unit === 'months')\n        return 'month';\n    if (unit === 'quarters')\n        return 'quarter';\n    if (unit === 'years')\n        return 'year';\n    if (unit !== 'second' &&\n        unit !== 'minute' &&\n        unit !== 'hour' &&\n        unit !== 'day' &&\n        unit !== 'week' &&\n        unit !== 'month' &&\n        unit !== 'quarter' &&\n        unit !== 'year') {\n        throw new RangeError('invalid unit');\n    }\n    return unit;\n}\n","import { PartitionPattern } from '../PartitionPattern';\nimport { invariant } from '../utils';\nexport function MakePartsList(pattern, unit, parts) {\n    var patternParts = PartitionPattern(pattern);\n    var result = [];\n    for (var _i = 0, patternParts_1 = patternParts; _i < patternParts_1.length; _i++) {\n        var patternPart = patternParts_1[_i];\n        if (patternPart.type === 'literal') {\n            result.push({\n                type: 'literal',\n                value: patternPart.value,\n            });\n        }\n        else {\n            invariant(patternPart.type === '0', \"Malformed pattern \" + pattern);\n            for (var _a = 0, parts_1 = parts; _a < parts_1.length; _a++) {\n                var part = parts_1[_a];\n                result.push({\n                    type: part.type,\n                    value: part.value,\n                    unit: unit,\n                });\n            }\n        }\n    }\n    return result;\n}\n","import { invariant } from '../utils';\nimport { SingularRelativeTimeUnit } from './SingularRelativeTimeUnit';\nimport { MakePartsList } from './MakePartsList';\nimport { ToString, Type, SameValue } from '../262';\nexport function PartitionRelativeTimePattern(rtf, value, unit, _a) {\n    var getInternalSlots = _a.getInternalSlots;\n    invariant(Type(value) === 'Number', \"value must be number, instead got \" + typeof value, TypeError);\n    invariant(Type(unit) === 'String', \"unit must be number, instead got \" + typeof value, TypeError);\n    if (isNaN(value) || !isFinite(value)) {\n        throw new RangeError(\"Invalid value \" + value);\n    }\n    var resolvedUnit = SingularRelativeTimeUnit(unit);\n    var _b = getInternalSlots(rtf), fields = _b.fields, style = _b.style, numeric = _b.numeric, pluralRules = _b.pluralRules, numberFormat = _b.numberFormat;\n    var entry = resolvedUnit;\n    if (style === 'short') {\n        entry = resolvedUnit + \"-short\";\n    }\n    else if (style === 'narrow') {\n        entry = resolvedUnit + \"-narrow\";\n    }\n    if (!(entry in fields)) {\n        entry = resolvedUnit;\n    }\n    var patterns = fields[entry];\n    if (numeric === 'auto') {\n        if (ToString(value) in patterns) {\n            return [\n                {\n                    type: 'literal',\n                    value: patterns[ToString(value)],\n                },\n            ];\n        }\n    }\n    var tl = 'future';\n    if (SameValue(value, -0) || value < 0) {\n        tl = 'past';\n    }\n    var po = patterns[tl];\n    var fv = typeof numberFormat.formatToParts === 'function'\n        ? numberFormat.formatToParts(Math.abs(value))\n        : // TODO: If formatToParts is not supported, we assume the whole formatted\n            // number is a part\n            [\n                {\n                    type: 'literal',\n                    value: numberFormat.format(Math.abs(value)),\n                    unit: unit,\n                },\n            ];\n    var pr = pluralRules.select(value);\n    var pattern = po[pr];\n    return MakePartsList(pattern, resolvedUnit, fv);\n}\n","import { PartitionRelativeTimePattern } from './PartitionRelativeTimePattern';\nexport function FormatRelativeTime(rtf, value, unit, implDetails) {\n    var parts = PartitionRelativeTimePattern(rtf, value, unit, implDetails);\n    var result = '';\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result += part.value;\n    }\n    return result;\n}\n","import { PartitionRelativeTimePattern } from './PartitionRelativeTimePattern';\nimport { ArrayCreate } from '../262';\nexport function FormatRelativeTimeToParts(rtf, value, unit, implDetails) {\n    var parts = PartitionRelativeTimePattern(rtf, value, unit, implDetails);\n    var result = ArrayCreate(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        var o = {\n            type: part.type,\n            value: part.value,\n        };\n        if ('unit' in part) {\n            o.unit = part.unit;\n        }\n        result.push(o);\n    }\n    return result;\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { invariant } from '../utils';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\nvar NUMBERING_SYSTEM_REGEX = /^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;\nexport function InitializeRelativeTimeFormat(rtf, locales, options, _a) {\n    var getInternalSlots = _a.getInternalSlots, availableLocales = _a.availableLocales, relevantExtensionKeys = _a.relevantExtensionKeys, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale;\n    var internalSlots = getInternalSlots(rtf);\n    internalSlots.initializedRelativeTimeFormat = true;\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var opt = Object.create(null);\n    var opts = CoerceOptionsToObject(options);\n    var matcher = GetOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n    opt.localeMatcher = matcher;\n    var numberingSystem = GetOption(opts, \n    // @ts-expect-error TS option is wack\n    'numberingSystem', 'string', undefined, undefined);\n    if (numberingSystem !== undefined) {\n        if (!NUMBERING_SYSTEM_REGEX.test(numberingSystem)) {\n            throw new RangeError(\"Invalid numbering system \" + numberingSystem);\n        }\n    }\n    opt.nu = numberingSystem;\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    var locale = r.locale, nu = r.nu;\n    internalSlots.locale = locale;\n    internalSlots.style = GetOption(opts, 'style', 'string', ['long', 'narrow', 'short'], 'long');\n    internalSlots.numeric = GetOption(opts, 'numeric', 'string', ['always', 'auto'], 'always');\n    var fields = localeData[r.dataLocale];\n    invariant(!!fields, \"Missing locale data for \" + r.dataLocale);\n    internalSlots.fields = fields;\n    internalSlots.numberFormat = new Intl.NumberFormat(locales);\n    internalSlots.pluralRules = new Intl.PluralRules(locales);\n    internalSlots.numberingSystem = nu;\n    return rtf;\n}\n","import { __extends } from \"tslib\";\nvar MissingLocaleDataError = /** @class */ (function (_super) {\n    __extends(MissingLocaleDataError, _super);\n    function MissingLocaleDataError() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'MISSING_LOCALE_DATA';\n        return _this;\n    }\n    return MissingLocaleDataError;\n}(Error));\nexport function isMissingLocaleDataError(e) {\n    return e.type === 'MISSING_LOCALE_DATA';\n}\n","import { ToObject } from './262';\nimport { GetOption } from './GetOption';\nimport { LookupSupportedLocales } from './LookupSupportedLocales';\n/**\n * https://tc39.es/ecma402/#sec-supportedlocales\n * @param availableLocales\n * @param requestedLocales\n * @param options\n */\nexport function SupportedLocales(availableLocales, requestedLocales, options) {\n    var matcher = 'best fit';\n    if (options !== undefined) {\n        options = ToObject(options);\n        matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    }\n    if (matcher === 'best fit') {\n        return LookupSupportedLocales(availableLocales, requestedLocales);\n    }\n    return LookupSupportedLocales(availableLocales, requestedLocales);\n}\n","import { UNICODE_EXTENSION_SEQUENCE_REGEX } from './utils';\nimport { BestAvailableLocale } from './BestAvailableLocale';\n/**\n * https://tc39.es/ecma402/#sec-lookupsupportedlocales\n * @param availableLocales\n * @param requestedLocales\n */\nexport function LookupSupportedLocales(availableLocales, requestedLocales) {\n    var subset = [];\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n        var locale = requestedLocales_1[_i];\n        var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        var availableLocale = BestAvailableLocale(availableLocales, noExtensionLocale);\n        if (availableLocale) {\n            subset.push(availableLocale);\n        }\n    }\n    return subset;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar _1 = tslib_1.__importDefault(require(\"./\"));\nvar should_polyfill_1 = require(\"./should-polyfill\");\nif (should_polyfill_1.shouldPolyfill()) {\n    Object.defineProperty(Intl, 'RelativeTimeFormat', {\n        value: _1.default,\n        writable: true,\n        enumerable: false,\n        configurable: true,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldPolyfill = void 0;\nfunction shouldPolyfill() {\n    return typeof Intl === 'undefined' || !('RelativeTimeFormat' in Intl);\n}\nexports.shouldPolyfill = shouldPolyfill;\n","// Primary language tags for those languages we support\r\nexport const AVAILABLE_LOCALES = {\r\n  en: \"English\",\r\n  \"zh-cn\": \"简体中文\",\r\n  pt: \"Portugês (Brasil)\",\r\n  ja: \"日本語\",\r\n  es: \"Español\",\r\n  ru: \"Pусский\",\r\n  fr: \"Français\",\r\n  ko: \"한국어\",\r\n  de: \"Deutsch\",\r\n  \"zh-tw\": \"繁體中文\"\r\n};\r\n\r\n// Map from alternative primary language tags to those we support\r\nexport const FALLBACK_LOCALES = {\r\n  jp: \"ja\"\r\n};\r\n","import configs from \"./configs\";\r\nimport { AVAILABLE_LOCALES, FALLBACK_LOCALES } from \"../assets/locales/locale_config\";\r\n\r\n// These are set in the admin panel and are only included as fallbacks.\r\nconst defaultLocaleData = {\r\n  \"app-name\": \"App\",\r\n  \"editor-name\": \"Scene Editor\",\r\n  \"contact-email\": \"app@company.com\",\r\n  \"company-name\": \"Company\",\r\n  \"share-hashtag\": \"#app\",\r\n  \"app-description\": \"Gather share and collaborate together in a virtual, private and safe space\",\r\n  \"app-tagline\": \"Private social VR in your web browser\"\r\n};\r\n\r\nconst DEFAULT_LOCALE = \"en\";\r\nconst cachedMessages = new Map();\r\n\r\nlet _locale = DEFAULT_LOCALE;\r\nlet _localeData = defaultLocaleData;\r\n\r\nfunction findLocale(locale) {\r\n  const locales = (() => {\r\n    if (navigator.languages) {\r\n      return [...navigator.languages];\r\n    }\r\n    if (navigator.language) {\r\n      return [navigator.language];\r\n    }\r\n    if (navigator.userLanguage) {\r\n      return [navigator.userLanguage];\r\n    }\r\n  })();\r\n\r\n  if (locale && locale !== \"browser\") {\r\n    locales.unshift(locale);\r\n  }\r\n\r\n  for (let i = 0; i < locales.length; i++) {\r\n    const curLocale = locales[i];\r\n    if (Object.prototype.hasOwnProperty.call(AVAILABLE_LOCALES, curLocale)) {\r\n      return curLocale;\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(FALLBACK_LOCALES, curLocale)) {\r\n      Object.prototype.hasOwnProperty.call(FALLBACK_LOCALES, curLocale);\r\n    }\r\n    // Also check the primary language subtag in case\r\n    // we do not have an entry for full tag\r\n    // See https://en.wikipedia.org/wiki/IETF_language_tag#Syntax_of_language_tags\r\n    // and https://github.com/mozilla/hubs/pull/3350/files#diff-70ef5717d3da03ef288e8d15c2fda32c5237d7f37074421496f22403e4475bf1R16\r\n    const primaryLanguageSubtag = curLocale.split(\"-\")[0].toLowerCase();\r\n    if (Object.prototype.hasOwnProperty.call(AVAILABLE_LOCALES, primaryLanguageSubtag)) {\r\n      return primaryLanguageSubtag;\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(FALLBACK_LOCALES, primaryLanguageSubtag)) {\r\n      return FALLBACK_LOCALES[primaryLanguageSubtag];\r\n    }\r\n  }\r\n  return DEFAULT_LOCALE;\r\n}\r\n\r\nexport function setLocale(locale) {\r\n  const resolvedLocale = findLocale(locale);\r\n\r\n  if (resolvedLocale === DEFAULT_LOCALE) {\r\n    _locale = resolvedLocale;\r\n    _localeData = defaultLocaleData;\r\n    window.dispatchEvent(new CustomEvent(\"locale-updated\"));\r\n  } else {\r\n    if (cachedMessages.has(resolvedLocale)) {\r\n      _locale = resolvedLocale;\r\n      window.dispatchEvent(new CustomEvent(\"locale-updated\"));\r\n    } else {\r\n      import(`../assets/locales/${resolvedLocale}.json`).then(({ default: localeData }) => {\r\n        _locale = resolvedLocale;\r\n        _localeData = { ...defaultLocaleData, ...localeData };\r\n        window.dispatchEvent(new CustomEvent(\"locale-updated\"));\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nconst interval = window.setInterval(() => {\r\n  if (window.APP && window.APP.store) {\r\n    window.clearInterval(interval);\r\n    setLocale(window.APP.store.state.preferences.locale);\r\n    window.APP.store.addEventListener(\"statechanged\", () => {\r\n      setLocale(window.APP.store.state.preferences.locale);\r\n    });\r\n  }\r\n}, 100);\r\n\r\nexport const getLocale = () => {\r\n  return _locale;\r\n};\r\n\r\nexport const getMessage = key => {\r\n  return _localeData[key];\r\n};\r\n\r\n// TODO: This should be removed, lets not inject app config data up front but rather via variables so that defaultMessage works properly.\r\nexport const getMessages = () => {\r\n  if (cachedMessages.has(_locale)) {\r\n    return cachedMessages.get(_locale);\r\n  }\r\n\r\n  // Swap in translations specified via the admin panel\r\n  if (configs.APP_CONFIG && configs.APP_CONFIG.translations && configs.APP_CONFIG.translations[_locale]) {\r\n    const configTranslations = configs.APP_CONFIG.translations[_locale];\r\n    for (const messageKey in configTranslations) {\r\n      if (!Object.prototype.hasOwnProperty.call(configTranslations, messageKey)) continue;\r\n      if (!configTranslations[messageKey]) continue;\r\n      _localeData[messageKey] = configTranslations[messageKey];\r\n    }\r\n  }\r\n\r\n  const entries = [];\r\n  for (const key in _localeData) {\r\n    if (!Object.prototype.hasOwnProperty.call(_localeData, key)) continue;\r\n    entries.push([key, _localeData[key]]);\r\n  }\r\n\r\n  const messages = entries\r\n    .map(([key, message]) => [\r\n      key,\r\n      // Replace nested message keys (e.g. %app-name%) with their messages.\r\n      message.replace(/%([\\w-.]+)%/i, (_match, subkey) => _localeData[subkey])\r\n    ])\r\n    .reduce((acc, entry) => {\r\n      acc[entry[0]] = entry[1];\r\n      return acc;\r\n    }, {});\r\n\r\n  cachedMessages.set(_locale, messages);\r\n  return messages;\r\n};\r\n","import appLogo from \"../assets/images/app-logo.png\";\r\nimport appLogoDark from \"../assets/images/app-logo-dark.png\";\r\nimport companyLogo from \"../assets/images/company-logo.png\";\r\nimport homeHeroBackground from \"../assets/images/home-hero-background-unbranded.png\";\r\nimport sceneEditorLogo from \"../assets/images/editor-logo.png\";\r\nimport { getLocale, getMessage } from \"./i18n\";\r\n\r\n// Read configs from global variable if available, otherwise use the process.env injected from build.\r\nconst configs = {};\r\nlet isAdmin = false;\r\n[\r\n  \"RETICULUM_SERVER\",\r\n  \"THUMBNAIL_SERVER\",\r\n  \"CORS_PROXY_SERVER\",\r\n  \"NON_CORS_PROXY_DOMAINS\",\r\n  \"SENTRY_DSN\",\r\n  \"GA_TRACKING_ID\",\r\n  \"SHORTLINK_DOMAIN\",\r\n  \"BASE_ASSETS_PATH\",\r\n  \"UPLOADS_HOST\"\r\n].forEach(x => {\r\n  const el = document.querySelector(`meta[name='env:${x.toLowerCase()}']`);\r\n  configs[x] = el ? el.getAttribute(\"content\") : process.env[x];\r\n\r\n  const BASE_ASSETS_PATH_KEY = \"BASE_ASSETS_PATH\";\r\n  if (x === BASE_ASSETS_PATH_KEY && configs[BASE_ASSETS_PATH_KEY]) {\r\n    // BASE_ASSETS_PATH might be a relative URL like \"/\" when it is set in\r\n    // .env or .defaults.env when running locally. We need to convert that\r\n    // to an absolute URL.\r\n    if (!configs[BASE_ASSETS_PATH_KEY].startsWith(\"http\")) {\r\n      configs[BASE_ASSETS_PATH_KEY] = new URL(configs[BASE_ASSETS_PATH_KEY], window.location).toString();\r\n    }\r\n\r\n    // eslint-disable-next-line no-undef\r\n    __webpack_public_path__ = configs[BASE_ASSETS_PATH_KEY];\r\n  }\r\n});\r\n\r\n// Custom clients do not use <meta> tags for passing data, so if thumbnail_server meta tag exists, it is not a custom client\r\nconst hasThumbnailServerMetaTag = !!document.querySelector(\"meta[name='env:thumbnail_server']\");\r\nconfigs.IS_LOCAL_OR_CUSTOM_CLIENT = !hasThumbnailServerMetaTag;\r\n\r\n// Also include configs that reticulum injects as a script in the page head.\r\n\r\nconfigs.AVAILABLE_INTEGRATIONS = window.AVAILABLE_INTEGRATIONS || {};\r\n\r\nif (process.env.APP_CONFIG) {\r\n  window.APP_CONFIG = process.env.APP_CONFIG;\r\n}\r\n\r\nif (window.APP_CONFIG) {\r\n  configs.APP_CONFIG = window.APP_CONFIG;\r\n  const { theme } = configs.APP_CONFIG;\r\n  if (theme) {\r\n    const colorVars = [];\r\n    for (const key in theme) {\r\n      if (!Object.prototype.hasOwnProperty.call(theme, key)) continue;\r\n      colorVars.push(`--${key}: ${theme[key]};`);\r\n    }\r\n    const style = document.createElement(\"style\");\r\n    style.innerHTML = `:root{${colorVars.join(\"\\n\")}}`;\r\n    document.head.insertBefore(style, document.head.firstChild);\r\n  }\r\n\r\n  if (!configs.APP_CONFIG.features) {\r\n    configs.APP_CONFIG.features = {};\r\n  }\r\n} else {\r\n  configs.APP_CONFIG = {\r\n    features: {}\r\n  };\r\n}\r\n\r\nconst isLocalDevelopment = process.env.NODE_ENV === \"development\";\r\n\r\nconfigs.feature = featureName => {\r\n  const value = configs.APP_CONFIG && configs.APP_CONFIG.features && configs.APP_CONFIG.features[featureName];\r\n  if (typeof value === \"boolean\" || featureName === \"enable_spoke\") {\r\n    const forceEnableSpoke = featureName === \"enable_spoke\" && isAdmin;\r\n    return forceEnableSpoke || value;\r\n  } else {\r\n    return value;\r\n  }\r\n};\r\n\r\nlet localDevImages = {};\r\nif (isLocalDevelopment) {\r\n  localDevImages = {\r\n    logo: appLogo,\r\n    logo_dark: appLogoDark,\r\n    company_logo: companyLogo,\r\n    editor_logo: sceneEditorLogo,\r\n    home_background: homeHeroBackground\r\n  };\r\n}\r\n\r\nconfigs.image = (imageName, cssUrl) => {\r\n  const url =\r\n    (configs.APP_CONFIG && configs.APP_CONFIG.images && configs.APP_CONFIG.images[imageName]) ||\r\n    localDevImages[imageName];\r\n  return url && cssUrl ? `url(${url})` : url;\r\n};\r\n\r\nconfigs.link = (linkName, defaultValue) => {\r\n  return (configs.APP_CONFIG && configs.APP_CONFIG.links && configs.APP_CONFIG.links[linkName]) || defaultValue;\r\n};\r\n\r\nconfigs.setIsAdmin = _isAdmin => {\r\n  isAdmin = _isAdmin;\r\n};\r\nconfigs.isAdmin = () => isAdmin;\r\n\r\nconfigs.integration = integration => {\r\n  const availableIntegrations = configs.AVAILABLE_INTEGRATIONS;\r\n  // AVAILABLE_INTEGRATIONS has no properties defined on the dev server, but does support all integrations.\r\n  return (\r\n    !Object.prototype.hasOwnProperty.call(availableIntegrations, integration) || availableIntegrations[integration]\r\n  );\r\n};\r\n\r\nconfigs.translation = key => {\r\n  const locale = getLocale();\r\n  const translationsConfig = (configs.APP_CONFIG && configs.APP_CONFIG.translations) || {};\r\n\r\n  return (\r\n    (translationsConfig[locale] && translationsConfig[locale][key]) ||\r\n    (translationsConfig.en && translationsConfig.en[key]) ||\r\n    getMessage(key) ||\r\n    \"\"\r\n  );\r\n};\r\n\r\nexport default configs;\r\n","var isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nexport default deepmerge_1;\n","const qs = new URLSearchParams(location.search);\r\n\r\nexport default function qsTruthy(param) {\r\n  const val = qs.get(param);\r\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\r\n  return val === \"\" || /1|on|true|yes/i.test(val);\r\n}\r\n\r\nexport function qsGet(param) {\r\n  return qs.get(param);\r\n}\r\n","// from https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\r\nfunction detectTouchScreen() {\r\n  let hasTouchScreen = false;\r\n  if (\"maxTouchPoints\" in navigator) {\r\n    hasTouchScreen = navigator.maxTouchPoints > 0;\r\n  } else if (\"msMaxTouchPoints\" in navigator) {\r\n    hasTouchScreen = navigator.msMaxTouchPoints > 0;\r\n  } else {\r\n    const mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\r\n    if (mQ && mQ.media === \"(pointer:coarse)\") {\r\n      hasTouchScreen = !!mQ.matches;\r\n    } else if (\"orientation\" in window) {\r\n      hasTouchScreen = true; // deprecated, but good fallback\r\n    } else {\r\n      // Only as a last resort, fall back to user agent sniffing\r\n      const UA = navigator.userAgent;\r\n      hasTouchScreen =\r\n        /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) || /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA);\r\n    }\r\n  }\r\n  return hasTouchScreen;\r\n}\r\n\r\nlet hackyMobileSafariTestValue = null;\r\n\r\n// HACK for https://github.com/mozilla/hubs/issues/1813\r\n// Touchscreen controls depend on iPad and iPhone detection,\r\n// which recently regressed. For UA matching \"Macintosh\", enable\r\n// touchscreen controls if there exists a touchscreen.\r\n// We cannot always enable touchscreen controls when a touchscreen\r\n// is present until we fix conflicts between simultaneous mouse\r\n// and touchscreen interactions.\r\nexport function hackyMobileSafariTest() {\r\n  if (hackyMobileSafariTestValue === null) {\r\n    hackyMobileSafariTestValue = /\\b(Macintosh|iPad|iPhone)\\b/i.test(navigator.userAgent) && detectTouchScreen();\r\n  }\r\n\r\n  return hackyMobileSafariTestValue;\r\n  // e.g. Match\r\n  // Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.1 Safari/605.1.15\r\n  // but not\r\n  // \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36\"\r\n}\r\n","import { hackyMobileSafariTest } from \"./detect-touchscreen\";\r\n\r\nconst MOBILE_RE =\r\n  /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\r\nconst TABLET_RE =\r\n  /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;\r\n\r\nexport function isAndroid() {\r\n  return /Android/.test(window.navigator.userAgent);\r\n}\r\n\r\n// from https://stackoverflow.com/questions/57776001/how-to-detect-ipad-pro-as-ipad-using-javascript\r\nfunction isIpadOS() {\r\n  return window.navigator.maxTouchPoints && window.navigator.maxTouchPoints > 2 && /MacIntel/.test(navigator.platform);\r\n}\r\n\r\n// lifted from https://github.com/aframevr/aframe/blob/master/src/utils/device.js to ensure consistency\r\nexport function isIOS() {\r\n  return /iPad|iPhone|iPod/.test(window.navigator.platform) || isIpadOS();\r\n}\r\n\r\nfunction isTablet(mockUserAgent) {\r\n  const userAgent = mockUserAgent || window.navigator.userAgent;\r\n  return isIpadOS() || /ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(userAgent);\r\n}\r\n\r\nfunction isR7() {\r\n  return /R7 Build/.test(window.navigator.userAgent);\r\n}\r\n\r\nfunction isOculusBrowser() {\r\n  return /(OculusBrowser)/i.test(window.navigator.userAgent);\r\n}\r\n\r\nfunction isFirefoxReality() {\r\n  return /(Mobile VR)/i.test(window.navigator.userAgent);\r\n}\r\n\r\nexport function isMobileVR() {\r\n  return isOculusBrowser() || isFirefoxReality();\r\n}\r\n\r\nconst isMobile = (function () {\r\n  let _isMobile = false;\r\n  (function (a) {\r\n    // eslint-disable-next-line no-useless-escape\r\n    if (MOBILE_RE.test(a) || TABLET_RE.test(a.substr(0, 4))) {\r\n      _isMobile = true;\r\n    }\r\n    if (isIOS() || isTablet() || isR7()) {\r\n      _isMobile = true;\r\n    }\r\n    if (hackyMobileSafariTest()) {\r\n      _isMobile = true;\r\n    }\r\n    if (isMobileVR()) {\r\n      _isMobile = false;\r\n    }\r\n  })(window.navigator.userAgent || window.navigator.vendor || window.opera);\r\n\r\n  return function () {\r\n    return _isMobile;\r\n  };\r\n})();\r\n\r\nexport default isMobile;\r\n","import { Socket } from \"phoenix\";\r\nimport { generateHubName } from \"../utils/name-generation\";\r\nimport configs from \"../utils/configs\";\r\nimport { sleep } from \"../utils/async-utils\";\r\nimport { store } from \"../utils/store-instance\";\r\n\r\nexport function hasReticulumServer() {\r\n  return !!configs.RETICULUM_SERVER;\r\n}\r\n\r\nexport function isLocalClient() {\r\n  return hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER;\r\n}\r\n\r\nexport function hubUrl(hubId, extraParams, slug, waypoint) {\r\n  if (!hubId) {\r\n    if (isLocalClient()) {\r\n      hubId = new URLSearchParams(location.search).get(\"hub_id\");\r\n    } else {\r\n      hubId = location.pathname.split(\"/\")[1];\r\n    }\r\n  }\r\n\r\n  let url;\r\n  if (isLocalClient()) {\r\n    url = new URL(`/hub.html`, location.href);\r\n    url.searchParams.set(\"hub_id\", hubId);\r\n  } else {\r\n    const maybeSlug = slug ? `/${slug}` : \"\";\r\n    url = new URL(`/${hubId}${maybeSlug}`, location.href);\r\n  }\r\n\r\n  for (const key in extraParams) {\r\n    if (Object.prototype.hasOwnProperty.call(extraParams, key)) {\r\n      url.searchParams.set(key, extraParams[key]);\r\n    }\r\n  }\r\n\r\n  if (waypoint) {\r\n    url.hash = waypoint;\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\nconst resolverLink = document.createElement(\"a\");\r\nlet reticulumMeta = null;\r\nlet invalidatedReticulumMetaThisSession = false;\r\n\r\nexport function getReticulumFetchUrl(path, absolute = false, host = null, port = null) {\r\n  if (host || hasReticulumServer()) {\r\n    return `https://${host || configs.RETICULUM_SERVER}${port ? `:${port}` : \"\"}${path}`;\r\n  } else if (absolute) {\r\n    resolverLink.href = path;\r\n    return resolverLink.href;\r\n  } else {\r\n    return path;\r\n  }\r\n}\r\n\r\nexport function getUploadsUrl(path, absolute = false, host = null, port = null) {\r\n  // If the Hubs Cloud stack is configured to use Cloudflare, we need to ignore the configured UPLOADS_HOST\r\n  // since reticulum will only serve uploads via the Cloudflare worker. BASE_ASSETS_PATH will have been\r\n  // correctly configured to use the Cloudflare worker, though we only need the hostname,\r\n  // not the full assets URL.\r\n  const isUsingCloudflare = configs.BASE_ASSETS_PATH.includes(\"workers.dev\");\r\n  const uploadsHost = isUsingCloudflare ? new URL(configs.BASE_ASSETS_PATH).hostname : configs.UPLOADS_HOST;\r\n  return uploadsHost\r\n    ? `https://${uploadsHost}${port ? `:${port}` : \"\"}${path}`\r\n    : getReticulumFetchUrl(path, absolute, host, port);\r\n}\r\n\r\nexport async function getReticulumMeta() {\r\n  if (!reticulumMeta) {\r\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\r\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\r\n      reticulumMeta = {\r\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\r\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\r\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\r\n      };\r\n    } else {\r\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\r\n        reticulumMeta = await res.json();\r\n      });\r\n    }\r\n  }\r\n\r\n  const qs = new URLSearchParams(location.search);\r\n  const phxHostOverride = qs.get(\"phx_host\");\r\n\r\n  if (phxHostOverride) {\r\n    reticulumMeta.phx_host = phxHostOverride;\r\n  }\r\n\r\n  return reticulumMeta;\r\n}\r\n\r\nlet directReticulumHostAndPort;\r\n\r\nasync function refreshDirectReticulumHostAndPort() {\r\n  const qs = new URLSearchParams(location.search);\r\n  let host = qs.get(\"phx_host\");\r\n  const reticulumMeta = await getReticulumMeta();\r\n  host = host || configs.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\r\n  const port =\r\n    qs.get(\"phx_port\") ||\r\n    (hasReticulumServer() ? new URL(`${document.location.protocol}//${configs.RETICULUM_SERVER}`).port : \"443\");\r\n  directReticulumHostAndPort = { host, port };\r\n}\r\n\r\nexport function getDirectReticulumFetchUrl(path, absolute = false) {\r\n  if (!directReticulumHostAndPort) {\r\n    console.warn(\"Cannot call getDirectReticulumFetchUrl before connectToReticulum. Returning non-direct url.\");\r\n    return getReticulumFetchUrl(path, absolute);\r\n  }\r\n\r\n  const { host, port } = directReticulumHostAndPort;\r\n  return getReticulumFetchUrl(path, absolute, host, port);\r\n}\r\n\r\nexport async function invalidateReticulumMeta() {\r\n  invalidatedReticulumMetaThisSession = true;\r\n  reticulumMeta = null;\r\n}\r\n\r\nexport async function connectToReticulum(debug = false, params = null, socketClass = Socket) {\r\n  const qs = new URLSearchParams(location.search);\r\n\r\n  const getNewSocketUrl = async () => {\r\n    await refreshDirectReticulumHostAndPort();\r\n    const { host, port } = directReticulumHostAndPort;\r\n    const protocol =\r\n      qs.get(\"phx_protocol\") ||\r\n      configs.RETICULUM_SOCKET_PROTOCOL ||\r\n      (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\r\n\r\n    return `${protocol}//${host}${port ? `:${port}` : \"\"}`;\r\n  };\r\n\r\n  const socketUrl = await getNewSocketUrl();\r\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\r\n\r\n  const socketSettings = {};\r\n\r\n  if (debug) {\r\n    socketSettings.logger = (kind, msg, data) => {\r\n      console.log(`${kind}: ${msg}`, data);\r\n    };\r\n  }\r\n\r\n  if (params) {\r\n    socketSettings.params = params;\r\n  }\r\n\r\n  const socket = new socketClass(`${socketUrl}/socket`, socketSettings);\r\n  socket.connect();\r\n  socket.onError(async () => {\r\n    // On error, underlying reticulum node may have died, so rebalance by\r\n    // fetching a new healthy node to connect to.\r\n    invalidateReticulumMeta();\r\n\r\n    const endPointPath = new URL(socket.endPoint).pathname;\r\n    const newSocketUrl = await getNewSocketUrl();\r\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\r\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\r\n    socket.endPoint = newEndPoint;\r\n  });\r\n\r\n  return socket;\r\n}\r\n\r\nexport function getLandingPageForPhoto(photoUrl) {\r\n  const parsedUrl = new URL(photoUrl);\r\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\r\n}\r\n\r\nexport function fetchReticulumAuthenticatedWithToken(token, url, method = \"GET\", payload) {\r\n  const retUrl = getReticulumFetchUrl(url);\r\n  const params = {\r\n    headers: { \"content-type\": \"application/json\" },\r\n    method\r\n  };\r\n  if (token) {\r\n    params.headers.authorization = `bearer ${token}`;\r\n  }\r\n  if (payload) {\r\n    params.body = JSON.stringify(payload);\r\n  }\r\n  return fetch(retUrl, params).then(async r => {\r\n    const result = await r.text();\r\n    try {\r\n      return JSON.parse(result);\r\n    } catch (e) {\r\n      // Some reticulum responses, particularly DELETE requests, don't return json.\r\n      return result;\r\n    }\r\n  });\r\n}\r\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\r\n  return fetchReticulumAuthenticatedWithToken(store.state.credentials.token, url, method, payload);\r\n}\r\n\r\nexport async function createAndRedirectToNewHub(name, sceneId, replace) {\r\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\r\n  const payload = { hub: { name: name || generateHubName() } };\r\n\r\n  if (sceneId) {\r\n    payload.hub.scene_id = sceneId;\r\n  }\r\n\r\n  const headers = { \"content-type\": \"application/json\" };\r\n  if (store.state && store.state.credentials.token) {\r\n    headers.authorization = `bearer ${store.state.credentials.token}`;\r\n  }\r\n\r\n  let res = await fetch(createUrl, {\r\n    body: JSON.stringify(payload),\r\n    headers,\r\n    method: \"POST\"\r\n  }).then(r => r.json());\r\n\r\n  if (res.error === \"invalid_token\") {\r\n    // Clear the invalid token from store.\r\n    store.update({ credentials: { token: null, email: null } });\r\n\r\n    // Create hub anonymously\r\n    delete headers.authorization;\r\n    res = await fetch(createUrl, {\r\n      body: JSON.stringify(payload),\r\n      headers,\r\n      method: \"POST\"\r\n    }).then(r => r.json());\r\n  }\r\n\r\n  const hub = res;\r\n  let url = hub.url;\r\n\r\n  const creatorAssignmentToken = hub.creator_assignment_token;\r\n  if (creatorAssignmentToken) {\r\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\r\n\r\n    // Don't need to store the embed token if there's no creator assignment token, since that means\r\n    // we are the owner and will get the embed token on page load.\r\n    const embedToken = hub.embed_token;\r\n\r\n    if (embedToken) {\r\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\r\n    }\r\n  }\r\n\r\n  if (isLocalClient()) {\r\n    url = `/hub.html?hub_id=${hub.hub_id}`;\r\n  }\r\n\r\n  if (replace) {\r\n    document.location.replace(url);\r\n  } else {\r\n    document.location = url;\r\n  }\r\n}\r\n\r\nexport function getPresenceEntryForSession(presences, sessionId) {\r\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\r\n  const presence = entry[1];\r\n  return (presence && presence.metas && presence.metas[0]) || {};\r\n}\r\n\r\nexport function getPresenceContextForSession(presences, sessionId) {\r\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\r\n}\r\n\r\nexport function getPresenceProfileForSession(presences, sessionId) {\r\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\r\n}\r\n\r\nfunction migrateBindings(oldChannel, newChannel) {\r\n  const doNotDuplicate = [\"phx_close\", \"phx_error\", \"phx_reply\", \"presence_state\", \"presence_diff\"];\r\n  const shouldDuplicate = event => {\r\n    return !event.startsWith(\"chan_reply_\") && !doNotDuplicate.includes(event);\r\n  };\r\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\r\n    const item = oldChannel.bindings[i];\r\n    if (shouldDuplicate(item.event)) {\r\n      newChannel.bindings.push(item);\r\n    }\r\n  }\r\n  newChannel.bindingRef = oldChannel.bindingRef;\r\n}\r\n\r\n// Takes the given channel, and creates a new channel with the same bindings\r\n// with the given socket, joins it, and leaves the old channel after joining.\r\n//\r\n// NOTE: This function relies upon phoenix channel object internals, so this\r\n// function will need to be reviewed if/when we ever update phoenix.js\r\nexport function migrateChannelToSocket(oldChannel, socket, params) {\r\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\r\n\r\n  migrateBindings(oldChannel, channel);\r\n\r\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\r\n    const item = oldChannel.pushBuffer[i];\r\n    channel.push(item.event, item.payload, item.timeout);\r\n  }\r\n\r\n  const oldJoinPush = oldChannel.joinPush;\r\n  const joinPush = channel.join();\r\n\r\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\r\n    const item = oldJoinPush.recHooks[i];\r\n    joinPush.receive(item.status, item.callback);\r\n  }\r\n\r\n  return new Promise(resolve => {\r\n    joinPush.receive(\"ok\", () => {\r\n      // Clear all event handlers first so no duplicate messages come in.\r\n      oldChannel.bindings = [];\r\n      resolve(channel);\r\n    });\r\n  });\r\n}\r\n\r\nexport function migrateToChannel(oldChannel, newChannel) {\r\n  migrateBindings(oldChannel, newChannel);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    newChannel\r\n      .join()\r\n      .receive(\"ok\", data => {\r\n        oldChannel.leave();\r\n        oldChannel.bindings = [];\r\n        resolve(data);\r\n      })\r\n      .receive(\"error\", data => {\r\n        newChannel.leave();\r\n        reject(data);\r\n      });\r\n  });\r\n}\r\n\r\nexport function discordBridgesForPresences(presences) {\r\n  const channels = [];\r\n  for (const p of Object.values(presences)) {\r\n    for (const m of p.metas) {\r\n      if (m.profile && m.profile.discordBridges) {\r\n        Array.prototype.push.apply(\r\n          channels,\r\n          m.profile.discordBridges.map(b => b.channel.name)\r\n        );\r\n      }\r\n    }\r\n  }\r\n  return channels;\r\n}\r\n\r\nexport function hasEmbedPresences(presences) {\r\n  for (const p of Object.values(presences)) {\r\n    for (const m of p.metas) {\r\n      if (m.context && m.context.embed) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function denoisePresence({ onJoin, onLeave, onChange }) {\r\n  return {\r\n    rawOnJoin: (key, beforeJoin, afterJoin) => {\r\n      if (beforeJoin === undefined) {\r\n        onJoin(key, afterJoin.metas[0]);\r\n      }\r\n    },\r\n    rawOnLeave: (key, remaining, removed) => {\r\n      if (remaining.metas.length === 0) {\r\n        onLeave(key, removed.metas[0]);\r\n      } else {\r\n        onChange(key, removed.metas[removed.metas.length - 1], remaining.metas[remaining.metas.length - 1]);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport function presenceEventsForHub(events) {\r\n  const onJoin = (key, meta) => {\r\n    events.trigger(`hub:join`, { key, meta });\r\n  };\r\n  const onLeave = (key, meta) => {\r\n    events.trigger(`hub:leave`, { key, meta });\r\n  };\r\n  const onChange = (key, previous, current) => {\r\n    events.trigger(`hub:change`, { key, previous, current });\r\n  };\r\n  return {\r\n    onJoin,\r\n    onLeave,\r\n    onChange\r\n  };\r\n}\r\n\r\nexport const tryGetMatchingMeta = async ({ ret_pool, ret_version }, shouldAbandonMigration) => {\r\n  const backoffMS = 5000;\r\n  const randomMS = 15000;\r\n  const maxAttempts = 10;\r\n  let didMatchMeta = false;\r\n  let attempt = 0;\r\n  while (!didMatchMeta && attempt < maxAttempts && !shouldAbandonMigration()) {\r\n    try {\r\n      // Add randomness to the first request avoid flooding reticulum.\r\n      const delayMS = attempt * backoffMS + (attempt === 0 ? Math.random() * randomMS : 0);\r\n      console.log(\r\n        `[reconnect] Getting reticulum meta in ${Math.ceil(delayMS / 1000)} seconds.${\r\n          attempt ? ` (Attempt ${attempt + 1} of ${maxAttempts})` : \"\"\r\n        }`\r\n      );\r\n      await sleep(delayMS);\r\n      invalidateReticulumMeta();\r\n      console.log(`[reconnect] Getting reticulum meta.${attempt ? ` (Attempt ${attempt + 1} of ${maxAttempts})` : \"\"}`);\r\n      const { pool, version } = await getReticulumMeta();\r\n      didMatchMeta = ret_pool === pool && ret_version === version;\r\n    } catch {\r\n      didMatchMeta = false;\r\n    }\r\n\r\n    attempt = attempt + 1;\r\n  }\r\n  return didMatchMeta;\r\n};\r\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\r\nimport defaultAvatar from \"../assets/models/DefaultAvatar.glb\";\r\n\r\nconst names = [\r\n  \"Baers-Pochard\",\r\n  \"Baikal-Teal\",\r\n  \"Barrows-Goldeneye\",\r\n  \"Blue-Billed\",\r\n  \"Blue-Duck\",\r\n  \"Blue-Winged\",\r\n  \"Brown-Teal\",\r\n  \"Bufflehead\",\r\n  \"Canvasback\",\r\n  \"Cape-Shoveler\",\r\n  \"Chestnut-Teal\",\r\n  \"Chiloe-Wigeon\",\r\n  \"Cinnamon-Teal\",\r\n  \"Comb-Duck\",\r\n  \"Common-Eider\",\r\n  \"Common-Goldeneye\",\r\n  \"Common-Merganser\",\r\n  \"Common-Pochard\",\r\n  \"Common-Scoter\",\r\n  \"Common-Shelduck\",\r\n  \"Cotton-Pygmy\",\r\n  \"Crested-Duck\",\r\n  \"Crested-Shelduck\",\r\n  \"Eatons-Pintail\",\r\n  \"Falcated\",\r\n  \"Ferruginous\",\r\n  \"Freckled-Duck\",\r\n  \"Gadwall\",\r\n  \"Garganey\",\r\n  \"Greater-Scaup\",\r\n  \"Green-Pygmy\",\r\n  \"Grey-Teal\",\r\n  \"Hardhead\",\r\n  \"Harlequin\",\r\n  \"Hartlaubs\",\r\n  \"Hooded-Merganser\",\r\n  \"Kelp-Goose\",\r\n  \"King-Eider\",\r\n  \"Lake-Duck\",\r\n  \"Laysan-Duck\",\r\n  \"Lesser-Scaup\",\r\n  \"Long-Tailed\",\r\n  \"Maccoa-Duck\",\r\n  \"Mallard\",\r\n  \"Mandarin\",\r\n  \"Marbled-Teal\",\r\n  \"Mellers-Duck\",\r\n  \"Merganser\",\r\n  \"Northern-Pintail\",\r\n  \"Orinoco-Goose\",\r\n  \"Paradise-Shelduck\",\r\n  \"Plumed-Whistler\",\r\n  \"Puna-Teal\",\r\n  \"Pygmy-Goose\",\r\n  \"Radjah-Shelduck\",\r\n  \"Red-Billed\",\r\n  \"Red-Crested\",\r\n  \"Red-Shoveler\",\r\n  \"Ring-Necked\",\r\n  \"Ringed-Teal\",\r\n  \"Rosy-Billed\",\r\n  \"Ruddy-Shelduck\",\r\n  \"Salvadoris-Teal\",\r\n  \"Scaly-Sided\",\r\n  \"Shelduck\",\r\n  \"Shoveler\",\r\n  \"Silver-Teal\",\r\n  \"Smew\",\r\n  \"Spectacled-Eider\",\r\n  \"Spot-Billed\",\r\n  \"Spotted-Whistler\",\r\n  \"Steamerduck\",\r\n  \"Stellers-Eider\",\r\n  \"Sunda-Teal\",\r\n  \"Surf-Scoter\",\r\n  \"Tufted-Duck\",\r\n  \"Velvet-Scoter\",\r\n  \"Wandering-Whistler\",\r\n  \"Whistling-duck\",\r\n  \"White-Backed\",\r\n  \"White-Cheeked\",\r\n  \"White-Winged\",\r\n  \"Wigeon\",\r\n  \"Wood-Duck\",\r\n  \"Yellow-Billed\"\r\n];\r\n\r\nfunction chooseRandom(arr) {\r\n  return arr[Math.floor(Math.random() * arr.length)];\r\n}\r\n\r\nexport function generateRandomName() {\r\n  return `${chooseRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\r\n}\r\n\r\nexport async function fetchRandomDefaultAvatarId() {\r\n  const defaultAvatarEndpoint = \"/api/v1/media/search?filter=default&source=avatar_listings\";\r\n  const defaultAvatars = (await fetchReticulumAuthenticated(defaultAvatarEndpoint)).entries || [];\r\n  if (defaultAvatars.length === 0) {\r\n    // If reticulum doesn't return any default avatars, just default to the duck model. This should only happen\r\n    // when running against a fresh reticulum server, e.g. a local ret instance.\r\n    return new URL(defaultAvatar, location.href).href;\r\n  }\r\n  const avatarIds = defaultAvatars.map(avatar => avatar.id);\r\n  return chooseRandom(avatarIds);\r\n}\r\n","export const MediaDevicesEvents = Object.freeze({\r\n  PERMISSIONS_STATUS_CHANGED: \"permissions_status_changed\",\r\n  MIC_SHARE_STARTED: \"mic_share_started\",\r\n  MIC_SHARE_ENDED: \"mic_share_ended\",\r\n  VIDEO_SHARE_STARTED: \"video_share_started\",\r\n  VIDEO_SHARE_ENDED: \"video_share_ended\",\r\n  DEVICE_CHANGE: \"devicechange\"\r\n});\r\n\r\nexport const PermissionStatus = Object.freeze({\r\n  GRANTED: \"granted\",\r\n  DENIED: \"denied\",\r\n  PROMPT: \"prompt\"\r\n});\r\n\r\nexport const MediaDevices = Object.freeze({\r\n  MICROPHONE: \"microphone\",\r\n  SPEAKERS: \"speakers\",\r\n  CAMERA: \"camera\",\r\n  SCREEN: \"screen\"\r\n});\r\n\r\nexport const NO_DEVICE_ID = \"none\";\r\n","export enum COLLISION_LAYERS {\r\n  ALL = -1,\r\n  NONE = 0,\r\n  INTERACTABLES = 1 << 0,\r\n  ENVIRONMENT = 1 << 1,\r\n  AVATAR = 1 << 2,\r\n  HANDS = 1 << 3,\r\n  MEDIA_FRAMES = 1 << 4,\r\n  // @TODO we should split these \"sets\" off into something other than COLLISION_LAYERS or at least name\r\n  // them differently to indicate they are a combination of multiple bits\r\n  DEFAULT_INTERACTABLE = INTERACTABLES | ENVIRONMENT | AVATAR | HANDS | MEDIA_FRAMES,\r\n  UNOWNED_INTERACTABLE = INTERACTABLES | HANDS | MEDIA_FRAMES,\r\n  DEFAULT_SPAWNER = INTERACTABLES | HANDS\r\n};\r\n\r\nexport enum AAModes {\r\n  NONE = \"NONE\",\r\n  SMAA = \"SMAA\",\r\n  MSAA_2X = \"MSAA_2X\",\r\n  MSAA_4X = \"MSAA_4X\",\r\n  MSAA_8X = \"MSAA_8X\"\r\n}\r\n\r\nexport const PRIVACY = \"https://www.mozilla.org/en-US/privacy/hubs/\";\r\nexport const TERMS = \"https://www.mozilla.org/en-US/about/legal/terms/hubs/\";\r\n","import { Validator } from \"jsonschema\";\r\nimport merge from \"deepmerge\";\r\nimport Cookies from \"js-cookie\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { qsGet } from \"../utils/qs_truthy.js\";\r\nimport detectMobile, { isAndroid, isMobileVR } from \"../utils/is-mobile\";\r\n\r\nconst LOCAL_STORE_KEY = \"___hubs_store\";\r\nconst STORE_STATE_CACHE_KEY = Symbol();\r\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\r\nconst validator = new Validator();\r\nimport { EventTarget } from \"event-target-shim\";\r\nimport { fetchRandomDefaultAvatarId, generateRandomName } from \"../utils/identity.js\";\r\nimport { NO_DEVICE_ID } from \"../utils/media-devices-utils.js\";\r\nimport { AAModes } from \"../constants\";\r\n\r\nconst defaultMaterialQuality = (function () {\r\n  const MATERIAL_QUALITY_OPTIONS = [\"low\", \"medium\", \"high\"];\r\n\r\n  // HACK: AFRAME is not available on all pages, so we catch the ReferenceError.\r\n  // We could move AFRAME's device utils into a separate package (or into this repo)\r\n  // if we wanted to use these checks without having to import all of AFRAME.\r\n  const isMobile = window.AFRAME && (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR());\r\n  if (isMobile) {\r\n    const qsMobileDefault = qsGet(\"default_mobile_material_quality\");\r\n    if (qsMobileDefault && MATERIAL_QUALITY_OPTIONS.indexOf(qsMobileDefault) !== -1) {\r\n      return qsMobileDefault;\r\n    }\r\n    return \"low\";\r\n  }\r\n\r\n  const qsDefault = qsGet(\"default_material_quality\");\r\n  if (qsDefault && MATERIAL_QUALITY_OPTIONS.indexOf(qsDefault) !== -1) {\r\n    return qsDefault;\r\n  }\r\n\r\n  return \"high\";\r\n})();\r\n\r\n// WebAudio on Android devices (only non-VR devices?) seems to have\r\n// a bug and audio can be broken if there are many people in a room.\r\n// We have reported the problem to the Android devs. We found that\r\n// using equal power panning mode can mitigate the problem so we\r\n// use low audio panning quality (= equal power mode) by default\r\n// on Android as workaround until the root issue is fixed on\r\n// Android end. See\r\n//   - https://github.com/mozilla/hubs/issues/5057\r\n//   - https://bugs.chromium.org/p/chromium/issues/detail?id=1308962\r\nconst defaultAudioPanningQuality = () => {\r\n  return isAndroid() && !isMobileVR() ? \"Low\" : \"High\";\r\n};\r\n\r\n//workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1626081 : disable echoCancellation, noiseSuppression, autoGainControl\r\nconst isFirefoxReality = window.AFRAME?.utils.device.isMobileVR() && navigator.userAgent.match(/Firefox/);\r\n\r\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\r\n// (Think flux but with way less incidental complexity, at least for now :))\r\nexport const SCHEMA = {\r\n  id: \"/HubsStore\",\r\n\r\n  definitions: {\r\n    profile: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9_~ -]{3,32}$\" },\r\n        avatarId: { type: \"string\" },\r\n        // personalAvatarId is obsolete, but we need it here for backwards compatibility.\r\n        personalAvatarId: { type: \"string\" }\r\n      }\r\n    },\r\n\r\n    credentials: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        token: { type: [\"null\", \"string\"] },\r\n        email: { type: [\"null\", \"string\"] }\r\n      }\r\n    },\r\n\r\n    activity: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        hasFoundFreeze: { type: \"boolean\" },\r\n        hasChangedName: { type: \"boolean\" },\r\n        hasAcceptedProfile: { type: \"boolean\" },\r\n        lastEnteredAt: { type: \"string\" },\r\n        hasPinned: { type: \"boolean\" },\r\n        hasRotated: { type: \"boolean\" },\r\n        hasRecentered: { type: \"boolean\" },\r\n        hasScaled: { type: \"boolean\" },\r\n        hasHoveredInWorldHud: { type: \"boolean\" },\r\n        hasOpenedShare: { type: \"boolean\" },\r\n        entryCount: { type: \"number\" }\r\n      }\r\n    },\r\n\r\n    settings: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        lastUsedMicDeviceId: { type: \"string\" },\r\n        micMuted: { type: \"bool\" }\r\n      }\r\n    },\r\n\r\n    preferences: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        shouldPromptForRefresh: { type: \"bool\", default: false },\r\n        // Preferred media will be set dynamically\r\n        preferredMic: { type: \"string\", default: NO_DEVICE_ID },\r\n        preferredSpeakers: { type: \"string\", default: NO_DEVICE_ID },\r\n        preferredCamera: { type: \"string\", default: NO_DEVICE_ID },\r\n        muteMicOnEntry: { type: \"bool\", default: false },\r\n        disableLeftRightPanning: { type: \"bool\", default: false },\r\n        audioNormalization: { type: \"bool\", default: 0.0 },\r\n        invertTouchscreenCameraMove: { type: \"bool\", default: true },\r\n        enableOnScreenJoystickLeft: { type: \"bool\", default: detectMobile() },\r\n        enableOnScreenJoystickRight: { type: \"bool\", default: detectMobile() },\r\n        enableGyro: { type: \"bool\", default: true },\r\n        animateWaypointTransitions: { type: \"bool\", default: true },\r\n        showFPSCounter: { type: \"bool\", default: false },\r\n        allowMultipleHubsInstances: { type: \"bool\", default: false },\r\n        disableIdleDetection: { type: \"bool\", default: false },\r\n        fastRoomSwitching: { type: \"bool\", default: false },\r\n        lazyLoadSceneMedia: { type: \"bool\", default: false },\r\n        preferMobileObjectInfoPanel: { type: \"bool\", default: false },\r\n        // if unset, maxResolution = screen resolution\r\n        maxResolutionWidth: { type: \"number\", default: undefined },\r\n        maxResolutionHeight: { type: \"number\", default: undefined },\r\n        globalVoiceVolume: { type: \"number\", default: 100 },\r\n        globalMediaVolume: { type: \"number\", default: 100 },\r\n        globalSFXVolume: { type: \"number\", default: 100 },\r\n        snapRotationDegrees: { type: \"number\", default: 45 },\r\n        materialQualitySetting: { type: \"string\", default: defaultMaterialQuality },\r\n        enableDynamicShadows: { type: \"bool\", default: false },\r\n        disableSoundEffects: { type: \"bool\", default: false },\r\n        disableMovement: { type: \"bool\", default: false },\r\n        disableBackwardsMovement: { type: \"bool\", default: false },\r\n        disableStrafing: { type: \"bool\", default: false },\r\n        disableTeleporter: { type: \"bool\", default: false },\r\n        disableAutoPixelRatio: { type: \"bool\", default: false },\r\n        movementSpeedModifier: { type: \"number\", default: 1 },\r\n        disableEchoCancellation: { type: \"bool\", default: isFirefoxReality },\r\n        disableNoiseSuppression: { type: \"bool\", default: isFirefoxReality },\r\n        disableAutoGainControl: { type: \"bool\", default: isFirefoxReality },\r\n        locale: { type: \"string\", default: \"browser\" },\r\n        showRtcDebugPanel: { type: \"bool\", default: false },\r\n        showAudioDebugPanel: { type: \"bool\", default: false },\r\n        enableAudioClipping: { type: \"bool\", default: false },\r\n        audioClippingThreshold: { type: \"number\", default: 0.015 },\r\n        audioPanningQuality: { type: \"string\", default: defaultAudioPanningQuality() },\r\n        theme: { type: \"string\", default: undefined },\r\n        cursorSize: { type: \"number\", default: 1 },\r\n        nametagVisibility: { type: \"string\", default: \"showAll\" },\r\n        nametagVisibilityDistance: { type: \"number\", default: 5 },\r\n        avatarVoiceLevels: { type: \"object\" },\r\n        enablePostEffects: { type: \"bool\", default: false },\r\n        enableBloom: { type: \"bool\", default: true }, // only applies if post effects are enabled\r\n        aaMode: { type: \"string\", default: AAModes.MSAA_4X } // only applies if post effects are enabled\r\n      }\r\n    },\r\n\r\n    // Legacy\r\n    confirmedDiscordRooms: {\r\n      type: \"array\",\r\n      items: { type: \"string\" }\r\n    },\r\n\r\n    confirmedBroadcastedRooms: {\r\n      type: \"array\",\r\n      items: { type: \"string\" }\r\n    },\r\n\r\n    uploadPromotionTokens: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        additionalProperties: false,\r\n        properties: {\r\n          fileId: { type: \"string\" },\r\n          promotionToken: { type: \"string\" }\r\n        }\r\n      }\r\n    },\r\n\r\n    creatorAssignmentTokens: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        additionalProperties: false,\r\n        properties: {\r\n          hubId: { type: \"string\" },\r\n          creatorAssignmentToken: { type: \"string\" }\r\n        }\r\n      }\r\n    },\r\n\r\n    embedTokens: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        additionalProperties: false,\r\n        properties: {\r\n          hubId: { type: \"string\" },\r\n          embedToken: { type: \"string\" }\r\n        }\r\n      }\r\n    },\r\n\r\n    onLoadActions: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        additionalProperties: false,\r\n        properties: {\r\n          action: { type: \"string\" },\r\n          args: { type: \"object\" }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  type: \"object\",\r\n\r\n  properties: {\r\n    profile: { $ref: \"#/definitions/profile\" },\r\n    credentials: { $ref: \"#/definitions/credentials\" },\r\n    activity: { $ref: \"#/definitions/activity\" },\r\n    settings: { $ref: \"#/definitions/settings\" },\r\n    preferences: { $ref: \"#/definitions/preferences\" },\r\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\r\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\r\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\r\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\r\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\r\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\r\n  },\r\n\r\n  additionalProperties: false\r\n};\r\n\r\nexport default class Store extends EventTarget {\r\n  constructor() {\r\n    super();\r\n\r\n    this._preferences = {};\r\n\r\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\r\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\r\n    }\r\n\r\n    // When storage is updated in another window\r\n    window.addEventListener(\"storage\", e => {\r\n      if (e.key !== LOCAL_STORE_KEY) return;\r\n      delete this[STORE_STATE_CACHE_KEY];\r\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\r\n    });\r\n\r\n    this.update({\r\n      activity: {},\r\n      settings: {},\r\n      credentials: {},\r\n      profile: {},\r\n      confirmedDiscordRooms: [],\r\n      confirmedBroadcastedRooms: [],\r\n      uploadPromotionTokens: [],\r\n      creatorAssignmentTokens: [],\r\n      embedTokens: [],\r\n      onLoadActions: [],\r\n      preferences: {}\r\n    });\r\n\r\n    this._shouldResetAvatarOnInit = false;\r\n\r\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\r\n    if (oauthFlowCredentials) {\r\n      this.update({ credentials: oauthFlowCredentials });\r\n      this._shouldResetAvatarOnInit = true;\r\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\r\n    }\r\n\r\n    this._signOutOnExpiredAuthToken();\r\n\r\n    const maybeDispatchThemeChanged = (() => {\r\n      let previous;\r\n      return () => {\r\n        const current = this.state.preferences.theme;\r\n        if ((previous || current) && previous !== current) {\r\n          this.dispatchEvent(new CustomEvent(\"themechanged\", { detail: { current, previous } }));\r\n        }\r\n        previous = current;\r\n      };\r\n    })();\r\n    this.addEventListener(\"statechanged\", maybeDispatchThemeChanged);\r\n  }\r\n\r\n  _signOutOnExpiredAuthToken = () => {\r\n    if (!this.state.credentials.token) return;\r\n\r\n    const expiry = jwtDecode(this.state.credentials.token).exp * 1000;\r\n    if (expiry <= Date.now()) {\r\n      this.update({ credentials: { token: null, email: null } });\r\n    }\r\n  };\r\n\r\n  initProfile = async () => {\r\n    if (this._shouldResetAvatarOnInit) {\r\n      await this.resetToRandomDefaultAvatar();\r\n    } else {\r\n      this.update({\r\n        profile: { avatarId: await fetchRandomDefaultAvatarId(), ...(this.state.profile || {}) }\r\n      });\r\n    }\r\n\r\n    // Regenerate name to encourage users to change it.\r\n    if (!this.state.activity.hasChangedName) {\r\n      this.update({ profile: { displayName: generateRandomName() } });\r\n    }\r\n  };\r\n\r\n  resetToRandomDefaultAvatar = async () => {\r\n    this.update({\r\n      profile: { ...(this.state.profile || {}), avatarId: await fetchRandomDefaultAvatarId() }\r\n    });\r\n  };\r\n\r\n  get state() {\r\n    if (!Object.prototype.hasOwnProperty.call(this, STORE_STATE_CACHE_KEY)) {\r\n      const state = (this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY)));\r\n      if (!state.preferences) state.preferences = {};\r\n      this._preferences = { ...state.preferences }; // cache prefs without injected defaults\r\n      // inject default values\r\n      for (const [key, props] of Object.entries(SCHEMA.definitions.preferences.properties)) {\r\n        if (!Object.prototype.hasOwnProperty.call(props, \"default\")) continue;\r\n        if (!Object.prototype.hasOwnProperty.call(state.preferences, key)) {\r\n          state.preferences[key] = props.default;\r\n        } else if (state.preferences[key] === props.default) {\r\n          delete this._preferences[key];\r\n        }\r\n      }\r\n    }\r\n\r\n    return this[STORE_STATE_CACHE_KEY];\r\n  }\r\n\r\n  get credentialsAccountId() {\r\n    if (this.state.credentials.token) {\r\n      return jwtDecode(this.state.credentials.token).sub;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  resetConfirmedBroadcastedRooms() {\r\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\r\n  }\r\n\r\n  resetTipActivityFlags() {\r\n    this.update({\r\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\r\n    });\r\n  }\r\n\r\n  bumpEntryCount() {\r\n    const currentEntryCount = this.state.activity.entryCount || 0;\r\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\r\n  }\r\n\r\n  // Sets a one-time action to perform the next time the page loads\r\n  enqueueOnLoadAction(action, args) {\r\n    this.update({ onLoadActions: [{ action, args }] });\r\n  }\r\n\r\n  executeOnLoadActions(sceneEl) {\r\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\r\n      const { action, args } = this.state.onLoadActions[i];\r\n\r\n      if (action === \"emit_scene_event\") {\r\n        sceneEl.emit(args.event, args.detail);\r\n      }\r\n    }\r\n\r\n    this.clearOnLoadActions();\r\n  }\r\n\r\n  clearOnLoadActions() {\r\n    this.clearStoredArray(\"onLoadActions\");\r\n  }\r\n\r\n  clearStoredArray(key) {\r\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\r\n    const update = {};\r\n    update[key] = [];\r\n\r\n    this.update(update, { arrayMerge: overwriteMerge });\r\n  }\r\n\r\n  update(newState, mergeOpts) {\r\n    const finalState = merge({ ...this.state, preferences: this._preferences }, newState, mergeOpts);\r\n    const { valid, errors } = validator.validate(finalState, SCHEMA);\r\n\r\n    // Cleanup unsupported properties\r\n    if (!valid) {\r\n      errors.forEach(error => {\r\n        console.error(`Removing invalid preference from store: ${error.message}`);\r\n        delete error.instance[error.argument];\r\n      });\r\n    }\r\n\r\n    if (newState.preferences) {\r\n      // clear preference if equal to default value so that, when client is updated with different defaults,\r\n      // new defaults will apply without user action\r\n      for (const [key, value] of Object.entries(finalState.preferences)) {\r\n        if (\r\n          SCHEMA.definitions.preferences.properties[key] &&\r\n          Object.prototype.hasOwnProperty.call(SCHEMA.definitions.preferences.properties[key], \"default\") &&\r\n          value === SCHEMA.definitions.preferences.properties[key].default\r\n        ) {\r\n          delete finalState.preferences[key];\r\n        }\r\n      }\r\n      this._preferences = finalState.preferences;\r\n    }\r\n\r\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\r\n    delete this[STORE_STATE_CACHE_KEY];\r\n\r\n    if (newState.profile !== undefined) {\r\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\r\n    }\r\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\r\n\r\n    return finalState;\r\n  }\r\n\r\n  getEmbedTokenForHub(hub) {\r\n    const embedTokenEntry = this.state.embedTokens.find(embedTokenEntry => embedTokenEntry.hubId === hub.hub_id);\r\n    if (embedTokenEntry) {\r\n      return embedTokenEntry.embedToken;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  get schema() {\r\n    return SCHEMA;\r\n  }\r\n}\r\n","import Store from \"../storage/store\";\r\n\r\nexport const store = new Store();\r\n","import { waitForDOMContentLoaded } from \"./async-utils\";\r\nimport configs from \"./configs\";\r\nimport { store } from \"./store-instance\";\r\n\r\n// NOTE these should be synchronized with the top of shared.scss\r\nconst DEFAULT_ACTION_COLOR = \"#FF3464\";\r\nconst DEFAULT_ACTION_COLOR_LIGHT = \"#FF74A4\";\r\n\r\nconst DEFAULT_COLORS = {\r\n  \"action-color\": DEFAULT_ACTION_COLOR,\r\n  \"action-label-color\": DEFAULT_ACTION_COLOR,\r\n  \"action-color-disabled\": DEFAULT_ACTION_COLOR_LIGHT,\r\n  \"action-color-highlight\": DEFAULT_ACTION_COLOR_LIGHT,\r\n  \"action-text-color\": \"#FFFFFF\",\r\n  \"action-subtitle-color\": \"#F0F0F0\",\r\n  \"notice-background-color\": \"#2F80ED\",\r\n  \"notice-text-color\": \"#FFFFFF\",\r\n  \"favorited-color\": \"#FFC000\",\r\n  \"nametag-color\": \"#000000\",\r\n  \"nametag-volume-color\": \"#7ED320\",\r\n  \"nametag-text-color\": \"#FFFFFF\",\r\n  \"nametag-border-color\": \"#7ED320\",\r\n  \"nametag-border-color-raised-hand\": \"#FFCD74\"\r\n};\r\n\r\nconst config = (() => {\r\n  let config = process.env.APP_CONFIG;\r\n\r\n  // Storybook includes environment variables as a string\r\n  // https://storybook.js.org/docs/react/configure/environment-variables\r\n  if (!config && process.env.STORYBOOK_APP_CONFIG) {\r\n    config = JSON.parse(process.env.STORYBOOK_APP_CONFIG);\r\n  }\r\n\r\n  if (!config) {\r\n    config = window.APP_CONFIG;\r\n  }\r\n\r\n  if (config?.theme?.error) {\r\n    console.error(\r\n      `Custom themes failed to load.\\n${config.theme.error}\\nIf you are an admin, reconfigure your themes in the admin panel.`\r\n    );\r\n  }\r\n\r\n  return config;\r\n})();\r\n\r\nconst themes = config?.theme?.themes || [];\r\n\r\nfunction getDarkModeQuery() {\r\n  // window.matchMedia is not available when this module is imported in node.js,\r\n  // which happens when using `npm run login` for Hubs Cloud customization.\r\n  // So we return a dummy MediaQueryList instead.\r\n  if (typeof window.matchMedia !== \"undefined\") {\r\n    return window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n  } else {\r\n    return { matches: false, addEventListener: () => {}, removeEventListener: () => {} };\r\n  }\r\n}\r\n\r\nfunction registerDarkModeQuery(changeListener) {\r\n  const darkModeQuery = getDarkModeQuery();\r\n\r\n  // This is a workaround for old Safari.\r\n  // Prior to Safari 14, MediaQueryList is based on EventTarget, so you must use\r\n  // addListener() and removeListener() to observe media query lists.\r\n  // https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList/addListener\r\n  // We may remove this workaround when no one will use Safari 13 or before.\r\n  if (darkModeQuery.addEventListener) {\r\n    darkModeQuery.addEventListener(\"change\", changeListener);\r\n  } else {\r\n    darkModeQuery.addListener(changeListener);\r\n  }\r\n\r\n  const removeListener = () => {\r\n    if (darkModeQuery.removeEventListener) {\r\n      darkModeQuery.removeEventListener(\"change\", changeListener);\r\n    } else {\r\n      darkModeQuery.removeListener(changeListener);\r\n    }\r\n  };\r\n\r\n  return [darkModeQuery, removeListener];\r\n}\r\n\r\nfunction getDefaultTheme() {\r\n  return themes.find(t => t.default) || themes[0];\r\n}\r\n\r\nfunction tryGetTheme(themeId) {\r\n  if (!Array.isArray(themes)) return;\r\n\r\n  const theme = themeId && themes.find(t => t.id === themeId);\r\n  if (theme) {\r\n    return theme;\r\n  } else {\r\n    const darkMode = getDarkModeQuery().matches;\r\n    return (darkMode && themes.find(t => t.darkModeDefault)) || getDefaultTheme();\r\n  }\r\n}\r\n\r\nfunction getCurrentTheme() {\r\n  const preferredThemeId = store.state?.preferences?.theme;\r\n  return tryGetTheme(preferredThemeId);\r\n}\r\n\r\nfunction getThemeColor(name) {\r\n  const theme = getCurrentTheme();\r\n  return theme?.variables?.[name] || DEFAULT_COLORS[name];\r\n}\r\n\r\nfunction updateTextButtonColors() {\r\n  const actionColor = getThemeColor(\"action-color\");\r\n  const actionHoverColor = getThemeColor(\"action-color-highlight\");\r\n\r\n  if (document.querySelector(\"#rounded-text-button\")) {\r\n    // NOTE, using the object-based {} setAttribute variant in a-frame\r\n    // seems to not work in Firefox here -- the entities with the mixins are not\r\n    // updated.\r\n    document\r\n      .querySelector(\"#rounded-text-button\")\r\n      .setAttribute(\r\n        \"text-button\",\r\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\r\n      );\r\n\r\n    document\r\n      .querySelector(\"#rounded-button\")\r\n      .setAttribute(\r\n        \"text-button\",\r\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\r\n      );\r\n\r\n    document\r\n      .querySelector(\"#rounded-text-action-button\")\r\n      .setAttribute(\r\n        \"text-button\",\r\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\r\n      );\r\n\r\n    document\r\n      .querySelector(\"#rounded-action-button\")\r\n      .setAttribute(\r\n        \"text-button\",\r\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\r\n      );\r\n  }\r\n}\r\n\r\nfunction onThemeChanged(listener) {\r\n  store.addEventListener(\"themechanged\", listener);\r\n  const [_darkModeQuery, removeDarkModeListener] = registerDarkModeQuery(listener);\r\n\r\n  return () => {\r\n    store.removeEventListener(\"themechanged\", listener);\r\n    removeDarkModeListener();\r\n  };\r\n}\r\n\r\nwaitForDOMContentLoaded().then(() => {\r\n  if (process.env.NODE) {\r\n    // We're running in node.js, which happens when \"npm run login\" is used, for example,\r\n    // so don't bother doing anything UI related.\r\n    return;\r\n  }\r\n\r\n  if (configs.APP_CONFIG && configs.APP_CONFIG.theme && configs.APP_CONFIG.theme[\"dark-theme\"]) {\r\n    document.body.classList.add(\"dark-theme\");\r\n  } else {\r\n    document.body.classList.add(\"light-theme\");\r\n  }\r\n  updateTextButtonColors();\r\n  onThemeChanged(updateTextButtonColors);\r\n});\r\n\r\nfunction applyThemeToTextButton(el, highlighted) {\r\n  el.setAttribute(\r\n    \"text-button\",\r\n    \"backgroundColor\",\r\n    highlighted ? getThemeColor(\"action-color-highlight\") : getThemeColor(\"action-color\")\r\n  );\r\n  el.setAttribute(\r\n    \"text-button\",\r\n    \"backgroundHoverColor\",\r\n    highlighted ? \"#aaa\" : getThemeColor(\"action-color-highlight\")\r\n  );\r\n}\r\n\r\nexport {\r\n  applyThemeToTextButton,\r\n  getCurrentTheme,\r\n  getDefaultTheme,\r\n  getThemeColor,\r\n  onThemeChanged,\r\n  registerDarkModeQuery,\r\n  themes,\r\n  tryGetTheme\r\n};\r\n","export const waitForEvent = function (eventName, eventObj) {\r\n  return new Promise(resolve => {\r\n    eventObj.addEventListener(eventName, resolve, { once: true });\r\n  });\r\n};\r\n\r\nexport const waitForDOMContentLoaded = function () {\r\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\r\n    return Promise.resolve(null);\r\n  } else {\r\n    return waitForEvent(\"DOMContentLoaded\", window);\r\n  }\r\n};\r\n\r\nexport const sleep = function (milliseconds) {\r\n  return new Promise(resolve => {\r\n    setTimeout(resolve, milliseconds);\r\n  });\r\n};\r\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\r\n// via the query string.\r\nimport debug from \"debug\";\r\nimport qsTruthy from \"./qs_truthy\";\r\n\r\nconst qs = new URLSearchParams(location.search);\r\nconst isDebug = qsTruthy(\"debug\");\r\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*,naf-dialog-adapter:*,mediasoup*\");\r\n\r\nif (logFilter) {\r\n  debug.enable(logFilter);\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { IntlProvider } from \"react-intl\";\r\nimport \"@formatjs/intl-locale/polyfill\";\r\nimport \"@formatjs/intl-pluralrules/polyfill\";\r\nimport \"@formatjs/intl-pluralrules/locale-data/en\";\r\nimport \"@formatjs/intl-relativetimeformat/polyfill\";\r\nimport \"@formatjs/intl-relativetimeformat/locale-data/en\";\r\nimport { getLocale, getMessages } from \"../utils/i18n\";\r\n\r\nexport class WrappedIntlProvider extends React.Component {\r\n  static propTypes = {\r\n    children: PropTypes.node.isRequired\r\n  };\r\n\r\n  state = {\r\n    locale: getLocale(),\r\n    messages: getMessages()\r\n  };\r\n\r\n  updateLocale = () => {\r\n    this.setState({ locale: getLocale(), messages: getMessages() });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.updateLocale();\r\n    window.addEventListener(\"locale-updated\", this.updateLocale);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"locale-updated\", this.updateLocale);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <IntlProvider locale={this.state.locale} messages={this.state.messages}>\r\n        {this.props.children}\r\n      </IntlProvider>\r\n    );\r\n  }\r\n}\r\n","import { isIOS as detectIOS } from \"./is-mobile\";\r\nconst isIOS = detectIOS();\r\n\r\n// TODO should we be using touch-action CSS for this?\r\nexport function disableiOSZoom() {\r\n  if (!isIOS) return;\r\n\r\n  let lastTouchAtMs = 0;\r\n\r\n  document.addEventListener(\"touchmove\", ev => {\r\n    if (ev.scale === 1) return;\r\n\r\n    ev.preventDefault();\r\n  });\r\n\r\n  document.addEventListener(\"touchend\", ev => {\r\n    const now = new Date().getTime();\r\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\r\n    lastTouchAtMs = now;\r\n\r\n    if (isDoubleTouch) {\r\n      ev.preventDefault();\r\n    }\r\n  });\r\n}\r\n","import cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\r\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\r\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\r\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\r\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\r\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\r\n\r\nexport async function createDefaultEnvironmentMap() {\r\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\r\n  const texture = await new Promise((resolve, reject) =>\r\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\r\n  );\r\n  texture.format = THREE.RGBAFormat;\r\n  return texture;\r\n}\r\n","import {\r\n  FileLoader,\r\n  LoaderUtils\r\n} from 'three';\r\n\r\nconst loadPartially = (fileLoader, url, offset, length) => {\r\n  return new Promise((resolve, reject) => {\r\n    const currentRequestHeader = fileLoader.requestHeader;\r\n    fileLoader.setRequestHeader(Object.assign(\r\n      {Range: `bytes=${offset}-${offset + length - 1}`},\r\n      currentRequestHeader\r\n    ));\r\n    // Note: If server doesn't support HTTP range requests\r\n    //       reject callback is fired.\r\n    fileLoader.load(url, resolve, undefined, reject);\r\n    fileLoader.setRequestHeader(currentRequestHeader);\r\n  });\r\n};\r\n\r\n// Based on the code in FileLoader\r\n// Used if server doesn't support HTTP range requests.\r\nconst loadArrayBufferFromResponse = (response, onProgress) => {\r\n  const reader = response.body.getReader();\r\n  const contentLength = response.headers.get('Content-Length');\r\n  const total = contentLength ? parseInt(contentLength) : 0;\r\n  const lengthComputable = total !== 0;\r\n  let loaded = 0;\r\n\r\n  // periodically read data into the new stream tracking while download progress\r\n  return new Response(\r\n    new ReadableStream({\r\n      start(controller) {\r\n        readData();\r\n        function readData() {\r\n          reader.read().then(({done, value}) => {\r\n            if (done) {\r\n              controller.close();\r\n            } else {\r\n              loaded += value.byteLength;\r\n              const event = new ProgressEvent('progress', {lengthComputable, loaded, total});\r\n              if (onProgress) onProgress(event);\r\n              controller.enqueue(value);\r\n              readData();\r\n            }\r\n          });\r\n        }\r\n      }\r\n    })\r\n  ).arrayBuffer();\r\n};\r\n\r\n\r\n// GLB File Format handlers\r\n// Specification: https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#glb-file-format-specification\r\n\r\nconst BINARY_HEADER_MAGIC = 'glTF';\r\nconst BINARY_HEADER_LENGTH = 12;\r\nconst BINARY_CHUNK_TYPES = {JSON: 0x4E4F534A, BIN: 0x004E4942};\r\n\r\nexport default class GLBRangeRequests {\r\n  constructor(parser, url, binChunkOffset) {\r\n    this.name = 'GLB_range_requests';\r\n    this.parser = parser;\r\n    this.url = url;\r\n    this.binChunkOffset = binChunkOffset;\r\n  }\r\n\r\n  static load(url, loader, onLoad, onProgress, onError, fileLoader = null) {\r\n    const assetUrl = (loader.path || '') + url;\r\n    let resourcePath;\r\n    if (loader.resourcePath !== '') {\r\n      resourcePath = loader.resourcePath;\r\n    } else if (loader.path !== '') {\r\n      resourcePath = loader.path;\r\n    } else {\r\n      resourcePath = LoaderUtils.extractUrlBase(assetUrl);\r\n    }\r\n\r\n    GLBRangeRequests.loadContent(assetUrl, fileLoader).then(content => {\r\n      loader\r\n        .register(parser => new GLBRangeRequests(\r\n          parser,\r\n          assetUrl,\r\n          content.binChunkOffset\r\n        ))\r\n        .parse(content.jsonContent, resourcePath, onLoad, onError);\r\n    }).catch((error) => {\r\n      // If server doesn't support range requests.\r\n      // Response has full range content.\r\n      // Parse with the full range content as fallback.\r\n      if (error.response && error.response.status === 200) {\r\n        loadArrayBufferFromResponse(error.response, onProgress).then(buffer => {\r\n          loader.parse(buffer, resourcePath, onLoad, onError);\r\n        }).catch(error => {\r\n          if (onError) onError(error);\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Perhaps rejected due to the either one\r\n      // 1. The asset is not GLB (but glTF)\r\n      // 2. The asset includes EXT_meshopt_compression extension that the\r\n      //    this plugin can't handle\r\n      // so load in the regular way as fallback.\r\n      // @TODO: Check the error reason and don't run the fallback loading\r\n      //        if the error reason is others?\r\n\r\n      //console.error(error);\r\n      loader.load(url, onLoad, onProgress, onError);\r\n    });\r\n  }\r\n\r\n  // Note: Rejects if server doesn't support HTTP range requests\r\n  static async loadContent(url, fileLoader = null) {\r\n    if (fileLoader === null) {\r\n      fileLoader = new FileLoader().setResponseType('arraybuffer');\r\n    }\r\n\r\n    // Load the GLB header and the first chunk info\r\n    const buffer = await loadPartially(fileLoader, url, 0, BINARY_HEADER_LENGTH + 4);\r\n    const view = new DataView(buffer);\r\n    const header = {\r\n      magic: LoaderUtils.decodeText(new Uint8Array(buffer.slice(0, 4))),\r\n      version: view.getUint32(4, true),\r\n      length: view.getUint32(8, true)\r\n    };\r\n\r\n    if (header.magic !== BINARY_HEADER_MAGIC) {\r\n      return Promise.reject(new Error('GLBRangeRequests: The file is not GLB.'));\r\n    }\r\n\r\n    if (header.version < 2.0) {\r\n      return Promise.reject(new Error('GLBRangeRequests: Legacy binary file detected.'));\r\n    }\r\n\r\n    const firstChunkLength = view.getUint32(12, true);\r\n    let offset = BINARY_HEADER_LENGTH + 8;\r\n\r\n    // The json chunk is required and must be the first chunk.\r\n    // The bin chunk is optional and must be the second chunk if exists.\r\n    // The number of json chunks must be 1. The number of bin chunks must be 0 or 1.\r\n    // Specification: https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#chunks\r\n    // Note: Assuming the GLB format is valid\r\n\r\n    const result = {\r\n      jsonContent: null,\r\n      binChunkOffset: null\r\n    };\r\n\r\n    result.jsonContent = await loadPartially(fileLoader, url, offset, firstChunkLength);\r\n    offset += firstChunkLength;\r\n\r\n    if (offset < header.length) {\r\n      result.binChunkOffset = offset + 8;\r\n    }\r\n\r\n    if (result.jsonContent.extensionsUsed &&\r\n        result.jsonContent.extensionsUsed.indexOf('EXT_meshopt_compression') >= 0) {\r\n      // @TODO: Resolve this problem.\r\n      return Promise.reject(new Error('GLBRangeRequests: currently no EXT_meshopt_compression extension support.'));\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  loadBufferView(bufferViewIndex) {\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n\r\n    const bufferViewDef = json.bufferViews[bufferViewIndex];\r\n    const bufferIndex = bufferViewDef.buffer;\r\n    const bufferDef = json.buffers[bufferIndex];\r\n\r\n    if (bufferDef.type !== undefined && bufferDef.type !== 'arraybuffer') {\r\n      return null;\r\n    }\r\n\r\n    if (bufferDef.uri !== undefined || bufferIndex !== 0) {\r\n      return null;\r\n    }\r\n\r\n    const fileLoader = parser.fileLoader;\r\n    const length = bufferViewDef.byteLength || 0;\r\n    const offset = bufferViewDef.byteOffset || 0;\r\n\r\n    return loadPartially(fileLoader, this.url, this.binChunkOffset + offset, length);\r\n  }\r\n}\r\n","import {\r\n  LOD,\r\n  Object3D\r\n} from 'three';\r\n\r\nconst LOADING_MODES = {\r\n  All: 'all', // Default\r\n  Any: 'any',\r\n  Progressive: 'progressive'\r\n};\r\n\r\nconst replaceLevelObject = (lod, object, levelNum) => {\r\n  const level = lod.levels[levelNum];\r\n  const oldObject = level.object;\r\n  level.object = object;\r\n  lod.remove(oldObject);\r\n  lod.add(object);\r\n};\r\n\r\nconst loadScreenCoverages = (def) => {\r\n  const extras = def.extras;\r\n\r\n  if (!extras) {\r\n    return [];\r\n  }\r\n\r\n  const screenCoverages = extras['MSFT_screencoverage'];\r\n\r\n  // extra field is free structure so validate more carefully\r\n  if (!screenCoverages || !Array.isArray(screenCoverages)) {\r\n    return [];\r\n  }\r\n\r\n  return screenCoverages;\r\n};\r\n\r\nconst LOADING_STATES = {\r\n  NotStarted: 0,\r\n  Loading: 1,\r\n  Complete: 2\r\n};\r\n\r\n/**\r\n * LOD Extension\r\n *\r\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_lod\r\n */\r\nexport default class GLTFLodExtension {\r\n  constructor(parser, options={}) {\r\n    this.name = 'MSFT_lod';\r\n    this.parser = parser;\r\n    this.options = options;\r\n  }\r\n\r\n  _hasLODMaterial(meshIndex) {\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const meshDef = json.meshes[meshIndex];\r\n\r\n    // Ignore LOD + multiple primitives so far because\r\n    // it might be a bit too complicated.\r\n    // @TODO: Fix me\r\n    if (meshDef.primitives.length > 1) {\r\n      return null;\r\n    }\r\n\r\n    for (const primitiveDef of meshDef.primitives) {\r\n      if (primitiveDef.material === undefined) {\r\n        continue;\r\n      }\r\n      const materialDef = json.materials[primitiveDef.material];\r\n      if (materialDef.extensions && materialDef.extensions[this.name]) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  _hasLODMaterialOrSkinInNodes(nodeIndex) {\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const nodeDef = json.nodes[nodeIndex];\r\n\r\n    const nodeIndices = (nodeDef.extensions && nodeDef.extensions[this.name])\r\n      ? nodeDef.extensions[this.name].ids.slice() : [];\r\n    nodeIndices.unshift(nodeIndex);\r\n\r\n    for (const nodeIndex of nodeIndices) {\r\n      if (json.nodes[nodeIndex].mesh !== undefined &&\r\n        this._hasLODMaterial(json.nodes[nodeIndex].mesh)) { \r\n        return true;\r\n      }\r\n      if (json.nodes[nodeIndex].skin !== undefined) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  // level: 0 is the highest level\r\n  _calculateDistance(level, lowestLevel, def) {\r\n    const coverages = loadScreenCoverages(def);\r\n\r\n    // Use the distance set by users if calculateDistance callback is set\r\n    if (this.options.calculateDistance) {\r\n      return this.options.calculateDistance(level, lowestLevel, coverages);\r\n    }\r\n\r\n    if (level === 0) return 0;\r\n\r\n    const levelsLength = def.extensions[this.name].ids.length + 1;\r\n\r\n    // 1.0 / Math.pow(2, level * 2) is just a number that seems to be heuristically good so far.\r\n    const c = levelsLength === coverages.length ? coverages[level - 1] : 1.0 / Math.pow(2, level * 2);\r\n\r\n    // This is just an easy approximation. If users want more accurate value, they are expected\r\n    // to use calculateDistance hook.\r\n    return 1.0 / c;\r\n  }\r\n\r\n  // Set the lowest level first, and then progressively load the right level on demand.\r\n  _addProgressiveLoadingLevel(isNodeLOD, resourceIndex, lod, lowestMesh, level, lowestLevel, def, states) {\r\n    const currentOnBeforeRender = lowestMesh.onBeforeRender;\r\n    const clonedLowestMesh = lowestMesh.clone();\r\n    const _this = this;\r\n    // Using onBeforRender as a progressive loading trigger\r\n    clonedLowestMesh.onBeforeRender = function onBeforeRender() {\r\n      const clonedLowestMesh = this;\r\n      const lod = clonedLowestMesh.parent;\r\n      states[level] = LOADING_STATES.Loading;\r\n      const pending = isNodeLOD\r\n        ? _this.parser.createNodeMesh(resourceIndex)\r\n        : _this.parser.loadMesh(resourceIndex);\r\n      pending.then(mesh => {\r\n        states[level] = LOADING_STATES.Complete;\r\n        if (_this.options.onLoadMesh) {\r\n          mesh = _this.options.onLoadMesh(lod, mesh, level, lowestLevel);\r\n        }\r\n        replaceLevelObject(lod, mesh, level);\r\n\r\n        // Replace the higher level objects with this level object\r\n        // if they are not loaded (= using the lowest level now) yet.\r\n        for (let i = 0; i < level; i++) {\r\n          if (states[i] !== LOADING_STATES.Complete) {\r\n            const oldObject = lod.levels[i].object;\r\n            const clonedMesh = mesh.clone();\r\n            clonedMesh.onBeforeRender = oldObject.onBeforeRender;\r\n            replaceLevelObject(lod, clonedMesh, i);\r\n          }\r\n        }\r\n\r\n        if (_this.options.onUpdate) {\r\n          _this.options.onUpdate(lod, mesh, level, lowestLevel);\r\n        }\r\n      });\r\n      clonedLowestMesh.onBeforeRender = currentOnBeforeRender;\r\n    };\r\n    lod.addLevel(clonedLowestMesh, this._calculateDistance(level, lowestLevel, def));\r\n  }\r\n\r\n  // For LOD in materials\r\n  loadMesh(meshIndex) {\r\n    if (!this._hasLODMaterial(meshIndex)) {\r\n      return null;\r\n    }\r\n\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const meshDef = json.meshes[meshIndex];\r\n\r\n    const primitiveDef = meshDef.primitives[0];\r\n    const materialIndex = primitiveDef.material;\r\n    const materialDef = json.materials[materialIndex];\r\n    const extensionDef = materialDef.extensions[this.name];\r\n\r\n    const meshIndices = [meshIndex];\r\n    // Very hacky solution.\r\n    // Clone the mesh def, replace the material index with a lower level one,\r\n    // add to json.meshes.\r\n    // @TODO: Fix me. Polluting json is a bad idea.\r\n    for (const materialIndex of extensionDef.ids) {\r\n      const clonedMeshDef = Object.assign({}, meshDef);\r\n      clonedMeshDef.primitives = [Object.assign({}, clonedMeshDef.primitives[0])];\r\n      clonedMeshDef.primitives[0].material = materialIndex;\r\n      meshIndices.push(json.meshes.push(clonedMeshDef) - 1);\r\n    }\r\n\r\n    const lod = new LOD();\r\n    const lowestLevel = meshIndices.length - 1;\r\n\r\n    if (this.options.loadingMode === LOADING_MODES.Progressive) {\r\n      const states = new Array(meshIndices.length).fill(LOADING_STATES.NotStarted);\r\n      const firstLoadLevel = meshIndices.length - 1;\r\n      states[firstLoadLevel] = LOADING_STATES.Loading;\r\n      return parser.loadMesh(meshIndices[firstLoadLevel]).then(mesh => {\r\n        states[firstLoadLevel] = LOADING_STATES.Complete;\r\n        if (this.options.onLoadMesh) {\r\n          mesh = this.options.onLoadMesh(lod, mesh, firstLoadLevel, lowestLevel);\r\n        }\r\n\r\n        for (let level = 0; level < meshIndices.length - 1; level++) {\r\n          this._addProgressiveLoadingLevel(\r\n            false, meshIndices[level], lod, mesh, level, lowestLevel, materialDef, states);\r\n        }\r\n        lod.addLevel(mesh, this._calculateDistance(firstLoadLevel, lowestLevel, materialDef));\r\n\r\n        if (this.options.onUpdate) {\r\n          this.options.onUpdate(lod, mesh, firstLoadLevel, lowestLevel);\r\n        }\r\n\r\n        return lod;\r\n      });\r\n    } else {\r\n      const pending = [];\r\n\r\n      for (let level = 0; level < meshIndices.length; level++) {\r\n        pending.push(parser.loadMesh(meshIndices[level]).then(mesh => {\r\n          if (this.options.onLoadMesh) {\r\n            mesh = this.options.onLoadMesh(lod, mesh, level, lowestLevel);\r\n          }\r\n          lod.addLevel(mesh, this._calculateDistance(level, lowestLevel, materialDef));\r\n          if (this.options.onUpdate) {\r\n            this.options.onUpdate(lod, mesh, level, lowestLevel);\r\n          }\r\n        }));\r\n      }\r\n\r\n      return (this.options.loadingMode === LOADING_MODES.Any\r\n        ? Promise.any(pending)\r\n        : Promise.all(pending)\r\n      ).then(() => lod);\r\n    }\r\n  }\r\n\r\n  // For LOD in nodes\r\n  createNodeMesh(nodeIndex) {\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const nodeDef = json.nodes[nodeIndex];\r\n\r\n    if (!nodeDef.extensions || !nodeDef.extensions[this.name]) {\r\n      return null;\r\n    }\r\n\r\n    // If LODs are defined in both nodes and materials,\r\n    // ignore the ones in the nodes and use the ones in the materials.\r\n    // Refer to https://github.com/KhronosGroup/glTF/issues/1952\r\n    // Also, if LODs contain SkinnedMesh they are not handled correctly now\r\n    // so ignore LODs for now.\r\n    // @TODO: Process correctly\r\n    if (this._hasLODMaterialOrSkinInNodes(nodeIndex)) {\r\n      return null;\r\n    }\r\n\r\n    const extensionDef = nodeDef.extensions[this.name];\r\n\r\n    // Node indices from high to low levels\r\n    const nodeIndices = extensionDef.ids.slice();\r\n    nodeIndices.unshift(nodeIndex);\r\n\r\n    const lod = new LOD();\r\n    const lowestLevel = nodeIndices.length - 1;\r\n\r\n    for (let level = 0; level < nodeIndices.length; level++) {\r\n      const nodeDef = json.nodes[nodeIndices[level]];\r\n      if (nodeDef.mesh === undefined) {\r\n        lod.addLevel(new Object3D(), this._calculateDistance(level, lowestLevel, nodeDef));\r\n      }\r\n    }\r\n\r\n    if (this.options.loadingMode === LOADING_MODES.Progressive) {\r\n      const states = [];\r\n      let firstLoadLevel = null;\r\n      for (let level = 0; level < nodeIndices.length; level++) {\r\n        if (json.nodes[nodeIndices[level]].mesh !== undefined) {\r\n          firstLoadLevel = level;\r\n          states.push(LOADING_STATES.NotStarted);\r\n        } else {\r\n          states.push(LOADING_STATES.Complete);\r\n        }\r\n      }\r\n\r\n      if (firstLoadLevel === null) {\r\n        return Promise.resolve(lod);\r\n      }\r\n\r\n      states[firstLoadLevel] = LOADING_STATES.Loading;\r\n\r\n      return parser.createNodeMesh(nodeIndices[firstLoadLevel]).then(mesh => {\r\n        states[firstLoadLevel] = LOADING_STATES.Complete;\r\n        if (this.options.onLoadMesh) {\r\n          mesh = this.options.onLoadMesh(lod, mesh, firstLoadLevel, lowestLevel);\r\n        }\r\n\r\n        for (let level = 0; level < nodeIndices.length - 1; level++) {\r\n          if (json.nodes[nodeIndices[level]].mesh === undefined) {\r\n            continue;\r\n          }\r\n          this._addProgressiveLoadingLevel(\r\n            true, nodeIndices[level], lod, mesh, level, lowestLevel, nodeDef, states);\r\n        }\r\n        lod.addLevel(mesh, this._calculateDistance(firstLoadLevel, lowestLevel, nodeDef));\r\n\r\n        if (this.options.onUpdate) {\r\n          this.options.onUpdate(lod, mesh, firstLoadLevel, lowestLevel);\r\n        }\r\n\r\n        return lod;\r\n      });\r\n    } else {\r\n      const pending = [];\r\n\r\n      for (let level = 0; level < nodeIndices.length; level++) {\r\n        if (json.nodes[nodeIndices[level]].mesh === undefined) {\r\n          continue;\r\n        }\r\n\r\n        pending.push(parser.createNodeMesh(nodeIndices[level]).then(mesh => {\r\n          if (this.options.onLoadMesh) {\r\n            mesh = this.options.onLoadMesh(lod, mesh, level, lowestLevel);\r\n          }\r\n          lod.addLevel(mesh, this._calculateDistance(level, lowestLevel, nodeDef));\r\n          if (this.options.onUpdate) {\r\n            this.options.onUpdate(lod, mesh, level, lowestLevel);\r\n          }\r\n        }));\r\n      }\r\n\r\n      if (pending.length === 0) {\r\n        return Promise.resolve(lod);\r\n      }\r\n\r\n      return (this.options.loadingMode === LOADING_MODES.Any\r\n        ? Promise.any(pending)\r\n        : Promise.all(pending)\r\n      ).then(() => lod);\r\n    }\r\n  }\r\n}\r\n","\r\nexport default\r\nclass MeshBVHNode {\r\n\r\n\tconstructor() {\r\n\r\n\t\t// internal nodes have boundingData, left, right, and splitAxis\r\n\t\t// leaf nodes have offset and count (referring to primitives in the mesh geometry)\r\n\r\n\t}\r\n\r\n}\r\n","// Returns a Float32Array representing the bounds data for box.\r\nexport function boxToArray( bx ) {\r\n\r\n\tconst arr = new Float32Array( 6 );\r\n\r\n\tarr[ 0 ] = bx.min.x;\r\n\tarr[ 1 ] = bx.min.y;\r\n\tarr[ 2 ] = bx.min.z;\r\n\r\n\tarr[ 3 ] = bx.max.x;\r\n\tarr[ 4 ] = bx.max.y;\r\n\tarr[ 5 ] = bx.max.z;\r\n\r\n\treturn arr;\r\n\r\n}\r\n\r\nexport function arrayToBox( arr, target ) {\r\n\r\n\ttarget.min.x = arr[ 0 ];\r\n\ttarget.min.y = arr[ 1 ];\r\n\ttarget.min.z = arr[ 2 ];\r\n\r\n\ttarget.max.x = arr[ 3 ];\r\n\ttarget.max.y = arr[ 4 ];\r\n\ttarget.max.z = arr[ 5 ];\r\n\r\n\treturn target;\r\n\r\n}\r\n\r\nexport function getLongestEdgeIndex( bounds ) {\r\n\r\n\tlet splitDimIdx = - 1;\r\n\tlet splitDist = - Infinity;\r\n\r\n\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\tconst dist = bounds[ i + 3 ] - bounds[ i ];\r\n\t\tif ( dist > splitDist ) {\r\n\r\n\t\t\tsplitDist = dist;\r\n\t\t\tsplitDimIdx = i;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn splitDimIdx;\r\n\r\n}\r\n","import { Box3, BufferAttribute } from 'three';\r\nimport MeshBVHNode from './MeshBVHNode.js';\r\nimport { arrayToBox, boxToArray, getLongestEdgeIndex } from './Utils/ArrayBoxUtilities.js';\r\nimport { CENTER, AVERAGE, SAH } from './Constants.js';\r\n\r\n// https://en.wikipedia.org/wiki/Machine_epsilon#Values_for_standard_hardware_floating_point_arithmetics\r\nconst FLOAT32_EPSILON = Math.pow( 2, - 24 );\r\nconst xyzFields = [ 'x', 'y', 'z' ];\r\nconst boxTemp = new Box3();\r\n\r\nfunction ensureIndex( geo ) {\r\n\r\n\tif ( ! geo.index ) {\r\n\r\n\t\tconst vertexCount = geo.attributes.position.count;\r\n\t\tconst index = new ( vertexCount > 65535 ? Uint32Array : Uint16Array )( vertexCount );\r\n\t\tgeo.setIndex( new BufferAttribute( index, 1 ) );\r\n\r\n\t\tfor ( let i = 0; i < vertexCount; i ++ ) {\r\n\r\n\t\t\tindex[ i ] = i;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Computes the set of { offset, count } ranges which need independent BVH roots. Each\r\n// region in the geometry index that belongs to a different set of material groups requires\r\n// a separate BVH root, so that triangles indices belonging to one group never get swapped\r\n// with triangle indices belongs to another group. For example, if the groups were like this:\r\n//\r\n// [-------------------------------------------------------------]\r\n// |__________________|\r\n//   g0 = [0, 20]  |______________________||_____________________|\r\n//                      g1 = [16, 40]           g2 = [41, 60]\r\n//\r\n// we would need four BVH roots: [0, 15], [16, 20], [21, 40], [41, 60].\r\nfunction getRootIndexRanges( geo ) {\r\n\r\n\tif ( ! geo.groups || ! geo.groups.length ) {\r\n\r\n\t\treturn [ { offset: 0, count: geo.index.count / 3 } ];\r\n\r\n\t}\r\n\r\n\tconst ranges = [];\r\n\tconst rangeBoundaries = new Set();\r\n\tfor ( const group of geo.groups ) {\r\n\r\n\t\trangeBoundaries.add( group.start );\r\n\t\trangeBoundaries.add( group.start + group.count );\r\n\r\n\t}\r\n\r\n\t// note that if you don't pass in a comparator, it sorts them lexicographically as strings :-(\r\n\tconst sortedBoundaries = Array.from( rangeBoundaries.values() ).sort( ( a, b ) => a - b );\r\n\tfor ( let i = 0; i < sortedBoundaries.length - 1; i ++ ) {\r\n\r\n\t\tconst start = sortedBoundaries[ i ], end = sortedBoundaries[ i + 1 ];\r\n\t\tranges.push( { offset: ( start / 3 ), count: ( end - start ) / 3 } );\r\n\r\n\t}\r\n\r\n\treturn ranges;\r\n\r\n}\r\n\r\n// computes the union of the bounds of all of the given triangles and puts the resulting box in target. If\r\n// centroidTarget is provided then a bounding box is computed for the centroids of the triangles, as well.\r\n// These are computed together to avoid redundant accesses to bounds array.\r\nfunction getBounds( triangleBounds, offset, count, target, centroidTarget = null ) {\r\n\r\n\tlet minx = Infinity;\r\n\tlet miny = Infinity;\r\n\tlet minz = Infinity;\r\n\tlet maxx = - Infinity;\r\n\tlet maxy = - Infinity;\r\n\tlet maxz = - Infinity;\r\n\r\n\tlet cminx = Infinity;\r\n\tlet cminy = Infinity;\r\n\tlet cminz = Infinity;\r\n\tlet cmaxx = - Infinity;\r\n\tlet cmaxy = - Infinity;\r\n\tlet cmaxz = - Infinity;\r\n\r\n\tconst includeCentroid = centroidTarget !== null;\r\n\tfor ( let i = offset * 6, end = ( offset + count ) * 6; i < end; i += 6 ) {\r\n\r\n\t\tconst cx = triangleBounds[ i + 0 ];\r\n\t\tconst hx = triangleBounds[ i + 1 ];\r\n\t\tconst lx = cx - hx;\r\n\t\tconst rx = cx + hx;\r\n\t\tif ( lx < minx ) minx = lx;\r\n\t\tif ( rx > maxx ) maxx = rx;\r\n\t\tif ( includeCentroid && cx < cminx ) cminx = cx;\r\n\t\tif ( includeCentroid && cx > cmaxx ) cmaxx = cx;\r\n\r\n\t\tconst cy = triangleBounds[ i + 2 ];\r\n\t\tconst hy = triangleBounds[ i + 3 ];\r\n\t\tconst ly = cy - hy;\r\n\t\tconst ry = cy + hy;\r\n\t\tif ( ly < miny ) miny = ly;\r\n\t\tif ( ry > maxy ) maxy = ry;\r\n\t\tif ( includeCentroid && cy < cminy ) cminy = cy;\r\n\t\tif ( includeCentroid && cy > cmaxy ) cmaxy = cy;\r\n\r\n\t\tconst cz = triangleBounds[ i + 4 ];\r\n\t\tconst hz = triangleBounds[ i + 5 ];\r\n\t\tconst lz = cz - hz;\r\n\t\tconst rz = cz + hz;\r\n\t\tif ( lz < minz ) minz = lz;\r\n\t\tif ( rz > maxz ) maxz = rz;\r\n\t\tif ( includeCentroid && cz < cminz ) cminz = cz;\r\n\t\tif ( includeCentroid && cz > cmaxz ) cmaxz = cz;\r\n\r\n\t}\r\n\r\n\ttarget[ 0 ] = minx;\r\n\ttarget[ 1 ] = miny;\r\n\ttarget[ 2 ] = minz;\r\n\r\n\ttarget[ 3 ] = maxx;\r\n\ttarget[ 4 ] = maxy;\r\n\ttarget[ 5 ] = maxz;\r\n\r\n\tif ( includeCentroid ) {\r\n\r\n\t\tcentroidTarget[ 0 ] = cminx;\r\n\t\tcentroidTarget[ 1 ] = cminy;\r\n\t\tcentroidTarget[ 2 ] = cminz;\r\n\r\n\t\tcentroidTarget[ 3 ] = cmaxx;\r\n\t\tcentroidTarget[ 4 ] = cmaxy;\r\n\t\tcentroidTarget[ 5 ] = cmaxz;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// A stand alone function for retrieving the centroid bounds.\r\nfunction getCentroidBounds( triangleBounds, offset, count, centroidTarget ) {\r\n\r\n\tlet cminx = Infinity;\r\n\tlet cminy = Infinity;\r\n\tlet cminz = Infinity;\r\n\tlet cmaxx = - Infinity;\r\n\tlet cmaxy = - Infinity;\r\n\tlet cmaxz = - Infinity;\r\n\r\n\tfor ( let i = offset * 6, end = ( offset + count ) * 6; i < end; i += 6 ) {\r\n\r\n\t\tconst cx = triangleBounds[ i + 0 ];\r\n\t\tif ( cx < cminx ) cminx = cx;\r\n\t\tif ( cx > cmaxx ) cmaxx = cx;\r\n\r\n\t\tconst cy = triangleBounds[ i + 2 ];\r\n\t\tif ( cy < cminy ) cminy = cy;\r\n\t\tif ( cy > cmaxy ) cmaxy = cy;\r\n\r\n\t\tconst cz = triangleBounds[ i + 4 ];\r\n\t\tif ( cz < cminz ) cminz = cz;\r\n\t\tif ( cz > cmaxz ) cmaxz = cz;\r\n\r\n\t}\r\n\r\n\tcentroidTarget[ 0 ] = cminx;\r\n\tcentroidTarget[ 1 ] = cminy;\r\n\tcentroidTarget[ 2 ] = cminz;\r\n\r\n\tcentroidTarget[ 3 ] = cmaxx;\r\n\tcentroidTarget[ 4 ] = cmaxy;\r\n\tcentroidTarget[ 5 ] = cmaxz;\r\n\r\n}\r\n\r\n\r\n// reorders `tris` such that for `count` elements after `offset`, elements on the left side of the split\r\n// will be on the left and elements on the right side of the split will be on the right. returns the index\r\n// of the first element on the right side, or offset + count if there are no elements on the right side.\r\nfunction partition( index, triangleBounds, sahPlanes, offset, count, split ) {\r\n\r\n\tlet left = offset;\r\n\tlet right = offset + count - 1;\r\n\tconst pos = split.pos;\r\n\tconst axisOffset = split.axis * 2;\r\n\r\n\t// hoare partitioning, see e.g. https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\r\n\twhile ( true ) {\r\n\r\n\t\twhile ( left <= right && triangleBounds[ left * 6 + axisOffset ] < pos ) {\r\n\r\n\t\t\tleft ++;\r\n\r\n\t\t}\r\n\r\n\t\twhile ( left <= right && triangleBounds[ right * 6 + axisOffset ] >= pos ) {\r\n\r\n\t\t\tright --;\r\n\r\n\t\t}\r\n\r\n\t\tif ( left < right ) {\r\n\r\n\t\t\t// we need to swap all of the information associated with the triangles at index\r\n\t\t\t// left and right; that's the verts in the geometry index, the bounds,\r\n\t\t\t// and perhaps the SAH planes\r\n\r\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\tlet t0 = index[ left * 3 + i ];\r\n\t\t\t\tindex[ left * 3 + i ] = index[ right * 3 + i ];\r\n\t\t\t\tindex[ right * 3 + i ] = t0;\r\n\r\n\t\t\t\tlet t1 = triangleBounds[ left * 6 + i * 2 + 0 ];\r\n\t\t\t\ttriangleBounds[ left * 6 + i * 2 + 0 ] = triangleBounds[ right * 6 + i * 2 + 0 ];\r\n\t\t\t\ttriangleBounds[ right * 6 + i * 2 + 0 ] = t1;\r\n\r\n\t\t\t\tlet t2 = triangleBounds[ left * 6 + i * 2 + 1 ];\r\n\t\t\t\ttriangleBounds[ left * 6 + i * 2 + 1 ] = triangleBounds[ right * 6 + i * 2 + 1 ];\r\n\t\t\t\ttriangleBounds[ right * 6 + i * 2 + 1 ] = t2;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( sahPlanes ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\tlet t = sahPlanes[ i ][ left ];\r\n\t\t\t\t\tsahPlanes[ i ][ left ] = sahPlanes[ i ][ right ];\r\n\t\t\t\t\tsahPlanes[ i ][ right ] = t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tleft ++;\r\n\t\t\tright --;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn left;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getOptimalSplit( nodeBoundingData, centroidBoundingData, triangleBounds, sahPlanes, offset, count, strategy ) {\r\n\r\n\tlet axis = - 1;\r\n\tlet pos = 0;\r\n\r\n\t// Center\r\n\tif ( strategy === CENTER ) {\r\n\r\n\t\taxis = getLongestEdgeIndex( centroidBoundingData );\r\n\t\tif ( axis !== - 1 ) {\r\n\r\n\t\t\tpos = ( centroidBoundingData[ axis ] + centroidBoundingData[ axis + 3 ] ) / 2;\r\n\r\n\t\t}\r\n\r\n\t} else if ( strategy === AVERAGE ) {\r\n\r\n\t\taxis = getLongestEdgeIndex( nodeBoundingData );\r\n\t\tif ( axis !== - 1 ) {\r\n\r\n\t\t\tpos = getAverage( triangleBounds, offset, count, axis );\r\n\r\n\t\t}\r\n\r\n\t} else if ( strategy === SAH ) {\r\n\r\n\t\t// Surface Area Heuristic\r\n\t\t// In order to make this code more terse, the x, y, and z\r\n\t\t// variables of various structures have been stuffed into\r\n\t\t// 0, 1, and 2 array indices so they can be easily computed\r\n\t\t// and accessed within array iteration\r\n\r\n\t\t// Cost values defineed for operations. We're using bounds for traversal, so\r\n\t\t// the cost of traversing one more layer is more than intersecting a triangle.\r\n\t\tconst TRAVERSAL_COST = 3;\r\n\t\tconst INTERSECTION_COST = 1;\r\n\t\tconst bb = arrayToBox( nodeBoundingData, boxTemp );\r\n\r\n\t\t// Define the width, height, and depth of the bounds as a box\r\n\t\tconst dim = [\r\n\t\t\tbb.max.x - bb.min.x,\r\n\t\t\tbb.max.y - bb.min.y,\r\n\t\t\tbb.max.z - bb.min.z\r\n\t\t];\r\n\t\tconst sa = 2 * ( dim[ 0 ] * dim[ 1 ] + dim[ 0 ] * dim[ 2 ] + dim[ 1 ] * dim[ 2 ] );\r\n\r\n\t\t// Get the precalculated planes based for the triangles we're\r\n\t\t// testing here\r\n\t\tconst filteredLists = [[], [], []];\r\n\t\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\t\tfor ( let v = 0; v < 3; v ++ ) {\r\n\r\n\t\t\t\tfilteredLists[ v ].push( sahPlanes[ v ][ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfilteredLists.forEach( planes => planes.sort( ( a, b ) => a.p - b.p ) );\r\n\r\n\t\t// this bounds surface area, left bound SA, left triangles, right bound SA, right triangles\r\n\t\tconst getCost = ( sa, sal, nl, sar, nr ) =>\r\n\t\t\t  TRAVERSAL_COST + INTERSECTION_COST * ( ( sal / sa ) * nl + ( sar / sa ) * nr );\r\n\r\n\t\t// the cost of _not_ splitting into smaller bounds\r\n\t\tconst noSplitCost = INTERSECTION_COST * count;\r\n\r\n\t\taxis = - 1;\r\n\t\tlet bestCost = noSplitCost;\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t// o1 and o2 represent the _other_ two axes in the\r\n\t\t\t// the space. So if we're checking the x (0) dimension,\r\n\t\t\t// then o1 and o2 would be y and z (1 and 2)\r\n\t\t\tconst o1 = ( i + 1 ) % 3;\r\n\t\t\tconst o2 = ( i + 2 ) % 3;\r\n\r\n\t\t\tconst bmin = bb.min[ xyzFields[ i ] ];\r\n\t\t\tconst bmax = bb.max[ xyzFields[ i ] ];\r\n\t\t\tconst planes = filteredLists[ i ];\r\n\r\n\t\t\t// The number of left and right triangles on either side\r\n\t\t\t// given the current split\r\n\t\t\tlet nl = 0;\r\n\t\t\tlet nr = count;\r\n\t\t\tfor ( let p = 0; p < planes.length; p ++ ) {\r\n\r\n\t\t\t\tconst pinfo = planes[ p ];\r\n\r\n\t\t\t\t// As the plane moves, we have to increment or decrement the\r\n\t\t\t\t// number of triangles on either side of the plane\r\n\t\t\t\tnl ++;\r\n\t\t\t\tnr --;\r\n\r\n\t\t\t\t// the distance from the plane to the edge of the broader bounds\r\n\t\t\t\tconst ldim = pinfo.p - bmin;\r\n\t\t\t\tconst rdim = bmax - pinfo.p;\r\n\r\n\t\t\t\t// same for the other two dimensions\r\n\t\t\t\tlet ldimo1 = dim[ o1 ], rdimo1 = dim[ o1 ];\r\n\t\t\t\tlet ldimo2 = dim[ o2 ], rdimo2 = dim[ o2 ];\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t// compute the other bounding planes for the box\r\n\t\t\t\t// if only the current triangles are considered to\r\n\t\t\t\t// be in the box\r\n\t\t\t\t// This is really slow and probably not really worth it\r\n\t\t\t\tconst o1planes = sahPlanes[o1];\r\n\t\t\t\tconst o2planes = sahPlanes[o2];\r\n\t\t\t\tlet lmin = Infinity, lmax = -Infinity;\r\n\t\t\t\tlet rmin = Infinity, rmax = -Infinity;\r\n\t\t\t\tplanes.forEach((p, i) => {\r\n\t\t\t\tconst tri2 = p.tri * 2;\r\n\t\t\t\tconst inf1 = o1planes[tri2 + 0];\r\n\t\t\t\tconst inf2 = o1planes[tri2 + 1];\r\n\t\t\t\tif (i <= nl) {\r\n\t\t\t\tlmin = Math.min(inf1.p, inf2.p, lmin);\r\n\t\t\t\tlmax = Math.max(inf1.p, inf2.p, lmax);\r\n\t\t\t\t}\r\n\t\t\t\tif (i >= nr) {\r\n\t\t\t\trmin = Math.min(inf1.p, inf2.p, rmin);\r\n\t\t\t\trmax = Math.max(inf1.p, inf2.p, rmax);\r\n\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tldimo1 = Math.min(lmax - lmin, ldimo1);\r\n\t\t\t\trdimo1 = Math.min(rmax - rmin, rdimo1);\r\n\r\n\t\t\t\tplanes.forEach((p, i) => {\r\n\t\t\t\tconst tri2 = p.tri * 2;\r\n\t\t\t\tconst inf1 = o2planes[tri2 + 0];\r\n\t\t\t\tconst inf2 = o2planes[tri2 + 1];\r\n\t\t\t\tif (i <= nl) {\r\n\t\t\t\tlmin = Math.min(inf1.p, inf2.p, lmin);\r\n\t\t\t\tlmax = Math.max(inf1.p, inf2.p, lmax);\r\n\t\t\t\t}\r\n\t\t\t\tif (i >= nr) {\r\n\t\t\t\trmin = Math.min(inf1.p, inf2.p, rmin);\r\n\t\t\t\trmax = Math.max(inf1.p, inf2.p, rmax);\r\n\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tldimo2 = Math.min(lmax - lmin, ldimo2);\r\n\t\t\t\trdimo2 = Math.min(rmax - rmin, rdimo2);\r\n\t\t\t\t*/\r\n\r\n\t\t\t\t// surface areas and cost\r\n\t\t\t\tconst sal = 2 * ( ldimo1 * ldimo2 + ldimo1 * ldim + ldimo2 * ldim );\r\n\t\t\t\tconst sar = 2 * ( rdimo1 * rdimo2 + rdimo1 * rdim + rdimo2 * rdim );\r\n\t\t\t\tconst cost = getCost( sa, sal, nl, sar, nr );\r\n\r\n\t\t\t\tif ( cost < bestCost ) {\r\n\r\n\t\t\t\t\taxis = i;\r\n\t\t\t\t\tpos = pinfo.p;\r\n\t\t\t\t\tbestCost = cost;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { axis, pos };\r\n\r\n}\r\n\r\n// returns the average coordinate on the specified axis of the all the provided triangles\r\nfunction getAverage( triangleBounds, offset, count, axis ) {\r\n\r\n\tlet avg = 0;\r\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\tavg += triangleBounds[ i * 6 + axis * 2 ];\r\n\r\n\t}\r\n\r\n\treturn avg / count;\r\n\r\n}\r\n\r\nfunction computeSAHPlanes( triangleBounds ) {\r\n\r\n\tconst triCount = triangleBounds.length / 6;\r\n\tconst sahPlanes = [ new Array( triCount ), new Array( triCount ), new Array( triCount ) ];\r\n\tfor ( let tri = 0; tri < triCount; tri ++ ) {\r\n\r\n\t\tfor ( let el = 0; el < 3; el ++ ) {\r\n\r\n\t\t\tsahPlanes[ el ][ tri ] = { p: triangleBounds[ tri * 6 + el * 2 ], tri };\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn sahPlanes;\r\n\r\n}\r\n\r\n// precomputes the bounding box for each triangle; required for quickly calculating tree splits.\r\n// result is an array of size tris.length * 6 where triangle i maps to a\r\n// [x_center, x_delta, y_center, y_delta, z_center, z_delta] tuple starting at index i * 6,\r\n// representing the center and half-extent in each dimension of triangle i\r\nfunction computeTriangleBounds( geo ) {\r\n\r\n\tconst verts = geo.attributes.position.array;\r\n\tconst index = geo.index.array;\r\n\tconst triCount = index.length / 3;\r\n\tconst triangleBounds = new Float32Array( triCount * 6 );\r\n\r\n\tfor ( let tri = 0; tri < triCount; tri ++ ) {\r\n\r\n\t\tconst tri3 = tri * 3;\r\n\t\tconst tri6 = tri * 6;\r\n\t\tconst ai = index[ tri3 + 0 ] * 3;\r\n\t\tconst bi = index[ tri3 + 1 ] * 3;\r\n\t\tconst ci = index[ tri3 + 2 ] * 3;\r\n\r\n\t\tfor ( let el = 0; el < 3; el ++ ) {\r\n\r\n\t\t\tconst a = verts[ ai + el ];\r\n\t\t\tconst b = verts[ bi + el ];\r\n\t\t\tconst c = verts[ ci + el ];\r\n\r\n\t\t\tlet min = a;\r\n\t\t\tif ( b < min ) min = b;\r\n\t\t\tif ( c < min ) min = c;\r\n\r\n\t\t\tlet max = a;\r\n\t\t\tif ( b > max ) max = b;\r\n\t\t\tif ( c > max ) max = c;\r\n\r\n\t\t\t// Increase the bounds size by float32 epsilon to avoid precision errors when\r\n\t\t\t// converting to 32 bit float. Scale the epsilon by the size of the numbers being\r\n\t\t\t// worked with.\r\n\t\t\tconst halfExtents = ( max - min ) / 2;\r\n\t\t\tconst el2 = el * 2;\r\n\t\t\ttriangleBounds[ tri6 + el2 + 0 ] = min + halfExtents;\r\n\t\t\ttriangleBounds[ tri6 + el2 + 1 ] = halfExtents + ( Math.abs( min ) + halfExtents ) * FLOAT32_EPSILON;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn triangleBounds;\r\n\r\n}\r\n\r\nexport function buildTree( geo, options ) {\r\n\r\n\t// either recursively splits the given node, creating left and right subtrees for it, or makes it a leaf node,\r\n\t// recording the offset and count of its triangles and writing them into the reordered geometry index.\r\n\tfunction splitNode( node, offset, count, centroidBoundingData = null, depth = 0 ) {\r\n\r\n\t\tif ( ! reachedMaxDepth && depth >= maxDepth ) {\r\n\r\n\t\t\treachedMaxDepth = true;\r\n\t\t\tif ( verbose ) {\r\n\r\n\t\t\t\tconsole.warn( `MeshBVH: Max depth of ${ maxDepth } reached when generating BVH. Consider increasing maxDepth.` );\r\n\t\t\t\tconsole.warn( this, geo );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// early out if we've met our capacity\r\n\t\tif ( count <= maxLeafTris || depth >= maxDepth ) {\r\n\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\t\t\treturn node;\r\n\r\n\t\t}\r\n\r\n\t\t// Find where to split the volume\r\n\t\tconst split = getOptimalSplit( node.boundingData, centroidBoundingData, triangleBounds, sahPlanes, offset, count, strategy );\r\n\t\tif ( split.axis === - 1 ) {\r\n\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\t\t\treturn node;\r\n\r\n\t\t}\r\n\r\n\t\tconst splitOffset = partition( indexArray, triangleBounds, sahPlanes, offset, count, split );\r\n\r\n\t\t// create the two new child nodes\r\n\t\tif ( splitOffset === offset || splitOffset === offset + count ) {\r\n\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnode.splitAxis = split.axis;\r\n\r\n\t\t\t// create the left child and compute its bounding box\r\n\t\t\tconst left = new MeshBVHNode();\r\n\t\t\tconst lstart = offset;\r\n\t\t\tconst lcount = splitOffset - offset;\r\n\t\t\tnode.left = left;\r\n\t\t\tleft.boundingData = new Float32Array( 6 );\r\n\r\n\t\t\tif ( lazyGeneration ) {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, lstart, lcount, left.boundingData );\r\n\t\t\t\tleft.continueGeneration = function () {\r\n\r\n\t\t\t\t\tdelete this.continueGeneration;\r\n\t\t\t\t\tgetCentroidBounds( triangleBounds, lstart, lcount, cacheCentroidBoundingData );\r\n\t\t\t\t\tsplitNode( left, lstart, lcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, lstart, lcount, left.boundingData, cacheCentroidBoundingData );\r\n\t\t\t\tsplitNode( left, lstart, lcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// repeat for right\r\n\t\t\tconst right = new MeshBVHNode();\r\n\t\t\tconst rstart = splitOffset;\r\n\t\t\tconst rcount = count - lcount;\r\n\t\t\tnode.right = right;\r\n\t\t\tright.boundingData = new Float32Array( 6 );\r\n\r\n\t\t\tif ( lazyGeneration ) {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, rstart, rcount, right.boundingData );\r\n\t\t\t\tright.continueGeneration = function () {\r\n\r\n\t\t\t\t\tdelete this.continueGeneration;\r\n\t\t\t\t\tgetCentroidBounds( triangleBounds, rstart, rcount, cacheCentroidBoundingData );\r\n\t\t\t\t\tsplitNode( right, rstart, rcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, rstart, rcount, right.boundingData, cacheCentroidBoundingData );\r\n\t\t\t\tsplitNode( right, rstart, rcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn node;\r\n\r\n\t}\r\n\r\n\tensureIndex( geo );\r\n\r\n\tconst cacheCentroidBoundingData = new Float32Array( 6 );\r\n\tconst triangleBounds = computeTriangleBounds( geo );\r\n\tconst sahPlanes = options.strategy === SAH ? computeSAHPlanes( triangleBounds ) : null;\r\n\tconst indexArray = geo.index.array;\r\n\tconst maxDepth = options.maxDepth;\r\n\tconst verbose = options.verbose;\r\n\tconst maxLeafTris = options.maxLeafTris;\r\n\tconst strategy = options.strategy;\r\n\tconst lazyGeneration = options.lazyGeneration;\r\n\tlet reachedMaxDepth = false;\r\n\r\n\tconst roots = [];\r\n\tconst ranges = getRootIndexRanges( geo );\r\n\r\n\tif ( ranges.length === 1 ) {\r\n\r\n\t\tconst root = new MeshBVHNode();\r\n\t\tconst range = ranges[ 0 ];\r\n\r\n\t\tif ( geo.boundingBox != null ) {\r\n\r\n\t\t\troot.boundingData = boxToArray( geo.boundingBox );\r\n\t\t\tgetCentroidBounds( triangleBounds, range.offset, range.count, cacheCentroidBoundingData );\r\n\r\n\t\t} else {\r\n\r\n\t\t\troot.boundingData = new Float32Array( 6 );\r\n\t\t\tgetBounds( triangleBounds, range.offset, range.count, root.boundingData, cacheCentroidBoundingData );\r\n\r\n\t\t}\r\n\r\n\t\tsplitNode( root, range.offset, range.count, cacheCentroidBoundingData );\r\n\t\troots.push( root );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( let range of ranges ) {\r\n\r\n\t\t\tconst root = new MeshBVHNode();\r\n\t\t\troot.boundingData = new Float32Array( 6 );\r\n\t\t\tgetBounds( triangleBounds, range.offset, range.count, root.boundingData, cacheCentroidBoundingData );\r\n\r\n\t\t\tsplitNode( root, range.offset, range.count, cacheCentroidBoundingData );\r\n\t\t\troots.push( root );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// if the geometry doesn't have a bounding box, then let's politely populate it using\r\n\t// the work we did to determine the BVH root bounds\r\n\tif ( geo.boundingBox == null ) {\r\n\r\n\t\tconst rootBox = new Box3();\r\n\t\tgeo.boundingBox = new Box3();\r\n\r\n\t\tfor ( let root of roots ) {\r\n\r\n\t\t\tgeo.boundingBox.union( arrayToBox( root.boundingData, rootBox ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn roots;\r\n\r\n}\r\n","import { Vector3 } from 'three';\r\n\r\nexport class SeparatingAxisBounds {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.min = Infinity;\r\n\t\tthis.max = - Infinity;\r\n\r\n\t}\r\n\r\n\tsetFromPointsField( points, field ) {\r\n\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst p = points[ i ];\r\n\t\t\tconst val = p[ field ];\r\n\t\t\tmin = Math.min( val, min );\r\n\t\t\tmax = Math.max( val, max );\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\r\n\t}\r\n\r\n\tsetFromPoints( axis, points ) {\r\n\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst p = points[ i ];\r\n\t\t\tconst val = axis.dot( p );\r\n\t\t\tmin = Math.min( val, min );\r\n\t\t\tmax = Math.max( val, max );\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\t}\r\n\r\n\tisSeparated( other ) {\r\n\r\n\t\treturn this.min > other.max || other.min > this.max;\r\n\r\n\t}\r\n\r\n}\r\n\r\nSeparatingAxisBounds.prototype.setFromBox = ( function () {\r\n\r\n\tconst p = new Vector3();\r\n\treturn function setFromBox( axis, box ) {\r\n\r\n\t\tconst boxMin = box.min;\r\n\t\tconst boxMax = box.max;\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\r\n\r\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\r\n\r\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\r\n\r\n\t\t\t\t\tp.x = boxMin.x * x + boxMax.x * ( 1 - x );\r\n\t\t\t\t\tp.y = boxMin.y * y + boxMax.y * ( 1 - y );\r\n\t\t\t\t\tp.z = boxMin.z * z + boxMax.z * ( 1 - z );\r\n\r\n\t\t\t\t\tconst val = axis.dot( p );\r\n\t\t\t\t\tmin = Math.min( val, min );\r\n\t\t\t\t\tmax = Math.max( val, max );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nexport const areIntersecting = ( function () {\r\n\r\n\tconst cacheSatBounds = new SeparatingAxisBounds();\r\n\treturn function areIntersecting( shape1, shape2 ) {\r\n\r\n\t\tconst points1 = shape1.points;\r\n\t\tconst satAxes1 = shape1.satAxes;\r\n\t\tconst satBounds1 = shape1.satBounds;\r\n\r\n\t\tconst points2 = shape2.points;\r\n\t\tconst satAxes2 = shape2.satAxes;\r\n\t\tconst satBounds2 = shape2.satBounds;\r\n\r\n\t\t// check axes of the first shape\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds1[ i ];\r\n\t\t\tconst sa = satAxes1[ i ];\r\n\t\t\tcacheSatBounds.setFromPoints( sa, points2 );\r\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\t// check axes of the second shape\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds2[ i ];\r\n\t\t\tconst sa = satAxes2[ i ];\r\n\t\t\tcacheSatBounds.setFromPoints( sa, points1 );\r\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n","import { Vector3, Vector2, Plane, Line3 } from 'three';\nexport const closestPointLineToLine = ( function () {\n\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/Line.cpp#L56\n\tconst dir1 = new Vector3();\n\tconst dir2 = new Vector3();\n\tconst v02 = new Vector3();\n\treturn function closestPointLineToLine( l1, l2, result ) {\n\n\t\tconst v0 = l1.start;\n\t\tconst v10 = dir1;\n\t\tconst v2 = l2.start;\n\t\tconst v32 = dir2;\n\n\t\tv02.subVectors( v0, v2 );\n\t\tdir1.subVectors( l1.end, l2.start );\n\t\tdir2.subVectors( l2.end, l2.start );\n\n\t\t// float d0232 = v02.Dot(v32);\n\t\tconst d0232 = v02.dot( v32 );\n\n\t\t// float d3210 = v32.Dot(v10);\n\t\tconst d3210 = v32.dot( v10 );\n\n\t\t// float d3232 = v32.Dot(v32);\n\t\tconst d3232 = v32.dot( v32 );\n\n\t\t// float d0210 = v02.Dot(v10);\n\t\tconst d0210 = v02.dot( v10 );\n\n\t\t// float d1010 = v10.Dot(v10);\n\t\tconst d1010 = v10.dot( v10 );\n\n\t\t// float denom = d1010*d3232 - d3210*d3210;\n\t\tconst denom = d1010 * d3232 - d3210 * d3210;\n\n\t\tlet d, d2;\n\t\tif ( denom !== 0 ) {\n\n\t\t\td = ( d0232 * d3210 - d0210 * d3232 ) / denom;\n\n\t\t} else {\n\n\t\t\td = 0;\n\n\t\t}\n\n\t\td2 = ( d0232 + d * d3210 ) / d3232;\n\n\t\tresult.x = d;\n\t\tresult.y = d2;\n\n\t};\n\n} )();\n\nexport const closestPointsSegmentToSegment = ( function () {\n\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/LineSegment.cpp#L187\n\tconst paramResult = new Vector2();\n\tconst temp1 = new Vector3();\n\tconst temp2 = new Vector3();\n\treturn function closestPointsSegmentToSegment( l1, l2, target1, target2 ) {\n\n\t\tclosestPointLineToLine( l1, l2, paramResult );\n\n\t\tlet d = paramResult.x;\n\t\tlet d2 = paramResult.y;\n\t\tif ( d >= 0 && d <= 1 && d2 >= 0 && d2 <= 1 ) {\n\n\t\t\tl1.at( d, target1 );\n\t\t\tl2.at( d2, target2 );\n\n\t\t\treturn;\n\n\t\t} else if ( d >= 0 && d <= 1 ) {\n\n\t\t\t// Only d2 is out of bounds.\n\t\t\tif ( d2 < 0 ) {\n\n\t\t\t\tl2.at( 0, target2 );\n\n\t\t\t} else {\n\n\t\t\t\tl2.at( 1, target2 );\n\n\t\t\t}\n\n\t\t\tl1.closestPointToPoint( target2, true, target1 );\n\t\t\treturn;\n\n\t\t} else if ( d2 >= 0 && d2 <= 1 ) {\n\n\t\t\t// Only d is out of bounds.\n\t\t\tif ( d < 0 ) {\n\n\t\t\t\tl1.at( 0, target1 );\n\n\t\t\t} else {\n\n\t\t\t\tl1.at( 1, target1 );\n\n\t\t\t}\n\n\t\t\tl2.closestPointToPoint( target1, true, target2 );\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// Both u and u2 are out of bounds.\n\t\t\tlet p;\n\t\t\tif ( d < 0 ) {\n\n\t\t\t\tp = l1.start;\n\n\t\t\t} else {\n\n\t\t\t\tp = l1.end;\n\n\t\t\t}\n\n\t\t\tlet p2;\n\t\t\tif ( d2 < 0 ) {\n\n\t\t\t\tp2 = l2.start;\n\n\t\t\t} else {\n\n\t\t\t\tp2 = l2.end;\n\n\t\t\t}\n\n\t\t\tconst closestPoint = temp1;\n\t\t\tconst closestPoint2 = temp2;\n\t\t\tl1.closestPointToPoint( p2, true, temp1 );\n\t\t\tl2.closestPointToPoint( p, true, temp2 );\n\n\t\t\tif ( closestPoint.distanceToSquared( p2 ) <= closestPoint2.distanceToSquared( p ) ) {\n\n\t\t\t\ttarget1.copy( closestPoint );\n\t\t\t\ttarget2.copy( p2 );\n\t\t\t\treturn;\n\n\t\t\t} else {\n\n\t\t\t\ttarget1.copy( p );\n\t\t\t\ttarget2.copy( closestPoint2 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n} )();\n\n\nexport const sphereIntersectTriangle = ( function () {\n\n\t// https://stackoverflow.com/questions/34043955/detect-collision-between-sphere-and-triangle-in-three-js\n\tconst closestPointTemp = new Vector3();\n\tconst projectedPointTemp = new Vector3();\n\tconst planeTemp = new Plane();\n\tconst lineTemp = new Line3();\n\treturn function sphereIntersectTriangle( sphere, triangle ) {\n\n\t\tconst { radius, center } = sphere;\n\t\tconst { a, b, c } = triangle;\n\n\t\t// phase 1\n\t\tlineTemp.start = a;\n\t\tlineTemp.end = b;\n\t\tconst closestPoint1 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint1.distanceTo( center ) <= radius ) return true;\n\n\t\tlineTemp.start = a;\n\t\tlineTemp.end = c;\n\t\tconst closestPoint2 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint2.distanceTo( center ) <= radius ) return true;\n\n\t\tlineTemp.start = b;\n\t\tlineTemp.end = c;\n\t\tconst closestPoint3 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint3.distanceTo( center ) <= radius ) return true;\n\n\t\t// phase 2\n\t\tconst plane = triangle.getPlane( planeTemp );\n\t\tconst dp = Math.abs( plane.distanceToPoint( center ) );\n\t\tif ( dp <= radius ) {\n\n\t\t\tconst pp = plane.projectPoint( center, projectedPointTemp );\n\t\t\tconst cp = triangle.containsPoint( pp );\n\t\t\tif ( cp ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n} )();\n","import { Triangle, Vector3, Line3, Sphere } from 'three';\r\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\r\nimport { closestPointsSegmentToSegment, sphereIntersectTriangle } from './MathUtilities.js';\r\n\r\nexport class SeparatingAxisTriangle extends Triangle {\r\n\r\n\tconstructor( ...args ) {\r\n\r\n\t\tsuper( ...args );\r\n\r\n\t\tthis.isSeparatingAxisTriangle = true;\r\n\t\tthis.satAxes = new Array( 4 ).fill().map( () => new Vector3() );\r\n\t\tthis.satBounds = new Array( 4 ).fill().map( () => new SeparatingAxisBounds() );\r\n\t\tthis.points = [ this.a, this.b, this.c ];\r\n\t\tthis.sphere = new Sphere();\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t}\r\n\r\n\tintersectsSphere( sphere ) {\r\n\r\n\t\treturn sphereIntersectTriangle( sphere, this );\r\n\r\n\t}\r\n\r\n}\r\n\r\nSeparatingAxisTriangle.prototype.update = ( function () {\r\n\r\n\tconst arr = new Array( 3 );\r\n\treturn function update() {\r\n\r\n\t\tconst a = this.a;\r\n\t\tconst b = this.b;\r\n\t\tconst c = this.c;\r\n\r\n\t\tarr[ 0 ] = this.a;\r\n\t\tarr[ 1 ] = this.b;\r\n\t\tarr[ 2 ] = this.c;\r\n\r\n\t\tconst satAxes = this.satAxes;\r\n\t\tconst satBounds = this.satBounds;\r\n\r\n\t\tconst axis0 = satAxes[ 0 ];\r\n\t\tconst sab0 = satBounds[ 0 ];\r\n\t\tthis.getNormal( axis0 );\r\n\t\tsab0.setFromPoints( axis0, arr );\r\n\r\n\t\tconst axis1 = satAxes[ 1 ];\r\n\t\tconst sab1 = satBounds[ 1 ];\r\n\t\taxis1.subVectors( a, b );\r\n\t\tsab1.setFromPoints( axis1, arr );\r\n\r\n\t\tconst axis2 = satAxes[ 2 ];\r\n\t\tconst sab2 = satBounds[ 2 ];\r\n\t\taxis2.subVectors( b, c );\r\n\t\tsab2.setFromPoints( axis2, arr );\r\n\r\n\t\tconst axis3 = satAxes[ 3 ];\r\n\t\tconst sab3 = satBounds[ 3 ];\r\n\t\taxis3.subVectors( c, a );\r\n\t\tsab3.setFromPoints( axis3, arr );\r\n\r\n\t\tthis.sphere.setFromPoints( this.points );\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nSeparatingAxisTriangle.prototype.closestPointToSegment = ( function () {\r\n\r\n\tconst point1 = new Vector3();\r\n\tconst point2 = new Vector3();\r\n\tconst edge = new Line3();\r\n\r\n\treturn function distanceToSegment( segment, target1 = null, target2 = null ) {\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tconst { start, end } = segment;\r\n\t\tconst points = this.points;\r\n\t\tlet distSq;\r\n\t\tlet closestDistanceSq = Infinity;\r\n\r\n\t\t// check the triangle edges\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst nexti = ( i + 1 ) % 3;\r\n\t\t\tedge.start.copy( points[ i ] );\r\n\t\t\tedge.end.copy( points[ nexti ] );\r\n\r\n\t\t\tclosestPointsSegmentToSegment( edge, segment, point1, point2 );\r\n\r\n\t\t\tdistSq = point1.distanceToSquared( point2 );\r\n\t\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = distSq;\r\n\t\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// check end points\r\n\t\tthis.closestPointToPoint( start, point1 );\r\n\t\tdistSq = start.distanceToSquared( point1 );\r\n\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\tclosestDistanceSq = distSq;\r\n\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\tif ( target2 ) target2.copy( start );\r\n\r\n\t\t}\r\n\r\n\t\tthis.closestPointToPoint( end, point1 );\r\n\t\tdistSq = end.distanceToSquared( point1 );\r\n\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\tclosestDistanceSq = distSq;\r\n\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\tif ( target2 ) target2.copy( end );\r\n\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( closestDistanceSq );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nSeparatingAxisTriangle.prototype.intersectsTriangle = ( function () {\r\n\r\n\tconst saTri2 = new SeparatingAxisTriangle();\r\n\tconst arr1 = new Array( 3 );\r\n\tconst arr2 = new Array( 3 );\r\n\tconst cachedSatBounds = new SeparatingAxisBounds();\r\n\tconst cachedSatBounds2 = new SeparatingAxisBounds();\r\n\tconst cachedAxis = new Vector3();\r\n\treturn function intersectsTriangle( other ) {\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! other.isSeparatingAxisTriangle ) {\r\n\r\n\t\t\tsaTri2.copy( other );\r\n\t\t\tsaTri2.update();\r\n\t\t\tother = saTri2;\r\n\r\n\t\t}\r\n\r\n\t\tconst satBounds1 = this.satBounds;\r\n\t\tconst satAxes1 = this.satAxes;\r\n\t\tarr2[ 0 ] = other.a;\r\n\t\tarr2[ 1 ] = other.b;\r\n\t\tarr2[ 2 ] = other.c;\r\n\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds1[ i ];\r\n\t\t\tconst sa = satAxes1[ i ];\r\n\t\t\tcachedSatBounds.setFromPoints( sa, arr2 );\r\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\tconst satBounds2 = other.satBounds;\r\n\t\tconst satAxes2 = other.satAxes;\r\n\t\tarr1[ 0 ] = this.a;\r\n\t\tarr1[ 1 ] = this.b;\r\n\t\tarr1[ 2 ] = this.c;\r\n\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds2[ i ];\r\n\t\t\tconst sa = satAxes2[ i ];\r\n\t\t\tcachedSatBounds.setFromPoints( sa, arr1 );\r\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\t// check crossed axes\r\n\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\tconst sa1 = satAxes1[ i ];\r\n\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\r\n\r\n\t\t\t\tconst sa2 = satAxes2[ i2 ];\r\n\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\r\n\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, arr1 );\r\n\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, arr2 );\r\n\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n\r\nSeparatingAxisTriangle.prototype.distanceToPoint = ( function () {\r\n\r\n\tconst target = new Vector3();\r\n\treturn function distanceToPoint( point ) {\r\n\r\n\t\tthis.closestPointToPoint( point, target );\r\n\t\treturn point.distanceTo( target );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n\r\nSeparatingAxisTriangle.prototype.distanceToTriangle = ( function () {\r\n\r\n\tconst point = new Vector3();\r\n\tconst point2 = new Vector3();\r\n\tconst cornerFields = [ 'a', 'b', 'c' ];\r\n\tconst line1 = new Line3();\r\n\tconst line2 = new Line3();\r\n\r\n\treturn function distanceToTriangle( other, target1 = null, target2 = null ) {\r\n\r\n\t\tif ( other.needsUpdate ) {\r\n\r\n\t\t\tother.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.intersectsTriangle( other ) ) {\r\n\r\n\t\t\t// TODO: This will not result in a point that lies on\r\n\t\t\t// the intersection line of the triangles\r\n\t\t\tif ( target1 || target2 ) {\r\n\r\n\t\t\t\tthis.getMidpoint( point );\r\n\t\t\t\tother.closestPointToPoint( point, point2 );\r\n\t\t\t\tthis.closestPointToPoint( point2, point );\r\n\r\n\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t\tlet closestDistanceSq = Infinity;\r\n\r\n\t\t// check all point distances\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tlet dist;\r\n\t\t\tconst field = cornerFields[ i ];\r\n\t\t\tconst otherVec = other[ field ];\r\n\t\t\tthis.closestPointToPoint( otherVec, point );\r\n\r\n\t\t\tdist = otherVec.distanceToSquared( point );\r\n\r\n\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\tif ( target2 ) target2.copy( otherVec );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tconst thisVec = this[ field ];\r\n\t\t\tother.closestPointToPoint( thisVec, point );\r\n\r\n\t\t\tdist = thisVec.distanceToSquared( point );\r\n\r\n\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\tif ( target1 ) target1.copy( thisVec );\r\n\t\t\t\tif ( target2 ) target2.copy( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst f11 = cornerFields[ i ];\r\n\t\t\tconst f12 = cornerFields[ ( i + 1 ) % 3 ];\r\n\t\t\tline1.set( this[ f11 ], this[ f12 ] );\r\n\t\t\tfor ( let i2 = 0; i2 < 3; i2 ++ ) {\r\n\r\n\t\t\t\tconst f21 = cornerFields[ i2 ];\r\n\t\t\t\tconst f22 = cornerFields[ ( i2 + 1 ) % 3 ];\r\n\t\t\t\tline2.set( other[ f21 ], other[ f22 ] );\r\n\r\n\t\t\t\tclosestPointsSegmentToSegment( line1, line2, point, point2 );\r\n\r\n\t\t\t\tconst dist = point.distanceToSquared( point2 );\r\n\t\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( closestDistanceSq );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n","import { Box3, Vector3, Matrix4, Sphere, Line3 } from 'three';\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\nimport { SeparatingAxisTriangle } from './SeparatingAxisTriangle.js';\nimport { closestPointsSegmentToSegment } from './MathUtilities.js';\n\nexport class OrientedBox extends Box3 {\n\n\tconstructor( ...args ) {\n\n\t\tsuper( ...args );\n\n\t\tthis.isOrientedBox = true;\n\t\tthis.matrix = new Matrix4();\n\t\tthis.invMatrix = new Matrix4();\n\t\tthis.points = new Array( 8 ).fill().map( () => new Vector3() );\n\t\tthis.satAxes = new Array( 3 ).fill().map( () => new Vector3() );\n\t\tthis.satBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.alignedSatBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.sphere = new Sphere();\n\n\t}\n\n\tset( min, max, matrix ) {\n\n\t\tsuper.set( min, max );\n\t\tthis.matrix = matrix;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tsuper.copy( other );\n\t\tthis.matrix.copy( other.matrix );\n\n\t}\n\n}\n\nOrientedBox.prototype.update = ( function () {\n\n\treturn function update() {\n\n\t\tconst matrix = this.matrix;\n\t\tconst min = this.min;\n\t\tconst max = this.max;\n\n\t\tconst points = this.points;\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tconst i = ( ( 1 << 0 ) * x ) | ( ( 1 << 1 ) * y ) | ( ( 1 << 2 ) * z );\n\t\t\t\t\tconst v = points[ i ];\n\t\t\t\t\tv.x = x ? max.x : min.x;\n\t\t\t\t\tv.y = y ? max.y : min.y;\n\t\t\t\t\tv.z = z ? max.z : min.z;\n\n\t\t\t\t\tv.applyMatrix4( matrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.sphere.setFromPoints( this.points );\n\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\t\tconst minVec = points[ 0 ];\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst axis = satAxes[ i ];\n\t\t\tconst sb = satBounds[ i ];\n\t\t\tconst index = 1 << i;\n\t\t\tconst pi = points[ index ];\n\n\t\t\taxis.subVectors( minVec, pi );\n\t\t\tsb.setFromPoints( axis, points );\n\n\t\t}\n\n\t\tconst alignedSatBounds = this.alignedSatBounds;\n\t\talignedSatBounds[ 0 ].setFromPointsField( points, 'x' );\n\t\talignedSatBounds[ 1 ].setFromPointsField( points, 'y' );\n\t\talignedSatBounds[ 2 ].setFromPointsField( points, 'z' );\n\n\t\tthis.invMatrix.copy( this.matrix ).invert();\n\n\t};\n\n} )();\n\nOrientedBox.prototype.intersectsBox = ( function () {\n\n\tconst aabbBounds = new SeparatingAxisBounds();\n\treturn function intersectsBox( box ) {\n\n\t\tif ( ! box.intersectsSphere( this.sphere ) ) return false;\n\n\t\tconst min = box.min;\n\t\tconst max = box.max;\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\t\tconst alignedSatBounds = this.alignedSatBounds;\n\n\t\taabbBounds.min = min.x;\n\t\taabbBounds.max = max.x;\n\t\tif ( alignedSatBounds[ 0 ].isSeparated( aabbBounds ) ) return false;\n\n\t\taabbBounds.min = min.y;\n\t\taabbBounds.max = max.y;\n\t\tif ( alignedSatBounds[ 1 ].isSeparated( aabbBounds ) ) return false;\n\n\t\taabbBounds.min = min.z;\n\t\taabbBounds.max = max.z;\n\t\tif ( alignedSatBounds[ 2 ].isSeparated( aabbBounds ) ) return false;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst axis = satAxes[ i ];\n\t\t\tconst sb = satBounds[ i ];\n\t\t\taabbBounds.setFromBox( axis, box );\n\t\t\tif ( sb.isSeparated( aabbBounds ) ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.intersectsTriangle = ( function () {\n\n\tconst saTri = new SeparatingAxisTriangle();\n\tconst pointsArr = new Array( 3 );\n\tconst cachedSatBounds = new SeparatingAxisBounds();\n\tconst cachedSatBounds2 = new SeparatingAxisBounds();\n\tconst cachedAxis = new Vector3();\n\treturn function intersectsTriangle( triangle ) {\n\n\t\tif ( ! triangle.isSeparatingAxisTriangle ) {\n\n\t\t\tsaTri.copy( triangle );\n\t\t\tsaTri.update();\n\t\t\ttriangle = saTri;\n\n\t\t} else if ( triangle.needsUpdate ) {\n\n\t\t\ttriangle.update();\n\n\t\t}\n\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\n\t\tpointsArr[ 0 ] = triangle.a;\n\t\tpointsArr[ 1 ] = triangle.b;\n\t\tpointsArr[ 2 ] = triangle.c;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = satBounds[ i ];\n\t\t\tconst sa = satAxes[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, pointsArr );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t}\n\n\t\tconst triSatBounds = triangle.satBounds;\n\t\tconst triSatAxes = triangle.satAxes;\n\t\tconst points = this.points;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = triSatBounds[ i ];\n\t\t\tconst sa = triSatAxes[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, points );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t}\n\n\t\t// check crossed axes\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sa1 = satAxes[ i ];\n\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\n\n\t\t\t\tconst sa2 = triSatAxes[ i2 ];\n\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\n\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, pointsArr );\n\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, points );\n\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.closestPointToPoint = ( function () {\n\n\treturn function closestPointToPoint( point, target1 ) {\n\n\t\ttarget1\n\t\t\t.copy( point )\n\t\t\t.applyMatrix4( this.invMatrix )\n\t\t\t.clamp( this.min, this.max )\n\t\t\t.applyMatrix4( this.matrix );\n\n\t\treturn target1;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.distanceToPoint = ( function () {\n\n\tconst target = new Vector3();\n\treturn function distanceToPoint( point ) {\n\n\t\tthis.closestPointToPoint( point, target );\n\t\treturn point.distanceTo( target );\n\n\t};\n\n} )();\n\n\nOrientedBox.prototype.distanceToBox = ( function () {\n\n\tconst xyzFields = [ 'x', 'y', 'z' ];\n\tconst segments1 = new Array( 12 ).fill().map( () => new Line3() );\n\tconst segments2 = new Array( 12 ).fill().map( () => new Line3() );\n\n\tconst point1 = new Vector3();\n\tconst point2 = new Vector3();\n\n\treturn function distanceToBox( box, threshold = 0, target1 = null, target2 = null ) {\n\n\t\tif ( this.intersectsBox( box ) ) {\n\n\t\t\tif ( target1 || target2 ) {\n\n\t\t\t\tbox.getCenter( point2 );\n\t\t\t\tthis.closestPointToPoint( point2, point1 );\n\t\t\t\tbox.closestPointToPoint( point1, point2 );\n\n\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t}\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tconst threshold2 = threshold * threshold;\n\t\tconst min = box.min;\n\t\tconst max = box.max;\n\t\tconst points = this.points;\n\n\n\t\t// iterate over every edge and compare distances\n\t\tlet closestDistanceSq = Infinity;\n\n\t\t// check over all these points\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst p = points[ i ];\n\t\t\tpoint2.copy( p ).clamp( min, max );\n\n\t\t\tconst dist = p.distanceToSquared( point2 );\n\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\tif ( target1 ) target1.copy( p );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate and check all line segment distances\n\t\tlet count = 0;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let i1 = 0; i1 <= 1; i1 ++ ) {\n\n\t\t\t\tfor ( let i2 = 0; i2 <= 1; i2 ++ ) {\n\n\t\t\t\t\tconst nextIndex = ( i + 1 ) % 3;\n\t\t\t\t\tconst nextIndex2 = ( i + 2 ) % 3;\n\n\t\t\t\t\t// get obb line segments\n\t\t\t\t\tconst index = i1 << nextIndex | i2 << nextIndex2;\n\t\t\t\t\tconst index2 = 1 << i | i1 << nextIndex | i2 << nextIndex2;\n\t\t\t\t\tconst p1 = points[ index ];\n\t\t\t\t\tconst p2 = points[ index2 ];\n\t\t\t\t\tconst line1 = segments1[ count ];\n\t\t\t\t\tline1.set( p1, p2 );\n\n\n\t\t\t\t\t// get aabb line segments\n\t\t\t\t\tconst f1 = xyzFields[ i ];\n\t\t\t\t\tconst f2 = xyzFields[ nextIndex ];\n\t\t\t\t\tconst f3 = xyzFields[ nextIndex2 ];\n\t\t\t\t\tconst line2 = segments2[ count ];\n\t\t\t\t\tconst start = line2.start;\n\t\t\t\t\tconst end = line2.end;\n\n\t\t\t\t\tstart[ f1 ] = min[ f1 ];\n\t\t\t\t\tstart[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\n\t\t\t\t\tstart[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\n\n\t\t\t\t\tend[ f1 ] = max[ f1 ];\n\t\t\t\t\tend[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\n\t\t\t\t\tend[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\n\n\t\t\t\t\tcount ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// check all the other boxes point\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tpoint2.x = x ? max.x : min.x;\n\t\t\t\t\tpoint2.y = y ? max.y : min.y;\n\t\t\t\t\tpoint2.z = z ? max.z : min.z;\n\n\t\t\t\t\tthis.closestPointToPoint( point2, point1 );\n\t\t\t\t\tconst dist = point2.distanceToSquared( point1 );\n\t\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 12; i ++ ) {\n\n\t\t\tconst l1 = segments1[ i ];\n\t\t\tfor ( let i2 = 0; i2 < 12; i2 ++ ) {\n\n\t\t\t\tconst l2 = segments2[ i2 ];\n\t\t\t\tclosestPointsSegmentToSegment( l1, l2, point1, point2 );\n\t\t\t\tconst dist = point1.distanceToSquared( point2 );\n\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Math.sqrt( closestDistanceSq );\n\n\t};\n\n} )();\n","// sets the vertices of triangle `tri` with the 3 vertices after i\r\nexport function setTriangle( tri, i, index, pos ) {\r\n\r\n\tconst ta = tri.a;\r\n\tconst tb = tri.b;\r\n\tconst tc = tri.c;\r\n\r\n\tlet i3 = index.getX( i );\r\n\tta.x = pos.getX( i3 );\r\n\tta.y = pos.getY( i3 );\r\n\tta.z = pos.getZ( i3 );\r\n\r\n\ti3 = index.getX( i + 1 );\r\n\ttb.x = pos.getX( i3 );\r\n\ttb.y = pos.getY( i3 );\r\n\ttb.z = pos.getZ( i3 );\r\n\r\n\ti3 = index.getX( i + 2 );\r\n\ttc.x = pos.getX( i3 );\r\n\ttc.y = pos.getY( i3 );\r\n\ttc.z = pos.getZ( i3 );\r\n\r\n}\r\n","import { Vector3, Vector2, Triangle, DoubleSide, BackSide } from 'three';\r\n\r\n// Ripped and modified From THREE.js Mesh raycast\r\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L115\r\nvar vA = new Vector3();\r\nvar vB = new Vector3();\r\nvar vC = new Vector3();\r\n\r\nvar uvA = new Vector2();\r\nvar uvB = new Vector2();\r\nvar uvC = new Vector2();\r\n\r\nvar intersectionPoint = new Vector3();\r\nvar intersectionPointWorld = new Vector3();\r\n\r\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\tvar intersect;\r\n\tif ( material.side === BackSide ) {\r\n\r\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t} else {\r\n\r\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\r\n\r\n\t}\r\n\r\n\tif ( intersect === null ) return null;\r\n\r\n\tintersectionPointWorld.copy( point );\r\n\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\treturn {\r\n\t\tdistance: distance,\r\n\t\tpoint: intersectionPointWorld.clone(),\r\n\t\tobject: object\r\n\t};\r\n\r\n}\r\n\r\nfunction checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\r\n\r\n\tvA.fromBufferAttribute( position, a );\r\n\tvB.fromBufferAttribute( position, b );\r\n\tvC.fromBufferAttribute( position, c );\r\n\r\n\tvar intersection = checkIntersection( object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tif ( uv ) {\r\n\r\n\t\t\tuvA.fromBufferAttribute( uv, a );\r\n\t\t\tuvB.fromBufferAttribute( uv, b );\r\n\t\t\tuvC.fromBufferAttribute( uv, c );\r\n\r\n\t\t\tintersection.uv = Triangle.getUV( intersectionPoint, vA, vB, vC, uvA, uvB, uvC, new Vector2( ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst face = {\r\n\t\t\ta: a,\r\n\t\t\tb: b,\r\n\t\t\tc: c,\r\n\t\t\tnormal: new Vector3( ),\r\n\t\t\tmaterialIndex: 0\r\n\t\t};\r\n\r\n\t\tTriangle.getNormal( vA, vB, vC, face.normal );\r\n\r\n\t\tintersection.face = face;\r\n\t\tintersection.faceIndex = a;\r\n\r\n\t}\r\n\r\n\treturn intersection;\r\n\r\n}\r\n\r\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L258\r\nfunction intersectTri( mesh, geo, raycaster, ray, tri, intersections ) {\r\n\r\n\tconst triOffset = tri * 3;\r\n\tconst a = geo.index.getX( triOffset );\r\n\tconst b = geo.index.getX( triOffset + 1 );\r\n\tconst c = geo.index.getX( triOffset + 2 );\r\n\r\n\tconst intersection = checkBufferGeometryIntersection( mesh, raycaster, ray, geo.attributes.position, geo.attributes.uv, a, b, c );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tintersection.faceIndex = tri;\r\n\t\tif ( intersections ) intersections.push( intersection );\r\n\t\treturn intersection;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n}\r\n\r\nexport { intersectTri };\r\n","import { intersectTri } from './ThreeIntersectionUtilities.js';\r\n\r\nexport function intersectTris( mesh, geo, raycaster, ray, offset, count, intersections ) {\r\n\r\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\tintersectTri( mesh, geo, raycaster, ray, i, intersections );\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport function intersectClosestTri( mesh, geo, raycaster, ray, offset, count ) {\r\n\r\n\tlet dist = Infinity;\r\n\tlet res = null;\r\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\tconst intersection = intersectTri( mesh, geo, raycaster, ray, i );\r\n\t\tif ( intersection && intersection.distance < dist ) {\r\n\r\n\t\t\tres = intersection;\r\n\t\t\tdist = intersection.distance;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn res;\r\n\r\n};\r\n","\r\nimport { Box3, Vector3, Mesh, Matrix4 } from 'three';\r\nimport { intersectTris, intersectClosestTri } from './Utils/RayIntersectTriUtlities.js';\r\nimport { arrayToBox } from './Utils/ArrayBoxUtilities.js';\r\nimport { OrientedBox } from './Utils/OrientedBox.js';\r\nimport { setTriangle } from './Utils/TriangleUtils.js';\r\nimport { SeparatingAxisTriangle } from './Utils/SeparatingAxisTriangle.js';\r\nimport { CONTAINED } from './Constants.js';\r\n\r\nconst boundingBox = new Box3();\r\nconst boxIntersection = new Vector3();\r\nconst xyzFields = [ 'x', 'y', 'z' ];\r\n\r\nfunction intersectRay( node, ray, target ) {\r\n\r\n\tarrayToBox( node.boundingData, boundingBox );\r\n\r\n\treturn ray.intersectBox( boundingBox, target );\r\n\r\n}\r\n\r\nexport function raycast( node, mesh, raycaster, ray, intersects ) {\r\n\r\n\tif ( node.continueGeneration ) {\r\n\r\n\t\tnode.continueGeneration();\r\n\r\n\t}\r\n\r\n\tconst isLeaf = ! ! node.count;\r\n\tif ( isLeaf ) {\r\n\r\n\t\tintersectTris( mesh, mesh.geometry, raycaster, ray, node.offset, node.count, intersects );\r\n\r\n\t} else {\r\n\r\n\t\tif ( intersectRay( node.left, ray, boxIntersection ) ) {\r\n\r\n\t\t\traycast( node.left, mesh, raycaster, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t\tif ( intersectRay( node.right, ray, boxIntersection ) ) {\r\n\r\n\t\t\traycast( node.right, mesh, raycaster, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport function raycastFirst( node, mesh, raycaster, ray ) {\r\n\r\n\tif ( node.continueGeneration ) {\r\n\r\n\t\tnode.continueGeneration();\r\n\r\n\t}\r\n\r\n\tconst isLeaf = ! ! node.count;\r\n\tif ( isLeaf ) {\r\n\r\n\t\treturn intersectClosestTri( mesh, mesh.geometry, raycaster, ray, node.offset, node.count );\r\n\r\n\t} else {\r\n\r\n\r\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\r\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\r\n\t\tconst splitAxis = node.splitAxis;\r\n\t\tconst xyzAxis = xyzFields[ splitAxis ];\r\n\t\tconst rayDir = ray.direction[ xyzAxis ];\r\n\t\tconst leftToRight = rayDir >= 0;\r\n\r\n\t\t// c1 is the child to check first\r\n\t\tlet c1, c2;\r\n\t\tif ( leftToRight ) {\r\n\r\n\t\t\tc1 = node.left;\r\n\t\t\tc2 = node.right;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tc1 = node.right;\r\n\t\t\tc2 = node.left;\r\n\r\n\t\t}\r\n\r\n\t\tconst c1Intersection = intersectRay( c1, ray, boxIntersection );\r\n\t\tconst c1Result = c1Intersection ? raycastFirst( c1, mesh, raycaster, ray ) : null;\r\n\r\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\r\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\r\n\t\tif ( c1Result ) {\r\n\r\n\t\t\t// check if the point is within the second bounds\r\n\t\t\tconst point = c1Result.point[ xyzAxis ];\r\n\t\t\tconst isOutside = leftToRight ?\r\n\t\t\t\tpoint <= c2.boundingData[ splitAxis ] :\r\n\t\t\t\tpoint >= c2.boundingData[ splitAxis + 3 ];\r\n\r\n\t\t\tif ( isOutside ) {\r\n\r\n\t\t\t\treturn c1Result;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// either there was no intersection in the first node, or there could still be a closer\r\n\t\t// intersection in the second, so check the second node and then take the better of the two\r\n\t\tconst c2Intersection = intersectRay( c2, ray, boxIntersection );\r\n\t\tconst c2Result = c2Intersection ? raycastFirst( c2, mesh, raycaster, ray ) : null;\r\n\r\n\t\tif ( c1Result && c2Result ) {\r\n\r\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn c1Result || c2Result || null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport const shapecast = ( function () {\r\n\r\n\tconst _triangle = new SeparatingAxisTriangle();\r\n\tconst _cachedBox1 = new Box3();\r\n\tconst _cachedBox2 = new Box3();\r\n\r\n\tfunction iterateOverTriangles(\r\n\t\toffset,\r\n\t\tcount,\r\n\t\tgeometry,\r\n\t\tintersectsTriangleFunc,\r\n\t\tcontained,\r\n\t\tdepth,\r\n\t\ttriangle\r\n\t) {\r\n\r\n\t\tconst index = geometry.index;\r\n\t\tconst pos = geometry.attributes.position;\r\n\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\tsetTriangle( triangle, i, index, pos );\r\n\t\t\ttriangle.needsUpdate = true;\r\n\r\n\t\t\tif ( intersectsTriangleFunc( triangle, i, i + 1, i + 2, contained, depth ) ) {\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\treturn function shapecast(\r\n\t\tnode,\r\n\t\tmesh,\r\n\t\tintersectsBoundsFunc,\r\n\t\tintersectsTriangleFunc = null,\r\n\t\tnodeScoreFunc = null,\r\n\t\tdepth = 0,\r\n\t\ttriangle = _triangle,\r\n\t\tcachedBox1 = _cachedBox1,\r\n\t\tcachedBox2 = _cachedBox2\r\n\t) {\r\n\r\n\t\t// Define these inside the function so it has access to the local variables needed\r\n\t\t// when converting to the buffer equivalents\r\n\t\tfunction getLeftOffset( node ) {\r\n\r\n\t\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t}\r\n\r\n\t\t\twhile ( ! node.count ) {\r\n\r\n\t\t\t\tnode = node.left;\r\n\t\t\t\tif ( /* skip */ node.continueGeneration ) {\r\n\r\n\t\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node.offset;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getRightEndOffset( node ) {\r\n\r\n\t\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t}\r\n\r\n\t\t\twhile ( ! node.count ) {\r\n\r\n\t\t\t\tnode = node.right;\r\n\t\t\t\tif ( /* skip */ node.continueGeneration ) {\r\n\r\n\t\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node.offset + node.count;\r\n\r\n\t\t}\r\n\r\n\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\tnode.continueGeneration();\r\n\r\n\t\t}\r\n\r\n\t\tconst isLeaf = ! ! node.count;\r\n\t\tif ( isLeaf && intersectsTriangleFunc ) {\r\n\r\n\t\t\tconst geometry = mesh.geometry;\r\n\t\t\tconst offset = node.offset;\r\n\t\t\tconst count = node.count;\r\n\t\t\treturn iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, false, depth, triangle );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst left = node.left;\r\n\t\t\tconst right = node.right;\r\n\t\t\tlet c1 = left;\r\n\t\t\tlet c2 = right;\r\n\r\n\t\t\tlet score1, score2;\r\n\t\t\tlet box1, box2;\r\n\t\t\tif ( nodeScoreFunc ) {\r\n\r\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tbox2 = cachedBox2;\r\n\r\n\t\t\t\tarrayToBox( c1.boundingData, box1 );\r\n\t\t\t\tarrayToBox( c2.boundingData, box2 );\r\n\r\n\t\t\t\tscore1 = nodeScoreFunc( box1 );\r\n\t\t\t\tscore2 = nodeScoreFunc( box2 );\r\n\r\n\t\t\t\tif ( score2 < score1 ) {\r\n\r\n\t\t\t\t\tc1 = right;\r\n\t\t\t\t\tc2 = left;\r\n\r\n\t\t\t\t\tconst temp = score1;\r\n\t\t\t\t\tscore1 = score2;\r\n\t\t\t\t\tscore2 = temp;\r\n\r\n\t\t\t\t\tbox1 = box2;\r\n\t\t\t\t\t// box2 is always set before use below\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Check box 1 intersection\r\n\t\t\tif ( ! box1 ) {\r\n\r\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tarrayToBox( c1.boundingData, box1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst isC1Leaf = ! ! c1.count;\r\n\t\t\tconst c1Intersection = intersectsBoundsFunc( box1, isC1Leaf, score1, depth + 1 );\r\n\r\n\t\t\tlet c1StopTraversal;\r\n\t\t\tif ( c1Intersection === CONTAINED ) {\r\n\r\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffset( c1 );\r\n\t\t\t\tconst end = getRightEndOffset( c1 );\r\n\t\t\t\tconst count = end - offset;\r\n\r\n\t\t\t\tc1StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tc1StopTraversal =\r\n\t\t\t\t\tc1Intersection &&\r\n\t\t\t\t\tshapecast(\r\n\t\t\t\t\t\tc1,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( c1StopTraversal ) return true;\r\n\r\n\t\t\t// Check box 2 intersection\r\n\t\t\t// cached box2 will have been overwritten by previous traversal\r\n\t\t\tbox2 = cachedBox2;\r\n\t\t\tarrayToBox( c2.boundingData, box2 );\r\n\r\n\t\t\tconst isC2Leaf = ! ! c2.count;\r\n\t\t\tconst c2Intersection = intersectsBoundsFunc( box2, isC2Leaf, score2, depth + 1 );\r\n\r\n\t\t\tlet c2StopTraversal;\r\n\t\t\tif ( c2Intersection === CONTAINED ) {\r\n\r\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffset( c2 );\r\n\t\t\t\tconst end = getRightEndOffset( c2 );\r\n\t\t\t\tconst count = end - offset;\r\n\r\n\t\t\t\tc2StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tc2StopTraversal =\r\n\t\t\t\t\tc2Intersection &&\r\n\t\t\t\t\tshapecast(\r\n\t\t\t\t\t\tc2,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( c2StopTraversal ) return true;\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nexport const intersectsGeometry = ( function () {\r\n\r\n\tconst triangle = new SeparatingAxisTriangle();\r\n\tconst triangle2 = new SeparatingAxisTriangle();\r\n\tconst cachedMesh = new Mesh();\r\n\tconst invertedMat = new Matrix4();\r\n\r\n\tconst obb = new OrientedBox();\r\n\tconst obb2 = new OrientedBox();\r\n\r\n\treturn function intersectsGeometry( node, mesh, geometry, geometryToBvh, cachedObb = null ) {\r\n\r\n\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\tnode.continueGeneration();\r\n\r\n\t\t}\r\n\r\n\t\tif ( cachedObb === null ) {\r\n\r\n\t\t\tif ( ! geometry.boundingBox ) {\r\n\r\n\t\t\t\tgeometry.computeBoundingBox();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobb.set( geometry.boundingBox.min, geometry.boundingBox.max, geometryToBvh );\r\n\t\t\tobb.update();\r\n\t\t\tcachedObb = obb;\r\n\r\n\t\t}\r\n\r\n\t\tconst isLeaf = ! ! node.count;\r\n\t\tif ( isLeaf ) {\r\n\r\n\t\t\tconst thisGeometry = mesh.geometry;\r\n\t\t\tconst thisIndex = thisGeometry.index;\r\n\t\t\tconst thisPos = thisGeometry.attributes.position;\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst pos = geometry.attributes.position;\r\n\r\n\t\t\tconst offset = node.offset;\r\n\t\t\tconst count = node.count;\r\n\r\n\t\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\r\n\t\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\r\n\t\t\t// here.\r\n\t\t\tinvertedMat.copy( geometryToBvh ).invert();\r\n\r\n\t\t\tif ( geometry.boundsTree ) {\r\n\r\n\t\t\t\tarrayToBox( node.boundingData, obb2 );\r\n\t\t\t\tobb2.matrix.copy( invertedMat );\r\n\t\t\t\tobb2.update();\r\n\r\n\t\t\t\tcachedMesh.geometry = geometry;\r\n\t\t\t\tconst res = geometry.boundsTree.shapecast( cachedMesh, box => obb2.intersectsBox( box ), function ( tri ) {\r\n\r\n\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.update();\r\n\r\n\t\t\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\t\tsetTriangle( triangle2, i, thisIndex, thisPos );\r\n\t\t\t\t\t\ttriangle2.update();\r\n\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tcachedMesh.geometry = null;\r\n\r\n\t\t\t\treturn res;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = offset * 3, l = ( count + offset * 3 ); i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\tsetTriangle( triangle, i, thisIndex, thisPos );\r\n\t\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.update();\r\n\r\n\t\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\r\n\r\n\t\t\t\t\t\tsetTriangle( triangle2, i2, index, pos );\r\n\t\t\t\t\t\ttriangle2.update();\r\n\r\n\t\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst left = node.left;\r\n\t\t\tconst right = node.right;\r\n\r\n\t\t\tarrayToBox( left.boundingData, boundingBox );\r\n\t\t\tconst leftIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometry( left, mesh, geometry, geometryToBvh, cachedObb );\r\n\r\n\t\t\tif ( leftIntersection ) return true;\r\n\r\n\r\n\t\t\tarrayToBox( right.boundingData, boundingBox );\r\n\t\t\tconst rightIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometry( right, mesh, geometry, geometryToBvh, cachedObb );\r\n\r\n\t\t\tif ( rightIntersection ) return true;\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n","// Split strategy constants\r\nexport const CENTER = 0;\r\nexport const AVERAGE = 1;\r\nexport const SAH = 2;\r\n\r\nexport const NOT_INTERSECTED = 0;\r\nexport const INTERSECTED = 1;\r\nexport const CONTAINED = 2;\r\n","\n/**************************************************************************************************\n *\n * This file is generated from castFunctions.js and scripts/generate-cast-function.mjs. Do not edit.\n *\n *************************************************************************************************/\n\nimport { Box3, Vector3, Mesh, Matrix4 } from 'three';\r\nimport { intersectTris, intersectClosestTri } from './Utils/RayIntersectTriUtlities.js';\n\nimport { OrientedBox } from './Utils/OrientedBox.js';\r\nimport { setTriangle } from './Utils/TriangleUtils.js';\r\nimport { SeparatingAxisTriangle } from './Utils/SeparatingAxisTriangle.js';\r\nimport { CONTAINED } from './Constants.js';\n\nconst boundingBox = new Box3();\r\nconst boxIntersection = new Vector3();\r\nconst xyzFields = [ 'x', 'y', 'z' ];\n\nexport function raycastBuffer( stride4Offset, mesh, raycaster, ray, intersects ) {\n\n\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\tif ( isLeaf ) {\n\n\t\tintersectTris( mesh, mesh.geometry, raycaster, ray, /* node offset */ uint32Array[ stride4Offset + 6 ], /* node count */ uint16Array[ stride2Offset + 14 ], intersects );\n\n\t} else {\n\n\t\tif ( intersectRayBuffer( /* node left */ stride4Offset + 8, float32Array, ray, boxIntersection ) ) {\n\n\t\t\traycastBuffer( /* node left */ stride4Offset + 8, mesh, raycaster, ray, intersects );\n\n\t\t}\n\n\t\tif ( intersectRayBuffer( /* node right */ uint32Array[ stride4Offset + 6 ], float32Array, ray, boxIntersection ) ) {\n\n\t\t\traycastBuffer( /* node right */ uint32Array[ stride4Offset + 6 ], mesh, raycaster, ray, intersects );\n\n\t\t}\n\n\t}\n\n}\n\nexport function raycastFirstBuffer( stride4Offset, mesh, raycaster, ray ) {\n\n\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\tif ( isLeaf ) {\n\n\t\treturn intersectClosestTri( mesh, mesh.geometry, raycaster, ray, /* node offset */ uint32Array[ stride4Offset + 6 ], /* node count */ uint16Array[ stride2Offset + 14 ] );\n\n\t} else {\n\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\r\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\r\n\t\tconst splitAxis = /* node splitAxis */ uint32Array[ stride4Offset + 7 ];\r\n\t\tconst xyzAxis = xyzFields[ splitAxis ];\r\n\t\tconst rayDir = ray.direction[ xyzAxis ];\r\n\t\tconst leftToRight = rayDir >= 0;\n\n\t\t// c1 is the child to check first\r\n\t\tlet c1, c2;\r\n\t\tif ( leftToRight ) {\n\n\t\t\tc1 = /* node left */ stride4Offset + 8;\r\n\t\t\tc2 = /* node right */ uint32Array[ stride4Offset + 6 ];\n\n\t\t} else {\n\n\t\t\tc1 = /* node right */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tc2 = /* node left */ stride4Offset + 8;\n\n\t\t}\n\n\t\tconst c1Intersection = intersectRayBuffer( c1, float32Array, ray, boxIntersection );\r\n\t\tconst c1Result = c1Intersection ? raycastFirstBuffer( c1, mesh, raycaster, ray ) : null;\n\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\r\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\r\n\t\tif ( c1Result ) {\n\n\t\t\t// check if the point is within the second bounds\r\n\t\t\tconst point = c1Result.point[ xyzAxis ];\r\n\t\t\tconst isOutside = leftToRight ?\r\n\t\t\t\tpoint <= /* c2 boundingData */ float32Array[ c2 + splitAxis ] :\r\n\t\t\t\tpoint >= /* c2 boundingData */ float32Array[ c2 + splitAxis + 3 ];\n\n\t\t\tif ( isOutside ) {\n\n\t\t\t\treturn c1Result;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// either there was no intersection in the first node, or there could still be a closer\r\n\t\t// intersection in the second, so check the second node and then take the better of the two\r\n\t\tconst c2Intersection = intersectRayBuffer( c2, float32Array, ray, boxIntersection );\r\n\t\tconst c2Result = c2Intersection ? raycastFirstBuffer( c2, mesh, raycaster, ray ) : null;\n\n\t\tif ( c1Result && c2Result ) {\n\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\n\n\t\t} else {\n\n\t\t\treturn c1Result || c2Result || null;\n\n\t\t}\n\n\t}\n\n}\n\nexport const shapecastBuffer = ( function () {\n\n\tconst _triangle = new SeparatingAxisTriangle();\r\n\tconst _cachedBox1 = new Box3();\r\n\tconst _cachedBox2 = new Box3();\n\n\tfunction iterateOverTriangles(\r\n\t\toffset,\r\n\t\tcount,\r\n\t\tgeometry,\r\n\t\tintersectsTriangleFunc,\r\n\t\tcontained,\r\n\t\tdepth,\r\n\t\ttriangle\r\n\t) {\n\n\t\tconst index = geometry.index;\r\n\t\tconst pos = geometry.attributes.position;\r\n\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\n\n\t\t\tsetTriangle( triangle, i, index, pos );\r\n\t\t\ttriangle.needsUpdate = true;\n\n\t\t\tif ( intersectsTriangleFunc( triangle, i, i + 1, i + 2, contained, depth ) ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\treturn function shapecastBuffer( stride4Offset,\r\n\t\tmesh,\r\n\t\tintersectsBoundsFunc,\r\n\t\tintersectsTriangleFunc = null,\r\n\t\tnodeScoreFunc = null,\r\n\t\tdepth = 0,\r\n\t\ttriangle = _triangle,\r\n\t\tcachedBox1 = _cachedBox1,\r\n\t\tcachedBox2 = _cachedBox2\r\n\t) {\n\n\t\t// Define these inside the function so it has access to the local variables needed\r\n\t\t// when converting to the buffer equivalents\r\n\t\tfunction getLeftOffsetBuffer( stride4Offset ) {\n\n\t\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\t\twhile ( /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff ) ) {\n\n\t\t\t\t/* node */ stride4Offset = /* node left */ stride4Offset + 8, stride2Offset = stride4Offset * 2;\n\n\t\t\t}\n\n\t\t\treturn /* node offset */ uint32Array[ stride4Offset + 6 ];\n\n\t\t}\n\n\t\tfunction getRightEndOffsetBuffer( stride4Offset ) {\n\n\t\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\t\twhile ( /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff ) ) {\n\n\t\t\t\t/* node */ stride4Offset = /* node right */ uint32Array[ stride4Offset + 6 ], stride2Offset = stride4Offset * 2;\n\n\t\t\t}\n\n\t\t\treturn /* node offset */ uint32Array[ stride4Offset + 6 ] + /* node count */ uint16Array[ stride2Offset + 14 ];\n\n\t\t}\n\n\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\t\tif ( isLeaf && intersectsTriangleFunc ) {\n\n\t\t\tconst geometry = mesh.geometry;\r\n\t\t\tconst offset = /* node offset */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tconst count = /* node count */ uint16Array[ stride2Offset + 14 ];\r\n\t\t\treturn iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, false, depth, triangle );\n\n\t\t} else {\n\n\t\t\tconst left = /* node left */ stride4Offset + 8;\r\n\t\t\tconst right = /* node right */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tlet c1 = left;\r\n\t\t\tlet c2 = right;\n\n\t\t\tlet score1, score2;\r\n\t\t\tlet box1, box2;\r\n\t\t\tif ( nodeScoreFunc ) {\n\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tbox2 = cachedBox2;\n\n\t\t\t\tarrayToBoxBuffer( /* c1 boundingData */ c1, float32Array, box1 );\r\n\t\t\t\tarrayToBoxBuffer( /* c2 boundingData */ c2, float32Array, box2 );\n\n\t\t\t\tscore1 = nodeScoreFunc( box1 );\r\n\t\t\t\tscore2 = nodeScoreFunc( box2 );\n\n\t\t\t\tif ( score2 < score1 ) {\n\n\t\t\t\t\tc1 = right;\r\n\t\t\t\t\tc2 = left;\n\n\t\t\t\t\tconst temp = score1;\r\n\t\t\t\t\tscore1 = score2;\r\n\t\t\t\t\tscore2 = temp;\n\n\t\t\t\t\tbox1 = box2;\r\n\t\t\t\t\t// box2 is always set before use below\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Check box 1 intersection\r\n\t\t\tif ( ! box1 ) {\n\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tarrayToBoxBuffer( /* c1 boundingData */ c1, float32Array, box1 );\n\n\t\t\t}\n\n\t\t\tconst isC1Leaf = ! /* c1 count */ ( uint16Array[ c1 + 15 ] !== 0xffff );\r\n\t\t\tconst c1Intersection = intersectsBoundsFunc( box1, isC1Leaf, score1, depth + 1 );\n\n\t\t\tlet c1StopTraversal;\r\n\t\t\tif ( c1Intersection === CONTAINED ) {\n\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffsetBuffer( c1 );\r\n\t\t\t\tconst end = getRightEndOffsetBuffer( c1 );\r\n\t\t\t\tconst count = end - offset;\n\n\t\t\t\tc1StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\n\n\t\t\t} else {\n\n\t\t\t\tc1StopTraversal =\r\n\t\t\t\t\tc1Intersection &&\r\n\t\t\t\t\tshapecastBuffer(\r\n\t\t\t\t\t\tc1,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( c1StopTraversal ) return true;\n\n\t\t\t// Check box 2 intersection\r\n\t\t\t// cached box2 will have been overwritten by previous traversal\r\n\t\t\tbox2 = cachedBox2;\r\n\t\t\tarrayToBoxBuffer( /* c2 boundingData */ c2, float32Array, box2 );\n\n\t\t\tconst isC2Leaf = ! /* c2 count */ ( uint16Array[ c2 + 15 ] !== 0xffff );\r\n\t\t\tconst c2Intersection = intersectsBoundsFunc( box2, isC2Leaf, score2, depth + 1 );\n\n\t\t\tlet c2StopTraversal;\r\n\t\t\tif ( c2Intersection === CONTAINED ) {\n\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffsetBuffer( c2 );\r\n\t\t\t\tconst end = getRightEndOffsetBuffer( c2 );\r\n\t\t\t\tconst count = end - offset;\n\n\t\t\t\tc2StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\n\n\t\t\t} else {\n\n\t\t\t\tc2StopTraversal =\r\n\t\t\t\t\tc2Intersection &&\r\n\t\t\t\t\tshapecastBuffer(\r\n\t\t\t\t\t\tc2,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( c2StopTraversal ) return true;\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n} )();\n\nexport const intersectsGeometryBuffer = ( function () {\n\n\tconst triangle = new SeparatingAxisTriangle();\r\n\tconst triangle2 = new SeparatingAxisTriangle();\r\n\tconst cachedMesh = new Mesh();\r\n\tconst invertedMat = new Matrix4();\n\n\tconst obb = new OrientedBox();\r\n\tconst obb2 = new OrientedBox();\n\n\treturn function intersectsGeometryBuffer( stride4Offset, mesh, geometry, geometryToBvh, cachedObb = null ) {\n\n\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\tif ( cachedObb === null ) {\n\n\t\t\tif ( ! geometry.boundingBox ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\tobb.set( geometry.boundingBox.min, geometry.boundingBox.max, geometryToBvh );\r\n\t\t\tobb.update();\r\n\t\t\tcachedObb = obb;\n\n\t\t}\n\n\t\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\t\tif ( isLeaf ) {\n\n\t\t\tconst thisGeometry = mesh.geometry;\r\n\t\t\tconst thisIndex = thisGeometry.index;\r\n\t\t\tconst thisPos = thisGeometry.attributes.position;\n\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst pos = geometry.attributes.position;\n\n\t\t\tconst offset = /* node offset */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tconst count = /* node count */ uint16Array[ stride2Offset + 14 ];\n\n\t\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\r\n\t\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\r\n\t\t\t// here.\r\n\t\t\tinvertedMat.copy( geometryToBvh ).invert();\n\n\t\t\tif ( geometry.boundsTree ) {\n\n\t\t\t\tarrayToBoxBuffer( /* node boundingData */ stride4Offset, float32Array, obb2 );\r\n\t\t\t\tobb2.matrix.copy( invertedMat );\r\n\t\t\t\tobb2.update();\n\n\t\t\t\tcachedMesh.geometry = geometry;\r\n\t\t\t\tconst res = geometry.boundsTree.shapecast( cachedMesh, box => obb2.intersectsBox( box ), function ( tri ) {\n\n\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.update();\n\n\t\t\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\n\n\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\t\tsetTriangle( triangle2, i, thisIndex, thisPos );\r\n\t\t\t\t\t\ttriangle2.update();\r\n\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t} );\r\n\t\t\t\tcachedMesh.geometry = null;\n\n\t\t\t\treturn res;\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = offset * 3, l = ( count + offset * 3 ); i < l; i += 3 ) {\n\n\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\tsetTriangle( triangle, i, thisIndex, thisPos );\r\n\t\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.update();\n\n\t\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\n\n\t\t\t\t\t\tsetTriangle( triangle2, i2, index, pos );\r\n\t\t\t\t\t\ttriangle2.update();\n\n\t\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst left = /* node left */ stride4Offset + 8;\r\n\t\t\tconst right = /* node right */ uint32Array[ stride4Offset + 6 ];\n\n\t\t\tarrayToBoxBuffer( /* left boundingData */ left, float32Array, boundingBox );\r\n\t\t\tconst leftIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometryBuffer( left, mesh, geometry, geometryToBvh, cachedObb );\n\n\t\t\tif ( leftIntersection ) return true;\n\n\t\t\tarrayToBoxBuffer( /* right boundingData */ right, float32Array, boundingBox );\r\n\t\t\tconst rightIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometryBuffer( right, mesh, geometry, geometryToBvh, cachedObb );\n\n\t\t\tif ( rightIntersection ) return true;\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n} )();\n\nfunction intersectRayBuffer( stride4Offset, array, ray, target ) {\n\n\tarrayToBoxBuffer( stride4Offset, array, boundingBox );\n\treturn ray.intersectBox( boundingBox, target );\n\n}\n\nconst bufferStack = [];\nlet _prevBuffer;\nlet _float32Array;\nlet _uint16Array;\nlet _uint32Array;\nexport function setBuffer( buffer ) {\n\n\tif ( _prevBuffer ) {\n\n\t\tbufferStack.push( _prevBuffer );\n\n\t}\n\n\t_prevBuffer = buffer;\n\t_float32Array = new Float32Array( buffer );\n\t_uint16Array = new Uint16Array( buffer );\n\t_uint32Array = new Uint32Array( buffer );\n\n}\n\nexport function clearBuffer() {\n\n\t_prevBuffer = null;\n\t_float32Array = null;\n\t_uint16Array = null;\n\t_uint32Array = null;\n\n\tif ( bufferStack.length ) {\n\n\t\tsetBuffer( bufferStack.pop() );\n\n\t}\n\n}\n\nfunction arrayToBoxBuffer( stride4Offset, array, target ) {\n\n\ttarget.min.x = array[ stride4Offset ];\n\ttarget.min.y = array[ stride4Offset + 1 ];\n\ttarget.min.z = array[ stride4Offset + 2 ];\n\n\ttarget.max.x = array[ stride4Offset + 3 ];\n\ttarget.max.y = array[ stride4Offset + 4 ];\n\ttarget.max.z = array[ stride4Offset + 5 ];\n\n}\n","import { Vector3, BufferAttribute } from 'three';\r\nimport { CENTER } from './Constants.js';\r\nimport { buildTree } from './buildFunctions.js';\r\nimport { OrientedBox } from './Utils/OrientedBox.js';\r\nimport { SeparatingAxisTriangle } from './Utils/SeparatingAxisTriangle.js';\r\nimport { setTriangle } from './Utils/TriangleUtils.js';\r\nimport {\r\n\traycast,\r\n\traycastFirst,\r\n\tshapecast,\r\n\tintersectsGeometry,\r\n} from './castFunctions.js';\r\n\r\nimport {\r\n\traycastBuffer,\r\n\traycastFirstBuffer,\r\n\tshapecastBuffer,\r\n\tintersectsGeometryBuffer,\r\n\tsetBuffer,\r\n\tclearBuffer,\r\n} from './castFunctionsBuffer.js';\r\n\r\n// boundingData  \t\t\t\t: 6 float32\r\n// right / offset \t\t\t\t: 1 uint32\r\n// splitAxis / isLeaf + count \t: 1 uint32 / 2 uint16\r\nconst BYTES_PER_NODE = 6 * 4 + 4 + 4;\r\nconst IS_LEAFNODE_FLAG = 0xFFFF;\r\nconst SKIP_GENERATION = Symbol( 'skip tree generation' );\r\n\r\nconst obb = new OrientedBox();\r\nconst temp = new Vector3();\r\nconst tri2 = new SeparatingAxisTriangle();\r\nconst temp1 = new Vector3();\r\nconst temp2 = new Vector3();\r\n\r\nexport default class MeshBVH {\r\n\r\n\tstatic serialize( bvh, geometry, copyIndexBuffer = true ) {\r\n\r\n\t\tfunction finishTree( node ) {\r\n\r\n\t\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! node.count ) {\r\n\r\n\t\t\t\tfinishTree( node.left );\r\n\t\t\t\tfinishTree( node.right );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction countNodes( node ) {\r\n\r\n\t\t\tif ( node.count ) {\r\n\r\n\t\t\t\treturn 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn 1 + countNodes( node.left ) + countNodes( node.right );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction populateBuffer( byteOffset, node ) {\r\n\r\n\t\t\tconst stride4Offset = byteOffset / 4;\r\n\t\t\tconst stride2Offset = byteOffset / 2;\r\n\t\t\tconst isLeaf = ! ! node.count;\r\n\t\t\tconst boundingData = node.boundingData;\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tfloat32Array[ stride4Offset + i ] = boundingData[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\tconst offset = node.offset;\r\n\t\t\t\tconst count = node.count;\r\n\t\t\t\tuint32Array[ stride4Offset + 6 ] = offset;\r\n\t\t\t\tuint16Array[ stride2Offset + 14 ] = count;\r\n\t\t\t\tuint16Array[ stride2Offset + 15 ] = IS_LEAFNODE_FLAG;\r\n\t\t\t\treturn byteOffset + BYTES_PER_NODE;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst left = node.left;\r\n\t\t\t\tconst right = node.right;\r\n\t\t\t\tconst splitAxis = node.splitAxis;\r\n\r\n\t\t\t\tlet nextUnusedPointer;\r\n\t\t\t\tnextUnusedPointer = populateBuffer( byteOffset + BYTES_PER_NODE, left );\r\n\r\n\t\t\t\tuint32Array[ stride4Offset + 6 ] = nextUnusedPointer / 4;\r\n\t\t\t\tnextUnusedPointer = populateBuffer( nextUnusedPointer, right );\r\n\r\n\t\t\t\tuint32Array[ stride4Offset + 7 ] = splitAxis;\r\n\t\t\t\treturn nextUnusedPointer;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet float32Array;\r\n\t\tlet uint32Array;\r\n\t\tlet uint16Array;\r\n\r\n\t\tconst roots = bvh._roots;\r\n\t\tlet rootData;\r\n\r\n\t\tif ( bvh._isPacked ) {\r\n\r\n\t\t\trootData = roots;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trootData = [];\r\n\t\t\tfor ( let i = 0; i < roots.length; i ++ ) {\r\n\r\n\t\t\t\tconst root = roots[ i ];\r\n\t\t\t\tfinishTree( root );\r\n\t\t\t\tlet nodeCount = countNodes( root );\r\n\r\n\t\t\t\tconst buffer = new ArrayBuffer( BYTES_PER_NODE * nodeCount );\r\n\t\t\t\tfloat32Array = new Float32Array( buffer );\r\n\t\t\t\tuint32Array = new Uint32Array( buffer );\r\n\t\t\t\tuint16Array = new Uint16Array( buffer );\r\n\t\t\t\tpopulateBuffer( 0, root );\r\n\t\t\t\trootData.push( buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst indexAttribute = geometry.getIndex();\r\n\t\tconst result = {\r\n\t\t\troots: rootData,\r\n\t\t\tindex: copyIndexBuffer ? indexAttribute.array.slice() : indexAttribute.array,\r\n\t\t};\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tstatic deserialize( data, geometry, setIndex = true ) {\r\n\r\n\t\tconst { index, roots } = data;\r\n\t\tconst bvh = new MeshBVH( geometry, { [ SKIP_GENERATION ]: true } );\r\n\t\tbvh._roots = roots;\r\n\t\tbvh._isPacked = true;\r\n\r\n\t\tif ( setIndex ) {\r\n\r\n\t\t\tconst indexAttribute = geometry.getIndex();\r\n\t\t\tif ( indexAttribute === null ) {\r\n\r\n\t\t\t\tconst newIndex = new BufferAttribute( data.index, 1, false );\r\n\t\t\t\tgeometry.setIndex( newIndex );\r\n\r\n\t\t\t} else if ( indexAttribute.array !== index ) {\r\n\r\n\t\t\t\tindexAttribute.array.set( index );\r\n\t\t\t\tindexAttribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn bvh;\r\n\r\n\t}\r\n\r\n\tconstructor( geo, options = {} ) {\r\n\r\n\t\tif ( ! geo.isBufferGeometry ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: Only BufferGeometries are supported.' );\r\n\r\n\t\t} else if ( geo.attributes.position.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: InterleavedBufferAttribute is not supported for the position attribute.' );\r\n\r\n\t\t} else if ( geo.index && geo.index.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.' );\r\n\r\n\t\t}\r\n\r\n\t\t// default options\r\n\t\toptions = Object.assign( {\r\n\r\n\t\t\tstrategy: CENTER,\r\n\t\t\tmaxDepth: 40,\r\n\t\t\tmaxLeafTris: 10,\r\n\t\t\tverbose: true,\r\n\t\t\tlazyGeneration: true,\r\n\r\n\t\t\t// undocumented options\r\n\r\n\t\t\t// whether to the pack the data as a buffer or not. The data\r\n\t\t\t// will not be packed if lazyGeneration is true.\r\n\t\t\tpackData: true,\r\n\r\n\t\t\t// Whether to skip generating the tree. Used for deserialization.\r\n\t\t\t[ SKIP_GENERATION ]: false\r\n\r\n\t\t}, options );\r\n\t\toptions.strategy = Math.max( 0, Math.min( 2, options.strategy ) );\r\n\r\n\t\tthis._isPacked = false;\r\n\t\tthis._roots = null;\r\n\t\tif ( ! options[ SKIP_GENERATION ] ) {\r\n\r\n\t\t\tthis._roots = buildTree( geo, options );\r\n\t\t\tif ( ! options.lazyGeneration && options.packData ) {\r\n\r\n\t\t\t\tthis._roots = MeshBVH.serialize( this, geo, false ).roots;\r\n\t\t\t\tthis._isPacked = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\ttraverse( callback, rootIndex = 0 ) {\r\n\r\n\t\tif ( this._isPacked ) {\r\n\r\n\t\t\tconst buffer = this._roots[ rootIndex ];\r\n\t\t\tconst uint32Array = new Uint32Array( buffer );\r\n\t\t\tconst uint16Array = new Uint16Array( buffer );\r\n\t\t\t_traverseBuffer( 0 );\r\n\r\n\t\t\tfunction _traverseBuffer( stride4Offset, depth = 0 ) {\r\n\r\n\t\t\t\tconst stride2Offset = stride4Offset * 2;\r\n\t\t\t\tconst isLeaf = uint16Array[ stride2Offset + 15 ];\r\n\t\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\t\tconst offset = uint32Array[ stride4Offset + 6 ];\r\n\t\t\t\t\tconst count = uint16Array[ stride2Offset + 14 ];\r\n\t\t\t\t\tcallback( depth, isLeaf, new Float32Array( buffer, stride4Offset * 4, 6 ), offset, count );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst left = stride4Offset + BYTES_PER_NODE / 4;\r\n\t\t\t\t\tconst right = uint32Array[ stride4Offset + 6 ];\r\n\t\t\t\t\tconst splitAxis = uint32Array[ stride4Offset + 7 ];\r\n\t\t\t\t\tconst stopTraversal = callback( depth, isLeaf, new Float32Array( buffer, stride4Offset * 4, 6 ), splitAxis, false );\r\n\r\n\t\t\t\t\tif ( ! stopTraversal ) {\r\n\r\n\t\t\t\t\t\t_traverseBuffer( left, depth + 1 );\r\n\t\t\t\t\t\t_traverseBuffer( right, depth + 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_traverseNode( this._roots[ rootIndex ] );\r\n\r\n\t\t\tfunction _traverseNode( node, depth = 0 ) {\r\n\r\n\t\t\t\tconst isLeaf = ! ! node.count;\r\n\t\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\t\tcallback( depth, isLeaf, node.boundingData, node.offset, node.count );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst stopTraversal = callback( depth, isLeaf, node.boundingData, node.splitAxis, ! ! node.continueGeneration );\r\n\r\n\t\t\t\t\tif ( ! stopTraversal ) {\r\n\r\n\t\t\t\t\t\tif ( node.left ) _traverseNode( node.left, depth + 1 );\r\n\t\t\t\t\t\tif ( node.right ) _traverseNode( node.right, depth + 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Core Cast Functions */\r\n\traycast( mesh, raycaster, ray, intersects ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\traycastBuffer( 0, mesh, raycaster, ray, intersects );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\traycast( root, mesh, raycaster, ray, intersects );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t}\r\n\r\n\traycastFirst( mesh, raycaster, ray ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tlet closestResult = null;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tlet result;\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\tresult = raycastFirstBuffer( 0, mesh, raycaster, ray );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult = raycastFirst( root, mesh, raycaster, ray );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( result != null && ( closestResult == null || result.distance < closestResult.distance ) ) {\r\n\r\n\t\t\t\tclosestResult = result;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t\treturn closestResult;\r\n\r\n\t}\r\n\r\n\tintersectsGeometry( mesh, geometry, geomToMesh ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tlet result = false;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\tresult = intersectsGeometryBuffer( 0, mesh, geometry, geomToMesh );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult = intersectsGeometry( root, mesh, geometry, geomToMesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( result ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tshapecast( mesh, intersectsBoundsFunc, intersectsTriangleFunc = null, orderNodesFunc = null ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tlet result = false;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\tresult = shapecastBuffer( 0, mesh, intersectsBoundsFunc, intersectsTriangleFunc, orderNodesFunc );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult = shapecast( root, mesh, intersectsBoundsFunc, intersectsTriangleFunc, orderNodesFunc );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( result ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/* Derived Cast Functions */\r\n\tintersectsBox( mesh, box, boxToMesh ) {\r\n\r\n\t\tobb.set( box.min, box.max, boxToMesh );\r\n\t\tobb.update();\r\n\r\n\t\treturn this.shapecast(\r\n\t\t\tmesh,\r\n\t\t\tbox => obb.intersectsBox( box ),\r\n\t\t\ttri => obb.intersectsTriangle( tri )\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tintersectsSphere( mesh, sphere ) {\r\n\r\n\t\treturn this.shapecast(\r\n\t\t\tmesh,\r\n\t\t\tbox => sphere.intersectsBox( box ),\r\n\t\t\ttri => tri.intersectsSphere( sphere )\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tclosestPointToGeometry( mesh, geom, geometryToBvh, target1 = null, target2 = null, minThreshold = 0, maxThreshold = Infinity ) {\r\n\r\n\t\tif ( ! geom.boundingBox ) {\r\n\r\n\t\t\tgeom.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tobb.set( geom.boundingBox.min, geom.boundingBox.max, geometryToBvh );\r\n\t\tobb.update();\r\n\r\n\t\tconst pos = geom.attributes.position;\r\n\t\tconst index = geom.index;\r\n\r\n\t\tlet tempTarget1 = null;\r\n\t\tlet tempTarget2 = null;\r\n\t\tif ( target1 ) {\r\n\r\n\t\t\ttempTarget1 = temp1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( target2 ) {\r\n\r\n\t\t\ttempTarget2 = temp2;\r\n\r\n\t\t}\r\n\r\n\t\tlet closestDistance = Infinity;\r\n\t\tthis.shapecast(\r\n\t\t\tmesh,\r\n\t\t\t( box, isLeaf, score ) => score < closestDistance && score < maxThreshold,\r\n\t\t\ttri => {\r\n\r\n\t\t\t\tif ( tri.needsUpdate ) {\r\n\r\n\t\t\t\t\ttri.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst sphere1 = tri.sphere;\r\n\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\r\n\r\n\t\t\t\t\tsetTriangle( tri2, i2, index, pos );\r\n\t\t\t\t\ttri2.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri2.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri2.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri2.sphere.setFromPoints( tri2.points );\r\n\r\n\t\t\t\t\tconst sphere2 = tri2.sphere;\r\n\t\t\t\t\tconst sphereDist = sphere2.center.distanceTo( sphere1.center ) - sphere2.radius - sphere1.radius;\r\n\t\t\t\t\tif ( sphereDist > closestDistance ) {\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttri2.update();\r\n\r\n\t\t\t\t\tconst dist = tri.distanceToTriangle( tri2, tempTarget1, tempTarget2 );\r\n\t\t\t\t\tif ( dist < closestDistance ) {\r\n\r\n\t\t\t\t\t\tif ( target1 ) {\r\n\r\n\t\t\t\t\t\t\ttarget1.copy( tempTarget1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( target2 ) {\r\n\r\n\t\t\t\t\t\t\ttarget2.copy( tempTarget2 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tclosestDistance = dist;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\r\n\t\t\t\t\tif ( dist < minThreshold ) {\r\n\r\n\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t},\r\n\t\t\tbox => obb.distanceToBox( box, Math.min( closestDistance, maxThreshold ) )\r\n\r\n\t\t);\r\n\r\n\t\treturn closestDistance;\r\n\r\n\t}\r\n\r\n\tdistanceToGeometry( mesh, geom, matrix, minThreshold, maxThreshold ) {\r\n\r\n\t\treturn this.closestPointToGeometry( mesh, geom, matrix, null, null, minThreshold, maxThreshold );\r\n\r\n\t}\r\n\r\n\tclosestPointToPoint( mesh, point, target, minThreshold = 0, maxThreshold = Infinity ) {\r\n\r\n\t\t// early out if under minThreshold\r\n\t\t// skip checking if over maxThreshold\r\n\t\t// set minThreshold = maxThreshold to quickly check if a point is within a threshold\r\n\t\t// returns Infinity if no value found\r\n\t\tlet closestDistance = Infinity;\r\n\t\tthis.shapecast(\r\n\r\n\t\t\tmesh,\r\n\t\t\t( box, isLeaf, score ) => score < closestDistance && score < maxThreshold,\r\n\t\t\ttri => {\r\n\r\n\t\t\t\ttri.closestPointToPoint( point, temp );\r\n\t\t\t\tconst dist = point.distanceTo( temp );\r\n\t\t\t\tif ( dist < closestDistance ) {\r\n\r\n\t\t\t\t\tif ( target ) {\r\n\r\n\t\t\t\t\t\ttarget.copy( temp );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tclosestDistance = dist;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( dist < minThreshold ) {\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tbox => box.distanceToPoint( point )\r\n\r\n\t\t);\r\n\r\n\t\treturn closestDistance;\r\n\r\n\t}\r\n\r\n\tdistanceToPoint( mesh, point, minThreshold, maxThreshold ) {\r\n\r\n\t\treturn this.closestPointToPoint( mesh, point, null, minThreshold, maxThreshold );\r\n\r\n\t}\r\n\r\n}\r\n","import { LineBasicMaterial, Box3Helper, Box3, Group, LineSegments } from 'three';\r\nimport { arrayToBox } from './Utils/ArrayBoxUtilities.js';\r\n\r\nconst wiremat = new LineBasicMaterial( { color: 0x00FF88, transparent: true, opacity: 0.3 } );\r\nconst boxGeom = new Box3Helper().geometry;\r\nlet boundingBox = new Box3();\r\n\r\nclass MeshBVHRootVisualizer extends Group {\r\n\r\n\tconstructor( mesh, depth = 10, group = 0 ) {\r\n\r\n\t\tsuper( 'MeshBVHRootVisualizer' );\r\n\r\n\t\tthis.depth = depth;\r\n\t\tthis._oldDepth = - 1;\r\n\t\tthis.mesh = mesh;\r\n\t\tthis._boundsTree = null;\r\n\t\tthis._group = group;\r\n\r\n\t\tthis.update();\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tthis._oldDepth = this.depth;\r\n\t\tthis._boundsTree = this.mesh.geometry.boundsTree;\r\n\r\n\t\tlet requiredChildren = 0;\r\n\t\tif ( this._boundsTree ) {\r\n\r\n\t\t\tthis._boundsTree.traverse( ( depth, isLeaf, boundingData, offsetOrSplit, countOrIsUnfinished ) => {\r\n\r\n\t\t\t\tlet isTerminal = isLeaf || countOrIsUnfinished;\r\n\r\n\t\t\t\t// Stop traversal\r\n\t\t\t\tif ( depth >= this.depth ) {\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( depth === this.depth - 1 || isTerminal ) {\r\n\r\n\t\t\t\t\tlet m = requiredChildren < this.children.length ? this.children[ requiredChildren ] : null;\r\n\t\t\t\t\tif ( ! m ) {\r\n\r\n\t\t\t\t\t\tm = new LineSegments( boxGeom, wiremat );\r\n\t\t\t\t\t\tm.raycast = () => [];\r\n\t\t\t\t\t\tthis.add( m );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trequiredChildren ++;\r\n\t\t\t\t\tarrayToBox( boundingData, boundingBox );\r\n\t\t\t\t\tboundingBox.getCenter( m.position );\r\n\t\t\t\t\tm.scale.subVectors( boundingBox.max, boundingBox.min ).multiplyScalar( 0.5 );\r\n\r\n\t\t\t\t\tif ( m.scale.x === 0 ) m.scale.x = Number.EPSILON;\r\n\t\t\t\t\tif ( m.scale.y === 0 ) m.scale.y = Number.EPSILON;\r\n\t\t\t\t\tif ( m.scale.z === 0 ) m.scale.z = Number.EPSILON;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\twhile ( this.children.length > requiredChildren ) this.remove( this.children.pop() );\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass MeshBVHVisualizer extends Group {\r\n\r\n\tconstructor( mesh, depth = 10 ) {\r\n\r\n\t\tsuper( 'MeshBVHVisualizer' );\r\n\r\n\t\tthis.depth = depth;\r\n\t\tthis.mesh = mesh;\r\n\t\tthis._roots = [];\r\n\r\n\t\tthis.update();\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tconst bvh = this.mesh.geometry.boundsTree;\r\n\t\tconst totalRoots = bvh ? bvh._roots.length : 0;\r\n\t\twhile ( this._roots.length > totalRoots ) {\r\n\r\n\t\t\tthis._roots.pop();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < totalRoots; i ++ ) {\r\n\r\n\t\t\tif ( i >= this._roots.length ) {\r\n\r\n\t\t\t\tconst root = new MeshBVHRootVisualizer( this.mesh, this.depth, i );\r\n\t\t\t\tthis.add( root );\r\n\t\t\t\tthis._roots.push( root );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlet root = this._roots[ i ];\r\n\t\t\t\troot.depth = this.depth;\r\n\t\t\t\troot.update();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdateMatrixWorld( ...args ) {\r\n\r\n\t\tthis.position.copy( this.mesh.position );\r\n\t\tthis.rotation.copy( this.mesh.rotation );\r\n\t\tthis.scale.copy( this.mesh.scale );\r\n\r\n\t\tsuper.updateMatrixWorld( ...args );\r\n\r\n\t}\r\n\r\n\tcopy( source ) {\r\n\r\n\t\tthis.depth = source.depth;\r\n\t\tthis.mesh = source.mesh;\r\n\r\n\t}\r\n\r\n\tclone() {\r\n\r\n\t\treturn new MeshBVHVisualizer( this.mesh, this.depth );\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport default MeshBVHVisualizer;\r\n","import { Box3, Vector3 } from 'three';\r\nimport { arrayToBox } from './Utils/ArrayBoxUtilities.js';\r\nconst box1 = new Box3();\r\nconst box2 = new Box3();\r\nconst vec = new Vector3();\r\n\r\nexport class MeshBVHDebug {\r\n\r\n\tconstructor( bvh, geometry ) {\r\n\r\n\t\tthis.bvh = bvh;\r\n\t\tthis.geometry = geometry;\r\n\r\n\t}\r\n\r\n\t// Returns a simple, human readable object that represents the BVH.\r\n\tgetJSONStructure() {\r\n\r\n\t\tconst { bvh } = this;\r\n\t\tconst depthStack = [];\r\n\r\n\t\tbvh.traverse( ( depth, isLeaf, boundingData, offset, count ) => {\r\n\r\n\t\t\tconst info = {\r\n\t\t\t\tbounds: arrayToBox( boundingData, new Box3() ),\r\n\t\t\t};\r\n\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\tinfo.count = count;\r\n\t\t\t\tinfo.offset = offset;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tinfo.left = null;\r\n\t\t\t\tinfo.right = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdepthStack[ depth ] = info;\r\n\r\n\t\t\t// traversal hits the left then right node\r\n\t\t\tconst parent = depthStack[ depth - 1 ];\r\n\t\t\tif ( parent ) {\r\n\r\n\t\t\t\tif ( parent.left === null ) {\r\n\r\n\t\t\t\t\tparent.left = info;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tparent.right = info;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn depthStack[ 0 ];\r\n\r\n\t}\r\n\r\n\tvalidateBounds() {\r\n\r\n\t\tconst { bvh, geometry } = this;\r\n\t\tconst depthStack = [];\r\n\t\tconst index = geometry.index;\r\n\t\tconst position = geometry.getAttribute( 'position' );\r\n\t\tlet passes = true;\r\n\r\n\t\tbvh.traverse( ( depth, isLeaf, boundingData, offset, count ) => {\r\n\r\n\t\t\tconst info = {\r\n\t\t\t\tdepth,\r\n\t\t\t\tisLeaf,\r\n\t\t\t\tboundingData,\r\n\t\t\t\toffset,\r\n\t\t\t\tcount,\r\n\t\t\t};\r\n\t\t\tdepthStack[ depth ] = info;\r\n\r\n\t\t\tarrayToBox( boundingData, box1 );\r\n\t\t\tconst parent = depthStack[ depth - 1 ];\r\n\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\t// check triangles\r\n\t\t\t\tfor ( let i = offset * 3, l = ( offset + count ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\tconst i0 = index.getX( i );\r\n\t\t\t\t\tconst i1 = index.getX( i + 1 );\r\n\t\t\t\t\tconst i2 = index.getX( i + 2 );\r\n\r\n\t\t\t\t\tlet isContained;\r\n\r\n\t\t\t\t\tvec.fromBufferAttribute( position, i0 );\r\n\t\t\t\t\tisContained = box1.containsPoint( vec );\r\n\r\n\t\t\t\t\tvec.fromBufferAttribute( position, i1 );\r\n\t\t\t\t\tisContained = isContained && box1.containsPoint( vec );\r\n\r\n\t\t\t\t\tvec.fromBufferAttribute( position, i2 );\r\n\t\t\t\t\tisContained = isContained && box1.containsPoint( vec );\r\n\r\n\t\t\t\t\tconsole.assert( isContained, 'Leaf bounds does not fully contain triangle.' );\r\n\t\t\t\t\tpasses = passes && isContained;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( parent ) {\r\n\r\n\t\t\t\t// check if my bounds fit in my parents\r\n\t\t\t\tarrayToBox( boundingData, box2 );\r\n\r\n\t\t\t\tconst isContained = box2.containsBox( box1 );\r\n\t\t\t\tconsole.assert( isContained, 'Parent bounds does not fully contain child.' );\r\n\t\t\t\tpasses = passes && isContained;\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn passes;\r\n\r\n\t}\r\n\r\n}\r\n","import { Ray, Matrix4, Mesh } from 'three';\r\nimport MeshBVH from './MeshBVH.js';\r\nimport Visualizer from './MeshBVHVisualizer.js';\r\nimport { CENTER, AVERAGE, SAH, NOT_INTERSECTED, INTERSECTED, CONTAINED } from './Constants.js';\r\nimport { getBVHExtremes, estimateMemoryInBytes } from './Utils/Debug.js';\r\nimport { MeshBVHDebug } from './MeshBVHDebug.js';\r\n\r\nconst ray = new Ray();\r\nconst tmpInverseMatrix = new Matrix4();\r\nconst origMeshRaycastFunc = Mesh.prototype.raycast;\r\n\r\nfunction acceleratedRaycast( raycaster, intersects ) {\r\n\r\n\tif ( this.geometry.boundsTree ) {\r\n\r\n\t\tif ( this.material === undefined ) return;\r\n\r\n\t\ttmpInverseMatrix.copy( this.matrixWorld ).invert();\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( tmpInverseMatrix );\r\n\r\n\t\tif ( raycaster.firstHitOnly === true ) {\r\n\r\n\t\t\tconst res = this.geometry.boundsTree.raycastFirst( this, raycaster, ray );\r\n\t\t\tif ( res ) intersects.push( res );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.geometry.boundsTree.raycast( this, raycaster, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\torigMeshRaycastFunc.call( this, raycaster, intersects );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction computeBoundsTree( options ) {\r\n\r\n\tthis.boundsTree = new MeshBVH( this, options );\r\n\treturn this.boundsTree;\r\n\r\n}\r\n\r\nfunction disposeBoundsTree() {\r\n\r\n\tthis.boundsTree = null;\r\n\r\n}\r\n\r\nexport {\r\n\tMeshBVH, Visualizer, Visualizer as MeshBVHVisualizer, MeshBVHDebug,\r\n\tacceleratedRaycast, computeBoundsTree, disposeBoundsTree,\r\n\tCENTER, AVERAGE, SAH, NOT_INTERSECTED, INTERSECTED, CONTAINED,\r\n\testimateMemoryInBytes, getBVHExtremes\r\n};\r\n","import { isIOS as detectIOS } from \"../utils/is-mobile\";\r\n\r\nconst isIOS = detectIOS();\r\n\r\n// Disable ImageBitmap for Firefox so far because\r\n// createImageBitmap() with option fails on Firefox due to the bug.\r\n// Three.js ImageBitmapLoader passes {colorSpaceConversion: 'none'} option.\r\n// Without the option, the rendering result can be wrong if image file has ICC profiles.\r\n// See https://github.com/mrdoob/three.js/pull/21336\r\nconst HAS_IMAGE_BITMAP =\r\n  window.createImageBitmap !== undefined && /Firefox/.test(navigator.userAgent) === false && !isIOS;\r\nexport const TEXTURES_FLIP_Y = !HAS_IMAGE_BITMAP;\r\n\r\n// Browsers on iOS devices can crash if huge or many textures are used in a room.\r\n// Perhaps huge VRAM usage may cause it. We already reported it to the webkit devs.\r\n// Until the root issue is fixed on iOS end, we resize huge texture images in the\r\n// low material quality mode as workaround. It isn't a perfect solution but it\r\n// should mitigate the problem. Also disable image bitmap (See the above)\r\n// because huge textures resize + image bitmap can still even crash browsers.\r\n//\r\n// See\r\n//   - https://github.com/mozilla/hubs/issues/5295\r\n//   - https://bugs.webkit.org/show_bug.cgi?id=241478\r\n\r\nconst IOS_TEXTURE_MAX_WIDTH = 2048;\r\nconst IOS_TEXTURE_MAX_HEIGHT = 2048;\r\n\r\nfunction resizeIfNeeded(texture) {\r\n  if (!isIOS || window.APP.store.state.preferences.materialQualitySetting !== \"low\") {\r\n    return texture;\r\n  }\r\n\r\n  const image = texture.image;\r\n\r\n  // Just in case.\r\n  if (!image || image.width === undefined || image.height === undefined) {\r\n    return texture;\r\n  }\r\n\r\n  if (image.width <= IOS_TEXTURE_MAX_WIDTH && image.height <= IOS_TEXTURE_MAX_HEIGHT) {\r\n    return texture;\r\n  }\r\n\r\n  const conversionRatio = Math.min(IOS_TEXTURE_MAX_WIDTH / image.width, IOS_TEXTURE_MAX_HEIGHT / image.height);\r\n\r\n  const newWidth = Math.round(image.width * conversionRatio);\r\n  const newHeight = Math.round(image.height * conversionRatio);\r\n\r\n  const canvas = document.createElement(\"canvas\");\r\n  canvas.width = newWidth;\r\n  canvas.height = newHeight;\r\n  const context = canvas.getContext(\"2d\");\r\n  context.drawImage(image, 0, 0, newWidth, newHeight);\r\n\r\n  texture.image = canvas;\r\n\r\n  if (image.close !== undefined) {\r\n    image.close();\r\n  }\r\n\r\n  texture.format = THREE.RGBAFormat;\r\n  texture.type = THREE.UnsignedByteType;\r\n  return texture;\r\n}\r\n\r\nexport default class HubsTextureLoader extends THREE.TextureLoader {\r\n  constructor(manager) {\r\n    super(manager);\r\n  }\r\n\r\n  load(url, onLoad, onProgress, onError) {\r\n    const callback = texture => {\r\n      resizeIfNeeded(texture);\r\n      if (onLoad) {\r\n        onLoad(texture);\r\n      }\r\n    };\r\n\r\n    const texture = HAS_IMAGE_BITMAP\r\n      ? this._loadImageBitmapTexture(url, callback, onProgress, onError)\r\n      : super.load(url, callback, onProgress, onError);\r\n\r\n    texture.onUpdate = function () {\r\n      // Delete texture data once it has been uploaded to the GPU\r\n      texture.image.close && texture.image.close();\r\n      texture.image = null;\r\n    };\r\n\r\n    return texture;\r\n  }\r\n\r\n  async loadAsync(url, onProgress) {\r\n    return new Promise((resolve, reject) => {\r\n      this.load(url, resolve, onProgress, reject);\r\n    });\r\n  }\r\n\r\n  _loadImageBitmapTexture(url, onLoad, onProgress, onError) {\r\n    const texture = new THREE.Texture();\r\n    const loader = new THREE.ImageBitmapLoader(this.manager);\r\n    loader.setCrossOrigin(this.crossOrigin);\r\n    loader.setPath(this.path);\r\n\r\n    loader.load(\r\n      url,\r\n      bitmap => {\r\n        texture.image = bitmap;\r\n        texture.needsUpdate = true;\r\n\r\n        // We close the image bitmap when it's uploaded to texture.\r\n        // Closed image bitmap can't be reused so we remove the cache\r\n        // added in ImageBitmapLoader.\r\n        // You can remove this line once we entirely disable THREE.Cache.\r\n        THREE.Cache.remove(this.manager.resolveURL(url));\r\n\r\n        if (onLoad !== undefined) {\r\n          onLoad(texture);\r\n        }\r\n      },\r\n      onProgress,\r\n      onError\r\n    );\r\n\r\n    texture.flipY = false;\r\n    return texture;\r\n  }\r\n}\r\n","export function forEachMaterial(object3D, fn) {\r\n  if (!object3D.material) return;\r\n\r\n  if (Array.isArray(object3D.material)) {\r\n    object3D.material.forEach(fn);\r\n  } else {\r\n    fn(object3D.material);\r\n  }\r\n}\r\n\r\nexport function updateMaterials(object3D, fn) {\r\n  if (!object3D.material) return;\r\n\r\n  if (Array.isArray(object3D.material)) {\r\n    object3D.material = object3D.material.map(fn);\r\n  } else {\r\n    object3D.material = fn(object3D.material);\r\n  }\r\n}\r\n\r\nexport function mapMaterials(object3D, fn) {\r\n  if (!object3D.material) return [];\r\n\r\n  if (Array.isArray(object3D.material)) {\r\n    return object3D.material.map(fn);\r\n  } else {\r\n    return [fn(object3D.material)];\r\n  }\r\n}\r\n\r\n// HubsMeshBasicMaterial exists because we need to be able to set the emissiveMap in the avatar preview.\r\n// It also allows the material to be properly copied/cloned.\r\nclass HubsMeshBasicMaterial extends THREE.MeshBasicMaterial {\r\n  static fromMeshStandardMaterial(source) {\r\n    const material = new HubsMeshBasicMaterial();\r\n\r\n    THREE.Material.prototype.copy.call(material, source);\r\n    material.onBeforeRender = source.onBeforeRender;\r\n\r\n    material.color.copy(source.color);\r\n\r\n    material.emissive.copy(source.emissive);\r\n    material.emissiveIntensity = source.emissiveIntensity;\r\n    material.emissiveMap = source.emissiveMap;\r\n\r\n    material.map = source.map;\r\n\r\n    material.lightMap = source.lightMap;\r\n    // See https://github.com/mrdoob/three.js/pull/23613 for \"* Math.PI\"\r\n    material.lightMapIntensity = source.lightMapIntensity * Math.PI;\r\n\r\n    material.aoMap = source.aoMap;\r\n    material.aoMapIntensity = source.aoMapIntensity;\r\n\r\n    material.alphaMap = source.alphaMap;\r\n\r\n    material.wireframe = source.wireframe;\r\n    material.wireframeLinewidth = source.wireframeLinewidth;\r\n    material.wireframeLinecap = source.wireframeLinecap;\r\n    material.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n    return material;\r\n  }\r\n\r\n  constructor({ emissive, emissiveMap, emissiveIntensity, ...rest } = {}) {\r\n    super(rest);\r\n    this._emissive = { value: emissive || new THREE.Color() };\r\n    this._emissiveIntensity = { value: emissiveIntensity === undefined ? 1 : emissiveIntensity };\r\n    this._emissiveMap = { value: emissiveMap };\r\n  }\r\n\r\n  get emissive() {\r\n    return this._emissive.value;\r\n  }\r\n\r\n  set emissive(emissive) {\r\n    this._emissive.value = emissive;\r\n  }\r\n\r\n  get emissiveIntensity() {\r\n    return this._emissiveIntensity.value;\r\n  }\r\n\r\n  set emissiveIntensity(emissiveIntensity) {\r\n    this._emissiveIntensity.value = emissiveIntensity;\r\n  }\r\n\r\n  get emissiveMap() {\r\n    return this._emissiveMap.value;\r\n  }\r\n\r\n  set emissiveMap(emissiveMap) {\r\n    this._emissiveMap.value = emissiveMap;\r\n  }\r\n\r\n  copy(source) {\r\n    super.copy(source);\r\n    this.emissive.copy(source.emissive);\r\n    this.emissiveIntensity = source.emissiveIntensity;\r\n    this.emissiveMap = source.emissiveMap;\r\n    return this;\r\n  }\r\n\r\n  onBeforeCompile = shader => {\r\n    // This patch to the MeshBasicMaterial adds support for emissive maps.\r\n    shader.uniforms.emissive = this._emissive;\r\n    shader.uniforms.emissiveIntensity = this._emissiveIntensity;\r\n    shader.uniforms.emissiveMap = this._emissiveMap;\r\n    shader.fragmentShader = shader.fragmentShader.replace(\r\n      \"#include <lightmap_pars_fragment>\",\r\n      `#include <lightmap_pars_fragment>\r\n      uniform vec3 emissive;\r\n      uniform sampler2D emissiveMap;\r\n      `\r\n    );\r\n    shader.fragmentShader = shader.fragmentShader.replace(\r\n      \"#include <envmap_fragment>\",\r\n      `#include <envmap_fragment>\r\n\r\n      vec3 totalEmissiveRadiance = emissive;\r\n      #include <emissivemap_fragment>\r\n      outgoingLight += totalEmissiveRadiance;\r\n\r\n      `\r\n    );\r\n  };\r\n}\r\n\r\nclass HubsMeshPhongMaterial extends THREE.MeshPhongMaterial {\r\n  static fromMeshStandardMaterial(source) {\r\n    const material = new HubsMeshPhongMaterial();\r\n\r\n    THREE.Material.prototype.copy.call(material, source);\r\n    material.onBeforeRender = source.onBeforeRender;\r\n\r\n    material.color.copy(source.color);\r\n\r\n    material.map = source.map;\r\n\r\n    material.lightMap = source.lightMap;\r\n    material.lightMapIntensity = source.lightMapIntensity;\r\n\r\n    material.aoMap = source.aoMap;\r\n    material.aoMapIntensity = source.aoMapIntensity;\r\n\r\n    material.emissive.copy(source.emissive);\r\n    material.emissiveMap = source.emissiveMap;\r\n    material.emissiveIntensity = source.emissiveIntensity;\r\n\r\n    material.normalMapType = source.normalMapType;\r\n    material.normalMap = source.normalMap;\r\n    material.normalScale.copy(source.normalScale);\r\n\r\n    material.bumpMap = source.bumpMap;\r\n    material.bumpScale = source.bumpScale;\r\n\r\n    material.displacementMap = source.displacementMap;\r\n    material.displacementScale = source.displacementScale;\r\n    material.displacementBias = source.displacementBias;\r\n\r\n    material.alphaMap = source.alphaMap;\r\n\r\n    material.reflectivity = 0.5;\r\n    material.refractionRatio = source.refractionRatio;\r\n\r\n    material.wireframe = source.wireframe;\r\n    material.wireframeLinewidth = source.wireframeLinewidth;\r\n    material.wireframeLinecap = source.wireframeLinecap;\r\n    material.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n    return material;\r\n  }\r\n\r\n  onBeforeCompile = shader => {\r\n    // This patch to MeshPhongMaterial adds support for tangent space normal maps.\r\n    shader.vertexShader = shader.vertexShader.replace(\r\n      \"varying vec3 vNormal;\",\r\n      `varying vec3 vNormal;\r\n      #ifdef USE_TANGENT\r\n        varying vec3 vTangent;\r\n        varying vec3 vBitangent;\r\n      #endif\r\n      `\r\n    );\r\n    shader.vertexShader = shader.vertexShader.replace(\r\n      \"vNormal = normalize( transformedNormal );\",\r\n      `vNormal = normalize( transformedNormal );\r\n      \r\n        #ifdef USE_TANGENT\r\n      \r\n          vTangent = normalize( transformedTangent );\r\n          vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\r\n      \r\n        #endif\r\n      `\r\n    );\r\n    shader.fragmentShader = shader.fragmentShader.replace(\r\n      \"#include <lights_phong_pars_fragment>\",\r\n      `#include <lights_phong_pars_fragment>\r\n      #ifndef FLAT_SHADED\r\n\r\n        #ifdef USE_TANGENT\r\n          varying vec3 vTangent;\r\n          varying vec3 vBitangent;\r\n        #endif\r\n\r\n      #endif\r\n      `\r\n    );\r\n  };\r\n}\r\n\r\nexport function convertStandardMaterial(source, quality) {\r\n  if (!source.isMeshStandardMaterial) {\r\n    return source;\r\n  }\r\n\r\n  if (quality === \"medium\") {\r\n    return HubsMeshPhongMaterial.fromMeshStandardMaterial(source);\r\n  } else if (quality === \"low\") {\r\n    return HubsMeshBasicMaterial.fromMeshStandardMaterial(source);\r\n  }\r\n\r\n  return source;\r\n}\r\n\r\nexport function disposeTexture(texture) {\r\n  if (texture.dash) {\r\n    texture.dash.reset();\r\n  }\r\n\r\n  if (texture.image instanceof HTMLVideoElement) {\r\n    const video = texture.image;\r\n    video.pause();\r\n    video.src = \"\";\r\n    video.load();\r\n  }\r\n\r\n  if (texture.hls) {\r\n    texture.hls.stopLoad();\r\n    texture.hls.detachMedia();\r\n    texture.hls.destroy();\r\n    texture.hls = null;\r\n  }\r\n\r\n  texture.dispose();\r\n}\r\n","import { hasReticulumServer } from \"./phoenix-utils\";\r\nimport configs from \"./configs\";\r\n\r\nconst nonCorsProxyDomains = (configs.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\r\nif (configs.CORS_PROXY_SERVER) {\r\n  nonCorsProxyDomains.push(configs.CORS_PROXY_SERVER.split(\":\")[0]);\r\n}\r\nnonCorsProxyDomains.push(document.location.hostname);\r\n\r\nconst commonKnownContentTypes = {\r\n  gltf: \"model/gltf\",\r\n  glb: \"model/gltf-binary\",\r\n  png: \"image/png\",\r\n  jpg: \"image/jpeg\",\r\n  jpeg: \"image/jpeg\",\r\n  pdf: \"application/pdf\",\r\n  mp4: \"video/mp4\",\r\n  mp3: \"audio/mpeg\",\r\n  basis: \"image/basis\",\r\n  ktx2: \"image/ktx2\",\r\n  m3u8: \"application/vnd.apple.mpegurl\",\r\n  mpd: \"application/dash+xml\"\r\n};\r\n\r\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\r\nfunction b64EncodeUnicode(str) {\r\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\r\n  // into raw bytes which can be fed into btoa.\r\n  const CHAR_RE = /%([0-9A-F]{2})/g;\r\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\r\n}\r\n\r\nconst farsparkEncodeUrl = url => {\r\n  // farspark doesn't know how to read '=' base64 padding characters\r\n  // translate base64 + to - and / to _ for URL safety\r\n  return b64EncodeUnicode(url).replace(/=+$/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\r\n};\r\n\r\nexport const scaledThumbnailUrlFor = (url, width, height) => {\r\n  let extension = \"\";\r\n  try {\r\n    const pathParts = new URL(url).pathname.split(\".\");\r\n\r\n    if (pathParts.length > 1) {\r\n      const extensionCandidate = pathParts.pop();\r\n      if (commonKnownContentTypes[extensionCandidate]) {\r\n        extension = `.${extensionCandidate}`;\r\n      }\r\n    }\r\n  } catch (e) {\r\n    extension = \".png\";\r\n  }\r\n\r\n  // HACK: the extension is needed to ensure CDN caching on Cloudflare\r\n  const thumbnailUrl = `https://${configs.THUMBNAIL_SERVER}/thumbnail/${farsparkEncodeUrl(\r\n    url\r\n  )}${extension}?w=${width}&h=${height}`;\r\n\r\n  try {\r\n    const urlHostname = new URL(url).hostname;\r\n\r\n    if (hasReticulumServer()) {\r\n      const retHostname = new URL(`https://${configs.RETICULUM_SERVER}`).hostname;\r\n      if (retHostname === urlHostname) return url;\r\n    }\r\n  } catch (e) {\r\n    return thumbnailUrl;\r\n  }\r\n\r\n  return thumbnailUrl;\r\n};\r\n\r\nexport const isNonCorsProxyDomain = hostname => {\r\n  return nonCorsProxyDomains.find(domain => hostname.endsWith(domain));\r\n};\r\n\r\nexport const proxiedUrlFor = url => {\r\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\r\n\r\n  // Skip known domains that do not require CORS proxying.\r\n  try {\r\n    const parsedUrl = new URL(url);\r\n    if (isNonCorsProxyDomain(parsedUrl.hostname)) return url;\r\n  } catch (e) {\r\n    // Ignore\r\n  }\r\n\r\n  return `https://${configs.CORS_PROXY_SERVER}/${url}`;\r\n};\r\n\r\nexport function getAbsoluteUrl(baseUrl, relativeUrl) {\r\n  return new URL(relativeUrl, baseUrl);\r\n}\r\n\r\nexport function getAbsoluteHref(baseUrl, relativeUrl) {\r\n  return getAbsoluteUrl(baseUrl, relativeUrl).href;\r\n}\r\n\r\n// Note these files are configured in webpack.config.js to be handled with file-loader, so this will be a string containing the file paths\r\nimport basisJsUrl from \"three/examples/js/libs/basis/basis_transcoder.js\";\r\nimport dracoWrapperJsUrl from \"three/examples/js/libs/draco/gltf/draco_wasm_wrapper.js\";\r\nimport basisWasmUrl from \"three/examples/js/libs/basis/basis_transcoder.wasm\";\r\nimport dracoWasmUrl from \"three/examples/js/libs/draco/gltf/draco_decoder.wasm\";\r\n\r\nexport const rewriteBasisTranscoderUrls = function (url) {\r\n  if (url === \"basis_transcoder.js\") {\r\n    return basisJsUrl;\r\n  } else if (url === \"basis_transcoder.wasm\") {\r\n    return basisWasmUrl;\r\n  }\r\n  return url;\r\n};\r\n\r\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\r\n  // Intercept loading of basis transcoder with content hashed urls\r\n  if (url === \"basis_transcoder.js\") {\r\n    return basisJsUrl;\r\n  } else if (url === \"basis_transcoder.wasm\") {\r\n    return basisWasmUrl;\r\n  } else if (url === \"draco_wasm_wrapper.js\") {\r\n    return dracoWrapperJsUrl;\r\n  } else if (url === \"draco_decoder.wasm\") {\r\n    return dracoWasmUrl;\r\n  }\r\n\r\n  if (typeof url !== \"string\" || url === \"\") return \"\";\r\n  if (/^(https?:)?\\/\\//i.test(url)) return proxiedUrlFor(url);\r\n  if (/^data:.*,.*$/i.test(url)) return url;\r\n  if (/^blob:.*$/i.test(url)) return url;\r\n\r\n  if (configs.CORS_PROXY_SERVER) {\r\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\r\n    const corsProxyPrefix = `https://${configs.CORS_PROXY_SERVER}/`;\r\n\r\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\r\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\r\n      const originalUrlParts = originalUrl.split(\"/\");\r\n\r\n      // Drop the .gltf filename\r\n      const path = new URL(url).pathname;\r\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\r\n      return corsProxyPrefix + assetUrl;\r\n    }\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\r\n\r\nexport const guessContentType = url => {\r\n  if (!url) return;\r\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\r\n  if (url.startsWith(\"data:\")) {\r\n    const matches = dataUrlRegex.exec(url);\r\n    if (matches.length > 0) {\r\n      matches[1];\r\n    }\r\n  }\r\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\r\n  return commonKnownContentTypes[extension];\r\n};\r\n\r\nconst originIsHubsServer = new Map();\r\nasync function isHubsServer(url) {\r\n  if (!url) return false;\r\n  if (!url.startsWith(\"http\")) {\r\n    url = \"https://\" + url;\r\n  }\r\n  const { origin } = new URL(url);\r\n\r\n  if (originIsHubsServer.has(origin)) {\r\n    return originIsHubsServer.get(origin);\r\n  }\r\n\r\n  let isHubsServer;\r\n  try {\r\n    isHubsServer = (await fetch(proxiedUrlFor(origin), { method: \"HEAD\" })).headers.has(\"hub-name\");\r\n  } catch (e) {\r\n    isHubsServer = false;\r\n  }\r\n  originIsHubsServer.set(origin, isHubsServer);\r\n  return isHubsServer;\r\n}\r\n\r\nconst hubsSceneRegex = /https?:\\/\\/[^/]+\\/scenes\\/[a-zA-Z0-9]{7}(?:\\/|$)/;\r\nconst hubsAvatarRegex = /https?:\\/\\/[^/]+\\/avatars\\/(?<id>[a-zA-Z0-9]{7})(?:\\/|$)/;\r\nconst hubsRoomRegex = /(https?:\\/\\/)?[^/]+\\/(?<id>[a-zA-Z0-9]{7})(?:\\/|$)/;\r\n\r\nexport const isLocalHubsUrl = async url =>\r\n  (await isHubsServer(url)) && new URL(url).origin === document.location.origin;\r\n\r\nexport const isHubsSceneUrl = async url => (await isHubsServer(url)) && hubsSceneRegex.test(url);\r\nexport const isLocalHubsSceneUrl = async url => (await isHubsSceneUrl(url)) && (await isLocalHubsUrl(url));\r\n\r\nexport const isHubsAvatarUrl = async url => (await isHubsServer(url)) && hubsAvatarRegex.test(url);\r\nexport const isLocalHubsAvatarUrl = async url => (await isHubsAvatarUrl(url)) && (await isLocalHubsUrl(url));\r\n\r\nexport const isHubsRoomUrl = async url =>\r\n  (await isHubsServer(url)) &&\r\n  !(await isHubsAvatarUrl(url)) &&\r\n  !(await isHubsSceneUrl(url)) &&\r\n  url.match(hubsRoomRegex)?.groups.id;\r\n\r\nexport const isHubsDestinationUrl = async url =>\r\n  (await isHubsServer(url)) && ((await isHubsSceneUrl(url)) || (await isHubsRoomUrl(url)));\r\n\r\nexport const idForAvatarUrl = url => {\r\n  const match = url.match(hubsAvatarRegex);\r\n  if (match) {\r\n    return match.groups.id;\r\n  }\r\n  return null;\r\n};\r\n","// NOTE when changing be sure to check hardcoded mask values in hub.html\r\nexport enum Layers {\r\n  // These 3 layers are hardcoded in THREE\r\n  CAMERA_LAYER_DEFAULT,\r\n  CAMERA_LAYER_XR_LEFT_EYE,\r\n  CAMERA_LAYER_XR_RIGHT_EYE,\r\n\r\n  CAMERA_LAYER_REFLECTION,\r\n  CAMERA_LAYER_INSPECT,\r\n  CAMERA_LAYER_VIDEO_TEXTURE_TARGET,\r\n\r\n  CAMERA_LAYER_THIRD_PERSON_ONLY,\r\n  CAMERA_LAYER_FIRST_PERSON_ONLY,\r\n\r\n  CAMERA_LAYER_UI,\r\n  CAMERA_LAYER_FX_MASK\r\n}\r\n","import { removeEntity } from \"bitecs\";\r\nimport { forEachMaterial } from \"./material-utils\";\r\n\r\nconst tempVector3 = new THREE.Vector3();\r\nconst tempQuaternion = new THREE.Quaternion();\r\n\r\nexport function getLastWorldPosition(src, target) {\r\n  src.updateMatrices();\r\n  target.setFromMatrixPosition(src.matrixWorld);\r\n  return target;\r\n}\r\n\r\nexport function getLastWorldQuaternion(src, target) {\r\n  src.updateMatrices();\r\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\r\n  return target;\r\n}\r\n\r\nexport function getLastWorldScale(src, target) {\r\n  src.updateMatrices();\r\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\r\n  return target;\r\n}\r\n\r\nexport function disposeMaterial(mtrl) {\r\n  if (mtrl.map) mtrl.map.dispose();\r\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\r\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\r\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\r\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\r\n  if (mtrl.envMap) mtrl.envMap.dispose();\r\n  if (mtrl.aoMap) mtrl.aoMap.dispose();\r\n  if (mtrl.metalnessMap) mtrl.metalnessMap.dispose();\r\n  if (mtrl.roughnessMap) mtrl.roughnessMap.dispose();\r\n  if (mtrl.emissiveMap) mtrl.emissiveMap.dispose();\r\n  mtrl.dispose();\r\n  if (mtrl.eid) {\r\n    removeEntity(APP.world, mtrl.eid);\r\n  }\r\n}\r\n\r\nexport function disposeNode(node) {\r\n  if (!(node instanceof THREE.Mesh)) return;\r\n\r\n  if (node.geometry) {\r\n    node.geometry.dispose();\r\n  }\r\n\r\n  forEachMaterial(node.material, disposeMaterial);\r\n}\r\n\r\nconst IDENTITY = new THREE.Matrix4().identity();\r\nconst tempMatrix4 = new THREE.Matrix4();\r\nconst EPSILON = 0.00000000001;\r\nexport function setMatrixWorld(object3D, m) {\r\n  if (!object3D.matrixIsModified) {\r\n    object3D.applyMatrix4(IDENTITY); // hack around our matrix optimizations\r\n  }\r\n  tempMatrix4.copy(object3D.matrixWorld);\r\n  object3D.matrixWorld.copy(m);\r\n  if (object3D.parent) {\r\n    object3D.parent.updateMatrices();\r\n    object3D.matrix.copy(object3D.parent.matrixWorld).invert().multiply(m);\r\n  } else {\r\n    object3D.matrix.copy(m);\r\n  }\r\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\r\n  if (tempMatrix4.near(object3D.matrixWorld, EPSILON)) {\r\n    object3D.matrixWorld.copy(tempMatrix4);\r\n  } else {\r\n    object3D.childrenNeedMatrixWorldUpdate = true;\r\n  }\r\n}\r\n\r\n// Modified version of Don McCurdy's AnimationUtils.clone\r\n// https://github.com/mrdoob/three.js/pull/14494\r\n\r\nfunction parallelTraverse(a, b, callback) {\r\n  callback(a, b);\r\n\r\n  for (let i = 0; i < a.children.length; i++) {\r\n    parallelTraverse(a.children[i], b.children[i], callback);\r\n  }\r\n}\r\n\r\n// Supports the following PropertyBinding path formats:\r\n// uuid.propertyName\r\n// uuid.propertyName[propertyIndex]\r\n// uuid.objectName[objectIndex].propertyName[propertyIndex]\r\n// Does not support property bindings that use object3D names or parent nodes\r\nfunction cloneKeyframeTrack(sourceKeyframeTrack, cloneUUIDLookup) {\r\n  const {\r\n    nodeName: uuid,\r\n    objectName,\r\n    objectIndex,\r\n    propertyName,\r\n    propertyIndex\r\n  } = THREE.PropertyBinding.parseTrackName(sourceKeyframeTrack.name);\r\n\r\n  let path = \"\";\r\n\r\n  if (uuid !== undefined) {\r\n    const clonedUUID = cloneUUIDLookup.get(uuid);\r\n\r\n    if (clonedUUID === undefined) {\r\n      console.warn(`Could not find KeyframeTrack target with uuid: \"${uuid}\"`);\r\n    }\r\n\r\n    path += clonedUUID;\r\n  }\r\n\r\n  if (objectName !== undefined) {\r\n    path += \".\" + objectName;\r\n  }\r\n\r\n  if (objectIndex !== undefined) {\r\n    path += \"[\" + objectIndex + \"]\";\r\n  }\r\n\r\n  if (propertyName !== undefined) {\r\n    path += \".\" + propertyName;\r\n  }\r\n\r\n  if (propertyIndex !== undefined) {\r\n    path += \"[\" + propertyIndex + \"]\";\r\n  }\r\n\r\n  const clonedKeyframeTrack = sourceKeyframeTrack.clone();\r\n  clonedKeyframeTrack.name = path;\r\n\r\n  return clonedKeyframeTrack;\r\n}\r\n\r\nfunction cloneAnimationClip(sourceAnimationClip, cloneUUIDLookup) {\r\n  const clonedTracks = sourceAnimationClip.tracks.map(keyframeTrack =>\r\n    cloneKeyframeTrack(keyframeTrack, cloneUUIDLookup)\r\n  );\r\n  return new THREE.AnimationClip(sourceAnimationClip.name, sourceAnimationClip.duration, clonedTracks);\r\n}\r\n\r\nexport function cloneObject3D(source, preserveUUIDs) {\r\n  const cloneLookup = new Map();\r\n  const cloneUUIDLookup = new Map();\r\n\r\n  const clone = source.clone();\r\n\r\n  parallelTraverse(source, clone, (sourceNode, clonedNode) => {\r\n    cloneLookup.set(sourceNode, clonedNode);\r\n\r\n    if (sourceNode.userData.gltfExtensions?.MOZ_hubs_components) {\r\n      clonedNode.userData.gltfExtensions.MOZ_hubs_components = sourceNode.userData.gltfExtensions.MOZ_hubs_components;\r\n    }\r\n  });\r\n\r\n  source.traverse(sourceNode => {\r\n    const clonedNode = cloneLookup.get(sourceNode);\r\n\r\n    if (preserveUUIDs) {\r\n      clonedNode.uuid = sourceNode.uuid;\r\n    }\r\n\r\n    cloneUUIDLookup.set(sourceNode.uuid, clonedNode.uuid);\r\n  });\r\n\r\n  source.traverse(sourceNode => {\r\n    const clonedNode = cloneLookup.get(sourceNode);\r\n\r\n    if (!clonedNode) {\r\n      return;\r\n    }\r\n\r\n    clonedNode.onBeforeRender = sourceNode.onBeforeRender;\r\n\r\n    if (sourceNode.animations) {\r\n      clonedNode.animations = sourceNode.animations.map(animationClip =>\r\n        cloneAnimationClip(animationClip, cloneUUIDLookup)\r\n      );\r\n    }\r\n\r\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\r\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\r\n    }\r\n\r\n    if ((clonedNode.isDirectionalLight || clonedNode.isSpotLight) && sourceNode.target) {\r\n      clonedNode.target = cloneLookup.get(sourceNode.target);\r\n    }\r\n\r\n    if (!sourceNode.isSkinnedMesh) return;\r\n\r\n    const sourceBones = sourceNode.skeleton.bones;\r\n\r\n    clonedNode.skeleton = sourceNode.skeleton.clone();\r\n\r\n    clonedNode.skeleton.bones = sourceBones.map(sourceBone => {\r\n      if (!cloneLookup.has(sourceBone)) {\r\n        throw new Error(\"Required bones are not descendants of the given object.\");\r\n      }\r\n\r\n      return cloneLookup.get(sourceBone);\r\n    });\r\n\r\n    clonedNode.bind(clonedNode.skeleton, sourceNode.bindMatrix);\r\n  });\r\n\r\n  return clone;\r\n}\r\n\r\nexport function findNode(root, pred) {\r\n  let nodes = [root];\r\n  while (nodes.length) {\r\n    const node = nodes.shift();\r\n    if (pred(node)) return node;\r\n    if (node.children) nodes = nodes.concat(node.children);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport const interpolateAffine = (function () {\r\n  const mat4 = new THREE.Matrix4();\r\n  const end = {\r\n    position: new THREE.Vector3(),\r\n    quaternion: new THREE.Quaternion(),\r\n    scale: new THREE.Vector3()\r\n  };\r\n  const start = {\r\n    position: new THREE.Vector3(),\r\n    quaternion: new THREE.Quaternion(),\r\n    scale: new THREE.Vector3()\r\n  };\r\n  const interpolated = {\r\n    position: new THREE.Vector3(),\r\n    quaternion: new THREE.Quaternion(),\r\n    scale: new THREE.Vector3()\r\n  };\r\n  return function (startMat4, endMat4, progress, outMat4) {\r\n    start.quaternion.setFromRotationMatrix(mat4.extractRotation(startMat4));\r\n    end.quaternion.setFromRotationMatrix(mat4.extractRotation(endMat4));\r\n    interpolated.quaternion.slerpQuaternions(start.quaternion, end.quaternion, progress);\r\n    interpolated.position.lerpVectors(\r\n      start.position.setFromMatrixColumn(startMat4, 3),\r\n      end.position.setFromMatrixColumn(endMat4, 3),\r\n      progress\r\n    );\r\n    interpolated.scale.lerpVectors(\r\n      start.scale.setFromMatrixScale(startMat4),\r\n      end.scale.setFromMatrixScale(endMat4),\r\n      progress\r\n    );\r\n    return outMat4.compose(interpolated.position, interpolated.quaternion, interpolated.scale);\r\n  };\r\n})();\r\n\r\nexport const squareDistanceBetween = (function () {\r\n  const posA = new THREE.Vector3();\r\n  const posB = new THREE.Vector3();\r\n  return function (objA, objB) {\r\n    objA.updateMatrices();\r\n    objB.updateMatrices();\r\n    posA.setFromMatrixColumn(objA.matrixWorld, 3);\r\n    posB.setFromMatrixColumn(objB.matrixWorld, 3);\r\n    return posA.distanceToSquared(posB);\r\n  };\r\n})();\r\n\r\nexport function isAlmostUniformVector3(v, epsilonHalf = 0.005) {\r\n  return Math.abs(v.x - v.y) < epsilonHalf && Math.abs(v.x - v.z) < epsilonHalf;\r\n}\r\nexport function almostEqual(a, b, epsilon = 0.01) {\r\n  return Math.abs(a - b) < epsilon;\r\n}\r\n\r\nexport const affixToWorldUp = (function () {\r\n  const inRotationMat4 = new THREE.Matrix4();\r\n  const inForward = new THREE.Vector3();\r\n  const outForward = new THREE.Vector3();\r\n  const outSide = new THREE.Vector3();\r\n  const worldUp = new THREE.Vector3(); // Could be called \"outUp\"\r\n  const v = new THREE.Vector3();\r\n  const inMat4Copy = new THREE.Matrix4();\r\n  return function affixToWorldUp(inMat4, outMat4) {\r\n    inRotationMat4.identity().extractRotation(inMat4Copy.copy(inMat4));\r\n    inForward.setFromMatrixColumn(inRotationMat4, 2).multiplyScalar(-1);\r\n    outForward\r\n      .copy(inForward)\r\n      .sub(v.copy(inForward).projectOnVector(worldUp.set(0, 1, 0)))\r\n      .normalize();\r\n    outSide.crossVectors(outForward, worldUp);\r\n    outMat4.makeBasis(outSide, worldUp, outForward.multiplyScalar(-1));\r\n    outMat4.scale(v.setFromMatrixScale(inMat4Copy));\r\n    outMat4.setPosition(v.setFromMatrixColumn(inMat4Copy, 3));\r\n    return outMat4;\r\n  };\r\n})();\r\n\r\nexport const calculateCameraTransformForWaypoint = (function () {\r\n  const upAffixedCameraTransform = new THREE.Matrix4();\r\n  const upAffixedWaypointTransform = new THREE.Matrix4();\r\n  const detachFromWorldUp = new THREE.Matrix4();\r\n  return function calculateCameraTransformForWaypoint(cameraTransform, waypointTransform, outMat4) {\r\n    affixToWorldUp(cameraTransform, upAffixedCameraTransform);\r\n    detachFromWorldUp.copy(upAffixedCameraTransform).invert().multiply(cameraTransform);\r\n    affixToWorldUp(waypointTransform, upAffixedWaypointTransform);\r\n    outMat4.copy(upAffixedWaypointTransform).multiply(detachFromWorldUp);\r\n  };\r\n})();\r\n\r\nexport const calculateViewingDistance = (function () {\r\n  return function calculateViewingDistance(fov, aspect, box, center, vrMode) {\r\n    const halfYExtents = Math.max(Math.abs(box.max.y - center.y), Math.abs(center.y - box.min.y));\r\n    const halfXExtents = Math.max(Math.abs(box.max.x - center.x), Math.abs(center.x - box.min.x));\r\n    const halfVertFOV = THREE.MathUtils.degToRad(fov / 2);\r\n    const halfHorFOV = Math.atan(Math.tan(halfVertFOV) * aspect) * (vrMode ? 0.5 : 1);\r\n    const margin = 1.05;\r\n    const length1 = Math.abs((halfYExtents * margin) / Math.tan(halfVertFOV));\r\n    const length2 = Math.abs((halfXExtents * margin) / Math.tan(halfHorFOV));\r\n    const length3 = Math.abs(box.max.z - center.z) + Math.max(length1, length2);\r\n    const length = vrMode ? Math.max(0.25, length3) : length3;\r\n    return length || 1.25;\r\n  };\r\n})();\r\n\r\nexport const rotateInPlaceAroundWorldUp = (function () {\r\n  const inMat4Copy = new THREE.Matrix4();\r\n  const startRotation = new THREE.Matrix4();\r\n  const endRotation = new THREE.Matrix4();\r\n  const v = new THREE.Vector3();\r\n  return function rotateInPlaceAroundWorldUp(inMat4, theta, outMat4) {\r\n    inMat4Copy.copy(inMat4);\r\n    return outMat4\r\n      .copy(endRotation.makeRotationY(theta).multiply(startRotation.extractRotation(inMat4Copy)))\r\n      .scale(v.setFromMatrixScale(inMat4Copy))\r\n      .setPosition(v.setFromMatrixPosition(inMat4Copy));\r\n  };\r\n})();\r\n\r\nexport const childMatch = (function () {\r\n  const inverseParentWorld = new THREE.Matrix4();\r\n  const childRelativeToParent = new THREE.Matrix4();\r\n  const childInverse = new THREE.Matrix4();\r\n  const newParentMatrix = new THREE.Matrix4();\r\n  // transform the parent such that its child matches the target\r\n  return function childMatch(parent, child, target) {\r\n    parent.updateMatrices();\r\n    inverseParentWorld.copy(parent.matrixWorld).invert();\r\n    child.updateMatrices();\r\n    childRelativeToParent.multiplyMatrices(inverseParentWorld, child.matrixWorld);\r\n    childInverse.copy(childRelativeToParent).invert();\r\n    newParentMatrix.multiplyMatrices(target, childInverse);\r\n    setMatrixWorld(parent, newParentMatrix);\r\n  };\r\n})();\r\n\r\nexport function createPlaneBufferGeometry(width, height, widthSegments, heightSegments, flipY = true) {\r\n  const geometry = new THREE.PlaneBufferGeometry(width, height, widthSegments, heightSegments);\r\n  // Three.js seems to assume texture flipY is true for all its built in geometry\r\n  // but we turn this off on our texture loader since createImageBitmap in Firefox\r\n  // does not support flipping. Then we flip the uv for flipY = false texture.\r\n  if (flipY === false) {\r\n    const uv = geometry.getAttribute(\"uv\");\r\n    for (let i = 0; i < uv.count; i++) {\r\n      uv.setY(i, 1.0 - uv.getY(i));\r\n    }\r\n  }\r\n  return geometry;\r\n}\r\n\r\nimport { Layers } from \"../camera-layers\";\r\n\r\n// This code is from three-vrm. We will likely be using that in the future and this inlined code can go away\r\nfunction excludeTriangles(triangles, bws, skinIndex, exclude) {\r\n  let count = 0;\r\n  if (bws != null && bws.length > 0) {\r\n    for (let i = 0; i < triangles.length; i += 3) {\r\n      const a = triangles[i];\r\n      const b = triangles[i + 1];\r\n      const c = triangles[i + 2];\r\n      const bw0 = bws[a];\r\n      const skin0 = skinIndex[a];\r\n\r\n      if (bw0[0] > 0 && exclude.includes(skin0[0])) continue;\r\n      if (bw0[1] > 0 && exclude.includes(skin0[1])) continue;\r\n      if (bw0[2] > 0 && exclude.includes(skin0[2])) continue;\r\n      if (bw0[3] > 0 && exclude.includes(skin0[3])) continue;\r\n\r\n      const bw1 = bws[b];\r\n      const skin1 = skinIndex[b];\r\n      if (bw1[0] > 0 && exclude.includes(skin1[0])) continue;\r\n      if (bw1[1] > 0 && exclude.includes(skin1[1])) continue;\r\n      if (bw1[2] > 0 && exclude.includes(skin1[2])) continue;\r\n      if (bw1[3] > 0 && exclude.includes(skin1[3])) continue;\r\n\r\n      const bw2 = bws[c];\r\n      const skin2 = skinIndex[c];\r\n      if (bw2[0] > 0 && exclude.includes(skin2[0])) continue;\r\n      if (bw2[1] > 0 && exclude.includes(skin2[1])) continue;\r\n      if (bw2[2] > 0 && exclude.includes(skin2[2])) continue;\r\n      if (bw2[3] > 0 && exclude.includes(skin2[3])) continue;\r\n\r\n      triangles[count++] = a;\r\n      triangles[count++] = b;\r\n      triangles[count++] = c;\r\n    }\r\n  }\r\n  return count;\r\n}\r\n\r\nfunction createErasedMesh(src, erasingBonesIndex) {\r\n  const dst = new THREE.SkinnedMesh(src.geometry.clone(), src.material);\r\n  dst.name = `${src.name}(headless)`;\r\n  dst.frustumCulled = src.frustumCulled;\r\n  dst.layers.set(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\r\n\r\n  const geometry = dst.geometry;\r\n\r\n  const skinIndexAttr = geometry.getAttribute(\"skinIndex\").array;\r\n  const skinIndex = [];\r\n  for (let i = 0; i < skinIndexAttr.length; i += 4) {\r\n    skinIndex.push([skinIndexAttr[i], skinIndexAttr[i + 1], skinIndexAttr[i + 2], skinIndexAttr[i + 3]]);\r\n  }\r\n\r\n  const skinWeightAttr = geometry.getAttribute(\"skinWeight\").array;\r\n  const skinWeight = [];\r\n  for (let i = 0; i < skinWeightAttr.length; i += 4) {\r\n    skinWeight.push([skinWeightAttr[i], skinWeightAttr[i + 1], skinWeightAttr[i + 2], skinWeightAttr[i + 3]]);\r\n  }\r\n\r\n  const index = geometry.getIndex();\r\n  if (!index) {\r\n    throw new Error(\"The geometry doesn't have an index buffer\");\r\n  }\r\n  const oldTriangles = Array.from(index.array);\r\n\r\n  const count = excludeTriangles(oldTriangles, skinWeight, skinIndex, erasingBonesIndex);\r\n  const newTriangle = [];\r\n  for (let i = 0; i < count; i++) {\r\n    newTriangle[i] = oldTriangles[i];\r\n  }\r\n  geometry.setIndex(newTriangle);\r\n\r\n  if (src.onBeforeRender) {\r\n    dst.onBeforeRender = src.onBeforeRender;\r\n  }\r\n\r\n  dst.bind(new THREE.Skeleton(src.skeleton.bones, src.skeleton.boneInverses), new THREE.Matrix4());\r\n\r\n  return dst;\r\n}\r\n\r\nfunction isEraseTarget(bone) {\r\n  return bone.name === \"Head\" || (bone.parent && isEraseTarget(bone.parent));\r\n}\r\n\r\nexport function createHeadlessModelForSkinnedMesh(mesh) {\r\n  const eraseBoneIndexes = [];\r\n  mesh.skeleton.bones.forEach((bone, index) => {\r\n    if (isEraseTarget(bone)) eraseBoneIndexes.push(index);\r\n  });\r\n\r\n  if (!eraseBoneIndexes.length) {\r\n    mesh.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\r\n    mesh.layers.enable(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\r\n    return;\r\n  }\r\n\r\n  mesh.layers.set(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\r\n\r\n  return createErasedMesh(mesh, eraseBoneIndexes);\r\n}\r\n\r\nexport function createModelForSkinnedMesh(mesh) {\r\n  return createErasedMesh(mesh, []);\r\n}\r\n\r\nexport const isFacingCamera = (function () {\r\n  const objWorldDir = new THREE.Vector3();\r\n  const objWorld = new THREE.Vector3();\r\n  const camWorld = new THREE.Vector3();\r\n  return function isFacingCamera(obj) {\r\n    const playerCamera = AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.viewingCamera;\r\n    playerCamera.getWorldPosition(camWorld);\r\n    obj.getWorldPosition(objWorld);\r\n    obj.getWorldDirection(objWorldDir);\r\n    return objWorldDir.dot(objWorld.sub(camWorld)) < 0;\r\n  };\r\n})();\r\n\r\nexport function findAncestor(obj, predicate) {\r\n  let ancestor = obj;\r\n  while (ancestor) {\r\n    if (predicate(ancestor)) return ancestor;\r\n    ancestor = ancestor.parent;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function traverseSome(obj, fn) {\r\n  const shouldContinue = fn(obj);\r\n  if (shouldContinue) {\r\n    for (let i = 0; i < obj.children.length; i++) {\r\n      traverseSome(obj.children[i], fn);\r\n    }\r\n  }\r\n}\r\n","import GLBRangeRequests from \"three-gltf-extensions/loaders/GLB_range_requests/GLB_range_requests\";\r\nimport GLTFLodExtension from \"three-gltf-extensions/loaders/MSFT_lod/MSFT_lod\";\r\nimport { acceleratedRaycast, MeshBVH } from \"three-mesh-bvh\";\r\nimport { BasisTextureLoader } from \"three/examples/jsm/loaders/BasisTextureLoader\";\r\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport { KTX2Loader } from \"three/examples/jsm/loaders/KTX2Loader\";\r\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader\";\r\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\r\nimport { convertStandardMaterial, mapMaterials, updateMaterials } from \"../utils/material-utils\";\r\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\r\nimport nextTick from \"../utils/next-tick\";\r\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\r\nimport qsTruthy from \"../utils/qs_truthy\";\r\nimport { cloneObject3D, disposeMaterial } from \"../utils/three-utils\";\r\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\r\n\r\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\r\n\r\nclass GLTFCache {\r\n  cache = new Map();\r\n\r\n  set(src, gltf) {\r\n    gltf.scene.userData.gltfCacheKey = src;\r\n    this.cache.set(src, {\r\n      gltf,\r\n      count: 0\r\n    });\r\n    return this.retain(src);\r\n  }\r\n\r\n  has(src) {\r\n    return this.cache.has(src);\r\n  }\r\n\r\n  get(src) {\r\n    return this.cache.get(src);\r\n  }\r\n\r\n  retain(src) {\r\n    const cacheItem = this.cache.get(src);\r\n    cacheItem.count++;\r\n    return cacheItem;\r\n  }\r\n\r\n  release(src) {\r\n    const cacheItem = this.cache.get(src);\r\n\r\n    if (!cacheItem) {\r\n      console.error(`Releasing uncached gltf ${src}`);\r\n      return;\r\n    }\r\n\r\n    cacheItem.count--;\r\n    if (cacheItem.count <= 0) {\r\n      cacheItem.gltf.scene.dispose();\r\n      this.cache.delete(src);\r\n    }\r\n  }\r\n}\r\n\r\nexport const gltfCache = new GLTFCache();\r\nconst inflightGltfs = new Map();\r\n\r\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\r\n\r\nfunction defaultInflator(el, componentName, componentData) {\r\n  if (!AFRAME.components[componentName]) {\r\n    console.warn(`Inflator failed. \"${componentName}\" component does not exist.`);\r\n    return;\r\n  }\r\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\r\n    for (let i = 0; i < componentData.length; i++) {\r\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\r\n    }\r\n  } else {\r\n    el.setAttribute(componentName, componentData);\r\n  }\r\n}\r\n\r\nAFRAME.GLTFModelPlus = {\r\n  // eslint-disable-next-line no-unused-vars\r\n  components: {},\r\n  registerComponent(componentKey, componentName, inflator) {\r\n    inflator = inflator || defaultInflator;\r\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\r\n  }\r\n};\r\n\r\nfunction generateMeshBVH(object3D) {\r\n  object3D.traverse(obj => {\r\n    // note that we might already have a bounds tree if this was a clone of an object with one\r\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\r\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\r\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\r\n      const geo = obj.geometry;\r\n\r\n      if (\r\n        geo.attributes.position.isInterleavedBufferAttribute ||\r\n        (geo.index && geo.index.isInterleavedBufferAttribute)\r\n      ) {\r\n        console.warn(\"Skipping generaton of MeshBVH for interleaved geoemtry as it is not supported\");\r\n        return;\r\n      }\r\n\r\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\r\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\r\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\r\n      // we put this in a web worker)\r\n\r\n      if (triCount > 1000 && triCount < 1000000) {\r\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\r\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nfunction cloneGltf(gltf) {\r\n  const scene = cloneObject3D(gltf.scene);\r\n  return {\r\n    animations: scene.animations,\r\n    scene\r\n  };\r\n}\r\n\r\nfunction getHubsComponents(node) {\r\n  const hubsComponents =\r\n    node.userData.gltfExtensions &&\r\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\r\n\r\n  // We can remove support for legacy components when our environment, avatar and interactable models are\r\n  // updated to match Spoke output.\r\n  const legacyComponents = node.userData.components;\r\n\r\n  return hubsComponents || legacyComponents;\r\n}\r\n\r\nfunction getHubsComponentsFromMaterial(node) {\r\n  const material = node.material;\r\n\r\n  if (!material) {\r\n    return null;\r\n  }\r\n\r\n  return getHubsComponents(material);\r\n}\r\n\r\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\r\n/// and template data to construct A-Frame entities and components when necessary.\r\n/// (It's unnecessary to construct entities for subtrees that have no component data\r\n/// or templates associated with any of their nodes.)\r\n///\r\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\r\nconst inflateEntities = function (indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\r\n  // TODO: Remove this once we update the legacy avatars to the new node names\r\n  if (node.name === \"Chest\") {\r\n    node.name = \"Spine\";\r\n  } else if (node.name === \"Root Scene\") {\r\n    node.name = \"AvatarRoot\";\r\n  } else if (node.name === \"Bot_Skinned\") {\r\n    node.name = \"AvatarMesh\";\r\n  }\r\n\r\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\r\n  const childEntities = [];\r\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\r\n  for (const child of children) {\r\n    const el = inflateEntities(indexToEntityMap, child, templates);\r\n    if (el) {\r\n      childEntities.push(el);\r\n    }\r\n  }\r\n\r\n  const entityComponents = getHubsComponents(node);\r\n  const materialComponents = getHubsComponentsFromMaterial(node);\r\n\r\n  const nodeHasBehavior = !!entityComponents || !!materialComponents || node.name in templates;\r\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\r\n    return null; // we don't need an entity for this node\r\n  }\r\n\r\n  const el = document.createElement(\"a-entity\");\r\n  el.append.apply(el, childEntities);\r\n\r\n  // Remove invalid CSS class name characters.\r\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\r\n  el.classList.add(className);\r\n\r\n  // AFRAME rotation component expects rotations in YXZ, convert it\r\n  if (node.rotation.order !== \"YXZ\") {\r\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\r\n  }\r\n\r\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\r\n  // all updates to the object should be done through the THREE.Group wrapper\r\n  el.object3D.position.copy(node.position);\r\n  el.object3D.rotation.copy(node.rotation);\r\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\r\n  el.object3D.matrixNeedsUpdate = true;\r\n\r\n  node.matrixAutoUpdate = false;\r\n  node.matrix.identity();\r\n  node.matrix.decompose(node.position, node.rotation, node.scale);\r\n\r\n  el.setObject3D(node.type.toLowerCase(), node);\r\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\r\n    el.setObject3D(\"mesh\", node);\r\n  }\r\n\r\n  // Set the name of the `THREE.Group` to match the name of the node,\r\n  // so that templates can be attached to the correct AFrame entity.\r\n  el.object3D.name = node.name;\r\n\r\n  // Set the uuid of the `THREE.Group` to match the uuid of the node,\r\n  // so that `THREE.PropertyBinding` will find (and later animate)\r\n  // the group. See `PropertyBinding.findNode`:\r\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\r\n  el.object3D.uuid = node.uuid;\r\n  node.uuid = THREE.MathUtils.generateUUID();\r\n\r\n  if (node.animations) {\r\n    // Pass animations up to the group object so that when we can pass the group as\r\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\r\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\r\n    // `null` in `THREE.AnimationClip.findByName`.\r\n    node.parent.animations = node.animations;\r\n  }\r\n\r\n  if (node.morphTargetInfluences) {\r\n    node.parent.morphTargetInfluences = node.morphTargetInfluences;\r\n  }\r\n\r\n  const gltfIndex = node.userData.gltfIndex;\r\n  if (gltfIndex !== undefined) {\r\n    indexToEntityMap[gltfIndex] = el;\r\n  }\r\n\r\n  return el;\r\n};\r\n\r\nasync function inflateComponents(inflatedEntity, indexToEntityMap) {\r\n  let isFirstInflation = true;\r\n  const objectInflations = [];\r\n\r\n  inflatedEntity.object3D.traverse(async object3D => {\r\n    const objectInflation = {};\r\n    objectInflation.promise = new Promise(resolve => (objectInflation.resolve = resolve));\r\n    objectInflations.push(objectInflation);\r\n\r\n    if (!isFirstInflation) {\r\n      await objectInflations.shift().promise;\r\n    }\r\n    isFirstInflation = false;\r\n\r\n    const entityComponents = getHubsComponents(object3D);\r\n    const el = object3D.el;\r\n\r\n    function resolveNodeRefs(componentData) {\r\n      for (const propName in componentData) {\r\n        const value = componentData[propName];\r\n        const type = value?.__mhc_link_type;\r\n        if (type === \"node\" && value.index !== undefined) {\r\n          if (indexToEntityMap[value.index]) {\r\n            componentData[propName] = indexToEntityMap[value.index].object3D;\r\n          } else {\r\n            console.warn(\"inflateComponents: invalid node reference\", propName);\r\n            componentData[propName] = null;\r\n          }\r\n        }\r\n      }\r\n      return componentData;\r\n    }\r\n\r\n    if (entityComponents && el) {\r\n      for (const prop in entityComponents) {\r\n        if (\r\n          Object.prototype.hasOwnProperty.call(entityComponents, prop) &&\r\n          Object.prototype.hasOwnProperty.call(AFRAME.GLTFModelPlus.components, prop)\r\n        ) {\r\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\r\n          await inflator(\r\n            el,\r\n            componentName,\r\n            resolveNodeRefs(entityComponents[prop]),\r\n            entityComponents,\r\n            indexToEntityMap\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    const materialComponents = getHubsComponentsFromMaterial(object3D);\r\n\r\n    if (materialComponents && el) {\r\n      for (const prop in materialComponents) {\r\n        if (\r\n          Object.prototype.hasOwnProperty.call(materialComponents, prop) &&\r\n          Object.prototype.hasOwnProperty.call(AFRAME.GLTFModelPlus.components, prop)\r\n        ) {\r\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\r\n          await inflator(\r\n            el,\r\n            componentName,\r\n            resolveNodeRefs(materialComponents[prop]),\r\n            materialComponents,\r\n            indexToEntityMap\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    objectInflation.resolve();\r\n  });\r\n\r\n  await objectInflations.shift().promise;\r\n}\r\n\r\nfunction attachTemplate(root, name, templateRoot) {\r\n  const targetEls = root.querySelectorAll(\".\" + name);\r\n  for (const el of targetEls) {\r\n    const root = templateRoot.cloneNode(true);\r\n    // Merge root element attributes with the target element\r\n    for (const { name, value } of root.attributes) {\r\n      el.setAttribute(name, value);\r\n    }\r\n\r\n    // Append all child elements\r\n    while (root.children.length > 0) {\r\n      el.appendChild(root.children[0]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction getHubsComponentsExtension(node) {\r\n  if (node.extensions && node.extensions.MOZ_hubs_components) {\r\n    return node.extensions.MOZ_hubs_components;\r\n  } else if (node.extensions && node.extensions.HUBS_components) {\r\n    return node.extensions.HUBS_components;\r\n  } else if (node.extras && node.extras.gltfExtensions && node.extras.gltfExtensions.MOZ_hubs_components) {\r\n    return node.extras.gltfExtensions.MOZ_hubs_components;\r\n  }\r\n}\r\n\r\n// Versions are documented here: https://github.com/mozilla/hubs/wiki/MOZ_hubs_components-Changelog\r\n// Make sure to update the wiki and Spoke when bumping a version\r\nfunction runMigration(version, json) {\r\n  if (version < 2) {\r\n    //old heightfields will be on the same node as the nav-mesh, delete those\r\n    const oldHeightfieldNode = json.nodes.find(node => {\r\n      const components = getHubsComponentsExtension(node);\r\n      return components && components.heightfield && components[\"nav-mesh\"];\r\n    });\r\n    if (oldHeightfieldNode) {\r\n      if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.MOZ_hubs_components) {\r\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\r\n      } else if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.HUBS_components) {\r\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\r\n      } else if (\r\n        oldHeightfieldNode.extras &&\r\n        oldHeightfieldNode.extras.gltfExtensions &&\r\n        oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components\r\n      ) {\r\n        delete oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (version < 4) {\r\n    // Lights prior to version 4 should treat range === 0 as if it has zero decay\r\n    if (json.nodes) {\r\n      for (const node of json.nodes) {\r\n        const components = getHubsComponentsExtension(node);\r\n\r\n        if (!components) {\r\n          continue;\r\n        }\r\n\r\n        const light = components[\"spot-light\"] || components[\"point-light\"];\r\n\r\n        if (light && light.range === 0) {\r\n          light.decay = 0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst convertStandardMaterialsIfNeeded = object => {\r\n  const materialQuality = window.APP.store.state.preferences.materialQualitySetting;\r\n  updateMaterials(object, material => convertStandardMaterial(material, materialQuality));\r\n  return object;\r\n};\r\n\r\nlet ktxLoader;\r\nlet dracoLoader;\r\n\r\nclass GLTFHubsPlugin {\r\n  constructor(parser, jsonPreprocessor) {\r\n    this.parser = parser;\r\n    this.jsonPreprocessor = jsonPreprocessor;\r\n    this.name = \"MOZ_hubs_plugin\";\r\n\r\n    // We override glTF parser textureLoader with our HubsTextureLoader for\r\n    // 1. Clean up the texture image related resources after it is uploaded to WebGL texture\r\n    // 2. Use ImageBitmapLoader if it is available. The latest official Three.js (r128) glTF loader\r\n    //    attempts to use ImageBitmapLoader if it is avaiable except for Firefox.\r\n    //    But we want to use ImageBitmapLoader even for Firefox so we need this overriding hack.\r\n    // But overriding the textureLoader is hacky and it can cause future potential problems\r\n    // especially in upstraming Three.js. So ideally we should replace this hack\r\n    // with the one using more proper APIs like plugin system at some point.\r\n    // Note: Be careful when replacing our Three.js fork with the official upstraming one that\r\n    //       the latest ImageBitmapLoader passes the second argument to createImageBitmap()\r\n    //       but currently createImageBitmap() on Firefox fails if the second argument is defined.\r\n    //       https://bugzilla.mozilla.org/show_bug.cgi?id=1367251\r\n    //       and this is the reason why the official glTF loader doesn't use ImageBitmapLoader\r\n    //       for Firefox. We will need a workaround for that.\r\n    parser.textureLoader = new HubsTextureLoader(parser.options.manager);\r\n  }\r\n\r\n  beforeRoot() {\r\n    const parser = this.parser;\r\n    const jsonPreprocessor = this.jsonPreprocessor;\r\n\r\n    //\r\n    if (jsonPreprocessor) {\r\n      parser.json = jsonPreprocessor(parser.json);\r\n    }\r\n\r\n    // Ideally Hubs components stuffs should be handled in MozHubsComponents plugin?\r\n    let version = 0;\r\n    if (\r\n      parser.json.extensions &&\r\n      parser.json.extensions.MOZ_hubs_components &&\r\n      Object.prototype.hasOwnProperty.call(parser.json.extensions.MOZ_hubs_components, \"version\")\r\n    ) {\r\n      version = parser.json.extensions.MOZ_hubs_components.version;\r\n    }\r\n    runMigration(version, parser.json);\r\n\r\n    // Note: Here may be rewritten with the one with parser.associations\r\n    const nodes = parser.json.nodes;\r\n    if (nodes) {\r\n      for (let i = 0; i < nodes.length; i++) {\r\n        const node = nodes[i];\r\n\r\n        if (!node.extras) {\r\n          node.extras = {};\r\n        }\r\n\r\n        node.extras.gltfIndex = i;\r\n      }\r\n    }\r\n  }\r\n\r\n  afterRoot(gltf) {\r\n    gltf.scene.traverse(object => {\r\n      // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\r\n      // @TODO: Should this be fixed in the gltf loader?\r\n      object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\r\n      convertStandardMaterialsIfNeeded(object);\r\n    });\r\n\r\n    // Replace animation target node name with the node uuid.\r\n    // I assume track name is 'nodename.property'.\r\n    if (gltf.animations) {\r\n      for (const animation of gltf.animations) {\r\n        for (const track of animation.tracks) {\r\n          const parsedPath = THREE.PropertyBinding.parseTrackName(track.name);\r\n          for (const scene of gltf.scenes) {\r\n            const node = THREE.PropertyBinding.findNode(scene, parsedPath.nodeName);\r\n            if (node) {\r\n              track.name = track.name.replace(/^[^.]*\\./, node.uuid + \".\");\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    gltf.scene.animations = gltf.animations;\r\n  }\r\n}\r\n\r\nclass GLTFHubsComponentsExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = \"MOZ_hubs_components\";\r\n  }\r\n\r\n  afterRoot({ scenes, parser }) {\r\n    const deps = [];\r\n\r\n    const resolveComponents = (gltfRootType, obj) => {\r\n      const idx = parser.associations.get(obj)?.[gltfRootType];\r\n      if (idx === undefined) return;\r\n      const ext = parser.json[gltfRootType][idx].extensions?.[this.name];\r\n      if (!ext) return;\r\n\r\n      // TODO putting this into userData is a bit silly, we should just inflate here, but entities need to be inflated first...\r\n      obj.userData.gltfExtensions = Object.assign(obj.userData.gltfExtensions || {}, {\r\n        MOZ_hubs_components: ext\r\n      });\r\n\r\n      for (const componentName in ext) {\r\n        const props = ext[componentName];\r\n        for (const propName in props) {\r\n          // These components had a variant before mhc_link_type existed that just directly pointed at the node index, fix them\r\n          if (\r\n            ((componentName === \"video-texture-target\" && propName === \"srcNode\") ||\r\n              (componentName === \"audio-target\" && propName === \"srcNode\")) &&\r\n            typeof props[propName] === \"number\"\r\n          ) {\r\n            console.warn(\r\n              `Found an outdated ${componentName} 'srcNode' property, fixing. Make sure you are using the latest exporter.`\r\n            );\r\n            props[propName] = {\r\n              __mhc_link_type: \"node\",\r\n              index: props[propName]\r\n            };\r\n          }\r\n\r\n          const value = props[propName];\r\n          const type = value?.__mhc_link_type;\r\n          if (type && value.index !== undefined) {\r\n            deps.push(\r\n              parser.getDependency(type, value.index).then(loadedDep => {\r\n                // TODO similar to above, this logic being spread out in multiple places is not great...\r\n                // Node refences are assumed to always be in the scene graph. These referneces are late-resolved in inflateComponents\r\n                // otherwise they will need to be updated when cloning (which happens as part of caching).\r\n                if (type === \"node\") return;\r\n\r\n                if (type === \"texture\" && !parser.json.textures[value.index].extensions?.MOZ_texture_rgbe) {\r\n                  // For now assume all non HDR textures linked in hubs components are sRGB.\r\n                  // We can allow this to be overriden later if needed\r\n                  loadedDep.encoding = THREE.sRGBEncoding;\r\n                }\r\n\r\n                props[propName] = loadedDep;\r\n\r\n                return loadedDep;\r\n              })\r\n            );\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    for (let i = 0; i < scenes.length; i++) {\r\n      // TODO this should be done by GLTLoader\r\n      parser.associations.set(scenes[i], { scenes: i });\r\n      scenes[i].traverse(obj => {\r\n        resolveComponents(\"scenes\", obj);\r\n        resolveComponents(\"nodes\", obj);\r\n        mapMaterials(obj, resolveComponents.bind(this, \"materials\"));\r\n      });\r\n    }\r\n\r\n    return Promise.all(deps);\r\n  }\r\n}\r\n\r\nclass GLTFHubsLightMapExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = \"MOZ_lightmap\";\r\n  }\r\n\r\n  // @TODO: Ideally we should use extendMaterialParams hook.\r\n  //        But the current official glTF loader doesn't fire extendMaterialParams\r\n  //        hook for unlit and specular-glossiness materials.\r\n  //        So using loadMaterial hook as workaround so far.\r\n  //        Cons is loadMaterial hook is fired as _invokeOne so\r\n  //        if other plugins defining loadMaterial is registered\r\n  //        there is a chance that this light map extension handler isn't called.\r\n  //        The glTF loader should be updated to remove the limitation.\r\n  loadMaterial(materialIndex) {\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const materialDef = json.materials[materialIndex];\r\n\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\r\n      return null;\r\n    }\r\n\r\n    const extensionDef = materialDef.extensions[this.name];\r\n\r\n    const pending = [];\r\n\r\n    pending.push(parser.loadMaterial(materialIndex));\r\n    pending.push(parser.getDependency(\"texture\", extensionDef.index));\r\n\r\n    return Promise.all(pending).then(results => {\r\n      const material = results[0];\r\n      const lightMap = results[1];\r\n      material.lightMap = lightMap;\r\n      material.lightMapIntensity = extensionDef.intensity !== undefined ? extensionDef.intensity : 1;\r\n\r\n      // See https://github.com/mrdoob/three.js/pull/23613\r\n      if (material.isMeshBasicMaterial) {\r\n        material.lightMapIntensity *= Math.PI;\r\n      }\r\n\r\n      return material;\r\n    });\r\n  }\r\n}\r\n\r\nclass GLTFHubsTextureBasisExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = \"MOZ_HUBS_texture_basis\";\r\n    this.basisLoader = null;\r\n  }\r\n\r\n  loadTexture(textureIndex) {\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const textureDef = json.textures[textureIndex];\r\n\r\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\r\n      return null;\r\n    }\r\n\r\n    if (this.basisLoader === null) {\r\n      this.basisLoader = new BasisTextureLoader(parser.options.manager).detectSupport(AFRAME.scenes[0].renderer);\r\n    }\r\n\r\n    if (!this.basisLoader) {\r\n      // @TODO: Display warning (only if the extension is in extensionsRequired)?\r\n      return null;\r\n    }\r\n\r\n    console.warn(`The ${this.name} extension is deprecated, you should use KHR_texture_basisu instead.`);\r\n\r\n    const extensionDef = textureDef.extensions[this.name];\r\n    const source = extensionDef.source;\r\n\r\n    return parser.loadTextureImage(textureIndex, source, this.basisLoader);\r\n  }\r\n}\r\n\r\nclass GLTFMozTextureRGBE {\r\n  constructor(parser, loader) {\r\n    this.parser = parser;\r\n    this.loader = loader;\r\n    this.name = \"MOZ_texture_rgbe\";\r\n  }\r\n\r\n  loadTexture(textureIndex) {\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const textureDef = json.textures[textureIndex];\r\n\r\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\r\n      return null;\r\n    }\r\n\r\n    const extensionDef = textureDef.extensions[this.name];\r\n    const source = extensionDef.source;\r\n    return parser.loadTextureImage(textureIndex, source, this.loader).then(t => {\r\n      // TODO pretty severe artifacting when using mipmaps, disable for now\r\n      if (t.minFilter == THREE.NearestMipmapNearestFilter || t.minFilter == THREE.NearestMipmapLinearFilter) {\r\n        t.minFilter = THREE.NearestFilter;\r\n      } else if (t.minFilter == THREE.LinearMipmapNearestFilter || t.minFilter == THREE.LinearMipmapLinearFilter) {\r\n        t.minFilter = THREE.LinearFilter;\r\n      }\r\n      return t;\r\n    });\r\n  }\r\n}\r\n\r\nexport async function loadGLTF(src, contentType, onProgress, jsonPreprocessor) {\r\n  let gltfUrl = src;\r\n  let fileMap;\r\n\r\n  if (contentType && (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\"))) {\r\n    fileMap = await extractZipFile(gltfUrl);\r\n    gltfUrl = fileMap[\"scene.gtlf\"];\r\n  }\r\n\r\n  const useRangeRequests = qsTruthy(\"rangerequests\");\r\n  const loadingManager = new THREE.LoadingManager();\r\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\r\n  const gltfLoader = new GLTFLoader(loadingManager);\r\n  gltfLoader\r\n    .register(parser => new GLTFHubsComponentsExtension(parser))\r\n    .register(parser => new GLTFHubsPlugin(parser, jsonPreprocessor))\r\n    .register(parser => new GLTFHubsLightMapExtension(parser))\r\n    .register(parser => new GLTFHubsTextureBasisExtension(parser))\r\n    .register(parser => new GLTFMozTextureRGBE(parser, new RGBELoader().setDataType(THREE.HalfFloatType)))\r\n    .register(\r\n      parser =>\r\n        new GLTFLodExtension(parser, {\r\n          loadingMode: useRangeRequests ? \"progressive\" : \"all\",\r\n          onLoadMesh: (lod, mesh, level, lowestLevel) => {\r\n            // Nothing to do for \"all\" mode\r\n            if (!useRangeRequests) {\r\n              return mesh;\r\n            }\r\n\r\n            // Higher levels are progressively loaded on demand.\r\n            // So some post-loading processings done in gltf-model-plus and media-loader\r\n            // need to be done here now.\r\n\r\n            // Nothing to do if this is the lowest level mesh.\r\n            if (level === lowestLevel || lod.levels.length === 0) {\r\n              return mesh;\r\n            }\r\n\r\n            let lowestMeshLevel = null;\r\n            for (let index = lowestLevel; index > level; index--) {\r\n              if (lod.levels[index].object.type !== \"Object3D\") {\r\n                lowestMeshLevel = index;\r\n                break;\r\n              }\r\n            }\r\n\r\n            if (lowestMeshLevel === null) {\r\n              return mesh;\r\n            }\r\n\r\n            // Create a mesh clone. Otherwise if an lod instance is cloned before higher\r\n            // levels are loaded the lods instance can refer to the same mesh instance,\r\n            // therefore the lods can be broken because an object can't be placed\r\n            // at multiple places in a Three.js scene tree.\r\n            mesh = mesh.clone();\r\n\r\n            convertStandardMaterialsIfNeeded(mesh);\r\n\r\n            // A hacky solution. media-loader and media-utils make a material clone\r\n            // and inject shader code chunk for hover effects on before compile hook\r\n            // as a post-loading process. Here simulates them.\r\n            // @TODO: Check if this always works. Replace with a better and simpler solution.\r\n            const currentOnBeforeRender = mesh.material.onBeforeRender;\r\n            mesh.material = mesh.material.clone();\r\n            mesh.material.onBeforeRender = currentOnBeforeRender;\r\n\r\n            // onBeforeCompile of the material of the lowest level mesh should be\r\n            // already set up because the lowest level should be loaded first.\r\n            mesh.material.onBeforeCompile = lod.levels[lowestMeshLevel].object.material.onBeforeCompile;\r\n\r\n            return mesh;\r\n          }\r\n        })\r\n    );\r\n\r\n  // TODO some models are loaded before the renderer exists. This is likely things like the camera tool and loading cube.\r\n  // They don't currently use KTX textures but if they did this would be an issue. Fixing this is hard but is part of\r\n  // \"taking control of the render loop\" which is something we want to tackle for many reasons.\r\n  if (!ktxLoader && AFRAME && AFRAME.scenes && AFRAME.scenes[0]) {\r\n    ktxLoader = new KTX2Loader(loadingManager).detectSupport(AFRAME.scenes[0].renderer);\r\n  }\r\n  if (!dracoLoader && AFRAME && AFRAME.scenes && AFRAME.scenes[0]) {\r\n    dracoLoader = new DRACOLoader(loadingManager);\r\n  }\r\n\r\n  if (ktxLoader) {\r\n    gltfLoader.setKTX2Loader(ktxLoader);\r\n  }\r\n  if (dracoLoader) {\r\n    gltfLoader.setDRACOLoader(dracoLoader);\r\n  }\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const onLoad = gltf => {\r\n      const disposables = new Set();\r\n\r\n      gltf.scenes.forEach(scene => {\r\n        scene.traverse(obj => {\r\n          if (obj.geometry) {\r\n            disposables.add(obj.geometry);\r\n          }\r\n\r\n          mapMaterials(obj, function (m) {\r\n            disposables.add(m);\r\n          });\r\n\r\n          const mozHubsComponents = obj.userData.gltfExtensions?.MOZ_hubs_components;\r\n          if (mozHubsComponents) {\r\n            for (const name in mozHubsComponents) {\r\n              const componentData = mozHubsComponents[name];\r\n              for (const propName in componentData) {\r\n                const propValue = componentData[propName];\r\n                if (propValue && (propValue.isTexture || propValue.isGeometry)) {\r\n                  disposables.add(propValue);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n\r\n        scene.associations = gltf.parser.associations;\r\n        scene.dispose = function dispose() {\r\n          disposables.forEach(disposable => {\r\n            if (disposable.isMaterial) {\r\n              disposeMaterial(disposable);\r\n            } else {\r\n              disposable.dispose();\r\n            }\r\n          });\r\n        };\r\n      });\r\n\r\n      resolve(gltf);\r\n    };\r\n    if (useRangeRequests) {\r\n      GLBRangeRequests.load(gltfUrl, gltfLoader, onLoad, onProgress, reject);\r\n    } else {\r\n      gltfLoader.load(gltfUrl, onLoad, onProgress, reject);\r\n    }\r\n  }).finally(() => {\r\n    if (fileMap) {\r\n      // The GLTF is now cached as a THREE object, we can get rid of the original blobs\r\n      Object.keys(fileMap).forEach(URL.revokeObjectURL);\r\n    }\r\n  });\r\n}\r\n\r\nexport function cloneModelFromCache(src) {\r\n  if (gltfCache.has(src)) {\r\n    gltfCache.retain(src);\r\n    return cloneGltf(gltfCache.get(src).gltf);\r\n  } else {\r\n    throw new Error(`Model not in cache: ${src}`);\r\n  }\r\n}\r\n\r\n/**\r\n * @param {string} src\r\n * @param {string|null} [contentType]\r\n * @param {boolean} [useCache]\r\n * @param {null|(json:any)=>any} [jsonPreprocessor]\r\n */\r\nexport async function loadModel(src, contentType = null, useCache = false, jsonPreprocessor = null) {\r\n  console.log(`Loading model ${src}`);\r\n  if (useCache) {\r\n    if (gltfCache.has(src)) {\r\n      gltfCache.retain(src);\r\n      return cloneGltf(gltfCache.get(src).gltf);\r\n    } else {\r\n      if (inflightGltfs.has(src)) {\r\n        const gltf = await inflightGltfs.get(src);\r\n        gltfCache.retain(src);\r\n        return cloneGltf(gltf);\r\n      } else {\r\n        const promise = loadGLTF(src, contentType, null, jsonPreprocessor);\r\n        inflightGltfs.set(src, promise);\r\n        const gltf = await promise;\r\n        inflightGltfs.delete(src);\r\n        gltfCache.set(src, gltf);\r\n        return cloneGltf(gltf);\r\n      }\r\n    }\r\n  } else {\r\n    return loadGLTF(src, contentType, null, jsonPreprocessor);\r\n  }\r\n}\r\n\r\nfunction resolveAsset(src) {\r\n  // If the src attribute is a selector, get the url from the asset item.\r\n  if (src && src.charAt(0) === \"#\") {\r\n    const assetEl = document.getElementById(src.substring(1));\r\n    if (assetEl) {\r\n      return assetEl.getAttribute(\"src\");\r\n    }\r\n  }\r\n  return src;\r\n}\r\n\r\n/**\r\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\r\n * allowed components on them if defined in the node's extras.\r\n * @namespace gltf\r\n * @component gltf-model-plus\r\n */\r\nAFRAME.registerComponent(\"gltf-model-plus\", {\r\n  schema: {\r\n    src: { type: \"string\" },\r\n    contentType: { type: \"string\" },\r\n    useCache: { default: true },\r\n    inflate: { default: false },\r\n    modelToWorldScale: { type: \"number\", default: 1 }\r\n  },\r\n\r\n  init() {\r\n    // This can be set externally if a consumer wants to do some node preprocssing.\r\n    this.jsonPreprocessor = null;\r\n\r\n    this.loadTemplates();\r\n  },\r\n\r\n  play() {\r\n    this.el.components[\"listed-media\"] && this.el.sceneEl.emit(\"listed_media_changed\");\r\n  },\r\n\r\n  update() {\r\n    this.applySrc(resolveAsset(this.data.src), this.data.contentType);\r\n  },\r\n\r\n  remove() {\r\n    if (this.data.useCache) {\r\n      const src = resolveAsset(this.data.src);\r\n      if (src) {\r\n        gltfCache.release(src);\r\n      }\r\n    }\r\n  },\r\n\r\n  loadTemplates() {\r\n    this.templates = {};\r\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\r\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\r\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\r\n    });\r\n  },\r\n\r\n  async applySrc(src, contentType) {\r\n    try {\r\n      if (src === this.lastSrc) return;\r\n\r\n      const lastSrc = this.lastSrc;\r\n      this.lastSrc = src;\r\n\r\n      if (!src) {\r\n        if (this.inflatedEl) {\r\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\r\n          this.disposeLastInflatedEl();\r\n        }\r\n        return;\r\n      }\r\n\r\n      this.el.emit(\"model-loading\");\r\n      const gltf = await loadModel(src, contentType, this.data.useCache, this.jsonPreprocessor);\r\n\r\n      // If we started loading something else already\r\n      // TODO: there should be a way to cancel loading instead\r\n      if (src != this.lastSrc) return;\r\n\r\n      // If we had inflated something already before, clean that up\r\n      this.disposeLastInflatedEl();\r\n\r\n      this.model = gltf.scene;\r\n\r\n      if (gltf.animations.length > 0) {\r\n        this.el.setAttribute(\"animation-mixer\", {});\r\n        this.el.components[\"animation-mixer\"].initMixer(gltf.animations);\r\n      } else {\r\n        generateMeshBVH(this.model);\r\n      }\r\n\r\n      const indexToEntityMap = {};\r\n\r\n      let object3DToSet = this.model;\r\n      if (\r\n        this.data.inflate &&\r\n        (this.inflatedEl = inflateEntities(\r\n          indexToEntityMap,\r\n          this.model,\r\n          this.templates,\r\n          true,\r\n          this.data.modelToWorldScale\r\n        ))\r\n      ) {\r\n        this.el.appendChild(this.inflatedEl);\r\n\r\n        object3DToSet = this.inflatedEl.object3D;\r\n        object3DToSet.visible = false;\r\n\r\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\r\n        // Wait one tick for the appended custom elements to be connected before attaching templates\r\n        await nextTick();\r\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\r\n\r\n        await inflateComponents(this.inflatedEl, indexToEntityMap);\r\n\r\n        for (const name in this.templates) {\r\n          attachTemplate(this.el, name, this.templates[name]);\r\n        }\r\n      }\r\n\r\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\r\n      // in the entire inflated entity graph to point to `object3DToSet`.\r\n      //\r\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\r\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\r\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\r\n      // the model or the root GLTF inflated entity.\r\n      const rewires = [];\r\n\r\n      object3DToSet.traverse(o => {\r\n        const el = o.el;\r\n        if (el) rewires.push(() => (o.el = el));\r\n      });\r\n\r\n      if (lastSrc && this.data.useCache) {\r\n        gltfCache.release(lastSrc);\r\n      }\r\n      this.el.setObject3D(\"mesh\", object3DToSet);\r\n\r\n      rewires.forEach(f => f());\r\n\r\n      object3DToSet.visible = true;\r\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: object3DToSet });\r\n    } catch (e) {\r\n      gltfCache.release(src);\r\n      console.error(\"Failed to load glTF model\", e, this);\r\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\r\n    }\r\n  },\r\n\r\n  disposeLastInflatedEl() {\r\n    if (this.inflatedEl) {\r\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\r\n\r\n      this.inflatedEl.object3D.traverse(x => {\r\n        if (x.material && x.material.dispose) {\r\n          x.material.dispose();\r\n        }\r\n\r\n        if (x.geometry) {\r\n          if (x.geometry.dispose) {\r\n            x.geometry.dispose();\r\n          }\r\n\r\n          x.geometry.boundsTree = null;\r\n        }\r\n      });\r\n\r\n      delete this.inflatedEl;\r\n\r\n      this.el.removeAttribute(\"animation-mixer\");\r\n    }\r\n  }\r\n});\r\n","// Wrapper for a worker which accepts work items and responds with results.\r\n//\r\n// The worker must receive messages with data of the shape { id, payload }, and then respond\r\n// with messages containing matching IDs of the shape { id, result, err }.\r\n//\r\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\r\n// will resolve with the result or reject with the error.\r\n//\r\nexport function promisifyWorker(worker) {\r\n  let nextItemId = 0;\r\n  const outstanding = {}; // item ID: { resolve, reject }\r\n\r\n  worker.onmessage = msg => {\r\n    const { id, result, err } = msg.data;\r\n    const handlers = outstanding[id];\r\n    if (handlers == null) {\r\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\r\n    } else {\r\n      delete outstanding[id];\r\n      if (err != null) {\r\n        handlers.reject(new Error(err));\r\n      } else {\r\n        handlers.resolve(result);\r\n      }\r\n    }\r\n  };\r\n\r\n  return function (data, transfer, args = {}) {\r\n    const id = nextItemId++;\r\n    const promise = new Promise((resolve, reject) => {\r\n      outstanding[id] = { resolve, reject };\r\n    });\r\n    worker.postMessage(Object.assign(args, { id, payload: data }), transfer);\r\n    return promise;\r\n  };\r\n}\r\n","\nimport worker from \"!!../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"!function(){\\\"use strict\\\";var e,t,i=(e=function(e,t){var i=\\\"undefined\\\"!=typeof Uint8Array&&\\\"undefined\\\"!=typeof Uint16Array&&\\\"undefined\\\"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if(\\\"object\\\"!=typeof i)throw new TypeError(i+\\\"must be non-object\\\");for(var a in i)n(i,a)&&(e[a]=i[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,i,n,a){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+n),a);else for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){var t,i,n,a,r,o;for(n=0,t=0,i=e.length;t<i;t++)n+=e[t].length;for(o=new Uint8Array(n),a=0,t=0,i=e.length;t<i;t++)r=e[t],o.set(r,a),a+=r.length;return o}},r={arraySet:function(e,t,i,n,a){for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(i)},e(t={exports:{}},t.exports),t.exports);i.assign,i.shrinkBuf,i.setTyped,i.Buf8,i.Buf16,i.Buf32;var n=function(e,t,i,n){for(var a=65535&e|0,r=e>>>16&65535|0,o=0;0!==i;){i-=o=i>2e3?2e3:i;do{r=r+(a=a+t[n++]|0)|0}while(--o);a%=65521,r%=65521}return a|r<<16|0},a=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}(),r=function(e,t,i,n){var r=a,o=n+i;e^=-1;for(var s=n;s<o;s++)e=e>>>8^r[255&(e^t[s])];return-1^e},o=function(e,t){var i,n,a,r,o,s,f,l,d,c,h,u,w,b,p,m,k,v,g,y,x,_,B,A,U;i=e.state,n=e.next_in,A=e.input,a=n+(e.avail_in-5),r=e.next_out,U=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),f=i.dmax,l=i.wsize,d=i.whave,c=i.wnext,h=i.window,u=i.hold,w=i.bits,b=i.lencode,p=i.distcode,m=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{w<15&&(u+=A[n++]<<w,w+=8,u+=A[n++]<<w,w+=8),v=b[u&m];t:for(;;){if(u>>>=g=v>>>24,w-=g,0==(g=v>>>16&255))U[r++]=65535&v;else{if(!(16&g)){if(0==(64&g)){v=b[(65535&v)+(u&(1<<g)-1)];continue t}if(32&g){i.mode=12;break e}e.msg=\\\"invalid literal/length code\\\",i.mode=30;break e}y=65535&v,(g&=15)&&(w<g&&(u+=A[n++]<<w,w+=8),y+=u&(1<<g)-1,u>>>=g,w-=g),w<15&&(u+=A[n++]<<w,w+=8,u+=A[n++]<<w,w+=8),v=p[u&k];i:for(;;){if(u>>>=g=v>>>24,w-=g,!(16&(g=v>>>16&255))){if(0==(64&g)){v=p[(65535&v)+(u&(1<<g)-1)];continue i}e.msg=\\\"invalid distance code\\\",i.mode=30;break e}if(x=65535&v,w<(g&=15)&&(u+=A[n++]<<w,(w+=8)<g&&(u+=A[n++]<<w,w+=8)),(x+=u&(1<<g)-1)>f){e.msg=\\\"invalid distance too far back\\\",i.mode=30;break e}if(u>>>=g,w-=g,x>(g=r-o)){if((g=x-g)>d&&i.sane){e.msg=\\\"invalid distance too far back\\\",i.mode=30;break e}if(_=0,B=h,0===c){if(_+=l-g,g<y){y-=g;do{U[r++]=h[_++]}while(--g);_=r-x,B=U}}else if(c<g){if(_+=l+c-g,(g-=c)<y){y-=g;do{U[r++]=h[_++]}while(--g);if(_=0,c<y){y-=g=c;do{U[r++]=h[_++]}while(--g);_=r-x,B=U}}}else if(_+=c-g,g<y){y-=g;do{U[r++]=h[_++]}while(--g);_=r-x,B=U}for(;y>2;)U[r++]=B[_++],U[r++]=B[_++],U[r++]=B[_++],y-=3;y&&(U[r++]=B[_++],y>1&&(U[r++]=B[_++]))}else{_=r-x;do{U[r++]=U[_++],U[r++]=U[_++],U[r++]=U[_++],y-=3}while(y>2);y&&(U[r++]=U[_++],y>1&&(U[r++]=U[_++]))}break}}break}}while(n<a&&r<s);n-=y=w>>3,u&=(1<<(w-=y<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=r<s?s-r+257:257-(r-s),i.hold=u,i.bits=w},s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],c=function(e,t,n,a,r,o,c,h){var u,w,b,p,m,k,v,g,y,x=h.bits,_=0,B=0,A=0,U=0,C=0,S=0,T=0,R=0,z=0,E=0,L=null,j=0,O=new i.Buf16(16),D=new i.Buf16(16),H=null,I=0;for(_=0;_<=15;_++)O[_]=0;for(B=0;B<a;B++)O[t[n+B]]++;for(C=x,U=15;U>=1&&0===O[U];U--);if(C>U&&(C=U),0===U)return r[o++]=20971520,r[o++]=20971520,h.bits=1,0;for(A=1;A<U&&0===O[A];A++);for(C<A&&(C=A),R=1,_=1;_<=15;_++)if(R<<=1,(R-=O[_])<0)return-1;if(R>0&&(0===e||1!==U))return-1;for(D[1]=0,_=1;_<15;_++)D[_+1]=D[_]+O[_];for(B=0;B<a;B++)0!==t[n+B]&&(c[D[t[n+B]]++]=B);if(0===e?(L=H=c,k=19):1===e?(L=s,j-=257,H=f,I-=257,k=256):(L=l,H=d,k=-1),E=0,B=0,_=A,m=o,S=C,T=0,b=-1,p=(z=1<<C)-1,1===e&&z>852||2===e&&z>592)return 1;for(;;){v=_-T,c[B]<k?(g=0,y=c[B]):c[B]>k?(g=H[I+c[B]],y=L[j+c[B]]):(g=96,y=0),u=1<<_-T,A=w=1<<S;do{r[m+(E>>T)+(w-=u)]=v<<24|g<<16|y|0}while(0!==w);for(u=1<<_-1;E&u;)u>>=1;if(0!==u?(E&=u-1,E+=u):E=0,B++,0==--O[_]){if(_===U)break;_=t[n+c[B]]}if(_>C&&(E&p)!==b){for(0===T&&(T=C),m+=A,R=1<<(S=_-T);S+T<U&&!((R-=O[S+T])<=0);)S++,R<<=1;if(z+=1<<S,1===e&&z>852||2===e&&z>592)return 1;r[b=E&p]=C<<24|S<<16|m-o|0}}return 0!==E&&(r[m+E]=_-T<<24|64<<16|0),h.bits=C,0},h=-2,u=12,w=30;function b(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\\\"\\\",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):h}function k(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,m(e)):h}function v(e,t){var i,n;return e&&e.state?(n=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?h:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,k(e))):h}function g(e,t){var i,n;return e?(n=new p,e.state=n,n.window=null,0!==(i=v(e,t))&&(e.state=null),i):h}var y,x,_=!0;function B(e){if(_){var t;for(y=new i.Buf32(512),x=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c(1,e.lens,0,288,y,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c(2,e.lens,0,32,x,0,e.work,{bits:5}),_=!1}e.lencode=y,e.lenbits=9,e.distcode=x,e.distbits=5}function A(e,t,n,a){var r,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),a>=o.wsize?(i.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>a&&(r=a),i.arraySet(o.window,t,n-a,r,o.wnext),(a-=r)?(i.arraySet(o.window,t,n-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}var U={inflateReset:k,inflateReset2:v,inflateResetKeep:m,inflateInit:function(e){return g(e,15)},inflateInit2:g,inflate:function(e,t){var a,s,f,l,d,p,m,k,v,g,y,x,_,U,C,S,T,R,z,E,L,j,O,D,H=0,I=new i.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;(a=e.state).mode===u&&(a.mode=13),d=e.next_out,f=e.output,m=e.avail_out,l=e.next_in,s=e.input,p=e.avail_in,k=a.hold,v=a.bits,g=p,y=m,j=0;e:for(;;)switch(a.mode){case 1:if(0===a.wrap){a.mode=13;break}for(;v<16;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}if(2&a.wrap&&35615===k){a.check=0,I[0]=255&k,I[1]=k>>>8&255,a.check=r(a.check,I,2,0),k=0,v=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&k)<<8)+(k>>8))%31){e.msg=\\\"incorrect header check\\\",a.mode=w;break}if(8!=(15&k)){e.msg=\\\"unknown compression method\\\",a.mode=w;break}if(v-=4,L=8+(15&(k>>>=4)),0===a.wbits)a.wbits=L;else if(L>a.wbits){e.msg=\\\"invalid window size\\\",a.mode=w;break}a.dmax=1<<L,e.adler=a.check=1,a.mode=512&k?10:u,k=0,v=0;break;case 2:for(;v<16;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}if(a.flags=k,8!=(255&a.flags)){e.msg=\\\"unknown compression method\\\",a.mode=w;break}if(57344&a.flags){e.msg=\\\"unknown header flags set\\\",a.mode=w;break}a.head&&(a.head.text=k>>8&1),512&a.flags&&(I[0]=255&k,I[1]=k>>>8&255,a.check=r(a.check,I,2,0)),k=0,v=0,a.mode=3;case 3:for(;v<32;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}a.head&&(a.head.time=k),512&a.flags&&(I[0]=255&k,I[1]=k>>>8&255,I[2]=k>>>16&255,I[3]=k>>>24&255,a.check=r(a.check,I,4,0)),k=0,v=0,a.mode=4;case 4:for(;v<16;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}a.head&&(a.head.xflags=255&k,a.head.os=k>>8),512&a.flags&&(I[0]=255&k,I[1]=k>>>8&255,a.check=r(a.check,I,2,0)),k=0,v=0,a.mode=5;case 5:if(1024&a.flags){for(;v<16;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}a.length=k,a.head&&(a.head.extra_len=k),512&a.flags&&(I[0]=255&k,I[1]=k>>>8&255,a.check=r(a.check,I,2,0)),k=0,v=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&((x=a.length)>p&&(x=p),x&&(a.head&&(L=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),i.arraySet(a.head.extra,s,l,x,L)),512&a.flags&&(a.check=r(a.check,s,x,l)),p-=x,l+=x,a.length-=x),a.length))break e;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===p)break e;x=0;do{L=s[l+x++],a.head&&L&&a.length<65536&&(a.head.name+=String.fromCharCode(L))}while(L&&x<p);if(512&a.flags&&(a.check=r(a.check,s,x,l)),p-=x,l+=x,L)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===p)break e;x=0;do{L=s[l+x++],a.head&&L&&a.length<65536&&(a.head.comment+=String.fromCharCode(L))}while(L&&x<p);if(512&a.flags&&(a.check=r(a.check,s,x,l)),p-=x,l+=x,L)break e}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;v<16;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}if(k!==(65535&a.check)){e.msg=\\\"header crc mismatch\\\",a.mode=w;break}k=0,v=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=u;break;case 10:for(;v<32;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}e.adler=a.check=b(k),k=0,v=0,a.mode=11;case 11:if(0===a.havedict)return e.next_out=d,e.avail_out=m,e.next_in=l,e.avail_in=p,a.hold=k,a.bits=v,2;e.adler=a.check=1,a.mode=u;case u:if(5===t||6===t)break e;case 13:if(a.last){k>>>=7&v,v-=7&v,a.mode=27;break}for(;v<3;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}switch(a.last=1&k,v-=1,3&(k>>>=1)){case 0:a.mode=14;break;case 1:if(B(a),a.mode=20,6===t){k>>>=2,v-=2;break e}break;case 2:a.mode=17;break;case 3:e.msg=\\\"invalid block type\\\",a.mode=w}k>>>=2,v-=2;break;case 14:for(k>>>=7&v,v-=7&v;v<32;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}if((65535&k)!=(k>>>16^65535)){e.msg=\\\"invalid stored block lengths\\\",a.mode=w;break}if(a.length=65535&k,k=0,v=0,a.mode=15,6===t)break e;case 15:a.mode=16;case 16:if(x=a.length){if(x>p&&(x=p),x>m&&(x=m),0===x)break e;i.arraySet(f,s,l,x,d),p-=x,l+=x,m-=x,d+=x,a.length-=x;break}a.mode=u;break;case 17:for(;v<14;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}if(a.nlen=257+(31&k),k>>>=5,v-=5,a.ndist=1+(31&k),k>>>=5,v-=5,a.ncode=4+(15&k),k>>>=4,v-=4,a.nlen>286||a.ndist>30){e.msg=\\\"too many length or distance symbols\\\",a.mode=w;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;v<3;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}a.lens[N[a.have++]]=7&k,k>>>=3,v-=3}for(;a.have<19;)a.lens[N[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,O={bits:a.lenbits},j=c(0,a.lens,0,19,a.lencode,0,a.work,O),a.lenbits=O.bits,j){e.msg=\\\"invalid code lengths set\\\",a.mode=w;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;S=(H=a.lencode[k&(1<<a.lenbits)-1])>>>16&255,T=65535&H,!((C=H>>>24)<=v);){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}if(T<16)k>>>=C,v-=C,a.lens[a.have++]=T;else{if(16===T){for(D=C+2;v<D;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}if(k>>>=C,v-=C,0===a.have){e.msg=\\\"invalid bit length repeat\\\",a.mode=w;break}L=a.lens[a.have-1],x=3+(3&k),k>>>=2,v-=2}else if(17===T){for(D=C+3;v<D;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}v-=C,L=0,x=3+(7&(k>>>=C)),k>>>=3,v-=3}else{for(D=C+7;v<D;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}v-=C,L=0,x=11+(127&(k>>>=C)),k>>>=7,v-=7}if(a.have+x>a.nlen+a.ndist){e.msg=\\\"invalid bit length repeat\\\",a.mode=w;break}for(;x--;)a.lens[a.have++]=L}}if(a.mode===w)break;if(0===a.lens[256]){e.msg=\\\"invalid code -- missing end-of-block\\\",a.mode=w;break}if(a.lenbits=9,O={bits:a.lenbits},j=c(1,a.lens,0,a.nlen,a.lencode,0,a.work,O),a.lenbits=O.bits,j){e.msg=\\\"invalid literal/lengths set\\\",a.mode=w;break}if(a.distbits=6,a.distcode=a.distdyn,O={bits:a.distbits},j=c(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,O),a.distbits=O.bits,j){e.msg=\\\"invalid distances set\\\",a.mode=w;break}if(a.mode=20,6===t)break e;case 20:a.mode=21;case 21:if(p>=6&&m>=258){e.next_out=d,e.avail_out=m,e.next_in=l,e.avail_in=p,a.hold=k,a.bits=v,o(e,y),d=e.next_out,f=e.output,m=e.avail_out,l=e.next_in,s=e.input,p=e.avail_in,k=a.hold,v=a.bits,a.mode===u&&(a.back=-1);break}for(a.back=0;S=(H=a.lencode[k&(1<<a.lenbits)-1])>>>16&255,T=65535&H,!((C=H>>>24)<=v);){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}if(S&&0==(240&S)){for(R=C,z=S,E=T;S=(H=a.lencode[E+((k&(1<<R+z)-1)>>R)])>>>16&255,T=65535&H,!(R+(C=H>>>24)<=v);){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}k>>>=R,v-=R,a.back+=R}if(k>>>=C,v-=C,a.back+=C,a.length=T,0===S){a.mode=26;break}if(32&S){a.back=-1,a.mode=u;break}if(64&S){e.msg=\\\"invalid literal/length code\\\",a.mode=w;break}a.extra=15&S,a.mode=22;case 22:if(a.extra){for(D=a.extra;v<D;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}a.length+=k&(1<<a.extra)-1,k>>>=a.extra,v-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;S=(H=a.distcode[k&(1<<a.distbits)-1])>>>16&255,T=65535&H,!((C=H>>>24)<=v);){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}if(0==(240&S)){for(R=C,z=S,E=T;S=(H=a.distcode[E+((k&(1<<R+z)-1)>>R)])>>>16&255,T=65535&H,!(R+(C=H>>>24)<=v);){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}k>>>=R,v-=R,a.back+=R}if(k>>>=C,v-=C,a.back+=C,64&S){e.msg=\\\"invalid distance code\\\",a.mode=w;break}a.offset=T,a.extra=15&S,a.mode=24;case 24:if(a.extra){for(D=a.extra;v<D;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}a.offset+=k&(1<<a.extra)-1,k>>>=a.extra,v-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg=\\\"invalid distance too far back\\\",a.mode=w;break}a.mode=25;case 25:if(0===m)break e;if(x=y-m,a.offset>x){if((x=a.offset-x)>a.whave&&a.sane){e.msg=\\\"invalid distance too far back\\\",a.mode=w;break}x>a.wnext?(x-=a.wnext,_=a.wsize-x):_=a.wnext-x,x>a.length&&(x=a.length),U=a.window}else U=f,_=d-a.offset,x=a.length;x>m&&(x=m),m-=x,a.length-=x;do{f[d++]=U[_++]}while(--x);0===a.length&&(a.mode=21);break;case 26:if(0===m)break e;f[d++]=a.length,m--,a.mode=21;break;case 27:if(a.wrap){for(;v<32;){if(0===p)break e;p--,k|=s[l++]<<v,v+=8}if(y-=m,e.total_out+=y,a.total+=y,y&&(e.adler=a.check=a.flags?r(a.check,f,y,d-y):n(a.check,f,y,d-y)),y=m,(a.flags?k:b(k))!==a.check){e.msg=\\\"incorrect data check\\\",a.mode=w;break}k=0,v=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;v<32;){if(0===p)break e;p--,k+=s[l++]<<v,v+=8}if(k!==(4294967295&a.total)){e.msg=\\\"incorrect length check\\\",a.mode=w;break}k=0,v=0}a.mode=29;case 29:j=1;break e;case w:j=-3;break e;case 31:return-4;default:return h}return e.next_out=d,e.avail_out=m,e.next_in=l,e.avail_in=p,a.hold=k,a.bits=v,(a.wsize||y!==e.avail_out&&a.mode<w&&(a.mode<27||4!==t))&&A(e,e.output,e.next_out,y-e.avail_out)?(a.mode=31,-4):(g-=e.avail_in,y-=e.avail_out,e.total_in+=g,e.total_out+=y,a.total+=y,a.wrap&&y&&(e.adler=a.check=a.flags?r(a.check,f,y,e.next_out-y):n(a.check,f,y,e.next_out-y)),e.data_type=a.bits+(a.last?64:0)+(a.mode===u?128:0)+(20===a.mode||15===a.mode?256:0),(0===g&&0===y||4===t)&&0===j&&(j=-5),j)},inflateEnd:function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,0},inflateGetHeader:function(e,t){var i;return e&&e.state?0==(2&(i=e.state).wrap)?h:(i.head=t,t.done=!1,0):h},inflateSetDictionary:function(e,t){var i,a=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?h:11===i.mode&&n(1,t,a,0)!==i.check?-3:A(e,t,a,a)?(i.mode=31,-4):(i.havedict=1,0):h},inflateInfo:\\\"pako inflate (from Nodeca project)\\\"},C=!0,S=!0;try{String.fromCharCode.apply(null,[0])}catch(e){C=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){S=!1}for(var T=new i.Buf8(256),R=0;R<256;R++)T[R]=R>=252?6:R>=248?5:R>=240?4:R>=224?3:R>=192?2:1;T[254]=T[254]=1;var z=function(e){var t,n,a,r,o,s=e.length,f=0;for(r=0;r<s;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(a=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(a-56320),r++),f+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(f),o=0,r=0;o<f;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(a=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(a-56320),r++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},E=function(e,t){var n,a,r,o,s=t||e.length,f=new Array(2*s);for(a=0,n=0;n<s;)if((r=e[n++])<128)f[a++]=r;else if((o=T[r])>4)f[a++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&n<s;)r=r<<6|63&e[n++],o--;o>1?f[a++]=65533:r<65536?f[a++]=r:(r-=65536,f[a++]=55296|r>>10&1023,f[a++]=56320|1023&r)}return function(e,t){if(t<65537&&(e.subarray&&S||!e.subarray&&C))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n=\\\"\\\",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}(f,a)},L=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+T[e[i]]>t?i:t},j={2:\\\"need dictionary\\\",1:\\\"stream end\\\",0:\\\"\\\",\\\"-1\\\":\\\"file error\\\",\\\"-2\\\":\\\"stream error\\\",\\\"-3\\\":\\\"data error\\\",\\\"-4\\\":\\\"insufficient memory\\\",\\\"-5\\\":\\\"buffer error\\\",\\\"-6\\\":\\\"incompatible version\\\"},O=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\\\"\\\",this.state=null,this.data_type=2,this.adler=0},D=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\\\"\\\",this.comment=\\\"\\\",this.hcrc=0,this.done=!1},H=Object.prototype.toString;function I(e){if(!(this instanceof I))return new I(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:\\\"\\\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\\\"\\\",this.ended=!1,this.chunks=[],this.strm=new O,this.strm.avail_out=0;var n=U.inflateInit2(this.strm,t.windowBits);if(0!==n)throw new Error(j[n]);this.header=new D,U.inflateGetHeader(this.strm,this.header)}function N(e,t){var i=new I(t);if(i.push(e,!0),i.err)throw i.msg||j[i.err];return i.result}I.prototype.push=function(e,t){var n,a,r,o,s,f,l=this.strm,d=this.options.chunkSize,c=this.options.dictionary,h=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,\\\"string\\\"==typeof e?l.input=function(e){for(var t=new i.Buf8(e.length),n=0,a=t.length;n<a;n++)t[n]=e.charCodeAt(n);return t}(e):\\\"[object ArrayBuffer]\\\"===H.call(e)?l.input=new Uint8Array(e):l.input=e,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new i.Buf8(d),l.next_out=0,l.avail_out=d),2===(n=U.inflate(l,0))&&c&&(f=\\\"string\\\"==typeof c?z(c):\\\"[object ArrayBuffer]\\\"===H.call(c)?new Uint8Array(c):c,n=U.inflateSetDictionary(this.strm,f)),-5===n&&!0===h&&(n=0,h=!1),1!==n&&0!==n)return this.onEnd(n),this.ended=!0,!1;l.next_out&&(0!==l.avail_out&&1!==n&&(0!==l.avail_in||4!==a&&2!==a)||(\\\"string\\\"===this.options.to?(r=L(l.output,l.next_out),o=l.next_out-r,s=E(l.output,r),l.next_out=o,l.avail_out=d-o,o&&i.arraySet(l.output,l.output,r,o,0),this.onData(s)):this.onData(i.shrinkBuf(l.output,l.next_out)))),0===l.avail_in&&0===l.avail_out&&(h=!0)}while((l.avail_in>0||0===l.avail_out)&&1!==n);return 1===n&&(a=4),4===a?(n=U.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),l.avail_out=0,!0)},I.prototype.onData=function(e){this.chunks.push(e)},I.prototype.onEnd=function(e){0===e&&(\\\"string\\\"===this.options.to?this.result=this.chunks.join(\\\"\\\"):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var J={Inflate:I,inflate:N,inflateRaw:function(e,t){return(t=t||{}).raw=!0,N(e,t)},ungzip:N},P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e),this.dataView=new DataView(t),this.position=0}return e.prototype.skip=function(e){this.position+=e},e.prototype.readBytes=function(e){var t=4===e?\\\"getUint32\\\":2===e?\\\"getUint16\\\":\\\"getUint8\\\",i=this.position;return this.position+=e,this.dataView[t](i,!0)},e}(),$=function(e){for(var t=new P(e),i={};;){var n=t.readBytes(4);if(67324752!==n){if(33639248!==n)break;M(t)}else{var a=G(t);i[a.name]={buffer:a.buffer}}}return i},G=function(e){var t=0,i=void 0;e.skip(4);var n=e.readBytes(2);e.skip(8);var a=e.readBytes(4);e.skip(4);var r=e.readBytes(2),o=e.readBytes(2),s=[],f=new Uint8Array(a);for(t=0;t<r;t++)s.push(String.fromCharCode(e.readBytes(1)));for(e.skip(o),t=0;t<a;t++)f[t]=e.readBytes(1);switch(n){case 0:i=f;break;case 8:i=new Uint8Array(J.inflate(f,{raw:!0}));break;default:console.log(s.join(\\\"\\\")+\\\": unsupported compression type\\\"),i=f}return{name:s.join(\\\"\\\"),buffer:i}},M=function(e){e.skip(24);var t=e.readBytes(2),i=e.readBytes(2),n=e.readBytes(2);e.skip(12),e.skip(t),e.skip(i),e.skip(n)},V=\\\"function\\\"==typeof Promise?Promise:function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e);var i=function(){};return t((function(){i()})),{then:function(e){i=e}}},q=0,F=void 0,K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e),this._id=q,this._listeners={},this.url=t,this.files=null,q++}return e.unzip=function(t){return new V((function(i){var n=new e,a=new FileReader;a.onload=function(e){var t=e.target.result;n.files=$(t),i(n)},t instanceof Blob&&a.readAsArrayBuffer(t)}))},e.prototype.load=function(){var e=this;return new V((function(t){var i=Date.now(),n=new XMLHttpRequest;n.open(\\\"GET\\\",e.url,!0),n.responseType=\\\"arraybuffer\\\",n.onprogress=function(t){e.dispatch({type:\\\"progress\\\",loaded:t.loaded,total:t.total,elapsedTime:Date.now()-i})},n.onload=function(){e.files=$(n.response),e.dispatch({type:\\\"load\\\",elapsedTime:Date.now()-i}),t()},n.send()}))},e.prototype.extractAsBlobUrl=function(e,t){if(this.files[e].url)return this.files[e].url;var i=new Blob([this.files[e].buffer],{type:t});return this.files[e].url=URL.createObjectURL(i),this.files[e].url},e.prototype.extractAsText=function(e){var t=this.files[e].buffer;if(\\\"undefined\\\"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var i=\\\"\\\",n=0,a=t.length;n<a;n++)i+=String.fromCharCode(t[n]);return decodeURIComponent(escape(i))},e.prototype.extractAsJSON=function(e){return JSON.parse(this.extractAsText(e))},e.prototype.loadThreeJSON=function(e){var t=this,i=this.extractAsJSON(e),n=e.replace(/\\\\/.+\\\\.json$/,\\\"/\\\"),a=\\\"__ziploader_\\\"+this._id+\\\"__\\\",r=new RegExp(a);return-1!==!F.Loader.Handlers.handlers.indexOf(r)&&F.Loader.Handlers.add(r,{load:function(e){return t.loadThreeTexture(e.replace(r,\\\"\\\"))}}),F.JSONLoader.prototype.parse(i,a+n)},e.prototype.loadThreeTexture=function(e){var t=new F.Texture,i=/\\\\.jpg$/.test(e)?\\\"image/jpeg\\\":/\\\\.png$/.test(e)?\\\"image/png\\\":/\\\\.gif$/.test(e)?\\\"image/gif\\\":void 0,n=new Blob([this.files[e].buffer],{type:i});return t.image=new Image,t.image.addEventListener(\\\"load\\\",(function e(){t.needsUpdate=!0,t.image.removeEventListener(\\\"load\\\",e),URL.revokeObjectURL(t.image.src)})),t.image.src=URL.createObjectURL(n),t},e.prototype.on=function(e,t){this._listeners[e]||(this._listeners[e]=[]),-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t)},e.prototype.off=function(e,t){var i=this._listeners[e];if(i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}},e.prototype.dispatch=function(e){var t=this._listeners[e.type];if(t){e.target=this;for(var i=t.length,n=0;n<i;n++)t[n].call(this,e)}},e.prototype.clear=function(e){if(e)return URL.revokeObjectURL(this.files[e].url),void delete this.files[e];for(var t in this.files)URL.revokeObjectURL(this.files[t].url);if(delete this.files,F){var i=\\\"__ziploader_\\\"+this._id+\\\"__\\\";F.Loader.Handlers.handlers.some((function(e,t){if(e instanceof RegExp&&e.source===i)return F.Loader.Handlers.handlers.splice(t,2),!0}))}},e.install=function(e){e.THREE&&(F=e.THREE)},e}();function X(e,t,i,n,a,r,o){try{var s=e[r](o),f=s.value}catch(e){return void i(e)}s.done?t(f):Promise.resolve(f).then(n,a)}function Q(e){return function(){var t=this,i=arguments;return new Promise((function(n,a){var r=e.apply(t,i);function o(e){X(r,n,a,o,s,\\\"next\\\",e)}function s(e){X(r,n,a,o,s,\\\"throw\\\",e)}o(void 0)}))}}function W(){return(W=Q((function*(e){const t=new K(e);return t.load().then((()=>{const e={},i=i=>(e[i]=e[i]||t.extractAsBlobUrl(i),e[i]),n=JSON.parse(t.extractAsText(\\\"scene.gltf\\\"));return n.buffers&&n.buffers.forEach((e=>e.uri=i(e.uri))),n.images&&n.images.forEach((e=>e.uri=i(e.uri))),e[\\\"scene.gtlf\\\"]=URL.createObjectURL(new Blob([JSON.stringify(n,null,2)],{type:\\\"text/plain\\\"})),e}))}))).apply(this,arguments)}self.onmessage=function(){var e=Q((function*(e){try{const t=yield function(e){return W.apply(this,arguments)}(e.data.payload);self.postMessage({id:e.data.id,result:t})}catch(t){self.postMessage({id:e.data.id,err:t.message})}}));return function(t){return e.apply(this,arguments)}}()}();\\n\", \"Worker\", undefined, undefined);\n}\n","export default function nextTick() {\r\n  return new Promise(resolve => {\r\n    setTimeout(resolve, 0);\r\n  });\r\n}\r\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\r\nimport { proxiedUrlFor } from \"./media-url-utils\";\r\nimport avatarUnavailableImage from \"../assets/images/avatar_unavailable.png\";\r\n\r\nconst AVATARS_API = \"/api/v1/avatars\";\r\n\r\nexport const AVATAR_TYPES = {\r\n  SKINNABLE: \"skinnable\",\r\n  URL: \"url\"\r\n};\r\n\r\nexport function getAvatarType(avatarId) {\r\n  if (avatarId.startsWith(\"http\")) return AVATAR_TYPES.URL;\r\n  return AVATAR_TYPES.SKINNABLE;\r\n}\r\n\r\nasync function fetchSkinnableAvatar(avatarId) {\r\n  const resp = await fetchReticulumAuthenticated(`/api/v1/avatars/${avatarId}`);\r\n  return resp && resp.avatars && resp.avatars[0];\r\n}\r\n\r\nexport async function fetchAvatar(avatarId) {\r\n  switch (getAvatarType(avatarId)) {\r\n    case AVATAR_TYPES.SKINNABLE:\r\n      return fetchSkinnableAvatar(avatarId);\r\n    case AVATAR_TYPES.URL:\r\n      return {\r\n        avatar_id: avatarId,\r\n        gltf_url: proxiedUrlFor(avatarId)\r\n      };\r\n  }\r\n}\r\n\r\nasync function fetchAvatarGltfUrl(avatarId) {\r\n  return fetchAvatar(avatarId).then(avatar => avatar && avatar.gltf_url);\r\n}\r\n\r\nexport function getAvatarSrc(avatarId) {\r\n  switch (getAvatarType(avatarId)) {\r\n    case AVATAR_TYPES.SKINNABLE:\r\n      return fetchAvatarGltfUrl(avatarId);\r\n    case AVATAR_TYPES.URL:\r\n      return proxiedUrlFor(avatarId);\r\n    default:\r\n      return avatarId;\r\n  }\r\n}\r\n\r\nexport async function getAvatarThumbnailUrl(avatarId) {\r\n  switch (getAvatarType(avatarId)) {\r\n    case AVATAR_TYPES.SKINNABLE:\r\n      return fetchAvatar(avatarId).then(avatar => avatar.files.thumbnail);\r\n    default:\r\n      return avatarUnavailableImage;\r\n  }\r\n}\r\n\r\n// Currently the way we do material overrides is with a special named material.\r\n// We want to migrate eventually to having a GLTF extension that specifies what\r\n// materials can be overridden, but in the meantime we want to be able to support\r\n// arbitrary models with some sort of functionality. This provides a fallback\r\nexport const MAT_NAME = \"Bot_PBS\";\r\nexport function ensureAvatarMaterial(gltf) {\r\n  if (gltf.materials.find(m => m.name === MAT_NAME)) return gltf;\r\n\r\n  function materialForMesh(mesh) {\r\n    if (!mesh.primitives) return;\r\n    const primitive = mesh.primitives.find(p => p.material !== undefined);\r\n    return primitive && gltf.materials[primitive.material];\r\n  }\r\n\r\n  let nodes = gltf.scenes[gltf.scene].nodes.slice(0);\r\n  while (nodes.length) {\r\n    const node = gltf.nodes[nodes.shift()];\r\n    const material = node.mesh !== undefined && materialForMesh(gltf.meshes[node.mesh]);\r\n    if (material) {\r\n      material.name = MAT_NAME;\r\n      break;\r\n    }\r\n    if (node.children) nodes = nodes.concat(node.children);\r\n  }\r\n\r\n  return gltf;\r\n}\r\n\r\nexport async function remixAvatar(parentId, name) {\r\n  const avatar = {\r\n    parent_avatar_listing_id: parentId,\r\n    name: name,\r\n    files: {}\r\n  };\r\n\r\n  return fetchReticulumAuthenticated(AVATARS_API, \"POST\", { avatar });\r\n}\r\n","export const createImageBitmap =\r\n  window.createImageBitmap ||\r\n  async function (data) {\r\n    return new Promise(resolve => {\r\n      // https://dev.to/nektro/createimagebitmap-polyfill-for-safari-and-edge-228\r\n      // https://gist.github.com/MonsieurV/fb640c29084c171b4444184858a91bc7\r\n\r\n      let srcUrl;\r\n      if (data instanceof Blob) {\r\n        srcUrl = URL.createObjectURL(data);\r\n      } else {\r\n        const canvas = document.createElement(\"canvas\");\r\n        const ctx = canvas.getContext(\"2d\");\r\n        canvas.width = data.width;\r\n        canvas.height = data.height;\r\n        ctx.putImageData(data, 0, 0);\r\n        srcUrl = canvas.toDataURL();\r\n      }\r\n      const img = document.createElement(\"img\");\r\n\r\n      img.addEventListener(\"load\", () => resolve(img));\r\n\r\n      img.src = srcUrl;\r\n    });\r\n  };\r\n\r\nexport function disposeImageBitmap(imageBitmap) {\r\n  if (imageBitmap instanceof HTMLImageElement && imageBitmap.src.startsWith(\"blob:\")) {\r\n    URL.revokeObjectURL(imageBitmap.src);\r\n  } else {\r\n    imageBitmap.close && imageBitmap.close();\r\n  }\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"preview\":\"avatar-preview__preview__Exp7B\"};","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { injectIntl, FormattedMessage } from \"react-intl\";\r\nimport { onThemeChanged, getThemeColor } from \"../utils/theme\";\r\nimport classNames from \"classnames\";\r\n\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\n\r\nimport { createDefaultEnvironmentMap } from \"../components/environment-map\";\r\nimport { loadGLTF } from \"../components/gltf-model-plus\";\r\nimport { disposeNode, findNode } from \"../utils/three-utils\";\r\nimport { ensureAvatarMaterial, MAT_NAME } from \"../utils/avatar-utils\";\r\nimport { createImageBitmap, disposeImageBitmap } from \"../utils/image-bitmap-utils\";\r\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\r\nimport styles from \"../assets/stylesheets/avatar-preview.scss\";\r\n\r\nimport warningIconUrl from \"../assets/images/warning_icon.png\";\r\nimport warningIcon2xUrl from \"../assets/images/warning_icon@2x.png\";\r\n\r\nconst TEXTURE_PROPS = {\r\n  base_map: [\"map\"],\r\n  emissive_map: [\"emissiveMap\"],\r\n  normal_map: [\"normalMap\"],\r\n  orm_map: [\"aoMap\", \"roughnessMap\", \"metalnessMap\"]\r\n};\r\n\r\nconst ALL_MAPS = Object.keys(TEXTURE_PROPS);\r\n\r\n// This should match our aframe renderer=\"antialias: true; colorManagement: true; sortObjects: true;\r\n// physicallyCorrectLights: true; webgl2: true; multiview: false;\"\r\nfunction createRenderer(canvas, alpha = false, useDevicePixelRatio = true) {\r\n  const context = canvas.getContext(\"webgl2\", {\r\n    alpha,\r\n    depth: true,\r\n    antialias: true,\r\n    premultipliedAlpha: true,\r\n    preserveDrawingBuffer: false,\r\n    powerPreference: \"default\"\r\n  });\r\n\r\n  const renderer = new THREE.WebGLRenderer({ alpha, canvas, context, forceWebVR: true });\r\n  renderer.outputEncoding = THREE.sRGBEncoding;\r\n  renderer.physicallyCorrectLights = true;\r\n  if (useDevicePixelRatio) {\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n  }\r\n  return renderer;\r\n}\r\n\r\nconst createImageBitmapFromURL = url =>\r\n  fetch(url)\r\n    .then(r => r.blob())\r\n    .then(createImageBitmap);\r\n\r\nconst ORBIT_ANGLE = new THREE.Euler(-30 * THREE.MathUtils.DEG2RAD, 30 * THREE.MathUtils.DEG2RAD, 0);\r\nconst DEFAULT_MARGIN = 1;\r\n\r\nfunction fitBoxInFrustum(camera, box, center, margin = DEFAULT_MARGIN) {\r\n  const halfYExtents = Math.max(box.max.y - center.y, center.y - box.min.y);\r\n  const halfVertFOV = THREE.MathUtils.degToRad(camera.fov / 2);\r\n  camera.position.set(0, 0, (halfYExtents / Math.tan(halfVertFOV) + box.max.z) * margin);\r\n  camera.position.applyEuler(ORBIT_ANGLE);\r\n  camera.position.add(center);\r\n  camera.lookAt(center);\r\n}\r\n\r\nfunction getThemeBackground() {\r\n  return new THREE.Color(getThemeColor(\"background3-color\") || 0xeaeaea);\r\n}\r\n\r\nclass AvatarPreview extends Component {\r\n  static propTypes = {\r\n    avatarGltfUrl: PropTypes.string,\r\n    className: PropTypes.string,\r\n    onGltfLoaded: PropTypes.func\r\n  };\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { loading: true, error: null };\r\n    this.avatar = null;\r\n    this.imageBitmaps = {};\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.scene = new THREE.Scene();\r\n\r\n    this.camera = new THREE.PerspectiveCamera(55, this.canvas.clientWidth / this.canvas.clientHeight, 0.1, 1000);\r\n    this.controls = new OrbitControls(this.camera, this.canvas);\r\n    this.controls.screenSpacePanning = true;\r\n    this.controls.enableKeys = true;\r\n\r\n    const light = new THREE.DirectionalLight(0xf7f6ef, 1);\r\n    light.position.set(0, 10, 10);\r\n    this.scene.add(light);\r\n    this.scene.add(new THREE.HemisphereLight(0xb1e3ff, 0xb1e3ff, 2.5));\r\n\r\n    this.loadId = 0;\r\n\r\n    this.camera.position.set(-0.2, 0.5, 0.5);\r\n    this.camera.matrixAutoUpdate = true;\r\n\r\n    this.controls.target.set(0, 0.45, 0);\r\n    this.controls.update();\r\n\r\n    if (this.props.avatarGltfUrl) {\r\n      this.loadCurrentAvatarGltfUrl();\r\n    }\r\n\r\n    const clock = new THREE.Clock();\r\n\r\n    this.snapshotCanvas = document.createElement(\"canvas\");\r\n    this.snapshotCanvas.width = 720;\r\n    this.snapshotCanvas.height = 1280;\r\n    this.snapshotCamera = new THREE.PerspectiveCamera(55, 720 / 1280, 0.1, 1000);\r\n    this.snapshotCamera.matrixAutoUpdate = true;\r\n    this.snapshotRenderer = createRenderer(this.snapshotCanvas, true, false);\r\n    this.snapshotRenderer.setClearAlpha(0);\r\n\r\n    this.previewRenderer = createRenderer(this.canvas);\r\n    this.previewRenderer.setClearColor(getThemeBackground());\r\n    this.previewRenderer.setAnimationLoop(() => {\r\n      const dt = clock.getDelta();\r\n      this.mixer && this.mixer.update(dt);\r\n      this.previewRenderer.render(this.scene, this.camera);\r\n    });\r\n    this.removeThemeChangedListener = onThemeChanged(() => this.previewRenderer.setClearColor(getThemeBackground()));\r\n    window.addEventListener(\"resize\", this.resize);\r\n    this.resize();\r\n\r\n    this.mounted = true;\r\n  };\r\n\r\n  resize = () => {\r\n    const width = this.canvas.parentElement.offsetWidth;\r\n    const height = this.canvas.parentElement.offsetHeight;\r\n    this.previewRenderer.setSize(width, height);\r\n    this.camera.aspect = width / height;\r\n    this.camera.updateProjectionMatrix();\r\n  };\r\n\r\n  setAvatar = avatar => {\r\n    if (!avatar) return;\r\n    this.avatar = avatar;\r\n    this.scene.add(avatar);\r\n    this.resetCamera();\r\n    this.setState({ error: null, loading: false });\r\n  };\r\n\r\n  resetCamera = (() => {\r\n    const box = new THREE.Box3();\r\n    const center = new THREE.Vector3();\r\n    return () => {\r\n      box.setFromObject(this.avatar);\r\n      box.getCenter(center);\r\n\r\n      // Shift the center vertically in order to frame the avatar nicely.\r\n      center.y = (box.max.y - box.min.y) * 0.6 + box.min.y;\r\n\r\n      fitBoxInFrustum(this.camera, box, center);\r\n      fitBoxInFrustum(this.snapshotCamera, box, center, 0.7);\r\n\r\n      this.controls.target.copy(center);\r\n      this.controls.update();\r\n    };\r\n  })();\r\n\r\n  componentWillUnmount = () => {\r\n    this.mounted = false;\r\n\r\n    // Gotta be particularly careful about disposing things here since we will likely create many avatar\r\n    // previews during a session and Chrome will eventually discard the oldest webgl context if we leak\r\n    // contexts by holding on to them directly or indirectly.\r\n\r\n    this.scene && this.scene.traverse(disposeNode);\r\n    if (this.previewRenderer) {\r\n      this.previewRenderer.dispose();\r\n    }\r\n    if (this.snapshotRenderer) {\r\n      this.snapshotRenderer.dispose();\r\n    }\r\n    if (this.controls) {\r\n      this.controls.dispose();\r\n      this.controls.domElement = null;\r\n    }\r\n\r\n    Object.values(this.imageBitmaps).forEach(img => disposeImageBitmap(img));\r\n    window.removeEventListener(\"resize\", this.resize);\r\n    this.removeThemeChangedListener();\r\n  };\r\n\r\n  componentDidUpdate = async oldProps => {\r\n    if (oldProps.avatarGltfUrl !== this.props.avatarGltfUrl) {\r\n      if (this.avatar) {\r\n        this.scene.remove(this.avatar);\r\n        this.avatar = null;\r\n      }\r\n      if (this.props.avatarGltfUrl) {\r\n        this.setState({ error: null, loading: true });\r\n        await this.loadCurrentAvatarGltfUrl();\r\n      }\r\n    }\r\n    this.applyMaps(oldProps, this.props);\r\n  };\r\n\r\n  async loadCurrentAvatarGltfUrl() {\r\n    const newLoadId = ++this.loadId;\r\n    const url = proxiedUrlFor(this.props.avatarGltfUrl);\r\n    const gltf = await this.loadPreviewAvatar(url);\r\n    // If we had started loading another avatar while we were loading this one, throw this one away\r\n    if (!this.mounted || newLoadId !== this.loadId) return;\r\n    if (gltf && this.props.onGltfLoaded) this.props.onGltfLoaded(gltf);\r\n    this.setAvatar(gltf.scene);\r\n  }\r\n\r\n  applyMaps(oldProps, newProps) {\r\n    return Promise.all(\r\n      ALL_MAPS.map(mapName => {\r\n        const applyMap = this.applyMapToPreview.bind(this, mapName);\r\n        if (oldProps[mapName] != newProps[mapName]) {\r\n          if (newProps[mapName] instanceof File) {\r\n            return createImageBitmap(newProps[mapName]).then(applyMap);\r\n          } else if (newProps[mapName]) {\r\n            return createImageBitmapFromURL(newProps[mapName]).then(applyMap);\r\n          } else {\r\n            return this.revertMap(mapName);\r\n          }\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  loadPreviewAvatar = async avatarGltfUrl => {\r\n    let gltf;\r\n    try {\r\n      gltf = await loadGLTF(avatarGltfUrl, \"model/gltf\", null, ensureAvatarMaterial);\r\n    } catch (e) {\r\n      console.error(\"Failed to load avatar preview\", e);\r\n      this.setState({ loading: false, error: true });\r\n      return;\r\n    }\r\n\r\n    if (!this.mounted) return;\r\n\r\n    // TODO Check for \"Bot_Skinned\" here is a hack for legacy avatars which only has a name one of the MOZ_alt_material nodes\r\n    this.previewMesh = findNode(\r\n      gltf.scene,\r\n      n => (n.isMesh && n.material && n.material.name === MAT_NAME) || n.name === \"Bot_Skinned\"\r\n    );\r\n\r\n    if (!this.previewMesh) {\r\n      console.error(\"Failed to find avatar preview mesh\");\r\n      this.setState({ loading: false, error: true });\r\n      return;\r\n    }\r\n\r\n    const idleAnimation = gltf.animations && gltf.animations.find(({ name }) => name === \"idle_eyes\");\r\n    if (idleAnimation) {\r\n      this.mixer = new THREE.AnimationMixer(gltf.scene);\r\n      const action = this.mixer.clipAction(idleAnimation);\r\n      action.enabled = true;\r\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\r\n      this.idleAnimationAction = action;\r\n    }\r\n\r\n    gltf.scene.traverse(node => {\r\n      // Camera in preview is pretty tight, and skinned meshes tend to have poor bounding boxes\r\n      if (node.isSkinnedMesh) {\r\n        node.frustumCulled = false;\r\n      }\r\n\r\n      // We delete onUpdate here to opt out of the auto texture cleanup after GPU upload.\r\n      if (node.material) {\r\n        const removeOnUpdate = p => node.material[p] && delete node.material[p].onUpdate;\r\n        TEXTURE_PROPS[\"base_map\"].forEach(removeOnUpdate);\r\n        TEXTURE_PROPS[\"emissive_map\"].forEach(removeOnUpdate);\r\n        TEXTURE_PROPS[\"normal_map\"].forEach(removeOnUpdate);\r\n        TEXTURE_PROPS[\"orm_map\"].forEach(removeOnUpdate);\r\n      }\r\n    });\r\n\r\n    const { material } = this.previewMesh;\r\n    if (material) {\r\n      const getImage = p => material[p] && material[p].image;\r\n      this.originalMaps = {\r\n        base_map: TEXTURE_PROPS[\"base_map\"].map(getImage),\r\n        emissive_map: TEXTURE_PROPS[\"emissive_map\"].map(getImage),\r\n        normal_map: TEXTURE_PROPS[\"normal_map\"].map(getImage),\r\n        orm_map: TEXTURE_PROPS[\"orm_map\"].map(getImage)\r\n      };\r\n\r\n      const dependencies = [\r\n        this.applyMaps({}, this.props) // Apply initial maps\r\n      ];\r\n\r\n      // Low and medium quality materials don't use environment maps\r\n      if (window.APP.store.state.preferences.materialQualitySetting === \"high\") {\r\n        dependencies.push(\r\n          // TODO apply environment map to secondary materials as well\r\n          createDefaultEnvironmentMap().then(t => {\r\n            this.previewMesh.material.envMap = t;\r\n            this.previewMesh.material.needsUpdate = true;\r\n          })\r\n        );\r\n      }\r\n\r\n      await Promise.all(dependencies);\r\n    } else {\r\n      this.originalMaps = {};\r\n    }\r\n\r\n    return gltf;\r\n  };\r\n\r\n  applyMapToPreview = (name, image) => {\r\n    if (this.imageBitmaps[name]) {\r\n      disposeImageBitmap(this.imageBitmaps[name]);\r\n    }\r\n    this.imageBitmaps[name] = image;\r\n    TEXTURE_PROPS[name].forEach(prop => {\r\n      const texture = this.previewMesh.material[prop];\r\n\r\n      // Low quality materials are missing normal maps\r\n      if (prop === \"normalMap\" && window.APP.store.state.preferences.materialQualitySetting === \"low\") {\r\n        return;\r\n      }\r\n\r\n      // Medium Quality materials are missing metalness and roughness maps\r\n      if (\r\n        (prop === \"roughnessMap\" || prop === \"metalnessMap\") &&\r\n        window.APP.store.state.preferences.materialQualitySetting !== \"high\"\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      texture.image = image;\r\n      texture.needsUpdate = true;\r\n    });\r\n  };\r\n\r\n  revertMap = name => {\r\n    if (this.imageBitmaps[name]) {\r\n      disposeImageBitmap(this.imageBitmaps[name]);\r\n    }\r\n    delete this.imageBitmaps[name];\r\n    this.originalMaps[name].forEach((bm, i) => {\r\n      const texture = this.previewMesh.material[TEXTURE_PROPS[name][i]];\r\n\r\n      if (texture) {\r\n        texture.image = bm;\r\n        texture.needsUpdate = true;\r\n      }\r\n    });\r\n  };\r\n\r\n  snapshot = () => {\r\n    return new Promise(resolve => {\r\n      if (this.idleAnimationAction) this.idleAnimationAction.stop();\r\n      this.snapshotCamera.position.copy(this.camera.position);\r\n      this.snapshotCamera.rotation.copy(this.camera.rotation);\r\n      this.snapshotRenderer.render(this.scene, this.snapshotCamera);\r\n      this.snapshotCanvas.toBlob(blob => {\r\n        if (this.idleAnimationAction) this.idleAnimationAction.play();\r\n        resolve(blob);\r\n      });\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={classNames(styles.preview, this.props.className)}>\r\n        {!this.props.avatarGltfUrl ||\r\n          (this.state.loading && !this.state.error && (\r\n            <div className=\"loader\">\r\n              <div className=\"loader-center\" />\r\n            </div>\r\n          ))}\r\n        {this.props.avatarGltfUrl && this.state.error && !this.state.loading && (\r\n          <div className=\"error\">\r\n            <img src={warningIconUrl} srcSet={`${warningIcon2xUrl} 2x`} className=\"error-icon\" />\r\n            <FormattedMessage\r\n              id=\"avatar-preview.loading-failed\"\r\n              defaultMessage=\"Loading failed{linebreak}Please choose another avatar\"\r\n              values={{ linebreak: <br /> }}\r\n            />\r\n          </div>\r\n        )}\r\n        <canvas ref={c => (this.canvas = c)} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(AvatarPreview, { forwardRef: true });\r\n","// extracted by mini-css-extract-plugin\nexport default {\"avatar-landing\":\"avatar__avatar-landing__eSlGJ\",\"avatarLanding\":\"avatar__avatar-landing__eSlGJ\",\"form-submit\":\"avatar__form-submit__tZtEc\",\"formSubmit\":\"avatar__form-submit__tZtEc\",\"no-default-button-style\":\"avatar__no-default-button-style__O7SWN\",\"noDefaultButtonStyle\":\"avatar__no-default-button-style__O7SWN\",\"logo\":\"avatar__logo__oP3Yt\",\"box\":\"avatar__box__ywpDd\",\"title\":\"avatar__title__jS9v5\",\"selected-message\":\"avatar__selected-message__aGq9S\",\"selectedMessage\":\"avatar__selected-message__aGq9S\",\"attributions\":\"avatar__attributions__BbZN2\",\"preview\":\"avatar__preview__Z2aKa\",\"copy-tip\":\"avatar__copy-tip__y8MyZ\",\"copyTip\":\"avatar__copy-tip__y8MyZ\",\"edit-avatar\":\"avatar__edit-avatar__THzPH\",\"editAvatar\":\"avatar__edit-avatar__THzPH\"};","import { useCallback, useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport configs from \"../../utils/configs\";\r\nimport { tryGetTheme, getCurrentTheme, registerDarkModeQuery } from \"../../utils/theme\";\r\n\r\nfunction useDarkMode() {\r\n  const [darkMode, setDarkMode] = useState(false);\r\n\r\n  const changeListener = useCallback(\r\n    event => {\r\n      setDarkMode(event.matches);\r\n    },\r\n    [setDarkMode]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const [darkModeQuery, removeListener] = registerDarkModeQuery(changeListener);\r\n\r\n    setDarkMode(darkModeQuery.matches);\r\n\r\n    return removeListener;\r\n  }, [changeListener]);\r\n\r\n  return darkMode;\r\n}\r\n\r\nexport function useTheme(themeId) {\r\n  const darkMode = useDarkMode();\r\n\r\n  useEffect(() => {\r\n    const theme = tryGetTheme(themeId);\r\n\r\n    if (!theme) {\r\n      return;\r\n    }\r\n\r\n    const variables = [];\r\n\r\n    for (const key in theme.variables) {\r\n      if (!Object.prototype.hasOwnProperty.call(theme.variables, key)) continue;\r\n      variables.push(`--${key}: ${theme.variables[key]};`);\r\n    }\r\n\r\n    const styleTag = document.createElement(\"style\");\r\n\r\n    styleTag.innerHTML = `:root {\r\n        ${variables.join(\"\\n\")}\r\n      }`;\r\n\r\n    document.head.appendChild(styleTag);\r\n\r\n    return () => {\r\n      document.head.removeChild(styleTag);\r\n    };\r\n  }, [themeId, darkMode]);\r\n}\r\n\r\nfunction getAppLogo(darkMode) {\r\n  const theme = getCurrentTheme();\r\n  const shouldUseDarkLogo = theme ? theme.darkModeDefault : darkMode;\r\n  return (shouldUseDarkLogo && configs.image(\"logo_dark\")) || configs.image(\"logo\");\r\n}\r\n\r\nexport function useLogo() {\r\n  const darkMode = useDarkMode();\r\n  return getAppLogo(darkMode);\r\n}\r\n\r\nexport function useThemeFromStore(store) {\r\n  const [themeId, setThemeId] = useState(store?.state?.preferences?.theme);\r\n\r\n  useEffect(() => {\r\n    function onStoreChanged() {\r\n      const nextThemeId = store.state?.preferences?.theme;\r\n\r\n      if (themeId !== nextThemeId) {\r\n        setThemeId(nextThemeId);\r\n      }\r\n    }\r\n\r\n    if (store) {\r\n      store.addEventListener(\"statechanged\", onStoreChanged);\r\n    }\r\n\r\n    return () => {\r\n      if (store) {\r\n        store.removeEventListener(\"statechanged\", onStoreChanged);\r\n      }\r\n    };\r\n  });\r\n\r\n  useTheme(themeId);\r\n}\r\n\r\nexport function ThemeProvider({ store, children }) {\r\n  useThemeFromStore(store);\r\n  return children;\r\n}\r\n\r\nThemeProvider.propTypes = {\r\n  store: PropTypes.object,\r\n  children: PropTypes.node\r\n};\r\n","// We should technically be able to just include three here, but our dependancies are tangled such that not having aframe is a bit difficult\r\nimport \"./utils/theme\";\r\nconsole.log(`Hubs version: ${process.env.BUILD_VERSION || \"?\"}`);\r\n\r\nimport \"aframe\";\r\nimport \"./utils/logging\";\r\n\r\nimport ReactDOM from \"react-dom\";\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport classNames from \"classnames\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { WrappedIntlProvider } from \"./react-components/wrapped-intl-provider\";\r\n\r\nimport configs from \"./utils/configs\";\r\n\r\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\r\ndisableiOSZoom();\r\n\r\nimport AvatarPreview from \"./react-components/avatar-preview\";\r\n\r\nimport { fetchAvatar, remixAvatar } from \"./utils/avatar-utils\";\r\n\r\nimport \"./react-components/styles/global.scss\";\r\nimport styles from \"./assets/stylesheets/avatar.scss\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faClone } from \"@fortawesome/free-solid-svg-icons/faClone\";\r\nimport { ThemeProvider } from \"./react-components/styles/theme\";\r\nimport Store from \"./storage/store\";\r\n\r\nconst qs = new URLSearchParams(location.search);\r\nwindow.APP = { store: new Store() };\r\n\r\nclass AvatarPage extends React.Component {\r\n  static propTypes = {\r\n    avatarId: PropTypes.string,\r\n    store: PropTypes.object,\r\n    intl: PropTypes.object\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { copyMessage: null };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\r\n    this.refetchAvatar();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\r\n  }\r\n\r\n  storeUpdated = () => this.forceUpdate();\r\n\r\n  refetchAvatar = async () => {\r\n    const avatar = await fetchAvatar(this.props.avatarId);\r\n    this.setState({ avatar });\r\n  };\r\n\r\n  setAvatar = e => {\r\n    e && e.preventDefault();\r\n    this.props.store.update({\r\n      profile: { avatarId: this.state.avatar.avatar_id }\r\n    });\r\n  };\r\n\r\n  handleCopyAvatar = async e => {\r\n    e.preventDefault();\r\n    const { avatar } = this.state;\r\n    this.setState({ copyState: \"copying\" });\r\n    await remixAvatar(avatar.avatar_id, avatar.name);\r\n    this.setState({ copyState: \"copied\" });\r\n    setTimeout(() => this.setState({ copyMessage: null }), 2000);\r\n  };\r\n\r\n  render() {\r\n    const { avatar, copyState } = this.state;\r\n    if (!avatar) {\r\n      return (\r\n        <div className={styles.avatarLanding}>\r\n          <div className={classNames([styles.box, styles.darkened])}>\r\n            <FormattedMessage id=\"avatar-page.loading\" defaultMessage=\"Loading\" />\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const selectedAvatarId = this.props.store.state.profile.avatarId;\r\n    const isSelected = avatar.avatar_id === selectedAvatarId;\r\n\r\n    return (\r\n      <form onSubmit={this.setAvatar} className={styles.avatarLanding}>\r\n        <div className={classNames([styles.box, styles.darkened])}>\r\n          <label className={styles.title}>\r\n            <span>{avatar.name}</span>\r\n          </label>\r\n          <div className={styles.attributions}>\r\n            {avatar.attributions && avatar.attributions.creator && <span>{`by ${avatar.attributions.creator}`}</span>}\r\n          </div>\r\n          <div className={styles.preview}>\r\n            {avatar && <AvatarPreview avatarGltfUrl={avatar.gltf_url} />}\r\n            {copyState ? (\r\n              <div className={styles.copyTip}>\r\n                {copyState === \"copying\" ? (\r\n                  <FormattedMessage id=\"avatar-page.copying-avatar\" defaultMessage=\"Copying...\" />\r\n                ) : (\r\n                  <FormattedMessage id=\"avatar-page.copied-avatar\" defaultMessage=\"Copied\" />\r\n                )}\r\n              </div>\r\n            ) : (\r\n              avatar &&\r\n              avatar.type === \"avatar_listing\" &&\r\n              avatar.allow_remixing && (\r\n                <a\r\n                  className={styles.editAvatar}\r\n                  onClick={this.handleCopyAvatar}\r\n                  title={<FormattedMessage id=\"avatar-page.copy-button\" defaultMessage=\"Copy to my avatars\" />}\r\n                >\r\n                  <FontAwesomeIcon icon={faClone} />\r\n                </a>\r\n              )\r\n            )}\r\n          </div>\r\n          {isSelected ? (\r\n            <span className={styles.selectedMessage}>\r\n              <FormattedMessage id=\"avatar-page.selected\" defaultMessage=\"This is your current avatar\" />\r\n            </span>\r\n          ) : (\r\n            <button disabled={isSelected} className={styles.formSubmit} type=\"submit\">\r\n              <FormattedMessage id=\"avatar-page.select\" defaultMessage=\"Select\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n        <img\r\n          className={styles.logo}\r\n          src={configs.image(\"logo\")}\r\n          alt={<FormattedMessage id=\"avatar-page.logo\" defaultMessage=\"Logo\" />}\r\n        />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  const avatarId = qs.get(\"avatar_id\") || document.location.pathname.substring(1).split(\"/\")[1];\r\n  console.log(`Avatar ID: ${avatarId}`);\r\n  ReactDOM.render(\r\n    <WrappedIntlProvider>\r\n      <ThemeProvider store={window.APP.store}>\r\n        <AvatarPage avatarId={avatarId} store={window.APP.store} />\r\n      </ThemeProvider>\r\n    </WrappedIntlProvider>,\r\n    document.getElementById(\"ui-root\")\r\n  );\r\n});\r\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*! https://mths.be/punycode v1.3.2 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","\"use strict\";\n\n/* eslint-env browser */\n\n/* eslint-disable no-undef, no-use-before-define, new-cap */\nmodule.exports = function (content, workerConstructor, workerOptions, url) {\n  var globalScope = self || window;\n\n  try {\n    try {\n      var blob;\n\n      try {\n        // New API\n        blob = new globalScope.Blob([content]);\n      } catch (e) {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = globalScope.BlobBuilder || globalScope.WebKitBlobBuilder || globalScope.MozBlobBuilder || globalScope.MSBlobBuilder;\n        blob = new BlobBuilder();\n        blob.append(content);\n        blob = blob.getBlob();\n      }\n\n      var URL = globalScope.URL || globalScope.webkitURL;\n      var objectURL = URL.createObjectURL(blob);\n      var worker = new globalScope[workerConstructor](objectURL, workerOptions);\n      URL.revokeObjectURL(objectURL);\n      return worker;\n    } catch (e) {\n      return new globalScope[workerConstructor](\"data:application/javascript,\".concat(encodeURIComponent(content)), workerOptions);\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error(\"Inline worker is not supported\");\n    }\n\n    return new globalScope[workerConstructor](url, workerOptions);\n  }\n};","var map = {\n\t\"./de.json\": [\n\t\t33116,\n\t\t116\n\t],\n\t\"./es.json\": [\n\t\t27297,\n\t\t297\n\t],\n\t\"./fr.json\": [\n\t\t83056,\n\t\t56\n\t],\n\t\"./ja.json\": [\n\t\t23160,\n\t\t160\n\t],\n\t\"./ko.json\": [\n\t\t55540,\n\t\t540\n\t],\n\t\"./pt.json\": [\n\t\t10188,\n\t\t188\n\t],\n\t\"./ru.json\": [\n\t\t97441,\n\t\t441\n\t],\n\t\"./zh-cn.json\": [\n\t\t2030,\n\t\t30\n\t],\n\t\"./zh-tw.json\": [\n\t\t4076,\n\t\t76\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 37472;\nmodule.exports = webpackAsyncContext;","// src/Constants.js\nvar TYPES_ENUM = {\n  i8: \"i8\",\n  ui8: \"ui8\",\n  ui8c: \"ui8c\",\n  i16: \"i16\",\n  ui16: \"ui16\",\n  i32: \"i32\",\n  ui32: \"ui32\",\n  f32: \"f32\",\n  f64: \"f64\",\n  eid: \"eid\"\n};\nvar TYPES_NAMES = {\n  i8: \"Int8\",\n  ui8: \"Uint8\",\n  ui8c: \"Uint8Clamped\",\n  i16: \"Int16\",\n  ui16: \"Uint16\",\n  i32: \"Int32\",\n  ui32: \"Uint32\",\n  eid: \"Uint32\",\n  f32: \"Float32\",\n  f64: \"Float64\"\n};\nvar TYPES = {\n  i8: Int8Array,\n  ui8: Uint8Array,\n  ui8c: Uint8ClampedArray,\n  i16: Int16Array,\n  ui16: Uint16Array,\n  i32: Int32Array,\n  ui32: Uint32Array,\n  f32: Float32Array,\n  f64: Float64Array,\n  eid: Uint32Array\n};\nvar UNSIGNED_MAX = {\n  uint8: 2 ** 8,\n  uint16: 2 ** 16,\n  uint32: 2 ** 32\n};\n\n// src/Storage.js\nvar roundToMultiple = (mul) => (x) => Math.ceil(x / mul) * mul;\nvar roundToMultiple4 = roundToMultiple(4);\nvar $storeRef = Symbol(\"storeRef\");\nvar $storeSize = Symbol(\"storeSize\");\nvar $storeMaps = Symbol(\"storeMaps\");\nvar $storeFlattened = Symbol(\"storeFlattened\");\nvar $storeBase = Symbol(\"storeBase\");\nvar $storeType = Symbol(\"storeType\");\nvar $storeArrayElementCounts = Symbol(\"storeArrayElementCounts\");\nvar $storeSubarrays = Symbol(\"storeSubarrays\");\nvar $subarrayCursors = Symbol(\"subarrayCursors\");\nvar $subarray = Symbol(\"subarray\");\nvar $subarrayFrom = Symbol(\"subarrayFrom\");\nvar $subarrayTo = Symbol(\"subarrayTo\");\nvar $parentArray = Symbol(\"parentArray\");\nvar $tagStore = Symbol(\"tagStore\");\nvar $queryShadow = Symbol(\"queryShadow\");\nvar $serializeShadow = Symbol(\"serializeShadow\");\nvar $indexType = Symbol(\"indexType\");\nvar $indexBytes = Symbol(\"indexBytes\");\nvar $isEidType = Symbol(\"isEidType\");\nvar stores = {};\nvar resize = (ta, size) => {\n  const newBuffer = new ArrayBuffer(size * ta.BYTES_PER_ELEMENT);\n  const newTa = new ta.constructor(newBuffer);\n  newTa.set(ta, 0);\n  return newTa;\n};\nvar createShadow = (store, key) => {\n  if (!ArrayBuffer.isView(store)) {\n    const shadowStore = store[$parentArray].slice(0);\n    store[key] = store.map((_, eid) => {\n      const { length } = store[eid];\n      const start = length * eid;\n      const end = start + length;\n      return shadowStore.subarray(start, end);\n    });\n  } else {\n    store[key] = store.slice(0);\n  }\n};\nvar resizeSubarray = (metadata, store, storeSize) => {\n  const cursors = metadata[$subarrayCursors];\n  let type = store[$storeType];\n  const length = store[0].length;\n  const indexType = length <= UNSIGNED_MAX.uint8 ? TYPES_ENUM.ui8 : length <= UNSIGNED_MAX.uint16 ? TYPES_ENUM.ui16 : TYPES_ENUM.ui32;\n  if (cursors[type] === 0) {\n    const arrayElementCount = metadata[$storeArrayElementCounts][type];\n    const array = new TYPES[type](roundToMultiple4(arrayElementCount * storeSize));\n    array.set(metadata[$storeSubarrays][type]);\n    metadata[$storeSubarrays][type] = array;\n    array[$indexType] = TYPES_NAMES[indexType];\n    array[$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n  }\n  const start = cursors[type];\n  const end = start + storeSize * length;\n  cursors[type] = end;\n  store[$parentArray] = metadata[$storeSubarrays][type].subarray(start, end);\n  for (let eid = 0; eid < storeSize; eid++) {\n    const start2 = length * eid;\n    const end2 = start2 + length;\n    store[eid] = store[$parentArray].subarray(start2, end2);\n    store[eid][$indexType] = TYPES_NAMES[indexType];\n    store[eid][$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    store[eid][$subarray] = true;\n  }\n};\nvar resizeRecursive = (metadata, store, size) => {\n  Object.keys(store).forEach((key) => {\n    const ta = store[key];\n    if (Array.isArray(ta)) {\n      resizeSubarray(metadata, ta, size);\n      store[$storeFlattened].push(ta);\n    } else if (ArrayBuffer.isView(ta)) {\n      store[key] = resize(ta, size);\n      store[$storeFlattened].push(store[key]);\n    } else if (typeof ta === \"object\") {\n      resizeRecursive(metadata, store[key], size);\n    }\n  });\n};\nvar resizeStore = (store, size) => {\n  if (store[$tagStore])\n    return;\n  store[$storeSize] = size;\n  store[$storeFlattened].length = 0;\n  Object.keys(store[$subarrayCursors]).forEach((k) => {\n    store[$subarrayCursors][k] = 0;\n  });\n  resizeRecursive(store, store, size);\n};\nvar resetStoreFor = (store, eid) => {\n  if (store[$storeFlattened]) {\n    store[$storeFlattened].forEach((ta) => {\n      if (ArrayBuffer.isView(ta))\n        ta[eid] = 0;\n      else\n        ta[eid].fill(0);\n    });\n  }\n};\nvar createTypeStore = (type, length) => {\n  const totalBytes = length * TYPES[type].BYTES_PER_ELEMENT;\n  const buffer = new ArrayBuffer(totalBytes);\n  const store = new TYPES[type](buffer);\n  store[$isEidType] = type === TYPES_ENUM.eid;\n  return store;\n};\nvar parentArray = (store) => store[$parentArray];\nvar createArrayStore = (metadata, type, length) => {\n  const storeSize = metadata[$storeSize];\n  const store = Array(storeSize).fill(0);\n  store[$storeType] = type;\n  store[$isEidType] = type === TYPES_ENUM.eid;\n  const cursors = metadata[$subarrayCursors];\n  const indexType = length <= UNSIGNED_MAX.uint8 ? TYPES_ENUM.ui8 : length <= UNSIGNED_MAX.uint16 ? TYPES_ENUM.ui16 : TYPES_ENUM.ui32;\n  if (!length)\n    throw new Error(\"bitECS - Must define component array length\");\n  if (!TYPES[type])\n    throw new Error(`bitECS - Invalid component array property type ${type}`);\n  if (!metadata[$storeSubarrays][type]) {\n    const arrayElementCount = metadata[$storeArrayElementCounts][type];\n    const array = new TYPES[type](roundToMultiple4(arrayElementCount * storeSize));\n    array[$indexType] = TYPES_NAMES[indexType];\n    array[$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    metadata[$storeSubarrays][type] = array;\n  }\n  const start = cursors[type];\n  const end = start + storeSize * length;\n  cursors[type] = end;\n  store[$parentArray] = metadata[$storeSubarrays][type].subarray(start, end);\n  for (let eid = 0; eid < storeSize; eid++) {\n    const start2 = length * eid;\n    const end2 = start2 + length;\n    store[eid] = store[$parentArray].subarray(start2, end2);\n    store[eid][$indexType] = TYPES_NAMES[indexType];\n    store[eid][$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    store[eid][$subarray] = true;\n  }\n  return store;\n};\nvar isArrayType = (x) => Array.isArray(x) && typeof x[0] === \"string\" && typeof x[1] === \"number\";\nvar createStore = (schema, size) => {\n  const $store = Symbol(\"store\");\n  if (!schema || !Object.keys(schema).length) {\n    stores[$store] = {\n      [$storeSize]: size,\n      [$tagStore]: true,\n      [$storeBase]: () => stores[$store]\n    };\n    return stores[$store];\n  }\n  schema = JSON.parse(JSON.stringify(schema));\n  const arrayElementCounts = {};\n  const collectArrayElementCounts = (s) => {\n    const keys = Object.keys(s);\n    for (const k of keys) {\n      if (isArrayType(s[k])) {\n        if (!arrayElementCounts[s[k][0]])\n          arrayElementCounts[s[k][0]] = 0;\n        arrayElementCounts[s[k][0]] += s[k][1];\n      } else if (s[k] instanceof Object) {\n        collectArrayElementCounts(s[k]);\n      }\n    }\n  };\n  collectArrayElementCounts(schema);\n  const metadata = {\n    [$storeSize]: size,\n    [$storeMaps]: {},\n    [$storeSubarrays]: {},\n    [$storeRef]: $store,\n    [$subarrayCursors]: Object.keys(TYPES).reduce((a, type) => ({ ...a, [type]: 0 }), {}),\n    [$storeFlattened]: [],\n    [$storeArrayElementCounts]: arrayElementCounts\n  };\n  if (schema instanceof Object && Object.keys(schema).length) {\n    const recursiveTransform = (a, k) => {\n      if (typeof a[k] === \"string\") {\n        a[k] = createTypeStore(a[k], size);\n        a[k][$storeBase] = () => stores[$store];\n        metadata[$storeFlattened].push(a[k]);\n      } else if (isArrayType(a[k])) {\n        const [type, length] = a[k];\n        a[k] = createArrayStore(metadata, type, length);\n        a[k][$storeBase] = () => stores[$store];\n        metadata[$storeFlattened].push(a[k]);\n      } else if (a[k] instanceof Object) {\n        a[k] = Object.keys(a[k]).reduce(recursiveTransform, a[k]);\n      }\n      return a;\n    };\n    stores[$store] = Object.assign(Object.keys(schema).reduce(recursiveTransform, schema), metadata);\n    stores[$store][$storeBase] = () => stores[$store];\n    return stores[$store];\n  }\n};\n\n// src/Util.js\nvar SparseSet = () => {\n  const dense = [];\n  const sparse = [];\n  dense.sort = function(comparator) {\n    const result = Array.prototype.sort.call(this, comparator);\n    for (let i = 0; i < dense.length; i++) {\n      sparse[dense[i]] = i;\n    }\n    return result;\n  };\n  const has = (val) => dense[sparse[val]] === val;\n  const add = (val) => {\n    if (has(val))\n      return;\n    sparse[val] = dense.push(val) - 1;\n  };\n  const remove = (val) => {\n    if (!has(val))\n      return;\n    const index = sparse[val];\n    const swapped = dense.pop();\n    if (swapped !== val) {\n      dense[index] = swapped;\n      sparse[swapped] = index;\n    }\n  };\n  return {\n    add,\n    remove,\n    has,\n    sparse,\n    dense\n  };\n};\n\n// src/Serialize.js\nvar DESERIALIZE_MODE = {\n  REPLACE: 0,\n  APPEND: 1,\n  MAP: 2\n};\nvar resized = false;\nvar setSerializationResized = (v) => {\n  resized = v;\n};\nvar concat = (a, v) => a.concat(v);\nvar not = (fn) => (v) => !fn(v);\nvar storeFlattened = (c) => c[$storeFlattened];\nvar isFullComponent = storeFlattened;\nvar isProperty = not(isFullComponent);\nvar isModifier = (c) => typeof c === \"function\";\nvar isNotModifier = not(isModifier);\nvar isChangedModifier = (c) => isModifier(c) && c()[1] === \"changed\";\nvar isWorld = (w) => Object.getOwnPropertySymbols(w).includes($componentMap);\nvar fromModifierToComponent = (c) => c()[0];\nvar canonicalize = (target) => {\n  if (isWorld(target))\n    return [[], /* @__PURE__ */ new Map()];\n  const fullComponentProps = target.filter(isNotModifier).filter(isFullComponent).map(storeFlattened).reduce(concat, []);\n  const changedComponentProps = target.filter(isChangedModifier).map(fromModifierToComponent).filter(isFullComponent).map(storeFlattened).reduce(concat, []);\n  const props = target.filter(isNotModifier).filter(isProperty);\n  const changedProps = target.filter(isChangedModifier).map(fromModifierToComponent).filter(isProperty);\n  const componentProps = [...fullComponentProps, ...props, ...changedComponentProps, ...changedProps];\n  const allChangedProps = [...changedComponentProps, ...changedProps].reduce((map, prop) => {\n    const $ = Symbol();\n    createShadow(prop, $);\n    map.set(prop, $);\n    return map;\n  }, /* @__PURE__ */ new Map());\n  return [componentProps, allChangedProps];\n};\nvar defineSerializer = (target, maxBytes = 2e7) => {\n  const worldSerializer = isWorld(target);\n  let [componentProps, changedProps] = canonicalize(target);\n  const buffer = new ArrayBuffer(maxBytes);\n  const view = new DataView(buffer);\n  const entityComponentCache = /* @__PURE__ */ new Map();\n  return (ents) => {\n    if (resized) {\n      [componentProps, changedProps] = canonicalize(target);\n      resized = false;\n    }\n    if (worldSerializer) {\n      componentProps = [];\n      target[$componentMap].forEach((c, component) => {\n        if (component[$storeFlattened])\n          componentProps.push(...component[$storeFlattened]);\n        else\n          componentProps.push(component);\n      });\n    }\n    let world;\n    if (Object.getOwnPropertySymbols(ents).includes($componentMap)) {\n      world = ents;\n      ents = ents[$entityArray];\n    } else {\n      world = eidToWorld.get(ents[0]);\n    }\n    let where = 0;\n    if (!ents.length)\n      return buffer.slice(0, where);\n    const cache = /* @__PURE__ */ new Map();\n    for (let pid = 0; pid < componentProps.length; pid++) {\n      const prop = componentProps[pid];\n      const component = prop[$storeBase]();\n      const $diff = changedProps.get(prop);\n      const shadow = $diff ? prop[$diff] : null;\n      if (!cache.has(component))\n        cache.set(component, /* @__PURE__ */ new Map());\n      view.setUint8(where, pid);\n      where += 1;\n      const countWhere = where;\n      where += 4;\n      let writeCount = 0;\n      for (let i = 0; i < ents.length; i++) {\n        const eid = ents[i];\n        let componentCache = entityComponentCache.get(eid);\n        if (!componentCache)\n          componentCache = entityComponentCache.set(eid, /* @__PURE__ */ new Set()).get(eid);\n        componentCache.add(eid);\n        const newlyAddedComponent = shadow && cache.get(component).get(eid) || !componentCache.has(component) && hasComponent(world, component, eid);\n        cache.get(component).set(eid, newlyAddedComponent);\n        if (newlyAddedComponent) {\n          componentCache.add(component);\n        } else if (!hasComponent(world, component, eid)) {\n          componentCache.delete(component);\n          continue;\n        }\n        const rewindWhere = where;\n        view.setUint32(where, eid);\n        where += 4;\n        if (prop[$tagStore]) {\n          writeCount++;\n          continue;\n        }\n        if (ArrayBuffer.isView(prop[eid])) {\n          const type = prop[eid].constructor.name.replace(\"Array\", \"\");\n          const indexType = prop[eid][$indexType];\n          const indexBytes = prop[eid][$indexBytes];\n          const countWhere2 = where;\n          where += indexBytes;\n          let arrayWriteCount = 0;\n          for (let i2 = 0; i2 < prop[eid].length; i2++) {\n            if (shadow) {\n              const changed = shadow[eid][i2] !== prop[eid][i2];\n              shadow[eid][i2] = prop[eid][i2];\n              if (!changed && !newlyAddedComponent) {\n                continue;\n              }\n            }\n            view[`set${indexType}`](where, i2);\n            where += indexBytes;\n            const value = prop[eid][i2];\n            view[`set${type}`](where, value);\n            where += prop[eid].BYTES_PER_ELEMENT;\n            arrayWriteCount++;\n          }\n          if (arrayWriteCount > 0) {\n            view[`set${indexType}`](countWhere2, arrayWriteCount);\n            writeCount++;\n          } else {\n            where = rewindWhere;\n            continue;\n          }\n        } else {\n          if (shadow) {\n            const changed = shadow[eid] !== prop[eid];\n            shadow[eid] = prop[eid];\n            if (!changed && !newlyAddedComponent) {\n              where = rewindWhere;\n              continue;\n            }\n          }\n          const type = prop.constructor.name.replace(\"Array\", \"\");\n          view[`set${type}`](where, prop[eid]);\n          where += prop.BYTES_PER_ELEMENT;\n          writeCount++;\n        }\n      }\n      if (writeCount > 0) {\n        view.setUint32(countWhere, writeCount);\n      } else {\n        where -= 5;\n      }\n    }\n    return buffer.slice(0, where);\n  };\n};\nvar newEntities = /* @__PURE__ */ new Map();\nvar defineDeserializer = (target) => {\n  const isWorld2 = Object.getOwnPropertySymbols(target).includes($componentMap);\n  let [componentProps] = canonicalize(target);\n  const deserializedEntities = /* @__PURE__ */ new Set();\n  return (world, packet, mode = 0) => {\n    newEntities.clear();\n    if (resized) {\n      [componentProps] = canonicalize(target);\n      resized = false;\n    }\n    if (isWorld2) {\n      componentProps = [];\n      target[$componentMap].forEach((c, component) => {\n        if (component[$storeFlattened])\n          componentProps.push(...component[$storeFlattened]);\n        else\n          componentProps.push(component);\n      });\n    }\n    const localEntities = world[$localEntities];\n    const localEntityLookup = world[$localEntityLookup];\n    const view = new DataView(packet);\n    let where = 0;\n    while (where < packet.byteLength) {\n      const pid = view.getUint8(where);\n      where += 1;\n      const entityCount = view.getUint32(where);\n      where += 4;\n      const prop = componentProps[pid];\n      for (let i = 0; i < entityCount; i++) {\n        let eid = view.getUint32(where);\n        where += 4;\n        if (mode === DESERIALIZE_MODE.MAP) {\n          if (localEntities.has(eid)) {\n            eid = localEntities.get(eid);\n          } else if (newEntities.has(eid)) {\n            eid = newEntities.get(eid);\n          } else {\n            const newEid = addEntity(world);\n            localEntities.set(eid, newEid);\n            localEntityLookup.set(newEid, eid);\n            newEntities.set(eid, newEid);\n            eid = newEid;\n          }\n        }\n        if (mode === DESERIALIZE_MODE.APPEND || mode === DESERIALIZE_MODE.REPLACE && !world[$entitySparseSet].has(eid)) {\n          const newEid = newEntities.get(eid) || addEntity(world);\n          newEntities.set(eid, newEid);\n          eid = newEid;\n        }\n        const component = prop[$storeBase]();\n        if (!hasComponent(world, component, eid)) {\n          addComponent(world, component, eid);\n        }\n        deserializedEntities.add(eid);\n        if (component[$tagStore]) {\n          continue;\n        }\n        if (ArrayBuffer.isView(prop[eid])) {\n          const array = prop[eid];\n          const count = view[`get${array[$indexType]}`](where);\n          where += array[$indexBytes];\n          for (let i2 = 0; i2 < count; i2++) {\n            const index = view[`get${array[$indexType]}`](where);\n            where += array[$indexBytes];\n            const value = view[`get${array.constructor.name.replace(\"Array\", \"\")}`](where);\n            where += array.BYTES_PER_ELEMENT;\n            if (prop[$isEidType]) {\n              let localEid;\n              if (localEntities.has(value)) {\n                localEid = localEntities.get(value);\n              } else if (newEntities.has(value)) {\n                localEid = newEntities.get(value);\n              } else {\n                const newEid = addEntity(world);\n                localEntities.set(value, newEid);\n                localEntityLookup.set(newEid, value);\n                newEntities.set(value, newEid);\n                localEid = newEid;\n              }\n              prop[eid][index] = localEid;\n            } else\n              prop[eid][index] = value;\n          }\n        } else {\n          const value = view[`get${prop.constructor.name.replace(\"Array\", \"\")}`](where);\n          where += prop.BYTES_PER_ELEMENT;\n          if (prop[$isEidType]) {\n            let localEid;\n            if (localEntities.has(value)) {\n              localEid = localEntities.get(value);\n            } else if (newEntities.has(value)) {\n              localEid = newEntities.get(value);\n            } else {\n              const newEid = addEntity(world);\n              localEntities.set(value, newEid);\n              localEntityLookup.set(newEid, value);\n              newEntities.set(value, newEid);\n              localEid = newEid;\n            }\n            prop[eid] = localEid;\n          } else\n            prop[eid] = value;\n        }\n      }\n    }\n    const ents = Array.from(deserializedEntities);\n    deserializedEntities.clear();\n    return ents;\n  };\n};\n\n// src/Entity.js\nvar $entityMasks = Symbol(\"entityMasks\");\nvar $entityComponents = Symbol(\"entityComponents\");\nvar $entitySparseSet = Symbol(\"entitySparseSet\");\nvar $entityArray = Symbol(\"entityArray\");\nvar $entityIndices = Symbol(\"entityIndices\");\nvar $removedEntities = Symbol(\"removedEntities\");\nvar defaultSize = 1e5;\nvar globalEntityCursor = 0;\nvar globalSize = defaultSize;\nvar resizeThreshold = () => globalSize - globalSize / 5;\nvar getGlobalSize = () => globalSize;\nvar removed = [];\nvar defaultRemovedReuseThreshold = 0.01;\nvar removedReuseThreshold = defaultRemovedReuseThreshold;\nvar resetGlobals = () => {\n  globalSize = defaultSize;\n  globalEntityCursor = 0;\n  removedReuseThreshold = defaultRemovedReuseThreshold;\n  removed.length = 0;\n};\nvar setDefaultSize = (newSize) => {\n  const oldSize = globalSize;\n  defaultSize = newSize;\n  resetGlobals();\n  globalSize = newSize;\n  resizeWorlds(newSize);\n  resizeComponents(newSize);\n  setSerializationResized(true);\n  console.info(`\\u{1F47E} bitECS - resizing all data stores from ${oldSize} to ${newSize}`);\n};\nvar setRemovedRecycleThreshold = (newThreshold) => {\n  removedReuseThreshold = newThreshold;\n};\nvar getEntityCursor = () => globalEntityCursor;\nvar eidToWorld = /* @__PURE__ */ new Map();\nvar addEntity = (world) => {\n  if (globalEntityCursor >= resizeThreshold()) {\n    const size = globalSize;\n    const amount = Math.ceil(size / 2 / 4) * 4;\n    setDefaultSize(size + amount);\n  }\n  const eid = removed.length > Math.round(defaultSize * removedReuseThreshold) ? removed.shift() : globalEntityCursor++;\n  world[$entitySparseSet].add(eid);\n  eidToWorld.set(eid, world);\n  world[$notQueries].forEach((q) => {\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n  });\n  world[$entityComponents].set(eid, /* @__PURE__ */ new Set());\n  return eid;\n};\nvar removeEntity = (world, eid) => {\n  if (!world[$entitySparseSet].has(eid))\n    return;\n  world[$queries].forEach((q) => {\n    queryRemoveEntity(world, q, eid);\n  });\n  removed.push(eid);\n  world[$entitySparseSet].remove(eid);\n  world[$entityComponents].delete(eid);\n  world[$localEntities].delete(world[$localEntityLookup].get(eid));\n  world[$localEntityLookup].delete(eid);\n  for (let i = 0; i < world[$entityMasks].length; i++)\n    world[$entityMasks][i][eid] = 0;\n};\nvar getEntityComponents = (world, eid) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  return Array.from(world[$entityComponents].get(eid));\n};\nvar entityExists = (world, eid) => world[$entitySparseSet].has(eid);\n\n// src/Query.js\nfunction Not(c) {\n  return () => [c, \"not\"];\n}\nfunction Changed(c) {\n  return () => [c, \"changed\"];\n}\nfunction Any(...comps) {\n  return function QueryAny() {\n    return comps;\n  };\n}\nfunction All(...comps) {\n  return function QueryAll() {\n    return comps;\n  };\n}\nfunction None(...comps) {\n  return function QueryNone() {\n    return comps;\n  };\n}\nvar $queries = Symbol(\"queries\");\nvar $notQueries = Symbol(\"notQueries\");\nvar $queryAny = Symbol(\"queryAny\");\nvar $queryAll = Symbol(\"queryAll\");\nvar $queryNone = Symbol(\"queryNone\");\nvar $queryMap = Symbol(\"queryMap\");\nvar $dirtyQueries = Symbol(\"$dirtyQueries\");\nvar $queryComponents = Symbol(\"queryComponents\");\nvar $enterQuery = Symbol(\"enterQuery\");\nvar $exitQuery = Symbol(\"exitQuery\");\nvar enterQuery = (query) => (world) => {\n  if (!world[$queryMap].has(query))\n    registerQuery(world, query);\n  const q = world[$queryMap].get(query);\n  const entered = q.entered.dense.slice();\n  q.entered = SparseSet();\n  return entered;\n};\nvar exitQuery = (query) => (world) => {\n  if (!world[$queryMap].has(query))\n    registerQuery(world, query);\n  const q = world[$queryMap].get(query);\n  const exited = q.exited.dense.slice();\n  q.exited = SparseSet();\n  return exited;\n};\nvar registerQuery = (world, query) => {\n  const components2 = [];\n  const notComponents = [];\n  const changedComponents = [];\n  query[$queryComponents].forEach((c) => {\n    if (typeof c === \"function\") {\n      const [comp, mod] = c();\n      if (!world[$componentMap].has(comp))\n        registerComponent(world, comp);\n      if (mod === \"not\") {\n        notComponents.push(comp);\n      }\n      if (mod === \"changed\") {\n        changedComponents.push(comp);\n        components2.push(comp);\n      }\n    } else {\n      if (!world[$componentMap].has(c))\n        registerComponent(world, c);\n      components2.push(c);\n    }\n  });\n  const mapComponents = (c) => world[$componentMap].get(c);\n  const allComponents = components2.concat(notComponents).map(mapComponents);\n  const sparseSet = SparseSet();\n  const archetypes = [];\n  const changed = [];\n  const toRemove = SparseSet();\n  const entered = SparseSet();\n  const exited = SparseSet();\n  const generations = allComponents.map((c) => c.generationId).reduce((a, v) => {\n    if (a.includes(v))\n      return a;\n    a.push(v);\n    return a;\n  }, []);\n  const reduceBitflags = (a, c) => {\n    if (!a[c.generationId])\n      a[c.generationId] = 0;\n    a[c.generationId] |= c.bitflag;\n    return a;\n  };\n  const masks = components2.map(mapComponents).reduce(reduceBitflags, {});\n  const notMasks = notComponents.map(mapComponents).reduce(reduceBitflags, {});\n  const hasMasks = allComponents.reduce(reduceBitflags, {});\n  const flatProps = components2.filter((c) => !c[$tagStore]).map((c) => Object.getOwnPropertySymbols(c).includes($storeFlattened) ? c[$storeFlattened] : [c]).reduce((a, v) => a.concat(v), []);\n  const shadows = [];\n  const q = Object.assign(sparseSet, {\n    archetypes,\n    changed,\n    components: components2,\n    notComponents,\n    changedComponents,\n    allComponents,\n    masks,\n    notMasks,\n    hasMasks,\n    generations,\n    flatProps,\n    toRemove,\n    entered,\n    exited,\n    shadows\n  });\n  world[$queryMap].set(query, q);\n  world[$queries].add(q);\n  allComponents.forEach((c) => {\n    c.queries.add(q);\n  });\n  if (notComponents.length)\n    world[$notQueries].add(q);\n  for (let eid = 0; eid < getEntityCursor(); eid++) {\n    if (!world[$entitySparseSet].has(eid))\n      continue;\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n  }\n};\nvar generateShadow = (q, pid) => {\n  const $ = Symbol();\n  const prop = q.flatProps[pid];\n  createShadow(prop, $);\n  q.shadows[pid] = prop[$];\n  return prop[$];\n};\nvar diff = (q, clearDiff) => {\n  if (clearDiff)\n    q.changed = [];\n  const { flatProps, shadows } = q;\n  for (let i = 0; i < q.dense.length; i++) {\n    const eid = q.dense[i];\n    let dirty = false;\n    for (let pid = 0; pid < flatProps.length; pid++) {\n      const prop = flatProps[pid];\n      const shadow = shadows[pid] || generateShadow(q, pid);\n      if (ArrayBuffer.isView(prop[eid])) {\n        for (let i2 = 0; i2 < prop[eid].length; i2++) {\n          if (prop[eid][i2] !== shadow[eid][i2]) {\n            dirty = true;\n            break;\n          }\n        }\n        shadow[eid].set(prop[eid]);\n      } else {\n        if (prop[eid] !== shadow[eid]) {\n          dirty = true;\n          shadow[eid] = prop[eid];\n        }\n      }\n    }\n    if (dirty)\n      q.changed.push(eid);\n  }\n  return q.changed;\n};\nvar flatten = (a, v) => a.concat(v);\nvar aggregateComponentsFor = (mod) => (x) => x.filter((f) => f.name === mod().constructor.name).reduce(flatten);\nvar getAnyComponents = aggregateComponentsFor(Any);\nvar getAllComponents = aggregateComponentsFor(All);\nvar getNoneComponents = aggregateComponentsFor(None);\nvar defineQuery = (...args) => {\n  let components2;\n  let any, all, none;\n  if (Array.isArray(args[0])) {\n    components2 = args[0];\n  } else {\n  }\n  if (components2 === void 0 || components2[$componentMap] !== void 0) {\n    return (world) => world ? world[$entityArray] : components2[$entityArray];\n  }\n  const query = function(world, clearDiff = true) {\n    if (!world[$queryMap].has(query))\n      registerQuery(world, query);\n    const q = world[$queryMap].get(query);\n    commitRemovals(world);\n    if (q.changedComponents.length)\n      return diff(q, clearDiff);\n    return q.dense;\n  };\n  query[$queryComponents] = components2;\n  query[$queryAny] = any;\n  query[$queryAll] = all;\n  query[$queryNone] = none;\n  return query;\n};\nvar queryCheckEntity = (world, q, eid) => {\n  const { masks, notMasks, generations } = q;\n  let or = 0;\n  for (let i = 0; i < generations.length; i++) {\n    const generationId = generations[i];\n    const qMask = masks[generationId];\n    const qNotMask = notMasks[generationId];\n    const eMask = world[$entityMasks][generationId][eid];\n    if (qNotMask && (eMask & qNotMask) !== 0) {\n      return false;\n    }\n    if (qMask && (eMask & qMask) !== qMask) {\n      return false;\n    }\n  }\n  return true;\n};\nvar queryAddEntity = (q, eid) => {\n  q.toRemove.remove(eid);\n  q.entered.add(eid);\n  q.add(eid);\n};\nvar queryCommitRemovals = (q) => {\n  for (let i = q.toRemove.dense.length - 1; i >= 0; i--) {\n    const eid = q.toRemove.dense[i];\n    q.toRemove.remove(eid);\n    q.remove(eid);\n  }\n};\nvar commitRemovals = (world) => {\n  if (!world[$dirtyQueries].size)\n    return;\n  world[$dirtyQueries].forEach(queryCommitRemovals);\n  world[$dirtyQueries].clear();\n};\nvar queryRemoveEntity = (world, q, eid) => {\n  if (!q.has(eid) || q.toRemove.has(eid))\n    return;\n  q.toRemove.add(eid);\n  world[$dirtyQueries].add(q);\n  q.exited.add(eid);\n};\nvar resetChangedQuery = (world, query) => {\n  const q = world[$queryMap].get(query);\n  q.changed = [];\n};\nvar removeQuery = (world, query) => {\n  const q = world[$queryMap].get(query);\n  world[$queries].delete(q);\n  world[$queryMap].delete(query);\n};\n\n// src/Component.js\nvar $componentMap = Symbol(\"componentMap\");\nvar components = [];\nvar resizeComponents = (size) => {\n  components.forEach((component) => resizeStore(component, size));\n};\nvar defineComponent = (schema, size) => {\n  const component = createStore(schema, size || getGlobalSize());\n  if (schema && Object.keys(schema).length)\n    components.push(component);\n  return component;\n};\nvar incrementBitflag = (world) => {\n  world[$bitflag] *= 2;\n  if (world[$bitflag] >= 2 ** 31) {\n    world[$bitflag] = 1;\n    world[$entityMasks].push(new Uint32Array(world[$size]));\n  }\n};\nvar registerComponent = (world, component) => {\n  if (!component)\n    throw new Error(`bitECS - Cannot register null or undefined component`);\n  const queries = /* @__PURE__ */ new Set();\n  const notQueries = /* @__PURE__ */ new Set();\n  const changedQueries = /* @__PURE__ */ new Set();\n  world[$queries].forEach((q) => {\n    if (q.allComponents.includes(component)) {\n      queries.add(q);\n    }\n  });\n  world[$componentMap].set(component, {\n    generationId: world[$entityMasks].length - 1,\n    bitflag: world[$bitflag],\n    store: component,\n    queries,\n    notQueries,\n    changedQueries\n  });\n  if (component[$storeSize] < getGlobalSize()) {\n    resizeStore(component, getGlobalSize());\n  }\n  incrementBitflag(world);\n};\nvar registerComponents = (world, components2) => {\n  components2.forEach((c) => registerComponent(world, c));\n};\nvar hasComponent = (world, component, eid) => {\n  const registeredComponent = world[$componentMap].get(component);\n  if (!registeredComponent)\n    return false;\n  const { generationId, bitflag } = registeredComponent;\n  const mask = world[$entityMasks][generationId][eid];\n  return (mask & bitflag) === bitflag;\n};\nvar addComponent = (world, component, eid, reset = false) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  if (!world[$componentMap].has(component))\n    registerComponent(world, component);\n  if (hasComponent(world, component, eid))\n    return;\n  const c = world[$componentMap].get(component);\n  const { generationId, bitflag, queries, notQueries } = c;\n  world[$entityMasks][generationId][eid] |= bitflag;\n  queries.forEach((q) => {\n    if (q.toRemove.has(eid))\n      q.toRemove.remove(eid);\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n    if (!match)\n      queryRemoveEntity(world, q, eid);\n  });\n  world[$entityComponents].get(eid).add(component);\n  if (reset)\n    resetStoreFor(component, eid);\n};\nvar removeComponent = (world, component, eid, reset = true) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  if (!hasComponent(world, component, eid))\n    return;\n  const c = world[$componentMap].get(component);\n  const { generationId, bitflag, queries } = c;\n  world[$entityMasks][generationId][eid] &= ~bitflag;\n  queries.forEach((q) => {\n    if (q.toRemove.has(eid))\n      q.toRemove.remove(eid);\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n    if (!match)\n      queryRemoveEntity(world, q, eid);\n  });\n  world[$entityComponents].get(eid).delete(component);\n  if (reset)\n    resetStoreFor(component, eid);\n};\n\n// src/World.js\nvar $size = Symbol(\"size\");\nvar $resizeThreshold = Symbol(\"resizeThreshold\");\nvar $bitflag = Symbol(\"bitflag\");\nvar $archetypes = Symbol(\"archetypes\");\nvar $localEntities = Symbol(\"localEntities\");\nvar $localEntityLookup = Symbol(\"localEntityLookup\");\nvar worlds = [];\nvar resizeWorlds = (size) => {\n  worlds.forEach((world) => {\n    world[$size] = size;\n    for (let i = 0; i < world[$entityMasks].length; i++) {\n      const masks = world[$entityMasks][i];\n      world[$entityMasks][i] = resize(masks, size);\n    }\n    world[$resizeThreshold] = world[$size] - world[$size] / 5;\n  });\n};\nvar createWorld = (...args) => {\n  const world = typeof args[0] === \"object\" ? args[0] : {};\n  const size = typeof args[0] === \"number\" ? args[0] : typeof args[1] === \"number\" ? args[1] : getGlobalSize();\n  resetWorld(world, size);\n  worlds.push(world);\n  return world;\n};\nvar resetWorld = (world, size = getGlobalSize()) => {\n  world[$size] = size;\n  if (world[$entityArray])\n    world[$entityArray].forEach((eid) => removeEntity(world, eid));\n  world[$entityMasks] = [new Uint32Array(size)];\n  world[$entityComponents] = /* @__PURE__ */ new Map();\n  world[$archetypes] = [];\n  world[$entitySparseSet] = SparseSet();\n  world[$entityArray] = world[$entitySparseSet].dense;\n  world[$bitflag] = 1;\n  world[$componentMap] = /* @__PURE__ */ new Map();\n  world[$queryMap] = /* @__PURE__ */ new Map();\n  world[$queries] = /* @__PURE__ */ new Set();\n  world[$notQueries] = /* @__PURE__ */ new Set();\n  world[$dirtyQueries] = /* @__PURE__ */ new Set();\n  world[$localEntities] = /* @__PURE__ */ new Map();\n  world[$localEntityLookup] = /* @__PURE__ */ new Map();\n  return world;\n};\nvar deleteWorld = (world) => {\n  Object.getOwnPropertySymbols(world).forEach(($) => {\n    delete world[$];\n  });\n  Object.keys(world).forEach((key) => {\n    delete world[key];\n  });\n  worlds.splice(worlds.indexOf(world), 1);\n};\nvar getWorldComponents = (world) => Array.from(world[$componentMap].keys());\nvar getAllEntities = (world) => world[$entitySparseSet].dense.slice(0);\n\n// src/System.js\nvar defineSystem = (update) => (world, ...args) => {\n  update(world, ...args);\n  return world;\n};\n\n// src/index.js\nvar pipe = (...fns) => (input) => {\n  let tmp = input;\n  for (let i = 0; i < fns.length; i++) {\n    const fn = fns[i];\n    tmp = fn(tmp);\n  }\n  return tmp;\n};\nvar Types = TYPES_ENUM;\nexport {\n  Changed,\n  DESERIALIZE_MODE,\n  Not,\n  Types,\n  addComponent,\n  addEntity,\n  commitRemovals,\n  createWorld,\n  defineComponent,\n  defineDeserializer,\n  defineQuery,\n  defineSerializer,\n  defineSystem,\n  deleteWorld,\n  enterQuery,\n  entityExists,\n  exitQuery,\n  getAllEntities,\n  getEntityComponents,\n  getWorldComponents,\n  hasComponent,\n  parentArray,\n  pipe,\n  registerComponent,\n  registerComponents,\n  removeComponent,\n  removeEntity,\n  removeQuery,\n  resetChangedQuery,\n  resetWorld,\n  setDefaultSize,\n  setRemovedRecycleThreshold\n};\n//# sourceMappingURL=index.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"assets/js/\" + chunkId + \"-\" + {\"30\":\"e5b5a4ec6567234be190\",\"56\":\"c755742c567f48601d71\",\"76\":\"f86cd8080946d702599e\",\"116\":\"c512025dbcbf05892a98\",\"160\":\"d3cb7b5414fff523b06f\",\"188\":\"3a8a3182e9daccf275ab\",\"297\":\"96d168b7fde2a6652807\",\"441\":\"6654372f1b190f86c36e\",\"540\":\"ff2c563d70ee7335449f\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 425;","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t425: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkhubs\"] = self[\"webpackChunkhubs\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [495,542,119], function() { return __webpack_require__(45097); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","Object","defineProperty","exports","value","isUnicodeLanguageSubtag","isUnicodeScriptSubtag","isUnicodeRegionSubtag","isStructurallyValidLanguageTag","parseUnicodeLanguageId","parseUnicodeLocaleId","getCanonicalLocales","tslib_1","parser_1","emitter_1","canonicalizer_1","locales","undefined","seen","_i","locales_1","length","locale","canonicalizedTag","emitUnicodeLocaleId","canonicalizeUnicodeLocaleId","indexOf","push","CanonicalizeLocaleList","parser_2","enumerable","get","__exportStar","variantAlias","scriptAlias","territoryAlias","languageAlias","canonicalizeUnicodeLanguageId","aliases_generated_1","likelySubtags_generated_1","canonicalizeKVs","arr","all","result","arr_1","kv","toLowerCase","sort","compareKV","t1","t2","compareExtension","e1","e2","type","mergeVariants","v1","v2","__spreadArray","v2_1","v","unicodeLanguageId","finalLangAst","variants","replacedLang_1","_a","variant","emitUnicodeLanguageId","lang","replacedLangAst","split","SEPARATOR","script","region","replacedLang_2","replacedLang_3","replacedLang","toUpperCase","regionAlias","replacedRegion","regions","likelySubtag","likelySubtags","likelyRegion","slice","i","alias","isUnicodeVariantSubtag","extensions","extension","keywords","attributes","strs","keys","reduce","str","fields","filter","Boolean","join","chunks","extensions_1","ext","apply","concat","ALPHANUM_1_8","ALPHANUM_2_8","ALPHANUM_3_8","KEY_REGEX","TYPE_REGEX","ALPHA_4","OTHER_EXTENSION_TYPE","UNICODE_REGION_SUBTAG_REGEX","UNICODE_VARIANT_SUBTAG_REGEX","UNICODE_LANGUAGE_SUBTAG_REGEX","TKEY_REGEX","test","shift","RangeError","parseUnicodeExtension","keyword","parseKeyword","key","parseTransformedExtension","e","parsePuExtension","exts","parseOtherExtensionValue","tag","__assign","unicodeExtension","transformedExtension","puExtension","otherExtensionMap","parseExtensions","internalSlotMap","WeakMap","x","internalSlots","create","set","Locale","ecma402_abstract_1","intl_getcanonicallocales_1","get_internal_slots_1","__importDefault","RELEVANT_EXTENSION_KEYS","UNICODE_TYPE_REGEX","mergeUnicodeLanguageId","replacement","addLikelySubtags","ast","unicodeLangId","match_1","parts_1","match_2","parts_2","match_3","parts_3","match","Error","parts","opts","this","constructor","TypeError","relevantExtensionKeys","internalSlotsList","default","initializedLocale","toString","options","CoerceOptionsToObject","invariant","language","GetOption","languageId","Intl","applyOptionsToTag","opt","calendar","ca","collation","co","hc","kf","kn","_kn","String","numberingSystem","nu","r","Array","isArray","_b","relevantExtensionKeys_1","entry","_c","keywords_1","optionsValue","applyUnicodeExtensionToTag","hourCycle","caseFirst","numeric","SameValue","prototype","maximize","minimize","maxLocale","removeLikelySubtags","configurable","Symbol","toStringTag","writable","_1","shouldPolyfill","hasIntlGetCanonicalLocalesBug","GetOperands","s","n","ToNumber","isFinite","iv","f","dp","fv","w","t","Math","abs","ft","replace","Number","IntegerDigits","NumberOfFractionDigits","NumberOfFractionDigitsWithoutTrailing","FractionDigits","FractionDigitsWithoutTrailing","InitializePluralRules","intl_localematcher_1","pl","availableLocales","localeData","getDefaultLocale","getInternalSlots","requestedLocales","initializedPluralRules","matcher","localeMatcher","SetNumberFormatDigitOptions","ResolveLocale","ResolvePlural","GetOperands_1","PluralRuleSelect","Type","FormatNumericToString","formattedString","PluralRules","InitializePluralRules_1","ResolvePlural_1","validateInstance","instance","method","_n","fn","resolvedOptions","forEach","field","val","pluralCategories","categories","select","supportedLocalesOf","SupportedLocales","__addLocaleData","data","arguments","data_1","d","add","__defaultLocale","Set","polyfilled","error","ex","ord","v0","t0","n10","n100","supported_locales_1","minimumFractionDigits","supportedLocales","RelativeTimeFormat","InitializeRelativeTimeFormat","format","unit","initializedRelativeTimeFormat","PartitionRelativeTimePattern","ToString","map","el","formatToParts","style","minimizedLocale","getMagnitude","floor","log","LOG10E","repeat","times","setInternalSlot","setMultiInternalSlots","props","k","getInternalSlot","getMultiInternalSlots","slots","isLiteralPart","patternPart","target","name","UNICODE_EXTENSION_SEQUENCE_REGEX","condition","message","Err","RangePatternType","DATE_TIME_PROPS","DATE_TIME_REGEX","expPatternTrimmer","matchSkeletonPattern","len","era","year","month","day","weekday","hour12","hour","minute","second","timeZoneName","skeletonTokenToTable2","c","processDateTimePattern","pattern","literals","pattern12","_","literal","m","parseDateTimeSkeleton","skeleton","rawPattern","rangePatterns","intervalFormatFallback","rangePatterns12","intervalResult","patternParts","pattern_1","pattern12_1","splitRangePattern","source","startRange","endRange","shared","splitFallbackRangePattern","PART_REGEX","splitIndex","exec","index","isNumericType","bestFitFormatMatcherScore","score","DATE_TIME_PROPS_1","prop","optionsProp","formatProp","values","optionsPropIndex","formatPropIndex","delta","max","min","BestFitFormatMatcher","formats","bestScore","bestFormat","formats_1","skeletonFormat","patternFormat","skeletonValue","patternValue","requestedValue","CanonicalizeTimeZoneName","tz","tzData","uppercaseLinks","uppercasedTz","uppercasedZones","z","ianaTimeZone","o","NaN","TimeClip","time","number","isNaN","integer","ToInteger","ToObject","arg","y","is","ArrayCreate","HasOwnProperty","hasOwnProperty","call","MS_PER_DAY","mod","Day","WeekDay","DayFromYear","Date","UTC","TimeFromYear","YearFromTime","getUTCFullYear","DaysInYear","DayWithinYear","InLeapYear","MonthFromTime","dwy","leap","DateFromTime","mft","HourFromTime","MS_PER_MINUTE","MinFromTime","MS_PER_SECOND","SecFromTime","OrdinaryHasInstance","C","O","boundTargetFunction","P","isPrototypeOf","msFromTime","BasicFormatMatcher","DateTimeStyleFormat","dateStyle","timeStyle","dataLocaleData","dateFormat","timeFormat","connector","dateTimeFormat","ToLocalTime","timeZone","zoneData","offset","dst","getApplicableZoneData","timeZoneOffset","inDST","relatedYear","yearName","millisecond","pad","offsetToGmtString","gmtFormat","hourFormat","offsetInMs","offsetInMinutes","mins","hours","positivePattern","negativePattern","offsetStr","FormatDateTimePattern","dtf","getDefaultTimeZone","dataLocale","nfOptions","useGrouping","nf","NumberFormat","nf2Options","minimumIntegerDigits","nf3","nf2","fractionalSecondDigits","nf3Options","tm","patternParts_1","p","pow","timeZoneData","pm","am","PartitionPattern","beginIndex","endIndex","nextIndex","substring","PartitionDateTimePattern","implDetails","FormatDateTime","TABLE_2_FIELDS","PartitionDateTimeRangePattern","rangePattern","tm1","tm2","dateFieldsPracticallyEqual","patternContainsLargerDateField","TABLE_2_FIELDS_1","fieldName","rp","ampm","result_2","result_1","_d","_e","rangePatternPart","partResult","_f","partResult_1","FormatDateTimeRange","FormatDateTimeRangeToParts","part","FormatDateTimeToParts","ToDateTimeOptions","required","defaults","needDefaults","_g","fallback","BestAvailableLocale","candidate","has","pos","lastIndexOf","UnicodeExtensionValue","size","searchValue","start","end","done","requestedLocales_1","noExtensionLocale","availableLocale","LookupMatcher","foundLocale","minimizedAvailableLocaleMap","minimizedAvailableLocales","l","maximizedRequestedLocale","minimizedRequestedLocale","BestFitMatcher","supportedExtension","foundLocaleData","keyLocaleData","supportedExtensionAddition","privateIndex","preExtension","postExtension","IsValidTimeZoneName","zoneNames","DefaultNumberOption","GetNumberOption","property","minimum","maximum","resolveHourCycle","hcDefault","InitializeDateTimeFormat","formatMatcher","isTimeRelated","NOT_A_Z_REGEX","IsWellFormedCurrencyCode","currency","CanonicalCodeForDisplayNames","code","GetOptionsObject","SANCTIONED_UNITS","removeUnitNamespace","SIMPLE_UNITS","IsSanctionedSimpleUnitIdentifier","unitIdentifier","IsWellFormedUnitIdentifier","units","numerator","denominator","ComputeExponentForMagnitude","numberFormat","magnitude","notation","compactDisplay","currencyDisplay","thresholdMap","numbers","short","decimal","long","num","thresholds","magnitudeKey","other","ToRawPrecision","minPrecision","maxPrecision","xFinal","int","xToString","xToStringExponentIndex","xToStringMantissa","xToStringExponent","xToStringMantissaWithoutDecimalPoint","decimalPlaceOffset","round","adjustDecimalPlace","cut","roundedNumber","integerDigitsCount","ToRawFixed","minFraction","maxFraction","mantissa","exponent","a","b","intlObject","isNegative","roundingType","minimumSignificantDigits","maximumSignificantDigits","maximumFractionDigits","string","minInteger","ComputeExponent","formatNumberResult","CurrencyDigits","currencyDigitsData","S_UNICODE_REGEX","CARET_S_UNICODE_REGEX","RegExp","S_DOLLAR_UNICODE_REGEX","CLDR_NUMBER_PATTERN","numberResult","nonNameCurrencyPart","numberPattern","sign","defaultNumberingSystem","compactNumberPattern","compactPluralRules","byNumberingSystem","selectPlural","compactPlaralRule","getPatternForSign","getCompactDisplayPattern","byCurrencyDisplay","currencies","symbol","narrow","standard","currencyData","currencySign","percent","decimalNumberPattern","afterCurrency","currencySpacing","afterInsertBetween","beforeCurrency","beforeInsertBetween","numberPatternParts","numberParts","symbols","numberPatternParts_1","paritionNumberIntoParts","minusSign","plusSign","percentSign","unitName","unitPattern","currencyNameData","displayName","unitPatternParts_1","unitDisplay","unitData","simple","numeratorUnit","denominatorUnit","numeratorUnitPattern","perUnitPattern","perUnit","perPattern","compound","per","denominatorPattern","interpolateMatch","digitReplacementTable","digit","fraction","decimalSepIndex","groupSepSymbol","group","groups","patternGroups","primaryGroupingSize","secondaryGroupingSize","integerGroup","pop","exponential","exponentResult","zeroPattern","rules","PartitionNumberPattern","nan","infinity","signDisplay","FormatNumericToParts","SetNumberFormatUnitOptions","mnfdDefault","mxfdDefault","mnid","mnfd","mxfd","mnsd","mxsd","InitializeNumberFormat","numberingSystemNames","cDigits","SingularRelativeTimeUnit","MakePartsList","rtf","resolvedUnit","pluralRules","patterns","tl","po","FormatRelativeTime","FormatRelativeTimeToParts","_super","NUMBERING_SYSTEM_REGEX","subset","LookupSupportedLocales","isMissingLocaleDataError","__extends","_this","AVAILABLE_LOCALES","en","pt","ja","es","ru","fr","ko","de","FALLBACK_LOCALES","jp","defaultLocaleData","DEFAULT_LOCALE","cachedMessages","Map","_locale","_localeData","setLocale","resolvedLocale","navigator","languages","userLanguage","unshift","curLocale","primaryLanguageSubtag","findLocale","window","dispatchEvent","CustomEvent","then","interval","setInterval","APP","store","clearInterval","state","preferences","addEventListener","getLocale","getMessages","configs","configTranslations","messageKey","entries","messages","_match","subkey","acc","isAdmin","document","querySelector","getAttribute","process","startsWith","URL","location","__webpack_public_path__","hasThumbnailServerMetaTag","IS_LOCAL_OR_CUSTOM_CLIENT","AVAILABLE_INTEGRATIONS","APP_CONFIG","theme","colorVars","createElement","innerHTML","head","insertBefore","firstChild","features","feature","featureName","localDevImages","image","imageName","cssUrl","url","images","link","linkName","defaultValue","links","setIsAdmin","_isAdmin","integration","availableIntegrations","translation","translationsConfig","translations","getMessage","isMergeableObject","isNonNullObject","stringValue","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","for","cloneUnlessOtherwiseSpecified","clone","deepmerge","defaultArrayMerge","element","arrayMerge","sourceIsArray","destination","mergeObject","array","prev","next","qs","URLSearchParams","search","qsTruthy","param","qsGet","hackyMobileSafariTestValue","MOBILE_RE","TABLET_RE","isIpadOS","maxTouchPoints","platform","isIOS","isMobileVR","userAgent","_isMobile","vendor","opera","substr","mockUserAgent","isTablet","hasTouchScreen","msMaxTouchPoints","mQ","matchMedia","media","matches","UA","detectTouchScreen","resolverLink","getReticulumFetchUrl","path","absolute","host","port","href","fetchReticulumAuthenticated","payload","token","retUrl","params","headers","authorization","body","JSON","stringify","fetch","text","parse","fetchReticulumAuthenticatedWithToken","names","chooseRandom","random","fetchRandomDefaultAvatarId","defaultAvatars","defaultAvatar","avatar","id","freeze","PERMISSIONS_STATUS_CHANGED","MIC_SHARE_STARTED","MIC_SHARE_ENDED","VIDEO_SHARE_STARTED","VIDEO_SHARE_ENDED","DEVICE_CHANGE","GRANTED","DENIED","PROMPT","MICROPHONE","SPEAKERS","CAMERA","SCREEN","NO_DEVICE_ID","COLLISION_LAYERS","AAModes","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","defaultMaterialQuality","MATERIAL_QUALITY_OPTIONS","AFRAME","utils","device","isMobile","qsMobileDefault","qsDefault","isFirefoxReality","SCHEMA","definitions","profile","additionalProperties","properties","avatarId","personalAvatarId","credentials","email","activity","hasFoundFreeze","hasChangedName","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","hasOpenedShare","entryCount","settings","lastUsedMicDeviceId","micMuted","shouldPromptForRefresh","preferredMic","preferredSpeakers","preferredCamera","muteMicOnEntry","disableLeftRightPanning","audioNormalization","invertTouchscreenCameraMove","enableOnScreenJoystickLeft","detectMobile","enableOnScreenJoystickRight","enableGyro","animateWaypointTransitions","showFPSCounter","allowMultipleHubsInstances","disableIdleDetection","fastRoomSwitching","lazyLoadSceneMedia","preferMobileObjectInfoPanel","maxResolutionWidth","maxResolutionHeight","globalVoiceVolume","globalMediaVolume","globalSFXVolume","snapRotationDegrees","materialQualitySetting","enableDynamicShadows","disableSoundEffects","disableMovement","disableBackwardsMovement","disableStrafing","disableTeleporter","disableAutoPixelRatio","movementSpeedModifier","disableEchoCancellation","disableNoiseSuppression","disableAutoGainControl","showRtcDebugPanel","showAudioDebugPanel","enableAudioClipping","audioClippingThreshold","audioPanningQuality","cursorSize","nametagVisibility","nametagVisibilityDistance","avatarVoiceLevels","enablePostEffects","enableBloom","aaMode","MSAA_4X","confirmedDiscordRooms","items","confirmedBroadcastedRooms","uploadPromotionTokens","fileId","promotionToken","creatorAssignmentTokens","hubId","creatorAssignmentToken","embedTokens","embedToken","onLoadActions","action","args","$ref","Store","EventTarget","super","_signOutOnExpiredAuthToken","jwtDecode","exp","now","update","initProfile","_shouldResetAvatarOnInit","resetToRandomDefaultAvatar","_preferences","localStorage","getItem","setItem","oauthFlowCredentials","Cookies","maybeDispatchThemeChanged","previous","current","detail","credentialsAccountId","sub","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","bumpEntryCount","currentEntryCount","enqueueOnLoadAction","executeOnLoadActions","sceneEl","emit","event","clearOnLoadActions","destinationArray","sourceArray","newState","mergeOpts","finalState","merge","valid","errors","validate","console","argument","getEmbedTokenForHub","hub","embedTokenEntry","find","hub_id","schema","DEFAULT_ACTION_COLOR","DEFAULT_ACTION_COLOR_LIGHT","DEFAULT_COLORS","config","STORYBOOK_APP_CONFIG","themes","getDarkModeQuery","removeEventListener","registerDarkModeQuery","changeListener","darkModeQuery","addListener","removeListener","tryGetTheme","themeId","darkModeDefault","getThemeColor","variables","updateTextButtonColors","actionColor","actionHoverColor","setAttribute","onThemeChanged","listener","_darkModeQuery","removeDarkModeListener","eventObj","readyState","Promise","resolve","once","NODE","classList","isDebug","logFilter","debug","WrappedIntlProvider","React","updateLocale","setState","componentDidMount","componentWillUnmount","render","children","propTypes","PropTypes","detectIOS","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","texture","reject","THREE","CubeTextureLoader","load","RGBAFormat","loadPartially","fileLoader","currentRequestHeader","requestHeader","setRequestHeader","assign","Range","GLBRangeRequests","parser","binChunkOffset","static","loader","onLoad","onProgress","onError","assetUrl","resourcePath","LoaderUtils","loadContent","content","register","jsonContent","catch","response","status","reader","getReader","contentLength","total","parseInt","lengthComputable","loaded","Response","ReadableStream","controller","readData","read","close","byteLength","ProgressEvent","enqueue","arrayBuffer","loadArrayBufferFromResponse","buffer","FileLoader","setResponseType","BINARY_HEADER_LENGTH","view","DataView","header","Uint8Array","getUint32","firstChunkLength","extensionsUsed","loadBufferView","bufferViewIndex","json","bufferViewDef","bufferViews","bufferIndex","bufferDef","buffers","uri","byteOffset","LOADING_MODES","replaceLevelObject","lod","object","levelNum","level","levels","oldObject","remove","GLTFLodExtension","_hasLODMaterial","meshIndex","meshDef","meshes","primitives","primitiveDef","material","materialDef","materials","_hasLODMaterialOrSkinInNodes","nodeIndex","nodeDef","nodes","nodeIndices","ids","mesh","skin","_calculateDistance","lowestLevel","def","coverages","extras","screenCoverages","loadScreenCoverages","calculateDistance","_addProgressiveLoadingLevel","isNodeLOD","resourceIndex","lowestMesh","states","currentOnBeforeRender","onBeforeRender","clonedLowestMesh","parent","createNodeMesh","loadMesh","onLoadMesh","clonedMesh","onUpdate","addLevel","materialIndex","extensionDef","meshIndices","clonedMeshDef","LOD","loadingMode","fill","firstLoadLevel","pending","any","Object3D","MeshBVHNode","getLongestEdgeIndex","bounds","splitDimIdx","splitDist","dist","FLOAT32_EPSILON","xyzFields","boxTemp","Box3","getBounds","triangleBounds","count","centroidTarget","minx","Infinity","miny","minz","maxx","maxy","maxz","cminx","cminy","cminz","cmaxx","cmaxy","cmaxz","includeCentroid","cx","hx","lx","rx","cy","hy","ly","ry","cz","hz","lz","rz","getCentroidBounds","SeparatingAxisBounds","setFromPointsField","points","setFromPoints","axis","dot","isSeparated","setFromBox","Vector3","box","boxMin","boxMax","closestPointLineToLine","dir1","dir2","v02","l1","l2","v10","v32","subVectors","d0232","d3210","d3232","d0210","denom","d2","closestPointsSegmentToSegment","paramResult","Vector2","temp1","temp2","target1","target2","at","closestPointToPoint","p2","closestPoint","closestPoint2","distanceToSquared","copy","sphereIntersectTriangle","closestPointTemp","projectedPointTemp","planeTemp","Plane","lineTemp","Line3","sphere","triangle","radius","center","distanceTo","plane","getPlane","distanceToPoint","pp","projectPoint","containsPoint","SeparatingAxisTriangle","Triangle","isSeparatingAxisTriangle","satAxes","satBounds","Sphere","needsUpdate","intersectsSphere","axis0","sab0","getNormal","axis1","sab1","axis2","sab2","axis3","sab3","closestPointToSegment","point1","point2","edge","segment","distSq","closestDistanceSq","nexti","sqrt","intersectsTriangle","saTri2","arr1","arr2","cachedSatBounds","cachedSatBounds2","cachedAxis","satBounds1","satAxes1","sb","sa","satBounds2","satAxes2","sa1","i2","sa2","crossVectors","point","distanceToTriangle","cornerFields","line1","line2","getMidpoint","otherVec","thisVec","f11","f12","f21","f22","OrientedBox","isOrientedBox","matrix","Matrix4","invMatrix","alignedSatBounds","setTriangle","tri","ta","tb","tc","i3","getX","getY","getZ","applyMatrix4","minVec","pi","invert","intersectsBox","aabbBounds","saTri","pointsArr","triSatBounds","triSatAxes","clamp","distanceToBox","segments1","segments2","threshold","getCenter","threshold2","i1","nextIndex2","index2","p1","f1","f2","f3","vA","vB","vC","uvA","uvB","uvC","intersectionPoint","intersectionPointWorld","intersectTri","geo","raycaster","ray","intersections","triOffset","intersection","position","uv","fromBufferAttribute","pA","pB","pC","side","BackSide","intersectTriangle","DoubleSide","matrixWorld","distance","origin","near","far","checkIntersection","face","normal","faceIndex","checkBufferGeometryIntersection","intersectTris","intersectClosestTri","res","boundingBox","boxIntersection","intersectRay","node","boundingData","intersectBox","raycast","intersects","continueGeneration","geometry","left","right","raycastFirst","splitAxis","xyzAxis","leftToRight","direction","c1","c2","c1Result","c2Result","shapecast","_triangle","_cachedBox1","_cachedBox2","iterateOverTriangles","intersectsTriangleFunc","contained","depth","intersectsBoundsFunc","nodeScoreFunc","cachedBox1","cachedBox2","getLeftOffset","getRightEndOffset","score1","score2","box1","box2","temp","c1Intersection","c1StopTraversal","c2Intersection","c2StopTraversal","intersectsGeometry","triangle2","cachedMesh","Mesh","invertedMat","obb","obb2","geometryToBvh","cachedObb","computeBoundingBox","thisGeometry","thisIndex","thisPos","boundsTree","raycastBuffer","stride4Offset","stride2Offset","float32Array","_float32Array","uint16Array","_uint16Array","uint32Array","_uint32Array","intersectRayBuffer","raycastFirstBuffer","shapecastBuffer","getLeftOffsetBuffer","getRightEndOffsetBuffer","arrayToBoxBuffer","intersectsGeometryBuffer","bufferStack","_prevBuffer","setBuffer","Float32Array","Uint16Array","Uint32Array","clearBuffer","SKIP_GENERATION","tri2","bvh","copyIndexBuffer","finishTree","countNodes","populateBuffer","isLeaf","nextUnusedPointer","roots","_roots","rootData","_isPacked","root","nodeCount","ArrayBuffer","indexAttribute","getIndex","setIndex","newIndex","BufferAttribute","isBufferGeometry","isInterleavedBufferAttribute","strategy","maxDepth","maxLeafTris","verbose","lazyGeneration","packData","splitNode","centroidBoundingData","reachedMaxDepth","warn","nodeBoundingData","sahPlanes","avg","getAverage","TRAVERSAL_COST","INTERSECTION_COST","bb","dim","filteredLists","planes","getCost","sal","nl","sar","nr","bestCost","o1","o2","bmin","bmax","pinfo","ldim","rdim","ldimo1","rdimo1","ldimo2","rdimo2","cost","getOptimalSplit","splitOffset","axisOffset","partition","indexArray","lstart","lcount","cacheCentroidBoundingData","rstart","rcount","vertexCount","ensureIndex","verts","triCount","tri3","tri6","ai","bi","ci","halfExtents","el2","computeTriangleBounds","computeSAHPlanes","ranges","rangeBoundaries","sortedBoundaries","from","getRootIndexRanges","range","bx","boxToArray","rootBox","union","buildTree","serialize","traverse","callback","rootIndex","_traverseBuffer","BYTES_PER_NODE","_traverseNode","isPacked","closestResult","geomToMesh","orderNodesFunc","boxToMesh","closestPointToGeometry","geom","minThreshold","maxThreshold","tempTarget1","tempTarget2","closestDistance","sphere1","sphere2","distanceToGeometry","LineBasicMaterial","color","transparent","opacity","Box3Helper","Ray","tmpInverseMatrix","origMeshRaycastFunc","HAS_IMAGE_BITMAP","createImageBitmap","HubsTextureLoader","TextureLoader","manager","width","height","conversionRatio","newWidth","newHeight","canvas","getContext","drawImage","UnsignedByteType","resizeIfNeeded","_loadImageBitmapTexture","loadAsync","Texture","ImageBitmapLoader","setCrossOrigin","crossOrigin","setPath","bitmap","Cache","resolveURL","flipY","mapMaterials","object3D","HubsMeshBasicMaterial","MeshBasicMaterial","Material","emissive","emissiveIntensity","emissiveMap","lightMap","lightMapIntensity","PI","aoMap","aoMapIntensity","alphaMap","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","onBeforeCompile","shader","uniforms","_emissive","_emissiveIntensity","_emissiveMap","fragmentShader","Color","HubsMeshPhongMaterial","MeshPhongMaterial","vertexShader","normalMapType","normalMap","normalScale","bumpMap","bumpScale","displacementMap","displacementScale","displacementBias","reflectivity","refractionRatio","nonCorsProxyDomains","hostname","proxiedUrlFor","parsedUrl","domain","endsWith","getCustomGLTFParserURLResolver","gltfUrl","basisJsUrl","basisWasmUrl","dracoWrapperJsUrl","dracoWasmUrl","corsProxyPrefix","originalUrlParts","decodeURIComponent","pathname","Layers","disposeMaterial","mtrl","dispose","specularMap","envMap","metalnessMap","roughnessMap","eid","removeEntity","world","disposeNode","Quaternion","identity","parallelTraverse","cloneObject3D","preserveUUIDs","cloneLookup","cloneUUIDLookup","sourceNode","clonedNode","userData","gltfExtensions","MOZ_hubs_components","uuid","animations","animationClip","sourceAnimationClip","clonedTracks","tracks","keyframeTrack","sourceKeyframeTrack","nodeName","objectName","objectIndex","propertyName","propertyIndex","PropertyBinding","parseTrackName","clonedUUID","clonedKeyframeTrack","cloneKeyframeTrack","AnimationClip","duration","cloneAnimationClip","isMesh","isDirectionalLight","isSpotLight","isSkinnedMesh","sourceBones","bones","sourceBone","bind","bindMatrix","inRotationMat4","inForward","outForward","outSide","worldUp","inMat4Copy","firstHitOnly","gltfCache","cache","src","gltf","scene","gltfCacheKey","retain","cacheItem","release","delete","inflightGltfs","extractZipFile","worker","nextItemId","outstanding","onmessage","msg","err","handlers","transfer","promise","postMessage","promisifyWorker","defaultInflator","componentName","componentData","components","multiple","cloneGltf","getHubsComponents","hubsComponents","HUBS_components","legacyComponents","getHubsComponentsFromMaterial","GLTFModelPlus","registerComponent","componentKey","inflator","inflateEntities","indexToEntityMap","templates","isRoot","modelToWorldScale","childEntities","child","entityComponents","materialComponents","append","className","rotation","order","setFromQuaternion","quaternion","scale","multiplyScalar","matrixNeedsUpdate","matrixAutoUpdate","decompose","setObject3D","MathUtils","generateUUID","morphTargetInfluences","gltfIndex","inflatedEntity","isFirstInflation","objectInflations","objectInflation","resolveNodeRefs","propName","__mhc_link_type","attachTemplate","templateRoot","targetEls","querySelectorAll","cloneNode","appendChild","getHubsComponentsExtension","convertStandardMaterialsIfNeeded","materialQuality","convertStandardMaterial","quality","isMeshStandardMaterial","fromMeshStandardMaterial","ktxLoader","dracoLoader","GLTFHubsPlugin","jsonPreprocessor","textureLoader","beforeRoot","version","oldHeightfieldNode","heightfield","light","decay","runMigration","afterRoot","DefaultMatrixAutoUpdate","animation","track","parsedPath","scenes","findNode","GLTFHubsComponentsExtension","deps","resolveComponents","gltfRootType","obj","idx","associations","getDependency","loadedDep","textures","MOZ_texture_rgbe","encoding","sRGBEncoding","GLTFHubsLightMapExtension","loadMaterial","results","intensity","isMeshBasicMaterial","GLTFHubsTextureBasisExtension","basisLoader","loadTexture","textureIndex","textureDef","BasisTextureLoader","detectSupport","renderer","loadTextureImage","GLTFMozTextureRGBE","minFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","NearestFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","LinearFilter","loadGLTF","contentType","fileMap","includes","useRangeRequests","loadingManager","LoadingManager","setURLModifier","gltfLoader","GLTFLoader","RGBELoader","setDataType","HalfFloatType","lowestMeshLevel","KTX2Loader","DRACOLoader","setKTX2Loader","setDRACOLoader","disposables","mozHubsComponents","propValue","isTexture","isGeometry","disposable","isMaterial","finally","revokeObjectURL","useCache","resolveAsset","charAt","assetEl","getElementById","inflate","init","loadTemplates","play","applySrc","templateEl","importNode","firstElementChild","lastSrc","inflatedEl","disposeLastInflatedEl","loadModel","model","initMixer","hasBufferGeometry","hasBoundsTree","MeshBVH","object3DToSet","visible","setTimeout","inflateComponents","rewires","parentNode","removeChild","removeAttribute","AVATARS_API","AVATAR_TYPES","getAvatarType","fetchSkinnableAvatar","resp","avatars","avatar_id","gltf_url","MAT_NAME","ensureAvatarMaterial","materialForMesh","primitive","parentId","parent_avatar_listing_id","files","srcUrl","Blob","createObjectURL","ctx","putImageData","toDataURL","img","disposeImageBitmap","imageBitmap","HTMLImageElement","TEXTURE_PROPS","base_map","emissive_map","normal_map","orm_map","ALL_MAPS","createRenderer","alpha","useDevicePixelRatio","context","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","WebGLRenderer","forceWebVR","outputEncoding","physicallyCorrectLights","setPixelRatio","devicePixelRatio","ORBIT_ANGLE","Euler","DEG2RAD","fitBoxInFrustum","camera","margin","halfYExtents","halfVertFOV","degToRad","fov","tan","applyEuler","lookAt","getThemeBackground","AvatarPreview","Component","Scene","PerspectiveCamera","clientWidth","clientHeight","controls","OrbitControls","screenSpacePanning","enableKeys","DirectionalLight","HemisphereLight","loadId","avatarGltfUrl","loadCurrentAvatarGltfUrl","clock","Clock","snapshotCanvas","snapshotCamera","snapshotRenderer","setClearAlpha","previewRenderer","setClearColor","setAnimationLoop","dt","getDelta","mixer","removeThemeChangedListener","resize","mounted","parentElement","offsetWidth","offsetHeight","setSize","aspect","updateProjectionMatrix","setAvatar","resetCamera","loading","setFromObject","domElement","imageBitmaps","componentDidUpdate","oldProps","applyMaps","loadPreviewAvatar","previewMesh","pred","idleAnimation","AnimationMixer","clipAction","enabled","setLoop","LoopRepeat","idleAnimationAction","frustumCulled","removeOnUpdate","getImage","originalMaps","dependencies","createDefaultEnvironmentMap","applyMapToPreview","revertMap","bm","snapshot","stop","toBlob","blob","newLoadId","onGltfLoaded","newProps","mapName","applyMap","File","classNames","warningIconUrl","srcSet","warningIcon2xUrl","defaultMessage","linebreak","ref","injectIntl","forwardRef","useThemeFromStore","setThemeId","useState","useEffect","onStoreChanged","nextThemeId","darkMode","setDarkMode","useCallback","useDarkMode","styleTag","useTheme","ThemeProvider","BUILD_VERSION","lastTouchAtMs","ev","preventDefault","getTime","isDoubleTouch","disableiOSZoom","AvatarPage","storeUpdated","forceUpdate","refetchAvatar","fetchAvatar","handleCopyAvatar","copyState","remixAvatar","copyMessage","styles","selectedAvatarId","isSelected","onSubmit","attributions","creator","allow_remixing","onClick","title","icon","faClone","disabled","alt","intl","ReactDOM","cachedSetTimeout","cachedClearTimeout","module","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","browser","env","argv","versions","on","off","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","nodeType","freeGlobal","g","global","self","punycode","maxInt","base","regexPunycode","regexNonASCII","regexSeparators","stringFromCharCode","fromCharCode","mapDomain","ucs2decode","extra","output","counter","charCodeAt","ucs2encode","digitToBasic","flag","adapt","numPoints","firstTime","baseMinusTMin","decode","input","out","basic","j","oldi","baseMinusT","codePoint","inputLength","bias","splice","encode","handledCPCount","basicLength","q","currentValue","handledCPCountPlusOne","qMinusT","sep","eq","regexp","maxKeys","kstr","vstr","stringifyPrimitive","ks","encodeURIComponent","util","Url","protocol","slashes","auth","hash","query","urlParse","relative","resolveObject","isString","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","isObject","u","queryIndex","splitter","uSplit","rest","trim","simplePath","proto","lowerProto","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","newpart","validParts","notHost","bit","toASCII","h","ae","esc","escape","qm","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","up","isAbsolute","workerConstructor","workerOptions","globalScope","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","getBlob","webkitURL","objectURL","webpackAsyncContext","req","__webpack_require__","TYPES_ENUM","i8","ui8","ui8c","i16","ui16","i32","ui32","f32","f64","TYPES_NAMES","TYPES","Int8Array","Uint8ClampedArray","Int16Array","Int32Array","Float64Array","roundToMultiple4","ceil","$storeRef","$storeSize","$storeMaps","$storeFlattened","$storeBase","$storeType","$storeArrayElementCounts","$storeSubarrays","$subarrayCursors","$subarray","$parentArray","$tagStore","$indexType","$indexBytes","$isEidType","stores","newBuffer","BYTES_PER_ELEMENT","newTa","createShadow","isView","shadowStore","subarray","resizeRecursive","metadata","storeSize","cursors","indexType","arrayElementCount","start2","end2","resizeSubarray","resizeStore","resetStoreFor","parentArray","isArrayType","SparseSet","dense","sparse","comparator","swapped","DESERIALIZE_MODE","REPLACE","APPEND","MAP","resized","not","storeFlattened","isFullComponent","isProperty","isModifier","isNotModifier","isChangedModifier","isWorld","getOwnPropertySymbols","$componentMap","fromModifierToComponent","canonicalize","fullComponentProps","changedComponentProps","changedProps","$","defineSerializer","maxBytes","worldSerializer","componentProps","entityComponentCache","ents","component","$entityArray","eidToWorld","where","pid","$diff","shadow","setUint8","countWhere","writeCount","componentCache","newlyAddedComponent","hasComponent","rewindWhere","setUint32","indexBytes","countWhere2","arrayWriteCount","changed","newEntities","defineDeserializer","isWorld2","deserializedEntities","packet","mode","clear","localEntities","$localEntities","localEntityLookup","$localEntityLookup","getUint8","entityCount","newEid","addEntity","$entitySparseSet","addComponent","localEid","$entityMasks","$entityComponents","defaultSize","globalEntityCursor","globalSize","getGlobalSize","removed","removedReuseThreshold","setDefaultSize","newSize","oldSize","resizeWorlds","resizeComponents","info","setRemovedRecycleThreshold","newThreshold","amount","$notQueries","queryCheckEntity","queryAddEntity","$queries","queryRemoveEntity","getEntityComponents","entityExists","Not","Changed","$queryAny","$queryAll","$queryNone","$queryMap","$dirtyQueries","$queryComponents","enterQuery","registerQuery","entered","exitQuery","exited","components2","notComponents","changedComponents","comp","mapComponents","allComponents","sparseSet","toRemove","generations","generationId","reduceBitflags","bitflag","masks","notMasks","hasMasks","flatProps","archetypes","shadows","queries","generateShadow","flatten","aggregateComponentsFor","defineQuery","comps","clearDiff","commitRemovals","dirty","diff","none","qMask","qNotMask","eMask","queryCommitRemovals","resetChangedQuery","removeQuery","defineComponent","$store","arrayElementCounts","collectArrayElementCounts","recursiveTransform","totalBytes","createTypeStore","createArrayStore","createStore","notQueries","changedQueries","$bitflag","$size","incrementBitflag","registerComponents","registeredComponent","reset","removeComponent","$resizeThreshold","$archetypes","worlds","createWorld","resetWorld","deleteWorld","getWorldComponents","getAllEntities","defineSystem","pipe","fns","tmp","Types","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","chunkIds","priority","notFulfilled","fulfilled","every","getter","__esModule","getPrototypeOf","__proto__","ns","getOwnPropertyNames","definition","chunkId","promises","miniCssF","globalThis","Function","needAttach","scripts","getElementsByTagName","charset","nc","onScriptComplete","onerror","onload","doneFns","nmd","paths","installedChunks","installedChunkData","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}