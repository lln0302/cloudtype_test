{"version":3,"file":"assets/js/avatar-39b4b32a5b955fb07f98.js","mappings":"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ACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,UACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,aAAc,MACd,IAAO,KACP,QAAS,MACT,QAAS,MACT,YAAa,iBACb,aAAc,mBACd,QAAS,MACT,YAAa,MACb,QAAS,KACT,UAAW,gBACX,WAAY,KACZ,QAAS,MACT,QAAS,MACT,QAAS,MACT,QAAS,MACT,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,GAAM,KACN,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,GAAM,KACN,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,SAAU,KACV,YAAa,KACb,SAAU,KACV,aAAc,KACd,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,QACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,YAAa,MACb,YAAa,MACb,SAAU,MACV,YAAa,MACb,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,GAAM,UACN,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,GAAM,MACN,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,QACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,aAAc,SACd,cAAe,MACf,cAAe,MACf,aAAc,MACd,YAAa,MACb,qBAAsB,cACtB,aAAc,MACd,cAAe,MACf,YAAa,MACb,YAAa,MACb,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,SAAU,KACV,cAAe,UACf,cAAe,UACf,SAAU,MACV,WAAY,KACZ,WAAY,MACZ,SAAU,eACV,aAAc,MACd,SAAU,MACV,WAAY,MACZ,SAAU,MACV,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MAEXjC,EAAQgC,eAAiB,CACrB,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,sCACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,WACP,IAAO,KACP,IAAO,WACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,cACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,+CACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,oBACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,UACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,WACN,IAAO,KACP,IAAO,WACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,QACN,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,QACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,GAAM,QACN,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,cACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,+CACN,IAAO,+CACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO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AO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,WAAY,cACZ,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,QAAS,aACT,QAAS,aACT,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,IAAO,cACP,IAAO,cACP,GAAM,cACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,IAAO,cACP,GAAM,aACN,GAAM,aACN,GAAM,cACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,cACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,eACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,UAAW,aACX,QAAS,aACT,QAAS,aACT,QAAS,aACT,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,UAAW,aACX,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,SAAU,cACV,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,UAAW,aACX,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,eACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,eACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,SAAU,cACV,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,UAAW,aACX,UAAW,aACX,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,QAAS,aACT,QAAS,aACT,QAAS,aACT,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,QAAS,aACT,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,aACP,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,cACX,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,cACV,SAAU,aACV,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,cACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,cACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,cACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,cACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,cACV,WAAY,cACZ,cAAe,cACf,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,cACV,SAAU,aACV,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,aACf,SAAU,aACV,SAAU,aACV,WAAY,aACZ,cAAe,aACf,cAAe,cACf,cAAe,cACf,cAAe,cACf,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,cAAe,cACf,SAAU,cACV,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,WAAY,aACZ,WAAY,cACZ,WAAY,aACZ,WAAY,aACZ,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,SAAU,cACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,aACZ,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,aACf,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,SAAU,cACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,cAAe,cACf,cAAe,cACf,SAAU,aACV,SAAU,aACV,WAAY,aACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,cACZ,WAAY,aACZ,WAAY,eACZ,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,cACV,SAAU,cACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,cACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,aACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,cAAe,cACf,cAAe,cACf,cAAe,cACf,WAAY,aACZ,WAAY,cACZ,SAAU,aACV,SAAU,cACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,cACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,SAAU,aACV,IAAO,cACP,WAAY,cACZ,SAAU,cACV,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,cACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,cACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,SAAU,cACV,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,QAAS,aACT,UAAW,aACX,QA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","sources":["webpack://hubs/webpack/runtime/chunk loaded","webpack://hubs/webpack/runtime/create fake namespace object","webpack://hubs/webpack/runtime/load script","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/index.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/aliases.generated.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/canonicalizer.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/emitter.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/likelySubtags.generated.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/parser.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/types.js","webpack://hubs/./node_modules/@formatjs/intl-locale/get_internal_slots.js","webpack://hubs/./node_modules/@formatjs/intl-locale/index.js","webpack://hubs/./node_modules/@formatjs/intl-locale/polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-locale/should-polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/abstract/GetOperands.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/abstract/InitializePluralRules.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/abstract/ResolvePlural.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/get_internal_slots.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/index.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/locale-data/en.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/should-polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/supported-locales.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/get_internal_slots.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/index.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/locale-data/en.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/utils.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/utils.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/types/date-time.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/skeleton.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/BestFitFormatMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/CanonicalizeLocaleList.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/CanonicalizeTimeZoneName.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/262.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/CoerceOptionsToObject.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/BasicFormatMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/DateTimeStyleFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/ToLocalTime.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PartitionPattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/PartitionDateTimePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTime.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/PartitionDateTimeRangePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimeRange.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimeRangeToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimeToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/ToDateTimeOptions.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/GetOption.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/BestAvailableLocale.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/UnicodeExtensionValue.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/ResolveLocale.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/LookupMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/BestFitMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsValidTimeZoneName.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DefaultNumberOption.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/GetNumberOption.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/InitializeDateTimeFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsWellFormedCurrencyCode.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DisplayNames/CanonicalCodeForDisplayNames.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/GetOptionsObject.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsSanctionedSimpleUnitIdentifier.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsWellFormedUnitIdentifier.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ComputeExponentForMagnitude.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ToRawPrecision.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ToRawFixed.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/FormatNumericToString.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ComputeExponent.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/CurrencyDigits.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/format_to_parts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/PartitionNumberPattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/FormatNumericToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/SetNumberFormatUnitOptions.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/SetNumberFormatDigitOptions.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/InitializeNumberFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PluralRules/GetOperands.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PluralRules/InitializePluralRules.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PluralRules/ResolvePlural.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/SingularRelativeTimeUnit.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/MakePartsList.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/PartitionRelativeTimePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/FormatRelativeTime.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/FormatRelativeTimeToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/InitializeRelativeTimeFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/data.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/SupportedLocales.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/LookupSupportedLocales.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/should-polyfill.js","webpack://hubs/./src/utils/get-color-scheme-pref.js","webpack://hubs/./src/assets/locales/locale_config.js","webpack://hubs/./src/utils/i18n.js","webpack://hubs/./src/utils/configs.js","webpack://hubs/./src/react-components/styles/theme.js","webpack://hubs/./src/utils/async-utils.js","webpack://hubs/./src/utils/theme.js","webpack://hubs/./src/utils/qs_truthy.js","webpack://hubs/./src/utils/logging.js","webpack://hubs/./src/react-components/wrapped-intl-provider.js","webpack://hubs/./src/utils/detect-touchscreen.js","webpack://hubs/./src/utils/is-mobile.js","webpack://hubs/./src/utils/disable-ios-zoom.js","webpack://hubs/./src/bit-components.js","webpack://hubs/./src/aframe-to-bit-components.js","webpack://hubs/./node_modules/deepmerge/dist/es.js","webpack://hubs/./src/utils/identity.js","webpack://hubs/./src/utils/media-devices-utils.js","webpack://hubs/./src/storage/store.js","webpack://hubs/./src/utils/phoenix-utils.js","webpack://hubs/./src/utils/history.js","webpack://hubs/./src/storage/media-search-store.js","webpack://hubs/./src/App.js","webpack://hubs/./src/components/environment-map.js","webpack://hubs/./src/utils/material-utils.js","webpack://hubs/./src/utils/media-url-utils.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVHNode.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/ArrayBoxUtilities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/buildFunctions.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/SeparatingAxisBounds.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/MathUtilities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/SeparatingAxisTriangle.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/OrientedBox.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/TriangleUtils.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/ThreeIntersectionUtilities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/RayIntersectTriUtlities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/castFunctions.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Constants.js","webpack://hubs/./node_modules/three-mesh-bvh/src/castFunctionsBuffer.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVH.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVHVisualizer.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVHDebug.js","webpack://hubs/./node_modules/three-mesh-bvh/src/index.js","webpack://hubs/./src/components/layers.js","webpack://hubs/./src/utils/three-utils.js","webpack://hubs/./src/loaders/HubsTextureLoader.js","webpack://hubs/./src/components/gltf-model-plus.js","webpack://hubs/./src/utils/promisify-worker.js","webpack://hubs/./src/workers/sketchfab-zip.worker.js","webpack://hubs/./src/utils/next-tick.js","webpack://hubs/./src/utils/avatar-utils.js","webpack://hubs/./src/utils/image-bitmap-utils.js","webpack://hubs/./src/assets/stylesheets/avatar-preview.scss","webpack://hubs/./src/react-components/avatar-preview.js","webpack://hubs/./src/assets/stylesheets/avatar.scss","webpack://hubs/./src/avatar.js","webpack://hubs/./node_modules/process/browser.js","webpack://hubs/./node_modules/url/node_modules/punycode/punycode.js","webpack://hubs/./node_modules/url/node_modules/querystring/decode.js","webpack://hubs/./node_modules/url/node_modules/querystring/encode.js","webpack://hubs/./node_modules/url/node_modules/querystring/index.js","webpack://hubs/./node_modules/url/url.js","webpack://hubs/./node_modules/url/util.js","webpack://hubs/./node_modules/worker-loader/dist/runtime/inline.js","webpack://hubs/./src/assets/locales/ lazy ^\\.\\/.*\\.json$ namespace object","webpack://hubs/./node_modules/bitecs/dist/index.mjs","webpack://hubs/webpack/bootstrap","webpack://hubs/webpack/runtime/compat get default export","webpack://hubs/webpack/runtime/define property getters","webpack://hubs/webpack/runtime/ensure chunk","webpack://hubs/webpack/runtime/get javascript chunk filename","webpack://hubs/webpack/runtime/get mini-css chunk filename","webpack://hubs/webpack/runtime/global","webpack://hubs/webpack/runtime/hasOwnProperty shorthand","webpack://hubs/webpack/runtime/make namespace object","webpack://hubs/webpack/runtime/node module decorator","webpack://hubs/webpack/runtime/runtimeId","webpack://hubs/webpack/runtime/publicPath","webpack://hubs/webpack/runtime/jsonp chunk loading","webpack://hubs/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"hubs:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isUnicodeLanguageSubtag = exports.isUnicodeScriptSubtag = exports.isUnicodeRegionSubtag = exports.isStructurallyValidLanguageTag = exports.parseUnicodeLanguageId = exports.parseUnicodeLocaleId = exports.getCanonicalLocales = void 0;\nvar tslib_1 = require(\"tslib\");\nvar parser_1 = require(\"./src/parser\");\nvar emitter_1 = require(\"./src/emitter\");\nvar canonicalizer_1 = require(\"./src/canonicalizer\");\n/**\n * https://tc39.es/ecma402/#sec-canonicalizelocalelist\n * @param locales\n */\nfunction CanonicalizeLocaleList(locales) {\n    if (locales === undefined) {\n        return [];\n    }\n    var seen = [];\n    if (typeof locales === 'string') {\n        locales = [locales];\n    }\n    for (var _i = 0, locales_1 = locales; _i < locales_1.length; _i++) {\n        var locale = locales_1[_i];\n        var canonicalizedTag = (0, emitter_1.emitUnicodeLocaleId)((0, canonicalizer_1.canonicalizeUnicodeLocaleId)((0, parser_1.parseUnicodeLocaleId)(locale)));\n        if (seen.indexOf(canonicalizedTag) < 0) {\n            seen.push(canonicalizedTag);\n        }\n    }\n    return seen;\n}\nfunction getCanonicalLocales(locales) {\n    return CanonicalizeLocaleList(locales);\n}\nexports.getCanonicalLocales = getCanonicalLocales;\nvar parser_2 = require(\"./src/parser\");\nObject.defineProperty(exports, \"parseUnicodeLocaleId\", { enumerable: true, get: function () { return parser_2.parseUnicodeLocaleId; } });\nObject.defineProperty(exports, \"parseUnicodeLanguageId\", { enumerable: true, get: function () { return parser_2.parseUnicodeLanguageId; } });\nObject.defineProperty(exports, \"isStructurallyValidLanguageTag\", { enumerable: true, get: function () { return parser_2.isStructurallyValidLanguageTag; } });\nObject.defineProperty(exports, \"isUnicodeRegionSubtag\", { enumerable: true, get: function () { return parser_2.isUnicodeRegionSubtag; } });\nObject.defineProperty(exports, \"isUnicodeScriptSubtag\", { enumerable: true, get: function () { return parser_2.isUnicodeScriptSubtag; } });\nObject.defineProperty(exports, \"isUnicodeLanguageSubtag\", { enumerable: true, get: function () { return parser_2.isUnicodeLanguageSubtag; } });\n(0, tslib_1.__exportStar)(require(\"./src/types\"), exports);\n(0, tslib_1.__exportStar)(require(\"./src/emitter\"), exports);\n(0, tslib_1.__exportStar)(require(\"./src/likelySubtags.generated\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.variantAlias = exports.scriptAlias = exports.territoryAlias = exports.languageAlias = void 0;\n/* @generated */\n// prettier-ignore  \nexports.languageAlias = {\n    \"aa-saaho\": \"ssy\",\n    \"aam\": \"aas\",\n    \"aar\": \"aa\",\n    \"abk\": \"ab\",\n    \"adp\": \"dz\",\n    \"afr\": \"af\",\n    \"agp\": \"apf\",\n    \"ais\": \"ami\",\n    \"aju\": \"jrb\",\n    \"aka\": \"ak\",\n    \"alb\": \"sq\",\n    \"als\": \"sq\",\n    \"amh\": \"am\",\n    \"ara\": \"ar\",\n    \"arb\": \"ar\",\n    \"arg\": \"an\",\n    \"arm\": \"hy\",\n    \"art-lojban\": \"jbo\",\n    \"asd\": \"snz\",\n    \"asm\": \"as\",\n    \"aue\": \"ktz\",\n    \"ava\": \"av\",\n    \"ave\": \"ae\",\n    \"aym\": \"ay\",\n    \"ayr\": \"ay\",\n    \"ayx\": \"nun\",\n    \"aze\": \"az\",\n    \"azj\": \"az\",\n    \"bak\": \"ba\",\n    \"bam\": \"bm\",\n    \"baq\": \"eu\",\n    \"baz\": \"nvo\",\n    \"bcc\": \"bal\",\n    \"bcl\": \"bik\",\n    \"bel\": \"be\",\n    \"ben\": \"bn\",\n    \"bgm\": \"bcg\",\n    \"bh\": \"bho\",\n    \"bhk\": \"fbl\",\n    \"bic\": \"bir\",\n    \"bih\": \"bho\",\n    \"bis\": \"bi\",\n    \"bjd\": \"drl\",\n    \"bjq\": \"bzc\",\n    \"bkb\": \"ebk\",\n    \"blg\": \"iba\",\n    \"bod\": \"bo\",\n    \"bos\": \"bs\",\n    \"bre\": \"br\",\n    \"btb\": \"beb\",\n    \"bul\": \"bg\",\n    \"bur\": \"my\",\n    \"bxk\": \"luy\",\n    \"bxr\": \"bua\",\n    \"cat\": \"ca\",\n    \"ccq\": \"rki\",\n    \"cel-gaulish\": \"xtg\",\n    \"ces\": \"cs\",\n    \"cha\": \"ch\",\n    \"che\": \"ce\",\n    \"chi\": \"zh\",\n    \"chu\": \"cu\",\n    \"chv\": \"cv\",\n    \"cjr\": \"mom\",\n    \"cka\": \"cmr\",\n    \"cld\": \"syr\",\n    \"cmk\": \"xch\",\n    \"cmn\": \"zh\",\n    \"cnr\": \"sr-ME\",\n    \"cor\": \"kw\",\n    \"cos\": \"co\",\n    \"coy\": \"pij\",\n    \"cqu\": \"quh\",\n    \"cre\": \"cr\",\n    \"cwd\": \"cr\",\n    \"cym\": \"cy\",\n    \"cze\": \"cs\",\n    \"daf\": \"dnj\",\n    \"dan\": \"da\",\n    \"dap\": \"njz\",\n    \"deu\": \"de\",\n    \"dgo\": \"doi\",\n    \"dhd\": \"mwr\",\n    \"dik\": \"din\",\n    \"diq\": \"zza\",\n    \"dit\": \"dif\",\n    \"div\": \"dv\",\n    \"djl\": \"dze\",\n    \"dkl\": \"aqd\",\n    \"drh\": \"mn\",\n    \"drr\": \"kzk\",\n    \"drw\": \"fa-AF\",\n    \"dud\": \"uth\",\n    \"duj\": \"dwu\",\n    \"dut\": \"nl\",\n    \"dwl\": \"dbt\",\n    \"dzo\": \"dz\",\n    \"ekk\": \"et\",\n    \"ell\": \"el\",\n    \"elp\": \"amq\",\n    \"emk\": \"man\",\n    \"en-GB-oed\": \"en-GB-oxendict\",\n    \"eng\": \"en\",\n    \"epo\": \"eo\",\n    \"esk\": \"ik\",\n    \"est\": \"et\",\n    \"eus\": \"eu\",\n    \"ewe\": \"ee\",\n    \"fao\": \"fo\",\n    \"fas\": \"fa\",\n    \"fat\": \"ak\",\n    \"fij\": \"fj\",\n    \"fin\": \"fi\",\n    \"fra\": \"fr\",\n    \"fre\": \"fr\",\n    \"fry\": \"fy\",\n    \"fuc\": \"ff\",\n    \"ful\": \"ff\",\n    \"gav\": \"dev\",\n    \"gaz\": \"om\",\n    \"gbc\": \"wny\",\n    \"gbo\": \"grb\",\n    \"geo\": \"ka\",\n    \"ger\": \"de\",\n    \"gfx\": \"vaj\",\n    \"ggn\": \"gvr\",\n    \"ggo\": \"esg\",\n    \"ggr\": \"gtu\",\n    \"gio\": \"aou\",\n    \"gla\": \"gd\",\n    \"gle\": \"ga\",\n    \"glg\": \"gl\",\n    \"gli\": \"kzk\",\n    \"glv\": \"gv\",\n    \"gno\": \"gon\",\n    \"gre\": \"el\",\n    \"grn\": \"gn\",\n    \"gti\": \"nyc\",\n    \"gug\": \"gn\",\n    \"guj\": \"gu\",\n    \"guv\": \"duz\",\n    \"gya\": \"gba\",\n    \"hat\": \"ht\",\n    \"hau\": \"ha\",\n    \"hbs\": \"sr-Latn\",\n    \"hdn\": \"hai\",\n    \"hea\": \"hmn\",\n    \"heb\": \"he\",\n    \"her\": \"hz\",\n    \"him\": \"srx\",\n    \"hin\": \"hi\",\n    \"hmo\": \"ho\",\n    \"hrr\": \"jal\",\n    \"hrv\": \"hr\",\n    \"hun\": \"hu\",\n    \"hy-arevmda\": \"hyw\",\n    \"hye\": \"hy\",\n    \"i-ami\": \"ami\",\n    \"i-bnn\": \"bnn\",\n    \"i-default\": \"en-x-i-default\",\n    \"i-enochian\": \"und-x-i-enochian\",\n    \"i-hak\": \"hak\",\n    \"i-klingon\": \"tlh\",\n    \"i-lux\": \"lb\",\n    \"i-mingo\": \"see-x-i-mingo\",\n    \"i-navajo\": \"nv\",\n    \"i-pwn\": \"pwn\",\n    \"i-tao\": \"tao\",\n    \"i-tay\": \"tay\",\n    \"i-tsu\": \"tsu\",\n    \"ibi\": \"opa\",\n    \"ibo\": \"ig\",\n    \"ice\": \"is\",\n    \"ido\": \"io\",\n    \"iii\": \"ii\",\n    \"ike\": \"iu\",\n    \"iku\": \"iu\",\n    \"ile\": \"ie\",\n    \"ill\": \"ilm\",\n    \"ilw\": \"gal\",\n    \"in\": \"id\",\n    \"ina\": \"ia\",\n    \"ind\": \"id\",\n    \"ipk\": \"ik\",\n    \"isl\": \"is\",\n    \"ita\": \"it\",\n    \"iw\": \"he\",\n    \"izi\": \"eza\",\n    \"jar\": \"jgk\",\n    \"jav\": \"jv\",\n    \"jeg\": \"oyb\",\n    \"ji\": \"yi\",\n    \"jpn\": \"ja\",\n    \"jw\": \"jv\",\n    \"kal\": \"kl\",\n    \"kan\": \"kn\",\n    \"kas\": \"ks\",\n    \"kat\": \"ka\",\n    \"kau\": \"kr\",\n    \"kaz\": \"kk\",\n    \"kdv\": \"zkd\",\n    \"kgc\": \"tdf\",\n    \"kgd\": \"ncq\",\n    \"kgh\": \"kml\",\n    \"khk\": \"mn\",\n    \"khm\": \"km\",\n    \"kik\": \"ki\",\n    \"kin\": \"rw\",\n    \"kir\": \"ky\",\n    \"kmr\": \"ku\",\n    \"knc\": \"kr\",\n    \"kng\": \"kg\",\n    \"knn\": \"kok\",\n    \"koj\": \"kwv\",\n    \"kom\": \"kv\",\n    \"kon\": \"kg\",\n    \"kor\": \"ko\",\n    \"kpp\": \"jkm\",\n    \"kpv\": \"kv\",\n    \"krm\": \"bmf\",\n    \"ktr\": \"dtp\",\n    \"kua\": \"kj\",\n    \"kur\": \"ku\",\n    \"kvs\": \"gdj\",\n    \"kwq\": \"yam\",\n    \"kxe\": \"tvd\",\n    \"kxl\": \"kru\",\n    \"kzh\": \"dgl\",\n    \"kzj\": \"dtp\",\n    \"kzt\": \"dtp\",\n    \"lao\": \"lo\",\n    \"lat\": \"la\",\n    \"lav\": \"lv\",\n    \"lbk\": \"bnc\",\n    \"leg\": \"enl\",\n    \"lii\": \"raq\",\n    \"lim\": \"li\",\n    \"lin\": \"ln\",\n    \"lit\": \"lt\",\n    \"llo\": \"ngt\",\n    \"lmm\": \"rmx\",\n    \"ltz\": \"lb\",\n    \"lub\": \"lu\",\n    \"lug\": \"lg\",\n    \"lvs\": \"lv\",\n    \"mac\": \"mk\",\n    \"mah\": \"mh\",\n    \"mal\": \"ml\",\n    \"mao\": \"mi\",\n    \"mar\": \"mr\",\n    \"may\": \"ms\",\n    \"meg\": \"cir\",\n    \"mgx\": \"jbk\",\n    \"mhr\": \"chm\",\n    \"mkd\": \"mk\",\n    \"mlg\": \"mg\",\n    \"mlt\": \"mt\",\n    \"mnk\": \"man\",\n    \"mnt\": \"wnn\",\n    \"mo\": \"ro\",\n    \"mof\": \"xnt\",\n    \"mol\": \"ro\",\n    \"mon\": \"mn\",\n    \"mri\": \"mi\",\n    \"msa\": \"ms\",\n    \"mst\": \"mry\",\n    \"mup\": \"raj\",\n    \"mwd\": \"dmw\",\n    \"mwj\": \"vaj\",\n    \"mya\": \"my\",\n    \"myd\": \"aog\",\n    \"myt\": \"mry\",\n    \"nad\": \"xny\",\n    \"nau\": \"na\",\n    \"nav\": \"nv\",\n    \"nbf\": \"nru\",\n    \"nbl\": \"nr\",\n    \"nbx\": \"ekc\",\n    \"ncp\": \"kdz\",\n    \"nde\": \"nd\",\n    \"ndo\": \"ng\",\n    \"nep\": \"ne\",\n    \"nld\": \"nl\",\n    \"nln\": \"azd\",\n    \"nlr\": \"nrk\",\n    \"nno\": \"nn\",\n    \"nns\": \"nbr\",\n    \"nnx\": \"ngv\",\n    \"no-bok\": \"nb\",\n    \"no-bokmal\": \"nb\",\n    \"no-nyn\": \"nn\",\n    \"no-nynorsk\": \"nn\",\n    \"nob\": \"nb\",\n    \"noo\": \"dtd\",\n    \"nor\": \"no\",\n    \"npi\": \"ne\",\n    \"nts\": \"pij\",\n    \"nxu\": \"bpp\",\n    \"nya\": \"ny\",\n    \"oci\": \"oc\",\n    \"ojg\": \"oj\",\n    \"oji\": \"oj\",\n    \"ori\": \"or\",\n    \"orm\": \"om\",\n    \"ory\": \"or\",\n    \"oss\": \"os\",\n    \"oun\": \"vaj\",\n    \"pan\": \"pa\",\n    \"pat\": \"kxr\",\n    \"pbu\": \"ps\",\n    \"pcr\": \"adx\",\n    \"per\": \"fa\",\n    \"pes\": \"fa\",\n    \"pli\": \"pi\",\n    \"plt\": \"mg\",\n    \"pmc\": \"huw\",\n    \"pmu\": \"phr\",\n    \"pnb\": \"lah\",\n    \"pol\": \"pl\",\n    \"por\": \"pt\",\n    \"ppa\": \"bfy\",\n    \"ppr\": \"lcq\",\n    \"prs\": \"fa-AF\",\n    \"pry\": \"prt\",\n    \"pus\": \"ps\",\n    \"puz\": \"pub\",\n    \"que\": \"qu\",\n    \"quz\": \"qu\",\n    \"rmr\": \"emx\",\n    \"rmy\": \"rom\",\n    \"roh\": \"rm\",\n    \"ron\": \"ro\",\n    \"rum\": \"ro\",\n    \"run\": \"rn\",\n    \"rus\": \"ru\",\n    \"sag\": \"sg\",\n    \"san\": \"sa\",\n    \"sap\": \"aqt\",\n    \"sca\": \"hle\",\n    \"scc\": \"sr\",\n    \"scr\": \"hr\",\n    \"sgl\": \"isk\",\n    \"sgn-BE-FR\": \"sfb\",\n    \"sgn-BE-NL\": \"vgt\",\n    \"sgn-BR\": \"bzs\",\n    \"sgn-CH-DE\": \"sgg\",\n    \"sgn-CO\": \"csn\",\n    \"sgn-DE\": \"gsg\",\n    \"sgn-DK\": \"dsl\",\n    \"sgn-ES\": \"ssp\",\n    \"sgn-FR\": \"fsl\",\n    \"sgn-GB\": \"bfi\",\n    \"sgn-GR\": \"gss\",\n    \"sgn-IE\": \"isg\",\n    \"sgn-IT\": \"ise\",\n    \"sgn-JP\": \"jsl\",\n    \"sgn-MX\": \"mfs\",\n    \"sgn-NI\": \"ncs\",\n    \"sgn-NL\": \"dse\",\n    \"sgn-NO\": \"nsi\",\n    \"sgn-PT\": \"psr\",\n    \"sgn-SE\": \"swl\",\n    \"sgn-US\": \"ase\",\n    \"sgn-ZA\": \"sfs\",\n    \"sh\": \"sr-Latn\",\n    \"sin\": \"si\",\n    \"skk\": \"oyb\",\n    \"slk\": \"sk\",\n    \"slo\": \"sk\",\n    \"slv\": \"sl\",\n    \"sme\": \"se\",\n    \"smo\": \"sm\",\n    \"sna\": \"sn\",\n    \"snd\": \"sd\",\n    \"som\": \"so\",\n    \"sot\": \"st\",\n    \"spa\": \"es\",\n    \"spy\": \"kln\",\n    \"sqi\": \"sq\",\n    \"src\": \"sc\",\n    \"srd\": \"sc\",\n    \"srp\": \"sr\",\n    \"ssw\": \"ss\",\n    \"sul\": \"sgd\",\n    \"sum\": \"ulw\",\n    \"sun\": \"su\",\n    \"swa\": \"sw\",\n    \"swc\": \"sw-CD\",\n    \"swe\": \"sv\",\n    \"swh\": \"sw\",\n    \"tah\": \"ty\",\n    \"tam\": \"ta\",\n    \"tat\": \"tt\",\n    \"tdu\": \"dtp\",\n    \"tel\": \"te\",\n    \"tgg\": \"bjp\",\n    \"tgk\": \"tg\",\n    \"tgl\": \"fil\",\n    \"tha\": \"th\",\n    \"thc\": \"tpo\",\n    \"thw\": \"ola\",\n    \"thx\": \"oyb\",\n    \"tib\": \"bo\",\n    \"tid\": \"itd\",\n    \"tie\": \"ras\",\n    \"tir\": \"ti\",\n    \"tkk\": \"twm\",\n    \"tl\": \"fil\",\n    \"tlw\": \"weo\",\n    \"tmp\": \"tyj\",\n    \"tne\": \"kak\",\n    \"tnf\": \"fa-AF\",\n    \"ton\": \"to\",\n    \"tsf\": \"taj\",\n    \"tsn\": \"tn\",\n    \"tso\": \"ts\",\n    \"ttq\": \"tmh\",\n    \"tuk\": \"tk\",\n    \"tur\": \"tr\",\n    \"tw\": \"ak\",\n    \"twi\": \"ak\",\n    \"uig\": \"ug\",\n    \"ukr\": \"uk\",\n    \"umu\": \"del\",\n    \"und-aaland\": \"und-AX\",\n    \"und-arevela\": \"und\",\n    \"und-arevmda\": \"und\",\n    \"und-bokmal\": \"und\",\n    \"und-hakka\": \"und\",\n    \"und-hepburn-heploc\": \"und-alalc97\",\n    \"und-lojban\": \"und\",\n    \"und-nynorsk\": \"und\",\n    \"und-saaho\": \"und\",\n    \"und-xiang\": \"und\",\n    \"unp\": \"wro\",\n    \"uok\": \"ema\",\n    \"urd\": \"ur\",\n    \"uzb\": \"uz\",\n    \"uzn\": \"uz\",\n    \"ven\": \"ve\",\n    \"vie\": \"vi\",\n    \"vol\": \"vo\",\n    \"wel\": \"cy\",\n    \"wgw\": \"wgb\",\n    \"wit\": \"nol\",\n    \"wiw\": \"nwo\",\n    \"wln\": \"wa\",\n    \"wol\": \"wo\",\n    \"xba\": \"cax\",\n    \"xho\": \"xh\",\n    \"xia\": \"acn\",\n    \"xkh\": \"waw\",\n    \"xpe\": \"kpe\",\n    \"xrq\": \"dmw\",\n    \"xsj\": \"suj\",\n    \"xsl\": \"den\",\n    \"ybd\": \"rki\",\n    \"ydd\": \"yi\",\n    \"yen\": \"ynq\",\n    \"yid\": \"yi\",\n    \"yiy\": \"yrm\",\n    \"yma\": \"lrr\",\n    \"ymt\": \"mtm\",\n    \"yor\": \"yo\",\n    \"yos\": \"zom\",\n    \"yuu\": \"yug\",\n    \"zai\": \"zap\",\n    \"zh-cmn\": \"zh\",\n    \"zh-cmn-Hans\": \"zh-Hans\",\n    \"zh-cmn-Hant\": \"zh-Hant\",\n    \"zh-gan\": \"gan\",\n    \"zh-guoyu\": \"zh\",\n    \"zh-hakka\": \"hak\",\n    \"zh-min\": \"nan-x-zh-min\",\n    \"zh-min-nan\": \"nan\",\n    \"zh-wuu\": \"wuu\",\n    \"zh-xiang\": \"hsn\",\n    \"zh-yue\": \"yue\",\n    \"zha\": \"za\",\n    \"zho\": \"zh\",\n    \"zir\": \"scv\",\n    \"zsm\": \"ms\",\n    \"zul\": \"zu\",\n    \"zyb\": \"za\"\n};\nexports.territoryAlias = {\n    \"100\": \"BG\",\n    \"104\": \"MM\",\n    \"108\": \"BI\",\n    \"112\": \"BY\",\n    \"116\": \"KH\",\n    \"120\": \"CM\",\n    \"124\": \"CA\",\n    \"132\": \"CV\",\n    \"136\": \"KY\",\n    \"140\": \"CF\",\n    \"144\": \"LK\",\n    \"148\": \"TD\",\n    \"152\": \"CL\",\n    \"156\": \"CN\",\n    \"158\": \"TW\",\n    \"162\": \"CX\",\n    \"166\": \"CC\",\n    \"170\": \"CO\",\n    \"172\": \"RU AM AZ BY GE KG KZ MD TJ TM UA UZ\",\n    \"174\": \"KM\",\n    \"175\": \"YT\",\n    \"178\": \"CG\",\n    \"180\": \"CD\",\n    \"184\": \"CK\",\n    \"188\": \"CR\",\n    \"191\": \"HR\",\n    \"192\": \"CU\",\n    \"196\": \"CY\",\n    \"200\": \"CZ SK\",\n    \"203\": \"CZ\",\n    \"204\": \"BJ\",\n    \"208\": \"DK\",\n    \"212\": \"DM\",\n    \"214\": \"DO\",\n    \"218\": \"EC\",\n    \"222\": \"SV\",\n    \"226\": \"GQ\",\n    \"230\": \"ET\",\n    \"231\": \"ET\",\n    \"232\": \"ER\",\n    \"233\": \"EE\",\n    \"234\": \"FO\",\n    \"238\": \"FK\",\n    \"239\": \"GS\",\n    \"242\": \"FJ\",\n    \"246\": \"FI\",\n    \"248\": \"AX\",\n    \"249\": \"FR\",\n    \"250\": \"FR\",\n    \"254\": \"GF\",\n    \"258\": \"PF\",\n    \"260\": \"TF\",\n    \"262\": \"DJ\",\n    \"266\": \"GA\",\n    \"268\": \"GE\",\n    \"270\": \"GM\",\n    \"275\": \"PS\",\n    \"276\": \"DE\",\n    \"278\": \"DE\",\n    \"280\": \"DE\",\n    \"288\": \"GH\",\n    \"292\": \"GI\",\n    \"296\": \"KI\",\n    \"300\": \"GR\",\n    \"304\": \"GL\",\n    \"308\": \"GD\",\n    \"312\": \"GP\",\n    \"316\": \"GU\",\n    \"320\": \"GT\",\n    \"324\": \"GN\",\n    \"328\": \"GY\",\n    \"332\": \"HT\",\n    \"334\": \"HM\",\n    \"336\": \"VA\",\n    \"340\": \"HN\",\n    \"344\": \"HK\",\n    \"348\": \"HU\",\n    \"352\": \"IS\",\n    \"356\": \"IN\",\n    \"360\": \"ID\",\n    \"364\": \"IR\",\n    \"368\": \"IQ\",\n    \"372\": \"IE\",\n    \"376\": \"IL\",\n    \"380\": \"IT\",\n    \"384\": \"CI\",\n    \"388\": \"JM\",\n    \"392\": \"JP\",\n    \"398\": \"KZ\",\n    \"400\": \"JO\",\n    \"404\": \"KE\",\n    \"408\": \"KP\",\n    \"410\": \"KR\",\n    \"414\": \"KW\",\n    \"417\": \"KG\",\n    \"418\": \"LA\",\n    \"422\": \"LB\",\n    \"426\": \"LS\",\n    \"428\": \"LV\",\n    \"430\": \"LR\",\n    \"434\": \"LY\",\n    \"438\": \"LI\",\n    \"440\": \"LT\",\n    \"442\": \"LU\",\n    \"446\": \"MO\",\n    \"450\": \"MG\",\n    \"454\": \"MW\",\n    \"458\": \"MY\",\n    \"462\": \"MV\",\n    \"466\": \"ML\",\n    \"470\": \"MT\",\n    \"474\": \"MQ\",\n    \"478\": \"MR\",\n    \"480\": \"MU\",\n    \"484\": \"MX\",\n    \"492\": \"MC\",\n    \"496\": \"MN\",\n    \"498\": \"MD\",\n    \"499\": \"ME\",\n    \"500\": \"MS\",\n    \"504\": \"MA\",\n    \"508\": \"MZ\",\n    \"512\": \"OM\",\n    \"516\": \"NA\",\n    \"520\": \"NR\",\n    \"524\": \"NP\",\n    \"528\": \"NL\",\n    \"530\": \"CW SX BQ\",\n    \"531\": \"CW\",\n    \"532\": \"CW SX BQ\",\n    \"533\": \"AW\",\n    \"534\": \"SX\",\n    \"535\": \"BQ\",\n    \"536\": \"SA IQ\",\n    \"540\": \"NC\",\n    \"548\": \"VU\",\n    \"554\": \"NZ\",\n    \"558\": \"NI\",\n    \"562\": \"NE\",\n    \"566\": \"NG\",\n    \"570\": \"NU\",\n    \"574\": \"NF\",\n    \"578\": \"NO\",\n    \"580\": \"MP\",\n    \"581\": \"UM\",\n    \"582\": \"FM MH MP PW\",\n    \"583\": \"FM\",\n    \"584\": \"MH\",\n    \"585\": \"PW\",\n    \"586\": \"PK\",\n    \"591\": \"PA\",\n    \"598\": \"PG\",\n    \"600\": \"PY\",\n    \"604\": \"PE\",\n    \"608\": \"PH\",\n    \"612\": \"PN\",\n    \"616\": \"PL\",\n    \"620\": \"PT\",\n    \"624\": \"GW\",\n    \"626\": \"TL\",\n    \"630\": \"PR\",\n    \"634\": \"QA\",\n    \"638\": \"RE\",\n    \"642\": \"RO\",\n    \"643\": \"RU\",\n    \"646\": \"RW\",\n    \"652\": \"BL\",\n    \"654\": \"SH\",\n    \"659\": \"KN\",\n    \"660\": \"AI\",\n    \"662\": \"LC\",\n    \"663\": \"MF\",\n    \"666\": \"PM\",\n    \"670\": \"VC\",\n    \"674\": \"SM\",\n    \"678\": \"ST\",\n    \"682\": \"SA\",\n    \"686\": \"SN\",\n    \"688\": \"RS\",\n    \"690\": \"SC\",\n    \"694\": \"SL\",\n    \"702\": \"SG\",\n    \"703\": \"SK\",\n    \"704\": \"VN\",\n    \"705\": \"SI\",\n    \"706\": \"SO\",\n    \"710\": \"ZA\",\n    \"716\": \"ZW\",\n    \"720\": \"YE\",\n    \"724\": \"ES\",\n    \"728\": \"SS\",\n    \"729\": \"SD\",\n    \"732\": \"EH\",\n    \"736\": \"SD\",\n    \"740\": \"SR\",\n    \"744\": \"SJ\",\n    \"748\": \"SZ\",\n    \"752\": \"SE\",\n    \"756\": \"CH\",\n    \"760\": \"SY\",\n    \"762\": \"TJ\",\n    \"764\": \"TH\",\n    \"768\": \"TG\",\n    \"772\": \"TK\",\n    \"776\": \"TO\",\n    \"780\": \"TT\",\n    \"784\": \"AE\",\n    \"788\": \"TN\",\n    \"792\": \"TR\",\n    \"795\": \"TM\",\n    \"796\": \"TC\",\n    \"798\": \"TV\",\n    \"800\": \"UG\",\n    \"804\": \"UA\",\n    \"807\": \"MK\",\n    \"810\": \"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ\",\n    \"818\": \"EG\",\n    \"826\": \"GB\",\n    \"830\": \"JE GG\",\n    \"831\": \"GG\",\n    \"832\": \"JE\",\n    \"833\": \"IM\",\n    \"834\": \"TZ\",\n    \"840\": \"US\",\n    \"850\": \"VI\",\n    \"854\": \"BF\",\n    \"858\": \"UY\",\n    \"860\": \"UZ\",\n    \"862\": \"VE\",\n    \"876\": \"WF\",\n    \"882\": \"WS\",\n    \"886\": \"YE\",\n    \"887\": \"YE\",\n    \"890\": \"RS ME SI HR MK BA\",\n    \"891\": \"RS ME\",\n    \"894\": \"ZM\",\n    \"958\": \"AA\",\n    \"959\": \"QM\",\n    \"960\": \"QN\",\n    \"962\": \"QP\",\n    \"963\": \"QQ\",\n    \"964\": \"QR\",\n    \"965\": \"QS\",\n    \"966\": \"QT\",\n    \"967\": \"EU\",\n    \"968\": \"QV\",\n    \"969\": \"QW\",\n    \"970\": \"QX\",\n    \"971\": \"QY\",\n    \"972\": \"QZ\",\n    \"973\": \"XA\",\n    \"974\": \"XB\",\n    \"975\": \"XC\",\n    \"976\": \"XD\",\n    \"977\": \"XE\",\n    \"978\": \"XF\",\n    \"979\": \"XG\",\n    \"980\": \"XH\",\n    \"981\": \"XI\",\n    \"982\": \"XJ\",\n    \"983\": \"XK\",\n    \"984\": \"XL\",\n    \"985\": \"XM\",\n    \"986\": \"XN\",\n    \"987\": \"XO\",\n    \"988\": \"XP\",\n    \"989\": \"XQ\",\n    \"990\": \"XR\",\n    \"991\": \"XS\",\n    \"992\": \"XT\",\n    \"993\": \"XU\",\n    \"994\": \"XV\",\n    \"995\": \"XW\",\n    \"996\": \"XX\",\n    \"997\": \"XY\",\n    \"998\": \"XZ\",\n    \"999\": \"ZZ\",\n    \"004\": \"AF\",\n    \"008\": \"AL\",\n    \"010\": \"AQ\",\n    \"012\": \"DZ\",\n    \"016\": \"AS\",\n    \"020\": \"AD\",\n    \"024\": \"AO\",\n    \"028\": \"AG\",\n    \"031\": \"AZ\",\n    \"032\": \"AR\",\n    \"036\": \"AU\",\n    \"040\": \"AT\",\n    \"044\": \"BS\",\n    \"048\": \"BH\",\n    \"050\": \"BD\",\n    \"051\": \"AM\",\n    \"052\": \"BB\",\n    \"056\": \"BE\",\n    \"060\": \"BM\",\n    \"062\": \"034 143\",\n    \"064\": \"BT\",\n    \"068\": \"BO\",\n    \"070\": \"BA\",\n    \"072\": \"BW\",\n    \"074\": \"BV\",\n    \"076\": \"BR\",\n    \"084\": \"BZ\",\n    \"086\": \"IO\",\n    \"090\": \"SB\",\n    \"092\": \"VG\",\n    \"096\": \"BN\",\n    \"AAA\": \"AA\",\n    \"ABW\": \"AW\",\n    \"AFG\": \"AF\",\n    \"AGO\": \"AO\",\n    \"AIA\": \"AI\",\n    \"ALA\": \"AX\",\n    \"ALB\": \"AL\",\n    \"AN\": \"CW SX BQ\",\n    \"AND\": \"AD\",\n    \"ANT\": \"CW SX BQ\",\n    \"ARE\": \"AE\",\n    \"ARG\": \"AR\",\n    \"ARM\": \"AM\",\n    \"ASC\": \"AC\",\n    \"ASM\": \"AS\",\n    \"ATA\": \"AQ\",\n    \"ATF\": \"TF\",\n    \"ATG\": \"AG\",\n    \"AUS\": \"AU\",\n    \"AUT\": \"AT\",\n    \"AZE\": \"AZ\",\n    \"BDI\": \"BI\",\n    \"BEL\": \"BE\",\n    \"BEN\": \"BJ\",\n    \"BES\": \"BQ\",\n    \"BFA\": \"BF\",\n    \"BGD\": \"BD\",\n    \"BGR\": \"BG\",\n    \"BHR\": \"BH\",\n    \"BHS\": \"BS\",\n    \"BIH\": \"BA\",\n    \"BLM\": \"BL\",\n    \"BLR\": \"BY\",\n    \"BLZ\": \"BZ\",\n    \"BMU\": \"BM\",\n    \"BOL\": \"BO\",\n    \"BRA\": \"BR\",\n    \"BRB\": \"BB\",\n    \"BRN\": \"BN\",\n    \"BTN\": \"BT\",\n    \"BU\": \"MM\",\n    \"BUR\": \"MM\",\n    \"BVT\": \"BV\",\n    \"BWA\": \"BW\",\n    \"CAF\": \"CF\",\n    \"CAN\": \"CA\",\n    \"CCK\": \"CC\",\n    \"CHE\": \"CH\",\n    \"CHL\": \"CL\",\n    \"CHN\": \"CN\",\n    \"CIV\": \"CI\",\n    \"CMR\": \"CM\",\n    \"COD\": \"CD\",\n    \"COG\": \"CG\",\n    \"COK\": \"CK\",\n    \"COL\": \"CO\",\n    \"COM\": \"KM\",\n    \"CPT\": \"CP\",\n    \"CPV\": \"CV\",\n    \"CRI\": \"CR\",\n    \"CS\": \"RS ME\",\n    \"CT\": \"KI\",\n    \"CUB\": \"CU\",\n    \"CUW\": \"CW\",\n    \"CXR\": \"CX\",\n    \"CYM\": \"KY\",\n    \"CYP\": \"CY\",\n    \"CZE\": \"CZ\",\n    \"DD\": \"DE\",\n    \"DDR\": \"DE\",\n    \"DEU\": \"DE\",\n    \"DGA\": \"DG\",\n    \"DJI\": \"DJ\",\n    \"DMA\": \"DM\",\n    \"DNK\": \"DK\",\n    \"DOM\": \"DO\",\n    \"DY\": \"BJ\",\n    \"DZA\": \"DZ\",\n    \"ECU\": \"EC\",\n    \"EGY\": \"EG\",\n    \"ERI\": \"ER\",\n    \"ESH\": \"EH\",\n    \"ESP\": \"ES\",\n    \"EST\": \"EE\",\n    \"ETH\": \"ET\",\n    \"FIN\": \"FI\",\n    \"FJI\": \"FJ\",\n    \"FLK\": \"FK\",\n    \"FQ\": \"AQ TF\",\n    \"FRA\": \"FR\",\n    \"FRO\": \"FO\",\n    \"FSM\": \"FM\",\n    \"FX\": \"FR\",\n    \"FXX\": \"FR\",\n    \"GAB\": \"GA\",\n    \"GBR\": \"GB\",\n    \"GEO\": \"GE\",\n    \"GGY\": \"GG\",\n    \"GHA\": \"GH\",\n    \"GIB\": \"GI\",\n    \"GIN\": \"GN\",\n    \"GLP\": \"GP\",\n    \"GMB\": \"GM\",\n    \"GNB\": \"GW\",\n    \"GNQ\": \"GQ\",\n    \"GRC\": \"GR\",\n    \"GRD\": \"GD\",\n    \"GRL\": \"GL\",\n    \"GTM\": \"GT\",\n    \"GUF\": \"GF\",\n    \"GUM\": \"GU\",\n    \"GUY\": \"GY\",\n    \"HKG\": \"HK\",\n    \"HMD\": \"HM\",\n    \"HND\": \"HN\",\n    \"HRV\": \"HR\",\n    \"HTI\": \"HT\",\n    \"HUN\": \"HU\",\n    \"HV\": \"BF\",\n    \"IDN\": \"ID\",\n    \"IMN\": \"IM\",\n    \"IND\": \"IN\",\n    \"IOT\": \"IO\",\n    \"IRL\": \"IE\",\n    \"IRN\": \"IR\",\n    \"IRQ\": \"IQ\",\n    \"ISL\": \"IS\",\n    \"ISR\": \"IL\",\n    \"ITA\": \"IT\",\n    \"JAM\": \"JM\",\n    \"JEY\": \"JE\",\n    \"JOR\": \"JO\",\n    \"JPN\": \"JP\",\n    \"JT\": \"UM\",\n    \"KAZ\": \"KZ\",\n    \"KEN\": \"KE\",\n    \"KGZ\": \"KG\",\n    \"KHM\": \"KH\",\n    \"KIR\": \"KI\",\n    \"KNA\": \"KN\",\n    \"KOR\": \"KR\",\n    \"KWT\": \"KW\",\n    \"LAO\": \"LA\",\n    \"LBN\": \"LB\",\n    \"LBR\": \"LR\",\n    \"LBY\": \"LY\",\n    \"LCA\": \"LC\",\n    \"LIE\": \"LI\",\n    \"LKA\": \"LK\",\n    \"LSO\": \"LS\",\n    \"LTU\": \"LT\",\n    \"LUX\": \"LU\",\n    \"LVA\": \"LV\",\n    \"MAC\": \"MO\",\n    \"MAF\": \"MF\",\n    \"MAR\": \"MA\",\n    \"MCO\": \"MC\",\n    \"MDA\": \"MD\",\n    \"MDG\": \"MG\",\n    \"MDV\": \"MV\",\n    \"MEX\": \"MX\",\n    \"MHL\": \"MH\",\n    \"MI\": \"UM\",\n    \"MKD\": \"MK\",\n    \"MLI\": \"ML\",\n    \"MLT\": \"MT\",\n    \"MMR\": \"MM\",\n    \"MNE\": \"ME\",\n    \"MNG\": \"MN\",\n    \"MNP\": \"MP\",\n    \"MOZ\": \"MZ\",\n    \"MRT\": \"MR\",\n    \"MSR\": \"MS\",\n    \"MTQ\": \"MQ\",\n    \"MUS\": \"MU\",\n    \"MWI\": \"MW\",\n    \"MYS\": \"MY\",\n    \"MYT\": \"YT\",\n    \"NAM\": \"NA\",\n    \"NCL\": \"NC\",\n    \"NER\": \"NE\",\n    \"NFK\": \"NF\",\n    \"NGA\": \"NG\",\n    \"NH\": \"VU\",\n    \"NIC\": \"NI\",\n    \"NIU\": \"NU\",\n    \"NLD\": \"NL\",\n    \"NOR\": \"NO\",\n    \"NPL\": \"NP\",\n    \"NQ\": \"AQ\",\n    \"NRU\": \"NR\",\n    \"NT\": \"SA IQ\",\n    \"NTZ\": \"SA IQ\",\n    \"NZL\": \"NZ\",\n    \"OMN\": \"OM\",\n    \"PAK\": \"PK\",\n    \"PAN\": \"PA\",\n    \"PC\": \"FM MH MP PW\",\n    \"PCN\": \"PN\",\n    \"PER\": \"PE\",\n    \"PHL\": \"PH\",\n    \"PLW\": \"PW\",\n    \"PNG\": \"PG\",\n    \"POL\": \"PL\",\n    \"PRI\": \"PR\",\n    \"PRK\": \"KP\",\n    \"PRT\": \"PT\",\n    \"PRY\": \"PY\",\n    \"PSE\": \"PS\",\n    \"PU\": \"UM\",\n    \"PYF\": \"PF\",\n    \"PZ\": \"PA\",\n    \"QAT\": \"QA\",\n    \"QMM\": \"QM\",\n    \"QNN\": \"QN\",\n    \"QPP\": \"QP\",\n    \"QQQ\": \"QQ\",\n    \"QRR\": \"QR\",\n    \"QSS\": \"QS\",\n    \"QTT\": \"QT\",\n    \"QU\": \"EU\",\n    \"QUU\": \"EU\",\n    \"QVV\": \"QV\",\n    \"QWW\": \"QW\",\n    \"QXX\": \"QX\",\n    \"QYY\": \"QY\",\n    \"QZZ\": \"QZ\",\n    \"REU\": \"RE\",\n    \"RH\": \"ZW\",\n    \"ROU\": \"RO\",\n    \"RUS\": \"RU\",\n    \"RWA\": \"RW\",\n    \"SAU\": \"SA\",\n    \"SCG\": \"RS ME\",\n    \"SDN\": \"SD\",\n    \"SEN\": \"SN\",\n    \"SGP\": \"SG\",\n    \"SGS\": \"GS\",\n    \"SHN\": \"SH\",\n    \"SJM\": \"SJ\",\n    \"SLB\": \"SB\",\n    \"SLE\": \"SL\",\n    \"SLV\": \"SV\",\n    \"SMR\": \"SM\",\n    \"SOM\": \"SO\",\n    \"SPM\": \"PM\",\n    \"SRB\": \"RS\",\n    \"SSD\": \"SS\",\n    \"STP\": \"ST\",\n    \"SU\": \"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ\",\n    \"SUN\": \"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ\",\n    \"SUR\": \"SR\",\n    \"SVK\": \"SK\",\n    \"SVN\": \"SI\",\n    \"SWE\": \"SE\",\n    \"SWZ\": \"SZ\",\n    \"SXM\": \"SX\",\n    \"SYC\": \"SC\",\n    \"SYR\": \"SY\",\n    \"TAA\": \"TA\",\n    \"TCA\": \"TC\",\n    \"TCD\": \"TD\",\n    \"TGO\": \"TG\",\n    \"THA\": \"TH\",\n    \"TJK\": \"TJ\",\n    \"TKL\": \"TK\",\n    \"TKM\": \"TM\",\n    \"TLS\": \"TL\",\n    \"TMP\": \"TL\",\n    \"TON\": \"TO\",\n    \"TP\": \"TL\",\n    \"TTO\": \"TT\",\n    \"TUN\": \"TN\",\n    \"TUR\": \"TR\",\n    \"TUV\": \"TV\",\n    \"TWN\": \"TW\",\n    \"TZA\": \"TZ\",\n    \"UGA\": \"UG\",\n    \"UK\": \"GB\",\n    \"UKR\": \"UA\",\n    \"UMI\": \"UM\",\n    \"URY\": \"UY\",\n    \"USA\": \"US\",\n    \"UZB\": \"UZ\",\n    \"VAT\": \"VA\",\n    \"VCT\": \"VC\",\n    \"VD\": \"VN\",\n    \"VEN\": \"VE\",\n    \"VGB\": \"VG\",\n    \"VIR\": \"VI\",\n    \"VNM\": \"VN\",\n    \"VUT\": \"VU\",\n    \"WK\": \"UM\",\n    \"WLF\": \"WF\",\n    \"WSM\": \"WS\",\n    \"XAA\": \"XA\",\n    \"XBB\": \"XB\",\n    \"XCC\": \"XC\",\n    \"XDD\": \"XD\",\n    \"XEE\": \"XE\",\n    \"XFF\": \"XF\",\n    \"XGG\": \"XG\",\n    \"XHH\": \"XH\",\n    \"XII\": \"XI\",\n    \"XJJ\": \"XJ\",\n    \"XKK\": \"XK\",\n    \"XLL\": \"XL\",\n    \"XMM\": \"XM\",\n    \"XNN\": \"XN\",\n    \"XOO\": \"XO\",\n    \"XPP\": \"XP\",\n    \"XQQ\": \"XQ\",\n    \"XRR\": \"XR\",\n    \"XSS\": \"XS\",\n    \"XTT\": \"XT\",\n    \"XUU\": \"XU\",\n    \"XVV\": \"XV\",\n    \"XWW\": \"XW\",\n    \"XXX\": \"XX\",\n    \"XYY\": \"XY\",\n    \"XZZ\": \"XZ\",\n    \"YD\": \"YE\",\n    \"YEM\": \"YE\",\n    \"YMD\": \"YE\",\n    \"YU\": \"RS ME\",\n    \"YUG\": \"RS ME\",\n    \"ZAF\": \"ZA\",\n    \"ZAR\": \"CD\",\n    \"ZMB\": \"ZM\",\n    \"ZR\": \"CD\",\n    \"ZWE\": \"ZW\",\n    \"ZZZ\": \"ZZ\"\n};\nexports.scriptAlias = {\n    \"Qaai\": \"Zinh\"\n};\nexports.variantAlias = {\n    \"heploc\": \"alalc97\",\n    \"polytoni\": \"polyton\"\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canonicalizeUnicodeLocaleId = exports.canonicalizeUnicodeLanguageId = void 0;\nvar tslib_1 = require(\"tslib\");\nvar aliases_generated_1 = require(\"./aliases.generated\");\nvar parser_1 = require(\"./parser\");\nvar likelySubtags_generated_1 = require(\"./likelySubtags.generated\");\nvar emitter_1 = require(\"./emitter\");\nfunction canonicalizeAttrs(strs) {\n    return Object.keys(strs.reduce(function (all, str) {\n        all[str.toLowerCase()] = 1;\n        return all;\n    }, {})).sort();\n}\nfunction canonicalizeKVs(arr) {\n    var all = {};\n    var result = [];\n    for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n        var kv = arr_1[_i];\n        if (kv[0] in all) {\n            continue;\n        }\n        all[kv[0]] = 1;\n        if (!kv[1] || kv[1] === 'true') {\n            result.push([kv[0].toLowerCase()]);\n        }\n        else {\n            result.push([kv[0].toLowerCase(), kv[1].toLowerCase()]);\n        }\n    }\n    return result.sort(compareKV);\n}\nfunction compareKV(t1, t2) {\n    return t1[0] < t2[0] ? -1 : t1[0] > t2[0] ? 1 : 0;\n}\nfunction compareExtension(e1, e2) {\n    return e1.type < e2.type ? -1 : e1.type > e2.type ? 1 : 0;\n}\nfunction mergeVariants(v1, v2) {\n    var result = (0, tslib_1.__spreadArray)([], v1, true);\n    for (var _i = 0, v2_1 = v2; _i < v2_1.length; _i++) {\n        var v = v2_1[_i];\n        if (v1.indexOf(v) < 0) {\n            result.push(v);\n        }\n    }\n    return result;\n}\n/**\n * CAVEAT: We don't do this section in the spec bc they have no JSON data\n * Use the bcp47 data to replace keys, types, tfields, and tvalues by their canonical forms. See Section 3.6.4 U Extension Data Files) and Section 3.7.1 T Extension Data Files. The aliases are in the alias attribute value, while the canonical is in the name attribute value. For example,\nBecause of the following bcp47 data:\n<key name=\"ms\"><type name=\"uksystem\"  alias=\"imperial\"  /></key>\nWe get the following transformation:\nen-u-ms-imperial  en-u-ms-uksystem\n * @param lang\n */\nfunction canonicalizeUnicodeLanguageId(unicodeLanguageId) {\n    /**\n     * If the language subtag matches the type attribute of a languageAlias element in Supplemental Data, replace the language subtag with the replacement value.\n     *  1. If there are additional subtags in the replacement value, add them to the result, but only if there is no corresponding subtag already in the tag.\n     *  2. Five special deprecated grandfathered codes (such as i-default) are in type attributes, and are also replaced.\n     */\n    // From https://github.com/unicode-org/icu/blob/master/icu4j/main/classes/core/src/com/ibm/icu/util/ULocale.java#L1246\n    // Try language _ variant\n    var finalLangAst = unicodeLanguageId;\n    if (unicodeLanguageId.variants.length) {\n        var replacedLang_1 = '';\n        for (var _i = 0, _a = unicodeLanguageId.variants; _i < _a.length; _i++) {\n            var variant = _a[_i];\n            if ((replacedLang_1 =\n                aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n                    lang: unicodeLanguageId.lang,\n                    variants: [variant],\n                })])) {\n                var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_1.split(parser_1.SEPARATOR));\n                finalLangAst = {\n                    lang: replacedLangAst.lang,\n                    script: finalLangAst.script || replacedLangAst.script,\n                    region: finalLangAst.region || replacedLangAst.region,\n                    variants: mergeVariants(finalLangAst.variants, replacedLangAst.variants),\n                };\n                break;\n            }\n        }\n    }\n    // language _ script _ country\n    // ug-Arab-CN -> ug-CN\n    if (finalLangAst.script && finalLangAst.region) {\n        var replacedLang_2 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n            lang: finalLangAst.lang,\n            script: finalLangAst.script,\n            region: finalLangAst.region,\n            variants: [],\n        })];\n        if (replacedLang_2) {\n            var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_2.split(parser_1.SEPARATOR));\n            finalLangAst = {\n                lang: replacedLangAst.lang,\n                script: replacedLangAst.script,\n                region: replacedLangAst.region,\n                variants: finalLangAst.variants,\n            };\n        }\n    }\n    // language _ country\n    // eg. az_AZ -> az_Latn_A\n    if (finalLangAst.region) {\n        var replacedLang_3 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n            lang: finalLangAst.lang,\n            region: finalLangAst.region,\n            variants: [],\n        })];\n        if (replacedLang_3) {\n            var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_3.split(parser_1.SEPARATOR));\n            finalLangAst = {\n                lang: replacedLangAst.lang,\n                script: finalLangAst.script || replacedLangAst.script,\n                region: replacedLangAst.region,\n                variants: finalLangAst.variants,\n            };\n        }\n    }\n    // only language\n    // e.g. twi -> ak\n    var replacedLang = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n        lang: finalLangAst.lang,\n        variants: [],\n    })];\n    if (replacedLang) {\n        var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang.split(parser_1.SEPARATOR));\n        finalLangAst = {\n            lang: replacedLangAst.lang,\n            script: finalLangAst.script || replacedLangAst.script,\n            region: finalLangAst.region || replacedLangAst.region,\n            variants: finalLangAst.variants,\n        };\n    }\n    if (finalLangAst.region) {\n        var region = finalLangAst.region.toUpperCase();\n        var regionAlias = aliases_generated_1.territoryAlias[region];\n        var replacedRegion = void 0;\n        if (regionAlias) {\n            var regions = regionAlias.split(' ');\n            replacedRegion = regions[0];\n            var likelySubtag = likelySubtags_generated_1.likelySubtags[(0, emitter_1.emitUnicodeLanguageId)({\n                lang: finalLangAst.lang,\n                script: finalLangAst.script,\n                variants: [],\n            })];\n            if (likelySubtag) {\n                var likelyRegion = (0, parser_1.parseUnicodeLanguageId)(likelySubtag.split(parser_1.SEPARATOR)).region;\n                if (likelyRegion && regions.indexOf(likelyRegion) > -1) {\n                    replacedRegion = likelyRegion;\n                }\n            }\n        }\n        if (replacedRegion) {\n            finalLangAst.region = replacedRegion;\n        }\n        finalLangAst.region = finalLangAst.region.toUpperCase();\n    }\n    if (finalLangAst.script) {\n        finalLangAst.script =\n            finalLangAst.script[0].toUpperCase() +\n                finalLangAst.script.slice(1).toLowerCase();\n        if (aliases_generated_1.scriptAlias[finalLangAst.script]) {\n            finalLangAst.script = aliases_generated_1.scriptAlias[finalLangAst.script];\n        }\n    }\n    if (finalLangAst.variants.length) {\n        for (var i = 0; i < finalLangAst.variants.length; i++) {\n            var variant = finalLangAst.variants[i].toLowerCase();\n            if (aliases_generated_1.variantAlias[variant]) {\n                var alias = aliases_generated_1.variantAlias[variant];\n                if ((0, parser_1.isUnicodeVariantSubtag)(alias)) {\n                    finalLangAst.variants[i] = alias;\n                }\n                else if ((0, parser_1.isUnicodeLanguageSubtag)(alias)) {\n                    // Yes this can happen per the spec\n                    finalLangAst.lang = alias;\n                }\n            }\n        }\n        finalLangAst.variants.sort();\n    }\n    return finalLangAst;\n}\nexports.canonicalizeUnicodeLanguageId = canonicalizeUnicodeLanguageId;\n/**\n * Canonicalize based on\n * https://www.unicode.org/reports/tr35/tr35.html#Canonical_Unicode_Locale_Identifiers\n * https://tc39.es/ecma402/#sec-canonicalizeunicodelocaleid\n * IMPORTANT: This modifies the object inline\n * @param locale\n */\nfunction canonicalizeUnicodeLocaleId(locale) {\n    locale.lang = canonicalizeUnicodeLanguageId(locale.lang);\n    if (locale.extensions) {\n        for (var _i = 0, _a = locale.extensions; _i < _a.length; _i++) {\n            var extension = _a[_i];\n            switch (extension.type) {\n                case 'u':\n                    extension.keywords = canonicalizeKVs(extension.keywords);\n                    if (extension.attributes) {\n                        extension.attributes = canonicalizeAttrs(extension.attributes);\n                    }\n                    break;\n                case 't':\n                    if (extension.lang) {\n                        extension.lang = canonicalizeUnicodeLanguageId(extension.lang);\n                    }\n                    extension.fields = canonicalizeKVs(extension.fields);\n                    break;\n                default:\n                    extension.value = extension.value.toLowerCase();\n                    break;\n            }\n        }\n        locale.extensions.sort(compareExtension);\n    }\n    return locale;\n}\nexports.canonicalizeUnicodeLocaleId = canonicalizeUnicodeLocaleId;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.emitUnicodeLocaleId = exports.emitUnicodeLanguageId = void 0;\nvar tslib_1 = require(\"tslib\");\nfunction emitUnicodeLanguageId(lang) {\n    if (!lang) {\n        return '';\n    }\n    return (0, tslib_1.__spreadArray)([lang.lang, lang.script, lang.region], (lang.variants || []), true).filter(Boolean)\n        .join('-');\n}\nexports.emitUnicodeLanguageId = emitUnicodeLanguageId;\nfunction emitUnicodeLocaleId(_a) {\n    var lang = _a.lang, extensions = _a.extensions;\n    var chunks = [emitUnicodeLanguageId(lang)];\n    for (var _i = 0, extensions_1 = extensions; _i < extensions_1.length; _i++) {\n        var ext = extensions_1[_i];\n        chunks.push(ext.type);\n        switch (ext.type) {\n            case 'u':\n                chunks.push.apply(chunks, (0, tslib_1.__spreadArray)((0, tslib_1.__spreadArray)([], ext.attributes, false), ext.keywords.reduce(function (all, kv) { return all.concat(kv); }, []), false));\n                break;\n            case 't':\n                chunks.push.apply(chunks, (0, tslib_1.__spreadArray)([emitUnicodeLanguageId(ext.lang)], ext.fields.reduce(function (all, kv) { return all.concat(kv); }, []), false));\n                break;\n            default:\n                chunks.push(ext.value);\n                break;\n        }\n    }\n    return chunks.filter(Boolean).join('-');\n}\nexports.emitUnicodeLocaleId = emitUnicodeLocaleId;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.likelySubtags = void 0;\n/* @generated */\n// prettier-ignore  \nexports.likelySubtags = {\n    \"aa\": \"aa-Latn-ET\",\n    \"aai\": \"aai-Latn-ZZ\",\n    \"aak\": \"aak-Latn-ZZ\",\n    \"aau\": \"aau-Latn-ZZ\",\n    \"ab\": \"ab-Cyrl-GE\",\n    \"abi\": \"abi-Latn-ZZ\",\n    \"abq\": \"abq-Cyrl-ZZ\",\n    \"abr\": \"abr-Latn-GH\",\n    \"abt\": \"abt-Latn-ZZ\",\n    \"aby\": \"aby-Latn-ZZ\",\n    \"acd\": \"acd-Latn-ZZ\",\n    \"ace\": \"ace-Latn-ID\",\n    \"ach\": \"ach-Latn-UG\",\n    \"ada\": \"ada-Latn-GH\",\n    \"ade\": \"ade-Latn-ZZ\",\n    \"adj\": \"adj-Latn-ZZ\",\n    \"adp\": \"adp-Tibt-BT\",\n    \"ady\": \"ady-Cyrl-RU\",\n    \"adz\": \"adz-Latn-ZZ\",\n    \"ae\": \"ae-Avst-IR\",\n    \"aeb\": \"aeb-Arab-TN\",\n    \"aey\": \"aey-Latn-ZZ\",\n    \"af\": \"af-Latn-ZA\",\n    \"agc\": \"agc-Latn-ZZ\",\n    \"agd\": \"agd-Latn-ZZ\",\n    \"agg\": \"agg-Latn-ZZ\",\n    \"agm\": \"agm-Latn-ZZ\",\n    \"ago\": \"ago-Latn-ZZ\",\n    \"agq\": \"agq-Latn-CM\",\n    \"aha\": \"aha-Latn-ZZ\",\n    \"ahl\": \"ahl-Latn-ZZ\",\n    \"aho\": \"aho-Ahom-IN\",\n    \"ajg\": \"ajg-Latn-ZZ\",\n    \"ak\": \"ak-Latn-GH\",\n    \"akk\": \"akk-Xsux-IQ\",\n    \"ala\": \"ala-Latn-ZZ\",\n    \"ali\": \"ali-Latn-ZZ\",\n    \"aln\": \"aln-Latn-XK\",\n    \"alt\": \"alt-Cyrl-RU\",\n    \"am\": \"am-Ethi-ET\",\n    \"amm\": \"amm-Latn-ZZ\",\n    \"amn\": \"amn-Latn-ZZ\",\n    \"amo\": \"amo-Latn-NG\",\n    \"amp\": \"amp-Latn-ZZ\",\n    \"an\": \"an-Latn-ES\",\n    \"anc\": \"anc-Latn-ZZ\",\n    \"ank\": \"ank-Latn-ZZ\",\n    \"ann\": \"ann-Latn-ZZ\",\n    \"any\": \"any-Latn-ZZ\",\n    \"aoj\": \"aoj-Latn-ZZ\",\n    \"aom\": \"aom-Latn-ZZ\",\n    \"aoz\": \"aoz-Latn-ID\",\n    \"apc\": \"apc-Arab-ZZ\",\n    \"apd\": \"apd-Arab-TG\",\n    \"ape\": \"ape-Latn-ZZ\",\n    \"apr\": \"apr-Latn-ZZ\",\n    \"aps\": \"aps-Latn-ZZ\",\n    \"apz\": \"apz-Latn-ZZ\",\n    \"ar\": \"ar-Arab-EG\",\n    \"arc\": \"arc-Armi-IR\",\n    \"arc-Nbat\": \"arc-Nbat-JO\",\n    \"arc-Palm\": \"arc-Palm-SY\",\n    \"arh\": \"arh-Latn-ZZ\",\n    \"arn\": \"arn-Latn-CL\",\n    \"aro\": \"aro-Latn-BO\",\n    \"arq\": \"arq-Arab-DZ\",\n    \"ars\": \"ars-Arab-SA\",\n    \"ary\": \"ary-Arab-MA\",\n    \"arz\": \"arz-Arab-EG\",\n    \"as\": \"as-Beng-IN\",\n    \"asa\": \"asa-Latn-TZ\",\n    \"ase\": \"ase-Sgnw-US\",\n    \"asg\": \"asg-Latn-ZZ\",\n    \"aso\": \"aso-Latn-ZZ\",\n    \"ast\": \"ast-Latn-ES\",\n    \"ata\": \"ata-Latn-ZZ\",\n    \"atg\": \"atg-Latn-ZZ\",\n    \"atj\": \"atj-Latn-CA\",\n    \"auy\": \"auy-Latn-ZZ\",\n    \"av\": \"av-Cyrl-RU\",\n    \"avl\": \"avl-Arab-ZZ\",\n    \"avn\": \"avn-Latn-ZZ\",\n    \"avt\": \"avt-Latn-ZZ\",\n    \"avu\": \"avu-Latn-ZZ\",\n    \"awa\": \"awa-Deva-IN\",\n    \"awb\": \"awb-Latn-ZZ\",\n    \"awo\": \"awo-Latn-ZZ\",\n    \"awx\": \"awx-Latn-ZZ\",\n    \"ay\": \"ay-Latn-BO\",\n    \"ayb\": \"ayb-Latn-ZZ\",\n    \"az\": \"az-Latn-AZ\",\n    \"az-Arab\": \"az-Arab-IR\",\n    \"az-IQ\": \"az-Arab-IQ\",\n    \"az-IR\": \"az-Arab-IR\",\n    \"az-RU\": \"az-Cyrl-RU\",\n    \"ba\": \"ba-Cyrl-RU\",\n    \"bal\": \"bal-Arab-PK\",\n    \"ban\": \"ban-Latn-ID\",\n    \"bap\": \"bap-Deva-NP\",\n    \"bar\": \"bar-Latn-AT\",\n    \"bas\": \"bas-Latn-CM\",\n    \"bav\": \"bav-Latn-ZZ\",\n    \"bax\": \"bax-Bamu-CM\",\n    \"bba\": \"bba-Latn-ZZ\",\n    \"bbb\": \"bbb-Latn-ZZ\",\n    \"bbc\": \"bbc-Latn-ID\",\n    \"bbd\": \"bbd-Latn-ZZ\",\n    \"bbj\": \"bbj-Latn-CM\",\n    \"bbp\": \"bbp-Latn-ZZ\",\n    \"bbr\": \"bbr-Latn-ZZ\",\n    \"bcf\": \"bcf-Latn-ZZ\",\n    \"bch\": \"bch-Latn-ZZ\",\n    \"bci\": \"bci-Latn-CI\",\n    \"bcm\": \"bcm-Latn-ZZ\",\n    \"bcn\": \"bcn-Latn-ZZ\",\n    \"bco\": \"bco-Latn-ZZ\",\n    \"bcq\": \"bcq-Ethi-ZZ\",\n    \"bcu\": \"bcu-Latn-ZZ\",\n    \"bdd\": \"bdd-Latn-ZZ\",\n    \"be\": \"be-Cyrl-BY\",\n    \"bef\": \"bef-Latn-ZZ\",\n    \"beh\": \"beh-Latn-ZZ\",\n    \"bej\": \"bej-Arab-SD\",\n    \"bem\": \"bem-Latn-ZM\",\n    \"bet\": \"bet-Latn-ZZ\",\n    \"bew\": \"bew-Latn-ID\",\n    \"bex\": \"bex-Latn-ZZ\",\n    \"bez\": \"bez-Latn-TZ\",\n    \"bfd\": \"bfd-Latn-CM\",\n    \"bfq\": \"bfq-Taml-IN\",\n    \"bft\": \"bft-Arab-PK\",\n    \"bfy\": \"bfy-Deva-IN\",\n    \"bg\": \"bg-Cyrl-BG\",\n    \"bgc\": \"bgc-Deva-IN\",\n    \"bgn\": \"bgn-Arab-PK\",\n    \"bgx\": \"bgx-Grek-TR\",\n    \"bhb\": \"bhb-Deva-IN\",\n    \"bhg\": \"bhg-Latn-ZZ\",\n    \"bhi\": \"bhi-Deva-IN\",\n    \"bhl\": \"bhl-Latn-ZZ\",\n    \"bho\": \"bho-Deva-IN\",\n    \"bhy\": \"bhy-Latn-ZZ\",\n    \"bi\": \"bi-Latn-VU\",\n    \"bib\": \"bib-Latn-ZZ\",\n    \"big\": \"big-Latn-ZZ\",\n    \"bik\": \"bik-Latn-PH\",\n    \"bim\": \"bim-Latn-ZZ\",\n    \"bin\": \"bin-Latn-NG\",\n    \"bio\": \"bio-Latn-ZZ\",\n    \"biq\": \"biq-Latn-ZZ\",\n    \"bjh\": \"bjh-Latn-ZZ\",\n    \"bji\": \"bji-Ethi-ZZ\",\n    \"bjj\": \"bjj-Deva-IN\",\n    \"bjn\": \"bjn-Latn-ID\",\n    \"bjo\": \"bjo-Latn-ZZ\",\n    \"bjr\": \"bjr-Latn-ZZ\",\n    \"bjt\": \"bjt-Latn-SN\",\n    \"bjz\": \"bjz-Latn-ZZ\",\n    \"bkc\": \"bkc-Latn-ZZ\",\n    \"bkm\": \"bkm-Latn-CM\",\n    \"bkq\": \"bkq-Latn-ZZ\",\n    \"bku\": \"bku-Latn-PH\",\n    \"bkv\": \"bkv-Latn-ZZ\",\n    \"blg\": \"blg-Latn-MY\",\n    \"blt\": \"blt-Tavt-VN\",\n    \"bm\": \"bm-Latn-ML\",\n    \"bmh\": \"bmh-Latn-ZZ\",\n    \"bmk\": \"bmk-Latn-ZZ\",\n    \"bmq\": \"bmq-Latn-ML\",\n    \"bmu\": \"bmu-Latn-ZZ\",\n    \"bn\": \"bn-Beng-BD\",\n    \"bng\": \"bng-Latn-ZZ\",\n    \"bnm\": \"bnm-Latn-ZZ\",\n    \"bnp\": \"bnp-Latn-ZZ\",\n    \"bo\": \"bo-Tibt-CN\",\n    \"boj\": \"boj-Latn-ZZ\",\n    \"bom\": \"bom-Latn-ZZ\",\n    \"bon\": \"bon-Latn-ZZ\",\n    \"bpy\": \"bpy-Beng-IN\",\n    \"bqc\": \"bqc-Latn-ZZ\",\n    \"bqi\": \"bqi-Arab-IR\",\n    \"bqp\": \"bqp-Latn-ZZ\",\n    \"bqv\": \"bqv-Latn-CI\",\n    \"br\": \"br-Latn-FR\",\n    \"bra\": \"bra-Deva-IN\",\n    \"brh\": \"brh-Arab-PK\",\n    \"brx\": \"brx-Deva-IN\",\n    \"brz\": \"brz-Latn-ZZ\",\n    \"bs\": \"bs-Latn-BA\",\n    \"bsj\": \"bsj-Latn-ZZ\",\n    \"bsq\": \"bsq-Bass-LR\",\n    \"bss\": \"bss-Latn-CM\",\n    \"bst\": \"bst-Ethi-ZZ\",\n    \"bto\": \"bto-Latn-PH\",\n    \"btt\": \"btt-Latn-ZZ\",\n    \"btv\": \"btv-Deva-PK\",\n    \"bua\": \"bua-Cyrl-RU\",\n    \"buc\": \"buc-Latn-YT\",\n    \"bud\": \"bud-Latn-ZZ\",\n    \"bug\": \"bug-Latn-ID\",\n    \"buk\": \"buk-Latn-ZZ\",\n    \"bum\": \"bum-Latn-CM\",\n    \"buo\": \"buo-Latn-ZZ\",\n    \"bus\": \"bus-Latn-ZZ\",\n    \"buu\": \"buu-Latn-ZZ\",\n    \"bvb\": \"bvb-Latn-GQ\",\n    \"bwd\": \"bwd-Latn-ZZ\",\n    \"bwr\": \"bwr-Latn-ZZ\",\n    \"bxh\": \"bxh-Latn-ZZ\",\n    \"bye\": \"bye-Latn-ZZ\",\n    \"byn\": \"byn-Ethi-ER\",\n    \"byr\": \"byr-Latn-ZZ\",\n    \"bys\": \"bys-Latn-ZZ\",\n    \"byv\": \"byv-Latn-CM\",\n    \"byx\": \"byx-Latn-ZZ\",\n    \"bza\": \"bza-Latn-ZZ\",\n    \"bze\": \"bze-Latn-ML\",\n    \"bzf\": \"bzf-Latn-ZZ\",\n    \"bzh\": \"bzh-Latn-ZZ\",\n    \"bzw\": \"bzw-Latn-ZZ\",\n    \"ca\": \"ca-Latn-ES\",\n    \"cad\": \"cad-Latn-US\",\n    \"can\": \"can-Latn-ZZ\",\n    \"cbj\": \"cbj-Latn-ZZ\",\n    \"cch\": \"cch-Latn-NG\",\n    \"ccp\": \"ccp-Cakm-BD\",\n    \"ce\": \"ce-Cyrl-RU\",\n    \"ceb\": \"ceb-Latn-PH\",\n    \"cfa\": \"cfa-Latn-ZZ\",\n    \"cgg\": \"cgg-Latn-UG\",\n    \"ch\": \"ch-Latn-GU\",\n    \"chk\": \"chk-Latn-FM\",\n    \"chm\": \"chm-Cyrl-RU\",\n    \"cho\": \"cho-Latn-US\",\n    \"chp\": \"chp-Latn-CA\",\n    \"chr\": \"chr-Cher-US\",\n    \"cic\": \"cic-Latn-US\",\n    \"cja\": \"cja-Arab-KH\",\n    \"cjm\": \"cjm-Cham-VN\",\n    \"cjv\": \"cjv-Latn-ZZ\",\n    \"ckb\": \"ckb-Arab-IQ\",\n    \"ckl\": \"ckl-Latn-ZZ\",\n    \"cko\": \"cko-Latn-ZZ\",\n    \"cky\": \"cky-Latn-ZZ\",\n    \"cla\": \"cla-Latn-ZZ\",\n    \"cme\": \"cme-Latn-ZZ\",\n    \"cmg\": \"cmg-Soyo-MN\",\n    \"co\": \"co-Latn-FR\",\n    \"cop\": \"cop-Copt-EG\",\n    \"cps\": \"cps-Latn-PH\",\n    \"cr\": \"cr-Cans-CA\",\n    \"crh\": \"crh-Cyrl-UA\",\n    \"crj\": \"crj-Cans-CA\",\n    \"crk\": \"crk-Cans-CA\",\n    \"crl\": \"crl-Cans-CA\",\n    \"crm\": \"crm-Cans-CA\",\n    \"crs\": \"crs-Latn-SC\",\n    \"cs\": \"cs-Latn-CZ\",\n    \"csb\": \"csb-Latn-PL\",\n    \"csw\": \"csw-Cans-CA\",\n    \"ctd\": \"ctd-Pauc-MM\",\n    \"cu\": \"cu-Cyrl-RU\",\n    \"cu-Glag\": \"cu-Glag-BG\",\n    \"cv\": \"cv-Cyrl-RU\",\n    \"cy\": \"cy-Latn-GB\",\n    \"da\": \"da-Latn-DK\",\n    \"dad\": \"dad-Latn-ZZ\",\n    \"daf\": \"daf-Latn-CI\",\n    \"dag\": \"dag-Latn-ZZ\",\n    \"dah\": \"dah-Latn-ZZ\",\n    \"dak\": \"dak-Latn-US\",\n    \"dar\": \"dar-Cyrl-RU\",\n    \"dav\": \"dav-Latn-KE\",\n    \"dbd\": \"dbd-Latn-ZZ\",\n    \"dbq\": \"dbq-Latn-ZZ\",\n    \"dcc\": \"dcc-Arab-IN\",\n    \"ddn\": \"ddn-Latn-ZZ\",\n    \"de\": \"de-Latn-DE\",\n    \"ded\": \"ded-Latn-ZZ\",\n    \"den\": \"den-Latn-CA\",\n    \"dga\": \"dga-Latn-ZZ\",\n    \"dgh\": \"dgh-Latn-ZZ\",\n    \"dgi\": \"dgi-Latn-ZZ\",\n    \"dgl\": \"dgl-Arab-ZZ\",\n    \"dgr\": \"dgr-Latn-CA\",\n    \"dgz\": \"dgz-Latn-ZZ\",\n    \"dia\": \"dia-Latn-ZZ\",\n    \"dje\": \"dje-Latn-NE\",\n    \"dmf\": \"dmf-Medf-NG\",\n    \"dnj\": \"dnj-Latn-CI\",\n    \"dob\": \"dob-Latn-ZZ\",\n    \"doi\": \"doi-Deva-IN\",\n    \"dop\": \"dop-Latn-ZZ\",\n    \"dow\": \"dow-Latn-ZZ\",\n    \"drh\": \"drh-Mong-CN\",\n    \"dri\": \"dri-Latn-ZZ\",\n    \"drs\": \"drs-Ethi-ZZ\",\n    \"dsb\": \"dsb-Latn-DE\",\n    \"dtm\": \"dtm-Latn-ML\",\n    \"dtp\": \"dtp-Latn-MY\",\n    \"dts\": \"dts-Latn-ZZ\",\n    \"dty\": \"dty-Deva-NP\",\n    \"dua\": \"dua-Latn-CM\",\n    \"duc\": \"duc-Latn-ZZ\",\n    \"dud\": \"dud-Latn-ZZ\",\n    \"dug\": \"dug-Latn-ZZ\",\n    \"dv\": \"dv-Thaa-MV\",\n    \"dva\": \"dva-Latn-ZZ\",\n    \"dww\": \"dww-Latn-ZZ\",\n    \"dyo\": \"dyo-Latn-SN\",\n    \"dyu\": \"dyu-Latn-BF\",\n    \"dz\": \"dz-Tibt-BT\",\n    \"dzg\": \"dzg-Latn-ZZ\",\n    \"ebu\": \"ebu-Latn-KE\",\n    \"ee\": \"ee-Latn-GH\",\n    \"efi\": \"efi-Latn-NG\",\n    \"egl\": \"egl-Latn-IT\",\n    \"egy\": \"egy-Egyp-EG\",\n    \"eka\": \"eka-Latn-ZZ\",\n    \"eky\": \"eky-Kali-MM\",\n    \"el\": \"el-Grek-GR\",\n    \"ema\": \"ema-Latn-ZZ\",\n    \"emi\": \"emi-Latn-ZZ\",\n    \"en\": \"en-Latn-US\",\n    \"en-Shaw\": \"en-Shaw-GB\",\n    \"enn\": \"enn-Latn-ZZ\",\n    \"enq\": \"enq-Latn-ZZ\",\n    \"eo\": \"eo-Latn-001\",\n    \"eri\": \"eri-Latn-ZZ\",\n    \"es\": \"es-Latn-ES\",\n    \"esg\": \"esg-Gonm-IN\",\n    \"esu\": \"esu-Latn-US\",\n    \"et\": \"et-Latn-EE\",\n    \"etr\": \"etr-Latn-ZZ\",\n    \"ett\": \"ett-Ital-IT\",\n    \"etu\": \"etu-Latn-ZZ\",\n    \"etx\": \"etx-Latn-ZZ\",\n    \"eu\": \"eu-Latn-ES\",\n    \"ewo\": \"ewo-Latn-CM\",\n    \"ext\": \"ext-Latn-ES\",\n    \"eza\": \"eza-Latn-ZZ\",\n    \"fa\": \"fa-Arab-IR\",\n    \"faa\": \"faa-Latn-ZZ\",\n    \"fab\": \"fab-Latn-ZZ\",\n    \"fag\": \"fag-Latn-ZZ\",\n    \"fai\": \"fai-Latn-ZZ\",\n    \"fan\": \"fan-Latn-GQ\",\n    \"ff\": \"ff-Latn-SN\",\n    \"ff-Adlm\": \"ff-Adlm-GN\",\n    \"ffi\": \"ffi-Latn-ZZ\",\n    \"ffm\": \"ffm-Latn-ML\",\n    \"fi\": \"fi-Latn-FI\",\n    \"fia\": \"fia-Arab-SD\",\n    \"fil\": \"fil-Latn-PH\",\n    \"fit\": \"fit-Latn-SE\",\n    \"fj\": \"fj-Latn-FJ\",\n    \"flr\": \"flr-Latn-ZZ\",\n    \"fmp\": \"fmp-Latn-ZZ\",\n    \"fo\": \"fo-Latn-FO\",\n    \"fod\": \"fod-Latn-ZZ\",\n    \"fon\": \"fon-Latn-BJ\",\n    \"for\": \"for-Latn-ZZ\",\n    \"fpe\": \"fpe-Latn-ZZ\",\n    \"fqs\": \"fqs-Latn-ZZ\",\n    \"fr\": \"fr-Latn-FR\",\n    \"frc\": \"frc-Latn-US\",\n    \"frp\": \"frp-Latn-FR\",\n    \"frr\": \"frr-Latn-DE\",\n    \"frs\": \"frs-Latn-DE\",\n    \"fub\": \"fub-Arab-CM\",\n    \"fud\": \"fud-Latn-WF\",\n    \"fue\": \"fue-Latn-ZZ\",\n    \"fuf\": \"fuf-Latn-GN\",\n    \"fuh\": \"fuh-Latn-ZZ\",\n    \"fuq\": \"fuq-Latn-NE\",\n    \"fur\": \"fur-Latn-IT\",\n    \"fuv\": \"fuv-Latn-NG\",\n    \"fuy\": \"fuy-Latn-ZZ\",\n    \"fvr\": \"fvr-Latn-SD\",\n    \"fy\": \"fy-Latn-NL\",\n    \"ga\": \"ga-Latn-IE\",\n    \"gaa\": \"gaa-Latn-GH\",\n    \"gaf\": \"gaf-Latn-ZZ\",\n    \"gag\": \"gag-Latn-MD\",\n    \"gah\": \"gah-Latn-ZZ\",\n    \"gaj\": \"gaj-Latn-ZZ\",\n    \"gam\": \"gam-Latn-ZZ\",\n    \"gan\": \"gan-Hans-CN\",\n    \"gaw\": \"gaw-Latn-ZZ\",\n    \"gay\": \"gay-Latn-ID\",\n    \"gba\": \"gba-Latn-ZZ\",\n    \"gbf\": \"gbf-Latn-ZZ\",\n    \"gbm\": \"gbm-Deva-IN\",\n    \"gby\": \"gby-Latn-ZZ\",\n    \"gbz\": \"gbz-Arab-IR\",\n    \"gcr\": \"gcr-Latn-GF\",\n    \"gd\": \"gd-Latn-GB\",\n    \"gde\": \"gde-Latn-ZZ\",\n    \"gdn\": \"gdn-Latn-ZZ\",\n    \"gdr\": \"gdr-Latn-ZZ\",\n    \"geb\": \"geb-Latn-ZZ\",\n    \"gej\": \"gej-Latn-ZZ\",\n    \"gel\": \"gel-Latn-ZZ\",\n    \"gez\": \"gez-Ethi-ET\",\n    \"gfk\": \"gfk-Latn-ZZ\",\n    \"ggn\": \"ggn-Deva-NP\",\n    \"ghs\": \"ghs-Latn-ZZ\",\n    \"gil\": \"gil-Latn-KI\",\n    \"gim\": \"gim-Latn-ZZ\",\n    \"gjk\": \"gjk-Arab-PK\",\n    \"gjn\": \"gjn-Latn-ZZ\",\n    \"gju\": \"gju-Arab-PK\",\n    \"gkn\": \"gkn-Latn-ZZ\",\n    \"gkp\": \"gkp-Latn-ZZ\",\n    \"gl\": \"gl-Latn-ES\",\n    \"glk\": \"glk-Arab-IR\",\n    \"gmm\": \"gmm-Latn-ZZ\",\n    \"gmv\": \"gmv-Ethi-ZZ\",\n    \"gn\": \"gn-Latn-PY\",\n    \"gnd\": \"gnd-Latn-ZZ\",\n    \"gng\": \"gng-Latn-ZZ\",\n    \"god\": \"god-Latn-ZZ\",\n    \"gof\": \"gof-Ethi-ZZ\",\n    \"goi\": \"goi-Latn-ZZ\",\n    \"gom\": \"gom-Deva-IN\",\n    \"gon\": \"gon-Telu-IN\",\n    \"gor\": \"gor-Latn-ID\",\n    \"gos\": \"gos-Latn-NL\",\n    \"got\": \"got-Goth-UA\",\n    \"grb\": \"grb-Latn-ZZ\",\n    \"grc\": \"grc-Cprt-CY\",\n    \"grc-Linb\": \"grc-Linb-GR\",\n    \"grt\": \"grt-Beng-IN\",\n    \"grw\": \"grw-Latn-ZZ\",\n    \"gsw\": \"gsw-Latn-CH\",\n    \"gu\": \"gu-Gujr-IN\",\n    \"gub\": \"gub-Latn-BR\",\n    \"guc\": \"guc-Latn-CO\",\n    \"gud\": \"gud-Latn-ZZ\",\n    \"gur\": \"gur-Latn-GH\",\n    \"guw\": \"guw-Latn-ZZ\",\n    \"gux\": \"gux-Latn-ZZ\",\n    \"guz\": \"guz-Latn-KE\",\n    \"gv\": \"gv-Latn-IM\",\n    \"gvf\": \"gvf-Latn-ZZ\",\n    \"gvr\": \"gvr-Deva-NP\",\n    \"gvs\": \"gvs-Latn-ZZ\",\n    \"gwc\": \"gwc-Arab-ZZ\",\n    \"gwi\": \"gwi-Latn-CA\",\n    \"gwt\": \"gwt-Arab-ZZ\",\n    \"gyi\": \"gyi-Latn-ZZ\",\n    \"ha\": \"ha-Latn-NG\",\n    \"ha-CM\": \"ha-Arab-CM\",\n    \"ha-SD\": \"ha-Arab-SD\",\n    \"hag\": \"hag-Latn-ZZ\",\n    \"hak\": \"hak-Hans-CN\",\n    \"ham\": \"ham-Latn-ZZ\",\n    \"haw\": \"haw-Latn-US\",\n    \"haz\": \"haz-Arab-AF\",\n    \"hbb\": \"hbb-Latn-ZZ\",\n    \"hdy\": \"hdy-Ethi-ZZ\",\n    \"he\": \"he-Hebr-IL\",\n    \"hhy\": \"hhy-Latn-ZZ\",\n    \"hi\": \"hi-Deva-IN\",\n    \"hia\": \"hia-Latn-ZZ\",\n    \"hif\": \"hif-Latn-FJ\",\n    \"hig\": \"hig-Latn-ZZ\",\n    \"hih\": \"hih-Latn-ZZ\",\n    \"hil\": \"hil-Latn-PH\",\n    \"hla\": \"hla-Latn-ZZ\",\n    \"hlu\": \"hlu-Hluw-TR\",\n    \"hmd\": \"hmd-Plrd-CN\",\n    \"hmt\": \"hmt-Latn-ZZ\",\n    \"hnd\": \"hnd-Arab-PK\",\n    \"hne\": \"hne-Deva-IN\",\n    \"hnj\": \"hnj-Hmnp-US\",\n    \"hnn\": \"hnn-Latn-PH\",\n    \"hno\": \"hno-Arab-PK\",\n    \"ho\": \"ho-Latn-PG\",\n    \"hoc\": \"hoc-Deva-IN\",\n    \"hoj\": \"hoj-Deva-IN\",\n    \"hot\": \"hot-Latn-ZZ\",\n    \"hr\": \"hr-Latn-HR\",\n    \"hsb\": \"hsb-Latn-DE\",\n    \"hsn\": \"hsn-Hans-CN\",\n    \"ht\": \"ht-Latn-HT\",\n    \"hu\": \"hu-Latn-HU\",\n    \"hui\": \"hui-Latn-ZZ\",\n    \"hy\": \"hy-Armn-AM\",\n    \"hz\": \"hz-Latn-NA\",\n    \"ia\": \"ia-Latn-001\",\n    \"ian\": \"ian-Latn-ZZ\",\n    \"iar\": \"iar-Latn-ZZ\",\n    \"iba\": \"iba-Latn-MY\",\n    \"ibb\": \"ibb-Latn-NG\",\n    \"iby\": \"iby-Latn-ZZ\",\n    \"ica\": \"ica-Latn-ZZ\",\n    \"ich\": \"ich-Latn-ZZ\",\n    \"id\": \"id-Latn-ID\",\n    \"idd\": \"idd-Latn-ZZ\",\n    \"idi\": \"idi-Latn-ZZ\",\n    \"idu\": \"idu-Latn-ZZ\",\n    \"ife\": \"ife-Latn-TG\",\n    \"ig\": \"ig-Latn-NG\",\n    \"igb\": \"igb-Latn-ZZ\",\n    \"ige\": \"ige-Latn-ZZ\",\n    \"ii\": \"ii-Yiii-CN\",\n    \"ijj\": \"ijj-Latn-ZZ\",\n    \"ik\": \"ik-Latn-US\",\n    \"ikk\": \"ikk-Latn-ZZ\",\n    \"ikt\": \"ikt-Latn-CA\",\n    \"ikw\": \"ikw-Latn-ZZ\",\n    \"ikx\": \"ikx-Latn-ZZ\",\n    \"ilo\": \"ilo-Latn-PH\",\n    \"imo\": \"imo-Latn-ZZ\",\n    \"in\": \"in-Latn-ID\",\n    \"inh\": \"inh-Cyrl-RU\",\n    \"io\": \"io-Latn-001\",\n    \"iou\": \"iou-Latn-ZZ\",\n    \"iri\": \"iri-Latn-ZZ\",\n    \"is\": \"is-Latn-IS\",\n    \"it\": \"it-Latn-IT\",\n    \"iu\": \"iu-Cans-CA\",\n    \"iw\": \"iw-Hebr-IL\",\n    \"iwm\": \"iwm-Latn-ZZ\",\n    \"iws\": \"iws-Latn-ZZ\",\n    \"izh\": \"izh-Latn-RU\",\n    \"izi\": \"izi-Latn-ZZ\",\n    \"ja\": \"ja-Jpan-JP\",\n    \"jab\": \"jab-Latn-ZZ\",\n    \"jam\": \"jam-Latn-JM\",\n    \"jar\": \"jar-Latn-ZZ\",\n    \"jbo\": \"jbo-Latn-001\",\n    \"jbu\": \"jbu-Latn-ZZ\",\n    \"jen\": \"jen-Latn-ZZ\",\n    \"jgk\": \"jgk-Latn-ZZ\",\n    \"jgo\": \"jgo-Latn-CM\",\n    \"ji\": \"ji-Hebr-UA\",\n    \"jib\": \"jib-Latn-ZZ\",\n    \"jmc\": \"jmc-Latn-TZ\",\n    \"jml\": \"jml-Deva-NP\",\n    \"jra\": \"jra-Latn-ZZ\",\n    \"jut\": \"jut-Latn-DK\",\n    \"jv\": \"jv-Latn-ID\",\n    \"jw\": \"jw-Latn-ID\",\n    \"ka\": \"ka-Geor-GE\",\n    \"kaa\": \"kaa-Cyrl-UZ\",\n    \"kab\": \"kab-Latn-DZ\",\n    \"kac\": \"kac-Latn-MM\",\n    \"kad\": \"kad-Latn-ZZ\",\n    \"kai\": \"kai-Latn-ZZ\",\n    \"kaj\": \"kaj-Latn-NG\",\n    \"kam\": \"kam-Latn-KE\",\n    \"kao\": \"kao-Latn-ML\",\n    \"kbd\": \"kbd-Cyrl-RU\",\n    \"kbm\": \"kbm-Latn-ZZ\",\n    \"kbp\": \"kbp-Latn-ZZ\",\n    \"kbq\": \"kbq-Latn-ZZ\",\n    \"kbx\": \"kbx-Latn-ZZ\",\n    \"kby\": \"kby-Arab-NE\",\n    \"kcg\": \"kcg-Latn-NG\",\n    \"kck\": \"kck-Latn-ZW\",\n    \"kcl\": \"kcl-Latn-ZZ\",\n    \"kct\": \"kct-Latn-ZZ\",\n    \"kde\": \"kde-Latn-TZ\",\n    \"kdh\": \"kdh-Latn-TG\",\n    \"kdl\": \"kdl-Latn-ZZ\",\n    \"kdt\": \"kdt-Thai-TH\",\n    \"kea\": \"kea-Latn-CV\",\n    \"ken\": \"ken-Latn-CM\",\n    \"kez\": \"kez-Latn-ZZ\",\n    \"kfo\": \"kfo-Latn-CI\",\n    \"kfr\": \"kfr-Deva-IN\",\n    \"kfy\": \"kfy-Deva-IN\",\n    \"kg\": \"kg-Latn-CD\",\n    \"kge\": \"kge-Latn-ID\",\n    \"kgf\": \"kgf-Latn-ZZ\",\n    \"kgp\": \"kgp-Latn-BR\",\n    \"kha\": \"kha-Latn-IN\",\n    \"khb\": \"khb-Talu-CN\",\n    \"khn\": \"khn-Deva-IN\",\n    \"khq\": \"khq-Latn-ML\",\n    \"khs\": \"khs-Latn-ZZ\",\n    \"kht\": \"kht-Mymr-IN\",\n    \"khw\": \"khw-Arab-PK\",\n    \"khz\": \"khz-Latn-ZZ\",\n    \"ki\": \"ki-Latn-KE\",\n    \"kij\": \"kij-Latn-ZZ\",\n    \"kiu\": \"kiu-Latn-TR\",\n    \"kiw\": \"kiw-Latn-ZZ\",\n    \"kj\": \"kj-Latn-NA\",\n    \"kjd\": \"kjd-Latn-ZZ\",\n    \"kjg\": \"kjg-Laoo-LA\",\n    \"kjs\": \"kjs-Latn-ZZ\",\n    \"kjy\": \"kjy-Latn-ZZ\",\n    \"kk\": \"kk-Cyrl-KZ\",\n    \"kk-AF\": \"kk-Arab-AF\",\n    \"kk-Arab\": \"kk-Arab-CN\",\n    \"kk-CN\": \"kk-Arab-CN\",\n    \"kk-IR\": \"kk-Arab-IR\",\n    \"kk-MN\": \"kk-Arab-MN\",\n    \"kkc\": \"kkc-Latn-ZZ\",\n    \"kkj\": \"kkj-Latn-CM\",\n    \"kl\": \"kl-Latn-GL\",\n    \"kln\": \"kln-Latn-KE\",\n    \"klq\": \"klq-Latn-ZZ\",\n    \"klt\": \"klt-Latn-ZZ\",\n    \"klx\": \"klx-Latn-ZZ\",\n    \"km\": \"km-Khmr-KH\",\n    \"kmb\": \"kmb-Latn-AO\",\n    \"kmh\": \"kmh-Latn-ZZ\",\n    \"kmo\": \"kmo-Latn-ZZ\",\n    \"kms\": \"kms-Latn-ZZ\",\n    \"kmu\": \"kmu-Latn-ZZ\",\n    \"kmw\": \"kmw-Latn-ZZ\",\n    \"kn\": \"kn-Knda-IN\",\n    \"knf\": \"knf-Latn-GW\",\n    \"knp\": \"knp-Latn-ZZ\",\n    \"ko\": \"ko-Kore-KR\",\n    \"koi\": \"koi-Cyrl-RU\",\n    \"kok\": \"kok-Deva-IN\",\n    \"kol\": \"kol-Latn-ZZ\",\n    \"kos\": \"kos-Latn-FM\",\n    \"koz\": \"koz-Latn-ZZ\",\n    \"kpe\": \"kpe-Latn-LR\",\n    \"kpf\": \"kpf-Latn-ZZ\",\n    \"kpo\": \"kpo-Latn-ZZ\",\n    \"kpr\": \"kpr-Latn-ZZ\",\n    \"kpx\": \"kpx-Latn-ZZ\",\n    \"kqb\": \"kqb-Latn-ZZ\",\n    \"kqf\": \"kqf-Latn-ZZ\",\n    \"kqs\": \"kqs-Latn-ZZ\",\n    \"kqy\": \"kqy-Ethi-ZZ\",\n    \"kr\": \"kr-Latn-ZZ\",\n    \"krc\": \"krc-Cyrl-RU\",\n    \"kri\": \"kri-Latn-SL\",\n    \"krj\": \"krj-Latn-PH\",\n    \"krl\": \"krl-Latn-RU\",\n    \"krs\": \"krs-Latn-ZZ\",\n    \"kru\": \"kru-Deva-IN\",\n    \"ks\": \"ks-Arab-IN\",\n    \"ksb\": \"ksb-Latn-TZ\",\n    \"ksd\": \"ksd-Latn-ZZ\",\n    \"ksf\": \"ksf-Latn-CM\",\n    \"ksh\": \"ksh-Latn-DE\",\n    \"ksj\": \"ksj-Latn-ZZ\",\n    \"ksr\": \"ksr-Latn-ZZ\",\n    \"ktb\": \"ktb-Ethi-ZZ\",\n    \"ktm\": \"ktm-Latn-ZZ\",\n    \"kto\": \"kto-Latn-ZZ\",\n    \"ktr\": \"ktr-Latn-MY\",\n    \"ku\": \"ku-Latn-TR\",\n    \"ku-Arab\": \"ku-Arab-IQ\",\n    \"ku-LB\": \"ku-Arab-LB\",\n    \"ku-Yezi\": \"ku-Yezi-GE\",\n    \"kub\": \"kub-Latn-ZZ\",\n    \"kud\": \"kud-Latn-ZZ\",\n    \"kue\": \"kue-Latn-ZZ\",\n    \"kuj\": \"kuj-Latn-ZZ\",\n    \"kum\": \"kum-Cyrl-RU\",\n    \"kun\": \"kun-Latn-ZZ\",\n    \"kup\": \"kup-Latn-ZZ\",\n    \"kus\": \"kus-Latn-ZZ\",\n    \"kv\": \"kv-Cyrl-RU\",\n    \"kvg\": \"kvg-Latn-ZZ\",\n    \"kvr\": \"kvr-Latn-ID\",\n    \"kvx\": \"kvx-Arab-PK\",\n    \"kw\": \"kw-Latn-GB\",\n    \"kwj\": \"kwj-Latn-ZZ\",\n    \"kwo\": \"kwo-Latn-ZZ\",\n    \"kwq\": \"kwq-Latn-ZZ\",\n    \"kxa\": \"kxa-Latn-ZZ\",\n    \"kxc\": \"kxc-Ethi-ZZ\",\n    \"kxe\": \"kxe-Latn-ZZ\",\n    \"kxl\": \"kxl-Deva-IN\",\n    \"kxm\": \"kxm-Thai-TH\",\n    \"kxp\": \"kxp-Arab-PK\",\n    \"kxw\": \"kxw-Latn-ZZ\",\n    \"kxz\": \"kxz-Latn-ZZ\",\n    \"ky\": \"ky-Cyrl-KG\",\n    \"ky-Arab\": \"ky-Arab-CN\",\n    \"ky-CN\": \"ky-Arab-CN\",\n    \"ky-Latn\": \"ky-Latn-TR\",\n    \"ky-TR\": \"ky-Latn-TR\",\n    \"kye\": \"kye-Latn-ZZ\",\n    \"kyx\": \"kyx-Latn-ZZ\",\n    \"kzh\": \"kzh-Arab-ZZ\",\n    \"kzj\": \"kzj-Latn-MY\",\n    \"kzr\": \"kzr-Latn-ZZ\",\n    \"kzt\": \"kzt-Latn-MY\",\n    \"la\": \"la-Latn-VA\",\n    \"lab\": \"lab-Lina-GR\",\n    \"lad\": \"lad-Hebr-IL\",\n    \"lag\": \"lag-Latn-TZ\",\n    \"lah\": \"lah-Arab-PK\",\n    \"laj\": \"laj-Latn-UG\",\n    \"las\": \"las-Latn-ZZ\",\n    \"lb\": \"lb-Latn-LU\",\n    \"lbe\": \"lbe-Cyrl-RU\",\n    \"lbu\": \"lbu-Latn-ZZ\",\n    \"lbw\": \"lbw-Latn-ID\",\n    \"lcm\": \"lcm-Latn-ZZ\",\n    \"lcp\": \"lcp-Thai-CN\",\n    \"ldb\": \"ldb-Latn-ZZ\",\n    \"led\": \"led-Latn-ZZ\",\n    \"lee\": \"lee-Latn-ZZ\",\n    \"lem\": \"lem-Latn-ZZ\",\n    \"lep\": \"lep-Lepc-IN\",\n    \"leq\": \"leq-Latn-ZZ\",\n    \"leu\": \"leu-Latn-ZZ\",\n    \"lez\": \"lez-Cyrl-RU\",\n    \"lg\": \"lg-Latn-UG\",\n    \"lgg\": \"lgg-Latn-ZZ\",\n    \"li\": \"li-Latn-NL\",\n    \"lia\": \"lia-Latn-ZZ\",\n    \"lid\": \"lid-Latn-ZZ\",\n    \"lif\": \"lif-Deva-NP\",\n    \"lif-Limb\": \"lif-Limb-IN\",\n    \"lig\": \"lig-Latn-ZZ\",\n    \"lih\": \"lih-Latn-ZZ\",\n    \"lij\": \"lij-Latn-IT\",\n    \"lis\": \"lis-Lisu-CN\",\n    \"ljp\": \"ljp-Latn-ID\",\n    \"lki\": \"lki-Arab-IR\",\n    \"lkt\": \"lkt-Latn-US\",\n    \"lle\": \"lle-Latn-ZZ\",\n    \"lln\": \"lln-Latn-ZZ\",\n    \"lmn\": \"lmn-Telu-IN\",\n    \"lmo\": \"lmo-Latn-IT\",\n    \"lmp\": \"lmp-Latn-ZZ\",\n    \"ln\": \"ln-Latn-CD\",\n    \"lns\": \"lns-Latn-ZZ\",\n    \"lnu\": \"lnu-Latn-ZZ\",\n    \"lo\": \"lo-Laoo-LA\",\n    \"loj\": \"loj-Latn-ZZ\",\n    \"lok\": \"lok-Latn-ZZ\",\n    \"lol\": \"lol-Latn-CD\",\n    \"lor\": \"lor-Latn-ZZ\",\n    \"los\": \"los-Latn-ZZ\",\n    \"loz\": \"loz-Latn-ZM\",\n    \"lrc\": \"lrc-Arab-IR\",\n    \"lt\": \"lt-Latn-LT\",\n    \"ltg\": \"ltg-Latn-LV\",\n    \"lu\": \"lu-Latn-CD\",\n    \"lua\": \"lua-Latn-CD\",\n    \"luo\": \"luo-Latn-KE\",\n    \"luy\": \"luy-Latn-KE\",\n    \"luz\": \"luz-Arab-IR\",\n    \"lv\": \"lv-Latn-LV\",\n    \"lwl\": \"lwl-Thai-TH\",\n    \"lzh\": \"lzh-Hans-CN\",\n    \"lzz\": \"lzz-Latn-TR\",\n    \"mad\": \"mad-Latn-ID\",\n    \"maf\": \"maf-Latn-CM\",\n    \"mag\": \"mag-Deva-IN\",\n    \"mai\": \"mai-Deva-IN\",\n    \"mak\": \"mak-Latn-ID\",\n    \"man\": \"man-Latn-GM\",\n    \"man-GN\": \"man-Nkoo-GN\",\n    \"man-Nkoo\": \"man-Nkoo-GN\",\n    \"mas\": \"mas-Latn-KE\",\n    \"maw\": \"maw-Latn-ZZ\",\n    \"maz\": \"maz-Latn-MX\",\n    \"mbh\": \"mbh-Latn-ZZ\",\n    \"mbo\": \"mbo-Latn-ZZ\",\n    \"mbq\": \"mbq-Latn-ZZ\",\n    \"mbu\": \"mbu-Latn-ZZ\",\n    \"mbw\": \"mbw-Latn-ZZ\",\n    \"mci\": \"mci-Latn-ZZ\",\n    \"mcp\": \"mcp-Latn-ZZ\",\n    \"mcq\": \"mcq-Latn-ZZ\",\n    \"mcr\": \"mcr-Latn-ZZ\",\n    \"mcu\": \"mcu-Latn-ZZ\",\n    \"mda\": \"mda-Latn-ZZ\",\n    \"mde\": \"mde-Arab-ZZ\",\n    \"mdf\": \"mdf-Cyrl-RU\",\n    \"mdh\": \"mdh-Latn-PH\",\n    \"mdj\": \"mdj-Latn-ZZ\",\n    \"mdr\": \"mdr-Latn-ID\",\n    \"mdx\": \"mdx-Ethi-ZZ\",\n    \"med\": \"med-Latn-ZZ\",\n    \"mee\": \"mee-Latn-ZZ\",\n    \"mek\": \"mek-Latn-ZZ\",\n    \"men\": \"men-Latn-SL\",\n    \"mer\": \"mer-Latn-KE\",\n    \"met\": \"met-Latn-ZZ\",\n    \"meu\": \"meu-Latn-ZZ\",\n    \"mfa\": \"mfa-Arab-TH\",\n    \"mfe\": \"mfe-Latn-MU\",\n    \"mfn\": \"mfn-Latn-ZZ\",\n    \"mfo\": \"mfo-Latn-ZZ\",\n    \"mfq\": \"mfq-Latn-ZZ\",\n    \"mg\": \"mg-Latn-MG\",\n    \"mgh\": \"mgh-Latn-MZ\",\n    \"mgl\": \"mgl-Latn-ZZ\",\n    \"mgo\": \"mgo-Latn-CM\",\n    \"mgp\": \"mgp-Deva-NP\",\n    \"mgy\": \"mgy-Latn-TZ\",\n    \"mh\": \"mh-Latn-MH\",\n    \"mhi\": \"mhi-Latn-ZZ\",\n    \"mhl\": \"mhl-Latn-ZZ\",\n    \"mi\": \"mi-Latn-NZ\",\n    \"mif\": \"mif-Latn-ZZ\",\n    \"min\": \"min-Latn-ID\",\n    \"miw\": \"miw-Latn-ZZ\",\n    \"mk\": \"mk-Cyrl-MK\",\n    \"mki\": \"mki-Arab-ZZ\",\n    \"mkl\": \"mkl-Latn-ZZ\",\n    \"mkp\": \"mkp-Latn-ZZ\",\n    \"mkw\": \"mkw-Latn-ZZ\",\n    \"ml\": \"ml-Mlym-IN\",\n    \"mle\": \"mle-Latn-ZZ\",\n    \"mlp\": \"mlp-Latn-ZZ\",\n    \"mls\": \"mls-Latn-SD\",\n    \"mmo\": \"mmo-Latn-ZZ\",\n    \"mmu\": \"mmu-Latn-ZZ\",\n    \"mmx\": \"mmx-Latn-ZZ\",\n    \"mn\": \"mn-Cyrl-MN\",\n    \"mn-CN\": \"mn-Mong-CN\",\n    \"mn-Mong\": \"mn-Mong-CN\",\n    \"mna\": \"mna-Latn-ZZ\",\n    \"mnf\": \"mnf-Latn-ZZ\",\n    \"mni\": \"mni-Beng-IN\",\n    \"mnw\": \"mnw-Mymr-MM\",\n    \"mo\": \"mo-Latn-RO\",\n    \"moa\": \"moa-Latn-ZZ\",\n    \"moe\": \"moe-Latn-CA\",\n    \"moh\": \"moh-Latn-CA\",\n    \"mos\": \"mos-Latn-BF\",\n    \"mox\": \"mox-Latn-ZZ\",\n    \"mpp\": \"mpp-Latn-ZZ\",\n    \"mps\": \"mps-Latn-ZZ\",\n    \"mpt\": \"mpt-Latn-ZZ\",\n    \"mpx\": \"mpx-Latn-ZZ\",\n    \"mql\": \"mql-Latn-ZZ\",\n    \"mr\": \"mr-Deva-IN\",\n    \"mrd\": \"mrd-Deva-NP\",\n    \"mrj\": \"mrj-Cyrl-RU\",\n    \"mro\": \"mro-Mroo-BD\",\n    \"ms\": \"ms-Latn-MY\",\n    \"ms-CC\": \"ms-Arab-CC\",\n    \"mt\": \"mt-Latn-MT\",\n    \"mtc\": \"mtc-Latn-ZZ\",\n    \"mtf\": \"mtf-Latn-ZZ\",\n    \"mti\": \"mti-Latn-ZZ\",\n    \"mtr\": \"mtr-Deva-IN\",\n    \"mua\": \"mua-Latn-CM\",\n    \"mur\": \"mur-Latn-ZZ\",\n    \"mus\": \"mus-Latn-US\",\n    \"mva\": \"mva-Latn-ZZ\",\n    \"mvn\": \"mvn-Latn-ZZ\",\n    \"mvy\": \"mvy-Arab-PK\",\n    \"mwk\": \"mwk-Latn-ML\",\n    \"mwr\": \"mwr-Deva-IN\",\n    \"mwv\": \"mwv-Latn-ID\",\n    \"mww\": \"mww-Hmnp-US\",\n    \"mxc\": \"mxc-Latn-ZW\",\n    \"mxm\": \"mxm-Latn-ZZ\",\n    \"my\": \"my-Mymr-MM\",\n    \"myk\": \"myk-Latn-ZZ\",\n    \"mym\": \"mym-Ethi-ZZ\",\n    \"myv\": \"myv-Cyrl-RU\",\n    \"myw\": \"myw-Latn-ZZ\",\n    \"myx\": \"myx-Latn-UG\",\n    \"myz\": \"myz-Mand-IR\",\n    \"mzk\": \"mzk-Latn-ZZ\",\n    \"mzm\": \"mzm-Latn-ZZ\",\n    \"mzn\": \"mzn-Arab-IR\",\n    \"mzp\": \"mzp-Latn-ZZ\",\n    \"mzw\": \"mzw-Latn-ZZ\",\n    \"mzz\": \"mzz-Latn-ZZ\",\n    \"na\": \"na-Latn-NR\",\n    \"nac\": \"nac-Latn-ZZ\",\n    \"naf\": \"naf-Latn-ZZ\",\n    \"nak\": \"nak-Latn-ZZ\",\n    \"nan\": \"nan-Hans-CN\",\n    \"nap\": \"nap-Latn-IT\",\n    \"naq\": \"naq-Latn-NA\",\n    \"nas\": \"nas-Latn-ZZ\",\n    \"nb\": \"nb-Latn-NO\",\n    \"nca\": \"nca-Latn-ZZ\",\n    \"nce\": \"nce-Latn-ZZ\",\n    \"ncf\": \"ncf-Latn-ZZ\",\n    \"nch\": \"nch-Latn-MX\",\n    \"nco\": \"nco-Latn-ZZ\",\n    \"ncu\": \"ncu-Latn-ZZ\",\n    \"nd\": \"nd-Latn-ZW\",\n    \"ndc\": \"ndc-Latn-MZ\",\n    \"nds\": \"nds-Latn-DE\",\n    \"ne\": \"ne-Deva-NP\",\n    \"neb\": \"neb-Latn-ZZ\",\n    \"new\": \"new-Deva-NP\",\n    \"nex\": \"nex-Latn-ZZ\",\n    \"nfr\": \"nfr-Latn-ZZ\",\n    \"ng\": \"ng-Latn-NA\",\n    \"nga\": \"nga-Latn-ZZ\",\n    \"ngb\": \"ngb-Latn-ZZ\",\n    \"ngl\": \"ngl-Latn-MZ\",\n    \"nhb\": \"nhb-Latn-ZZ\",\n    \"nhe\": \"nhe-Latn-MX\",\n    \"nhw\": \"nhw-Latn-MX\",\n    \"nif\": \"nif-Latn-ZZ\",\n    \"nii\": \"nii-Latn-ZZ\",\n    \"nij\": \"nij-Latn-ID\",\n    \"nin\": \"nin-Latn-ZZ\",\n    \"niu\": \"niu-Latn-NU\",\n    \"niy\": \"niy-Latn-ZZ\",\n    \"niz\": \"niz-Latn-ZZ\",\n    \"njo\": \"njo-Latn-IN\",\n    \"nkg\": \"nkg-Latn-ZZ\",\n    \"nko\": \"nko-Latn-ZZ\",\n    \"nl\": \"nl-Latn-NL\",\n    \"nmg\": \"nmg-Latn-CM\",\n    \"nmz\": \"nmz-Latn-ZZ\",\n    \"nn\": \"nn-Latn-NO\",\n    \"nnf\": \"nnf-Latn-ZZ\",\n    \"nnh\": \"nnh-Latn-CM\",\n    \"nnk\": \"nnk-Latn-ZZ\",\n    \"nnm\": \"nnm-Latn-ZZ\",\n    \"nnp\": \"nnp-Wcho-IN\",\n    \"no\": \"no-Latn-NO\",\n    \"nod\": \"nod-Lana-TH\",\n    \"noe\": \"noe-Deva-IN\",\n    \"non\": \"non-Runr-SE\",\n    \"nop\": \"nop-Latn-ZZ\",\n    \"nou\": \"nou-Latn-ZZ\",\n    \"nqo\": \"nqo-Nkoo-GN\",\n    \"nr\": \"nr-Latn-ZA\",\n    \"nrb\": \"nrb-Latn-ZZ\",\n    \"nsk\": \"nsk-Cans-CA\",\n    \"nsn\": \"nsn-Latn-ZZ\",\n    \"nso\": \"nso-Latn-ZA\",\n    \"nss\": \"nss-Latn-ZZ\",\n    \"nst\": \"nst-Tnsa-IN\",\n    \"ntm\": \"ntm-Latn-ZZ\",\n    \"ntr\": \"ntr-Latn-ZZ\",\n    \"nui\": \"nui-Latn-ZZ\",\n    \"nup\": \"nup-Latn-ZZ\",\n    \"nus\": \"nus-Latn-SS\",\n    \"nuv\": \"nuv-Latn-ZZ\",\n    \"nux\": \"nux-Latn-ZZ\",\n    \"nv\": \"nv-Latn-US\",\n    \"nwb\": \"nwb-Latn-ZZ\",\n    \"nxq\": \"nxq-Latn-CN\",\n    \"nxr\": \"nxr-Latn-ZZ\",\n    \"ny\": \"ny-Latn-MW\",\n    \"nym\": \"nym-Latn-TZ\",\n    \"nyn\": \"nyn-Latn-UG\",\n    \"nzi\": \"nzi-Latn-GH\",\n    \"oc\": \"oc-Latn-FR\",\n    \"ogc\": \"ogc-Latn-ZZ\",\n    \"okr\": \"okr-Latn-ZZ\",\n    \"okv\": \"okv-Latn-ZZ\",\n    \"om\": \"om-Latn-ET\",\n    \"ong\": \"ong-Latn-ZZ\",\n    \"onn\": \"onn-Latn-ZZ\",\n    \"ons\": \"ons-Latn-ZZ\",\n    \"opm\": \"opm-Latn-ZZ\",\n    \"or\": \"or-Orya-IN\",\n    \"oro\": \"oro-Latn-ZZ\",\n    \"oru\": \"oru-Arab-ZZ\",\n    \"os\": \"os-Cyrl-GE\",\n    \"osa\": \"osa-Osge-US\",\n    \"ota\": \"ota-Arab-ZZ\",\n    \"otk\": \"otk-Orkh-MN\",\n    \"oui\": \"oui-Ougr-143\",\n    \"ozm\": \"ozm-Latn-ZZ\",\n    \"pa\": \"pa-Guru-IN\",\n    \"pa-Arab\": \"pa-Arab-PK\",\n    \"pa-PK\": \"pa-Arab-PK\",\n    \"pag\": \"pag-Latn-PH\",\n    \"pal\": \"pal-Phli-IR\",\n    \"pal-Phlp\": \"pal-Phlp-CN\",\n    \"pam\": \"pam-Latn-PH\",\n    \"pap\": \"pap-Latn-AW\",\n    \"pau\": \"pau-Latn-PW\",\n    \"pbi\": \"pbi-Latn-ZZ\",\n    \"pcd\": \"pcd-Latn-FR\",\n    \"pcm\": \"pcm-Latn-NG\",\n    \"pdc\": \"pdc-Latn-US\",\n    \"pdt\": \"pdt-Latn-CA\",\n    \"ped\": \"ped-Latn-ZZ\",\n    \"peo\": \"peo-Xpeo-IR\",\n    \"pex\": \"pex-Latn-ZZ\",\n    \"pfl\": \"pfl-Latn-DE\",\n    \"phl\": \"phl-Arab-ZZ\",\n    \"phn\": \"phn-Phnx-LB\",\n    \"pil\": \"pil-Latn-ZZ\",\n    \"pip\": \"pip-Latn-ZZ\",\n    \"pka\": \"pka-Brah-IN\",\n    \"pko\": \"pko-Latn-KE\",\n    \"pl\": \"pl-Latn-PL\",\n    \"pla\": \"pla-Latn-ZZ\",\n    \"pms\": \"pms-Latn-IT\",\n    \"png\": \"png-Latn-ZZ\",\n    \"pnn\": \"pnn-Latn-ZZ\",\n    \"pnt\": \"pnt-Grek-GR\",\n    \"pon\": \"pon-Latn-FM\",\n    \"ppa\": \"ppa-Deva-IN\",\n    \"ppo\": \"ppo-Latn-ZZ\",\n    \"pra\": \"pra-Khar-PK\",\n    \"prd\": \"prd-Arab-IR\",\n    \"prg\": \"prg-Latn-001\",\n    \"ps\": \"ps-Arab-AF\",\n    \"pss\": \"pss-Latn-ZZ\",\n    \"pt\": \"pt-Latn-BR\",\n    \"ptp\": \"ptp-Latn-ZZ\",\n    \"puu\": \"puu-Latn-GA\",\n    \"pwa\": \"pwa-Latn-ZZ\",\n    \"qu\": \"qu-Latn-PE\",\n    \"quc\": \"quc-Latn-GT\",\n    \"qug\": \"qug-Latn-EC\",\n    \"rai\": \"rai-Latn-ZZ\",\n    \"raj\": \"raj-Deva-IN\",\n    \"rao\": \"rao-Latn-ZZ\",\n    \"rcf\": \"rcf-Latn-RE\",\n    \"rej\": \"rej-Latn-ID\",\n    \"rel\": \"rel-Latn-ZZ\",\n    \"res\": \"res-Latn-ZZ\",\n    \"rgn\": \"rgn-Latn-IT\",\n    \"rhg\": \"rhg-Rohg-MM\",\n    \"ria\": \"ria-Latn-IN\",\n    \"rif\": \"rif-Tfng-MA\",\n    \"rif-NL\": \"rif-Latn-NL\",\n    \"rjs\": \"rjs-Deva-NP\",\n    \"rkt\": \"rkt-Beng-BD\",\n    \"rm\": \"rm-Latn-CH\",\n    \"rmf\": \"rmf-Latn-FI\",\n    \"rmo\": \"rmo-Latn-CH\",\n    \"rmt\": \"rmt-Arab-IR\",\n    \"rmu\": \"rmu-Latn-SE\",\n    \"rn\": \"rn-Latn-BI\",\n    \"rna\": \"rna-Latn-ZZ\",\n    \"rng\": \"rng-Latn-MZ\",\n    \"ro\": \"ro-Latn-RO\",\n    \"rob\": \"rob-Latn-ID\",\n    \"rof\": \"rof-Latn-TZ\",\n    \"roo\": \"roo-Latn-ZZ\",\n    \"rro\": \"rro-Latn-ZZ\",\n    \"rtm\": \"rtm-Latn-FJ\",\n    \"ru\": \"ru-Cyrl-RU\",\n    \"rue\": \"rue-Cyrl-UA\",\n    \"rug\": \"rug-Latn-SB\",\n    \"rw\": \"rw-Latn-RW\",\n    \"rwk\": \"rwk-Latn-TZ\",\n    \"rwo\": \"rwo-Latn-ZZ\",\n    \"ryu\": \"ryu-Kana-JP\",\n    \"sa\": \"sa-Deva-IN\",\n    \"saf\": \"saf-Latn-GH\",\n    \"sah\": \"sah-Cyrl-RU\",\n    \"saq\": \"saq-Latn-KE\",\n    \"sas\": \"sas-Latn-ID\",\n    \"sat\": \"sat-Olck-IN\",\n    \"sav\": \"sav-Latn-SN\",\n    \"saz\": \"saz-Saur-IN\",\n    \"sba\": \"sba-Latn-ZZ\",\n    \"sbe\": \"sbe-Latn-ZZ\",\n    \"sbp\": \"sbp-Latn-TZ\",\n    \"sc\": \"sc-Latn-IT\",\n    \"sck\": \"sck-Deva-IN\",\n    \"scl\": \"scl-Arab-ZZ\",\n    \"scn\": \"scn-Latn-IT\",\n    \"sco\": \"sco-Latn-GB\",\n    \"scs\": \"scs-Latn-CA\",\n    \"sd\": \"sd-Arab-PK\",\n    \"sd-Deva\": \"sd-Deva-IN\",\n    \"sd-Khoj\": \"sd-Khoj-IN\",\n    \"sd-Sind\": \"sd-Sind-IN\",\n    \"sdc\": \"sdc-Latn-IT\",\n    \"sdh\": \"sdh-Arab-IR\",\n    \"se\": \"se-Latn-NO\",\n    \"sef\": \"sef-Latn-CI\",\n    \"seh\": \"seh-Latn-MZ\",\n    \"sei\": \"sei-Latn-MX\",\n    \"ses\": \"ses-Latn-ML\",\n    \"sg\": \"sg-Latn-CF\",\n    \"sga\": \"sga-Ogam-IE\",\n    \"sgs\": \"sgs-Latn-LT\",\n    \"sgw\": \"sgw-Ethi-ZZ\",\n    \"sgz\": \"sgz-Latn-ZZ\",\n    \"shi\": \"shi-Tfng-MA\",\n    \"shk\": \"shk-Latn-ZZ\",\n    \"shn\": \"shn-Mymr-MM\",\n    \"shu\": \"shu-Arab-ZZ\",\n    \"si\": \"si-Sinh-LK\",\n    \"sid\": \"sid-Latn-ET\",\n    \"sig\": \"sig-Latn-ZZ\",\n    \"sil\": \"sil-Latn-ZZ\",\n    \"sim\": \"sim-Latn-ZZ\",\n    \"sjr\": \"sjr-Latn-ZZ\",\n    \"sk\": \"sk-Latn-SK\",\n    \"skc\": \"skc-Latn-ZZ\",\n    \"skr\": \"skr-Arab-PK\",\n    \"sks\": \"sks-Latn-ZZ\",\n    \"sl\": \"sl-Latn-SI\",\n    \"sld\": \"sld-Latn-ZZ\",\n    \"sli\": \"sli-Latn-PL\",\n    \"sll\": \"sll-Latn-ZZ\",\n    \"sly\": \"sly-Latn-ID\",\n    \"sm\": \"sm-Latn-WS\",\n    \"sma\": \"sma-Latn-SE\",\n    \"smj\": \"smj-Latn-SE\",\n    \"smn\": \"smn-Latn-FI\",\n    \"smp\": \"smp-Samr-IL\",\n    \"smq\": \"smq-Latn-ZZ\",\n    \"sms\": \"sms-Latn-FI\",\n    \"sn\": \"sn-Latn-ZW\",\n    \"snc\": \"snc-Latn-ZZ\",\n    \"snk\": \"snk-Latn-ML\",\n    \"snp\": \"snp-Latn-ZZ\",\n    \"snx\": \"snx-Latn-ZZ\",\n    \"sny\": \"sny-Latn-ZZ\",\n    \"so\": \"so-Latn-SO\",\n    \"sog\": \"sog-Sogd-UZ\",\n    \"sok\": \"sok-Latn-ZZ\",\n    \"soq\": \"soq-Latn-ZZ\",\n    \"sou\": \"sou-Thai-TH\",\n    \"soy\": \"soy-Latn-ZZ\",\n    \"spd\": \"spd-Latn-ZZ\",\n    \"spl\": \"spl-Latn-ZZ\",\n    \"sps\": \"sps-Latn-ZZ\",\n    \"sq\": \"sq-Latn-AL\",\n    \"sr\": \"sr-Cyrl-RS\",\n    \"sr-ME\": \"sr-Latn-ME\",\n    \"sr-RO\": \"sr-Latn-RO\",\n    \"sr-RU\": \"sr-Latn-RU\",\n    \"sr-TR\": \"sr-Latn-TR\",\n    \"srb\": \"srb-Sora-IN\",\n    \"srn\": \"srn-Latn-SR\",\n    \"srr\": \"srr-Latn-SN\",\n    \"srx\": \"srx-Deva-IN\",\n    \"ss\": \"ss-Latn-ZA\",\n    \"ssd\": \"ssd-Latn-ZZ\",\n    \"ssg\": \"ssg-Latn-ZZ\",\n    \"ssy\": \"ssy-Latn-ER\",\n    \"st\": \"st-Latn-ZA\",\n    \"stk\": \"stk-Latn-ZZ\",\n    \"stq\": \"stq-Latn-DE\",\n    \"su\": \"su-Latn-ID\",\n    \"sua\": \"sua-Latn-ZZ\",\n    \"sue\": \"sue-Latn-ZZ\",\n    \"suk\": \"suk-Latn-TZ\",\n    \"sur\": \"sur-Latn-ZZ\",\n    \"sus\": \"sus-Latn-GN\",\n    \"sv\": \"sv-Latn-SE\",\n    \"sw\": \"sw-Latn-TZ\",\n    \"swb\": \"swb-Arab-YT\",\n    \"swc\": \"swc-Latn-CD\",\n    \"swg\": \"swg-Latn-DE\",\n    \"swp\": \"swp-Latn-ZZ\",\n    \"swv\": \"swv-Deva-IN\",\n    \"sxn\": \"sxn-Latn-ID\",\n    \"sxw\": \"sxw-Latn-ZZ\",\n    \"syl\": \"syl-Beng-BD\",\n    \"syr\": \"syr-Syrc-IQ\",\n    \"szl\": \"szl-Latn-PL\",\n    \"ta\": \"ta-Taml-IN\",\n    \"taj\": \"taj-Deva-NP\",\n    \"tal\": \"tal-Latn-ZZ\",\n    \"tan\": \"tan-Latn-ZZ\",\n    \"taq\": \"taq-Latn-ZZ\",\n    \"tbc\": \"tbc-Latn-ZZ\",\n    \"tbd\": \"tbd-Latn-ZZ\",\n    \"tbf\": \"tbf-Latn-ZZ\",\n    \"tbg\": \"tbg-Latn-ZZ\",\n    \"tbo\": \"tbo-Latn-ZZ\",\n    \"tbw\": \"tbw-Latn-PH\",\n    \"tbz\": \"tbz-Latn-ZZ\",\n    \"tci\": \"tci-Latn-ZZ\",\n    \"tcy\": \"tcy-Knda-IN\",\n    \"tdd\": \"tdd-Tale-CN\",\n    \"tdg\": \"tdg-Deva-NP\",\n    \"tdh\": \"tdh-Deva-NP\",\n    \"tdu\": \"tdu-Latn-MY\",\n    \"te\": \"te-Telu-IN\",\n    \"ted\": \"ted-Latn-ZZ\",\n    \"tem\": \"tem-Latn-SL\",\n    \"teo\": \"teo-Latn-UG\",\n    \"tet\": \"tet-Latn-TL\",\n    \"tfi\": \"tfi-Latn-ZZ\",\n    \"tg\": \"tg-Cyrl-TJ\",\n    \"tg-Arab\": \"tg-Arab-PK\",\n    \"tg-PK\": \"tg-Arab-PK\",\n    \"tgc\": \"tgc-Latn-ZZ\",\n    \"tgo\": \"tgo-Latn-ZZ\",\n    \"tgu\": \"tgu-Latn-ZZ\",\n    \"th\": \"th-Thai-TH\",\n    \"thl\": \"thl-Deva-NP\",\n    \"thq\": \"thq-Deva-NP\",\n    \"thr\": \"thr-Deva-NP\",\n    \"ti\": \"ti-Ethi-ET\",\n    \"tif\": \"tif-Latn-ZZ\",\n    \"tig\": \"tig-Ethi-ER\",\n    \"tik\": \"tik-Latn-ZZ\",\n    \"tim\": \"tim-Latn-ZZ\",\n    \"tio\": \"tio-Latn-ZZ\",\n    \"tiv\": \"tiv-Latn-NG\",\n    \"tk\": \"tk-Latn-TM\",\n    \"tkl\": \"tkl-Latn-TK\",\n    \"tkr\": \"tkr-Latn-AZ\",\n    \"tkt\": \"tkt-Deva-NP\",\n    \"tl\": \"tl-Latn-PH\",\n    \"tlf\": \"tlf-Latn-ZZ\",\n    \"tlx\": \"tlx-Latn-ZZ\",\n    \"tly\": \"tly-Latn-AZ\",\n    \"tmh\": \"tmh-Latn-NE\",\n    \"tmy\": \"tmy-Latn-ZZ\",\n    \"tn\": \"tn-Latn-ZA\",\n    \"tnh\": \"tnh-Latn-ZZ\",\n    \"to\": \"to-Latn-TO\",\n    \"tof\": \"tof-Latn-ZZ\",\n    \"tog\": \"tog-Latn-MW\",\n    \"toq\": \"toq-Latn-ZZ\",\n    \"tpi\": \"tpi-Latn-PG\",\n    \"tpm\": \"tpm-Latn-ZZ\",\n    \"tpz\": \"tpz-Latn-ZZ\",\n    \"tqo\": \"tqo-Latn-ZZ\",\n    \"tr\": \"tr-Latn-TR\",\n    \"tru\": \"tru-Latn-TR\",\n    \"trv\": \"trv-Latn-TW\",\n    \"trw\": \"trw-Arab-PK\",\n    \"ts\": \"ts-Latn-ZA\",\n    \"tsd\": \"tsd-Grek-GR\",\n    \"tsf\": \"tsf-Deva-NP\",\n    \"tsg\": \"tsg-Latn-PH\",\n    \"tsj\": \"tsj-Tibt-BT\",\n    \"tsw\": \"tsw-Latn-ZZ\",\n    \"tt\": \"tt-Cyrl-RU\",\n    \"ttd\": \"ttd-Latn-ZZ\",\n    \"tte\": \"tte-Latn-ZZ\",\n    \"ttj\": \"ttj-Latn-UG\",\n    \"ttr\": \"ttr-Latn-ZZ\",\n    \"tts\": \"tts-Thai-TH\",\n    \"ttt\": \"ttt-Latn-AZ\",\n    \"tuh\": \"tuh-Latn-ZZ\",\n    \"tul\": \"tul-Latn-ZZ\",\n    \"tum\": \"tum-Latn-MW\",\n    \"tuq\": \"tuq-Latn-ZZ\",\n    \"tvd\": \"tvd-Latn-ZZ\",\n    \"tvl\": \"tvl-Latn-TV\",\n    \"tvu\": \"tvu-Latn-ZZ\",\n    \"twh\": \"twh-Latn-ZZ\",\n    \"twq\": \"twq-Latn-NE\",\n    \"txg\": \"txg-Tang-CN\",\n    \"txo\": \"txo-Toto-IN\",\n    \"ty\": \"ty-Latn-PF\",\n    \"tya\": \"tya-Latn-ZZ\",\n    \"tyv\": \"tyv-Cyrl-RU\",\n    \"tzm\": \"tzm-Latn-MA\",\n    \"ubu\": \"ubu-Latn-ZZ\",\n    \"udi\": \"udi-Aghb-RU\",\n    \"udm\": \"udm-Cyrl-RU\",\n    \"ug\": \"ug-Arab-CN\",\n    \"ug-Cyrl\": \"ug-Cyrl-KZ\",\n    \"ug-KZ\": \"ug-Cyrl-KZ\",\n    \"ug-MN\": \"ug-Cyrl-MN\",\n    \"uga\": \"uga-Ugar-SY\",\n    \"uk\": \"uk-Cyrl-UA\",\n    \"uli\": \"uli-Latn-FM\",\n    \"umb\": \"umb-Latn-AO\",\n    \"und\": \"en-Latn-US\",\n    \"und-002\": \"en-Latn-NG\",\n    \"und-003\": \"en-Latn-US\",\n    \"und-005\": \"pt-Latn-BR\",\n    \"und-009\": \"en-Latn-AU\",\n    \"und-011\": \"en-Latn-NG\",\n    \"und-013\": \"es-Latn-MX\",\n    \"und-014\": \"sw-Latn-TZ\",\n    \"und-015\": \"ar-Arab-EG\",\n    \"und-017\": \"sw-Latn-CD\",\n    \"und-018\": \"en-Latn-ZA\",\n    \"und-019\": \"en-Latn-US\",\n    \"und-021\": \"en-Latn-US\",\n    \"und-029\": \"es-Latn-CU\",\n    \"und-030\": \"zh-Hans-CN\",\n    \"und-034\": \"hi-Deva-IN\",\n    \"und-035\": \"id-Latn-ID\",\n    \"und-039\": \"it-Latn-IT\",\n    \"und-053\": \"en-Latn-AU\",\n    \"und-054\": \"en-Latn-PG\",\n    \"und-057\": \"en-Latn-GU\",\n    \"und-061\": \"sm-Latn-WS\",\n    \"und-142\": \"zh-Hans-CN\",\n    \"und-143\": \"uz-Latn-UZ\",\n    \"und-145\": \"ar-Arab-SA\",\n    \"und-150\": \"ru-Cyrl-RU\",\n    \"und-151\": \"ru-Cyrl-RU\",\n    \"und-154\": \"en-Latn-GB\",\n    \"und-155\": \"de-Latn-DE\",\n    \"und-202\": \"en-Latn-NG\",\n    \"und-419\": \"es-Latn-419\",\n    \"und-AD\": \"ca-Latn-AD\",\n    \"und-Adlm\": \"ff-Adlm-GN\",\n    \"und-AE\": \"ar-Arab-AE\",\n    \"und-AF\": \"fa-Arab-AF\",\n    \"und-Aghb\": \"udi-Aghb-RU\",\n    \"und-Ahom\": \"aho-Ahom-IN\",\n    \"und-AL\": \"sq-Latn-AL\",\n    \"und-AM\": \"hy-Armn-AM\",\n    \"und-AO\": \"pt-Latn-AO\",\n    \"und-AQ\": \"und-Latn-AQ\",\n    \"und-AR\": \"es-Latn-AR\",\n    \"und-Arab\": \"ar-Arab-EG\",\n    \"und-Arab-CC\": \"ms-Arab-CC\",\n    \"und-Arab-CN\": \"ug-Arab-CN\",\n    \"und-Arab-GB\": \"ks-Arab-GB\",\n    \"und-Arab-ID\": \"ms-Arab-ID\",\n    \"und-Arab-IN\": \"ur-Arab-IN\",\n    \"und-Arab-KH\": \"cja-Arab-KH\",\n    \"und-Arab-MM\": \"rhg-Arab-MM\",\n    \"und-Arab-MN\": \"kk-Arab-MN\",\n    \"und-Arab-MU\": \"ur-Arab-MU\",\n    \"und-Arab-NG\": \"ha-Arab-NG\",\n    \"und-Arab-PK\": \"ur-Arab-PK\",\n    \"und-Arab-TG\": \"apd-Arab-TG\",\n    \"und-Arab-TH\": \"mfa-Arab-TH\",\n    \"und-Arab-TJ\": \"fa-Arab-TJ\",\n    \"und-Arab-TR\": \"az-Arab-TR\",\n    \"und-Arab-YT\": \"swb-Arab-YT\",\n    \"und-Armi\": \"arc-Armi-IR\",\n    \"und-Armn\": \"hy-Armn-AM\",\n    \"und-AS\": \"sm-Latn-AS\",\n    \"und-AT\": \"de-Latn-AT\",\n    \"und-Avst\": \"ae-Avst-IR\",\n    \"und-AW\": \"nl-Latn-AW\",\n    \"und-AX\": \"sv-Latn-AX\",\n    \"und-AZ\": \"az-Latn-AZ\",\n    \"und-BA\": \"bs-Latn-BA\",\n    \"und-Bali\": \"ban-Bali-ID\",\n    \"und-Bamu\": \"bax-Bamu-CM\",\n    \"und-Bass\": \"bsq-Bass-LR\",\n    \"und-Batk\": \"bbc-Batk-ID\",\n    \"und-BD\": \"bn-Beng-BD\",\n    \"und-BE\": \"nl-Latn-BE\",\n    \"und-Beng\": \"bn-Beng-BD\",\n    \"und-BF\": \"fr-Latn-BF\",\n    \"und-BG\": \"bg-Cyrl-BG\",\n    \"und-BH\": \"ar-Arab-BH\",\n    \"und-Bhks\": \"sa-Bhks-IN\",\n    \"und-BI\": \"rn-Latn-BI\",\n    \"und-BJ\": \"fr-Latn-BJ\",\n    \"und-BL\": \"fr-Latn-BL\",\n    \"und-BN\": \"ms-Latn-BN\",\n    \"und-BO\": \"es-Latn-BO\",\n    \"und-Bopo\": \"zh-Bopo-TW\",\n    \"und-BQ\": \"pap-Latn-BQ\",\n    \"und-BR\": \"pt-Latn-BR\",\n    \"und-Brah\": \"pka-Brah-IN\",\n    \"und-Brai\": \"fr-Brai-FR\",\n    \"und-BT\": \"dz-Tibt-BT\",\n    \"und-Bugi\": \"bug-Bugi-ID\",\n    \"und-Buhd\": \"bku-Buhd-PH\",\n    \"und-BV\": \"und-Latn-BV\",\n    \"und-BY\": \"be-Cyrl-BY\",\n    \"und-Cakm\": \"ccp-Cakm-BD\",\n    \"und-Cans\": \"cr-Cans-CA\",\n    \"und-Cari\": \"xcr-Cari-TR\",\n    \"und-CD\": \"sw-Latn-CD\",\n    \"und-CF\": \"fr-Latn-CF\",\n    \"und-CG\": \"fr-Latn-CG\",\n    \"und-CH\": \"de-Latn-CH\",\n    \"und-Cham\": \"cjm-Cham-VN\",\n    \"und-Cher\": \"chr-Cher-US\",\n    \"und-Chrs\": \"xco-Chrs-UZ\",\n    \"und-CI\": \"fr-Latn-CI\",\n    \"und-CL\": \"es-Latn-CL\",\n    \"und-CM\": \"fr-Latn-CM\",\n    \"und-CN\": \"zh-Hans-CN\",\n    \"und-CO\": \"es-Latn-CO\",\n    \"und-Copt\": \"cop-Copt-EG\",\n    \"und-CP\": \"und-Latn-CP\",\n    \"und-Cpmn\": \"und-Cpmn-CY\",\n    \"und-Cpmn-CY\": \"und-Cpmn-CY\",\n    \"und-Cprt\": \"grc-Cprt-CY\",\n    \"und-CR\": \"es-Latn-CR\",\n    \"und-CU\": \"es-Latn-CU\",\n    \"und-CV\": \"pt-Latn-CV\",\n    \"und-CW\": \"pap-Latn-CW\",\n    \"und-CY\": \"el-Grek-CY\",\n    \"und-Cyrl\": \"ru-Cyrl-RU\",\n    \"und-Cyrl-AL\": \"mk-Cyrl-AL\",\n    \"und-Cyrl-BA\": \"sr-Cyrl-BA\",\n    \"und-Cyrl-GE\": \"os-Cyrl-GE\",\n    \"und-Cyrl-GR\": \"mk-Cyrl-GR\",\n    \"und-Cyrl-MD\": \"uk-Cyrl-MD\",\n    \"und-Cyrl-RO\": \"bg-Cyrl-RO\",\n    \"und-Cyrl-SK\": \"uk-Cyrl-SK\",\n    \"und-Cyrl-TR\": \"kbd-Cyrl-TR\",\n    \"und-Cyrl-XK\": \"sr-Cyrl-XK\",\n    \"und-CZ\": \"cs-Latn-CZ\",\n    \"und-DE\": \"de-Latn-DE\",\n    \"und-Deva\": \"hi-Deva-IN\",\n    \"und-Deva-BT\": \"ne-Deva-BT\",\n    \"und-Deva-FJ\": \"hif-Deva-FJ\",\n    \"und-Deva-MU\": \"bho-Deva-MU\",\n    \"und-Deva-PK\": \"btv-Deva-PK\",\n    \"und-Diak\": \"dv-Diak-MV\",\n    \"und-DJ\": \"aa-Latn-DJ\",\n    \"und-DK\": \"da-Latn-DK\",\n    \"und-DO\": \"es-Latn-DO\",\n    \"und-Dogr\": \"doi-Dogr-IN\",\n    \"und-Dupl\": \"fr-Dupl-FR\",\n    \"und-DZ\": \"ar-Arab-DZ\",\n    \"und-EA\": \"es-Latn-EA\",\n    \"und-EC\": \"es-Latn-EC\",\n    \"und-EE\": \"et-Latn-EE\",\n    \"und-EG\": \"ar-Arab-EG\",\n    \"und-Egyp\": \"egy-Egyp-EG\",\n    \"und-EH\": \"ar-Arab-EH\",\n    \"und-Elba\": \"sq-Elba-AL\",\n    \"und-Elym\": \"arc-Elym-IR\",\n    \"und-ER\": \"ti-Ethi-ER\",\n    \"und-ES\": \"es-Latn-ES\",\n    \"und-ET\": \"am-Ethi-ET\",\n    \"und-Ethi\": \"am-Ethi-ET\",\n    \"und-EU\": \"en-Latn-IE\",\n    \"und-EZ\": \"de-Latn-EZ\",\n    \"und-FI\": \"fi-Latn-FI\",\n    \"und-FO\": \"fo-Latn-FO\",\n    \"und-FR\": \"fr-Latn-FR\",\n    \"und-GA\": \"fr-Latn-GA\",\n    \"und-GE\": \"ka-Geor-GE\",\n    \"und-Geor\": \"ka-Geor-GE\",\n    \"und-GF\": \"fr-Latn-GF\",\n    \"und-GH\": \"ak-Latn-GH\",\n    \"und-GL\": \"kl-Latn-GL\",\n    \"und-Glag\": \"cu-Glag-BG\",\n    \"und-GN\": \"fr-Latn-GN\",\n    \"und-Gong\": \"wsg-Gong-IN\",\n    \"und-Gonm\": \"esg-Gonm-IN\",\n    \"und-Goth\": \"got-Goth-UA\",\n    \"und-GP\": \"fr-Latn-GP\",\n    \"und-GQ\": \"es-Latn-GQ\",\n    \"und-GR\": \"el-Grek-GR\",\n    \"und-Gran\": \"sa-Gran-IN\",\n    \"und-Grek\": \"el-Grek-GR\",\n    \"und-Grek-TR\": \"bgx-Grek-TR\",\n    \"und-GS\": \"und-Latn-GS\",\n    \"und-GT\": \"es-Latn-GT\",\n    \"und-Gujr\": \"gu-Gujr-IN\",\n    \"und-Guru\": \"pa-Guru-IN\",\n    \"und-GW\": \"pt-Latn-GW\",\n    \"und-Hanb\": \"zh-Hanb-TW\",\n    \"und-Hang\": \"ko-Hang-KR\",\n    \"und-Hani\": \"zh-Hani-CN\",\n    \"und-Hano\": \"hnn-Hano-PH\",\n    \"und-Hans\": \"zh-Hans-CN\",\n    \"und-Hant\": \"zh-Hant-TW\",\n    \"und-Hebr\": \"he-Hebr-IL\",\n    \"und-Hebr-CA\": \"yi-Hebr-CA\",\n    \"und-Hebr-GB\": \"yi-Hebr-GB\",\n    \"und-Hebr-SE\": \"yi-Hebr-SE\",\n    \"und-Hebr-UA\": \"yi-Hebr-UA\",\n    \"und-Hebr-US\": \"yi-Hebr-US\",\n    \"und-Hira\": \"ja-Hira-JP\",\n    \"und-HK\": \"zh-Hant-HK\",\n    \"und-Hluw\": \"hlu-Hluw-TR\",\n    \"und-HM\": \"und-Latn-HM\",\n    \"und-Hmng\": \"hnj-Hmng-LA\",\n    \"und-Hmnp\": \"hnj-Hmnp-US\",\n    \"und-HN\": \"es-Latn-HN\",\n    \"und-HR\": \"hr-Latn-HR\",\n    \"und-HT\": \"ht-Latn-HT\",\n    \"und-HU\": \"hu-Latn-HU\",\n    \"und-Hung\": \"hu-Hung-HU\",\n    \"und-IC\": \"es-Latn-IC\",\n    \"und-ID\": \"id-Latn-ID\",\n    \"und-IL\": \"he-Hebr-IL\",\n    \"und-IN\": \"hi-Deva-IN\",\n    \"und-IQ\": \"ar-Arab-IQ\",\n    \"und-IR\": \"fa-Arab-IR\",\n    \"und-IS\": \"is-Latn-IS\",\n    \"und-IT\": \"it-Latn-IT\",\n    \"und-Ital\": \"ett-Ital-IT\",\n    \"und-Jamo\": \"ko-Jamo-KR\",\n    \"und-Java\": \"jv-Java-ID\",\n    \"und-JO\": \"ar-Arab-JO\",\n    \"und-JP\": \"ja-Jpan-JP\",\n    \"und-Jpan\": \"ja-Jpan-JP\",\n    \"und-Kali\": \"eky-Kali-MM\",\n    \"und-Kana\": \"ja-Kana-JP\",\n    \"und-KE\": \"sw-Latn-KE\",\n    \"und-KG\": \"ky-Cyrl-KG\",\n    \"und-KH\": \"km-Khmr-KH\",\n    \"und-Khar\": \"pra-Khar-PK\",\n    \"und-Khmr\": \"km-Khmr-KH\",\n    \"und-Khoj\": \"sd-Khoj-IN\",\n    \"und-Kits\": \"zkt-Kits-CN\",\n    \"und-KM\": \"ar-Arab-KM\",\n    \"und-Knda\": \"kn-Knda-IN\",\n    \"und-Kore\": \"ko-Kore-KR\",\n    \"und-KP\": \"ko-Kore-KP\",\n    \"und-KR\": \"ko-Kore-KR\",\n    \"und-Kthi\": \"bho-Kthi-IN\",\n    \"und-KW\": \"ar-Arab-KW\",\n    \"und-KZ\": \"ru-Cyrl-KZ\",\n    \"und-LA\": \"lo-Laoo-LA\",\n    \"und-Lana\": \"nod-Lana-TH\",\n    \"und-Laoo\": \"lo-Laoo-LA\",\n    \"und-Latn-AF\": \"tk-Latn-AF\",\n    \"und-Latn-AM\": \"ku-Latn-AM\",\n    \"und-Latn-CN\": \"za-Latn-CN\",\n    \"und-Latn-CY\": \"tr-Latn-CY\",\n    \"und-Latn-DZ\": \"fr-Latn-DZ\",\n    \"und-Latn-ET\": \"en-Latn-ET\",\n    \"und-Latn-GE\": \"ku-Latn-GE\",\n    \"und-Latn-IR\": \"tk-Latn-IR\",\n    \"und-Latn-KM\": \"fr-Latn-KM\",\n    \"und-Latn-MA\": \"fr-Latn-MA\",\n    \"und-Latn-MK\": \"sq-Latn-MK\",\n    \"und-Latn-MM\": \"kac-Latn-MM\",\n    \"und-Latn-MO\": \"pt-Latn-MO\",\n    \"und-Latn-MR\": \"fr-Latn-MR\",\n    \"und-Latn-RU\": \"krl-Latn-RU\",\n    \"und-Latn-SY\": \"fr-Latn-SY\",\n    \"und-Latn-TN\": \"fr-Latn-TN\",\n    \"und-Latn-TW\": \"trv-Latn-TW\",\n    \"und-Latn-UA\": \"pl-Latn-UA\",\n    \"und-LB\": \"ar-Arab-LB\",\n    \"und-Lepc\": \"lep-Lepc-IN\",\n    \"und-LI\": \"de-Latn-LI\",\n    \"und-Limb\": \"lif-Limb-IN\",\n    \"und-Lina\": \"lab-Lina-GR\",\n    \"und-Linb\": \"grc-Linb-GR\",\n    \"und-Lisu\": \"lis-Lisu-CN\",\n    \"und-LK\": \"si-Sinh-LK\",\n    \"und-LS\": \"st-Latn-LS\",\n    \"und-LT\": \"lt-Latn-LT\",\n    \"und-LU\": \"fr-Latn-LU\",\n    \"und-LV\": \"lv-Latn-LV\",\n    \"und-LY\": \"ar-Arab-LY\",\n    \"und-Lyci\": \"xlc-Lyci-TR\",\n    \"und-Lydi\": \"xld-Lydi-TR\",\n    \"und-MA\": \"ar-Arab-MA\",\n    \"und-Mahj\": \"hi-Mahj-IN\",\n    \"und-Maka\": \"mak-Maka-ID\",\n    \"und-Mand\": \"myz-Mand-IR\",\n    \"und-Mani\": \"xmn-Mani-CN\",\n    \"und-Marc\": \"bo-Marc-CN\",\n    \"und-MC\": \"fr-Latn-MC\",\n    \"und-MD\": \"ro-Latn-MD\",\n    \"und-ME\": \"sr-Latn-ME\",\n    \"und-Medf\": \"dmf-Medf-NG\",\n    \"und-Mend\": \"men-Mend-SL\",\n    \"und-Merc\": \"xmr-Merc-SD\",\n    \"und-Mero\": \"xmr-Mero-SD\",\n    \"und-MF\": \"fr-Latn-MF\",\n    \"und-MG\": \"mg-Latn-MG\",\n    \"und-MK\": \"mk-Cyrl-MK\",\n    \"und-ML\": \"bm-Latn-ML\",\n    \"und-Mlym\": \"ml-Mlym-IN\",\n    \"und-MM\": \"my-Mymr-MM\",\n    \"und-MN\": \"mn-Cyrl-MN\",\n    \"und-MO\": \"zh-Hant-MO\",\n    \"und-Modi\": \"mr-Modi-IN\",\n    \"und-Mong\": \"mn-Mong-CN\",\n    \"und-MQ\": \"fr-Latn-MQ\",\n    \"und-MR\": \"ar-Arab-MR\",\n    \"und-Mroo\": \"mro-Mroo-BD\",\n    \"und-MT\": \"mt-Latn-MT\",\n    \"und-Mtei\": \"mni-Mtei-IN\",\n    \"und-MU\": \"mfe-Latn-MU\",\n    \"und-Mult\": \"skr-Mult-PK\",\n    \"und-MV\": \"dv-Thaa-MV\",\n    \"und-MX\": \"es-Latn-MX\",\n    \"und-MY\": \"ms-Latn-MY\",\n    \"und-Mymr\": \"my-Mymr-MM\",\n    \"und-Mymr-IN\": \"kht-Mymr-IN\",\n    \"und-Mymr-TH\": \"mnw-Mymr-TH\",\n    \"und-MZ\": \"pt-Latn-MZ\",\n    \"und-NA\": \"af-Latn-NA\",\n    \"und-Nand\": \"sa-Nand-IN\",\n    \"und-Narb\": \"xna-Narb-SA\",\n    \"und-Nbat\": \"arc-Nbat-JO\",\n    \"und-NC\": \"fr-Latn-NC\",\n    \"und-NE\": \"ha-Latn-NE\",\n    \"und-Newa\": \"new-Newa-NP\",\n    \"und-NI\": \"es-Latn-NI\",\n    \"und-Nkoo\": \"man-Nkoo-GN\",\n    \"und-NL\": \"nl-Latn-NL\",\n    \"und-NO\": \"nb-Latn-NO\",\n    \"und-NP\": \"ne-Deva-NP\",\n    \"und-Nshu\": \"zhx-Nshu-CN\",\n    \"und-Ogam\": \"sga-Ogam-IE\",\n    \"und-Olck\": \"sat-Olck-IN\",\n    \"und-OM\": \"ar-Arab-OM\",\n    \"und-Orkh\": \"otk-Orkh-MN\",\n    \"und-Orya\": \"or-Orya-IN\",\n    \"und-Osge\": \"osa-Osge-US\",\n    \"und-Osma\": \"so-Osma-SO\",\n    \"und-Ougr\": \"oui-Ougr-143\",\n    \"und-PA\": \"es-Latn-PA\",\n    \"und-Palm\": \"arc-Palm-SY\",\n    \"und-Pauc\": \"ctd-Pauc-MM\",\n    \"und-PE\": \"es-Latn-PE\",\n    \"und-Perm\": \"kv-Perm-RU\",\n    \"und-PF\": \"fr-Latn-PF\",\n    \"und-PG\": \"tpi-Latn-PG\",\n    \"und-PH\": \"fil-Latn-PH\",\n    \"und-Phag\": \"lzh-Phag-CN\",\n    \"und-Phli\": \"pal-Phli-IR\",\n    \"und-Phlp\": \"pal-Phlp-CN\",\n    \"und-Phnx\": \"phn-Phnx-LB\",\n    \"und-PK\": \"ur-Arab-PK\",\n    \"und-PL\": \"pl-Latn-PL\",\n    \"und-Plrd\": \"hmd-Plrd-CN\",\n    \"und-PM\": \"fr-Latn-PM\",\n    \"und-PR\": \"es-Latn-PR\",\n    \"und-Prti\": \"xpr-Prti-IR\",\n    \"und-PS\": \"ar-Arab-PS\",\n    \"und-PT\": \"pt-Latn-PT\",\n    \"und-PW\": \"pau-Latn-PW\",\n    \"und-PY\": \"gn-Latn-PY\",\n    \"und-QA\": \"ar-Arab-QA\",\n    \"und-QO\": \"en-Latn-DG\",\n    \"und-RE\": \"fr-Latn-RE\",\n    \"und-Rjng\": \"rej-Rjng-ID\",\n    \"und-RO\": \"ro-Latn-RO\",\n    \"und-Rohg\": \"rhg-Rohg-MM\",\n    \"und-RS\": \"sr-Cyrl-RS\",\n    \"und-RU\": \"ru-Cyrl-RU\",\n    \"und-Runr\": \"non-Runr-SE\",\n    \"und-RW\": \"rw-Latn-RW\",\n    \"und-SA\": \"ar-Arab-SA\",\n    \"und-Samr\": \"smp-Samr-IL\",\n    \"und-Sarb\": \"xsa-Sarb-YE\",\n    \"und-Saur\": \"saz-Saur-IN\",\n    \"und-SC\": \"fr-Latn-SC\",\n    \"und-SD\": \"ar-Arab-SD\",\n    \"und-SE\": \"sv-Latn-SE\",\n    \"und-Sgnw\": \"ase-Sgnw-US\",\n    \"und-Shaw\": \"en-Shaw-GB\",\n    \"und-Shrd\": \"sa-Shrd-IN\",\n    \"und-SI\": \"sl-Latn-SI\",\n    \"und-Sidd\": \"sa-Sidd-IN\",\n    \"und-Sind\": \"sd-Sind-IN\",\n    \"und-Sinh\": \"si-Sinh-LK\",\n    \"und-SJ\": \"nb-Latn-SJ\",\n    \"und-SK\": \"sk-Latn-SK\",\n    \"und-SM\": \"it-Latn-SM\",\n    \"und-SN\": \"fr-Latn-SN\",\n    \"und-SO\": \"so-Latn-SO\",\n    \"und-Sogd\": \"sog-Sogd-UZ\",\n    \"und-Sogo\": \"sog-Sogo-UZ\",\n    \"und-Sora\": \"srb-Sora-IN\",\n    \"und-Soyo\": \"cmg-Soyo-MN\",\n    \"und-SR\": \"nl-Latn-SR\",\n    \"und-ST\": \"pt-Latn-ST\",\n    \"und-Sund\": \"su-Sund-ID\",\n    \"und-SV\": \"es-Latn-SV\",\n    \"und-SY\": \"ar-Arab-SY\",\n    \"und-Sylo\": \"syl-Sylo-BD\",\n    \"und-Syrc\": \"syr-Syrc-IQ\",\n    \"und-Tagb\": \"tbw-Tagb-PH\",\n    \"und-Takr\": \"doi-Takr-IN\",\n    \"und-Tale\": \"tdd-Tale-CN\",\n    \"und-Talu\": \"khb-Talu-CN\",\n    \"und-Taml\": \"ta-Taml-IN\",\n    \"und-Tang\": \"txg-Tang-CN\",\n    \"und-Tavt\": \"blt-Tavt-VN\",\n    \"und-TD\": \"fr-Latn-TD\",\n    \"und-Telu\": \"te-Telu-IN\",\n    \"und-TF\": \"fr-Latn-TF\",\n    \"und-Tfng\": \"zgh-Tfng-MA\",\n    \"und-TG\": \"fr-Latn-TG\",\n    \"und-Tglg\": \"fil-Tglg-PH\",\n    \"und-TH\": \"th-Thai-TH\",\n    \"und-Thaa\": \"dv-Thaa-MV\",\n    \"und-Thai\": \"th-Thai-TH\",\n    \"und-Thai-CN\": \"lcp-Thai-CN\",\n    \"und-Thai-KH\": \"kdt-Thai-KH\",\n    \"und-Thai-LA\": \"kdt-Thai-LA\",\n    \"und-Tibt\": \"bo-Tibt-CN\",\n    \"und-Tirh\": \"mai-Tirh-IN\",\n    \"und-TJ\": \"tg-Cyrl-TJ\",\n    \"und-TK\": \"tkl-Latn-TK\",\n    \"und-TL\": \"pt-Latn-TL\",\n    \"und-TM\": \"tk-Latn-TM\",\n    \"und-TN\": \"ar-Arab-TN\",\n    \"und-Tnsa\": \"nst-Tnsa-IN\",\n    \"und-TO\": \"to-Latn-TO\",\n    \"und-Toto\": \"txo-Toto-IN\",\n    \"und-TR\": \"tr-Latn-TR\",\n    \"und-TV\": \"tvl-Latn-TV\",\n    \"und-TW\": \"zh-Hant-TW\",\n    \"und-TZ\": \"sw-Latn-TZ\",\n    \"und-UA\": \"uk-Cyrl-UA\",\n    \"und-UG\": \"sw-Latn-UG\",\n    \"und-Ugar\": \"uga-Ugar-SY\",\n    \"und-UY\": \"es-Latn-UY\",\n    \"und-UZ\": \"uz-Latn-UZ\",\n    \"und-VA\": \"it-Latn-VA\",\n    \"und-Vaii\": \"vai-Vaii-LR\",\n    \"und-VE\": \"es-Latn-VE\",\n    \"und-Vith\": \"sq-Vith-AL\",\n    \"und-VN\": \"vi-Latn-VN\",\n    \"und-VU\": \"bi-Latn-VU\",\n    \"und-Wara\": \"hoc-Wara-IN\",\n    \"und-Wcho\": \"nnp-Wcho-IN\",\n    \"und-WF\": \"fr-Latn-WF\",\n    \"und-WS\": \"sm-Latn-WS\",\n    \"und-XK\": \"sq-Latn-XK\",\n    \"und-Xpeo\": \"peo-Xpeo-IR\",\n    \"und-Xsux\": \"akk-Xsux-IQ\",\n    \"und-YE\": \"ar-Arab-YE\",\n    \"und-Yezi\": \"ku-Yezi-GE\",\n    \"und-Yiii\": \"ii-Yiii-CN\",\n    \"und-YT\": \"fr-Latn-YT\",\n    \"und-Zanb\": \"cmg-Zanb-MN\",\n    \"und-ZW\": \"sn-Latn-ZW\",\n    \"unr\": \"unr-Beng-IN\",\n    \"unr-Deva\": \"unr-Deva-NP\",\n    \"unr-NP\": \"unr-Deva-NP\",\n    \"unx\": \"unx-Beng-IN\",\n    \"uok\": \"uok-Latn-ZZ\",\n    \"ur\": \"ur-Arab-PK\",\n    \"uri\": \"uri-Latn-ZZ\",\n    \"urt\": \"urt-Latn-ZZ\",\n    \"urw\": \"urw-Latn-ZZ\",\n    \"usa\": \"usa-Latn-ZZ\",\n    \"uth\": \"uth-Latn-ZZ\",\n    \"utr\": \"utr-Latn-ZZ\",\n    \"uvh\": \"uvh-Latn-ZZ\",\n    \"uvl\": \"uvl-Latn-ZZ\",\n    \"uz\": \"uz-Latn-UZ\",\n    \"uz-AF\": \"uz-Arab-AF\",\n    \"uz-Arab\": \"uz-Arab-AF\",\n    \"uz-CN\": \"uz-Cyrl-CN\",\n    \"vag\": \"vag-Latn-ZZ\",\n    \"vai\": \"vai-Vaii-LR\",\n    \"van\": \"van-Latn-ZZ\",\n    \"ve\": \"ve-Latn-ZA\",\n    \"vec\": \"vec-Latn-IT\",\n    \"vep\": \"vep-Latn-RU\",\n    \"vi\": \"vi-Latn-VN\",\n    \"vic\": \"vic-Latn-SX\",\n    \"viv\": \"viv-Latn-ZZ\",\n    \"vls\": \"vls-Latn-BE\",\n    \"vmf\": \"vmf-Latn-DE\",\n    \"vmw\": \"vmw-Latn-MZ\",\n    \"vo\": \"vo-Latn-001\",\n    \"vot\": \"vot-Latn-RU\",\n    \"vro\": \"vro-Latn-EE\",\n    \"vun\": \"vun-Latn-TZ\",\n    \"vut\": \"vut-Latn-ZZ\",\n    \"wa\": \"wa-Latn-BE\",\n    \"wae\": \"wae-Latn-CH\",\n    \"waj\": \"waj-Latn-ZZ\",\n    \"wal\": \"wal-Ethi-ET\",\n    \"wan\": \"wan-Latn-ZZ\",\n    \"war\": \"war-Latn-PH\",\n    \"wbp\": \"wbp-Latn-AU\",\n    \"wbq\": \"wbq-Telu-IN\",\n    \"wbr\": \"wbr-Deva-IN\",\n    \"wci\": \"wci-Latn-ZZ\",\n    \"wer\": \"wer-Latn-ZZ\",\n    \"wgi\": \"wgi-Latn-ZZ\",\n    \"whg\": \"whg-Latn-ZZ\",\n    \"wib\": \"wib-Latn-ZZ\",\n    \"wiu\": \"wiu-Latn-ZZ\",\n    \"wiv\": \"wiv-Latn-ZZ\",\n    \"wja\": \"wja-Latn-ZZ\",\n    \"wji\": \"wji-Latn-ZZ\",\n    \"wls\": \"wls-Latn-WF\",\n    \"wmo\": \"wmo-Latn-ZZ\",\n    \"wnc\": \"wnc-Latn-ZZ\",\n    \"wni\": \"wni-Arab-KM\",\n    \"wnu\": \"wnu-Latn-ZZ\",\n    \"wo\": \"wo-Latn-SN\",\n    \"wob\": \"wob-Latn-ZZ\",\n    \"wos\": \"wos-Latn-ZZ\",\n    \"wrs\": \"wrs-Latn-ZZ\",\n    \"wsg\": \"wsg-Gong-IN\",\n    \"wsk\": \"wsk-Latn-ZZ\",\n    \"wtm\": \"wtm-Deva-IN\",\n    \"wuu\": \"wuu-Hans-CN\",\n    \"wuv\": \"wuv-Latn-ZZ\",\n    \"wwa\": \"wwa-Latn-ZZ\",\n    \"xav\": \"xav-Latn-BR\",\n    \"xbi\": \"xbi-Latn-ZZ\",\n    \"xco\": \"xco-Chrs-UZ\",\n    \"xcr\": \"xcr-Cari-TR\",\n    \"xes\": \"xes-Latn-ZZ\",\n    \"xh\": \"xh-Latn-ZA\",\n    \"xla\": \"xla-Latn-ZZ\",\n    \"xlc\": \"xlc-Lyci-TR\",\n    \"xld\": \"xld-Lydi-TR\",\n    \"xmf\": \"xmf-Geor-GE\",\n    \"xmn\": \"xmn-Mani-CN\",\n    \"xmr\": \"xmr-Merc-SD\",\n    \"xna\": \"xna-Narb-SA\",\n    \"xnr\": \"xnr-Deva-IN\",\n    \"xog\": \"xog-Latn-UG\",\n    \"xon\": \"xon-Latn-ZZ\",\n    \"xpr\": \"xpr-Prti-IR\",\n    \"xrb\": \"xrb-Latn-ZZ\",\n    \"xsa\": \"xsa-Sarb-YE\",\n    \"xsi\": \"xsi-Latn-ZZ\",\n    \"xsm\": \"xsm-Latn-ZZ\",\n    \"xsr\": \"xsr-Deva-NP\",\n    \"xwe\": \"xwe-Latn-ZZ\",\n    \"yam\": \"yam-Latn-ZZ\",\n    \"yao\": \"yao-Latn-MZ\",\n    \"yap\": \"yap-Latn-FM\",\n    \"yas\": \"yas-Latn-ZZ\",\n    \"yat\": \"yat-Latn-ZZ\",\n    \"yav\": \"yav-Latn-CM\",\n    \"yay\": \"yay-Latn-ZZ\",\n    \"yaz\": \"yaz-Latn-ZZ\",\n    \"yba\": \"yba-Latn-ZZ\",\n    \"ybb\": \"ybb-Latn-CM\",\n    \"yby\": \"yby-Latn-ZZ\",\n    \"yer\": \"yer-Latn-ZZ\",\n    \"ygr\": \"ygr-Latn-ZZ\",\n    \"ygw\": \"ygw-Latn-ZZ\",\n    \"yi\": \"yi-Hebr-001\",\n    \"yko\": \"yko-Latn-ZZ\",\n    \"yle\": \"yle-Latn-ZZ\",\n    \"ylg\": \"ylg-Latn-ZZ\",\n    \"yll\": \"yll-Latn-ZZ\",\n    \"yml\": \"yml-Latn-ZZ\",\n    \"yo\": \"yo-Latn-NG\",\n    \"yon\": \"yon-Latn-ZZ\",\n    \"yrb\": \"yrb-Latn-ZZ\",\n    \"yre\": \"yre-Latn-ZZ\",\n    \"yrl\": \"yrl-Latn-BR\",\n    \"yss\": \"yss-Latn-ZZ\",\n    \"yua\": \"yua-Latn-MX\",\n    \"yue\": \"yue-Hant-HK\",\n    \"yue-CN\": \"yue-Hans-CN\",\n    \"yue-Hans\": \"yue-Hans-CN\",\n    \"yuj\": \"yuj-Latn-ZZ\",\n    \"yut\": \"yut-Latn-ZZ\",\n    \"yuw\": \"yuw-Latn-ZZ\",\n    \"za\": \"za-Latn-CN\",\n    \"zag\": \"zag-Latn-SD\",\n    \"zdj\": \"zdj-Arab-KM\",\n    \"zea\": \"zea-Latn-NL\",\n    \"zgh\": \"zgh-Tfng-MA\",\n    \"zh\": \"zh-Hans-CN\",\n    \"zh-AU\": \"zh-Hant-AU\",\n    \"zh-BN\": \"zh-Hant-BN\",\n    \"zh-Bopo\": \"zh-Bopo-TW\",\n    \"zh-GB\": \"zh-Hant-GB\",\n    \"zh-GF\": \"zh-Hant-GF\",\n    \"zh-Hanb\": \"zh-Hanb-TW\",\n    \"zh-Hant\": \"zh-Hant-TW\",\n    \"zh-HK\": \"zh-Hant-HK\",\n    \"zh-ID\": \"zh-Hant-ID\",\n    \"zh-MO\": \"zh-Hant-MO\",\n    \"zh-PA\": \"zh-Hant-PA\",\n    \"zh-PF\": \"zh-Hant-PF\",\n    \"zh-PH\": \"zh-Hant-PH\",\n    \"zh-SR\": \"zh-Hant-SR\",\n    \"zh-TH\": \"zh-Hant-TH\",\n    \"zh-TW\": \"zh-Hant-TW\",\n    \"zh-US\": \"zh-Hant-US\",\n    \"zh-VN\": \"zh-Hant-VN\",\n    \"zhx\": \"zhx-Nshu-CN\",\n    \"zia\": \"zia-Latn-ZZ\",\n    \"zkt\": \"zkt-Kits-CN\",\n    \"zlm\": \"zlm-Latn-TG\",\n    \"zmi\": \"zmi-Latn-MY\",\n    \"zne\": \"zne-Latn-ZZ\",\n    \"zu\": \"zu-Latn-ZA\",\n    \"zza\": \"zza-Latn-TR\"\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseUnicodeLocaleId = exports.parseUnicodeLanguageId = exports.isUnicodeVariantSubtag = exports.isUnicodeScriptSubtag = exports.isUnicodeRegionSubtag = exports.isStructurallyValidLanguageTag = exports.isUnicodeLanguageSubtag = exports.SEPARATOR = void 0;\nvar tslib_1 = require(\"tslib\");\nvar ALPHANUM_1_8 = /^[a-z0-9]{1,8}$/i;\nvar ALPHANUM_2_8 = /^[a-z0-9]{2,8}$/i;\nvar ALPHANUM_3_8 = /^[a-z0-9]{3,8}$/i;\nvar KEY_REGEX = /^[a-z0-9][a-z]$/i;\nvar TYPE_REGEX = /^[a-z0-9]{3,8}$/i;\nvar ALPHA_4 = /^[a-z]{4}$/i;\n// alphanum-[tTuUxX]\nvar OTHER_EXTENSION_TYPE = /^[0-9a-svwyz]$/i;\nvar UNICODE_REGION_SUBTAG_REGEX = /^([a-z]{2}|[0-9]{3})$/i;\nvar UNICODE_VARIANT_SUBTAG_REGEX = /^([a-z0-9]{5,8}|[0-9][a-z0-9]{3})$/i;\nvar UNICODE_LANGUAGE_SUBTAG_REGEX = /^([a-z]{2,3}|[a-z]{5,8})$/i;\nvar TKEY_REGEX = /^[a-z][0-9]$/i;\nexports.SEPARATOR = '-';\nfunction isUnicodeLanguageSubtag(lang) {\n    return UNICODE_LANGUAGE_SUBTAG_REGEX.test(lang);\n}\nexports.isUnicodeLanguageSubtag = isUnicodeLanguageSubtag;\nfunction isStructurallyValidLanguageTag(tag) {\n    try {\n        parseUnicodeLanguageId(tag.split(exports.SEPARATOR));\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nexports.isStructurallyValidLanguageTag = isStructurallyValidLanguageTag;\nfunction isUnicodeRegionSubtag(region) {\n    return UNICODE_REGION_SUBTAG_REGEX.test(region);\n}\nexports.isUnicodeRegionSubtag = isUnicodeRegionSubtag;\nfunction isUnicodeScriptSubtag(script) {\n    return ALPHA_4.test(script);\n}\nexports.isUnicodeScriptSubtag = isUnicodeScriptSubtag;\nfunction isUnicodeVariantSubtag(variant) {\n    return UNICODE_VARIANT_SUBTAG_REGEX.test(variant);\n}\nexports.isUnicodeVariantSubtag = isUnicodeVariantSubtag;\nfunction parseUnicodeLanguageId(chunks) {\n    if (typeof chunks === 'string') {\n        chunks = chunks.split(exports.SEPARATOR);\n    }\n    var lang = chunks.shift();\n    if (!lang) {\n        throw new RangeError('Missing unicode_language_subtag');\n    }\n    if (lang === 'root') {\n        return { lang: 'root', variants: [] };\n    }\n    // unicode_language_subtag\n    if (!isUnicodeLanguageSubtag(lang)) {\n        throw new RangeError('Malformed unicode_language_subtag');\n    }\n    var script;\n    // unicode_script_subtag\n    if (chunks.length && isUnicodeScriptSubtag(chunks[0])) {\n        script = chunks.shift();\n    }\n    var region;\n    // unicode_region_subtag\n    if (chunks.length && isUnicodeRegionSubtag(chunks[0])) {\n        region = chunks.shift();\n    }\n    var variants = {};\n    while (chunks.length && isUnicodeVariantSubtag(chunks[0])) {\n        var variant = chunks.shift();\n        if (variant in variants) {\n            throw new RangeError(\"Duplicate variant \\\"\".concat(variant, \"\\\"\"));\n        }\n        variants[variant] = 1;\n    }\n    return {\n        lang: lang,\n        script: script,\n        region: region,\n        variants: Object.keys(variants),\n    };\n}\nexports.parseUnicodeLanguageId = parseUnicodeLanguageId;\nfunction parseUnicodeExtension(chunks) {\n    var keywords = [];\n    var keyword;\n    while (chunks.length && (keyword = parseKeyword(chunks))) {\n        keywords.push(keyword);\n    }\n    if (keywords.length) {\n        return {\n            type: 'u',\n            keywords: keywords,\n            attributes: [],\n        };\n    }\n    // Mix of attributes & keywords\n    // Check for attributes first\n    var attributes = [];\n    while (chunks.length && ALPHANUM_3_8.test(chunks[0])) {\n        attributes.push(chunks.shift());\n    }\n    while (chunks.length && (keyword = parseKeyword(chunks))) {\n        keywords.push(keyword);\n    }\n    if (keywords.length || attributes.length) {\n        return {\n            type: 'u',\n            attributes: attributes,\n            keywords: keywords,\n        };\n    }\n    throw new RangeError('Malformed unicode_extension');\n}\nfunction parseKeyword(chunks) {\n    var key;\n    if (!KEY_REGEX.test(chunks[0])) {\n        return;\n    }\n    key = chunks.shift();\n    var type = [];\n    while (chunks.length && TYPE_REGEX.test(chunks[0])) {\n        type.push(chunks.shift());\n    }\n    var value = '';\n    if (type.length) {\n        value = type.join(exports.SEPARATOR);\n    }\n    return [key, value];\n}\nfunction parseTransformedExtension(chunks) {\n    var lang;\n    try {\n        lang = parseUnicodeLanguageId(chunks);\n    }\n    catch (e) {\n        // Try just parsing tfield\n    }\n    var fields = [];\n    while (chunks.length && TKEY_REGEX.test(chunks[0])) {\n        var key = chunks.shift();\n        var value = [];\n        while (chunks.length && ALPHANUM_3_8.test(chunks[0])) {\n            value.push(chunks.shift());\n        }\n        if (!value.length) {\n            throw new RangeError(\"Missing tvalue for tkey \\\"\".concat(key, \"\\\"\"));\n        }\n        fields.push([key, value.join(exports.SEPARATOR)]);\n    }\n    if (fields.length) {\n        return {\n            type: 't',\n            fields: fields,\n            lang: lang,\n        };\n    }\n    throw new RangeError('Malformed transformed_extension');\n}\nfunction parsePuExtension(chunks) {\n    var exts = [];\n    while (chunks.length && ALPHANUM_1_8.test(chunks[0])) {\n        exts.push(chunks.shift());\n    }\n    if (exts.length) {\n        return {\n            type: 'x',\n            value: exts.join(exports.SEPARATOR),\n        };\n    }\n    throw new RangeError('Malformed private_use_extension');\n}\nfunction parseOtherExtensionValue(chunks) {\n    var exts = [];\n    while (chunks.length && ALPHANUM_2_8.test(chunks[0])) {\n        exts.push(chunks.shift());\n    }\n    if (exts.length) {\n        return exts.join(exports.SEPARATOR);\n    }\n    return '';\n}\nfunction parseExtensions(chunks) {\n    if (!chunks.length) {\n        return { extensions: [] };\n    }\n    var extensions = [];\n    var unicodeExtension;\n    var transformedExtension;\n    var puExtension;\n    var otherExtensionMap = {};\n    do {\n        var type = chunks.shift();\n        switch (type) {\n            case 'u':\n            case 'U':\n                if (unicodeExtension) {\n                    throw new RangeError('There can only be 1 -u- extension');\n                }\n                unicodeExtension = parseUnicodeExtension(chunks);\n                extensions.push(unicodeExtension);\n                break;\n            case 't':\n            case 'T':\n                if (transformedExtension) {\n                    throw new RangeError('There can only be 1 -t- extension');\n                }\n                transformedExtension = parseTransformedExtension(chunks);\n                extensions.push(transformedExtension);\n                break;\n            case 'x':\n            case 'X':\n                if (puExtension) {\n                    throw new RangeError('There can only be 1 -x- extension');\n                }\n                puExtension = parsePuExtension(chunks);\n                extensions.push(puExtension);\n                break;\n            default:\n                if (!OTHER_EXTENSION_TYPE.test(type)) {\n                    throw new RangeError('Malformed extension type');\n                }\n                if (type in otherExtensionMap) {\n                    throw new RangeError(\"There can only be 1 -\".concat(type, \"- extension\"));\n                }\n                var extension = {\n                    type: type,\n                    value: parseOtherExtensionValue(chunks),\n                };\n                otherExtensionMap[extension.type] = extension;\n                extensions.push(extension);\n                break;\n        }\n    } while (chunks.length);\n    return { extensions: extensions };\n}\nfunction parseUnicodeLocaleId(locale) {\n    var chunks = locale.split(exports.SEPARATOR);\n    var lang = parseUnicodeLanguageId(chunks);\n    return (0, tslib_1.__assign)({ lang: lang }, parseExtensions(chunks));\n}\nexports.parseUnicodeLocaleId = parseUnicodeLocaleId;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\n// Type-only circular import\n// eslint-disable-next-line import/no-cycle\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar internalSlotMap = new WeakMap();\nfunction getInternalSlots(x) {\n    var internalSlots = internalSlotMap.get(x);\n    if (!internalSlots) {\n        internalSlots = Object.create(null);\n        internalSlotMap.set(x, internalSlots);\n    }\n    return internalSlots;\n}\nexports.default = getInternalSlots;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Locale = void 0;\nvar tslib_1 = require(\"tslib\");\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar intl_getcanonicallocales_1 = require(\"@formatjs/intl-getcanonicallocales\");\nvar get_internal_slots_1 = (0, tslib_1.__importDefault)(require(\"./get_internal_slots\"));\nvar RELEVANT_EXTENSION_KEYS = ['ca', 'co', 'hc', 'kf', 'kn', 'nu'];\nvar UNICODE_TYPE_REGEX = /^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;\nfunction applyOptionsToTag(tag, options) {\n    (0, ecma402_abstract_1.invariant)(typeof tag === 'string', 'language tag must be a string');\n    (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isStructurallyValidLanguageTag)(tag), 'malformed language tag', RangeError);\n    var language = (0, ecma402_abstract_1.GetOption)(options, 'language', 'string', undefined, undefined);\n    if (language !== undefined) {\n        (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isUnicodeLanguageSubtag)(language), 'Malformed unicode_language_subtag', RangeError);\n    }\n    var script = (0, ecma402_abstract_1.GetOption)(options, 'script', 'string', undefined, undefined);\n    if (script !== undefined) {\n        (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isUnicodeScriptSubtag)(script), 'Malformed unicode_script_subtag', RangeError);\n    }\n    var region = (0, ecma402_abstract_1.GetOption)(options, 'region', 'string', undefined, undefined);\n    if (region !== undefined) {\n        (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isUnicodeRegionSubtag)(region), 'Malformed unicode_region_subtag', RangeError);\n    }\n    var languageId = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(tag);\n    if (language !== undefined) {\n        languageId.lang = language;\n    }\n    if (script !== undefined) {\n        languageId.script = script;\n    }\n    if (region !== undefined) {\n        languageId.region = region;\n    }\n    return Intl.getCanonicalLocales((0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag)), { lang: languageId })))[0];\n}\nfunction applyUnicodeExtensionToTag(tag, options, relevantExtensionKeys) {\n    var unicodeExtension;\n    var keywords = [];\n    var ast = (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag);\n    for (var _i = 0, _a = ast.extensions; _i < _a.length; _i++) {\n        var ext = _a[_i];\n        if (ext.type === 'u') {\n            unicodeExtension = ext;\n            if (Array.isArray(ext.keywords))\n                keywords = ext.keywords;\n        }\n    }\n    var result = Object.create(null);\n    for (var _b = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _b < relevantExtensionKeys_1.length; _b++) {\n        var key = relevantExtensionKeys_1[_b];\n        var value = void 0, entry = void 0;\n        for (var _c = 0, keywords_1 = keywords; _c < keywords_1.length; _c++) {\n            var keyword = keywords_1[_c];\n            if (keyword[0] === key) {\n                entry = keyword;\n                value = entry[1];\n            }\n        }\n        (0, ecma402_abstract_1.invariant)(key in options, \"\".concat(key, \" must be in options\"));\n        var optionsValue = options[key];\n        if (optionsValue !== undefined) {\n            (0, ecma402_abstract_1.invariant)(typeof optionsValue === 'string', \"Value for \".concat(key, \" must be a string\"));\n            value = optionsValue;\n            if (entry) {\n                entry[1] = value;\n            }\n            else {\n                keywords.push([key, value]);\n            }\n        }\n        result[key] = value;\n    }\n    if (!unicodeExtension) {\n        if (keywords.length) {\n            ast.extensions.push({\n                type: 'u',\n                keywords: keywords,\n                attributes: [],\n            });\n        }\n    }\n    else {\n        unicodeExtension.keywords = keywords;\n    }\n    result.locale = Intl.getCanonicalLocales((0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast))[0];\n    return result;\n}\nfunction mergeUnicodeLanguageId(lang, script, region, variants, replacement) {\n    if (variants === void 0) { variants = []; }\n    if (!replacement) {\n        return {\n            lang: lang || 'und',\n            script: script,\n            region: region,\n            variants: variants,\n        };\n    }\n    return {\n        lang: !lang || lang === 'und' ? replacement.lang : lang,\n        script: script || replacement.script,\n        region: region || replacement.region,\n        variants: (0, tslib_1.__spreadArray)((0, tslib_1.__spreadArray)([], variants, true), replacement.variants, true),\n    };\n}\nfunction addLikelySubtags(tag) {\n    var ast = (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag);\n    var unicodeLangId = ast.lang;\n    var lang = unicodeLangId.lang, script = unicodeLangId.script, region = unicodeLangId.region, variants = unicodeLangId.variants;\n    if (script && region) {\n        var match_1 = intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, script: script, region: region, variants: [] })];\n        if (match_1) {\n            var parts_1 = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match_1);\n            ast.lang = mergeUnicodeLanguageId(undefined, undefined, undefined, variants, parts_1);\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n        }\n    }\n    if (script) {\n        var match_2 = intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, script: script, variants: [] })];\n        if (match_2) {\n            var parts_2 = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match_2);\n            ast.lang = mergeUnicodeLanguageId(undefined, undefined, region, variants, parts_2);\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n        }\n    }\n    if (region) {\n        var match_3 = intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, region: region, variants: [] })];\n        if (match_3) {\n            var parts_3 = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match_3);\n            ast.lang = mergeUnicodeLanguageId(undefined, script, undefined, variants, parts_3);\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n        }\n    }\n    var match = intl_getcanonicallocales_1.likelySubtags[lang] ||\n        intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: 'und', script: script, variants: [] })];\n    if (!match) {\n        throw new Error(\"No match for addLikelySubtags\");\n    }\n    var parts = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match);\n    ast.lang = mergeUnicodeLanguageId(undefined, script, region, variants, parts);\n    return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n}\n/**\n * From: https://github.com/unicode-org/icu/blob/4231ca5be053a22a1be24eb891817458c97db709/icu4j/main/classes/core/src/com/ibm/icu/util/ULocale.java#L2395\n * @param tag\n */\nfunction removeLikelySubtags(tag) {\n    var maxLocale = addLikelySubtags(tag);\n    if (!maxLocale) {\n        return tag;\n    }\n    maxLocale = (0, intl_getcanonicallocales_1.emitUnicodeLanguageId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(maxLocale)), { variants: [] }));\n    var ast = (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag);\n    var _a = ast.lang, lang = _a.lang, script = _a.script, region = _a.region, variants = _a.variants;\n    var trial = addLikelySubtags((0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, variants: [] }));\n    if (trial === maxLocale) {\n        return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, ast), { lang: mergeUnicodeLanguageId(lang, undefined, undefined, variants) }));\n    }\n    if (region) {\n        var trial_1 = addLikelySubtags((0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, region: region, variants: [] }));\n        if (trial_1 === maxLocale) {\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, ast), { lang: mergeUnicodeLanguageId(lang, undefined, region, variants) }));\n        }\n    }\n    if (script) {\n        var trial_2 = addLikelySubtags((0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, script: script, variants: [] }));\n        if (trial_2 === maxLocale) {\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, ast), { lang: mergeUnicodeLanguageId(lang, script, undefined, variants) }));\n        }\n    }\n    return tag;\n}\nvar Locale = /** @class */ (function () {\n    function Locale(tag, opts) {\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof Locale ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.Locale must be called with 'new'\");\n        }\n        var relevantExtensionKeys = Locale.relevantExtensionKeys;\n        var internalSlotsList = [\n            'initializedLocale',\n            'locale',\n            'calendar',\n            'collation',\n            'hourCycle',\n            'numberingSystem',\n        ];\n        if (relevantExtensionKeys.indexOf('kf') > -1) {\n            internalSlotsList.push('caseFirst');\n        }\n        if (relevantExtensionKeys.indexOf('kn') > -1) {\n            internalSlotsList.push('numeric');\n        }\n        if (tag === undefined) {\n            throw new TypeError(\"First argument to Intl.Locale constructor can't be empty or missing\");\n        }\n        if (typeof tag !== 'string' && typeof tag !== 'object') {\n            throw new TypeError('tag must be a string or object');\n        }\n        var internalSlots;\n        if (typeof tag === 'object' &&\n            (internalSlots = (0, get_internal_slots_1.default)(tag)) &&\n            internalSlots.initializedLocale) {\n            tag = internalSlots.locale;\n        }\n        else {\n            tag = tag.toString();\n        }\n        internalSlots = (0, get_internal_slots_1.default)(this);\n        var options = (0, ecma402_abstract_1.CoerceOptionsToObject)(opts);\n        tag = applyOptionsToTag(tag, options);\n        var opt = Object.create(null);\n        var calendar = (0, ecma402_abstract_1.GetOption)(options, 'calendar', 'string', undefined, undefined);\n        if (calendar !== undefined) {\n            if (!UNICODE_TYPE_REGEX.test(calendar)) {\n                throw new RangeError('invalid calendar');\n            }\n        }\n        opt.ca = calendar;\n        var collation = (0, ecma402_abstract_1.GetOption)(options, 'collation', 'string', undefined, undefined);\n        if (collation !== undefined) {\n            if (!UNICODE_TYPE_REGEX.test(collation)) {\n                throw new RangeError('invalid collation');\n            }\n        }\n        opt.co = collation;\n        var hc = (0, ecma402_abstract_1.GetOption)(options, 'hourCycle', 'string', ['h11', 'h12', 'h23', 'h24'], undefined);\n        opt.hc = hc;\n        var kf = (0, ecma402_abstract_1.GetOption)(options, 'caseFirst', 'string', ['upper', 'lower', 'false'], undefined);\n        opt.kf = kf;\n        var _kn = (0, ecma402_abstract_1.GetOption)(options, 'numeric', 'boolean', undefined, undefined);\n        var kn;\n        if (_kn !== undefined) {\n            kn = String(_kn);\n        }\n        opt.kn = kn;\n        var numberingSystem = (0, ecma402_abstract_1.GetOption)(options, 'numberingSystem', 'string', undefined, undefined);\n        if (numberingSystem !== undefined) {\n            if (!UNICODE_TYPE_REGEX.test(numberingSystem)) {\n                throw new RangeError('Invalid numberingSystem');\n            }\n        }\n        opt.nu = numberingSystem;\n        var r = applyUnicodeExtensionToTag(tag, opt, relevantExtensionKeys);\n        internalSlots.locale = r.locale;\n        internalSlots.calendar = r.ca;\n        internalSlots.collation = r.co;\n        internalSlots.hourCycle = r.hc;\n        if (relevantExtensionKeys.indexOf('kf') > -1) {\n            internalSlots.caseFirst = r.kf;\n        }\n        if (relevantExtensionKeys.indexOf('kn') > -1) {\n            internalSlots.numeric = (0, ecma402_abstract_1.SameValue)(r.kn, 'true');\n        }\n        internalSlots.numberingSystem = r.nu;\n    }\n    /**\n     * https://www.unicode.org/reports/tr35/#Likely_Subtags\n     */\n    Locale.prototype.maximize = function () {\n        var locale = (0, get_internal_slots_1.default)(this).locale;\n        try {\n            var maximizedLocale = addLikelySubtags(locale);\n            return new Locale(maximizedLocale);\n        }\n        catch (e) {\n            return new Locale(locale);\n        }\n    };\n    /**\n     * https://www.unicode.org/reports/tr35/#Likely_Subtags\n     */\n    Locale.prototype.minimize = function () {\n        var locale = (0, get_internal_slots_1.default)(this).locale;\n        try {\n            var minimizedLocale = removeLikelySubtags(locale);\n            return new Locale(minimizedLocale);\n        }\n        catch (e) {\n            return new Locale(locale);\n        }\n    };\n    Locale.prototype.toString = function () {\n        return (0, get_internal_slots_1.default)(this).locale;\n    };\n    Object.defineProperty(Locale.prototype, \"baseName\", {\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.emitUnicodeLanguageId)((0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"calendar\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).calendar;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"collation\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).collation;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"hourCycle\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).hourCycle;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"caseFirst\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).caseFirst;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"numeric\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).numeric;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"numberingSystem\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).numberingSystem;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"language\", {\n        /**\n         * https://tc39.es/proposal-intl-locale/#sec-Intl.Locale.prototype.language\n         */\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale).lang;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"script\", {\n        /**\n         * https://tc39.es/proposal-intl-locale/#sec-Intl.Locale.prototype.script\n         */\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale).script;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"region\", {\n        /**\n         * https://tc39.es/proposal-intl-locale/#sec-Intl.Locale.prototype.region\n         */\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale).region;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Locale.relevantExtensionKeys = RELEVANT_EXTENSION_KEYS;\n    return Locale;\n}());\nexports.Locale = Locale;\ntry {\n    if (typeof Symbol !== 'undefined') {\n        Object.defineProperty(Locale.prototype, Symbol.toStringTag, {\n            value: 'Intl.Locale',\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    Object.defineProperty(Locale.prototype.constructor, 'length', {\n        value: 1,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n}\ncatch (e) {\n    // Meta fix so we're test262-compliant, not important\n}\nexports.default = Locale;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _1 = require(\"./\");\nvar should_polyfill_1 = require(\"./should-polyfill\");\nif ((0, should_polyfill_1.shouldPolyfill)()) {\n    Object.defineProperty(Intl, 'Locale', {\n        value: _1.Locale,\n        writable: true,\n        enumerable: false,\n        configurable: true,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldPolyfill = void 0;\n/**\n * https://bugs.chromium.org/p/v8/issues/detail?id=10682\n */\nfunction hasIntlGetCanonicalLocalesBug() {\n    try {\n        return new Intl.Locale('und-x-private').toString() === 'x-private';\n    }\n    catch (e) {\n        return true;\n    }\n}\nfunction shouldPolyfill() {\n    return !('Locale' in Intl) || hasIntlGetCanonicalLocalesBug();\n}\nexports.shouldPolyfill = shouldPolyfill;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GetOperands = void 0;\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-getoperands\n * @param s\n */\nfunction GetOperands(s) {\n    (0, ecma402_abstract_1.invariant)(typeof s === 'string', \"GetOperands should have been called with a string\");\n    var n = (0, ecma402_abstract_1.ToNumber)(s);\n    (0, ecma402_abstract_1.invariant)(isFinite(n), 'n should be finite');\n    var dp = s.indexOf('.');\n    var iv;\n    var f;\n    var v;\n    var fv = '';\n    if (dp === -1) {\n        iv = n;\n        f = 0;\n        v = 0;\n    }\n    else {\n        iv = s.slice(0, dp);\n        fv = s.slice(dp, s.length);\n        f = (0, ecma402_abstract_1.ToNumber)(fv);\n        v = fv.length;\n    }\n    var i = Math.abs((0, ecma402_abstract_1.ToNumber)(iv));\n    var w;\n    var t;\n    if (f !== 0) {\n        var ft = fv.replace(/0+$/, '');\n        w = ft.length;\n        t = (0, ecma402_abstract_1.ToNumber)(ft);\n    }\n    else {\n        w = 0;\n        t = 0;\n    }\n    return {\n        Number: n,\n        IntegerDigits: i,\n        NumberOfFractionDigits: v,\n        NumberOfFractionDigitsWithoutTrailing: w,\n        FractionDigits: f,\n        FractionDigitsWithoutTrailing: t,\n    };\n}\nexports.GetOperands = GetOperands;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InitializePluralRules = void 0;\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar intl_localematcher_1 = require(\"@formatjs/intl-localematcher\");\nfunction InitializePluralRules(pl, locales, options, _a) {\n    var availableLocales = _a.availableLocales, relevantExtensionKeys = _a.relevantExtensionKeys, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale, getInternalSlots = _a.getInternalSlots;\n    var requestedLocales = (0, ecma402_abstract_1.CanonicalizeLocaleList)(locales);\n    var opt = Object.create(null);\n    var opts = (0, ecma402_abstract_1.CoerceOptionsToObject)(options);\n    var internalSlots = getInternalSlots(pl);\n    internalSlots.initializedPluralRules = true;\n    var matcher = (0, ecma402_abstract_1.GetOption)(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n    opt.localeMatcher = matcher;\n    internalSlots.type = (0, ecma402_abstract_1.GetOption)(opts, 'type', 'string', ['cardinal', 'ordinal'], 'cardinal');\n    (0, ecma402_abstract_1.SetNumberFormatDigitOptions)(internalSlots, opts, 0, 3, 'standard');\n    var r = (0, intl_localematcher_1.ResolveLocale)(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    internalSlots.locale = r.locale;\n    return pl;\n}\nexports.InitializePluralRules = InitializePluralRules;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResolvePlural = void 0;\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar GetOperands_1 = require(\"./GetOperands\");\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-resolveplural\n * @param pl\n * @param n\n * @param PluralRuleSelect Has to pass in bc it's implementation-specific\n */\nfunction ResolvePlural(pl, n, _a) {\n    var getInternalSlots = _a.getInternalSlots, PluralRuleSelect = _a.PluralRuleSelect;\n    var internalSlots = getInternalSlots(pl);\n    (0, ecma402_abstract_1.invariant)((0, ecma402_abstract_1.Type)(internalSlots) === 'Object', 'pl has to be an object');\n    (0, ecma402_abstract_1.invariant)('initializedPluralRules' in internalSlots, 'pluralrules must be initialized');\n    (0, ecma402_abstract_1.invariant)((0, ecma402_abstract_1.Type)(n) === 'Number', 'n must be a number');\n    if (!isFinite(n)) {\n        return 'other';\n    }\n    var locale = internalSlots.locale, type = internalSlots.type;\n    var res = (0, ecma402_abstract_1.FormatNumericToString)(internalSlots, n);\n    var s = res.formattedString;\n    var operands = (0, GetOperands_1.GetOperands)(s);\n    return PluralRuleSelect(locale, type, n, operands);\n}\nexports.ResolvePlural = ResolvePlural;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar internalSlotMap = new WeakMap();\nfunction getInternalSlots(x) {\n    var internalSlots = internalSlotMap.get(x);\n    if (!internalSlots) {\n        internalSlots = Object.create(null);\n        internalSlotMap.set(x, internalSlots);\n    }\n    return internalSlots;\n}\nexports.default = getInternalSlots;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PluralRules = void 0;\nvar tslib_1 = require(\"tslib\");\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar InitializePluralRules_1 = require(\"./abstract/InitializePluralRules\");\nvar ResolvePlural_1 = require(\"./abstract/ResolvePlural\");\nvar get_internal_slots_1 = (0, tslib_1.__importDefault)(require(\"./get_internal_slots\"));\nfunction validateInstance(instance, method) {\n    if (!(instance instanceof PluralRules)) {\n        throw new TypeError(\"Method Intl.PluralRules.prototype.\".concat(method, \" called on incompatible receiver \").concat(String(instance)));\n    }\n}\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-pluralruleselect\n * @param locale\n * @param type\n * @param _n\n * @param param3\n */\nfunction PluralRuleSelect(locale, type, _n, _a) {\n    var IntegerDigits = _a.IntegerDigits, NumberOfFractionDigits = _a.NumberOfFractionDigits, FractionDigits = _a.FractionDigits;\n    return PluralRules.localeData[locale].fn(NumberOfFractionDigits\n        ? \"\".concat(IntegerDigits, \".\").concat(FractionDigits)\n        : IntegerDigits, type === 'ordinal');\n}\nvar PluralRules = /** @class */ (function () {\n    function PluralRules(locales, options) {\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof PluralRules ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.PluralRules must be called with 'new'\");\n        }\n        return (0, InitializePluralRules_1.InitializePluralRules)(this, locales, options, {\n            availableLocales: PluralRules.availableLocales,\n            relevantExtensionKeys: PluralRules.relevantExtensionKeys,\n            localeData: PluralRules.localeData,\n            getDefaultLocale: PluralRules.getDefaultLocale,\n            getInternalSlots: get_internal_slots_1.default,\n        });\n    }\n    PluralRules.prototype.resolvedOptions = function () {\n        validateInstance(this, 'resolvedOptions');\n        var opts = Object.create(null);\n        var internalSlots = (0, get_internal_slots_1.default)(this);\n        opts.locale = internalSlots.locale;\n        opts.type = internalSlots.type;\n        [\n            'minimumIntegerDigits',\n            'minimumFractionDigits',\n            'maximumFractionDigits',\n            'minimumSignificantDigits',\n            'maximumSignificantDigits',\n        ].forEach(function (field) {\n            var val = internalSlots[field];\n            if (val !== undefined) {\n                opts[field] = val;\n            }\n        });\n        opts.pluralCategories = (0, tslib_1.__spreadArray)([], PluralRules.localeData[opts.locale].categories[opts.type], true);\n        return opts;\n    };\n    PluralRules.prototype.select = function (val) {\n        var pr = this;\n        validateInstance(pr, 'select');\n        var n = (0, ecma402_abstract_1.ToNumber)(val);\n        return (0, ResolvePlural_1.ResolvePlural)(pr, n, { getInternalSlots: get_internal_slots_1.default, PluralRuleSelect: PluralRuleSelect });\n    };\n    PluralRules.prototype.toString = function () {\n        return '[object Intl.PluralRules]';\n    };\n    PluralRules.supportedLocalesOf = function (locales, options) {\n        return (0, ecma402_abstract_1.SupportedLocales)(PluralRules.availableLocales, (0, ecma402_abstract_1.CanonicalizeLocaleList)(locales), options);\n    };\n    PluralRules.__addLocaleData = function () {\n        var data = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            data[_i] = arguments[_i];\n        }\n        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n            var _b = data_1[_a], d = _b.data, locale = _b.locale;\n            PluralRules.localeData[locale] = d;\n            PluralRules.availableLocales.add(locale);\n            if (!PluralRules.__defaultLocale) {\n                PluralRules.__defaultLocale = locale;\n            }\n        }\n    };\n    PluralRules.getDefaultLocale = function () {\n        return PluralRules.__defaultLocale;\n    };\n    PluralRules.localeData = {};\n    PluralRules.availableLocales = new Set();\n    PluralRules.__defaultLocale = '';\n    PluralRules.relevantExtensionKeys = [];\n    PluralRules.polyfilled = true;\n    return PluralRules;\n}());\nexports.PluralRules = PluralRules;\ntry {\n    // IE11 does not have Symbol\n    if (typeof Symbol !== 'undefined') {\n        Object.defineProperty(PluralRules.prototype, Symbol.toStringTag, {\n            value: 'Intl.PluralRules',\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    try {\n        // https://github.com/tc39/test262/blob/master/test/intl402/PluralRules/length.js\n        Object.defineProperty(PluralRules, 'length', {\n            value: 0,\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    catch (error) {\n        // IE 11 sets Function.prototype.length to be non-configurable which will cause the\n        // above Object.defineProperty to throw an error.\n    }\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/length.js\n    Object.defineProperty(PluralRules.prototype.constructor, 'length', {\n        value: 0,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/length.js\n    Object.defineProperty(PluralRules.supportedLocalesOf, 'length', {\n        value: 1,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n}\ncatch (ex) {\n    // Meta fixes for test262\n}\n","/* @generated */\n// prettier-ignore\nif (Intl.PluralRules && typeof Intl.PluralRules.__addLocaleData === 'function') {\n  Intl.PluralRules.__addLocaleData({\"data\":{\"categories\":{\"cardinal\":[\"one\",\"other\"],\"ordinal\":[\"one\",\"two\",\"few\",\"other\"]},\"fn\":function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n, n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return n10 == 1 && n100 != 11 ? 'one'\n    : n10 == 2 && n100 != 12 ? 'two'\n    : n10 == 3 && n100 != 13 ? 'few'\n    : 'other';\n  return n == 1 && v0 ? 'one' : 'other';\n}},\"locale\":\"en\"})\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _1 = require(\"./\");\nvar should_polyfill_1 = require(\"./should-polyfill\");\nif ((0, should_polyfill_1.shouldPolyfill)()) {\n    Object.defineProperty(Intl, 'PluralRules', {\n        value: _1.PluralRules,\n        writable: true,\n        enumerable: false,\n        configurable: true,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldPolyfill = void 0;\nvar intl_localematcher_1 = require(\"@formatjs/intl-localematcher\");\nvar supported_locales_1 = require(\"./supported-locales\");\nfunction supportedLocalesOf(locale) {\n    if (!locale) {\n        return true;\n    }\n    var locales = Array.isArray(locale) ? locale : [locale];\n    return Intl.PluralRules.supportedLocalesOf(locales).length === locales.length;\n}\nfunction shouldPolyfill(locale) {\n    if (locale === void 0) { locale = 'en'; }\n    if (!('PluralRules' in Intl) ||\n        new Intl.PluralRules('en', { minimumFractionDigits: 2 }).select(1) ===\n            'one' ||\n        !supportedLocalesOf(locale)) {\n        return locale ? (0, intl_localematcher_1.match)([locale], supported_locales_1.supportedLocales, 'en') : undefined;\n    }\n}\nexports.shouldPolyfill = shouldPolyfill;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.supportedLocales = void 0;\n// This file is generated from supported-locales-gen.ts\nexports.supportedLocales = [\"af\", \"ak\", \"am\", \"an\", \"ar\", \"ars\", \"as\", \"asa\", \"ast\", \"az\", \"bal\", \"be\", \"bem\", \"bez\", \"bg\", \"bho\", \"bm\", \"bn\", \"bo\", \"br\", \"brx\", \"bs\", \"ca\", \"ce\", \"ceb\", \"cgg\", \"chr\", \"ckb\", \"cs\", \"cy\", \"da\", \"de\", \"doi\", \"dsb\", \"dv\", \"dz\", \"ee\", \"el\", \"en\", \"eo\", \"es\", \"et\", \"eu\", \"fa\", \"ff\", \"fi\", \"fil\", \"fo\", \"fr\", \"fur\", \"fy\", \"ga\", \"gd\", \"gl\", \"gsw\", \"gu\", \"guw\", \"gv\", \"ha\", \"haw\", \"he\", \"hi\", \"hnj\", \"hr\", \"hsb\", \"hu\", \"hy\", \"ia\", \"id\", \"ig\", \"ii\", \"io\", \"is\", \"it\", \"iu\", \"ja\", \"jbo\", \"jgo\", \"jmc\", \"jv\", \"jw\", \"ka\", \"kab\", \"kaj\", \"kcg\", \"kde\", \"kea\", \"kk\", \"kkj\", \"kl\", \"km\", \"kn\", \"ko\", \"ks\", \"ksb\", \"ksh\", \"ku\", \"kw\", \"ky\", \"lag\", \"lb\", \"lg\", \"lij\", \"lkt\", \"ln\", \"lo\", \"lt\", \"lv\", \"mas\", \"mg\", \"mgo\", \"mk\", \"ml\", \"mn\", \"mo\", \"mr\", \"ms\", \"mt\", \"my\", \"nah\", \"naq\", \"nb\", \"nd\", \"ne\", \"nl\", \"nn\", \"nnh\", \"no\", \"nqo\", \"nr\", \"nso\", \"ny\", \"nyn\", \"om\", \"or\", \"os\", \"osa\", \"pa\", \"pap\", \"pcm\", \"pl\", \"prg\", \"ps\", \"pt-PT\", \"pt\", \"rm\", \"ro\", \"rof\", \"ru\", \"rwk\", \"sah\", \"saq\", \"sat\", \"sc\", \"scn\", \"sd\", \"sdh\", \"se\", \"seh\", \"ses\", \"sg\", \"sh\", \"shi\", \"si\", \"sk\", \"sl\", \"sma\", \"smi\", \"smj\", \"smn\", \"sms\", \"sn\", \"so\", \"sq\", \"sr\", \"ss\", \"ssy\", \"st\", \"su\", \"sv\", \"sw\", \"syr\", \"ta\", \"te\", \"teo\", \"th\", \"ti\", \"tig\", \"tk\", \"tl\", \"tn\", \"to\", \"tpi\", \"tr\", \"ts\", \"tzm\", \"ug\", \"uk\", \"und\", \"ur\", \"uz\", \"ve\", \"vi\", \"vo\", \"vun\", \"wa\", \"wae\", \"wo\", \"xh\", \"xog\", \"yi\", \"yo\", \"yue\", \"zh\", \"zu\"];\n","\"use strict\";\n// Type-only circular import\n// eslint-disable-next-line import/no-cycle\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar internalSlotMap = new WeakMap();\nfunction getInternalSlots(x) {\n    var internalSlots = internalSlotMap.get(x);\n    if (!internalSlots) {\n        internalSlots = Object.create(null);\n        internalSlotMap.set(x, internalSlots);\n    }\n    return internalSlots;\n}\nexports.default = getInternalSlots;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar get_internal_slots_1 = tslib_1.__importDefault(require(\"./get_internal_slots\"));\nvar RelativeTimeFormat = /** @class */ (function () {\n    function RelativeTimeFormat(locales, options) {\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof RelativeTimeFormat ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.RelativeTimeFormat must be called with 'new'\");\n        }\n        return ecma402_abstract_1.InitializeRelativeTimeFormat(this, locales, options, {\n            getInternalSlots: get_internal_slots_1.default,\n            availableLocales: RelativeTimeFormat.availableLocales,\n            relevantExtensionKeys: RelativeTimeFormat.relevantExtensionKeys,\n            localeData: RelativeTimeFormat.localeData,\n            getDefaultLocale: RelativeTimeFormat.getDefaultLocale,\n        });\n    }\n    RelativeTimeFormat.prototype.format = function (value, unit) {\n        if (typeof this !== 'object') {\n            throw new TypeError('format was called on a non-object');\n        }\n        var internalSlots = get_internal_slots_1.default(this);\n        if (!internalSlots.initializedRelativeTimeFormat) {\n            throw new TypeError('format was called on a invalid context');\n        }\n        return ecma402_abstract_1.PartitionRelativeTimePattern(this, Number(value), ecma402_abstract_1.ToString(unit), {\n            getInternalSlots: get_internal_slots_1.default,\n        })\n            .map(function (el) { return el.value; })\n            .join('');\n    };\n    RelativeTimeFormat.prototype.formatToParts = function (value, unit) {\n        if (typeof this !== 'object') {\n            throw new TypeError('formatToParts was called on a non-object');\n        }\n        var internalSlots = get_internal_slots_1.default(this);\n        if (!internalSlots.initializedRelativeTimeFormat) {\n            throw new TypeError('formatToParts was called on a invalid context');\n        }\n        return ecma402_abstract_1.PartitionRelativeTimePattern(this, Number(value), ecma402_abstract_1.ToString(unit), { getInternalSlots: get_internal_slots_1.default });\n    };\n    RelativeTimeFormat.prototype.resolvedOptions = function () {\n        if (typeof this !== 'object') {\n            throw new TypeError('resolvedOptions was called on a non-object');\n        }\n        var internalSlots = get_internal_slots_1.default(this);\n        if (!internalSlots.initializedRelativeTimeFormat) {\n            throw new TypeError('resolvedOptions was called on a invalid context');\n        }\n        // test262/test/intl402/RelativeTimeFormat/prototype/resolvedOptions/type.js\n        return {\n            locale: internalSlots.locale,\n            style: internalSlots.style,\n            numeric: internalSlots.numeric,\n            numberingSystem: internalSlots.numberingSystem,\n        };\n    };\n    RelativeTimeFormat.supportedLocalesOf = function (locales, options) {\n        return ecma402_abstract_1.SupportedLocales(RelativeTimeFormat.availableLocales, ecma402_abstract_1.CanonicalizeLocaleList(locales), options);\n    };\n    RelativeTimeFormat.__addLocaleData = function () {\n        var data = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            data[_i] = arguments[_i];\n        }\n        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n            var _b = data_1[_a], d = _b.data, locale = _b.locale;\n            var minimizedLocale = new Intl.Locale(locale)\n                .minimize()\n                .toString();\n            RelativeTimeFormat.localeData[locale] = RelativeTimeFormat.localeData[minimizedLocale] = d;\n            RelativeTimeFormat.availableLocales.add(minimizedLocale);\n            RelativeTimeFormat.availableLocales.add(locale);\n            if (!RelativeTimeFormat.__defaultLocale) {\n                RelativeTimeFormat.__defaultLocale = minimizedLocale;\n            }\n        }\n    };\n    RelativeTimeFormat.getDefaultLocale = function () {\n        return RelativeTimeFormat.__defaultLocale;\n    };\n    RelativeTimeFormat.localeData = {};\n    RelativeTimeFormat.availableLocales = new Set();\n    RelativeTimeFormat.__defaultLocale = '';\n    RelativeTimeFormat.relevantExtensionKeys = ['nu'];\n    RelativeTimeFormat.polyfilled = true;\n    return RelativeTimeFormat;\n}());\nexports.default = RelativeTimeFormat;\ntry {\n    // IE11 does not have Symbol\n    if (typeof Symbol !== 'undefined') {\n        Object.defineProperty(RelativeTimeFormat.prototype, Symbol.toStringTag, {\n            value: 'Intl.RelativeTimeFormat',\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/length.js\n    Object.defineProperty(RelativeTimeFormat.prototype.constructor, 'length', {\n        value: 0,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/length.js\n    Object.defineProperty(RelativeTimeFormat.supportedLocalesOf, 'length', {\n        value: 1,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n}\ncatch (e) {\n    // Meta fix so we're test262-compliant, not important\n}\n","/* @generated */\t\n// prettier-ignore\nif (Intl.RelativeTimeFormat && typeof Intl.RelativeTimeFormat.__addLocaleData === 'function') {\n  Intl.RelativeTimeFormat.__addLocaleData({\"data\":{\"nu\":[\"latn\"],\"year\":{\"0\":\"this year\",\"1\":\"next year\",\"future\":{\"one\":\"in {0} year\",\"other\":\"in {0} years\"},\"past\":{\"one\":\"{0} year ago\",\"other\":\"{0} years ago\"},\"-1\":\"last year\"},\"year-short\":{\"0\":\"this yr.\",\"1\":\"next yr.\",\"future\":{\"one\":\"in {0} yr.\",\"other\":\"in {0} yr.\"},\"past\":{\"one\":\"{0} yr. ago\",\"other\":\"{0} yr. ago\"},\"-1\":\"last yr.\"},\"year-narrow\":{\"0\":\"this yr.\",\"1\":\"next yr.\",\"future\":{\"one\":\"in {0} yr.\",\"other\":\"in {0} yr.\"},\"past\":{\"one\":\"{0} yr. ago\",\"other\":\"{0} yr. ago\"},\"-1\":\"last yr.\"},\"quarter\":{\"0\":\"this quarter\",\"1\":\"next quarter\",\"future\":{\"one\":\"in {0} quarter\",\"other\":\"in {0} quarters\"},\"past\":{\"one\":\"{0} quarter ago\",\"other\":\"{0} quarters ago\"},\"-1\":\"last quarter\"},\"quarter-short\":{\"0\":\"this qtr.\",\"1\":\"next qtr.\",\"future\":{\"one\":\"in {0} qtr.\",\"other\":\"in {0} qtrs.\"},\"past\":{\"one\":\"{0} qtr. ago\",\"other\":\"{0} qtrs. ago\"},\"-1\":\"last qtr.\"},\"quarter-narrow\":{\"0\":\"this qtr.\",\"1\":\"next qtr.\",\"future\":{\"one\":\"in {0} qtr.\",\"other\":\"in {0} qtrs.\"},\"past\":{\"one\":\"{0} qtr. ago\",\"other\":\"{0} qtrs. ago\"},\"-1\":\"last qtr.\"},\"month\":{\"0\":\"this month\",\"1\":\"next month\",\"future\":{\"one\":\"in {0} month\",\"other\":\"in {0} months\"},\"past\":{\"one\":\"{0} month ago\",\"other\":\"{0} months ago\"},\"-1\":\"last month\"},\"month-short\":{\"0\":\"this mo.\",\"1\":\"next mo.\",\"future\":{\"one\":\"in {0} mo.\",\"other\":\"in {0} mo.\"},\"past\":{\"one\":\"{0} mo. ago\",\"other\":\"{0} mo. ago\"},\"-1\":\"last mo.\"},\"month-narrow\":{\"0\":\"this mo.\",\"1\":\"next mo.\",\"future\":{\"one\":\"in {0} mo.\",\"other\":\"in {0} mo.\"},\"past\":{\"one\":\"{0} mo. ago\",\"other\":\"{0} mo. ago\"},\"-1\":\"last mo.\"},\"week\":{\"0\":\"this week\",\"1\":\"next week\",\"future\":{\"one\":\"in {0} week\",\"other\":\"in {0} weeks\"},\"past\":{\"one\":\"{0} week ago\",\"other\":\"{0} weeks ago\"},\"-1\":\"last week\"},\"week-short\":{\"0\":\"this wk.\",\"1\":\"next wk.\",\"future\":{\"one\":\"in {0} wk.\",\"other\":\"in {0} wk.\"},\"past\":{\"one\":\"{0} wk. ago\",\"other\":\"{0} wk. ago\"},\"-1\":\"last wk.\"},\"week-narrow\":{\"0\":\"this wk.\",\"1\":\"next wk.\",\"future\":{\"one\":\"in {0} wk.\",\"other\":\"in {0} wk.\"},\"past\":{\"one\":\"{0} wk. ago\",\"other\":\"{0} wk. ago\"},\"-1\":\"last wk.\"},\"day\":{\"0\":\"today\",\"1\":\"tomorrow\",\"future\":{\"one\":\"in {0} day\",\"other\":\"in {0} days\"},\"past\":{\"one\":\"{0} day ago\",\"other\":\"{0} days ago\"},\"-1\":\"yesterday\"},\"day-short\":{\"0\":\"today\",\"1\":\"tomorrow\",\"future\":{\"one\":\"in {0} day\",\"other\":\"in {0} days\"},\"past\":{\"one\":\"{0} day ago\",\"other\":\"{0} days ago\"},\"-1\":\"yesterday\"},\"day-narrow\":{\"0\":\"today\",\"1\":\"tomorrow\",\"future\":{\"one\":\"in {0} day\",\"other\":\"in {0} days\"},\"past\":{\"one\":\"{0} day ago\",\"other\":\"{0} days ago\"},\"-1\":\"yesterday\"},\"hour\":{\"0\":\"this hour\",\"future\":{\"one\":\"in {0} hour\",\"other\":\"in {0} hours\"},\"past\":{\"one\":\"{0} hour ago\",\"other\":\"{0} hours ago\"}},\"hour-short\":{\"0\":\"this hour\",\"future\":{\"one\":\"in {0} hr.\",\"other\":\"in {0} hr.\"},\"past\":{\"one\":\"{0} hr. ago\",\"other\":\"{0} hr. ago\"}},\"hour-narrow\":{\"0\":\"this hour\",\"future\":{\"one\":\"in {0} hr.\",\"other\":\"in {0} hr.\"},\"past\":{\"one\":\"{0} hr. ago\",\"other\":\"{0} hr. ago\"}},\"minute\":{\"0\":\"this minute\",\"future\":{\"one\":\"in {0} minute\",\"other\":\"in {0} minutes\"},\"past\":{\"one\":\"{0} minute ago\",\"other\":\"{0} minutes ago\"}},\"minute-short\":{\"0\":\"this minute\",\"future\":{\"one\":\"in {0} min.\",\"other\":\"in {0} min.\"},\"past\":{\"one\":\"{0} min. ago\",\"other\":\"{0} min. ago\"}},\"minute-narrow\":{\"0\":\"this minute\",\"future\":{\"one\":\"in {0} min.\",\"other\":\"in {0} min.\"},\"past\":{\"one\":\"{0} min. ago\",\"other\":\"{0} min. ago\"}},\"second\":{\"0\":\"now\",\"future\":{\"one\":\"in {0} second\",\"other\":\"in {0} seconds\"},\"past\":{\"one\":\"{0} second ago\",\"other\":\"{0} seconds ago\"}},\"second-short\":{\"0\":\"now\",\"future\":{\"one\":\"in {0} sec.\",\"other\":\"in {0} sec.\"},\"past\":{\"one\":\"{0} sec. ago\",\"other\":\"{0} sec. ago\"}},\"second-narrow\":{\"0\":\"now\",\"future\":{\"one\":\"in {0} sec.\",\"other\":\"in {0} sec.\"},\"past\":{\"one\":\"{0} sec. ago\",\"other\":\"{0} sec. ago\"}}},\"locale\":\"en\"}\n)\n}","/**\n * Cannot do Math.log(x) / Math.log(10) bc if IEEE floating point issue\n * @param x number\n */\nexport function getMagnitude(x) {\n    // Cannot count string length via Number.toString because it may use scientific notation\n    // for very small or very large numbers.\n    return Math.floor(Math.log(x) * Math.LOG10E);\n}\nexport function repeat(s, times) {\n    if (typeof s.repeat === 'function') {\n        return s.repeat(times);\n    }\n    var arr = new Array(times);\n    for (var i = 0; i < arr.length; i++) {\n        arr[i] = s;\n    }\n    return arr.join('');\n}\nexport function setInternalSlot(map, pl, field, value) {\n    if (!map.get(pl)) {\n        map.set(pl, Object.create(null));\n    }\n    var slots = map.get(pl);\n    slots[field] = value;\n}\nexport function setMultiInternalSlots(map, pl, props) {\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\n        var k = _a[_i];\n        setInternalSlot(map, pl, k, props[k]);\n    }\n}\nexport function getInternalSlot(map, pl, field) {\n    return getMultiInternalSlots(map, pl, field)[field];\n}\nexport function getMultiInternalSlots(map, pl) {\n    var fields = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        fields[_i - 2] = arguments[_i];\n    }\n    var slots = map.get(pl);\n    if (!slots) {\n        throw new TypeError(pl + \" InternalSlot has not been initialized\");\n    }\n    return fields.reduce(function (all, f) {\n        all[f] = slots[f];\n        return all;\n    }, Object.create(null));\n}\nexport function isLiteralPart(patternPart) {\n    return patternPart.type === 'literal';\n}\n/*\n  17 ECMAScript Standard Built-in Objects:\n    Every built-in Function object, including constructors, that is not\n    identified as an anonymous function has a name property whose value\n    is a String.\n\n    Unless otherwise specified, the name property of a built-in Function\n    object, if it exists, has the attributes { [[Writable]]: false,\n    [[Enumerable]]: false, [[Configurable]]: true }.\n*/\nexport function defineProperty(target, name, _a) {\n    var value = _a.value;\n    Object.defineProperty(target, name, {\n        configurable: true,\n        enumerable: false,\n        writable: true,\n        value: value,\n    });\n}\nexport var UNICODE_EXTENSION_SEQUENCE_REGEX = /-u(?:-[0-9a-z]{2,8})+/gi;\nexport function invariant(condition, message, Err) {\n    if (Err === void 0) { Err = Error; }\n    if (!condition) {\n        throw new Err(message);\n    }\n}\n","export var DATE_TIME_PROPS = [\n    'weekday',\n    'era',\n    'year',\n    'month',\n    'day',\n    'hour',\n    'minute',\n    'second',\n    'timeZoneName',\n];\nexport var removalPenalty = 120;\nexport var additionPenalty = 20;\nexport var differentNumericTypePenalty = 15;\nexport var longLessPenalty = 8;\nexport var longMorePenalty = 6;\nexport var shortLessPenalty = 6;\nexport var shortMorePenalty = 3;\n","export var RangePatternType;\n(function (RangePatternType) {\n    RangePatternType[\"startRange\"] = \"startRange\";\n    RangePatternType[\"shared\"] = \"shared\";\n    RangePatternType[\"endRange\"] = \"endRange\";\n})(RangePatternType || (RangePatternType = {}));\n","import { __assign } from \"tslib\";\nimport { RangePatternType, } from '../types/date-time';\n/**\n * https://unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * Credit: https://github.com/caridy/intl-datetimeformat-pattern/blob/master/index.js\n * with some tweaks\n */\nvar DATE_TIME_REGEX = /(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;\n// trim patterns after transformations\nvar expPatternTrimmer = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\nfunction matchSkeletonPattern(match, result) {\n    var len = match.length;\n    switch (match[0]) {\n        // Era\n        case 'G':\n            result.era = len === 4 ? 'long' : len === 5 ? 'narrow' : 'short';\n            return '{era}';\n        // Year\n        case 'y':\n        case 'Y':\n        case 'u':\n        case 'U':\n        case 'r':\n            result.year = len === 2 ? '2-digit' : 'numeric';\n            return '{year}';\n        // Quarter\n        case 'q':\n        case 'Q':\n            throw new RangeError('`w/Q` (quarter) patterns are not supported');\n        // Month\n        case 'M':\n        case 'L':\n            result.month = ['numeric', '2-digit', 'short', 'long', 'narrow'][len - 1];\n            return '{month}';\n        // Week\n        case 'w':\n        case 'W':\n            throw new RangeError('`w/W` (week of year) patterns are not supported');\n        case 'd':\n            result.day = ['numeric', '2-digit'][len - 1];\n            return '{day}';\n        case 'D':\n        case 'F':\n        case 'g':\n            result.day = 'numeric';\n            return '{day}';\n        // Weekday\n        case 'E':\n            result.weekday = len === 4 ? 'long' : len === 5 ? 'narrow' : 'short';\n            return '{weekday}';\n        case 'e':\n            result.weekday = [\n                undefined,\n                undefined,\n                'short',\n                'long',\n                'narrow',\n                'short',\n            ][len - 1];\n            return '{weekday}';\n        case 'c':\n            result.weekday = [\n                undefined,\n                undefined,\n                'short',\n                'long',\n                'narrow',\n                'short',\n            ][len - 1];\n            return '{weekday}';\n        // Period\n        case 'a': // AM, PM\n        case 'b': // am, pm, noon, midnight\n        case 'B': // flexible day periods\n            result.hour12 = true;\n            return '{ampm}';\n        // Hour\n        case 'h':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            result.hour12 = true;\n            return '{hour}';\n        case 'H':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            return '{hour}';\n        case 'K':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            result.hour12 = true;\n            return '{hour}';\n        case 'k':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            return '{hour}';\n        case 'j':\n        case 'J':\n        case 'C':\n            throw new RangeError('`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead');\n        // Minute\n        case 'm':\n            result.minute = ['numeric', '2-digit'][len - 1];\n            return '{minute}';\n        // Second\n        case 's':\n            result.second = ['numeric', '2-digit'][len - 1];\n            return '{second}';\n        case 'S':\n        case 'A':\n            result.second = 'numeric';\n            return '{second}';\n        // Zone\n        case 'z': // 1..3, 4: specific non-location format\n        case 'Z': // 1..3, 4, 5: The ISO8601 varios formats\n        case 'O': // 1, 4: miliseconds in day short, long\n        case 'v': // 1, 4: generic non-location format\n        case 'V': // 1, 2, 3, 4: time zone ID or city\n        case 'X': // 1, 2, 3, 4: The ISO8601 varios formats\n        case 'x': // 1, 2, 3, 4: The ISO8601 varios formats\n            result.timeZoneName = len < 4 ? 'short' : 'long';\n            return '{timeZoneName}';\n    }\n    return '';\n}\nfunction skeletonTokenToTable2(c) {\n    switch (c) {\n        // Era\n        case 'G':\n            return 'era';\n        // Year\n        case 'y':\n        case 'Y':\n        case 'u':\n        case 'U':\n        case 'r':\n            return 'year';\n        // Month\n        case 'M':\n        case 'L':\n            return 'month';\n        // Day\n        case 'd':\n        case 'D':\n        case 'F':\n        case 'g':\n            return 'day';\n        // Period\n        case 'a': // AM, PM\n        case 'b': // am, pm, noon, midnight\n        case 'B': // flexible day periods\n            return 'ampm';\n        // Hour\n        case 'h':\n        case 'H':\n        case 'K':\n        case 'k':\n            return 'hour';\n        // Minute\n        case 'm':\n            return 'minute';\n        // Second\n        case 's':\n        case 'S':\n        case 'A':\n            return 'second';\n        default:\n            throw new RangeError('Invalid range pattern token');\n    }\n}\nexport function processDateTimePattern(pattern, result) {\n    var literals = [];\n    // Use skeleton to populate result, but use mapped pattern to populate pattern\n    var pattern12 = pattern\n        // Double apostrophe\n        .replace(/'{2}/g, '{apostrophe}')\n        // Apostrophe-escaped\n        .replace(/'(.*?)'/g, function (_, literal) {\n        literals.push(literal);\n        return \"$$\" + (literals.length - 1) + \"$$\";\n    })\n        .replace(DATE_TIME_REGEX, function (m) { return matchSkeletonPattern(m, result || {}); });\n    //Restore literals\n    if (literals.length) {\n        pattern12 = pattern12\n            .replace(/\\$\\$(\\d+)\\$\\$/g, function (_, i) {\n            return literals[+i];\n        })\n            .replace(/\\{apostrophe\\}/g, \"'\");\n    }\n    // Handle apostrophe-escaped things\n    return [\n        pattern12\n            .replace(/([\\s\\uFEFF\\xA0])\\{ampm\\}([\\s\\uFEFF\\xA0])/, '$1')\n            .replace('{ampm}', '')\n            .replace(expPatternTrimmer, ''),\n        pattern12,\n    ];\n}\n/**\n * Parse Date time skeleton into Intl.DateTimeFormatOptions\n * Ref: https://unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * @public\n * @param skeleton skeleton string\n */\nexport function parseDateTimeSkeleton(skeleton, rawPattern, rangePatterns, intervalFormatFallback) {\n    if (rawPattern === void 0) { rawPattern = skeleton; }\n    var result = {\n        pattern: '',\n        pattern12: '',\n        skeleton: skeleton,\n        rawPattern: rawPattern,\n        rangePatterns: {},\n        rangePatterns12: {},\n    };\n    if (rangePatterns) {\n        for (var k in rangePatterns) {\n            var key = skeletonTokenToTable2(k);\n            var rawPattern_1 = rangePatterns[k];\n            var intervalResult = {\n                patternParts: [],\n            };\n            var _a = processDateTimePattern(rawPattern_1, intervalResult), pattern_1 = _a[0], pattern12_1 = _a[1];\n            result.rangePatterns[key] = __assign(__assign({}, intervalResult), { patternParts: splitRangePattern(pattern_1) });\n            result.rangePatterns12[key] = __assign(__assign({}, intervalResult), { patternParts: splitRangePattern(pattern12_1) });\n        }\n    }\n    else if (intervalFormatFallback) {\n        var patternParts = splitFallbackRangePattern(intervalFormatFallback);\n        result.rangePatterns.default = {\n            patternParts: patternParts,\n        };\n        result.rangePatterns12.default = {\n            patternParts: patternParts,\n        };\n    }\n    // Process skeleton\n    skeleton.replace(DATE_TIME_REGEX, function (m) { return matchSkeletonPattern(m, result); });\n    var _b = processDateTimePattern(rawPattern), pattern = _b[0], pattern12 = _b[1];\n    result.pattern = pattern;\n    result.pattern12 = pattern12;\n    return result;\n}\nexport function splitFallbackRangePattern(pattern) {\n    var parts = pattern.split(/(\\{[0|1]\\})/g).filter(Boolean);\n    return parts.map(function (pattern) {\n        switch (pattern) {\n            case '{0}':\n                return {\n                    source: RangePatternType.startRange,\n                    pattern: pattern,\n                };\n            case '{1}':\n                return {\n                    source: RangePatternType.endRange,\n                    pattern: pattern,\n                };\n            default:\n                return {\n                    source: RangePatternType.shared,\n                    pattern: pattern,\n                };\n        }\n    });\n}\nexport function splitRangePattern(pattern) {\n    var PART_REGEX = /\\{(.*?)\\}/g;\n    // Map of part and index within the string\n    var parts = {};\n    var match;\n    var splitIndex = 0;\n    while ((match = PART_REGEX.exec(pattern))) {\n        if (!(match[0] in parts)) {\n            parts[match[0]] = match.index;\n        }\n        else {\n            splitIndex = match.index;\n            break;\n        }\n    }\n    if (!splitIndex) {\n        return [\n            {\n                source: RangePatternType.startRange,\n                pattern: pattern,\n            },\n        ];\n    }\n    return [\n        {\n            source: RangePatternType.startRange,\n            pattern: pattern.slice(0, splitIndex),\n        },\n        {\n            source: RangePatternType.endRange,\n            pattern: pattern.slice(splitIndex),\n        },\n    ];\n}\n","import { __assign } from \"tslib\";\nimport { invariant } from '../utils';\nimport { DATE_TIME_PROPS, removalPenalty, additionPenalty, differentNumericTypePenalty, longMorePenalty, shortMorePenalty, shortLessPenalty, longLessPenalty, } from './utils';\nimport { processDateTimePattern } from './skeleton';\nfunction isNumericType(t) {\n    return t === 'numeric' || t === '2-digit';\n}\n/**\n * Credit: https://github.com/andyearnshaw/Intl.js/blob/0958dc1ad8153f1056653ea22b8208f0df289a4e/src/12.datetimeformat.js#L611\n * with some modifications\n * @param options\n * @param format\n */\nexport function bestFitFormatMatcherScore(options, format) {\n    var score = 0;\n    if (options.hour12 && !format.hour12) {\n        score -= removalPenalty;\n    }\n    else if (!options.hour12 && format.hour12) {\n        score -= additionPenalty;\n    }\n    for (var _i = 0, DATE_TIME_PROPS_1 = DATE_TIME_PROPS; _i < DATE_TIME_PROPS_1.length; _i++) {\n        var prop = DATE_TIME_PROPS_1[_i];\n        var optionsProp = options[prop];\n        var formatProp = format[prop];\n        if (optionsProp === undefined && formatProp !== undefined) {\n            score -= additionPenalty;\n        }\n        else if (optionsProp !== undefined && formatProp === undefined) {\n            score -= removalPenalty;\n        }\n        else if (optionsProp !== formatProp) {\n            // extra penalty for numeric vs non-numeric\n            if (isNumericType(optionsProp) !==\n                isNumericType(formatProp)) {\n                score -= differentNumericTypePenalty;\n            }\n            else {\n                var values = ['2-digit', 'numeric', 'narrow', 'short', 'long'];\n                var optionsPropIndex = values.indexOf(optionsProp);\n                var formatPropIndex = values.indexOf(formatProp);\n                var delta = Math.max(-2, Math.min(formatPropIndex - optionsPropIndex, 2));\n                if (delta === 2) {\n                    score -= longMorePenalty;\n                }\n                else if (delta === 1) {\n                    score -= shortMorePenalty;\n                }\n                else if (delta === -1) {\n                    score -= shortLessPenalty;\n                }\n                else if (delta === -2) {\n                    score -= longLessPenalty;\n                }\n            }\n        }\n    }\n    return score;\n}\n/**\n * https://tc39.es/ecma402/#sec-bestfitformatmatcher\n * Just alias to basic for now\n * @param options\n * @param formats\n * @param implDetails Implementation details\n */\nexport function BestFitFormatMatcher(options, formats) {\n    var bestScore = -Infinity;\n    var bestFormat = formats[0];\n    invariant(Array.isArray(formats), 'formats should be a list of things');\n    for (var _i = 0, formats_1 = formats; _i < formats_1.length; _i++) {\n        var format = formats_1[_i];\n        var score = bestFitFormatMatcherScore(options, format);\n        if (score > bestScore) {\n            bestScore = score;\n            bestFormat = format;\n        }\n    }\n    var skeletonFormat = __assign({}, bestFormat);\n    var patternFormat = { rawPattern: bestFormat.rawPattern };\n    processDateTimePattern(bestFormat.rawPattern, patternFormat);\n    // Kinda following https://github.com/unicode-org/icu/blob/dd50e38f459d84e9bf1b0c618be8483d318458ad/icu4j/main/classes/core/src/com/ibm/icu/text/DateTimePatternGenerator.java\n    // Method adjustFieldTypes\n    for (var prop in skeletonFormat) {\n        var skeletonValue = skeletonFormat[prop];\n        var patternValue = patternFormat[prop];\n        var requestedValue = options[prop];\n        // Don't mess with minute/second or we can get in the situation of\n        // 7:0:0 which is weird\n        if (prop === 'minute' || prop === 'second') {\n            continue;\n        }\n        // Nothing to do here\n        if (!requestedValue) {\n            continue;\n        }\n        // https://unicode.org/reports/tr35/tr35-dates.html#Matching_Skeletons\n        // Looks like we should not convert numeric to alphabetic but the other way\n        // around is ok\n        if (isNumericType(patternValue) &&\n            !isNumericType(requestedValue)) {\n            continue;\n        }\n        if (skeletonValue === requestedValue) {\n            continue;\n        }\n        patternFormat[prop] = requestedValue;\n    }\n    // Copy those over\n    patternFormat.pattern = skeletonFormat.pattern;\n    patternFormat.pattern12 = skeletonFormat.pattern12;\n    patternFormat.skeleton = skeletonFormat.skeleton;\n    patternFormat.rangePatterns = skeletonFormat.rangePatterns;\n    patternFormat.rangePatterns12 = skeletonFormat.rangePatterns12;\n    return patternFormat;\n}\n","/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-canonicalizelocalelist\n * @param locales\n */\nexport function CanonicalizeLocaleList(locales) {\n    // TODO\n    return Intl.getCanonicalLocales(locales);\n}\n","/**\n * https://tc39.es/ecma402/#sec-canonicalizetimezonename\n * @param tz\n */\nexport function CanonicalizeTimeZoneName(tz, _a) {\n    var tzData = _a.tzData, uppercaseLinks = _a.uppercaseLinks;\n    var uppercasedTz = tz.toUpperCase();\n    var uppercasedZones = Object.keys(tzData).reduce(function (all, z) {\n        all[z.toUpperCase()] = z;\n        return all;\n    }, {});\n    var ianaTimeZone = uppercaseLinks[uppercasedTz] || uppercasedZones[uppercasedTz];\n    if (ianaTimeZone === 'Etc/UTC' || ianaTimeZone === 'Etc/GMT') {\n        return 'UTC';\n    }\n    return ianaTimeZone;\n}\n","/**\n * https://tc39.es/ecma262/#sec-tostring\n */\nexport function ToString(o) {\n    // Only symbol is irregular...\n    if (typeof o === 'symbol') {\n        throw TypeError('Cannot convert a Symbol value to a string');\n    }\n    return String(o);\n}\n/**\n * https://tc39.es/ecma262/#sec-tonumber\n * @param val\n */\nexport function ToNumber(val) {\n    if (val === undefined) {\n        return NaN;\n    }\n    if (val === null) {\n        return +0;\n    }\n    if (typeof val === 'boolean') {\n        return val ? 1 : +0;\n    }\n    if (typeof val === 'number') {\n        return val;\n    }\n    if (typeof val === 'symbol' || typeof val === 'bigint') {\n        throw new TypeError('Cannot convert symbol/bigint to number');\n    }\n    return Number(val);\n}\n/**\n * https://tc39.es/ecma262/#sec-tointeger\n * @param n\n */\nfunction ToInteger(n) {\n    var number = ToNumber(n);\n    if (isNaN(number) || SameValue(number, -0)) {\n        return 0;\n    }\n    if (isFinite(number)) {\n        return number;\n    }\n    var integer = Math.floor(Math.abs(number));\n    if (number < 0) {\n        integer = -integer;\n    }\n    if (SameValue(integer, -0)) {\n        return 0;\n    }\n    return integer;\n}\n/**\n * https://tc39.es/ecma262/#sec-timeclip\n * @param time\n */\nexport function TimeClip(time) {\n    if (!isFinite(time)) {\n        return NaN;\n    }\n    if (Math.abs(time) > 8.64 * 1e15) {\n        return NaN;\n    }\n    return ToInteger(time);\n}\n/**\n * https://tc39.es/ecma262/#sec-toobject\n * @param arg\n */\nexport function ToObject(arg) {\n    if (arg == null) {\n        throw new TypeError('undefined/null cannot be converted to object');\n    }\n    return Object(arg);\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-samevalue\n * @param x\n * @param y\n */\nexport function SameValue(x, y) {\n    if (Object.is) {\n        return Object.is(x, y);\n    }\n    // SameValue algorithm\n    if (x === y) {\n        // Steps 1-5, 7-10\n        // Steps 6.b-6.e: +0 != -0\n        return x !== 0 || 1 / x === 1 / y;\n    }\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-arraycreate\n * @param len\n */\nexport function ArrayCreate(len) {\n    return new Array(len);\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-hasownproperty\n * @param o\n * @param prop\n */\nexport function HasOwnProperty(o, prop) {\n    return Object.prototype.hasOwnProperty.call(o, prop);\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-type\n * @param x\n */\nexport function Type(x) {\n    if (x === null) {\n        return 'Null';\n    }\n    if (typeof x === 'undefined') {\n        return 'Undefined';\n    }\n    if (typeof x === 'function' || typeof x === 'object') {\n        return 'Object';\n    }\n    if (typeof x === 'number') {\n        return 'Number';\n    }\n    if (typeof x === 'boolean') {\n        return 'Boolean';\n    }\n    if (typeof x === 'string') {\n        return 'String';\n    }\n    if (typeof x === 'symbol') {\n        return 'Symbol';\n    }\n    if (typeof x === 'bigint') {\n        return 'BigInt';\n    }\n}\nvar MS_PER_DAY = 86400000;\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#eqn-modulo\n * @param x\n * @param y\n * @return k of the same sign as y\n */\nfunction mod(x, y) {\n    return x - Math.floor(x / y) * y;\n}\n/**\n * https://tc39.es/ecma262/#eqn-Day\n * @param t\n */\nexport function Day(t) {\n    return Math.floor(t / MS_PER_DAY);\n}\n/**\n * https://tc39.es/ecma262/#sec-week-day\n * @param t\n */\nexport function WeekDay(t) {\n    return mod(Day(t) + 4, 7);\n}\n/**\n * https://tc39.es/ecma262/#sec-year-number\n * @param y\n */\nexport function DayFromYear(y) {\n    return Date.UTC(y, 0) / MS_PER_DAY;\n}\n/**\n * https://tc39.es/ecma262/#sec-year-number\n * @param y\n */\nexport function TimeFromYear(y) {\n    return Date.UTC(y, 0);\n}\n/**\n * https://tc39.es/ecma262/#sec-year-number\n * @param t\n */\nexport function YearFromTime(t) {\n    return new Date(t).getUTCFullYear();\n}\nexport function DaysInYear(y) {\n    if (y % 4 !== 0) {\n        return 365;\n    }\n    if (y % 100 !== 0) {\n        return 366;\n    }\n    if (y % 400 !== 0) {\n        return 365;\n    }\n    return 366;\n}\nexport function DayWithinYear(t) {\n    return Day(t) - DayFromYear(YearFromTime(t));\n}\nexport function InLeapYear(t) {\n    return DaysInYear(YearFromTime(t)) === 365 ? 0 : 1;\n}\n/**\n * https://tc39.es/ecma262/#sec-month-number\n * @param t\n */\nexport function MonthFromTime(t) {\n    var dwy = DayWithinYear(t);\n    var leap = InLeapYear(t);\n    if (dwy >= 0 && dwy < 31) {\n        return 0;\n    }\n    if (dwy < 59 + leap) {\n        return 1;\n    }\n    if (dwy < 90 + leap) {\n        return 2;\n    }\n    if (dwy < 120 + leap) {\n        return 3;\n    }\n    if (dwy < 151 + leap) {\n        return 4;\n    }\n    if (dwy < 181 + leap) {\n        return 5;\n    }\n    if (dwy < 212 + leap) {\n        return 6;\n    }\n    if (dwy < 243 + leap) {\n        return 7;\n    }\n    if (dwy < 273 + leap) {\n        return 8;\n    }\n    if (dwy < 304 + leap) {\n        return 9;\n    }\n    if (dwy < 334 + leap) {\n        return 10;\n    }\n    if (dwy < 365 + leap) {\n        return 11;\n    }\n    throw new Error('Invalid time');\n}\nexport function DateFromTime(t) {\n    var dwy = DayWithinYear(t);\n    var mft = MonthFromTime(t);\n    var leap = InLeapYear(t);\n    if (mft === 0) {\n        return dwy + 1;\n    }\n    if (mft === 1) {\n        return dwy - 30;\n    }\n    if (mft === 2) {\n        return dwy - 58 - leap;\n    }\n    if (mft === 3) {\n        return dwy - 89 - leap;\n    }\n    if (mft === 4) {\n        return dwy - 119 - leap;\n    }\n    if (mft === 5) {\n        return dwy - 150 - leap;\n    }\n    if (mft === 6) {\n        return dwy - 180 - leap;\n    }\n    if (mft === 7) {\n        return dwy - 211 - leap;\n    }\n    if (mft === 8) {\n        return dwy - 242 - leap;\n    }\n    if (mft === 9) {\n        return dwy - 272 - leap;\n    }\n    if (mft === 10) {\n        return dwy - 303 - leap;\n    }\n    if (mft === 11) {\n        return dwy - 333 - leap;\n    }\n    throw new Error('Invalid time');\n}\nvar HOURS_PER_DAY = 24;\nvar MINUTES_PER_HOUR = 60;\nvar SECONDS_PER_MINUTE = 60;\nvar MS_PER_SECOND = 1e3;\nvar MS_PER_MINUTE = MS_PER_SECOND * SECONDS_PER_MINUTE;\nvar MS_PER_HOUR = MS_PER_MINUTE * MINUTES_PER_HOUR;\nexport function HourFromTime(t) {\n    return mod(Math.floor(t / MS_PER_HOUR), HOURS_PER_DAY);\n}\nexport function MinFromTime(t) {\n    return mod(Math.floor(t / MS_PER_MINUTE), MINUTES_PER_HOUR);\n}\nexport function SecFromTime(t) {\n    return mod(Math.floor(t / MS_PER_SECOND), SECONDS_PER_MINUTE);\n}\nfunction IsCallable(fn) {\n    return typeof fn === 'function';\n}\n/**\n * The abstract operation OrdinaryHasInstance implements\n * the default algorithm for determining if an object O\n * inherits from the instance object inheritance path\n * provided by constructor C.\n * @param C class\n * @param O object\n * @param internalSlots internalSlots\n */\nexport function OrdinaryHasInstance(C, O, internalSlots) {\n    if (!IsCallable(C)) {\n        return false;\n    }\n    if (internalSlots === null || internalSlots === void 0 ? void 0 : internalSlots.boundTargetFunction) {\n        var BC = internalSlots === null || internalSlots === void 0 ? void 0 : internalSlots.boundTargetFunction;\n        return O instanceof BC;\n    }\n    if (typeof O !== 'object') {\n        return false;\n    }\n    var P = C.prototype;\n    if (typeof P !== 'object') {\n        throw new TypeError('OrdinaryHasInstance called on an object with an invalid prototype property.');\n    }\n    return Object.prototype.isPrototypeOf.call(P, O);\n}\nexport function msFromTime(t) {\n    return mod(t, MS_PER_SECOND);\n}\n","import { ToObject } from './262';\n/**\n * https://tc39.es/ecma402/#sec-coerceoptionstoobject\n * @param options\n * @returns\n */\nexport function CoerceOptionsToObject(options) {\n    if (typeof options === 'undefined') {\n        return Object.create(null);\n    }\n    return ToObject(options);\n}\n","import { __assign } from \"tslib\";\nimport { invariant } from '../utils';\nimport { DATE_TIME_PROPS, additionPenalty, removalPenalty, longMorePenalty, shortMorePenalty, shortLessPenalty, longLessPenalty, } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-basicformatmatcher\n * @param options\n * @param formats\n */\nexport function BasicFormatMatcher(options, formats) {\n    var bestScore = -Infinity;\n    var bestFormat = formats[0];\n    invariant(Array.isArray(formats), 'formats should be a list of things');\n    for (var _i = 0, formats_1 = formats; _i < formats_1.length; _i++) {\n        var format = formats_1[_i];\n        var score = 0;\n        for (var _a = 0, DATE_TIME_PROPS_1 = DATE_TIME_PROPS; _a < DATE_TIME_PROPS_1.length; _a++) {\n            var prop = DATE_TIME_PROPS_1[_a];\n            var optionsProp = options[prop];\n            var formatProp = format[prop];\n            if (optionsProp === undefined && formatProp !== undefined) {\n                score -= additionPenalty;\n            }\n            else if (optionsProp !== undefined && formatProp === undefined) {\n                score -= removalPenalty;\n            }\n            else if (optionsProp !== formatProp) {\n                var values = void 0;\n                if (prop === 'fractionalSecondDigits') {\n                    values = [1, 2, 3];\n                }\n                else {\n                    values = ['2-digit', 'numeric', 'narrow', 'short', 'long'];\n                }\n                var optionsPropIndex = values.indexOf(optionsProp);\n                var formatPropIndex = values.indexOf(formatProp);\n                var delta = Math.max(-2, Math.min(formatPropIndex - optionsPropIndex, 2));\n                if (delta === 2) {\n                    score -= longMorePenalty;\n                }\n                else if (delta === 1) {\n                    score -= shortMorePenalty;\n                }\n                else if (delta === -1) {\n                    score -= shortLessPenalty;\n                }\n                else if (delta === -2) {\n                    score -= longLessPenalty;\n                }\n            }\n        }\n        if (score > bestScore) {\n            bestScore = score;\n            bestFormat = format;\n        }\n    }\n    return __assign({}, bestFormat);\n}\n","import { invariant } from '../utils';\nexport function DateTimeStyleFormat(dateStyle, timeStyle, dataLocaleData) {\n    var dateFormat, timeFormat;\n    if (timeStyle !== undefined) {\n        invariant(timeStyle === 'full' ||\n            timeStyle === 'long' ||\n            timeStyle === 'medium' ||\n            timeStyle === 'short', 'invalid timeStyle');\n        timeFormat = dataLocaleData.timeFormat[timeStyle];\n    }\n    if (dateStyle !== undefined) {\n        invariant(dateStyle === 'full' ||\n            dateStyle === 'long' ||\n            dateStyle === 'medium' ||\n            dateStyle === 'short', 'invalid dateStyle');\n        dateFormat = dataLocaleData.dateFormat[dateStyle];\n    }\n    if (dateStyle !== undefined && timeStyle !== undefined) {\n        var format = {};\n        for (var field in dateFormat) {\n            if (field !== 'pattern') {\n                // @ts-ignore\n                format[field] = dateFormat[field];\n            }\n        }\n        for (var field in timeFormat) {\n            if (field !== 'pattern' && field !== 'pattern12') {\n                // @ts-ignore\n                format[field] = timeFormat[field];\n            }\n        }\n        var connector = dataLocaleData.dateTimeFormat[dateStyle];\n        var pattern = connector\n            .replace('{0}', timeFormat.pattern)\n            .replace('{1}', dateFormat.pattern);\n        format.pattern = pattern;\n        if ('pattern12' in timeFormat) {\n            var pattern12 = connector\n                .replace('{0}', timeFormat.pattern12)\n                .replace('{1}', dateFormat.pattern);\n            format.pattern12 = pattern12;\n        }\n        return format;\n    }\n    if (timeStyle !== undefined) {\n        return timeFormat;\n    }\n    invariant(dateStyle !== undefined, 'dateStyle should not be undefined');\n    return dateFormat;\n}\n","import { invariant } from '../utils';\nimport { Type, YearFromTime, WeekDay, MonthFromTime, DateFromTime, HourFromTime, MinFromTime, SecFromTime, msFromTime, } from '../262';\nfunction getApplicableZoneData(t, timeZone, tzData) {\n    var _a;\n    var zoneData = tzData[timeZone];\n    // We don't have data for this so just say it's UTC\n    if (!zoneData) {\n        return [0, false];\n    }\n    var i = 0;\n    var offset = 0;\n    var dst = false;\n    for (; i <= zoneData.length; i++) {\n        if (i === zoneData.length || zoneData[i][0] * 1e3 > t) {\n            ;\n            _a = zoneData[i - 1], offset = _a[2], dst = _a[3];\n            break;\n        }\n    }\n    return [offset * 1e3, dst];\n}\n/**\n * https://tc39.es/ecma402/#sec-tolocaltime\n * @param t\n * @param calendar\n * @param timeZone\n */\nexport function ToLocalTime(t, calendar, timeZone, _a) {\n    var tzData = _a.tzData;\n    invariant(Type(t) === 'Number', 'invalid time');\n    invariant(calendar === 'gregory', 'We only support Gregory calendar right now');\n    var _b = getApplicableZoneData(t, timeZone, tzData), timeZoneOffset = _b[0], inDST = _b[1];\n    var tz = t + timeZoneOffset;\n    var year = YearFromTime(tz);\n    return {\n        weekday: WeekDay(tz),\n        era: year < 0 ? 'BC' : 'AD',\n        year: year,\n        relatedYear: undefined,\n        yearName: undefined,\n        month: MonthFromTime(tz),\n        day: DateFromTime(tz),\n        hour: HourFromTime(tz),\n        minute: MinFromTime(tz),\n        second: SecFromTime(tz),\n        millisecond: msFromTime(tz),\n        inDST: inDST,\n        // IMPORTANT: Not in spec\n        timeZoneOffset: timeZoneOffset,\n    };\n}\n","import { DATE_TIME_PROPS } from './utils';\nimport { ToLocalTime } from './ToLocalTime';\nimport { TimeClip } from '../262';\nfunction pad(n) {\n    if (n < 10) {\n        return \"0\" + n;\n    }\n    return String(n);\n}\nfunction offsetToGmtString(gmtFormat, hourFormat, offsetInMs, style) {\n    var offsetInMinutes = Math.floor(offsetInMs / 60000);\n    var mins = Math.abs(offsetInMinutes) % 60;\n    var hours = Math.floor(Math.abs(offsetInMinutes) / 60);\n    var _a = hourFormat.split(';'), positivePattern = _a[0], negativePattern = _a[1];\n    var offsetStr = '';\n    var pattern = offsetInMs < 0 ? negativePattern : positivePattern;\n    if (style === 'long') {\n        offsetStr = pattern\n            .replace('HH', pad(hours))\n            .replace('H', String(hours))\n            .replace('mm', pad(mins))\n            .replace('m', String(mins));\n    }\n    else if (mins || hours) {\n        if (!mins) {\n            pattern = pattern.replace(/:?m+/, '');\n        }\n        offsetStr = pattern.replace(/H+/, String(hours)).replace(/m+/, String(mins));\n    }\n    return gmtFormat.replace('{0}', offsetStr);\n}\n/**\n * https://tc39.es/ecma402/#sec-partitiondatetimepattern\n * @param dtf\n * @param x\n */\nexport function FormatDateTimePattern(dtf, patternParts, x, _a) {\n    var getInternalSlots = _a.getInternalSlots, localeData = _a.localeData, getDefaultTimeZone = _a.getDefaultTimeZone, tzData = _a.tzData;\n    x = TimeClip(x);\n    /** IMPL START */\n    var internalSlots = getInternalSlots(dtf);\n    var dataLocale = internalSlots.dataLocale;\n    var dataLocaleData = localeData[dataLocale];\n    /** IMPL END */\n    var locale = internalSlots.locale;\n    var nfOptions = Object.create(null);\n    nfOptions.useGrouping = false;\n    var nf = new Intl.NumberFormat(locale, nfOptions);\n    var nf2Options = Object.create(null);\n    nf2Options.minimumIntegerDigits = 2;\n    nf2Options.useGrouping = false;\n    var nf2 = new Intl.NumberFormat(locale, nf2Options);\n    var fractionalSecondDigits = internalSlots.fractionalSecondDigits;\n    var nf3;\n    if (fractionalSecondDigits !== undefined) {\n        var nf3Options = Object.create(null);\n        nf3Options.minimumIntegerDigits = fractionalSecondDigits;\n        nf3Options.useGrouping = false;\n        nf3 = new Intl.NumberFormat(locale, nf3Options);\n    }\n    var tm = ToLocalTime(x, \n    // @ts-ignore\n    internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n    var result = [];\n    for (var _i = 0, patternParts_1 = patternParts; _i < patternParts_1.length; _i++) {\n        var patternPart = patternParts_1[_i];\n        var p = patternPart.type;\n        if (p === 'literal') {\n            result.push({\n                type: 'literal',\n                value: patternPart.value,\n            });\n        }\n        else if (p === 'fractionalSecondDigits') {\n            var v = Math.floor(tm.millisecond * Math.pow(10, ((fractionalSecondDigits || 0) - 3)));\n            result.push({\n                // @ts-expect-error Spec is not there yet\n                type: 'fractionalSecond',\n                value: nf3.format(v),\n            });\n        }\n        else if (DATE_TIME_PROPS.indexOf(p) > -1) {\n            var fv = '';\n            var f = internalSlots[p];\n            // @ts-ignore\n            var v = tm[p];\n            if (p === 'year' && v <= 0) {\n                v = 1 - v;\n            }\n            if (p === 'month') {\n                v++;\n            }\n            var hourCycle = internalSlots.hourCycle;\n            if (p === 'hour' && (hourCycle === 'h11' || hourCycle === 'h12')) {\n                v = v % 12;\n                if (v === 0 && hourCycle === 'h12') {\n                    v = 12;\n                }\n            }\n            if (p === 'hour' && hourCycle === 'h24') {\n                if (v === 0) {\n                    v = 24;\n                }\n            }\n            if (f === 'numeric') {\n                fv = nf.format(v);\n            }\n            else if (f === '2-digit') {\n                fv = nf2.format(v);\n                if (fv.length > 2) {\n                    fv = fv.slice(fv.length - 2, fv.length);\n                }\n            }\n            else if (f === 'narrow' || f === 'short' || f === 'long') {\n                if (p === 'era') {\n                    fv = dataLocaleData[p][f][v];\n                }\n                else if (p === 'timeZoneName') {\n                    var timeZoneName = dataLocaleData.timeZoneName, gmtFormat = dataLocaleData.gmtFormat, hourFormat = dataLocaleData.hourFormat;\n                    var timeZone = internalSlots.timeZone || getDefaultTimeZone();\n                    var timeZoneData = timeZoneName[timeZone];\n                    if (timeZoneData && timeZoneData[f]) {\n                        fv = timeZoneData[f][+tm.inDST];\n                    }\n                    else {\n                        // Fallback to gmtFormat\n                        fv = offsetToGmtString(gmtFormat, hourFormat, tm.timeZoneOffset, f);\n                    }\n                }\n                else if (p === 'month') {\n                    fv = dataLocaleData.month[f][v - 1];\n                }\n                else {\n                    fv = dataLocaleData[p][f][v];\n                }\n            }\n            result.push({\n                type: p,\n                value: fv,\n            });\n        }\n        else if (p === 'ampm') {\n            var v = tm.hour;\n            var fv = void 0;\n            if (v > 11) {\n                fv = dataLocaleData.pm;\n            }\n            else {\n                fv = dataLocaleData.am;\n            }\n            result.push({\n                type: 'dayPeriod',\n                value: fv,\n            });\n        }\n        else if (p === 'relatedYear') {\n            var v = tm.relatedYear;\n            // @ts-ignore\n            var fv = nf.format(v);\n            result.push({\n                // @ts-ignore TODO: Fix TS type\n                type: 'relatedYear',\n                value: fv,\n            });\n        }\n        else if (p === 'yearName') {\n            var v = tm.yearName;\n            // @ts-ignore\n            var fv = nf.format(v);\n            result.push({\n                // @ts-ignore TODO: Fix TS type\n                type: 'yearName',\n                value: fv,\n            });\n        }\n    }\n    return result;\n}\n","import { invariant } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-partitionpattern\n * @param pattern\n */\nexport function PartitionPattern(pattern) {\n    var result = [];\n    var beginIndex = pattern.indexOf('{');\n    var endIndex = 0;\n    var nextIndex = 0;\n    var length = pattern.length;\n    while (beginIndex < pattern.length && beginIndex > -1) {\n        endIndex = pattern.indexOf('}', beginIndex);\n        invariant(endIndex > beginIndex, \"Invalid pattern \" + pattern);\n        if (beginIndex > nextIndex) {\n            result.push({\n                type: 'literal',\n                value: pattern.substring(nextIndex, beginIndex),\n            });\n        }\n        result.push({\n            type: pattern.substring(beginIndex + 1, endIndex),\n            value: undefined,\n        });\n        nextIndex = endIndex + 1;\n        beginIndex = pattern.indexOf('{', nextIndex);\n    }\n    if (nextIndex < length) {\n        result.push({\n            type: 'literal',\n            value: pattern.substring(nextIndex, length),\n        });\n    }\n    return result;\n}\n","import { TimeClip } from '../262';\nimport { FormatDateTimePattern, } from './FormatDateTimePattern';\nimport { PartitionPattern } from '../PartitionPattern';\n/**\n * https://tc39.es/ecma402/#sec-partitiondatetimepattern\n * @param dtf\n * @param x\n */\nexport function PartitionDateTimePattern(dtf, x, implDetails) {\n    x = TimeClip(x);\n    if (isNaN(x)) {\n        throw new RangeError('invalid time');\n    }\n    /** IMPL START */\n    var getInternalSlots = implDetails.getInternalSlots;\n    var internalSlots = getInternalSlots(dtf);\n    /** IMPL END */\n    var pattern = internalSlots.pattern;\n    return FormatDateTimePattern(dtf, PartitionPattern(pattern), x, implDetails);\n}\n","import { PartitionDateTimePattern } from './PartitionDateTimePattern';\n/**\n * https://tc39.es/ecma402/#sec-formatdatetime\n * @param dtf DateTimeFormat\n * @param x\n */\nexport function FormatDateTime(dtf, x, implDetails) {\n    var parts = PartitionDateTimePattern(dtf, x, implDetails);\n    var result = '';\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result += part.value;\n    }\n    return result;\n}\n","import { RangePatternType, } from '../types/date-time';\nimport { SameValue, TimeClip } from '../262';\nimport { ToLocalTime } from './ToLocalTime';\nimport { FormatDateTimePattern, } from './FormatDateTimePattern';\nimport { PartitionPattern } from '../PartitionPattern';\nvar TABLE_2_FIELDS = [\n    'era',\n    'year',\n    'month',\n    'day',\n    'ampm',\n    'hour',\n    'minute',\n    'second',\n    'fractionalSecondDigits',\n];\nexport function PartitionDateTimeRangePattern(dtf, x, y, implDetails) {\n    x = TimeClip(x);\n    if (isNaN(x)) {\n        throw new RangeError('Invalid start time');\n    }\n    y = TimeClip(y);\n    if (isNaN(y)) {\n        throw new RangeError('Invalid end time');\n    }\n    /** IMPL START */\n    var getInternalSlots = implDetails.getInternalSlots, tzData = implDetails.tzData;\n    var internalSlots = getInternalSlots(dtf);\n    /** IMPL END */\n    var tm1 = ToLocalTime(x, \n    // @ts-ignore\n    internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n    var tm2 = ToLocalTime(y, \n    // @ts-ignore\n    internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n    var pattern = internalSlots.pattern, rangePatterns = internalSlots.rangePatterns;\n    var rangePattern;\n    var dateFieldsPracticallyEqual = true;\n    var patternContainsLargerDateField = false;\n    for (var _i = 0, TABLE_2_FIELDS_1 = TABLE_2_FIELDS; _i < TABLE_2_FIELDS_1.length; _i++) {\n        var fieldName = TABLE_2_FIELDS_1[_i];\n        if (dateFieldsPracticallyEqual && !patternContainsLargerDateField) {\n            if (fieldName === 'ampm') {\n                var rp = rangePatterns.ampm;\n                if (rangePattern !== undefined && rp === undefined) {\n                    patternContainsLargerDateField = true;\n                }\n                else {\n                    var v1 = tm1.hour;\n                    var v2 = tm2.hour;\n                    if ((v1 > 11 && v2 < 11) || (v1 < 11 && v2 > 11)) {\n                        dateFieldsPracticallyEqual = false;\n                    }\n                    rangePattern = rp;\n                }\n            }\n            else if (fieldName === 'fractionalSecondDigits') {\n                var fractionalSecondDigits = internalSlots.fractionalSecondDigits;\n                if (fractionalSecondDigits === undefined) {\n                    fractionalSecondDigits = 3;\n                }\n                var v1 = Math.floor(tm1.millisecond * Math.pow(10, (fractionalSecondDigits - 3)));\n                var v2 = Math.floor(tm2.millisecond * Math.pow(10, (fractionalSecondDigits - 3)));\n                if (v1 !== v2) {\n                    dateFieldsPracticallyEqual = false;\n                }\n            }\n            else {\n                var rp = rangePatterns[fieldName];\n                if (rangePattern !== undefined && rp === undefined) {\n                    patternContainsLargerDateField = true;\n                }\n                else {\n                    var v1 = tm1[fieldName];\n                    var v2 = tm2[fieldName];\n                    if (!SameValue(v1, v2)) {\n                        dateFieldsPracticallyEqual = false;\n                    }\n                    rangePattern = rp;\n                }\n            }\n        }\n    }\n    if (dateFieldsPracticallyEqual) {\n        var result_2 = FormatDateTimePattern(dtf, PartitionPattern(pattern), x, implDetails);\n        for (var _a = 0, result_1 = result_2; _a < result_1.length; _a++) {\n            var r = result_1[_a];\n            r.source = RangePatternType.shared;\n        }\n        return result_2;\n    }\n    var result = [];\n    if (rangePattern === undefined) {\n        rangePattern = rangePatterns.default;\n        /** IMPL DETAILS */\n        // Now we have to replace {0} & {1} with actual pattern\n        for (var _b = 0, _c = rangePattern.patternParts; _b < _c.length; _b++) {\n            var patternPart = _c[_b];\n            if (patternPart.pattern === '{0}' || patternPart.pattern === '{1}') {\n                patternPart.pattern = pattern;\n            }\n        }\n    }\n    for (var _d = 0, _e = rangePattern.patternParts; _d < _e.length; _d++) {\n        var rangePatternPart = _e[_d];\n        var source = rangePatternPart.source, pattern_1 = rangePatternPart.pattern;\n        var z = void 0;\n        if (source === RangePatternType.startRange ||\n            source === RangePatternType.shared) {\n            z = x;\n        }\n        else {\n            z = y;\n        }\n        var patternParts = PartitionPattern(pattern_1);\n        var partResult = FormatDateTimePattern(dtf, patternParts, z, implDetails);\n        for (var _f = 0, partResult_1 = partResult; _f < partResult_1.length; _f++) {\n            var r = partResult_1[_f];\n            r.source = source;\n        }\n        result = result.concat(partResult);\n    }\n    return result;\n}\n","import { PartitionDateTimeRangePattern } from './PartitionDateTimeRangePattern';\nexport function FormatDateTimeRange(dtf, x, y, implDetails) {\n    var parts = PartitionDateTimeRangePattern(dtf, x, y, implDetails);\n    var result = '';\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result += part.value;\n    }\n    return result;\n}\n","import { PartitionDateTimeRangePattern } from './PartitionDateTimeRangePattern';\nexport function FormatDateTimeRangeToParts(dtf, x, y, implDetails) {\n    var parts = PartitionDateTimeRangePattern(dtf, x, y, implDetails);\n    var result = new Array(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result.push({\n            type: part.type,\n            value: part.value,\n            source: part.source,\n        });\n    }\n    return result;\n}\n","import { PartitionDateTimePattern } from './PartitionDateTimePattern';\nimport { ArrayCreate } from '../262';\n/**\n * https://tc39.es/ecma402/#sec-formatdatetimetoparts\n *\n * @param dtf\n * @param x\n * @param implDetails\n */\nexport function FormatDateTimeToParts(dtf, x, implDetails) {\n    var parts = PartitionDateTimePattern(dtf, x, implDetails);\n    var result = ArrayCreate(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result.push({\n            type: part.type,\n            value: part.value,\n        });\n    }\n    return result;\n}\n","import { ToObject } from '../262';\n/**\n * https://tc39.es/ecma402/#sec-todatetimeoptions\n * @param options\n * @param required\n * @param defaults\n */\nexport function ToDateTimeOptions(options, required, defaults) {\n    if (options === undefined) {\n        options = null;\n    }\n    else {\n        options = ToObject(options);\n    }\n    options = Object.create(options);\n    var needDefaults = true;\n    if (required === 'date' || required === 'any') {\n        for (var _i = 0, _a = ['weekday', 'year', 'month', 'day']; _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var value = options[prop];\n            if (value !== undefined) {\n                needDefaults = false;\n            }\n        }\n    }\n    if (required === 'time' || required === 'any') {\n        for (var _b = 0, _c = [\n            'dayPeriod',\n            'hour',\n            'minute',\n            'second',\n            'fractionalSecondDigits',\n        ]; _b < _c.length; _b++) {\n            var prop = _c[_b];\n            var value = options[prop];\n            if (value !== undefined) {\n                needDefaults = false;\n            }\n        }\n    }\n    if (options.dateStyle !== undefined || options.timeStyle !== undefined) {\n        needDefaults = false;\n    }\n    if (required === 'date' && options.timeStyle) {\n        throw new TypeError('Intl.DateTimeFormat date was required but timeStyle was included');\n    }\n    if (required === 'time' && options.dateStyle) {\n        throw new TypeError('Intl.DateTimeFormat time was required but dateStyle was included');\n    }\n    if (needDefaults && (defaults === 'date' || defaults === 'all')) {\n        for (var _d = 0, _e = ['year', 'month', 'day']; _d < _e.length; _d++) {\n            var prop = _e[_d];\n            options[prop] = 'numeric';\n        }\n    }\n    if (needDefaults && (defaults === 'time' || defaults === 'all')) {\n        for (var _f = 0, _g = ['hour', 'minute', 'second']; _f < _g.length; _f++) {\n            var prop = _g[_f];\n            options[prop] = 'numeric';\n        }\n    }\n    return options;\n}\n","import { ToString } from './262';\n/**\n * https://tc39.es/ecma402/#sec-getoption\n * @param opts\n * @param prop\n * @param type\n * @param values\n * @param fallback\n */\nexport function GetOption(opts, prop, type, values, fallback) {\n    if (typeof opts !== 'object') {\n        throw new TypeError('Options must be an object');\n    }\n    var value = opts[prop];\n    if (value !== undefined) {\n        if (type !== 'boolean' && type !== 'string') {\n            throw new TypeError('invalid type');\n        }\n        if (type === 'boolean') {\n            value = Boolean(value);\n        }\n        if (type === 'string') {\n            value = ToString(value);\n        }\n        if (values !== undefined && !values.filter(function (val) { return val == value; }).length) {\n            throw new RangeError(value + \" is not within \" + values.join(', '));\n        }\n        return value;\n    }\n    return fallback;\n}\n","/**\n * https://tc39.es/ecma402/#sec-bestavailablelocale\n * @param availableLocales\n * @param locale\n */\nexport function BestAvailableLocale(availableLocales, locale) {\n    var candidate = locale;\n    while (true) {\n        if (availableLocales.has(candidate)) {\n            return candidate;\n        }\n        var pos = candidate.lastIndexOf('-');\n        if (!~pos) {\n            return undefined;\n        }\n        if (pos >= 2 && candidate[pos - 2] === '-') {\n            pos -= 2;\n        }\n        candidate = candidate.slice(0, pos);\n    }\n}\n","import { invariant } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-unicodeextensionvalue\n * @param extension\n * @param key\n */\nexport function UnicodeExtensionValue(extension, key) {\n    invariant(key.length === 2, 'key must have 2 elements');\n    var size = extension.length;\n    var searchValue = \"-\" + key + \"-\";\n    var pos = extension.indexOf(searchValue);\n    if (pos !== -1) {\n        var start = pos + 4;\n        var end = start;\n        var k = start;\n        var done = false;\n        while (!done) {\n            var e = extension.indexOf('-', k);\n            var len = void 0;\n            if (e === -1) {\n                len = size - k;\n            }\n            else {\n                len = e - k;\n            }\n            if (len === 2) {\n                done = true;\n            }\n            else if (e === -1) {\n                end = size;\n                done = true;\n            }\n            else {\n                end = e;\n                k = e + 1;\n            }\n        }\n        return extension.slice(start, end);\n    }\n    searchValue = \"-\" + key;\n    pos = extension.indexOf(searchValue);\n    if (pos !== -1 && pos + 3 === size) {\n        return '';\n    }\n    return undefined;\n}\n","import { LookupMatcher } from './LookupMatcher';\nimport { BestFitMatcher } from './BestFitMatcher';\nimport { invariant } from './utils';\nimport { UnicodeExtensionValue } from './UnicodeExtensionValue';\n/**\n * https://tc39.es/ecma402/#sec-resolvelocale\n */\nexport function ResolveLocale(availableLocales, requestedLocales, options, relevantExtensionKeys, localeData, getDefaultLocale) {\n    var matcher = options.localeMatcher;\n    var r;\n    if (matcher === 'lookup') {\n        r = LookupMatcher(availableLocales, requestedLocales, getDefaultLocale);\n    }\n    else {\n        r = BestFitMatcher(availableLocales, requestedLocales, getDefaultLocale);\n    }\n    var foundLocale = r.locale;\n    var result = { locale: '', dataLocale: foundLocale };\n    var supportedExtension = '-u';\n    for (var _i = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _i < relevantExtensionKeys_1.length; _i++) {\n        var key = relevantExtensionKeys_1[_i];\n        invariant(foundLocale in localeData, \"Missing locale data for \" + foundLocale);\n        var foundLocaleData = localeData[foundLocale];\n        invariant(typeof foundLocaleData === 'object' && foundLocaleData !== null, \"locale data \" + key + \" must be an object\");\n        var keyLocaleData = foundLocaleData[key];\n        invariant(Array.isArray(keyLocaleData), \"keyLocaleData for \" + key + \" must be an array\");\n        var value = keyLocaleData[0];\n        invariant(typeof value === 'string' || value === null, \"value must be string or null but got \" + typeof value + \" in key \" + key);\n        var supportedExtensionAddition = '';\n        if (r.extension) {\n            var requestedValue = UnicodeExtensionValue(r.extension, key);\n            if (requestedValue !== undefined) {\n                if (requestedValue !== '') {\n                    if (~keyLocaleData.indexOf(requestedValue)) {\n                        value = requestedValue;\n                        supportedExtensionAddition = \"-\" + key + \"-\" + value;\n                    }\n                }\n                else if (~requestedValue.indexOf('true')) {\n                    value = 'true';\n                    supportedExtensionAddition = \"-\" + key;\n                }\n            }\n        }\n        if (key in options) {\n            var optionsValue = options[key];\n            invariant(typeof optionsValue === 'string' ||\n                typeof optionsValue === 'undefined' ||\n                optionsValue === null, 'optionsValue must be String, Undefined or Null');\n            if (~keyLocaleData.indexOf(optionsValue)) {\n                if (optionsValue !== value) {\n                    value = optionsValue;\n                    supportedExtensionAddition = '';\n                }\n            }\n        }\n        result[key] = value;\n        supportedExtension += supportedExtensionAddition;\n    }\n    if (supportedExtension.length > 2) {\n        var privateIndex = foundLocale.indexOf('-x-');\n        if (privateIndex === -1) {\n            foundLocale = foundLocale + supportedExtension;\n        }\n        else {\n            var preExtension = foundLocale.slice(0, privateIndex);\n            var postExtension = foundLocale.slice(privateIndex, foundLocale.length);\n            foundLocale = preExtension + supportedExtension + postExtension;\n        }\n        foundLocale = Intl.getCanonicalLocales(foundLocale)[0];\n    }\n    result.locale = foundLocale;\n    return result;\n}\n","import { UNICODE_EXTENSION_SEQUENCE_REGEX } from './utils';\nimport { BestAvailableLocale } from './BestAvailableLocale';\n/**\n * https://tc39.es/ecma402/#sec-lookupmatcher\n * @param availableLocales\n * @param requestedLocales\n * @param getDefaultLocale\n */\nexport function LookupMatcher(availableLocales, requestedLocales, getDefaultLocale) {\n    var result = { locale: '' };\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n        var locale = requestedLocales_1[_i];\n        var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        var availableLocale = BestAvailableLocale(availableLocales, noExtensionLocale);\n        if (availableLocale) {\n            result.locale = availableLocale;\n            if (locale !== noExtensionLocale) {\n                result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n            }\n            return result;\n        }\n    }\n    result.locale = getDefaultLocale();\n    return result;\n}\n","import { BestAvailableLocale } from './BestAvailableLocale';\nimport { UNICODE_EXTENSION_SEQUENCE_REGEX } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-bestfitmatcher\n * @param availableLocales\n * @param requestedLocales\n * @param getDefaultLocale\n */\nexport function BestFitMatcher(availableLocales, requestedLocales, getDefaultLocale) {\n    var minimizedAvailableLocaleMap = {};\n    var minimizedAvailableLocales = new Set();\n    availableLocales.forEach(function (locale) {\n        var minimizedLocale = new Intl.Locale(locale)\n            .minimize()\n            .toString();\n        minimizedAvailableLocaleMap[minimizedLocale] = locale;\n        minimizedAvailableLocales.add(minimizedLocale);\n    });\n    var foundLocale;\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n        var l = requestedLocales_1[_i];\n        if (foundLocale) {\n            break;\n        }\n        var noExtensionLocale = l.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        if (availableLocales.has(noExtensionLocale)) {\n            foundLocale = noExtensionLocale;\n            break;\n        }\n        if (minimizedAvailableLocales.has(noExtensionLocale)) {\n            foundLocale = minimizedAvailableLocaleMap[noExtensionLocale];\n            break;\n        }\n        var locale = new Intl.Locale(noExtensionLocale);\n        var maximizedRequestedLocale = locale.maximize().toString();\n        var minimizedRequestedLocale = locale.minimize().toString();\n        // Check minimized locale\n        if (minimizedAvailableLocales.has(minimizedRequestedLocale)) {\n            foundLocale = minimizedAvailableLocaleMap[minimizedRequestedLocale];\n            break;\n        }\n        // Lookup algo on maximized locale\n        foundLocale = BestAvailableLocale(minimizedAvailableLocales, maximizedRequestedLocale);\n    }\n    return {\n        locale: foundLocale || getDefaultLocale(),\n    };\n}\n","/**\n * https://tc39.es/ecma402/#sec-isvalidtimezonename\n * @param tz\n * @param implDetails implementation details\n */\nexport function IsValidTimeZoneName(tz, _a) {\n    var tzData = _a.tzData, uppercaseLinks = _a.uppercaseLinks;\n    var uppercasedTz = tz.toUpperCase();\n    var zoneNames = new Set();\n    Object.keys(tzData)\n        .map(function (z) { return z.toUpperCase(); })\n        .forEach(function (z) { return zoneNames.add(z); });\n    return zoneNames.has(uppercasedTz) || uppercasedTz in uppercaseLinks;\n}\n","export function DefaultNumberOption(val, min, max, fallback) {\n    if (val !== undefined) {\n        val = Number(val);\n        if (isNaN(val) || val < min || val > max) {\n            throw new RangeError(val + \" is outside of range [\" + min + \", \" + max + \"]\");\n        }\n        return Math.floor(val);\n    }\n    return fallback;\n}\n","/**\n * https://tc39.es/ecma402/#sec-getnumberoption\n * @param options\n * @param property\n * @param min\n * @param max\n * @param fallback\n */\nimport { DefaultNumberOption } from './DefaultNumberOption';\nexport function GetNumberOption(options, property, minimum, maximum, fallback) {\n    var val = options[property];\n    // @ts-expect-error\n    return DefaultNumberOption(val, minimum, maximum, fallback);\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { ToDateTimeOptions } from './ToDateTimeOptions';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { IsValidTimeZoneName } from '../IsValidTimeZoneName';\nimport { CanonicalizeTimeZoneName } from '../CanonicalizeTimeZoneName';\nimport { BasicFormatMatcher } from './BasicFormatMatcher';\nimport { BestFitFormatMatcher } from './BestFitFormatMatcher';\nimport { invariant } from '../utils';\nimport { DATE_TIME_PROPS } from './utils';\nimport { DateTimeStyleFormat } from './DateTimeStyleFormat';\nimport { GetNumberOption } from '../GetNumberOption';\nfunction isTimeRelated(opt) {\n    for (var _i = 0, _a = ['hour', 'minute', 'second']; _i < _a.length; _i++) {\n        var prop = _a[_i];\n        var value = opt[prop];\n        if (value !== undefined) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction resolveHourCycle(hc, hcDefault, hour12) {\n    if (hc == null) {\n        hc = hcDefault;\n    }\n    if (hour12 !== undefined) {\n        if (hour12) {\n            if (hcDefault === 'h11' || hcDefault === 'h23') {\n                hc = 'h11';\n            }\n            else {\n                hc = 'h12';\n            }\n        }\n        else {\n            invariant(!hour12, 'hour12 must not be set');\n            if (hcDefault === 'h11' || hcDefault === 'h23') {\n                hc = 'h23';\n            }\n            else {\n                hc = 'h24';\n            }\n        }\n    }\n    return hc;\n}\nvar TYPE_REGEX = /^[a-z0-9]{3,8}$/i;\n/**\n * https://tc39.es/ecma402/#sec-initializedatetimeformat\n * @param dtf DateTimeFormat\n * @param locales locales\n * @param opts options\n */\nexport function InitializeDateTimeFormat(dtf, locales, opts, _a) {\n    var getInternalSlots = _a.getInternalSlots, availableLocales = _a.availableLocales, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale, getDefaultTimeZone = _a.getDefaultTimeZone, relevantExtensionKeys = _a.relevantExtensionKeys, tzData = _a.tzData, uppercaseLinks = _a.uppercaseLinks;\n    // @ts-ignore\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var options = ToDateTimeOptions(opts, 'any', 'date');\n    var opt = Object.create(null);\n    var matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    opt.localeMatcher = matcher;\n    var calendar = GetOption(options, 'calendar', 'string', undefined, undefined);\n    if (calendar !== undefined && !TYPE_REGEX.test(calendar)) {\n        throw new RangeError('Malformed calendar');\n    }\n    var internalSlots = getInternalSlots(dtf);\n    opt.ca = calendar;\n    var numberingSystem = GetOption(options, 'numberingSystem', 'string', undefined, undefined);\n    if (numberingSystem !== undefined && !TYPE_REGEX.test(numberingSystem)) {\n        throw new RangeError('Malformed numbering system');\n    }\n    opt.nu = numberingSystem;\n    var hour12 = GetOption(options, 'hour12', 'boolean', undefined, undefined);\n    var hourCycle = GetOption(options, 'hourCycle', 'string', ['h11', 'h12', 'h23', 'h24'], undefined);\n    if (hour12 !== undefined) {\n        // @ts-ignore\n        hourCycle = null;\n    }\n    opt.hc = hourCycle;\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    internalSlots.locale = r.locale;\n    calendar = r.ca;\n    internalSlots.calendar = calendar;\n    internalSlots.hourCycle = r.hc;\n    internalSlots.numberingSystem = r.nu;\n    var dataLocale = r.dataLocale;\n    internalSlots.dataLocale = dataLocale;\n    var timeZone = options.timeZone;\n    if (timeZone !== undefined) {\n        timeZone = String(timeZone);\n        if (!IsValidTimeZoneName(timeZone, { tzData: tzData, uppercaseLinks: uppercaseLinks })) {\n            throw new RangeError('Invalid timeZoneName');\n        }\n        timeZone = CanonicalizeTimeZoneName(timeZone, { tzData: tzData, uppercaseLinks: uppercaseLinks });\n    }\n    else {\n        timeZone = getDefaultTimeZone();\n    }\n    internalSlots.timeZone = timeZone;\n    opt = Object.create(null);\n    opt.weekday = GetOption(options, 'weekday', 'string', ['narrow', 'short', 'long'], undefined);\n    opt.era = GetOption(options, 'era', 'string', ['narrow', 'short', 'long'], undefined);\n    opt.year = GetOption(options, 'year', 'string', ['2-digit', 'numeric'], undefined);\n    opt.month = GetOption(options, 'month', 'string', ['2-digit', 'numeric', 'narrow', 'short', 'long'], undefined);\n    opt.day = GetOption(options, 'day', 'string', ['2-digit', 'numeric'], undefined);\n    opt.hour = GetOption(options, 'hour', 'string', ['2-digit', 'numeric'], undefined);\n    opt.minute = GetOption(options, 'minute', 'string', ['2-digit', 'numeric'], undefined);\n    opt.second = GetOption(options, 'second', 'string', ['2-digit', 'numeric'], undefined);\n    opt.timeZoneName = GetOption(options, 'timeZoneName', 'string', ['short', 'long'], undefined);\n    opt.fractionalSecondDigits = GetNumberOption(options, 'fractionalSecondDigits', 1, 3, \n    // @ts-expect-error\n    undefined);\n    var dataLocaleData = localeData[dataLocale];\n    invariant(!!dataLocaleData, \"Missing locale data for \" + dataLocale);\n    var formats = dataLocaleData.formats[calendar];\n    // UNSPECCED: IMPLEMENTATION DETAILS\n    if (!formats) {\n        throw new RangeError(\"Calendar \\\"\" + calendar + \"\\\" is not supported. Try setting \\\"calendar\\\" to 1 of the following: \" + Object.keys(dataLocaleData.formats).join(', '));\n    }\n    var formatMatcher = GetOption(options, 'formatMatcher', 'string', ['basic', 'best fit'], 'best fit');\n    var dateStyle = GetOption(options, 'dateStyle', 'string', ['full', 'long', 'medium', 'short'], undefined);\n    internalSlots.dateStyle = dateStyle;\n    var timeStyle = GetOption(options, 'timeStyle', 'string', ['full', 'long', 'medium', 'short'], undefined);\n    internalSlots.timeStyle = timeStyle;\n    var bestFormat;\n    if (dateStyle === undefined && timeStyle === undefined) {\n        if (formatMatcher === 'basic') {\n            bestFormat = BasicFormatMatcher(opt, formats);\n        }\n        else {\n            // IMPL DETAILS START\n            if (isTimeRelated(opt)) {\n                var hc = resolveHourCycle(internalSlots.hourCycle, dataLocaleData.hourCycle, hour12);\n                opt.hour12 = hc === 'h11' || hc === 'h12';\n            }\n            // IMPL DETAILS END\n            bestFormat = BestFitFormatMatcher(opt, formats);\n        }\n    }\n    else {\n        for (var _i = 0, DATE_TIME_PROPS_1 = DATE_TIME_PROPS; _i < DATE_TIME_PROPS_1.length; _i++) {\n            var prop = DATE_TIME_PROPS_1[_i];\n            var p = opt[prop];\n            if (p !== undefined) {\n                throw new TypeError(\"Intl.DateTimeFormat can't set option \" + prop + \" when \" + (dateStyle ? 'dateStyle' : 'timeStyle') + \" is used\");\n            }\n        }\n        bestFormat = DateTimeStyleFormat(dateStyle, timeStyle, dataLocaleData);\n    }\n    // IMPL DETAIL START\n    // For debugging\n    internalSlots.format = bestFormat;\n    // IMPL DETAIL END\n    for (var prop in opt) {\n        var p = bestFormat[prop];\n        if (p !== undefined) {\n            internalSlots[prop] = p;\n        }\n    }\n    var pattern;\n    var rangePatterns;\n    if (internalSlots.hour !== undefined) {\n        var hc = resolveHourCycle(internalSlots.hourCycle, dataLocaleData.hourCycle, hour12);\n        internalSlots.hourCycle = hc;\n        if (hc === 'h11' || hc === 'h12') {\n            pattern = bestFormat.pattern12;\n            rangePatterns = bestFormat.rangePatterns12;\n        }\n        else {\n            pattern = bestFormat.pattern;\n            rangePatterns = bestFormat.rangePatterns;\n        }\n    }\n    else {\n        // @ts-ignore\n        internalSlots.hourCycle = undefined;\n        pattern = bestFormat.pattern;\n        rangePatterns = bestFormat.rangePatterns;\n    }\n    internalSlots.pattern = pattern;\n    internalSlots.rangePatterns = rangePatterns;\n    return dtf;\n}\n","/**\n * This follows https://tc39.es/ecma402/#sec-case-sensitivity-and-case-mapping\n * @param str string to convert\n */\nfunction toUpperCase(str) {\n    return str.replace(/([a-z])/g, function (_, c) { return c.toUpperCase(); });\n}\nvar NOT_A_Z_REGEX = /[^A-Z]/;\n/**\n * https://tc39.es/ecma402/#sec-iswellformedcurrencycode\n */\nexport function IsWellFormedCurrencyCode(currency) {\n    currency = toUpperCase(currency);\n    if (currency.length !== 3) {\n        return false;\n    }\n    if (NOT_A_Z_REGEX.test(currency)) {\n        return false;\n    }\n    return true;\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { invariant } from '../utils';\nimport { IsWellFormedCurrencyCode } from '../IsWellFormedCurrencyCode';\nvar UNICODE_REGION_SUBTAG_REGEX = /^([a-z]{2}|[0-9]{3})$/i;\nvar ALPHA_4 = /^[a-z]{4}$/i;\nfunction isUnicodeRegionSubtag(region) {\n    return UNICODE_REGION_SUBTAG_REGEX.test(region);\n}\nfunction isUnicodeScriptSubtag(script) {\n    return ALPHA_4.test(script);\n}\nexport function CanonicalCodeForDisplayNames(type, code) {\n    if (type === 'language') {\n        return CanonicalizeLocaleList([code])[0];\n    }\n    if (type === 'region') {\n        if (!isUnicodeRegionSubtag(code)) {\n            throw RangeError('invalid region');\n        }\n        return code.toUpperCase();\n    }\n    if (type === 'script') {\n        if (!isUnicodeScriptSubtag(code)) {\n            throw RangeError('invalid script');\n        }\n        return \"\" + code[0].toUpperCase() + code.slice(1).toLowerCase();\n    }\n    invariant(type === 'currency', 'invalid type');\n    if (!IsWellFormedCurrencyCode(code)) {\n        throw RangeError('invalid currency');\n    }\n    return code.toUpperCase();\n}\n","/**\n * https://tc39.es/ecma402/#sec-getoptionsobject\n * @param options\n * @returns\n */\nexport function GetOptionsObject(options) {\n    if (typeof options === 'undefined') {\n        return Object.create(null);\n    }\n    if (typeof options === 'object') {\n        return options;\n    }\n    throw new TypeError('Options must be an object');\n}\n","/**\n * https://tc39.es/ecma402/#table-sanctioned-simple-unit-identifiers\n */\nexport var SANCTIONED_UNITS = [\n    'angle-degree',\n    'area-acre',\n    'area-hectare',\n    'concentr-percent',\n    'digital-bit',\n    'digital-byte',\n    'digital-gigabit',\n    'digital-gigabyte',\n    'digital-kilobit',\n    'digital-kilobyte',\n    'digital-megabit',\n    'digital-megabyte',\n    'digital-petabyte',\n    'digital-terabit',\n    'digital-terabyte',\n    'duration-day',\n    'duration-hour',\n    'duration-millisecond',\n    'duration-minute',\n    'duration-month',\n    'duration-second',\n    'duration-week',\n    'duration-year',\n    'length-centimeter',\n    'length-foot',\n    'length-inch',\n    'length-kilometer',\n    'length-meter',\n    'length-mile-scandinavian',\n    'length-mile',\n    'length-millimeter',\n    'length-yard',\n    'mass-gram',\n    'mass-kilogram',\n    'mass-ounce',\n    'mass-pound',\n    'mass-stone',\n    'temperature-celsius',\n    'temperature-fahrenheit',\n    'volume-fluid-ounce',\n    'volume-gallon',\n    'volume-liter',\n    'volume-milliliter',\n];\n// In CLDR, the unit name always follows the form `namespace-unit` pattern.\n// For example: `digital-bit` instead of `bit`. This function removes the namespace prefix.\nexport function removeUnitNamespace(unit) {\n    return unit.slice(unit.indexOf('-') + 1);\n}\n/**\n * https://tc39.es/ecma402/#table-sanctioned-simple-unit-identifiers\n */\nexport var SIMPLE_UNITS = SANCTIONED_UNITS.map(removeUnitNamespace);\n/**\n * https://tc39.es/ecma402/#sec-issanctionedsimpleunitidentifier\n */\nexport function IsSanctionedSimpleUnitIdentifier(unitIdentifier) {\n    return SIMPLE_UNITS.indexOf(unitIdentifier) > -1;\n}\n","import { IsSanctionedSimpleUnitIdentifier } from './IsSanctionedSimpleUnitIdentifier';\n/**\n * This follows https://tc39.es/ecma402/#sec-case-sensitivity-and-case-mapping\n * @param str string to convert\n */\nfunction toLowerCase(str) {\n    return str.replace(/([A-Z])/g, function (_, c) { return c.toLowerCase(); });\n}\n/**\n * https://tc39.es/ecma402/#sec-iswellformedunitidentifier\n * @param unit\n */\nexport function IsWellFormedUnitIdentifier(unit) {\n    unit = toLowerCase(unit);\n    if (IsSanctionedSimpleUnitIdentifier(unit)) {\n        return true;\n    }\n    var units = unit.split('-per-');\n    if (units.length !== 2) {\n        return false;\n    }\n    var numerator = units[0], denominator = units[1];\n    if (!IsSanctionedSimpleUnitIdentifier(numerator) ||\n        !IsSanctionedSimpleUnitIdentifier(denominator)) {\n        return false;\n    }\n    return true;\n}\n","/**\n * The abstract operation ComputeExponentForMagnitude computes an exponent by which to scale a\n * number of the given magnitude (power of ten of the most significant digit) according to the\n * locale and the desired notation (scientific, engineering, or compact).\n */\nexport function ComputeExponentForMagnitude(numberFormat, magnitude, _a) {\n    var getInternalSlots = _a.getInternalSlots;\n    var internalSlots = getInternalSlots(numberFormat);\n    var notation = internalSlots.notation, dataLocaleData = internalSlots.dataLocaleData, numberingSystem = internalSlots.numberingSystem;\n    switch (notation) {\n        case 'standard':\n            return 0;\n        case 'scientific':\n            return magnitude;\n        case 'engineering':\n            return Math.floor(magnitude / 3) * 3;\n        default: {\n            // Let exponent be an implementation- and locale-dependent (ILD) integer by which to scale a\n            // number of the given magnitude in compact notation for the current locale.\n            var compactDisplay = internalSlots.compactDisplay, style = internalSlots.style, currencyDisplay = internalSlots.currencyDisplay;\n            var thresholdMap = void 0;\n            if (style === 'currency' && currencyDisplay !== 'name') {\n                var currency = dataLocaleData.numbers.currency[numberingSystem] ||\n                    dataLocaleData.numbers.currency[dataLocaleData.numbers.nu[0]];\n                thresholdMap = currency.short;\n            }\n            else {\n                var decimal = dataLocaleData.numbers.decimal[numberingSystem] ||\n                    dataLocaleData.numbers.decimal[dataLocaleData.numbers.nu[0]];\n                thresholdMap = compactDisplay === 'long' ? decimal.long : decimal.short;\n            }\n            if (!thresholdMap) {\n                return 0;\n            }\n            var num = String(Math.pow(10, magnitude));\n            var thresholds = Object.keys(thresholdMap); // TODO: this can be pre-processed\n            if (num < thresholds[0]) {\n                return 0;\n            }\n            if (num > thresholds[thresholds.length - 1]) {\n                return thresholds[thresholds.length - 1].length - 1;\n            }\n            var i = thresholds.indexOf(num);\n            if (i === -1) {\n                return 0;\n            }\n            // See https://unicode.org/reports/tr35/tr35-numbers.html#Compact_Number_Formats\n            // Special handling if the pattern is precisely `0`.\n            var magnitudeKey = thresholds[i];\n            // TODO: do we need to handle plural here?\n            var compactPattern = thresholdMap[magnitudeKey].other;\n            if (compactPattern === '0') {\n                return 0;\n            }\n            // Example: in zh-TW, `10000000` maps to `0000`. So we need to return 8 - 4 = 4 here.\n            return (magnitudeKey.length -\n                thresholdMap[magnitudeKey].other.match(/0+/)[0].length);\n        }\n    }\n}\n","import { repeat, getMagnitude } from '../utils';\nexport function ToRawPrecision(x, minPrecision, maxPrecision) {\n    var p = maxPrecision;\n    var m;\n    var e;\n    var xFinal;\n    if (x === 0) {\n        m = repeat('0', p);\n        e = 0;\n        xFinal = 0;\n    }\n    else {\n        var xToString = x.toString();\n        // If xToString is formatted as scientific notation, the number is either very small or very\n        // large. If the precision of the formatted string is lower that requested max precision, we\n        // should still infer them from the formatted string, otherwise the formatted result might have\n        // precision loss (e.g. 1e41 will not have 0 in every trailing digits).\n        var xToStringExponentIndex = xToString.indexOf('e');\n        var _a = xToString.split('e'), xToStringMantissa = _a[0], xToStringExponent = _a[1];\n        var xToStringMantissaWithoutDecimalPoint = xToStringMantissa.replace('.', '');\n        if (xToStringExponentIndex >= 0 &&\n            xToStringMantissaWithoutDecimalPoint.length <= p) {\n            e = +xToStringExponent;\n            m =\n                xToStringMantissaWithoutDecimalPoint +\n                    repeat('0', p - xToStringMantissaWithoutDecimalPoint.length);\n            xFinal = x;\n        }\n        else {\n            e = getMagnitude(x);\n            var decimalPlaceOffset = e - p + 1;\n            // n is the integer containing the required precision digits. To derive the formatted string,\n            // we will adjust its decimal place in the logic below.\n            var n = Math.round(adjustDecimalPlace(x, decimalPlaceOffset));\n            // The rounding caused the change of magnitude, so we should increment `e` by 1.\n            if (adjustDecimalPlace(n, p - 1) >= 10) {\n                e = e + 1;\n                // Divide n by 10 to swallow one precision.\n                n = Math.floor(n / 10);\n            }\n            m = n.toString();\n            // Equivalent of n * 10 ** (e - p + 1)\n            xFinal = adjustDecimalPlace(n, p - 1 - e);\n        }\n    }\n    var int;\n    if (e >= p - 1) {\n        m = m + repeat('0', e - p + 1);\n        int = e + 1;\n    }\n    else if (e >= 0) {\n        m = m.slice(0, e + 1) + \".\" + m.slice(e + 1);\n        int = e + 1;\n    }\n    else {\n        m = \"0.\" + repeat('0', -e - 1) + m;\n        int = 1;\n    }\n    if (m.indexOf('.') >= 0 && maxPrecision > minPrecision) {\n        var cut = maxPrecision - minPrecision;\n        while (cut > 0 && m[m.length - 1] === '0') {\n            m = m.slice(0, -1);\n            cut--;\n        }\n        if (m[m.length - 1] === '.') {\n            m = m.slice(0, -1);\n        }\n    }\n    return { formattedString: m, roundedNumber: xFinal, integerDigitsCount: int };\n    // x / (10 ** magnitude), but try to preserve as much floating point precision as possible.\n    function adjustDecimalPlace(x, magnitude) {\n        return magnitude < 0 ? x * Math.pow(10, -magnitude) : x / Math.pow(10, magnitude);\n    }\n}\n","import { repeat } from '../utils';\n/**\n * TODO: dedup with intl-pluralrules and support BigInt\n * https://tc39.es/ecma402/#sec-torawfixed\n * @param x a finite non-negative Number or BigInt\n * @param minFraction and integer between 0 and 20\n * @param maxFraction and integer between 0 and 20\n */\nexport function ToRawFixed(x, minFraction, maxFraction) {\n    var f = maxFraction;\n    var n = Math.round(x * Math.pow(10, f));\n    var xFinal = n / Math.pow(10, f);\n    // n is a positive integer, but it is possible to be greater than 1e21.\n    // In such case we will go the slow path.\n    // See also: https://tc39.es/ecma262/#sec-numeric-types-number-tostring\n    var m;\n    if (n < 1e21) {\n        m = n.toString();\n    }\n    else {\n        m = n.toString();\n        var _a = m.split('e'), mantissa = _a[0], exponent = _a[1];\n        m = mantissa.replace('.', '');\n        m = m + repeat('0', Math.max(+exponent - m.length + 1, 0));\n    }\n    var int;\n    if (f !== 0) {\n        var k = m.length;\n        if (k <= f) {\n            var z = repeat('0', f + 1 - k);\n            m = z + m;\n            k = f + 1;\n        }\n        var a = m.slice(0, k - f);\n        var b = m.slice(k - f);\n        m = a + \".\" + b;\n        int = a.length;\n    }\n    else {\n        int = m.length;\n    }\n    var cut = maxFraction - minFraction;\n    while (cut > 0 && m[m.length - 1] === '0') {\n        m = m.slice(0, -1);\n        cut--;\n    }\n    if (m[m.length - 1] === '.') {\n        m = m.slice(0, -1);\n    }\n    return { formattedString: m, roundedNumber: xFinal, integerDigitsCount: int };\n}\n","import { SameValue } from '../262';\nimport { ToRawPrecision } from './ToRawPrecision';\nimport { repeat } from '../utils';\nimport { ToRawFixed } from './ToRawFixed';\n/**\n * https://tc39.es/ecma402/#sec-formatnumberstring\n */\nexport function FormatNumericToString(intlObject, x) {\n    var isNegative = x < 0 || SameValue(x, -0);\n    if (isNegative) {\n        x = -x;\n    }\n    var result;\n    var rourndingType = intlObject.roundingType;\n    switch (rourndingType) {\n        case 'significantDigits':\n            result = ToRawPrecision(x, intlObject.minimumSignificantDigits, intlObject.maximumSignificantDigits);\n            break;\n        case 'fractionDigits':\n            result = ToRawFixed(x, intlObject.minimumFractionDigits, intlObject.maximumFractionDigits);\n            break;\n        default:\n            result = ToRawPrecision(x, 1, 2);\n            if (result.integerDigitsCount > 1) {\n                result = ToRawFixed(x, 0, 0);\n            }\n            break;\n    }\n    x = result.roundedNumber;\n    var string = result.formattedString;\n    var int = result.integerDigitsCount;\n    var minInteger = intlObject.minimumIntegerDigits;\n    if (int < minInteger) {\n        var forwardZeros = repeat('0', minInteger - int);\n        string = forwardZeros + string;\n    }\n    if (isNegative) {\n        x = -x;\n    }\n    return { roundedNumber: x, formattedString: string };\n}\n","import { getMagnitude } from '../utils';\nimport { ComputeExponentForMagnitude } from './ComputeExponentForMagnitude';\nimport { FormatNumericToString } from './FormatNumericToString';\n/**\n * The abstract operation ComputeExponent computes an exponent (power of ten) by which to scale x\n * according to the number formatting settings. It handles cases such as 999 rounding up to 1000,\n * requiring a different exponent.\n *\n * NOT IN SPEC: it returns [exponent, magnitude].\n */\nexport function ComputeExponent(numberFormat, x, _a) {\n    var getInternalSlots = _a.getInternalSlots;\n    if (x === 0) {\n        return [0, 0];\n    }\n    if (x < 0) {\n        x = -x;\n    }\n    var magnitude = getMagnitude(x);\n    var exponent = ComputeExponentForMagnitude(numberFormat, magnitude, {\n        getInternalSlots: getInternalSlots,\n    });\n    // Preserve more precision by doing multiplication when exponent is negative.\n    x = exponent < 0 ? x * Math.pow(10, -exponent) : x / Math.pow(10, exponent);\n    var formatNumberResult = FormatNumericToString(getInternalSlots(numberFormat), x);\n    if (formatNumberResult.roundedNumber === 0) {\n        return [exponent, magnitude];\n    }\n    var newMagnitude = getMagnitude(formatNumberResult.roundedNumber);\n    if (newMagnitude === magnitude - exponent) {\n        return [exponent, magnitude];\n    }\n    return [\n        ComputeExponentForMagnitude(numberFormat, magnitude + 1, {\n            getInternalSlots: getInternalSlots,\n        }),\n        magnitude + 1,\n    ];\n}\n","import { HasOwnProperty } from '../262';\n/**\n * https://tc39.es/ecma402/#sec-currencydigits\n */\nexport function CurrencyDigits(c, _a) {\n    var currencyDigitsData = _a.currencyDigitsData;\n    return HasOwnProperty(currencyDigitsData, c)\n        ? currencyDigitsData[c]\n        : 2;\n}\n","import { ToRawFixed } from './ToRawFixed';\nimport * as digitMapping from './digit-mapping.json';\n// This is from: unicode-12.1.0/General_Category/Symbol/regex.js\n// IE11 does not support unicode flag, otherwise this is just /\\p{S}/u.\nvar S_UNICODE_REGEX = /[\\$\\+<->\\^`\\|~\\xA2-\\xA6\\xA8\\xA9\\xAC\\xAE-\\xB1\\xB4\\xB8\\xD7\\xF7\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u03F6\\u0482\\u058D-\\u058F\\u0606-\\u0608\\u060B\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u07FE\\u07FF\\u09F2\\u09F3\\u09FA\\u09FB\\u0AF1\\u0B70\\u0BF3-\\u0BFA\\u0C7F\\u0D4F\\u0D79\\u0E3F\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u166D\\u17DB\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u2044\\u2052\\u207A-\\u207C\\u208A-\\u208C\\u20A0-\\u20BF\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116-\\u2118\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u2140-\\u2144\\u214A-\\u214D\\u214F\\u218A\\u218B\\u2190-\\u2307\\u230C-\\u2328\\u232B-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u2767\\u2794-\\u27C4\\u27C7-\\u27E5\\u27F0-\\u2982\\u2999-\\u29D7\\u29DC-\\u29FB\\u29FE-\\u2B73\\u2B76-\\u2B95\\u2B98-\\u2BFF\\u2CE5-\\u2CEA\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u309B\\u309C\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uA828-\\uA82B\\uA836-\\uA839\\uAA77-\\uAA79\\uAB5B\\uFB29\\uFBB2-\\uFBC1\\uFDFC\\uFDFD\\uFE62\\uFE64-\\uFE66\\uFE69\\uFF04\\uFF0B\\uFF1C-\\uFF1E\\uFF3E\\uFF40\\uFF5C\\uFF5E\\uFFE0-\\uFFE6\\uFFE8-\\uFFEE\\uFFFC\\uFFFD]|\\uD800[\\uDD37-\\uDD3F\\uDD79-\\uDD89\\uDD8C-\\uDD8E\\uDD90-\\uDD9B\\uDDA0\\uDDD0-\\uDDFC]|\\uD802[\\uDC77\\uDC78\\uDEC8]|\\uD805\\uDF3F|\\uD807[\\uDFD5-\\uDFF1]|\\uD81A[\\uDF3C-\\uDF3F\\uDF45]|\\uD82F\\uDC9C|\\uD834[\\uDC00-\\uDCF5\\uDD00-\\uDD26\\uDD29-\\uDD64\\uDD6A-\\uDD6C\\uDD83\\uDD84\\uDD8C-\\uDDA9\\uDDAE-\\uDDE8\\uDE00-\\uDE41\\uDE45\\uDF00-\\uDF56]|\\uD835[\\uDEC1\\uDEDB\\uDEFB\\uDF15\\uDF35\\uDF4F\\uDF6F\\uDF89\\uDFA9\\uDFC3]|\\uD836[\\uDC00-\\uDDFF\\uDE37-\\uDE3A\\uDE6D-\\uDE74\\uDE76-\\uDE83\\uDE85\\uDE86]|\\uD838[\\uDD4F\\uDEFF]|\\uD83B[\\uDCAC\\uDCB0\\uDD2E\\uDEF0\\uDEF1]|\\uD83C[\\uDC00-\\uDC2B\\uDC30-\\uDC93\\uDCA0-\\uDCAE\\uDCB1-\\uDCBF\\uDCC1-\\uDCCF\\uDCD1-\\uDCF5\\uDD10-\\uDD6C\\uDD70-\\uDDAC\\uDDE6-\\uDE02\\uDE10-\\uDE3B\\uDE40-\\uDE48\\uDE50\\uDE51\\uDE60-\\uDE65\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDED5\\uDEE0-\\uDEEC\\uDEF0-\\uDEFA\\uDF00-\\uDF73\\uDF80-\\uDFD8\\uDFE0-\\uDFEB]|\\uD83E[\\uDC00-\\uDC0B\\uDC10-\\uDC47\\uDC50-\\uDC59\\uDC60-\\uDC87\\uDC90-\\uDCAD\\uDD00-\\uDD0B\\uDD0D-\\uDD71\\uDD73-\\uDD76\\uDD7A-\\uDDA2\\uDDA5-\\uDDAA\\uDDAE-\\uDDCA\\uDDCD-\\uDE53\\uDE60-\\uDE6D\\uDE70-\\uDE73\\uDE78-\\uDE7A\\uDE80-\\uDE82\\uDE90-\\uDE95]/;\n// /^\\p{S}/u\nvar CARET_S_UNICODE_REGEX = new RegExp(\"^\" + S_UNICODE_REGEX.source);\n// /\\p{S}$/u\nvar S_DOLLAR_UNICODE_REGEX = new RegExp(S_UNICODE_REGEX.source + \"$\");\nvar CLDR_NUMBER_PATTERN = /[#0](?:[\\.,][#0]+)*/g;\nexport default function formatToParts(numberResult, data, pl, options) {\n    var sign = numberResult.sign, exponent = numberResult.exponent, magnitude = numberResult.magnitude;\n    var notation = options.notation, style = options.style, numberingSystem = options.numberingSystem;\n    var defaultNumberingSystem = data.numbers.nu[0];\n    // #region Part 1: partition and interpolate the CLDR number pattern.\n    // ----------------------------------------------------------\n    var compactNumberPattern = null;\n    if (notation === 'compact' && magnitude) {\n        compactNumberPattern = getCompactDisplayPattern(numberResult, pl, data, style, options.compactDisplay, options.currencyDisplay, numberingSystem);\n    }\n    // This is used multiple times\n    var nonNameCurrencyPart;\n    if (style === 'currency' && options.currencyDisplay !== 'name') {\n        var byCurrencyDisplay = data.currencies[options.currency];\n        if (byCurrencyDisplay) {\n            switch (options.currencyDisplay) {\n                case 'code':\n                    nonNameCurrencyPart = options.currency;\n                    break;\n                case 'symbol':\n                    nonNameCurrencyPart = byCurrencyDisplay.symbol;\n                    break;\n                default:\n                    nonNameCurrencyPart = byCurrencyDisplay.narrow;\n                    break;\n            }\n        }\n        else {\n            // Fallback for unknown currency\n            nonNameCurrencyPart = options.currency;\n        }\n    }\n    var numberPattern;\n    if (!compactNumberPattern) {\n        // Note: if the style is unit, or is currency and the currency display is name,\n        // its unit parts will be interpolated in part 2. So here we can fallback to decimal.\n        if (style === 'decimal' ||\n            style === 'unit' ||\n            (style === 'currency' && options.currencyDisplay === 'name')) {\n            // Shortcut for decimal\n            var decimalData = data.numbers.decimal[numberingSystem] ||\n                data.numbers.decimal[defaultNumberingSystem];\n            numberPattern = getPatternForSign(decimalData.standard, sign);\n        }\n        else if (style === 'currency') {\n            var currencyData = data.numbers.currency[numberingSystem] ||\n                data.numbers.currency[defaultNumberingSystem];\n            // We replace number pattern part with `0` for easier postprocessing.\n            numberPattern = getPatternForSign(currencyData[options.currencySign], sign);\n        }\n        else {\n            // percent\n            var percentPattern = data.numbers.percent[numberingSystem] ||\n                data.numbers.percent[defaultNumberingSystem];\n            numberPattern = getPatternForSign(percentPattern, sign);\n        }\n    }\n    else {\n        numberPattern = compactNumberPattern;\n    }\n    // Extract the decimal number pattern string. It looks like \"#,##0,00\", which will later be\n    // used to infer decimal group sizes.\n    var decimalNumberPattern = CLDR_NUMBER_PATTERN.exec(numberPattern)[0];\n    // Now we start to substitute patterns\n    // 1. replace strings like `0` and `#,##0.00` with `{0}`\n    // 2. unquote characters (invariant: the quoted characters does not contain the special tokens)\n    numberPattern = numberPattern\n        .replace(CLDR_NUMBER_PATTERN, '{0}')\n        .replace(/'(.)'/g, '$1');\n    // Handle currency spacing (both compact and non-compact).\n    if (style === 'currency' && options.currencyDisplay !== 'name') {\n        var currencyData = data.numbers.currency[numberingSystem] ||\n            data.numbers.currency[defaultNumberingSystem];\n        // See `currencySpacing` substitution rule in TR-35.\n        // Here we always assume the currencyMatch is \"[:^S:]\" and surroundingMatch is \"[:digit:]\".\n        //\n        // Example 1: for pattern \"#,##0.00\" with symbol \"US$\", we replace \"\" with the symbol,\n        // but insert an extra non-break space before the symbol, because \"[:^S:]\" matches \"U\" in\n        // \"US$\" and \"[:digit:]\" matches the latn numbering system digits.\n        //\n        // Example 2: for pattern \"#,##0.00\" with symbol \"US$\", there is no spacing between symbol\n        // and number, because `$` does not match \"[:^S:]\".\n        //\n        // Implementation note: here we do the best effort to infer the insertion.\n        // We also assume that `beforeInsertBetween` and `afterInsertBetween` will never be `;`.\n        var afterCurrency = currencyData.currencySpacing.afterInsertBetween;\n        if (afterCurrency && !S_DOLLAR_UNICODE_REGEX.test(nonNameCurrencyPart)) {\n            numberPattern = numberPattern.replace('{0}', \"\\u00A4\" + afterCurrency + \"{0}\");\n        }\n        var beforeCurrency = currencyData.currencySpacing.beforeInsertBetween;\n        if (beforeCurrency && !CARET_S_UNICODE_REGEX.test(nonNameCurrencyPart)) {\n            numberPattern = numberPattern.replace('{0}', \"{0}\" + beforeCurrency + \"\\u00A4\");\n        }\n    }\n    // The following tokens are special: `{0}`, ``, `%`, `-`, `+`, `{c:...}.\n    var numberPatternParts = numberPattern.split(/({c:[^}]+}|\\{0\\}|[%\\-\\+])/g);\n    var numberParts = [];\n    var symbols = data.numbers.symbols[numberingSystem] ||\n        data.numbers.symbols[defaultNumberingSystem];\n    for (var _i = 0, numberPatternParts_1 = numberPatternParts; _i < numberPatternParts_1.length; _i++) {\n        var part = numberPatternParts_1[_i];\n        if (!part) {\n            continue;\n        }\n        switch (part) {\n            case '{0}': {\n                // We only need to handle scientific and engineering notation here.\n                numberParts.push.apply(numberParts, paritionNumberIntoParts(symbols, numberResult, notation, exponent, numberingSystem, \n                // If compact number pattern exists, do not insert group separators.\n                !compactNumberPattern && options.useGrouping, decimalNumberPattern));\n                break;\n            }\n            case '-':\n                numberParts.push({ type: 'minusSign', value: symbols.minusSign });\n                break;\n            case '+':\n                numberParts.push({ type: 'plusSign', value: symbols.plusSign });\n                break;\n            case '%':\n                numberParts.push({ type: 'percentSign', value: symbols.percentSign });\n                break;\n            case '':\n                // Computed above when handling currency spacing.\n                numberParts.push({ type: 'currency', value: nonNameCurrencyPart });\n                break;\n            default:\n                if (/^\\{c:/.test(part)) {\n                    numberParts.push({\n                        type: 'compact',\n                        value: part.substring(3, part.length - 1),\n                    });\n                }\n                else {\n                    // literal\n                    numberParts.push({ type: 'literal', value: part });\n                }\n                break;\n        }\n    }\n    // #endregion\n    // #region Part 2: interpolate unit pattern if necessary.\n    // ----------------------------------------------\n    switch (style) {\n        case 'currency': {\n            // `currencyDisplay: 'name'` has similar pattern handling as units.\n            if (options.currencyDisplay === 'name') {\n                var unitPattern = (data.numbers.currency[numberingSystem] ||\n                    data.numbers.currency[defaultNumberingSystem]).unitPattern;\n                // Select plural\n                var unitName = void 0;\n                var currencyNameData = data.currencies[options.currency];\n                if (currencyNameData) {\n                    unitName = selectPlural(pl, numberResult.roundedNumber * Math.pow(10, exponent), currencyNameData.displayName);\n                }\n                else {\n                    // Fallback for unknown currency\n                    unitName = options.currency;\n                }\n                // Do {0} and {1} substitution\n                var unitPatternParts = unitPattern.split(/(\\{[01]\\})/g);\n                var result = [];\n                for (var _a = 0, unitPatternParts_1 = unitPatternParts; _a < unitPatternParts_1.length; _a++) {\n                    var part = unitPatternParts_1[_a];\n                    switch (part) {\n                        case '{0}':\n                            result.push.apply(result, numberParts);\n                            break;\n                        case '{1}':\n                            result.push({ type: 'currency', value: unitName });\n                            break;\n                        default:\n                            if (part) {\n                                result.push({ type: 'literal', value: part });\n                            }\n                            break;\n                    }\n                }\n                return result;\n            }\n            else {\n                return numberParts;\n            }\n        }\n        case 'unit': {\n            var unit = options.unit, unitDisplay = options.unitDisplay;\n            var unitData = data.units.simple[unit];\n            var unitPattern = void 0;\n            if (unitData) {\n                // Simple unit pattern\n                unitPattern = selectPlural(pl, numberResult.roundedNumber * Math.pow(10, exponent), data.units.simple[unit][unitDisplay]);\n            }\n            else {\n                // See: http://unicode.org/reports/tr35/tr35-general.html#perUnitPatterns\n                // If cannot find unit in the simple pattern, it must be \"per\" compound pattern.\n                // Implementation note: we are not following TR-35 here because we need to format to parts!\n                var _b = unit.split('-per-'), numeratorUnit = _b[0], denominatorUnit = _b[1];\n                unitData = data.units.simple[numeratorUnit];\n                var numeratorUnitPattern = selectPlural(pl, numberResult.roundedNumber * Math.pow(10, exponent), data.units.simple[numeratorUnit][unitDisplay]);\n                var perUnitPattern = data.units.simple[denominatorUnit].perUnit[unitDisplay];\n                if (perUnitPattern) {\n                    // perUnitPattern exists, combine it with numeratorUnitPattern\n                    unitPattern = perUnitPattern.replace('{0}', numeratorUnitPattern);\n                }\n                else {\n                    // get compoundUnit pattern (e.g. \"{0} per {1}\"), repalce {0} with numerator pattern and {1} with\n                    // the denominator pattern in singular form.\n                    var perPattern = data.units.compound.per[unitDisplay];\n                    var denominatorPattern = selectPlural(pl, 1, data.units.simple[denominatorUnit][unitDisplay]);\n                    unitPattern = unitPattern = perPattern\n                        .replace('{0}', numeratorUnitPattern)\n                        .replace('{1}', denominatorPattern.replace('{0}', ''));\n                }\n            }\n            var result = [];\n            // We need spacing around \"{0}\" because they are not treated as \"unit\" parts, but \"literal\".\n            for (var _c = 0, _d = unitPattern.split(/(\\s*\\{0\\}\\s*)/); _c < _d.length; _c++) {\n                var part = _d[_c];\n                var interpolateMatch = /^(\\s*)\\{0\\}(\\s*)$/.exec(part);\n                if (interpolateMatch) {\n                    // Space before \"{0}\"\n                    if (interpolateMatch[1]) {\n                        result.push({ type: 'literal', value: interpolateMatch[1] });\n                    }\n                    // \"{0}\" itself\n                    result.push.apply(result, numberParts);\n                    // Space after \"{0}\"\n                    if (interpolateMatch[2]) {\n                        result.push({ type: 'literal', value: interpolateMatch[2] });\n                    }\n                }\n                else if (part) {\n                    result.push({ type: 'unit', value: part });\n                }\n            }\n            return result;\n        }\n        default:\n            return numberParts;\n    }\n    // #endregion\n}\n// A subset of https://tc39.es/ecma402/#sec-partitionnotationsubpattern\n// Plus the exponent parts handling.\nfunction paritionNumberIntoParts(symbols, numberResult, notation, exponent, numberingSystem, useGrouping, \n/**\n * This is the decimal number pattern without signs or symbols.\n * It is used to infer the group size when `useGrouping` is true.\n *\n * A typical value looks like \"#,##0.00\" (primary group size is 3).\n * Some locales like Hindi has secondary group size of 2 (e.g. \"#,##,##0.00\").\n */\ndecimalNumberPattern) {\n    var result = [];\n    // eslint-disable-next-line prefer-const\n    var n = numberResult.formattedString, x = numberResult.roundedNumber;\n    if (isNaN(x)) {\n        return [{ type: 'nan', value: n }];\n    }\n    else if (!isFinite(x)) {\n        return [{ type: 'infinity', value: n }];\n    }\n    var digitReplacementTable = digitMapping[numberingSystem];\n    if (digitReplacementTable) {\n        n = n.replace(/\\d/g, function (digit) { return digitReplacementTable[+digit] || digit; });\n    }\n    // TODO: Else use an implementation dependent algorithm to map n to the appropriate\n    // representation of n in the given numbering system.\n    var decimalSepIndex = n.indexOf('.');\n    var integer;\n    var fraction;\n    if (decimalSepIndex > 0) {\n        integer = n.slice(0, decimalSepIndex);\n        fraction = n.slice(decimalSepIndex + 1);\n    }\n    else {\n        integer = n;\n    }\n    // #region Grouping integer digits\n    // The weird compact and x >= 10000 check is to ensure consistency with Node.js and Chrome.\n    // Note that `de` does not have compact form for thousands, but Node.js does not insert grouping separator\n    // unless the rounded number is greater than 10000:\n    //   NumberFormat('de', {notation: 'compact', compactDisplay: 'short'}).format(1234) //=> \"1234\"\n    //   NumberFormat('de').format(1234) //=> \"1.234\"\n    if (useGrouping && (notation !== 'compact' || x >= 10000)) {\n        var groupSepSymbol = symbols.group;\n        var groups = [];\n        // > There may be two different grouping sizes: The primary grouping size used for the least\n        // > significant integer group, and the secondary grouping size used for more significant groups.\n        // > If a pattern contains multiple grouping separators, the interval between the last one and the\n        // > end of the integer defines the primary grouping size, and the interval between the last two\n        // > defines the secondary grouping size. All others are ignored.\n        var integerNumberPattern = decimalNumberPattern.split('.')[0];\n        var patternGroups = integerNumberPattern.split(',');\n        var primaryGroupingSize = 3;\n        var secondaryGroupingSize = 3;\n        if (patternGroups.length > 1) {\n            primaryGroupingSize = patternGroups[patternGroups.length - 1].length;\n        }\n        if (patternGroups.length > 2) {\n            secondaryGroupingSize = patternGroups[patternGroups.length - 2].length;\n        }\n        var i = integer.length - primaryGroupingSize;\n        if (i > 0) {\n            // Slice the least significant integer group\n            groups.push(integer.slice(i, i + primaryGroupingSize));\n            // Then iteratively push the more signicant groups\n            // TODO: handle surrogate pairs in some numbering system digits\n            for (i -= secondaryGroupingSize; i > 0; i -= secondaryGroupingSize) {\n                groups.push(integer.slice(i, i + secondaryGroupingSize));\n            }\n            groups.push(integer.slice(0, i + secondaryGroupingSize));\n        }\n        else {\n            groups.push(integer);\n        }\n        while (groups.length > 0) {\n            var integerGroup = groups.pop();\n            result.push({ type: 'integer', value: integerGroup });\n            if (groups.length > 0) {\n                result.push({ type: 'group', value: groupSepSymbol });\n            }\n        }\n    }\n    else {\n        result.push({ type: 'integer', value: integer });\n    }\n    // #endregion\n    if (fraction !== undefined) {\n        result.push({ type: 'decimal', value: symbols.decimal }, { type: 'fraction', value: fraction });\n    }\n    if ((notation === 'scientific' || notation === 'engineering') &&\n        isFinite(x)) {\n        result.push({ type: 'exponentSeparator', value: symbols.exponential });\n        if (exponent < 0) {\n            result.push({ type: 'exponentMinusSign', value: symbols.minusSign });\n            exponent = -exponent;\n        }\n        var exponentResult = ToRawFixed(exponent, 0, 0);\n        result.push({\n            type: 'exponentInteger',\n            value: exponentResult.formattedString,\n        });\n    }\n    return result;\n}\nfunction getPatternForSign(pattern, sign) {\n    if (pattern.indexOf(';') < 0) {\n        pattern = pattern + \";-\" + pattern;\n    }\n    var _a = pattern.split(';'), zeroPattern = _a[0], negativePattern = _a[1];\n    switch (sign) {\n        case 0:\n            return zeroPattern;\n        case -1:\n            return negativePattern;\n        default:\n            return negativePattern.indexOf('-') >= 0\n                ? negativePattern.replace(/-/g, '+')\n                : \"+\" + zeroPattern;\n    }\n}\n// Find the CLDR pattern for compact notation based on the magnitude of data and style.\n//\n// Example return value: \"{c:laki}000;{c:laki}-0\" (`sw` locale):\n// - Notice the `{c:...}` token that wraps the compact literal.\n// - The consecutive zeros are normalized to single zero to match CLDR_NUMBER_PATTERN.\n//\n// Returning null means the compact display pattern cannot be found.\nfunction getCompactDisplayPattern(numberResult, pl, data, style, compactDisplay, currencyDisplay, numberingSystem) {\n    var _a;\n    var roundedNumber = numberResult.roundedNumber, sign = numberResult.sign, magnitude = numberResult.magnitude;\n    var magnitudeKey = String(Math.pow(10, magnitude));\n    var defaultNumberingSystem = data.numbers.nu[0];\n    var pattern;\n    if (style === 'currency' && currencyDisplay !== 'name') {\n        var byNumberingSystem = data.numbers.currency;\n        var currencyData = byNumberingSystem[numberingSystem] ||\n            byNumberingSystem[defaultNumberingSystem];\n        // NOTE: compact notation ignores currencySign!\n        var compactPluralRules = (_a = currencyData.short) === null || _a === void 0 ? void 0 : _a[magnitudeKey];\n        if (!compactPluralRules) {\n            return null;\n        }\n        pattern = selectPlural(pl, roundedNumber, compactPluralRules);\n    }\n    else {\n        var byNumberingSystem = data.numbers.decimal;\n        var byCompactDisplay = byNumberingSystem[numberingSystem] ||\n            byNumberingSystem[defaultNumberingSystem];\n        var compactPlaralRule = byCompactDisplay[compactDisplay][magnitudeKey];\n        if (!compactPlaralRule) {\n            return null;\n        }\n        pattern = selectPlural(pl, roundedNumber, compactPlaralRule);\n    }\n    // See https://unicode.org/reports/tr35/tr35-numbers.html#Compact_Number_Formats\n    // > If the value is precisely 0, either explicit or defaulted, then the normal number format\n    // > pattern for that sort of object is supplied.\n    if (pattern === '0') {\n        return null;\n    }\n    pattern = getPatternForSign(pattern, sign)\n        // Extract compact literal from the pattern\n        .replace(/([^\\s;\\-\\+\\d]+)/g, '{c:$1}')\n        // We replace one or more zeros with a single zero so it matches `CLDR_NUMBER_PATTERN`.\n        .replace(/0+/, '0');\n    return pattern;\n}\nfunction selectPlural(pl, x, rules) {\n    return rules[pl.select(x)] || rules.other;\n}\n","import { FormatNumericToString } from './FormatNumericToString';\nimport { SameValue } from '../262';\nimport { ComputeExponent } from './ComputeExponent';\nimport formatToParts from './format_to_parts';\n/**\n * https://tc39.es/ecma402/#sec-formatnumberstring\n */\nexport function PartitionNumberPattern(numberFormat, x, _a) {\n    var _b;\n    var getInternalSlots = _a.getInternalSlots;\n    var internalSlots = getInternalSlots(numberFormat);\n    var pl = internalSlots.pl, dataLocaleData = internalSlots.dataLocaleData, numberingSystem = internalSlots.numberingSystem;\n    var symbols = dataLocaleData.numbers.symbols[numberingSystem] ||\n        dataLocaleData.numbers.symbols[dataLocaleData.numbers.nu[0]];\n    var magnitude = 0;\n    var exponent = 0;\n    var n;\n    if (isNaN(x)) {\n        n = symbols.nan;\n    }\n    else if (!isFinite(x)) {\n        n = symbols.infinity;\n    }\n    else {\n        if (internalSlots.style === 'percent') {\n            x *= 100;\n        }\n        ;\n        _b = ComputeExponent(numberFormat, x, {\n            getInternalSlots: getInternalSlots,\n        }), exponent = _b[0], magnitude = _b[1];\n        // Preserve more precision by doing multiplication when exponent is negative.\n        x = exponent < 0 ? x * Math.pow(10, -exponent) : x / Math.pow(10, exponent);\n        var formatNumberResult = FormatNumericToString(internalSlots, x);\n        n = formatNumberResult.formattedString;\n        x = formatNumberResult.roundedNumber;\n    }\n    // Based on https://tc39.es/ecma402/#sec-getnumberformatpattern\n    // We need to do this before `x` is rounded.\n    var sign;\n    var signDisplay = internalSlots.signDisplay;\n    switch (signDisplay) {\n        case 'never':\n            sign = 0;\n            break;\n        case 'auto':\n            if (SameValue(x, 0) || x > 0 || isNaN(x)) {\n                sign = 0;\n            }\n            else {\n                sign = -1;\n            }\n            break;\n        case 'always':\n            if (SameValue(x, 0) || x > 0 || isNaN(x)) {\n                sign = 1;\n            }\n            else {\n                sign = -1;\n            }\n            break;\n        default:\n            // x === 0 -> x is 0 or x is -0\n            if (x === 0 || isNaN(x)) {\n                sign = 0;\n            }\n            else if (x > 0) {\n                sign = 1;\n            }\n            else {\n                sign = -1;\n            }\n    }\n    return formatToParts({ roundedNumber: x, formattedString: n, exponent: exponent, magnitude: magnitude, sign: sign }, internalSlots.dataLocaleData, pl, internalSlots);\n}\n","import { PartitionNumberPattern } from './PartitionNumberPattern';\nimport { ArrayCreate } from '../262';\nexport function FormatNumericToParts(nf, x, implDetails) {\n    var parts = PartitionNumberPattern(nf, x, implDetails);\n    var result = ArrayCreate(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result.push({\n            type: part.type,\n            value: part.value,\n        });\n    }\n    return result;\n}\n","import { GetOption } from '../GetOption';\nimport { IsWellFormedCurrencyCode } from '../IsWellFormedCurrencyCode';\nimport { IsWellFormedUnitIdentifier } from '../IsWellFormedUnitIdentifier';\n/**\n * https://tc39.es/ecma402/#sec-setnumberformatunitoptions\n */\nexport function SetNumberFormatUnitOptions(nf, options, _a) {\n    if (options === void 0) { options = Object.create(null); }\n    var getInternalSlots = _a.getInternalSlots;\n    var internalSlots = getInternalSlots(nf);\n    var style = GetOption(options, 'style', 'string', ['decimal', 'percent', 'currency', 'unit'], 'decimal');\n    internalSlots.style = style;\n    var currency = GetOption(options, 'currency', 'string', undefined, undefined);\n    if (currency !== undefined && !IsWellFormedCurrencyCode(currency)) {\n        throw RangeError('Malformed currency code');\n    }\n    if (style === 'currency' && currency === undefined) {\n        throw TypeError('currency cannot be undefined');\n    }\n    var currencyDisplay = GetOption(options, 'currencyDisplay', 'string', ['code', 'symbol', 'narrowSymbol', 'name'], 'symbol');\n    var currencySign = GetOption(options, 'currencySign', 'string', ['standard', 'accounting'], 'standard');\n    var unit = GetOption(options, 'unit', 'string', undefined, undefined);\n    if (unit !== undefined && !IsWellFormedUnitIdentifier(unit)) {\n        throw RangeError('Invalid unit argument for Intl.NumberFormat()');\n    }\n    if (style === 'unit' && unit === undefined) {\n        throw TypeError('unit cannot be undefined');\n    }\n    var unitDisplay = GetOption(options, 'unitDisplay', 'string', ['short', 'narrow', 'long'], 'short');\n    if (style === 'currency') {\n        internalSlots.currency = currency.toUpperCase();\n        internalSlots.currencyDisplay = currencyDisplay;\n        internalSlots.currencySign = currencySign;\n    }\n    if (style === 'unit') {\n        internalSlots.unit = unit;\n        internalSlots.unitDisplay = unitDisplay;\n    }\n}\n","import { GetNumberOption } from '../GetNumberOption';\nimport { DefaultNumberOption } from '../DefaultNumberOption';\n/**\n * https://tc39.es/ecma402/#sec-setnfdigitoptions\n */\nexport function SetNumberFormatDigitOptions(internalSlots, opts, mnfdDefault, mxfdDefault, notation) {\n    var mnid = GetNumberOption(opts, 'minimumIntegerDigits', 1, 21, 1);\n    var mnfd = opts.minimumFractionDigits;\n    var mxfd = opts.maximumFractionDigits;\n    var mnsd = opts.minimumSignificantDigits;\n    var mxsd = opts.maximumSignificantDigits;\n    internalSlots.minimumIntegerDigits = mnid;\n    if (mnsd !== undefined || mxsd !== undefined) {\n        internalSlots.roundingType = 'significantDigits';\n        mnsd = DefaultNumberOption(mnsd, 1, 21, 1);\n        mxsd = DefaultNumberOption(mxsd, mnsd, 21, 21);\n        internalSlots.minimumSignificantDigits = mnsd;\n        internalSlots.maximumSignificantDigits = mxsd;\n    }\n    else if (mnfd !== undefined || mxfd !== undefined) {\n        internalSlots.roundingType = 'fractionDigits';\n        mnfd = DefaultNumberOption(mnfd, 0, 20, mnfdDefault);\n        var mxfdActualDefault = Math.max(mnfd, mxfdDefault);\n        mxfd = DefaultNumberOption(mxfd, mnfd, 20, mxfdActualDefault);\n        internalSlots.minimumFractionDigits = mnfd;\n        internalSlots.maximumFractionDigits = mxfd;\n    }\n    else if (notation === 'compact') {\n        internalSlots.roundingType = 'compactRounding';\n    }\n    else {\n        internalSlots.roundingType = 'fractionDigits';\n        internalSlots.minimumFractionDigits = mnfdDefault;\n        internalSlots.maximumFractionDigits = mxfdDefault;\n    }\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { SetNumberFormatUnitOptions } from './SetNumberFormatUnitOptions';\nimport { CurrencyDigits } from './CurrencyDigits';\nimport { SetNumberFormatDigitOptions } from './SetNumberFormatDigitOptions';\nimport { invariant } from '../utils';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\n/**\n * https://tc39.es/ecma402/#sec-initializenumberformat\n */\nexport function InitializeNumberFormat(nf, locales, opts, _a) {\n    var getInternalSlots = _a.getInternalSlots, localeData = _a.localeData, availableLocales = _a.availableLocales, numberingSystemNames = _a.numberingSystemNames, getDefaultLocale = _a.getDefaultLocale, currencyDigitsData = _a.currencyDigitsData;\n    // @ts-ignore\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var options = CoerceOptionsToObject(opts);\n    var opt = Object.create(null);\n    var matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    opt.localeMatcher = matcher;\n    var numberingSystem = GetOption(options, 'numberingSystem', 'string', undefined, undefined);\n    if (numberingSystem !== undefined &&\n        numberingSystemNames.indexOf(numberingSystem) < 0) {\n        // 8.a. If numberingSystem does not match the Unicode Locale Identifier type nonterminal,\n        // throw a RangeError exception.\n        throw RangeError(\"Invalid numberingSystems: \" + numberingSystem);\n    }\n    opt.nu = numberingSystem;\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, \n    // [[RelevantExtensionKeys]] slot, which is a constant\n    ['nu'], localeData, getDefaultLocale);\n    var dataLocaleData = localeData[r.dataLocale];\n    invariant(!!dataLocaleData, \"Missing locale data for \" + r.dataLocale);\n    var internalSlots = getInternalSlots(nf);\n    internalSlots.locale = r.locale;\n    internalSlots.dataLocale = r.dataLocale;\n    internalSlots.numberingSystem = r.nu;\n    internalSlots.dataLocaleData = dataLocaleData;\n    SetNumberFormatUnitOptions(nf, options, { getInternalSlots: getInternalSlots });\n    var style = internalSlots.style;\n    var mnfdDefault;\n    var mxfdDefault;\n    if (style === 'currency') {\n        var currency = internalSlots.currency;\n        var cDigits = CurrencyDigits(currency, { currencyDigitsData: currencyDigitsData });\n        mnfdDefault = cDigits;\n        mxfdDefault = cDigits;\n    }\n    else {\n        mnfdDefault = 0;\n        mxfdDefault = style === 'percent' ? 0 : 3;\n    }\n    var notation = GetOption(options, 'notation', 'string', ['standard', 'scientific', 'engineering', 'compact'], 'standard');\n    internalSlots.notation = notation;\n    SetNumberFormatDigitOptions(internalSlots, options, mnfdDefault, mxfdDefault, notation);\n    var compactDisplay = GetOption(options, 'compactDisplay', 'string', ['short', 'long'], 'short');\n    if (notation === 'compact') {\n        internalSlots.compactDisplay = compactDisplay;\n    }\n    var useGrouping = GetOption(options, 'useGrouping', 'boolean', undefined, true);\n    internalSlots.useGrouping = useGrouping;\n    var signDisplay = GetOption(options, 'signDisplay', 'string', ['auto', 'never', 'always', 'exceptZero'], 'auto');\n    internalSlots.signDisplay = signDisplay;\n    return nf;\n}\n","import { invariant } from '../utils';\nimport { ToNumber } from '../262';\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-getoperands\n * @param s\n */\nexport function GetOperands(s) {\n    invariant(typeof s === 'string', \"GetOperands should have been called with a string\");\n    var n = ToNumber(s);\n    invariant(isFinite(n), 'n should be finite');\n    var dp = s.indexOf('.');\n    var iv;\n    var f;\n    var v;\n    var fv = '';\n    if (dp === -1) {\n        iv = n;\n        f = 0;\n        v = 0;\n    }\n    else {\n        iv = s.slice(0, dp);\n        fv = s.slice(dp, s.length);\n        f = ToNumber(fv);\n        v = fv.length;\n    }\n    var i = Math.abs(ToNumber(iv));\n    var w;\n    var t;\n    if (f !== 0) {\n        var ft = fv.replace(/0+$/, '');\n        w = ft.length;\n        t = ToNumber(ft);\n    }\n    else {\n        w = 0;\n        t = 0;\n    }\n    return {\n        Number: n,\n        IntegerDigits: i,\n        NumberOfFractionDigits: v,\n        NumberOfFractionDigitsWithoutTrailing: w,\n        FractionDigits: f,\n        FractionDigitsWithoutTrailing: t,\n    };\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { SetNumberFormatDigitOptions } from '../NumberFormat/SetNumberFormatDigitOptions';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\nexport function InitializePluralRules(pl, locales, options, _a) {\n    var availableLocales = _a.availableLocales, relevantExtensionKeys = _a.relevantExtensionKeys, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale, getInternalSlots = _a.getInternalSlots;\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var opt = Object.create(null);\n    var opts = CoerceOptionsToObject(options);\n    var internalSlots = getInternalSlots(pl);\n    internalSlots.initializedPluralRules = true;\n    var matcher = GetOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n    opt.localeMatcher = matcher;\n    internalSlots.type = GetOption(opts, 'type', 'string', ['cardinal', 'ordinal'], 'cardinal');\n    SetNumberFormatDigitOptions(internalSlots, opts, 0, 3, 'standard');\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    internalSlots.locale = r.locale;\n    return pl;\n}\n","import { invariant } from '../utils';\nimport { Type } from '../262';\nimport { FormatNumericToString } from '../NumberFormat/FormatNumericToString';\nimport { GetOperands } from './GetOperands';\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-resolveplural\n * @param pl\n * @param n\n * @param PluralRuleSelect Has to pass in bc it's implementation-specific\n */\nexport function ResolvePlural(pl, n, _a) {\n    var getInternalSlots = _a.getInternalSlots, PluralRuleSelect = _a.PluralRuleSelect;\n    var internalSlots = getInternalSlots(pl);\n    invariant(Type(internalSlots) === 'Object', 'pl has to be an object');\n    invariant('initializedPluralRules' in internalSlots, 'pluralrules must be initialized');\n    invariant(Type(n) === 'Number', 'n must be a number');\n    if (!isFinite(n)) {\n        return 'other';\n    }\n    var locale = internalSlots.locale, type = internalSlots.type;\n    var res = FormatNumericToString(internalSlots, n);\n    var s = res.formattedString;\n    var operands = GetOperands(s);\n    return PluralRuleSelect(locale, type, n, operands);\n}\n","import { invariant } from '../utils';\nimport { Type } from '../262';\n/**\n * https://tc39.es/proposal-intl-relative-time/#sec-singularrelativetimeunit\n * @param unit\n */\nexport function SingularRelativeTimeUnit(unit) {\n    invariant(Type(unit) === 'String', 'unit must be a string');\n    if (unit === 'seconds')\n        return 'second';\n    if (unit === 'minutes')\n        return 'minute';\n    if (unit === 'hours')\n        return 'hour';\n    if (unit === 'days')\n        return 'day';\n    if (unit === 'weeks')\n        return 'week';\n    if (unit === 'months')\n        return 'month';\n    if (unit === 'quarters')\n        return 'quarter';\n    if (unit === 'years')\n        return 'year';\n    if (unit !== 'second' &&\n        unit !== 'minute' &&\n        unit !== 'hour' &&\n        unit !== 'day' &&\n        unit !== 'week' &&\n        unit !== 'month' &&\n        unit !== 'quarter' &&\n        unit !== 'year') {\n        throw new RangeError('invalid unit');\n    }\n    return unit;\n}\n","import { PartitionPattern } from '../PartitionPattern';\nimport { invariant } from '../utils';\nexport function MakePartsList(pattern, unit, parts) {\n    var patternParts = PartitionPattern(pattern);\n    var result = [];\n    for (var _i = 0, patternParts_1 = patternParts; _i < patternParts_1.length; _i++) {\n        var patternPart = patternParts_1[_i];\n        if (patternPart.type === 'literal') {\n            result.push({\n                type: 'literal',\n                value: patternPart.value,\n            });\n        }\n        else {\n            invariant(patternPart.type === '0', \"Malformed pattern \" + pattern);\n            for (var _a = 0, parts_1 = parts; _a < parts_1.length; _a++) {\n                var part = parts_1[_a];\n                result.push({\n                    type: part.type,\n                    value: part.value,\n                    unit: unit,\n                });\n            }\n        }\n    }\n    return result;\n}\n","import { invariant } from '../utils';\nimport { SingularRelativeTimeUnit } from './SingularRelativeTimeUnit';\nimport { MakePartsList } from './MakePartsList';\nimport { ToString, Type, SameValue } from '../262';\nexport function PartitionRelativeTimePattern(rtf, value, unit, _a) {\n    var getInternalSlots = _a.getInternalSlots;\n    invariant(Type(value) === 'Number', \"value must be number, instead got \" + typeof value, TypeError);\n    invariant(Type(unit) === 'String', \"unit must be number, instead got \" + typeof value, TypeError);\n    if (isNaN(value) || !isFinite(value)) {\n        throw new RangeError(\"Invalid value \" + value);\n    }\n    var resolvedUnit = SingularRelativeTimeUnit(unit);\n    var _b = getInternalSlots(rtf), fields = _b.fields, style = _b.style, numeric = _b.numeric, pluralRules = _b.pluralRules, numberFormat = _b.numberFormat;\n    var entry = resolvedUnit;\n    if (style === 'short') {\n        entry = resolvedUnit + \"-short\";\n    }\n    else if (style === 'narrow') {\n        entry = resolvedUnit + \"-narrow\";\n    }\n    if (!(entry in fields)) {\n        entry = resolvedUnit;\n    }\n    var patterns = fields[entry];\n    if (numeric === 'auto') {\n        if (ToString(value) in patterns) {\n            return [\n                {\n                    type: 'literal',\n                    value: patterns[ToString(value)],\n                },\n            ];\n        }\n    }\n    var tl = 'future';\n    if (SameValue(value, -0) || value < 0) {\n        tl = 'past';\n    }\n    var po = patterns[tl];\n    var fv = typeof numberFormat.formatToParts === 'function'\n        ? numberFormat.formatToParts(Math.abs(value))\n        : // TODO: If formatToParts is not supported, we assume the whole formatted\n            // number is a part\n            [\n                {\n                    type: 'literal',\n                    value: numberFormat.format(Math.abs(value)),\n                    unit: unit,\n                },\n            ];\n    var pr = pluralRules.select(value);\n    var pattern = po[pr];\n    return MakePartsList(pattern, resolvedUnit, fv);\n}\n","import { PartitionRelativeTimePattern } from './PartitionRelativeTimePattern';\nexport function FormatRelativeTime(rtf, value, unit, implDetails) {\n    var parts = PartitionRelativeTimePattern(rtf, value, unit, implDetails);\n    var result = '';\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result += part.value;\n    }\n    return result;\n}\n","import { PartitionRelativeTimePattern } from './PartitionRelativeTimePattern';\nimport { ArrayCreate } from '../262';\nexport function FormatRelativeTimeToParts(rtf, value, unit, implDetails) {\n    var parts = PartitionRelativeTimePattern(rtf, value, unit, implDetails);\n    var result = ArrayCreate(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        var o = {\n            type: part.type,\n            value: part.value,\n        };\n        if ('unit' in part) {\n            o.unit = part.unit;\n        }\n        result.push(o);\n    }\n    return result;\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { invariant } from '../utils';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\nvar NUMBERING_SYSTEM_REGEX = /^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;\nexport function InitializeRelativeTimeFormat(rtf, locales, options, _a) {\n    var getInternalSlots = _a.getInternalSlots, availableLocales = _a.availableLocales, relevantExtensionKeys = _a.relevantExtensionKeys, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale;\n    var internalSlots = getInternalSlots(rtf);\n    internalSlots.initializedRelativeTimeFormat = true;\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var opt = Object.create(null);\n    var opts = CoerceOptionsToObject(options);\n    var matcher = GetOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n    opt.localeMatcher = matcher;\n    var numberingSystem = GetOption(opts, \n    // @ts-expect-error TS option is wack\n    'numberingSystem', 'string', undefined, undefined);\n    if (numberingSystem !== undefined) {\n        if (!NUMBERING_SYSTEM_REGEX.test(numberingSystem)) {\n            throw new RangeError(\"Invalid numbering system \" + numberingSystem);\n        }\n    }\n    opt.nu = numberingSystem;\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    var locale = r.locale, nu = r.nu;\n    internalSlots.locale = locale;\n    internalSlots.style = GetOption(opts, 'style', 'string', ['long', 'narrow', 'short'], 'long');\n    internalSlots.numeric = GetOption(opts, 'numeric', 'string', ['always', 'auto'], 'always');\n    var fields = localeData[r.dataLocale];\n    invariant(!!fields, \"Missing locale data for \" + r.dataLocale);\n    internalSlots.fields = fields;\n    internalSlots.numberFormat = new Intl.NumberFormat(locales);\n    internalSlots.pluralRules = new Intl.PluralRules(locales);\n    internalSlots.numberingSystem = nu;\n    return rtf;\n}\n","import { __extends } from \"tslib\";\nvar MissingLocaleDataError = /** @class */ (function (_super) {\n    __extends(MissingLocaleDataError, _super);\n    function MissingLocaleDataError() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'MISSING_LOCALE_DATA';\n        return _this;\n    }\n    return MissingLocaleDataError;\n}(Error));\nexport function isMissingLocaleDataError(e) {\n    return e.type === 'MISSING_LOCALE_DATA';\n}\n","import { ToObject } from './262';\nimport { GetOption } from './GetOption';\nimport { LookupSupportedLocales } from './LookupSupportedLocales';\n/**\n * https://tc39.es/ecma402/#sec-supportedlocales\n * @param availableLocales\n * @param requestedLocales\n * @param options\n */\nexport function SupportedLocales(availableLocales, requestedLocales, options) {\n    var matcher = 'best fit';\n    if (options !== undefined) {\n        options = ToObject(options);\n        matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    }\n    if (matcher === 'best fit') {\n        return LookupSupportedLocales(availableLocales, requestedLocales);\n    }\n    return LookupSupportedLocales(availableLocales, requestedLocales);\n}\n","import { UNICODE_EXTENSION_SEQUENCE_REGEX } from './utils';\nimport { BestAvailableLocale } from './BestAvailableLocale';\n/**\n * https://tc39.es/ecma402/#sec-lookupsupportedlocales\n * @param availableLocales\n * @param requestedLocales\n */\nexport function LookupSupportedLocales(availableLocales, requestedLocales) {\n    var subset = [];\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n        var locale = requestedLocales_1[_i];\n        var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        var availableLocale = BestAvailableLocale(availableLocales, noExtensionLocale);\n        if (availableLocale) {\n            subset.push(availableLocale);\n        }\n    }\n    return subset;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar _1 = tslib_1.__importDefault(require(\"./\"));\nvar should_polyfill_1 = require(\"./should-polyfill\");\nif (should_polyfill_1.shouldPolyfill()) {\n    Object.defineProperty(Intl, 'RelativeTimeFormat', {\n        value: _1.default,\n        writable: true,\n        enumerable: false,\n        configurable: true,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldPolyfill = void 0;\nfunction shouldPolyfill() {\n    return typeof Intl === 'undefined' || !('RelativeTimeFormat' in Intl);\n}\nexports.shouldPolyfill = shouldPolyfill;\n","import { themes } from \"../react-components/styles/theme\";\n\nexport function getColorSchemePref() {\n  const darkmodeQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n  const darkMode = darkmodeQuery.matches;\n  return (darkMode && themes.find(t => t.darkModeDefault)) || themes.find(t => t.default);\n}\n","// Primary language tags for those languages we support\nexport const AVAILABLE_LOCALES = {\n  en: \"English\",\n  \"zh-cn\": \"\",\n  pt: \"Portugs (Brasil)\",\n  ja: \"\",\n  es: \"Espaol\",\n  ru: \"P\",\n  fr: \"Franais\",\n  ko: \"\",\n  de: \"Deutsch\",\n  \"zh-tw\": \"\"\n};\n\n// Map from alternative primary language tags to those we support\nexport const FALLBACK_LOCALES = {\n  jp: \"ja\"\n};\n","import configs from \"./configs\";\nimport { AVAILABLE_LOCALES, FALLBACK_LOCALES } from \"../assets/locales/locale_config\";\n\n// These are set in the admin panel and are only included as fallbacks.\nconst defaultLocaleData = {\n  \"app-name\": \"App\",\n  \"editor-name\": \"Scene Editor\",\n  \"contact-email\": \"app@company.com\",\n  \"company-name\": \"Company\",\n  \"share-hashtag\": \"#app\",\n  \"app-description\": \"Gather share and collaborate together in a virtual, private and safe space\",\n  \"app-tagline\": \"Private social VR in your web browser\"\n};\n\nconst DEFAULT_LOCALE = \"en\";\nconst cachedMessages = new Map();\n\nlet _locale = DEFAULT_LOCALE;\nlet _localeData = defaultLocaleData;\n\nfunction findLocale(locale) {\n  const locales = (() => {\n    if (navigator.languages) {\n      return [...navigator.languages];\n    }\n    if (navigator.language) {\n      return [navigator.language];\n    }\n    if (navigator.userLanguage) {\n      return [navigator.userLanguage];\n    }\n  })();\n\n  if (locale && locale !== \"browser\") {\n    locales.unshift(locale);\n  }\n\n  for (let i = 0; i < locales.length; i++) {\n    const curLocale = locales[i];\n    if (AVAILABLE_LOCALES.hasOwnProperty(curLocale)) {\n      return curLocale;\n    }\n    if (FALLBACK_LOCALES.hasOwnProperty(curLocale)) {\n      FALLBACK_LOCALES.hasOwnProperty(curLocale);\n    }\n    // Also check the primary language subtag in case\n    // we do not have an entry for full tag\n    // See https://en.wikipedia.org/wiki/IETF_language_tag#Syntax_of_language_tags\n    // and https://github.com/mozilla/hubs/pull/3350/files#diff-70ef5717d3da03ef288e8d15c2fda32c5237d7f37074421496f22403e4475bf1R16\n    const primaryLanguageSubtag = curLocale.split(\"-\")[0].toLowerCase();\n    if (AVAILABLE_LOCALES.hasOwnProperty(primaryLanguageSubtag)) {\n      return primaryLanguageSubtag;\n    }\n    if (FALLBACK_LOCALES.hasOwnProperty(primaryLanguageSubtag)) {\n      return FALLBACK_LOCALES[primaryLanguageSubtag];\n    }\n  }\n  return DEFAULT_LOCALE;\n}\n\nexport function setLocale(locale) {\n  const resolvedLocale = findLocale(locale);\n\n  if (resolvedLocale === DEFAULT_LOCALE) {\n    _locale = resolvedLocale;\n    _localeData = defaultLocaleData;\n    window.dispatchEvent(new CustomEvent(\"locale-updated\"));\n  } else {\n    if (cachedMessages.has(resolvedLocale)) {\n      _locale = resolvedLocale;\n      window.dispatchEvent(new CustomEvent(\"locale-updated\"));\n    } else {\n      import(`../assets/locales/${resolvedLocale}.json`).then(({ default: localeData }) => {\n        _locale = resolvedLocale;\n        _localeData = localeData;\n        window.dispatchEvent(new CustomEvent(\"locale-updated\"));\n      });\n    }\n  }\n}\n\nconst interval = window.setInterval(() => {\n  if (window.APP && window.APP.store) {\n    window.clearInterval(interval);\n    setLocale(window.APP.store.state.preferences.locale);\n    window.APP.store.addEventListener(\"statechanged\", () => {\n      setLocale(window.APP.store.state.preferences.locale);\n    });\n  }\n}, 100);\n\nexport const getLocale = () => {\n  return _locale;\n};\n\nexport const getMessage = key => {\n  return _localeData[key];\n};\n\n// TODO: This should be removed, lets not inject app config data up front but rather via variables so that defaultMessage works properly.\nexport const getMessages = () => {\n  if (cachedMessages.has(_locale)) {\n    return cachedMessages.get(_locale);\n  }\n\n  // Swap in translations specified via the admin panel\n  if (configs.APP_CONFIG && configs.APP_CONFIG.translations && configs.APP_CONFIG.translations[_locale]) {\n    const configTranslations = configs.APP_CONFIG.translations[_locale];\n    for (const messageKey in configTranslations) {\n      if (!configTranslations.hasOwnProperty(messageKey)) continue;\n      if (!configTranslations[messageKey]) continue;\n      _localeData[messageKey] = configTranslations[messageKey];\n    }\n  }\n\n  const entries = [];\n  for (const key in _localeData) {\n    if (!_localeData.hasOwnProperty(key)) continue;\n    entries.push([key, _localeData[key]]);\n  }\n\n  const messages = entries\n    .map(([key, message]) => [\n      key,\n      // Replace nested message keys (e.g. %app-name%) with their messages.\n      message.replace(/%([\\w-.]+)%/i, (_match, subkey) => _localeData[subkey])\n    ])\n    .reduce((acc, entry) => {\n      acc[entry[0]] = entry[1];\n      return acc;\n    }, {});\n\n  cachedMessages.set(_locale, messages);\n  return messages;\n};\n","import appLogo from \"../assets/images/app-logo.png\";\nimport appLogoDark from \"../assets/images/app-logo-dark.png\";\nimport companyLogo from \"../assets/images/company-logo.png\";\nimport homeHeroBackground from \"../assets/images/home-hero-background-unbranded.png\";\nimport sceneEditorLogo from \"../assets/images/editor-logo.png\";\nimport { getLocale, getMessage } from \"./i18n\";\n\n// Read configs from global variable if available, otherwise use the process.env injected from build.\nconst configs = {};\nlet isAdmin = false;\n[\n  \"RETICULUM_SERVER\",\n  \"THUMBNAIL_SERVER\",\n  \"CORS_PROXY_SERVER\",\n  \"NON_CORS_PROXY_DOMAINS\",\n  \"SENTRY_DSN\",\n  \"GA_TRACKING_ID\",\n  \"SHORTLINK_DOMAIN\",\n  \"BASE_ASSETS_PATH\",\n  \"UPLOADS_HOST\"\n].forEach(x => {\n  const el = document.querySelector(`meta[name='env:${x.toLowerCase()}']`);\n  configs[x] = el ? el.getAttribute(\"content\") : process.env[x];\n\n  const BASE_ASSETS_PATH_KEY = \"BASE_ASSETS_PATH\";\n  if (x === BASE_ASSETS_PATH_KEY && configs[BASE_ASSETS_PATH_KEY]) {\n    // BASE_ASSETS_PATH might be a relative URL like \"/\" when it is set in\n    // .env or .defaults.env when running locally. We need to convert that\n    // to an absolute URL.\n    if (!configs[BASE_ASSETS_PATH_KEY].startsWith(\"http\")) {\n      configs[BASE_ASSETS_PATH_KEY] = new URL(configs[BASE_ASSETS_PATH_KEY], window.location).toString();\n    }\n\n    // eslint-disable-next-line no-undef\n    __webpack_public_path__ = configs[BASE_ASSETS_PATH_KEY];\n  }\n});\n\n// Custom clients do not use <meta> tags for passing data, so if thumbnail_server meta tag exists, it is not a custom client\nconst hasThumbnailServerMetaTag = !!document.querySelector(\"meta[name='env:thumbnail_server']\");\nconfigs.IS_LOCAL_OR_CUSTOM_CLIENT = !hasThumbnailServerMetaTag;\n\n// Also include configs that reticulum injects as a script in the page head.\n\nconfigs.AVAILABLE_INTEGRATIONS = window.AVAILABLE_INTEGRATIONS || {};\n\nif (process.env.APP_CONFIG) {\n  window.APP_CONFIG = process.env.APP_CONFIG;\n}\n\nif (window.APP_CONFIG) {\n  configs.APP_CONFIG = window.APP_CONFIG;\n  const { theme } = configs.APP_CONFIG;\n  if (theme) {\n    const colorVars = [];\n    for (const key in theme) {\n      if (!theme.hasOwnProperty(key)) continue;\n      colorVars.push(`--${key}: ${theme[key]};`);\n    }\n    const style = document.createElement(\"style\");\n    style.innerHTML = `:root{${colorVars.join(\"\\n\")}}`;\n    document.head.insertBefore(style, document.head.firstChild);\n  }\n\n  if (!configs.APP_CONFIG.features) {\n    configs.APP_CONFIG.features = {};\n  }\n} else {\n  configs.APP_CONFIG = {\n    features: {}\n  };\n}\n\nconst isLocalDevelopment = process.env.NODE_ENV === \"development\";\n\nconfigs.feature = featureName => {\n  const value = configs.APP_CONFIG && configs.APP_CONFIG.features && configs.APP_CONFIG.features[featureName];\n  if (typeof value === \"boolean\" || featureName === \"enable_spoke\") {\n    const forceEnableSpoke = featureName === \"enable_spoke\" && isAdmin;\n    return forceEnableSpoke || value;\n  } else {\n    return value;\n  }\n};\n\nlet localDevImages = {};\nif (isLocalDevelopment) {\n  localDevImages = {\n    logo: appLogo,\n    logo_dark: appLogoDark,\n    company_logo: companyLogo,\n    editor_logo: sceneEditorLogo,\n    home_background: homeHeroBackground\n  };\n}\n\nconfigs.image = (imageName, cssUrl) => {\n  const url =\n    (configs.APP_CONFIG && configs.APP_CONFIG.images && configs.APP_CONFIG.images[imageName]) ||\n    localDevImages[imageName];\n  return url && cssUrl ? `url(${url})` : url;\n};\n\nconfigs.link = (linkName, defaultValue) => {\n  return (configs.APP_CONFIG && configs.APP_CONFIG.links && configs.APP_CONFIG.links[linkName]) || defaultValue;\n};\n\nconfigs.setIsAdmin = _isAdmin => {\n  isAdmin = _isAdmin;\n};\nconfigs.isAdmin = () => isAdmin;\n\nconfigs.integration = integration => {\n  const availableIntegrations = configs.AVAILABLE_INTEGRATIONS;\n  // AVAILABLE_INTEGRATIONS has no properties defined on the dev server, but does support all integrations.\n  return !availableIntegrations.hasOwnProperty(integration) || availableIntegrations[integration];\n};\n\nconfigs.translation = key => {\n  const locale = getLocale();\n  const translationsConfig = (configs.APP_CONFIG && configs.APP_CONFIG.translations) || {};\n\n  return (\n    (translationsConfig[locale] && translationsConfig[locale][key]) ||\n    (translationsConfig.en && translationsConfig.en[key]) ||\n    getMessage(key) ||\n    \"\"\n  );\n};\n\nexport default configs;\n","import { useCallback, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { getColorSchemePref } from \"../../utils/get-color-scheme-pref\";\nimport configs from \"../../utils/configs\";\n\nlet config = process.env.APP_CONFIG;\n\n// Storybook includes environment variables as a string\n// https://storybook.js.org/docs/react/configure/environment-variables\nif (!config && process.env.STORYBOOK_APP_CONFIG) {\n  config = JSON.parse(process.env.STORYBOOK_APP_CONFIG);\n}\n\nif (!config) {\n  config = window.APP_CONFIG;\n}\n\nif (config?.theme?.error) {\n  console.error(\n    `Custom themes failed to load.\\n${config.theme.error}\\nIf you are an admin, reconfigure your themes in the admin panel.`\n  );\n}\n\nexport const defaultTheme = \"default\";\n\nexport const themes = config?.theme?.themes || [];\n\nfunction useDarkMode() {\n  const [darkMode, setDarkMode] = useState(false);\n\n  const changeListener = useCallback(\n    event => {\n      setDarkMode(event.matches);\n    },\n    [setDarkMode]\n  );\n\n  useEffect(() => {\n    const darkmodeQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n\n    setDarkMode(darkmodeQuery.matches);\n\n    // This is a workaround for old Safari.\n    // Prior to Safari 14, MediaQueryList is based on EventTarget, so you must use\n    // addListener() and removeListener() to observe media query lists.\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList/addListener\n    // We may remove this workaround when no one will use Safari 13 or before.\n    if (darkmodeQuery.addEventListener) {\n      darkmodeQuery.addEventListener(\"change\", changeListener);\n    } else {\n      darkmodeQuery.addListener(changeListener);\n    }\n\n    return () => {\n      if (darkmodeQuery.removeEventListener) {\n        darkmodeQuery.removeEventListener(\"change\", changeListener);\n      } else {\n        darkmodeQuery.removeListener(changeListener);\n      }\n    };\n  }, [changeListener]);\n\n  return darkMode;\n}\n\nexport function useTheme(themeId) {\n  const darkMode = useDarkMode();\n\n  useEffect(() => {\n    // Themes can come from an external source. Ensure it is an array.\n    if (!Array.isArray(themes)) return;\n\n    let theme;\n\n    if (themeId) {\n      theme = themes.find(t => t.id === themeId);\n    }\n\n    if (!theme && darkMode) {\n      theme = themes.find(t => t.darkModeDefault);\n    }\n\n    if (!theme) {\n      theme = themes.find(t => t.default);\n    }\n\n    if (!theme) {\n      return;\n    }\n\n    const variables = [];\n\n    for (const key in theme.variables) {\n      if (!theme.variables.hasOwnProperty(key)) continue;\n      variables.push(`--${key}: ${theme.variables[key]};`);\n    }\n\n    const styleTag = document.createElement(\"style\");\n\n    styleTag.innerHTML = `:root {\n        ${variables.join(\"\\n\")}\n      }`;\n\n    document.head.appendChild(styleTag);\n\n    return () => {\n      document.head.removeChild(styleTag);\n    };\n  }, [themeId, darkMode]);\n}\n\nfunction getCurrentTheme() {\n  if (!Array.isArray(themes)) return;\n\n  const preferredThemeId = window.APP?.store?.state?.preferences?.theme;\n  if (preferredThemeId) {\n    return themes.find(t => t.id === preferredThemeId);\n  } else {\n    return getColorSchemePref();\n  }\n}\n\nfunction getAppLogo(darkMode) {\n  const theme = getCurrentTheme();\n  const shouldUseDarkLogo = theme ? theme.darkModeDefault : darkMode;\n  return (shouldUseDarkLogo && configs.image(\"logo_dark\")) || configs.image(\"logo\");\n}\n\nexport function useLogo() {\n  const darkMode = useDarkMode();\n  return getAppLogo(darkMode);\n}\n\nexport function useThemeFromStore(store) {\n  const [themeId, setThemeId] = useState(store?.state?.preferences?.theme);\n\n  useEffect(() => {\n    function onStoreChanged() {\n      const nextThemeId = store.state?.preferences?.theme;\n\n      if (themeId !== nextThemeId) {\n        setThemeId(nextThemeId);\n      }\n    }\n\n    if (store) {\n      store.addEventListener(\"statechanged\", onStoreChanged);\n    }\n\n    return () => {\n      if (store) {\n        store.removeEventListener(\"statechanged\", onStoreChanged);\n      }\n    };\n  });\n\n  useTheme(themeId);\n}\n\nexport function ThemeProvider({ store, children }) {\n  useThemeFromStore(store);\n  return children;\n}\n\nThemeProvider.propTypes = {\n  store: PropTypes.object,\n  children: PropTypes.node\n};\n","export const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n\nexport const waitForDOMContentLoaded = function() {\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\n    return Promise.resolve(null);\n  } else {\n    return waitForEvent(\"DOMContentLoaded\", window);\n  }\n};\n\nexport const sleep = function(milliseconds) {\n  return new Promise(resolve => {\n    setTimeout(resolve, milliseconds);\n  });\n};\n","import { themes } from \"../react-components/styles/theme\";\nimport { waitForDOMContentLoaded } from \"./async-utils\";\nimport configs from \"./configs\";\n\n// Node these should be synchronized with the top of shared.scss\nconst DEFAULT_ACTION_COLOR = \"#FF3464\";\nconst DEFAULT_ACTION_COLOR_LIGHT = \"#FF74A4\";\n\nconst DEFAULT_COLORS = {\n  \"action-color\": DEFAULT_ACTION_COLOR,\n  \"action-label-color\": DEFAULT_ACTION_COLOR,\n  \"action-color-disabled\": DEFAULT_ACTION_COLOR_LIGHT,\n  \"action-color-highlight\": DEFAULT_ACTION_COLOR_LIGHT,\n  \"action-text-color\": \"#FFFFFF\",\n  \"action-subtitle-color\": \"#F0F0F0\",\n  \"notice-background-color\": \"#2F80ED\",\n  \"notice-text-color\": \"#FFFFFF\",\n  \"favorited-color\": \"#FFC000\",\n  \"nametag-color\": \"#000000\",\n  \"nametag-volume-color\": \"#7ED320\",\n  \"nametag-text-color\": \"#FFFFFF\",\n  \"nametag-border-color\": \"#7ED320\",\n  \"nametag-border-color-raised-hand\": \"#FFCD74\"\n};\n\nfunction getThemeColor(name) {\n  const themeId = window.APP?.store?.state?.preferences?.theme;\n\n  const theme =\n    (themeId && configs.APP_CONFIG?.theme?.themes?.find(theme => theme.id === themeId)) ||\n    configs.APP_CONFIG?.theme?.themes?.find(theme => theme.default === true);\n  if (theme?.variables?.[name]) {\n    return theme.variables[name];\n  }\n\n  return DEFAULT_COLORS[name];\n}\n\nfunction activateTheme() {\n  const actionColor = getThemeColor(\"action-color\");\n  const actionHoverColor = getThemeColor(\"action-color-highlight\");\n\n  if (document.querySelector(\"#rounded-text-button\")) {\n    // NOTE, using the object-based {} setAttribute variant in a-frame\n    // seems to not work in Firefox here -- the entities with the mixins are not\n    // updated.\n    document\n      .querySelector(\"#rounded-text-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\n      );\n\n    document\n      .querySelector(\"#rounded-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\n      );\n\n    document\n      .querySelector(\"#rounded-text-action-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\n      );\n\n    document\n      .querySelector(\"#rounded-action-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\n      );\n  }\n\n  window.dispatchEvent(new CustomEvent(\"update_theme\"));\n}\n\nconst onStoreChanged = (function() {\n  let themeId;\n  return function onStoreChanged() {\n    const newThemeId = window.APP?.store?.state?.preferences?.theme;\n    if (themeId !== newThemeId) {\n      themeId = newThemeId;\n      activateTheme();\n    }\n  };\n})();\n\nwaitForDOMContentLoaded().then(() => {\n  if (configs.APP_CONFIG && configs.APP_CONFIG.theme && configs.APP_CONFIG.theme[\"dark-theme\"]) {\n    document.body.classList.add(\"dark-theme\");\n  } else {\n    document.body.classList.add(\"light-theme\");\n  }\n  activateTheme();\n  window.APP?.store?.addEventListener(\"statechanged\", onStoreChanged);\n});\n\nfunction applyThemeToTextButton(el, highlighted) {\n  el.setAttribute(\n    \"text-button\",\n    \"backgroundColor\",\n    highlighted ? getThemeColor(\"action-color-highlight\") : getThemeColor(\"action-color\")\n  );\n  el.setAttribute(\n    \"text-button\",\n    \"backgroundHoverColor\",\n    highlighted ? \"#aaa\" : getThemeColor(\"action-color-highlight\")\n  );\n}\n\nfunction getDefaultTheme() {\n  return themes.find(t => t.default) || themes[0];\n}\n\nexport { applyThemeToTextButton, getThemeColor, getDefaultTheme };\n","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n\nexport function qsGet(param) {\n  return qs.get(param);\n}\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*,naf-dialog-adapter:*,mediasoup*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider } from \"react-intl\";\nimport \"@formatjs/intl-locale/polyfill\";\nimport \"@formatjs/intl-pluralrules/polyfill\";\nimport \"@formatjs/intl-pluralrules/locale-data/en\";\nimport \"@formatjs/intl-relativetimeformat/polyfill\";\nimport \"@formatjs/intl-relativetimeformat/locale-data/en\";\nimport { getLocale, getMessages } from \"../utils/i18n\";\n\nexport class WrappedIntlProvider extends React.Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired\n  };\n\n  state = {\n    locale: getLocale(),\n    messages: getMessages()\n  };\n\n  updateLocale = () => {\n    this.setState({ locale: getLocale(), messages: getMessages() });\n  };\n\n  componentDidMount() {\n    this.updateLocale();\n    window.addEventListener(\"locale-updated\", this.updateLocale);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"locale-updated\", this.updateLocale);\n  }\n\n  render() {\n    return (\n      <IntlProvider locale={this.state.locale} messages={this.state.messages}>\n        {this.props.children}\n      </IntlProvider>\n    );\n  }\n}\n","// from https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\nfunction detectTouchScreen() {\n  let hasTouchScreen = false;\n  if (\"maxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.maxTouchPoints > 0;\n  } else if (\"msMaxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.msMaxTouchPoints > 0;\n  } else {\n    const mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n    if (mQ && mQ.media === \"(pointer:coarse)\") {\n      hasTouchScreen = !!mQ.matches;\n    } else if (\"orientation\" in window) {\n      hasTouchScreen = true; // deprecated, but good fallback\n    } else {\n      // Only as a last resort, fall back to user agent sniffing\n      const UA = navigator.userAgent;\n      hasTouchScreen =\n        /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) || /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA);\n    }\n  }\n  return hasTouchScreen;\n}\n\nlet hackyMobileSafariTestValue = null;\n\n// HACK for https://github.com/mozilla/hubs/issues/1813\n// Touchscreen controls depend on iPad and iPhone detection,\n// which recently regressed. For UA matching \"Macintosh\", enable\n// touchscreen controls if there exists a touchscreen.\n// We cannot always enable touchscreen controls when a touchscreen\n// is present until we fix conflicts between simultaneous mouse\n// and touchscreen interactions.\nexport function hackyMobileSafariTest() {\n  if (hackyMobileSafariTestValue === null) {\n    hackyMobileSafariTestValue = /\\b(Macintosh|iPad|iPhone)\\b/i.test(navigator.userAgent) && detectTouchScreen();\n  }\n\n  return hackyMobileSafariTestValue;\n  // e.g. Match\n  // Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.1 Safari/605.1.15\n  // but not\n  // \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36\"\n}\n","import { hackyMobileSafariTest } from \"./detect-touchscreen\";\n\nconst MOBILE_RE = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\nconst TABLET_RE = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;\n\nexport function isAndroid() {\n  return /Android/.test(window.navigator.userAgent);\n}\n\n// from https://stackoverflow.com/questions/57776001/how-to-detect-ipad-pro-as-ipad-using-javascript\nfunction isIpadOS() {\n  return window.navigator.maxTouchPoints && window.navigator.maxTouchPoints > 2 && /MacIntel/.test(navigator.platform);\n}\n\n// lifted from https://github.com/aframevr/aframe/blob/master/src/utils/device.js to ensure consistency\nexport function isIOS() {\n  return /iPad|iPhone|iPod/.test(window.navigator.platform) || isIpadOS();\n}\n\nfunction isTablet(mockUserAgent) {\n  const userAgent = mockUserAgent || window.navigator.userAgent;\n  return isIpadOS() || /ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(userAgent);\n}\n\nfunction isR7() {\n  return /R7 Build/.test(window.navigator.userAgent);\n}\n\nfunction isOculusBrowser() {\n  return /(OculusBrowser)/i.test(window.navigator.userAgent);\n}\n\nfunction isFirefoxReality() {\n  return /(Mobile VR)/i.test(window.navigator.userAgent);\n}\n\nexport function isMobileVR() {\n  return isOculusBrowser() || isFirefoxReality();\n}\n\nconst isMobile = (function() {\n  let _isMobile = false;\n  (function(a) {\n    // eslint-disable-next-line no-useless-escape\n    if (MOBILE_RE.test(a) || TABLET_RE.test(a.substr(0, 4))) {\n      _isMobile = true;\n    }\n    if (isIOS() || isTablet() || isR7()) {\n      _isMobile = true;\n    }\n    if (hackyMobileSafariTest()) {\n      _isMobile = true;\n    }\n    if (isMobileVR()) {\n      _isMobile = false;\n    }\n  })(window.navigator.userAgent || window.navigator.vendor || window.opera);\n\n  return function() {\n    return _isMobile;\n  };\n})();\n\nexport default isMobile;\n","import { isIOS as detectIOS } from \"./is-mobile\";\nconst isIOS = detectIOS();\n\n// TODO should we be using touch-action CSS for this?\nexport function disableiOSZoom() {\n  if (!isIOS) return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","import { defineComponent, setDefaultSize, setRemovedRecycleThreshold, Types } from \"bitecs\";\n\n// TODO this has to happen before all components are defined. Is there a better spot to be doing this?\nsetDefaultSize(10000);\nsetRemovedRecycleThreshold(0.2);\n\nexport const $isStringType = Symbol(\"isStringType\");\n\nexport const Networked = defineComponent({\n  id: Types.ui32,\n  creator: Types.ui32,\n  owner: Types.ui32,\n\n  lastOwnerTime: Types.ui32\n});\nNetworked.id[$isStringType] = true;\nNetworked.creator[$isStringType] = true;\nNetworked.owner[$isStringType] = true;\n\nexport const Owned = defineComponent();\nexport const NetworkedMediaFrame = defineComponent({\n  capturedNid: Types.ui32,\n  scale: [Types.f32, 3]\n});\nNetworkedMediaFrame.capturedNid[$isStringType] = true;\n\nexport const MediaFrame = defineComponent({\n  capturedNid: Types.ui32,\n  scale: [Types.f32, 3],\n  mediaType: Types.ui8,\n  bounds: [Types.f32, 3],\n  preview: Types.eid,\n  previewingNid: Types.eid\n});\nexport const Text = defineComponent();\nexport const Slice9 = defineComponent({\n  insets: [Types.ui32, 4],\n  size: [Types.f32, 2]\n});\n\nexport const NetworkedTransform = defineComponent({\n  position: [Types.f32, 3],\n  rotation: [Types.f32, 4],\n  scale: [Types.f32, 3]\n});\n\nexport const AEntity = defineComponent();\nexport const Object3DTag = defineComponent();\nexport const GLTFModel = defineComponent();\nexport const CursorRaycastable = defineComponent();\nexport const RemoteHoverTarget = defineComponent();\nexport const NotRemoteHoverTarget = defineComponent();\nexport const Holdable = defineComponent();\nexport const RemoveNetworkedEntityButton = defineComponent();\nexport const Interacted = defineComponent();\n\nexport const HandRight = defineComponent();\nexport const HandLeft = defineComponent();\nexport const RemoteRight = defineComponent();\nexport const RemoteLeft = defineComponent();\nexport const HoveredHandRight = defineComponent();\nexport const HoveredHandLeft = defineComponent();\nexport const HoveredRemoteRight = defineComponent();\nexport const HoveredRemoteLeft = defineComponent();\nexport const HeldHandRight = defineComponent();\nexport const HeldHandLeft = defineComponent();\nexport const HeldRemoteRight = defineComponent();\nexport const HeldRemoteLeft = defineComponent();\nexport const Held = defineComponent();\nexport const OffersRemoteConstraint = defineComponent();\nexport const HandCollisionTarget = defineComponent();\nexport const OffersHandConstraint = defineComponent();\nexport const TogglesHoveredActionSet = defineComponent();\n\nexport const HoverButton = defineComponent({ type: Types.ui8 });\nexport const TextButton = defineComponent({ labelRef: Types.eid });\nexport const HoldableButton = defineComponent();\nexport const SingleActionButton = defineComponent();\n\nexport const Pen = defineComponent();\nexport const HoverMenuChild = defineComponent();\nexport const Static = defineComponent();\nexport const Inspectable = defineComponent();\nexport const PreventAudioBoost = defineComponent();\nexport const IgnoreSpaceBubble = defineComponent();\nexport const Rigidbody = defineComponent({\n  bodyId: Types.ui16,\n  collisionGroup: Types.ui32,\n  collisionMask: Types.ui32,\n  flags: Types.ui8,\n  gravity: Types.f32\n});\nexport const PhysicsShape = defineComponent({ bodyId: Types.ui16, shapeId: Types.ui16, halfExtents: [Types.f32, 3] });\nexport const Pinnable = defineComponent();\nexport const Pinned = defineComponent();\nexport const DestroyAtExtremeDistance = defineComponent();\n\nexport const MediaLoading = defineComponent();\n\nexport const FloatyObject = defineComponent({ flags: Types.ui8, releaseGravity: Types.f32 });\nexport const MakeKinematicOnRelease = defineComponent();\n\nexport const CameraTool = defineComponent({\n  snapTime: Types.f32,\n  state: Types.ui8,\n  captureDurIdx: Types.ui8,\n  trackTarget: Types.eid,\n\n  snapMenuRef: Types.eid,\n  button_next: Types.eid,\n  button_prev: Types.eid,\n  snapRef: Types.eid,\n  cancelRef: Types.eid,\n  recVideoRef: Types.eid,\n  screenRef: Types.eid,\n  selfieScreenRef: Types.eid,\n  cameraRef: Types.eid,\n  countdownLblRef: Types.eid,\n  captureDurLblRef: Types.eid,\n  sndToggleRef: Types.eid\n});\nexport const MyCameraTool = defineComponent();\n","import { addComponent, removeComponent } from \"bitecs\";\nimport {\n  RemoteRight,\n  RemoteLeft,\n  HandRight,\n  HandLeft,\n  RemoteHoverTarget,\n  NotRemoteHoverTarget,\n  RemoveNetworkedEntityButton,\n  DestroyAtExtremeDistance\n} from \"./bit-components\";\n\n[\n  [\"remote-right\", RemoteRight],\n  [\"remote-left\", RemoteLeft],\n  [\"hand-right\", HandRight],\n  [\"hand-left\", HandLeft],\n  [\"is-remote-hover-target\", RemoteHoverTarget],\n  [\"is-not-remote-hover-target\", NotRemoteHoverTarget],\n  [\"remove-networked-object-button\", RemoveNetworkedEntityButton],\n  [\"destroy-at-extreme-distances\", DestroyAtExtremeDistance]\n].forEach(([aframeComponentName, bitecsComponent]) => {\n  AFRAME.registerComponent(aframeComponentName, {\n    init: function() {\n      addComponent(APP.world, bitecsComponent, this.el.object3D.eid);\n    },\n    remove: function() {\n      removeComponent(APP.world, bitecsComponent, this.el.object3D.eid);\n    }\n  });\n});\n","var isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nexport default deepmerge_1;\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport defaultAvatar from \"../assets/models/DefaultAvatar.glb\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction chooseRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${chooseRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport async function fetchRandomDefaultAvatarId() {\n  const defaultAvatarEndpoint = \"/api/v1/media/search?filter=default&source=avatar_listings\";\n  const defaultAvatars = (await fetchReticulumAuthenticated(defaultAvatarEndpoint)).entries || [];\n  if (defaultAvatars.length === 0) {\n    // If reticulum doesn't return any default avatars, just default to the duck model. This should only happen\n    // when running against a fresh reticulum server, e.g. a local ret instance.\n    return new URL(defaultAvatar, location.href).href;\n  }\n  const avatarIds = defaultAvatars.map(avatar => avatar.id);\n  return chooseRandom(avatarIds);\n}\n","export const MediaDevicesEvents = Object.freeze({\n  PERMISSIONS_STATUS_CHANGED: \"permissions_status_changed\",\n  MIC_SHARE_STARTED: \"mic_share_started\",\n  MIC_SHARE_ENDED: \"mic_share_ended\",\n  VIDEO_SHARE_STARTED: \"video_share_started\",\n  VIDEO_SHARE_ENDED: \"video_share_ended\",\n  DEVICE_CHANGE: \"devicechange\"\n});\n\nexport const PermissionStatus = Object.freeze({\n  GRANTED: \"granted\",\n  DENIED: \"denied\",\n  PROMPT: \"prompt\"\n});\n\nexport const MediaDevices = Object.freeze({\n  MICROPHONE: \"microphone\",\n  SPEAKERS: \"speakers\",\n  CAMERA: \"camera\",\n  SCREEN: \"screen\"\n});\n\nexport const NO_DEVICE_ID = \"none\";\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\nimport { qsGet } from \"../utils/qs_truthy.js\";\nimport detectMobile, { isAndroid, isMobileVR } from \"../utils/is-mobile\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { fetchRandomDefaultAvatarId, generateRandomName } from \"../utils/identity.js\";\nimport { NO_DEVICE_ID } from \"../utils/media-devices-utils.js\";\nimport { getDefaultTheme } from \"../utils/theme.js\";\n\nconst defaultMaterialQuality = (function() {\n  const MATERIAL_QUALITY_OPTIONS = [\"low\", \"medium\", \"high\"];\n\n  // HACK: AFRAME is not available on all pages, so we catch the ReferenceError.\n  // We could move AFRAME's device utils into a separate package (or into this repo)\n  // if we wanted to use these checks without having to import all of AFRAME.\n  const isMobile = window.AFRAME && (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR());\n  if (isMobile) {\n    const qsMobileDefault = qsGet(\"default_mobile_material_quality\");\n    if (qsMobileDefault && MATERIAL_QUALITY_OPTIONS.indexOf(qsMobileDefault) !== -1) {\n      return qsMobileDefault;\n    }\n    return \"low\";\n  }\n\n  const qsDefault = qsGet(\"default_material_quality\");\n  if (qsDefault && MATERIAL_QUALITY_OPTIONS.indexOf(qsDefault) !== -1) {\n    return qsDefault;\n  }\n\n  return \"high\";\n})();\n\n// WebAudio on Android devices (only non-VR devices?) seems to have\n// a bug and audio can be broken if there are many people in a room.\n// We have reported the problem to the Android devs. We found that\n// using equal power panning mode can mitigate the problem so we\n// use low audio panning quality (= equal power mode) by default\n// on Android as workaround until the root issue is fixed on\n// Android end. See\n//   - https://github.com/mozilla/hubs/issues/5057\n//   - https://bugs.chromium.org/p/chromium/issues/detail?id=1308962\nconst defaultAudioPanningQuality = () => {\n  return isAndroid() && !isMobileVR() ? \"Low\" : \"High\";\n};\n\n//workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1626081 : disable echoCancellation, noiseSuppression, autoGainControl\nconst isFirefoxReality = window.AFRAME?.utils.device.isMobileVR() && navigator.userAgent.match(/Firefox/);\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z-0-9_~ -]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        // personalAvatarId is obsolete, but we need it here for backwards compatibility.\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" },\n        micMuted: { type: \"bool\" }\n      }\n    },\n\n    preferences: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        shouldPromptForRefresh: { type: \"bool\", default: false },\n        // Preferred media will be set dynamically\n        preferredMic: { type: \"string\", default: NO_DEVICE_ID },\n        preferredSpeakers: { type: \"string\", default: NO_DEVICE_ID },\n        preferredCamera: { type: \"string\", default: NO_DEVICE_ID },\n        muteMicOnEntry: { type: \"bool\", default: false },\n        disableLeftRightPanning: { type: \"bool\", default: false },\n        audioNormalization: { type: \"bool\", default: 0.0 },\n        invertTouchscreenCameraMove: { type: \"bool\", default: true },\n        enableOnScreenJoystickLeft: { type: \"bool\", default: detectMobile() },\n        enableOnScreenJoystickRight: { type: \"bool\", default: detectMobile() },\n        enableGyro: { type: \"bool\", default: true },\n        animateWaypointTransitions: { type: \"bool\", default: true },\n        showFPSCounter: { type: \"bool\", default: false },\n        allowMultipleHubsInstances: { type: \"bool\", default: false },\n        disableIdleDetection: { type: \"bool\", default: false },\n        fastRoomSwitching: { type: \"bool\", default: false },\n        lazyLoadSceneMedia: { type: \"bool\", default: false },\n        preferMobileObjectInfoPanel: { type: \"bool\", default: false },\n        // if unset, maxResolution = screen resolution\n        maxResolutionWidth: { type: \"number\", default: undefined },\n        maxResolutionHeight: { type: \"number\", default: undefined },\n        globalVoiceVolume: { type: \"number\", default: 100 },\n        globalMediaVolume: { type: \"number\", default: 100 },\n        globalSFXVolume: { type: \"number\", default: 100 },\n        snapRotationDegrees: { type: \"number\", default: 45 },\n        materialQualitySetting: { type: \"string\", default: defaultMaterialQuality },\n        enableDynamicShadows: { type: \"bool\", default: false },\n        disableSoundEffects: { type: \"bool\", default: false },\n        disableMovement: { type: \"bool\", default: false },\n        disableBackwardsMovement: { type: \"bool\", default: false },\n        disableStrafing: { type: \"bool\", default: false },\n        disableTeleporter: { type: \"bool\", default: false },\n        disableAutoPixelRatio: { type: \"bool\", default: false },\n        movementSpeedModifier: { type: \"number\", default: 1 },\n        disableEchoCancellation: { type: \"bool\", default: isFirefoxReality },\n        disableNoiseSuppression: { type: \"bool\", default: isFirefoxReality },\n        disableAutoGainControl: { type: \"bool\", default: isFirefoxReality },\n        locale: { type: \"string\", default: \"browser\" },\n        showRtcDebugPanel: { type: \"bool\", default: false },\n        showAudioDebugPanel: { type: \"bool\", default: false },\n        enableAudioClipping: { type: \"bool\", default: false },\n        audioClippingThreshold: { type: \"number\", default: 0.015 },\n        audioPanningQuality: { type: \"string\", default: defaultAudioPanningQuality() },\n        theme: { type: \"string\", default: getDefaultTheme()?.name },\n        cursorSize: { type: \"number\", default: 1 },\n        nametagVisibility: { type: \"string\", default: \"showAll\" },\n        nametagVisibilityDistance: { type: \"number\", default: 5 },\n        avatarVoiceLevels: { type: \"object\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    preferences: { $ref: \"#/definitions/preferences\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    this._preferences = {};\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: [],\n      onLoadActions: [],\n      preferences: {}\n    });\n\n    this._shouldResetAvatarOnInit = false;\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this._shouldResetAvatarOnInit = true;\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n\n    this._signOutOnExpiredAuthToken();\n\n    const maybeDispatchThemeChanged = (() => {\n      let previous;\n      return () => {\n        const current = this.state.preferences.theme;\n        if ((previous || current) && previous !== current) {\n          this.dispatchEvent(new CustomEvent(\"themechanged\", { detail: { current, previous } }));\n        }\n        previous = current;\n      };\n    })();\n    this.addEventListener(\"statechanged\", maybeDispatchThemeChanged);\n  }\n\n  _signOutOnExpiredAuthToken = () => {\n    if (!this.state.credentials.token) return;\n\n    const expiry = jwtDecode(this.state.credentials.token).exp * 1000;\n    if (expiry <= Date.now()) {\n      this.update({ credentials: { token: null, email: null } });\n    }\n  };\n\n  initProfile = async () => {\n    if (this._shouldResetAvatarOnInit) {\n      await this.resetToRandomDefaultAvatar();\n    } else {\n      this.update({\n        profile: { avatarId: await fetchRandomDefaultAvatarId(), ...(this.state.profile || {}) }\n      });\n    }\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomDefaultAvatar = async () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), avatarId: await fetchRandomDefaultAvatarId() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      const state = (this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY)));\n      if (!state.preferences) state.preferences = {};\n      this._preferences = { ...state.preferences }; // cache prefs without injected defaults\n      // inject default values\n      for (const [key, props] of Object.entries(SCHEMA.definitions.preferences.properties)) {\n        if (!props.hasOwnProperty(\"default\")) continue;\n        if (!state.preferences.hasOwnProperty(key)) {\n          state.preferences[key] = props.default;\n        } else if (state.preferences[key] === props.default) {\n          delete this._preferences[key];\n        }\n      }\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\n  }\n\n  resetTipActivityFlags() {\n    this.update({\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\n    });\n  }\n\n  bumpEntryCount() {\n    const currentEntryCount = this.state.activity.entryCount || 0;\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\n  }\n\n  // Sets a one-time action to perform the next time the page loads\n  enqueueOnLoadAction(action, args) {\n    this.update({ onLoadActions: [{ action, args }] });\n  }\n\n  executeOnLoadActions(sceneEl) {\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\n      const { action, args } = this.state.onLoadActions[i];\n\n      if (action === \"emit_scene_event\") {\n        sceneEl.emit(args.event, args.detail);\n      }\n    }\n\n    this.clearOnLoadActions();\n  }\n\n  clearOnLoadActions() {\n    this.clearStoredArray(\"onLoadActions\");\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge({ ...this.state, preferences: this._preferences }, newState, mergeOpts);\n    const { valid, errors } = validator.validate(finalState, SCHEMA);\n\n    // Cleanup unsupported properties\n    if (!valid) {\n      errors.forEach(error => {\n        console.error(`Removing invalid preference from store: ${error.message}`);\n        delete error.instance[error.argument];\n      });\n    }\n\n    if (newState.preferences) {\n      // clear preference if equal to default value so that, when client is updated with different defaults,\n      // new defaults will apply without user action\n      for (const [key, value] of Object.entries(finalState.preferences)) {\n        if (\n          SCHEMA.definitions.preferences.properties[key]?.hasOwnProperty(\"default\") &&\n          value === SCHEMA.definitions.preferences.properties[key].default\n        ) {\n          delete finalState.preferences[key];\n        }\n      }\n      this._preferences = finalState.preferences;\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    if (newState.profile !== undefined) {\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\n    }\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n\n  get schema() {\n    return SCHEMA;\n  }\n}\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport configs from \"../utils/configs\";\nimport { sleep } from \"../utils/async-utils\";\n\nimport Store from \"../storage/store\";\n\nexport function hasReticulumServer() {\n  return !!configs.RETICULUM_SERVER;\n}\n\nexport function isLocalClient() {\n  return hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER;\n}\n\nexport function hubUrl(hubId, extraParams, slug) {\n  if (!hubId) {\n    if (isLocalClient()) {\n      hubId = new URLSearchParams(location.search).get(\"hub_id\");\n    } else {\n      hubId = location.pathname.split(\"/\")[1];\n    }\n  }\n\n  let url;\n  if (isLocalClient()) {\n    url = new URL(`/hub.html`, location.href);\n    url.searchParams.set(\"hub_id\", hubId);\n  } else {\n    const maybeSlug = slug ? `/${slug}` : \"\";\n    url = new URL(`/${hubId}${maybeSlug}`, location.href);\n  }\n\n  for (const key in extraParams) {\n    if (extraParams.hasOwnProperty(key)) {\n      url.searchParams.set(key, extraParams[key]);\n    }\n  }\n\n  return url;\n}\n\nconst resolverLink = document.createElement(\"a\");\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport function getReticulumFetchUrl(path, absolute = false, host = null, port = null) {\n  if (host || hasReticulumServer()) {\n    return `https://${host || configs.RETICULUM_SERVER}${port ? `:${port}` : \"\"}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nexport function getUploadsUrl(path, absolute = false, host = null, port = null) {\n  // If the Hubs Cloud stack is configured to use Cloudflare, we need to ignore the configured UPLOADS_HOST\n  // since reticulum will only serve uploads via the Cloudflare worker. BASE_ASSETS_PATH will have been\n  // correctly configured to use the Cloudflare worker, though we only need the hostname,\n  // not the full assets URL.\n  const isUsingCloudflare = configs.BASE_ASSETS_PATH.includes(\"workers.dev\");\n  const uploadsHost = isUsingCloudflare ? new URL(configs.BASE_ASSETS_PATH).hostname : configs.UPLOADS_HOST;\n  return uploadsHost\n    ? `https://${uploadsHost}${port ? `:${port}` : \"\"}${path}`\n    : getReticulumFetchUrl(path, absolute, host, port);\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nlet directReticulumHostAndPort;\n\nasync function refreshDirectReticulumHostAndPort() {\n  const qs = new URLSearchParams(location.search);\n  let host = qs.get(\"phx_host\");\n  const reticulumMeta = await getReticulumMeta();\n  host = host || configs.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n  const port =\n    qs.get(\"phx_port\") ||\n    (hasReticulumServer() ? new URL(`${document.location.protocol}//${configs.RETICULUM_SERVER}`).port : \"443\");\n  directReticulumHostAndPort = { host, port };\n}\n\nexport function getDirectReticulumFetchUrl(path, absolute = false) {\n  if (!directReticulumHostAndPort) {\n    console.warn(\"Cannot call getDirectReticulumFetchUrl before connectToReticulum. Returning non-direct url.\");\n    return getReticulumFetchUrl(path, absolute);\n  }\n\n  const { host, port } = directReticulumHostAndPort;\n  return getReticulumFetchUrl(path, absolute, host, port);\n}\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function connectToReticulum(debug = false, params = null, socketClass = Socket) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    await refreshDirectReticulumHostAndPort();\n    const { host, port } = directReticulumHostAndPort;\n    const protocol =\n      qs.get(\"phx_protocol\") ||\n      configs.RETICULUM_SOCKET_PROTOCOL ||\n      (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n\n    return `${protocol}//${host}${port ? `:${port}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new socketClass(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n  const payload = { hub: { name: name || generateHubName() } };\n\n  if (sceneId) {\n    payload.hub.scene_id = sceneId;\n  }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (isLocalClient()) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\nfunction migrateBindings(oldChannel, newChannel) {\n  const doNotDuplicate = [\"phx_close\", \"phx_error\", \"phx_reply\", \"presence_state\", \"presence_diff\"];\n  const shouldDuplicate = event => {\n    return !event.startsWith(\"chan_reply_\") && !doNotDuplicate.includes(event);\n  };\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    if (shouldDuplicate(item.event)) {\n      newChannel.bindings.push(item);\n    }\n  }\n  newChannel.bindingRef = oldChannel.bindingRef;\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  migrateBindings(oldChannel, channel);\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function migrateToChannel(oldChannel, newChannel) {\n  migrateBindings(oldChannel, newChannel);\n\n  return new Promise((resolve, reject) => {\n    newChannel\n      .join()\n      .receive(\"ok\", data => {\n        oldChannel.leave();\n        oldChannel.bindings = [];\n        resolve(data);\n      })\n      .receive(\"error\", data => {\n        newChannel.leave();\n        reject(data);\n      });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n      }\n    }\n  }\n  return channels;\n}\n\nexport function hasEmbedPresences(presences) {\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.context && m.context.embed) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nexport function denoisePresence({ onJoin, onLeave, onChange }) {\n  return {\n    rawOnJoin: (key, beforeJoin, afterJoin) => {\n      if (beforeJoin === undefined) {\n        onJoin(key, afterJoin.metas[0]);\n      }\n    },\n    rawOnLeave: (key, remaining, removed) => {\n      if (remaining.metas.length === 0) {\n        onLeave(key, removed.metas[0]);\n      } else {\n        onChange(key, removed.metas[removed.metas.length - 1], remaining.metas[remaining.metas.length - 1]);\n      }\n    }\n  };\n}\n\nexport function presenceEventsForHub(events) {\n  const onJoin = (key, meta) => {\n    events.trigger(`hub:join`, { key, meta });\n  };\n  const onLeave = (key, meta) => {\n    events.trigger(`hub:leave`, { key, meta });\n  };\n  const onChange = (key, previous, current) => {\n    events.trigger(`hub:change`, { key, previous, current });\n  };\n  return {\n    onJoin,\n    onLeave,\n    onChange\n  };\n}\n\nexport const tryGetMatchingMeta = async ({ ret_pool, ret_version }, shouldAbandonMigration) => {\n  const backoffMS = 5000;\n  const randomMS = 15000;\n  const maxAttempts = 10;\n  let didMatchMeta = false;\n  let attempt = 0;\n  while (!didMatchMeta && attempt < maxAttempts && !shouldAbandonMigration()) {\n    try {\n      // Add randomness to the first request avoid flooding reticulum.\n      const delayMS = attempt * backoffMS + (attempt === 0 ? Math.random() * randomMS : 0);\n      console.log(\n        `[reconnect] Getting reticulum meta in ${Math.ceil(delayMS / 1000)} seconds.${\n          attempt ? ` (Attempt ${attempt + 1} of ${maxAttempts})` : \"\"\n        }`\n      );\n      await sleep(delayMS);\n      invalidateReticulumMeta();\n      console.log(`[reconnect] Getting reticulum meta.${attempt ? ` (Attempt ${attempt + 1} of ${maxAttempts})` : \"\"}`);\n      const { pool, version } = await getReticulumMeta();\n      didMatchMeta = ret_pool === pool && ret_version === version;\n    } catch {\n      didMatchMeta = false;\n    }\n\n    attempt = attempt + 1;\n  }\n  return didMatchMeta;\n};\n","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // Hash can't be overriden like the other elements, but needs to be preserved for things like deep linking waypoints\n  const hash = history.location.hash;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state, hash });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","import { EventTarget } from \"event-target-shim\";\nimport configs from \"../utils/configs\";\nimport { getReticulumFetchUrl, fetchReticulumAuthenticated, hasReticulumServer } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\n\nconst EMPTY_RESULT = { entries: [], meta: {} };\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  twitch: \"twitch\",\n  favorites: \"favorites\"\n};\n\nconst desiredSources = [\"sketchfab\", \"videos\", \"scenes\", \"avatars\", \"gifs\", \"images\"];\nconst availableSources = desiredSources.filter(source => {\n  const apiSource = URL_SOURCE_TO_TO_API_SOURCE[source];\n  return configs.integration(apiSource);\n});\nexport const SOURCES = availableSources;\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\",\n  favorites: \"my-favorites\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\", \"similar_to\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n    const locationSearchParams = new URLSearchParams(location.search);\n    const isMy = locationSearchParams.get(\"filter\") && locationSearchParams.get(\"filter\").startsWith(\"my-\");\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      source = isMy ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    let fetch = true;\n\n    if (source === \"avatars\" || source === \"scenes\" || source === \"favorites\") {\n      if (isMy) {\n        if (window.APP.store.credentialsAccountId) {\n          searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n        } else {\n          fetch = false; // Don't fetch my-* if not signed in\n        }\n      }\n    }\n\n    const path = `/api/v1/media/search?${searchParams.toString()}`;\n    const url = getReticulumFetchUrl(path);\n    if (this.lastSavedUrl === url) return;\n\n    this.isFetching = true;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    const result = fetch ? await fetchReticulumAuthenticated(path) : EMPTY_RESULT;\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result && this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.isFetching = false;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    searchParams.delete(\"similar_to\");\n    searchParams.delete(\"similar_name\");\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav, keepSelectAction) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n    searchParams.delete(\"similar_to\");\n    searchParams.delete(\"similar_name\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    if (!keepSelectAction) {\n      searchParams.delete(\"selectAction\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n\n    this._stashedParams = {};\n    this._stashedSource = null;\n\n    const source = this.getUrlMediaSource(location);\n\n    // HACK for now do not stash favorite search, since that ends up being a source\n    // we do not reveal in the media browser UX. Revisit the rules here when we have a\n    // proper favorites browser. Then, we should have two separate stashes.\n    if (source === \"favorites\") return;\n    this._stashedSource = source;\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = (source, selectAction) => {\n    this._sourceNavigate(source, true, false, selectAction);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams, selectAction) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (selectAction) {\n      searchParams.set(\"selectAction\", selectAction);\n    }\n\n    if (hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const result = await fetchReticulumAuthenticated(`/api/v1/media/search?${searchParams.toString()}`);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","import * as bitecs from \"bitecs\";\nimport { addEntity, createWorld } from \"bitecs\";\nimport \"./aframe-to-bit-components\";\nimport { AEntity, Networked, Object3DTag, Owned } from \"./bit-components\";\nimport MediaSearchStore from \"./storage/media-search-store\";\nimport Store from \"./storage/store\";\nimport qsTruthy from \"./utils/qs_truthy\";\n\nwindow.$B = bitecs;\n\nconst timeSystem = world => {\n  const { time } = world;\n  const now = performance.now();\n  const delta = now - time.then;\n  time.delta = delta;\n  time.elapsed += delta;\n  time.then = now;\n  time.tick++;\n  return world;\n};\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n    this.hubChannel = null;\n    this.mediaDevicesManager = null;\n\n    // TODO: Remove comments\n    // TODO: Rename or reconfigure these as needed\n    this.audios = new Map(); //                           el -> (THREE.Audio || THREE.PositionalAudio)\n    this.sourceType = new Map(); //                       el -> SourceType\n    this.audioOverrides = new Map(); //                   el -> AudioSettings\n    this.zoneOverrides = new Map(); //                    el -> AudioSettings\n    this.audioDebugPanelOverrides = new Map(); // SourceType -> AudioSettings\n    this.sceneAudioDefaults = new Map(); //       SourceType -> AudioSettings\n    this.gainMultipliers = new Map(); //                  el -> Number\n    this.supplementaryAttenuation = new Map(); //         el -> Number\n    this.clippingState = new Set();\n    this.mutedState = new Set();\n    this.isAudioPaused = new Set();\n\n    this.world = createWorld();\n\n    // TODO: Create accessor / update methods for these maps / set\n    this.world.eid2obj = new Map(); // eid -> Object3D\n\n    this.world.nid2eid = new Map();\n    this.world.deletedNids = new Set();\n    this.world.ignoredNids = new Set();\n\n    this.str2sid = new Map([[null, 0]]);\n    this.sid2str = new Map([[0, null]]);\n    this.nextSid = 1;\n\n    window.$o = eid => {\n      this.world.eid2obj.get(eid);\n    };\n\n    // reserve entity 0 to avoid needing to check for undefined everywhere eid is checked for existance\n    addEntity(this.world);\n\n    // used in aframe and networked aframe to avoid imports\n    this.world.nameToComponent = {\n      object3d: Object3DTag,\n      networked: Networked,\n      owned: Owned,\n      AEntity\n    };\n  }\n\n  // TODO nothing ever cleans these up\n  getSid(str) {\n    if (!this.str2sid.has(str)) {\n      const sid = this.nextSid;\n      this.nextSid = this.nextSid + 1;\n      this.str2sid.set(str, sid);\n      this.sid2str.set(sid, str);\n      return sid;\n    }\n    return this.str2sid.get(str);\n  }\n\n  getString(sid) {\n    return this.sid2str.get(sid);\n  }\n\n  // This gets called by a-scene to setup the renderer, camera, and audio listener\n  // TODO ideally the contorl flow here would be inverted, and we would setup this stuff,\n  // initialize aframe, and then run our own RAF loop\n  setupRenderer(sceneEl) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.classList.add(\"a-canvas\");\n    canvas.dataset.aframeCanvas = true;\n\n    // TODO this comes from aframe and prevents zoom on ipad.\n    // This should alreeady be handleed by disable-ios-zoom but it does not appear to work\n    canvas.addEventListener(\"touchmove\", function(event) {\n      event.preventDefault();\n    });\n\n    const renderer = new THREE.WebGLRenderer({\n      // TODO we should not be using alpha: false https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#avoid_alphafalse_which_can_be_expensive\n      alpha: true,\n      antialias: true,\n      depth: true,\n      stencil: true,\n      premultipliedAlpha: true,\n      preserveDrawingBuffer: false,\n      logarithmicDepthBuffer: false,\n      // TODO we probably want high-performance\n      powerPreference: \"high-performance\",\n      canvas\n    });\n\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    renderer.debug.checkShaderErrors = qsTruthy(\"checkShaderErrors\");\n\n    // These get overridden by environment-system but setting to the highly expected defaults to avoid any extra work\n    renderer.physicallyCorrectLights = true;\n    renderer.outputEncoding = THREE.sRGBEncoding;\n\n    sceneEl.appendChild(renderer.domElement);\n\n    const camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.05, 10000);\n\n    const audioListener = new THREE.AudioListener();\n    APP.audioListener = audioListener;\n    camera.add(audioListener);\n\n    const renderClock = new THREE.Clock();\n\n    // TODO NAF currently depends on this, it should not\n    sceneEl.clock = renderClock;\n\n    // TODO we should have 1 source of truth for time\n    APP.world.time = {\n      delta: 0,\n      elapsed: 0,\n      then: performance.now(),\n      tick: 0\n    };\n\n    APP.world.scene = sceneEl.object3D;\n\n    // Main RAF loop\n    function mainTick(_rafTime, xrFrame) {\n      // TODO we should probably be using time from the raf loop itself\n      const delta = renderClock.getDelta() * 1000;\n      const time = renderClock.elapsedTime * 1000;\n\n      // TODO pass this into systems that care about it (like input) once they are moved into this loop\n      sceneEl.frame = xrFrame;\n\n      timeSystem(APP.world);\n\n      // Tick AFrame systems and components\n      if (sceneEl.isPlaying) {\n        sceneEl.tick(time, delta);\n      }\n\n      renderer.render(sceneEl.object3D, camera);\n    }\n\n    // This gets called after all system and component init functions\n    sceneEl.addEventListener(\"loaded\", () => {\n      renderer.setAnimationLoop(mainTick);\n      sceneEl.renderStarted = true;\n    });\n\n    return {\n      renderer,\n      camera,\n      audioListener\n    };\n  }\n}\n","import cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\n\nexport async function createDefaultEnvironmentMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\n  );\n  texture.format = THREE.RGBAFormat;\n  return texture;\n}\n","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function updateMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material = object3D.material.map(fn);\n  } else {\n    object3D.material = fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return [];\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return [fn(object3D.material)];\n  }\n}\n\n// HubsMeshBasicMaterial exists because we need to be able to set the emissiveMap in the avatar preview.\n// It also allows the material to be properly copied/cloned.\nclass HubsMeshBasicMaterial extends THREE.MeshBasicMaterial {\n  static fromMeshStandardMaterial(source) {\n    const material = new HubsMeshBasicMaterial();\n\n    THREE.Material.prototype.copy.call(material, source);\n\n    material.color.copy(source.color);\n\n    material.emissive.copy(source.emissive);\n    material.emissiveIntensity = source.emissiveIntensity;\n    material.emissiveMap = source.emissiveMap;\n\n    material.map = source.map;\n\n    material.lightMap = source.lightMap;\n    // See https://github.com/mrdoob/three.js/pull/23613 for \"* Math.PI\"\n    material.lightMapIntensity = source.lightMapIntensity * Math.PI;\n\n    material.aoMap = source.aoMap;\n    material.aoMapIntensity = source.aoMapIntensity;\n\n    material.alphaMap = source.alphaMap;\n\n    material.wireframe = source.wireframe;\n    material.wireframeLinewidth = source.wireframeLinewidth;\n    material.wireframeLinecap = source.wireframeLinecap;\n    material.wireframeLinejoin = source.wireframeLinejoin;\n\n    return material;\n  }\n\n  constructor({ emissive, emissiveMap, emissiveIntensity, ...rest } = {}) {\n    super(rest);\n    this._emissive = { value: emissive || new THREE.Color() };\n    this._emissiveIntensity = { value: emissiveIntensity === undefined ? 1 : emissiveIntensity };\n    this._emissiveMap = { value: emissiveMap };\n  }\n\n  get emissive() {\n    return this._emissive.value;\n  }\n\n  set emissive(emissive) {\n    this._emissive.value = emissive;\n  }\n\n  get emissiveIntensity() {\n    return this._emissiveIntensity.value;\n  }\n\n  set emissiveIntensity(emissiveIntensity) {\n    this._emissiveIntensity.value = emissiveIntensity;\n  }\n\n  get emissiveMap() {\n    return this._emissiveMap.value;\n  }\n\n  set emissiveMap(emissiveMap) {\n    this._emissiveMap.value = emissiveMap;\n  }\n\n  copy(source) {\n    super.copy(source);\n    this.emissive.copy(source.emissive);\n    this.emissiveIntensity = source.emissiveIntensity;\n    this.emissiveMap = source.emissiveMap;\n    return this;\n  }\n\n  onBeforeCompile = shader => {\n    // This patch to the MeshBasicMaterial adds support for emissive maps.\n    shader.uniforms.emissive = this._emissive;\n    shader.uniforms.emissiveIntensity = this._emissiveIntensity;\n    shader.uniforms.emissiveMap = this._emissiveMap;\n    shader.fragmentShader = shader.fragmentShader.replace(\n      \"#include <lightmap_pars_fragment>\",\n      `#include <lightmap_pars_fragment>\n      uniform vec3 emissive;\n      uniform sampler2D emissiveMap;\n      `\n    );\n    shader.fragmentShader = shader.fragmentShader.replace(\n      \"#include <envmap_fragment>\",\n      `#include <envmap_fragment>\n\n      vec3 totalEmissiveRadiance = emissive;\n      #include <emissivemap_fragment>\n      outgoingLight += totalEmissiveRadiance;\n\n      `\n    );\n  };\n}\n\nclass HubsMeshPhongMaterial extends THREE.MeshPhongMaterial {\n  static fromMeshStandardMaterial(source) {\n    const material = new HubsMeshPhongMaterial();\n\n    THREE.Material.prototype.copy.call(material, source);\n\n    material.color.copy(source.color);\n\n    material.map = source.map;\n\n    material.lightMap = source.lightMap;\n    material.lightMapIntensity = source.lightMapIntensity;\n\n    material.aoMap = source.aoMap;\n    material.aoMapIntensity = source.aoMapIntensity;\n\n    material.emissive.copy(source.emissive);\n    material.emissiveMap = source.emissiveMap;\n    material.emissiveIntensity = source.emissiveIntensity;\n\n    material.normalMapType = source.normalMapType;\n    material.normalMap = source.normalMap;\n    material.normalScale.copy(source.normalScale);\n\n    material.bumpMap = source.bumpMap;\n    material.bumpScale = source.bumpScale;\n\n    material.displacementMap = source.displacementMap;\n    material.displacementScale = source.displacementScale;\n    material.displacementBias = source.displacementBias;\n\n    material.alphaMap = source.alphaMap;\n\n    material.reflectivity = 0.5;\n    material.refractionRatio = source.refractionRatio;\n\n    material.wireframe = source.wireframe;\n    material.wireframeLinewidth = source.wireframeLinewidth;\n    material.wireframeLinecap = source.wireframeLinecap;\n    material.wireframeLinejoin = source.wireframeLinejoin;\n\n    return material;\n  }\n\n  onBeforeCompile = shader => {\n    // This patch to MeshPhongMaterial adds support for tangent space normal maps.\n    shader.vertexShader = shader.vertexShader.replace(\n      \"varying vec3 vNormal;\",\n      `varying vec3 vNormal;\n      #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n      #endif\n      `\n    );\n    shader.vertexShader = shader.vertexShader.replace(\n      \"vNormal = normalize( transformedNormal );\",\n      `vNormal = normalize( transformedNormal );\n      \n        #ifdef USE_TANGENT\n      \n          vTangent = normalize( transformedTangent );\n          vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n      \n        #endif\n      `\n    );\n    shader.fragmentShader = shader.fragmentShader.replace(\n      \"#include <lights_phong_pars_fragment>\",\n      `#include <lights_phong_pars_fragment>\n      #ifndef FLAT_SHADED\n\n        #ifdef USE_TANGENT\n          varying vec3 vTangent;\n          varying vec3 vBitangent;\n        #endif\n\n      #endif\n      `\n    );\n  };\n}\n\nexport function convertStandardMaterial(source, quality) {\n  if (!source.isMeshStandardMaterial) {\n    return source;\n  }\n\n  if (quality === \"medium\") {\n    return HubsMeshPhongMaterial.fromMeshStandardMaterial(source);\n  } else if (quality === \"low\") {\n    return HubsMeshBasicMaterial.fromMeshStandardMaterial(source);\n  }\n\n  return source;\n}\n\nexport function disposeTexture(texture) {\n  if (texture.dash) {\n    texture.dash.reset();\n  }\n\n  if (texture.image instanceof HTMLVideoElement) {\n    const video = texture.image;\n    video.pause();\n    video.src = \"\";\n    video.load();\n  }\n\n  if (texture.hls) {\n    texture.hls.stopLoad();\n    texture.hls.detachMedia();\n    texture.hls.destroy();\n    texture.hls = null;\n  }\n\n  texture.dispose();\n}\n","import { hasReticulumServer } from \"./phoenix-utils\";\nimport configs from \"./configs\";\n\nconst nonCorsProxyDomains = (configs.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (configs.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(configs.CORS_PROXY_SERVER.split(\":\")[0]);\n}\nnonCorsProxyDomains.push(document.location.hostname);\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\",\n  basis: \"image/basis\",\n  ktx2: \"image/ktx2\",\n  m3u8: \"application/vnd.apple.mpegurl\",\n  mpd: \"application/dash+xml\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url).replace(/=+$/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  let extension = \"\";\n  try {\n    const pathParts = new URL(url).pathname.split(\".\");\n\n    if (pathParts.length > 1) {\n      const extensionCandidate = pathParts.pop();\n      if (commonKnownContentTypes[extensionCandidate]) {\n        extension = `.${extensionCandidate}`;\n      }\n    }\n  } catch (e) {\n    extension = \".png\";\n  }\n\n  // HACK: the extension is needed to ensure CDN caching on Cloudflare\n  const thumbnailUrl = `https://${configs.THUMBNAIL_SERVER}/thumbnail/${farsparkEncodeUrl(\n    url\n  )}${extension}?w=${width}&h=${height}`;\n\n  try {\n    const urlHostname = new URL(url).hostname;\n\n    if (hasReticulumServer()) {\n      const retHostname = new URL(`https://${configs.RETICULUM_SERVER}`).hostname;\n      if (retHostname === urlHostname) return url;\n    }\n  } catch (e) {\n    return thumbnailUrl;\n  }\n\n  return thumbnailUrl;\n};\n\nexport const isNonCorsProxyDomain = hostname => {\n  return nonCorsProxyDomains.find(domain => hostname.endsWith(domain));\n};\n\nexport const proxiedUrlFor = url => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  // Skip known domains that do not require CORS proxying.\n  try {\n    const parsedUrl = new URL(url);\n    if (isNonCorsProxyDomain(parsedUrl.hostname)) return url;\n  } catch (e) {\n    // Ignore\n  }\n\n  return `https://${configs.CORS_PROXY_SERVER}/${url}`;\n};\n\nexport function getAbsoluteUrl(baseUrl, relativeUrl) {\n  return new URL(relativeUrl, baseUrl);\n}\n\nexport function getAbsoluteHref(baseUrl, relativeUrl) {\n  return getAbsoluteUrl(baseUrl, relativeUrl).href;\n}\n\n// Note these files are configured in webpack.config.js to be handled with file-loader, so this will be a string containing the file paths\nimport basisJsUrl from \"three/examples/js/libs/basis/basis_transcoder.js\";\nimport dracoWrapperJsUrl from \"three/examples/js/libs/draco/gltf/draco_wasm_wrapper.js\";\nimport basisWasmUrl from \"three/examples/js/libs/basis/basis_transcoder.wasm\";\nimport dracoWasmUrl from \"three/examples/js/libs/draco/gltf/draco_decoder.wasm\";\n\nexport const rewriteBasisTranscoderUrls = function (url) {\n  if (url === \"basis_transcoder.js\") {\n    return basisJsUrl;\n  } else if (url === \"basis_transcoder.wasm\") {\n    return basisWasmUrl;\n  }\n  return url;\n};\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  // Intercept loading of basis transcoder with content hashed urls\n  if (url === \"basis_transcoder.js\") {\n    return basisJsUrl;\n  } else if (url === \"basis_transcoder.wasm\") {\n    return basisWasmUrl;\n  } else if (url === \"draco_wasm_wrapper.js\") {\n    return dracoWrapperJsUrl;\n  } else if (url === \"draco_decoder.wasm\") {\n    return dracoWasmUrl;\n  }\n\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return proxiedUrlFor(url);\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (configs.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${configs.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\n\nexport const guessContentType = url => {\n  if (!url) return;\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  if (url.startsWith(\"data:\")) {\n    const matches = dataUrlRegex.exec(url);\n    if (matches.length > 0) {\n      matches[1];\n    }\n  }\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\n\nconst originIsHubsServer = new Map();\nasync function isHubsServer(url) {\n  if (!url) return false;\n  if (!url.startsWith(\"http\")) {\n    url = \"https://\" + url;\n  }\n  const { origin } = new URL(url);\n\n  if (originIsHubsServer.has(origin)) {\n    return originIsHubsServer.get(origin);\n  }\n\n  let isHubsServer;\n  try {\n    isHubsServer = (await fetch(proxiedUrlFor(origin), { method: \"HEAD\" })).headers.has(\"hub-name\");\n  } catch (e) {\n    isHubsServer = false;\n  }\n  originIsHubsServer.set(origin, isHubsServer);\n  return isHubsServer;\n}\n\nconst hubsSceneRegex = /https?:\\/\\/[^/]+\\/scenes\\/[a-zA-Z0-9]{7}(?:\\/|$)/;\nconst hubsAvatarRegex = /https?:\\/\\/[^/]+\\/avatars\\/(?<id>[a-zA-Z0-9]{7})(?:\\/|$)/;\nconst hubsRoomRegex = /(https?:\\/\\/)?[^/]+\\/(?<id>[a-zA-Z0-9]{7})(?:\\/|$)/;\n\nexport const isLocalHubsUrl = async url =>\n  (await isHubsServer(url)) && new URL(url).origin === document.location.origin;\n\nexport const isHubsSceneUrl = async url => (await isHubsServer(url)) && hubsSceneRegex.test(url);\nexport const isLocalHubsSceneUrl = async url => (await isHubsSceneUrl(url)) && (await isLocalHubsUrl(url));\n\nexport const isHubsAvatarUrl = async url => (await isHubsServer(url)) && hubsAvatarRegex.test(url);\nexport const isLocalHubsAvatarUrl = async url => (await isHubsAvatarUrl(url)) && (await isLocalHubsUrl(url));\n\nexport const isHubsRoomUrl = async url =>\n  (await isHubsServer(url)) &&\n  !(await isHubsAvatarUrl(url)) &&\n  !(await isHubsSceneUrl(url)) &&\n  url.match(hubsRoomRegex)?.groups.id;\n\nexport const isHubsDestinationUrl = async url =>\n  (await isHubsServer(url)) && ((await isHubsSceneUrl(url)) || (await isHubsRoomUrl(url)));\n\nexport const idForAvatarUrl = url => {\n  const match = url.match(hubsAvatarRegex);\n  if (match) {\n    return match.groups.id;\n  }\n  return null;\n};\n","\r\nexport default\r\nclass MeshBVHNode {\r\n\r\n\tconstructor() {\r\n\r\n\t\t// internal nodes have boundingData, left, right, and splitAxis\r\n\t\t// leaf nodes have offset and count (referring to primitives in the mesh geometry)\r\n\r\n\t}\r\n\r\n}\r\n","// Returns a Float32Array representing the bounds data for box.\r\nexport function boxToArray( bx ) {\r\n\r\n\tconst arr = new Float32Array( 6 );\r\n\r\n\tarr[ 0 ] = bx.min.x;\r\n\tarr[ 1 ] = bx.min.y;\r\n\tarr[ 2 ] = bx.min.z;\r\n\r\n\tarr[ 3 ] = bx.max.x;\r\n\tarr[ 4 ] = bx.max.y;\r\n\tarr[ 5 ] = bx.max.z;\r\n\r\n\treturn arr;\r\n\r\n}\r\n\r\nexport function arrayToBox( arr, target ) {\r\n\r\n\ttarget.min.x = arr[ 0 ];\r\n\ttarget.min.y = arr[ 1 ];\r\n\ttarget.min.z = arr[ 2 ];\r\n\r\n\ttarget.max.x = arr[ 3 ];\r\n\ttarget.max.y = arr[ 4 ];\r\n\ttarget.max.z = arr[ 5 ];\r\n\r\n\treturn target;\r\n\r\n}\r\n\r\nexport function getLongestEdgeIndex( bounds ) {\r\n\r\n\tlet splitDimIdx = - 1;\r\n\tlet splitDist = - Infinity;\r\n\r\n\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\tconst dist = bounds[ i + 3 ] - bounds[ i ];\r\n\t\tif ( dist > splitDist ) {\r\n\r\n\t\t\tsplitDist = dist;\r\n\t\t\tsplitDimIdx = i;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn splitDimIdx;\r\n\r\n}\r\n","import { Box3, BufferAttribute } from 'three';\r\nimport MeshBVHNode from './MeshBVHNode.js';\r\nimport { arrayToBox, boxToArray, getLongestEdgeIndex } from './Utils/ArrayBoxUtilities.js';\r\nimport { CENTER, AVERAGE, SAH } from './Constants.js';\r\n\r\n// https://en.wikipedia.org/wiki/Machine_epsilon#Values_for_standard_hardware_floating_point_arithmetics\r\nconst FLOAT32_EPSILON = Math.pow( 2, - 24 );\r\nconst xyzFields = [ 'x', 'y', 'z' ];\r\nconst boxTemp = new Box3();\r\n\r\nfunction ensureIndex( geo ) {\r\n\r\n\tif ( ! geo.index ) {\r\n\r\n\t\tconst vertexCount = geo.attributes.position.count;\r\n\t\tconst index = new ( vertexCount > 65535 ? Uint32Array : Uint16Array )( vertexCount );\r\n\t\tgeo.setIndex( new BufferAttribute( index, 1 ) );\r\n\r\n\t\tfor ( let i = 0; i < vertexCount; i ++ ) {\r\n\r\n\t\t\tindex[ i ] = i;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Computes the set of { offset, count } ranges which need independent BVH roots. Each\r\n// region in the geometry index that belongs to a different set of material groups requires\r\n// a separate BVH root, so that triangles indices belonging to one group never get swapped\r\n// with triangle indices belongs to another group. For example, if the groups were like this:\r\n//\r\n// [-------------------------------------------------------------]\r\n// |__________________|\r\n//   g0 = [0, 20]  |______________________||_____________________|\r\n//                      g1 = [16, 40]           g2 = [41, 60]\r\n//\r\n// we would need four BVH roots: [0, 15], [16, 20], [21, 40], [41, 60].\r\nfunction getRootIndexRanges( geo ) {\r\n\r\n\tif ( ! geo.groups || ! geo.groups.length ) {\r\n\r\n\t\treturn [ { offset: 0, count: geo.index.count / 3 } ];\r\n\r\n\t}\r\n\r\n\tconst ranges = [];\r\n\tconst rangeBoundaries = new Set();\r\n\tfor ( const group of geo.groups ) {\r\n\r\n\t\trangeBoundaries.add( group.start );\r\n\t\trangeBoundaries.add( group.start + group.count );\r\n\r\n\t}\r\n\r\n\t// note that if you don't pass in a comparator, it sorts them lexicographically as strings :-(\r\n\tconst sortedBoundaries = Array.from( rangeBoundaries.values() ).sort( ( a, b ) => a - b );\r\n\tfor ( let i = 0; i < sortedBoundaries.length - 1; i ++ ) {\r\n\r\n\t\tconst start = sortedBoundaries[ i ], end = sortedBoundaries[ i + 1 ];\r\n\t\tranges.push( { offset: ( start / 3 ), count: ( end - start ) / 3 } );\r\n\r\n\t}\r\n\r\n\treturn ranges;\r\n\r\n}\r\n\r\n// computes the union of the bounds of all of the given triangles and puts the resulting box in target. If\r\n// centroidTarget is provided then a bounding box is computed for the centroids of the triangles, as well.\r\n// These are computed together to avoid redundant accesses to bounds array.\r\nfunction getBounds( triangleBounds, offset, count, target, centroidTarget = null ) {\r\n\r\n\tlet minx = Infinity;\r\n\tlet miny = Infinity;\r\n\tlet minz = Infinity;\r\n\tlet maxx = - Infinity;\r\n\tlet maxy = - Infinity;\r\n\tlet maxz = - Infinity;\r\n\r\n\tlet cminx = Infinity;\r\n\tlet cminy = Infinity;\r\n\tlet cminz = Infinity;\r\n\tlet cmaxx = - Infinity;\r\n\tlet cmaxy = - Infinity;\r\n\tlet cmaxz = - Infinity;\r\n\r\n\tconst includeCentroid = centroidTarget !== null;\r\n\tfor ( let i = offset * 6, end = ( offset + count ) * 6; i < end; i += 6 ) {\r\n\r\n\t\tconst cx = triangleBounds[ i + 0 ];\r\n\t\tconst hx = triangleBounds[ i + 1 ];\r\n\t\tconst lx = cx - hx;\r\n\t\tconst rx = cx + hx;\r\n\t\tif ( lx < minx ) minx = lx;\r\n\t\tif ( rx > maxx ) maxx = rx;\r\n\t\tif ( includeCentroid && cx < cminx ) cminx = cx;\r\n\t\tif ( includeCentroid && cx > cmaxx ) cmaxx = cx;\r\n\r\n\t\tconst cy = triangleBounds[ i + 2 ];\r\n\t\tconst hy = triangleBounds[ i + 3 ];\r\n\t\tconst ly = cy - hy;\r\n\t\tconst ry = cy + hy;\r\n\t\tif ( ly < miny ) miny = ly;\r\n\t\tif ( ry > maxy ) maxy = ry;\r\n\t\tif ( includeCentroid && cy < cminy ) cminy = cy;\r\n\t\tif ( includeCentroid && cy > cmaxy ) cmaxy = cy;\r\n\r\n\t\tconst cz = triangleBounds[ i + 4 ];\r\n\t\tconst hz = triangleBounds[ i + 5 ];\r\n\t\tconst lz = cz - hz;\r\n\t\tconst rz = cz + hz;\r\n\t\tif ( lz < minz ) minz = lz;\r\n\t\tif ( rz > maxz ) maxz = rz;\r\n\t\tif ( includeCentroid && cz < cminz ) cminz = cz;\r\n\t\tif ( includeCentroid && cz > cmaxz ) cmaxz = cz;\r\n\r\n\t}\r\n\r\n\ttarget[ 0 ] = minx;\r\n\ttarget[ 1 ] = miny;\r\n\ttarget[ 2 ] = minz;\r\n\r\n\ttarget[ 3 ] = maxx;\r\n\ttarget[ 4 ] = maxy;\r\n\ttarget[ 5 ] = maxz;\r\n\r\n\tif ( includeCentroid ) {\r\n\r\n\t\tcentroidTarget[ 0 ] = cminx;\r\n\t\tcentroidTarget[ 1 ] = cminy;\r\n\t\tcentroidTarget[ 2 ] = cminz;\r\n\r\n\t\tcentroidTarget[ 3 ] = cmaxx;\r\n\t\tcentroidTarget[ 4 ] = cmaxy;\r\n\t\tcentroidTarget[ 5 ] = cmaxz;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// A stand alone function for retrieving the centroid bounds.\r\nfunction getCentroidBounds( triangleBounds, offset, count, centroidTarget ) {\r\n\r\n\tlet cminx = Infinity;\r\n\tlet cminy = Infinity;\r\n\tlet cminz = Infinity;\r\n\tlet cmaxx = - Infinity;\r\n\tlet cmaxy = - Infinity;\r\n\tlet cmaxz = - Infinity;\r\n\r\n\tfor ( let i = offset * 6, end = ( offset + count ) * 6; i < end; i += 6 ) {\r\n\r\n\t\tconst cx = triangleBounds[ i + 0 ];\r\n\t\tif ( cx < cminx ) cminx = cx;\r\n\t\tif ( cx > cmaxx ) cmaxx = cx;\r\n\r\n\t\tconst cy = triangleBounds[ i + 2 ];\r\n\t\tif ( cy < cminy ) cminy = cy;\r\n\t\tif ( cy > cmaxy ) cmaxy = cy;\r\n\r\n\t\tconst cz = triangleBounds[ i + 4 ];\r\n\t\tif ( cz < cminz ) cminz = cz;\r\n\t\tif ( cz > cmaxz ) cmaxz = cz;\r\n\r\n\t}\r\n\r\n\tcentroidTarget[ 0 ] = cminx;\r\n\tcentroidTarget[ 1 ] = cminy;\r\n\tcentroidTarget[ 2 ] = cminz;\r\n\r\n\tcentroidTarget[ 3 ] = cmaxx;\r\n\tcentroidTarget[ 4 ] = cmaxy;\r\n\tcentroidTarget[ 5 ] = cmaxz;\r\n\r\n}\r\n\r\n\r\n// reorders `tris` such that for `count` elements after `offset`, elements on the left side of the split\r\n// will be on the left and elements on the right side of the split will be on the right. returns the index\r\n// of the first element on the right side, or offset + count if there are no elements on the right side.\r\nfunction partition( index, triangleBounds, sahPlanes, offset, count, split ) {\r\n\r\n\tlet left = offset;\r\n\tlet right = offset + count - 1;\r\n\tconst pos = split.pos;\r\n\tconst axisOffset = split.axis * 2;\r\n\r\n\t// hoare partitioning, see e.g. https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\r\n\twhile ( true ) {\r\n\r\n\t\twhile ( left <= right && triangleBounds[ left * 6 + axisOffset ] < pos ) {\r\n\r\n\t\t\tleft ++;\r\n\r\n\t\t}\r\n\r\n\t\twhile ( left <= right && triangleBounds[ right * 6 + axisOffset ] >= pos ) {\r\n\r\n\t\t\tright --;\r\n\r\n\t\t}\r\n\r\n\t\tif ( left < right ) {\r\n\r\n\t\t\t// we need to swap all of the information associated with the triangles at index\r\n\t\t\t// left and right; that's the verts in the geometry index, the bounds,\r\n\t\t\t// and perhaps the SAH planes\r\n\r\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\tlet t0 = index[ left * 3 + i ];\r\n\t\t\t\tindex[ left * 3 + i ] = index[ right * 3 + i ];\r\n\t\t\t\tindex[ right * 3 + i ] = t0;\r\n\r\n\t\t\t\tlet t1 = triangleBounds[ left * 6 + i * 2 + 0 ];\r\n\t\t\t\ttriangleBounds[ left * 6 + i * 2 + 0 ] = triangleBounds[ right * 6 + i * 2 + 0 ];\r\n\t\t\t\ttriangleBounds[ right * 6 + i * 2 + 0 ] = t1;\r\n\r\n\t\t\t\tlet t2 = triangleBounds[ left * 6 + i * 2 + 1 ];\r\n\t\t\t\ttriangleBounds[ left * 6 + i * 2 + 1 ] = triangleBounds[ right * 6 + i * 2 + 1 ];\r\n\t\t\t\ttriangleBounds[ right * 6 + i * 2 + 1 ] = t2;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( sahPlanes ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\tlet t = sahPlanes[ i ][ left ];\r\n\t\t\t\t\tsahPlanes[ i ][ left ] = sahPlanes[ i ][ right ];\r\n\t\t\t\t\tsahPlanes[ i ][ right ] = t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tleft ++;\r\n\t\t\tright --;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn left;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getOptimalSplit( nodeBoundingData, centroidBoundingData, triangleBounds, sahPlanes, offset, count, strategy ) {\r\n\r\n\tlet axis = - 1;\r\n\tlet pos = 0;\r\n\r\n\t// Center\r\n\tif ( strategy === CENTER ) {\r\n\r\n\t\taxis = getLongestEdgeIndex( centroidBoundingData );\r\n\t\tif ( axis !== - 1 ) {\r\n\r\n\t\t\tpos = ( centroidBoundingData[ axis ] + centroidBoundingData[ axis + 3 ] ) / 2;\r\n\r\n\t\t}\r\n\r\n\t} else if ( strategy === AVERAGE ) {\r\n\r\n\t\taxis = getLongestEdgeIndex( nodeBoundingData );\r\n\t\tif ( axis !== - 1 ) {\r\n\r\n\t\t\tpos = getAverage( triangleBounds, offset, count, axis );\r\n\r\n\t\t}\r\n\r\n\t} else if ( strategy === SAH ) {\r\n\r\n\t\t// Surface Area Heuristic\r\n\t\t// In order to make this code more terse, the x, y, and z\r\n\t\t// variables of various structures have been stuffed into\r\n\t\t// 0, 1, and 2 array indices so they can be easily computed\r\n\t\t// and accessed within array iteration\r\n\r\n\t\t// Cost values defineed for operations. We're using bounds for traversal, so\r\n\t\t// the cost of traversing one more layer is more than intersecting a triangle.\r\n\t\tconst TRAVERSAL_COST = 3;\r\n\t\tconst INTERSECTION_COST = 1;\r\n\t\tconst bb = arrayToBox( nodeBoundingData, boxTemp );\r\n\r\n\t\t// Define the width, height, and depth of the bounds as a box\r\n\t\tconst dim = [\r\n\t\t\tbb.max.x - bb.min.x,\r\n\t\t\tbb.max.y - bb.min.y,\r\n\t\t\tbb.max.z - bb.min.z\r\n\t\t];\r\n\t\tconst sa = 2 * ( dim[ 0 ] * dim[ 1 ] + dim[ 0 ] * dim[ 2 ] + dim[ 1 ] * dim[ 2 ] );\r\n\r\n\t\t// Get the precalculated planes based for the triangles we're\r\n\t\t// testing here\r\n\t\tconst filteredLists = [[], [], []];\r\n\t\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\t\tfor ( let v = 0; v < 3; v ++ ) {\r\n\r\n\t\t\t\tfilteredLists[ v ].push( sahPlanes[ v ][ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfilteredLists.forEach( planes => planes.sort( ( a, b ) => a.p - b.p ) );\r\n\r\n\t\t// this bounds surface area, left bound SA, left triangles, right bound SA, right triangles\r\n\t\tconst getCost = ( sa, sal, nl, sar, nr ) =>\r\n\t\t\t  TRAVERSAL_COST + INTERSECTION_COST * ( ( sal / sa ) * nl + ( sar / sa ) * nr );\r\n\r\n\t\t// the cost of _not_ splitting into smaller bounds\r\n\t\tconst noSplitCost = INTERSECTION_COST * count;\r\n\r\n\t\taxis = - 1;\r\n\t\tlet bestCost = noSplitCost;\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t// o1 and o2 represent the _other_ two axes in the\r\n\t\t\t// the space. So if we're checking the x (0) dimension,\r\n\t\t\t// then o1 and o2 would be y and z (1 and 2)\r\n\t\t\tconst o1 = ( i + 1 ) % 3;\r\n\t\t\tconst o2 = ( i + 2 ) % 3;\r\n\r\n\t\t\tconst bmin = bb.min[ xyzFields[ i ] ];\r\n\t\t\tconst bmax = bb.max[ xyzFields[ i ] ];\r\n\t\t\tconst planes = filteredLists[ i ];\r\n\r\n\t\t\t// The number of left and right triangles on either side\r\n\t\t\t// given the current split\r\n\t\t\tlet nl = 0;\r\n\t\t\tlet nr = count;\r\n\t\t\tfor ( let p = 0; p < planes.length; p ++ ) {\r\n\r\n\t\t\t\tconst pinfo = planes[ p ];\r\n\r\n\t\t\t\t// As the plane moves, we have to increment or decrement the\r\n\t\t\t\t// number of triangles on either side of the plane\r\n\t\t\t\tnl ++;\r\n\t\t\t\tnr --;\r\n\r\n\t\t\t\t// the distance from the plane to the edge of the broader bounds\r\n\t\t\t\tconst ldim = pinfo.p - bmin;\r\n\t\t\t\tconst rdim = bmax - pinfo.p;\r\n\r\n\t\t\t\t// same for the other two dimensions\r\n\t\t\t\tlet ldimo1 = dim[ o1 ], rdimo1 = dim[ o1 ];\r\n\t\t\t\tlet ldimo2 = dim[ o2 ], rdimo2 = dim[ o2 ];\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t// compute the other bounding planes for the box\r\n\t\t\t\t// if only the current triangles are considered to\r\n\t\t\t\t// be in the box\r\n\t\t\t\t// This is really slow and probably not really worth it\r\n\t\t\t\tconst o1planes = sahPlanes[o1];\r\n\t\t\t\tconst o2planes = sahPlanes[o2];\r\n\t\t\t\tlet lmin = Infinity, lmax = -Infinity;\r\n\t\t\t\tlet rmin = Infinity, rmax = -Infinity;\r\n\t\t\t\tplanes.forEach((p, i) => {\r\n\t\t\t\tconst tri2 = p.tri * 2;\r\n\t\t\t\tconst inf1 = o1planes[tri2 + 0];\r\n\t\t\t\tconst inf2 = o1planes[tri2 + 1];\r\n\t\t\t\tif (i <= nl) {\r\n\t\t\t\tlmin = Math.min(inf1.p, inf2.p, lmin);\r\n\t\t\t\tlmax = Math.max(inf1.p, inf2.p, lmax);\r\n\t\t\t\t}\r\n\t\t\t\tif (i >= nr) {\r\n\t\t\t\trmin = Math.min(inf1.p, inf2.p, rmin);\r\n\t\t\t\trmax = Math.max(inf1.p, inf2.p, rmax);\r\n\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tldimo1 = Math.min(lmax - lmin, ldimo1);\r\n\t\t\t\trdimo1 = Math.min(rmax - rmin, rdimo1);\r\n\r\n\t\t\t\tplanes.forEach((p, i) => {\r\n\t\t\t\tconst tri2 = p.tri * 2;\r\n\t\t\t\tconst inf1 = o2planes[tri2 + 0];\r\n\t\t\t\tconst inf2 = o2planes[tri2 + 1];\r\n\t\t\t\tif (i <= nl) {\r\n\t\t\t\tlmin = Math.min(inf1.p, inf2.p, lmin);\r\n\t\t\t\tlmax = Math.max(inf1.p, inf2.p, lmax);\r\n\t\t\t\t}\r\n\t\t\t\tif (i >= nr) {\r\n\t\t\t\trmin = Math.min(inf1.p, inf2.p, rmin);\r\n\t\t\t\trmax = Math.max(inf1.p, inf2.p, rmax);\r\n\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tldimo2 = Math.min(lmax - lmin, ldimo2);\r\n\t\t\t\trdimo2 = Math.min(rmax - rmin, rdimo2);\r\n\t\t\t\t*/\r\n\r\n\t\t\t\t// surface areas and cost\r\n\t\t\t\tconst sal = 2 * ( ldimo1 * ldimo2 + ldimo1 * ldim + ldimo2 * ldim );\r\n\t\t\t\tconst sar = 2 * ( rdimo1 * rdimo2 + rdimo1 * rdim + rdimo2 * rdim );\r\n\t\t\t\tconst cost = getCost( sa, sal, nl, sar, nr );\r\n\r\n\t\t\t\tif ( cost < bestCost ) {\r\n\r\n\t\t\t\t\taxis = i;\r\n\t\t\t\t\tpos = pinfo.p;\r\n\t\t\t\t\tbestCost = cost;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { axis, pos };\r\n\r\n}\r\n\r\n// returns the average coordinate on the specified axis of the all the provided triangles\r\nfunction getAverage( triangleBounds, offset, count, axis ) {\r\n\r\n\tlet avg = 0;\r\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\tavg += triangleBounds[ i * 6 + axis * 2 ];\r\n\r\n\t}\r\n\r\n\treturn avg / count;\r\n\r\n}\r\n\r\nfunction computeSAHPlanes( triangleBounds ) {\r\n\r\n\tconst triCount = triangleBounds.length / 6;\r\n\tconst sahPlanes = [ new Array( triCount ), new Array( triCount ), new Array( triCount ) ];\r\n\tfor ( let tri = 0; tri < triCount; tri ++ ) {\r\n\r\n\t\tfor ( let el = 0; el < 3; el ++ ) {\r\n\r\n\t\t\tsahPlanes[ el ][ tri ] = { p: triangleBounds[ tri * 6 + el * 2 ], tri };\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn sahPlanes;\r\n\r\n}\r\n\r\n// precomputes the bounding box for each triangle; required for quickly calculating tree splits.\r\n// result is an array of size tris.length * 6 where triangle i maps to a\r\n// [x_center, x_delta, y_center, y_delta, z_center, z_delta] tuple starting at index i * 6,\r\n// representing the center and half-extent in each dimension of triangle i\r\nfunction computeTriangleBounds( geo ) {\r\n\r\n\tconst verts = geo.attributes.position.array;\r\n\tconst index = geo.index.array;\r\n\tconst triCount = index.length / 3;\r\n\tconst triangleBounds = new Float32Array( triCount * 6 );\r\n\r\n\tfor ( let tri = 0; tri < triCount; tri ++ ) {\r\n\r\n\t\tconst tri3 = tri * 3;\r\n\t\tconst tri6 = tri * 6;\r\n\t\tconst ai = index[ tri3 + 0 ] * 3;\r\n\t\tconst bi = index[ tri3 + 1 ] * 3;\r\n\t\tconst ci = index[ tri3 + 2 ] * 3;\r\n\r\n\t\tfor ( let el = 0; el < 3; el ++ ) {\r\n\r\n\t\t\tconst a = verts[ ai + el ];\r\n\t\t\tconst b = verts[ bi + el ];\r\n\t\t\tconst c = verts[ ci + el ];\r\n\r\n\t\t\tlet min = a;\r\n\t\t\tif ( b < min ) min = b;\r\n\t\t\tif ( c < min ) min = c;\r\n\r\n\t\t\tlet max = a;\r\n\t\t\tif ( b > max ) max = b;\r\n\t\t\tif ( c > max ) max = c;\r\n\r\n\t\t\t// Increase the bounds size by float32 epsilon to avoid precision errors when\r\n\t\t\t// converting to 32 bit float. Scale the epsilon by the size of the numbers being\r\n\t\t\t// worked with.\r\n\t\t\tconst halfExtents = ( max - min ) / 2;\r\n\t\t\tconst el2 = el * 2;\r\n\t\t\ttriangleBounds[ tri6 + el2 + 0 ] = min + halfExtents;\r\n\t\t\ttriangleBounds[ tri6 + el2 + 1 ] = halfExtents + ( Math.abs( min ) + halfExtents ) * FLOAT32_EPSILON;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn triangleBounds;\r\n\r\n}\r\n\r\nexport function buildTree( geo, options ) {\r\n\r\n\t// either recursively splits the given node, creating left and right subtrees for it, or makes it a leaf node,\r\n\t// recording the offset and count of its triangles and writing them into the reordered geometry index.\r\n\tfunction splitNode( node, offset, count, centroidBoundingData = null, depth = 0 ) {\r\n\r\n\t\tif ( ! reachedMaxDepth && depth >= maxDepth ) {\r\n\r\n\t\t\treachedMaxDepth = true;\r\n\t\t\tif ( verbose ) {\r\n\r\n\t\t\t\tconsole.warn( `MeshBVH: Max depth of ${ maxDepth } reached when generating BVH. Consider increasing maxDepth.` );\r\n\t\t\t\tconsole.warn( this, geo );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// early out if we've met our capacity\r\n\t\tif ( count <= maxLeafTris || depth >= maxDepth ) {\r\n\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\t\t\treturn node;\r\n\r\n\t\t}\r\n\r\n\t\t// Find where to split the volume\r\n\t\tconst split = getOptimalSplit( node.boundingData, centroidBoundingData, triangleBounds, sahPlanes, offset, count, strategy );\r\n\t\tif ( split.axis === - 1 ) {\r\n\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\t\t\treturn node;\r\n\r\n\t\t}\r\n\r\n\t\tconst splitOffset = partition( indexArray, triangleBounds, sahPlanes, offset, count, split );\r\n\r\n\t\t// create the two new child nodes\r\n\t\tif ( splitOffset === offset || splitOffset === offset + count ) {\r\n\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnode.splitAxis = split.axis;\r\n\r\n\t\t\t// create the left child and compute its bounding box\r\n\t\t\tconst left = new MeshBVHNode();\r\n\t\t\tconst lstart = offset;\r\n\t\t\tconst lcount = splitOffset - offset;\r\n\t\t\tnode.left = left;\r\n\t\t\tleft.boundingData = new Float32Array( 6 );\r\n\r\n\t\t\tif ( lazyGeneration ) {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, lstart, lcount, left.boundingData );\r\n\t\t\t\tleft.continueGeneration = function () {\r\n\r\n\t\t\t\t\tdelete this.continueGeneration;\r\n\t\t\t\t\tgetCentroidBounds( triangleBounds, lstart, lcount, cacheCentroidBoundingData );\r\n\t\t\t\t\tsplitNode( left, lstart, lcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, lstart, lcount, left.boundingData, cacheCentroidBoundingData );\r\n\t\t\t\tsplitNode( left, lstart, lcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// repeat for right\r\n\t\t\tconst right = new MeshBVHNode();\r\n\t\t\tconst rstart = splitOffset;\r\n\t\t\tconst rcount = count - lcount;\r\n\t\t\tnode.right = right;\r\n\t\t\tright.boundingData = new Float32Array( 6 );\r\n\r\n\t\t\tif ( lazyGeneration ) {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, rstart, rcount, right.boundingData );\r\n\t\t\t\tright.continueGeneration = function () {\r\n\r\n\t\t\t\t\tdelete this.continueGeneration;\r\n\t\t\t\t\tgetCentroidBounds( triangleBounds, rstart, rcount, cacheCentroidBoundingData );\r\n\t\t\t\t\tsplitNode( right, rstart, rcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, rstart, rcount, right.boundingData, cacheCentroidBoundingData );\r\n\t\t\t\tsplitNode( right, rstart, rcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn node;\r\n\r\n\t}\r\n\r\n\tensureIndex( geo );\r\n\r\n\tconst cacheCentroidBoundingData = new Float32Array( 6 );\r\n\tconst triangleBounds = computeTriangleBounds( geo );\r\n\tconst sahPlanes = options.strategy === SAH ? computeSAHPlanes( triangleBounds ) : null;\r\n\tconst indexArray = geo.index.array;\r\n\tconst maxDepth = options.maxDepth;\r\n\tconst verbose = options.verbose;\r\n\tconst maxLeafTris = options.maxLeafTris;\r\n\tconst strategy = options.strategy;\r\n\tconst lazyGeneration = options.lazyGeneration;\r\n\tlet reachedMaxDepth = false;\r\n\r\n\tconst roots = [];\r\n\tconst ranges = getRootIndexRanges( geo );\r\n\r\n\tif ( ranges.length === 1 ) {\r\n\r\n\t\tconst root = new MeshBVHNode();\r\n\t\tconst range = ranges[ 0 ];\r\n\r\n\t\tif ( geo.boundingBox != null ) {\r\n\r\n\t\t\troot.boundingData = boxToArray( geo.boundingBox );\r\n\t\t\tgetCentroidBounds( triangleBounds, range.offset, range.count, cacheCentroidBoundingData );\r\n\r\n\t\t} else {\r\n\r\n\t\t\troot.boundingData = new Float32Array( 6 );\r\n\t\t\tgetBounds( triangleBounds, range.offset, range.count, root.boundingData, cacheCentroidBoundingData );\r\n\r\n\t\t}\r\n\r\n\t\tsplitNode( root, range.offset, range.count, cacheCentroidBoundingData );\r\n\t\troots.push( root );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( let range of ranges ) {\r\n\r\n\t\t\tconst root = new MeshBVHNode();\r\n\t\t\troot.boundingData = new Float32Array( 6 );\r\n\t\t\tgetBounds( triangleBounds, range.offset, range.count, root.boundingData, cacheCentroidBoundingData );\r\n\r\n\t\t\tsplitNode( root, range.offset, range.count, cacheCentroidBoundingData );\r\n\t\t\troots.push( root );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// if the geometry doesn't have a bounding box, then let's politely populate it using\r\n\t// the work we did to determine the BVH root bounds\r\n\tif ( geo.boundingBox == null ) {\r\n\r\n\t\tconst rootBox = new Box3();\r\n\t\tgeo.boundingBox = new Box3();\r\n\r\n\t\tfor ( let root of roots ) {\r\n\r\n\t\t\tgeo.boundingBox.union( arrayToBox( root.boundingData, rootBox ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn roots;\r\n\r\n}\r\n","import { Vector3 } from 'three';\r\n\r\nexport class SeparatingAxisBounds {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.min = Infinity;\r\n\t\tthis.max = - Infinity;\r\n\r\n\t}\r\n\r\n\tsetFromPointsField( points, field ) {\r\n\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst p = points[ i ];\r\n\t\t\tconst val = p[ field ];\r\n\t\t\tmin = Math.min( val, min );\r\n\t\t\tmax = Math.max( val, max );\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\r\n\t}\r\n\r\n\tsetFromPoints( axis, points ) {\r\n\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst p = points[ i ];\r\n\t\t\tconst val = axis.dot( p );\r\n\t\t\tmin = Math.min( val, min );\r\n\t\t\tmax = Math.max( val, max );\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\t}\r\n\r\n\tisSeparated( other ) {\r\n\r\n\t\treturn this.min > other.max || other.min > this.max;\r\n\r\n\t}\r\n\r\n}\r\n\r\nSeparatingAxisBounds.prototype.setFromBox = ( function () {\r\n\r\n\tconst p = new Vector3();\r\n\treturn function setFromBox( axis, box ) {\r\n\r\n\t\tconst boxMin = box.min;\r\n\t\tconst boxMax = box.max;\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\r\n\r\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\r\n\r\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\r\n\r\n\t\t\t\t\tp.x = boxMin.x * x + boxMax.x * ( 1 - x );\r\n\t\t\t\t\tp.y = boxMin.y * y + boxMax.y * ( 1 - y );\r\n\t\t\t\t\tp.z = boxMin.z * z + boxMax.z * ( 1 - z );\r\n\r\n\t\t\t\t\tconst val = axis.dot( p );\r\n\t\t\t\t\tmin = Math.min( val, min );\r\n\t\t\t\t\tmax = Math.max( val, max );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nexport const areIntersecting = ( function () {\r\n\r\n\tconst cacheSatBounds = new SeparatingAxisBounds();\r\n\treturn function areIntersecting( shape1, shape2 ) {\r\n\r\n\t\tconst points1 = shape1.points;\r\n\t\tconst satAxes1 = shape1.satAxes;\r\n\t\tconst satBounds1 = shape1.satBounds;\r\n\r\n\t\tconst points2 = shape2.points;\r\n\t\tconst satAxes2 = shape2.satAxes;\r\n\t\tconst satBounds2 = shape2.satBounds;\r\n\r\n\t\t// check axes of the first shape\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds1[ i ];\r\n\t\t\tconst sa = satAxes1[ i ];\r\n\t\t\tcacheSatBounds.setFromPoints( sa, points2 );\r\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\t// check axes of the second shape\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds2[ i ];\r\n\t\t\tconst sa = satAxes2[ i ];\r\n\t\t\tcacheSatBounds.setFromPoints( sa, points1 );\r\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n","import { Vector3, Vector2, Plane, Line3 } from 'three';\nexport const closestPointLineToLine = ( function () {\n\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/Line.cpp#L56\n\tconst dir1 = new Vector3();\n\tconst dir2 = new Vector3();\n\tconst v02 = new Vector3();\n\treturn function closestPointLineToLine( l1, l2, result ) {\n\n\t\tconst v0 = l1.start;\n\t\tconst v10 = dir1;\n\t\tconst v2 = l2.start;\n\t\tconst v32 = dir2;\n\n\t\tv02.subVectors( v0, v2 );\n\t\tdir1.subVectors( l1.end, l2.start );\n\t\tdir2.subVectors( l2.end, l2.start );\n\n\t\t// float d0232 = v02.Dot(v32);\n\t\tconst d0232 = v02.dot( v32 );\n\n\t\t// float d3210 = v32.Dot(v10);\n\t\tconst d3210 = v32.dot( v10 );\n\n\t\t// float d3232 = v32.Dot(v32);\n\t\tconst d3232 = v32.dot( v32 );\n\n\t\t// float d0210 = v02.Dot(v10);\n\t\tconst d0210 = v02.dot( v10 );\n\n\t\t// float d1010 = v10.Dot(v10);\n\t\tconst d1010 = v10.dot( v10 );\n\n\t\t// float denom = d1010*d3232 - d3210*d3210;\n\t\tconst denom = d1010 * d3232 - d3210 * d3210;\n\n\t\tlet d, d2;\n\t\tif ( denom !== 0 ) {\n\n\t\t\td = ( d0232 * d3210 - d0210 * d3232 ) / denom;\n\n\t\t} else {\n\n\t\t\td = 0;\n\n\t\t}\n\n\t\td2 = ( d0232 + d * d3210 ) / d3232;\n\n\t\tresult.x = d;\n\t\tresult.y = d2;\n\n\t};\n\n} )();\n\nexport const closestPointsSegmentToSegment = ( function () {\n\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/LineSegment.cpp#L187\n\tconst paramResult = new Vector2();\n\tconst temp1 = new Vector3();\n\tconst temp2 = new Vector3();\n\treturn function closestPointsSegmentToSegment( l1, l2, target1, target2 ) {\n\n\t\tclosestPointLineToLine( l1, l2, paramResult );\n\n\t\tlet d = paramResult.x;\n\t\tlet d2 = paramResult.y;\n\t\tif ( d >= 0 && d <= 1 && d2 >= 0 && d2 <= 1 ) {\n\n\t\t\tl1.at( d, target1 );\n\t\t\tl2.at( d2, target2 );\n\n\t\t\treturn;\n\n\t\t} else if ( d >= 0 && d <= 1 ) {\n\n\t\t\t// Only d2 is out of bounds.\n\t\t\tif ( d2 < 0 ) {\n\n\t\t\t\tl2.at( 0, target2 );\n\n\t\t\t} else {\n\n\t\t\t\tl2.at( 1, target2 );\n\n\t\t\t}\n\n\t\t\tl1.closestPointToPoint( target2, true, target1 );\n\t\t\treturn;\n\n\t\t} else if ( d2 >= 0 && d2 <= 1 ) {\n\n\t\t\t// Only d is out of bounds.\n\t\t\tif ( d < 0 ) {\n\n\t\t\t\tl1.at( 0, target1 );\n\n\t\t\t} else {\n\n\t\t\t\tl1.at( 1, target1 );\n\n\t\t\t}\n\n\t\t\tl2.closestPointToPoint( target1, true, target2 );\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// Both u and u2 are out of bounds.\n\t\t\tlet p;\n\t\t\tif ( d < 0 ) {\n\n\t\t\t\tp = l1.start;\n\n\t\t\t} else {\n\n\t\t\t\tp = l1.end;\n\n\t\t\t}\n\n\t\t\tlet p2;\n\t\t\tif ( d2 < 0 ) {\n\n\t\t\t\tp2 = l2.start;\n\n\t\t\t} else {\n\n\t\t\t\tp2 = l2.end;\n\n\t\t\t}\n\n\t\t\tconst closestPoint = temp1;\n\t\t\tconst closestPoint2 = temp2;\n\t\t\tl1.closestPointToPoint( p2, true, temp1 );\n\t\t\tl2.closestPointToPoint( p, true, temp2 );\n\n\t\t\tif ( closestPoint.distanceToSquared( p2 ) <= closestPoint2.distanceToSquared( p ) ) {\n\n\t\t\t\ttarget1.copy( closestPoint );\n\t\t\t\ttarget2.copy( p2 );\n\t\t\t\treturn;\n\n\t\t\t} else {\n\n\t\t\t\ttarget1.copy( p );\n\t\t\t\ttarget2.copy( closestPoint2 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n} )();\n\n\nexport const sphereIntersectTriangle = ( function () {\n\n\t// https://stackoverflow.com/questions/34043955/detect-collision-between-sphere-and-triangle-in-three-js\n\tconst closestPointTemp = new Vector3();\n\tconst projectedPointTemp = new Vector3();\n\tconst planeTemp = new Plane();\n\tconst lineTemp = new Line3();\n\treturn function sphereIntersectTriangle( sphere, triangle ) {\n\n\t\tconst { radius, center } = sphere;\n\t\tconst { a, b, c } = triangle;\n\n\t\t// phase 1\n\t\tlineTemp.start = a;\n\t\tlineTemp.end = b;\n\t\tconst closestPoint1 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint1.distanceTo( center ) <= radius ) return true;\n\n\t\tlineTemp.start = a;\n\t\tlineTemp.end = c;\n\t\tconst closestPoint2 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint2.distanceTo( center ) <= radius ) return true;\n\n\t\tlineTemp.start = b;\n\t\tlineTemp.end = c;\n\t\tconst closestPoint3 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint3.distanceTo( center ) <= radius ) return true;\n\n\t\t// phase 2\n\t\tconst plane = triangle.getPlane( planeTemp );\n\t\tconst dp = Math.abs( plane.distanceToPoint( center ) );\n\t\tif ( dp <= radius ) {\n\n\t\t\tconst pp = plane.projectPoint( center, projectedPointTemp );\n\t\t\tconst cp = triangle.containsPoint( pp );\n\t\t\tif ( cp ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n} )();\n","import { Triangle, Vector3, Line3, Sphere } from 'three';\r\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\r\nimport { closestPointsSegmentToSegment, sphereIntersectTriangle } from './MathUtilities.js';\r\n\r\nexport class SeparatingAxisTriangle extends Triangle {\r\n\r\n\tconstructor( ...args ) {\r\n\r\n\t\tsuper( ...args );\r\n\r\n\t\tthis.isSeparatingAxisTriangle = true;\r\n\t\tthis.satAxes = new Array( 4 ).fill().map( () => new Vector3() );\r\n\t\tthis.satBounds = new Array( 4 ).fill().map( () => new SeparatingAxisBounds() );\r\n\t\tthis.points = [ this.a, this.b, this.c ];\r\n\t\tthis.sphere = new Sphere();\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t}\r\n\r\n\tintersectsSphere( sphere ) {\r\n\r\n\t\treturn sphereIntersectTriangle( sphere, this );\r\n\r\n\t}\r\n\r\n}\r\n\r\nSeparatingAxisTriangle.prototype.update = ( function () {\r\n\r\n\tconst arr = new Array( 3 );\r\n\treturn function update() {\r\n\r\n\t\tconst a = this.a;\r\n\t\tconst b = this.b;\r\n\t\tconst c = this.c;\r\n\r\n\t\tarr[ 0 ] = this.a;\r\n\t\tarr[ 1 ] = this.b;\r\n\t\tarr[ 2 ] = this.c;\r\n\r\n\t\tconst satAxes = this.satAxes;\r\n\t\tconst satBounds = this.satBounds;\r\n\r\n\t\tconst axis0 = satAxes[ 0 ];\r\n\t\tconst sab0 = satBounds[ 0 ];\r\n\t\tthis.getNormal( axis0 );\r\n\t\tsab0.setFromPoints( axis0, arr );\r\n\r\n\t\tconst axis1 = satAxes[ 1 ];\r\n\t\tconst sab1 = satBounds[ 1 ];\r\n\t\taxis1.subVectors( a, b );\r\n\t\tsab1.setFromPoints( axis1, arr );\r\n\r\n\t\tconst axis2 = satAxes[ 2 ];\r\n\t\tconst sab2 = satBounds[ 2 ];\r\n\t\taxis2.subVectors( b, c );\r\n\t\tsab2.setFromPoints( axis2, arr );\r\n\r\n\t\tconst axis3 = satAxes[ 3 ];\r\n\t\tconst sab3 = satBounds[ 3 ];\r\n\t\taxis3.subVectors( c, a );\r\n\t\tsab3.setFromPoints( axis3, arr );\r\n\r\n\t\tthis.sphere.setFromPoints( this.points );\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nSeparatingAxisTriangle.prototype.closestPointToSegment = ( function () {\r\n\r\n\tconst point1 = new Vector3();\r\n\tconst point2 = new Vector3();\r\n\tconst edge = new Line3();\r\n\r\n\treturn function distanceToSegment( segment, target1 = null, target2 = null ) {\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tconst { start, end } = segment;\r\n\t\tconst points = this.points;\r\n\t\tlet distSq;\r\n\t\tlet closestDistanceSq = Infinity;\r\n\r\n\t\t// check the triangle edges\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst nexti = ( i + 1 ) % 3;\r\n\t\t\tedge.start.copy( points[ i ] );\r\n\t\t\tedge.end.copy( points[ nexti ] );\r\n\r\n\t\t\tclosestPointsSegmentToSegment( edge, segment, point1, point2 );\r\n\r\n\t\t\tdistSq = point1.distanceToSquared( point2 );\r\n\t\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = distSq;\r\n\t\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// check end points\r\n\t\tthis.closestPointToPoint( start, point1 );\r\n\t\tdistSq = start.distanceToSquared( point1 );\r\n\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\tclosestDistanceSq = distSq;\r\n\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\tif ( target2 ) target2.copy( start );\r\n\r\n\t\t}\r\n\r\n\t\tthis.closestPointToPoint( end, point1 );\r\n\t\tdistSq = end.distanceToSquared( point1 );\r\n\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\tclosestDistanceSq = distSq;\r\n\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\tif ( target2 ) target2.copy( end );\r\n\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( closestDistanceSq );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nSeparatingAxisTriangle.prototype.intersectsTriangle = ( function () {\r\n\r\n\tconst saTri2 = new SeparatingAxisTriangle();\r\n\tconst arr1 = new Array( 3 );\r\n\tconst arr2 = new Array( 3 );\r\n\tconst cachedSatBounds = new SeparatingAxisBounds();\r\n\tconst cachedSatBounds2 = new SeparatingAxisBounds();\r\n\tconst cachedAxis = new Vector3();\r\n\treturn function intersectsTriangle( other ) {\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! other.isSeparatingAxisTriangle ) {\r\n\r\n\t\t\tsaTri2.copy( other );\r\n\t\t\tsaTri2.update();\r\n\t\t\tother = saTri2;\r\n\r\n\t\t}\r\n\r\n\t\tconst satBounds1 = this.satBounds;\r\n\t\tconst satAxes1 = this.satAxes;\r\n\t\tarr2[ 0 ] = other.a;\r\n\t\tarr2[ 1 ] = other.b;\r\n\t\tarr2[ 2 ] = other.c;\r\n\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds1[ i ];\r\n\t\t\tconst sa = satAxes1[ i ];\r\n\t\t\tcachedSatBounds.setFromPoints( sa, arr2 );\r\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\tconst satBounds2 = other.satBounds;\r\n\t\tconst satAxes2 = other.satAxes;\r\n\t\tarr1[ 0 ] = this.a;\r\n\t\tarr1[ 1 ] = this.b;\r\n\t\tarr1[ 2 ] = this.c;\r\n\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds2[ i ];\r\n\t\t\tconst sa = satAxes2[ i ];\r\n\t\t\tcachedSatBounds.setFromPoints( sa, arr1 );\r\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\t// check crossed axes\r\n\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\tconst sa1 = satAxes1[ i ];\r\n\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\r\n\r\n\t\t\t\tconst sa2 = satAxes2[ i2 ];\r\n\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\r\n\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, arr1 );\r\n\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, arr2 );\r\n\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n\r\nSeparatingAxisTriangle.prototype.distanceToPoint = ( function () {\r\n\r\n\tconst target = new Vector3();\r\n\treturn function distanceToPoint( point ) {\r\n\r\n\t\tthis.closestPointToPoint( point, target );\r\n\t\treturn point.distanceTo( target );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n\r\nSeparatingAxisTriangle.prototype.distanceToTriangle = ( function () {\r\n\r\n\tconst point = new Vector3();\r\n\tconst point2 = new Vector3();\r\n\tconst cornerFields = [ 'a', 'b', 'c' ];\r\n\tconst line1 = new Line3();\r\n\tconst line2 = new Line3();\r\n\r\n\treturn function distanceToTriangle( other, target1 = null, target2 = null ) {\r\n\r\n\t\tif ( other.needsUpdate ) {\r\n\r\n\t\t\tother.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.intersectsTriangle( other ) ) {\r\n\r\n\t\t\t// TODO: This will not result in a point that lies on\r\n\t\t\t// the intersection line of the triangles\r\n\t\t\tif ( target1 || target2 ) {\r\n\r\n\t\t\t\tthis.getMidpoint( point );\r\n\t\t\t\tother.closestPointToPoint( point, point2 );\r\n\t\t\t\tthis.closestPointToPoint( point2, point );\r\n\r\n\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t\tlet closestDistanceSq = Infinity;\r\n\r\n\t\t// check all point distances\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tlet dist;\r\n\t\t\tconst field = cornerFields[ i ];\r\n\t\t\tconst otherVec = other[ field ];\r\n\t\t\tthis.closestPointToPoint( otherVec, point );\r\n\r\n\t\t\tdist = otherVec.distanceToSquared( point );\r\n\r\n\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\tif ( target2 ) target2.copy( otherVec );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tconst thisVec = this[ field ];\r\n\t\t\tother.closestPointToPoint( thisVec, point );\r\n\r\n\t\t\tdist = thisVec.distanceToSquared( point );\r\n\r\n\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\tif ( target1 ) target1.copy( thisVec );\r\n\t\t\t\tif ( target2 ) target2.copy( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst f11 = cornerFields[ i ];\r\n\t\t\tconst f12 = cornerFields[ ( i + 1 ) % 3 ];\r\n\t\t\tline1.set( this[ f11 ], this[ f12 ] );\r\n\t\t\tfor ( let i2 = 0; i2 < 3; i2 ++ ) {\r\n\r\n\t\t\t\tconst f21 = cornerFields[ i2 ];\r\n\t\t\t\tconst f22 = cornerFields[ ( i2 + 1 ) % 3 ];\r\n\t\t\t\tline2.set( other[ f21 ], other[ f22 ] );\r\n\r\n\t\t\t\tclosestPointsSegmentToSegment( line1, line2, point, point2 );\r\n\r\n\t\t\t\tconst dist = point.distanceToSquared( point2 );\r\n\t\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( closestDistanceSq );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n","import { Box3, Vector3, Matrix4, Sphere, Line3 } from 'three';\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\nimport { SeparatingAxisTriangle } from './SeparatingAxisTriangle.js';\nimport { closestPointsSegmentToSegment } from './MathUtilities.js';\n\nexport class OrientedBox extends Box3 {\n\n\tconstructor( ...args ) {\n\n\t\tsuper( ...args );\n\n\t\tthis.isOrientedBox = true;\n\t\tthis.matrix = new Matrix4();\n\t\tthis.invMatrix = new Matrix4();\n\t\tthis.points = new Array( 8 ).fill().map( () => new Vector3() );\n\t\tthis.satAxes = new Array( 3 ).fill().map( () => new Vector3() );\n\t\tthis.satBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.alignedSatBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.sphere = new Sphere();\n\n\t}\n\n\tset( min, max, matrix ) {\n\n\t\tsuper.set( min, max );\n\t\tthis.matrix = matrix;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tsuper.copy( other );\n\t\tthis.matrix.copy( other.matrix );\n\n\t}\n\n}\n\nOrientedBox.prototype.update = ( function () {\n\n\treturn function update() {\n\n\t\tconst matrix = this.matrix;\n\t\tconst min = this.min;\n\t\tconst max = this.max;\n\n\t\tconst points = this.points;\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tconst i = ( ( 1 << 0 ) * x ) | ( ( 1 << 1 ) * y ) | ( ( 1 << 2 ) * z );\n\t\t\t\t\tconst v = points[ i ];\n\t\t\t\t\tv.x = x ? max.x : min.x;\n\t\t\t\t\tv.y = y ? max.y : min.y;\n\t\t\t\t\tv.z = z ? max.z : min.z;\n\n\t\t\t\t\tv.applyMatrix4( matrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.sphere.setFromPoints( this.points );\n\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\t\tconst minVec = points[ 0 ];\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst axis = satAxes[ i ];\n\t\t\tconst sb = satBounds[ i ];\n\t\t\tconst index = 1 << i;\n\t\t\tconst pi = points[ index ];\n\n\t\t\taxis.subVectors( minVec, pi );\n\t\t\tsb.setFromPoints( axis, points );\n\n\t\t}\n\n\t\tconst alignedSatBounds = this.alignedSatBounds;\n\t\talignedSatBounds[ 0 ].setFromPointsField( points, 'x' );\n\t\talignedSatBounds[ 1 ].setFromPointsField( points, 'y' );\n\t\talignedSatBounds[ 2 ].setFromPointsField( points, 'z' );\n\n\t\tthis.invMatrix.copy( this.matrix ).invert();\n\n\t};\n\n} )();\n\nOrientedBox.prototype.intersectsBox = ( function () {\n\n\tconst aabbBounds = new SeparatingAxisBounds();\n\treturn function intersectsBox( box ) {\n\n\t\tif ( ! box.intersectsSphere( this.sphere ) ) return false;\n\n\t\tconst min = box.min;\n\t\tconst max = box.max;\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\t\tconst alignedSatBounds = this.alignedSatBounds;\n\n\t\taabbBounds.min = min.x;\n\t\taabbBounds.max = max.x;\n\t\tif ( alignedSatBounds[ 0 ].isSeparated( aabbBounds ) ) return false;\n\n\t\taabbBounds.min = min.y;\n\t\taabbBounds.max = max.y;\n\t\tif ( alignedSatBounds[ 1 ].isSeparated( aabbBounds ) ) return false;\n\n\t\taabbBounds.min = min.z;\n\t\taabbBounds.max = max.z;\n\t\tif ( alignedSatBounds[ 2 ].isSeparated( aabbBounds ) ) return false;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst axis = satAxes[ i ];\n\t\t\tconst sb = satBounds[ i ];\n\t\t\taabbBounds.setFromBox( axis, box );\n\t\t\tif ( sb.isSeparated( aabbBounds ) ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.intersectsTriangle = ( function () {\n\n\tconst saTri = new SeparatingAxisTriangle();\n\tconst pointsArr = new Array( 3 );\n\tconst cachedSatBounds = new SeparatingAxisBounds();\n\tconst cachedSatBounds2 = new SeparatingAxisBounds();\n\tconst cachedAxis = new Vector3();\n\treturn function intersectsTriangle( triangle ) {\n\n\t\tif ( ! triangle.isSeparatingAxisTriangle ) {\n\n\t\t\tsaTri.copy( triangle );\n\t\t\tsaTri.update();\n\t\t\ttriangle = saTri;\n\n\t\t} else if ( triangle.needsUpdate ) {\n\n\t\t\ttriangle.update();\n\n\t\t}\n\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\n\t\tpointsArr[ 0 ] = triangle.a;\n\t\tpointsArr[ 1 ] = triangle.b;\n\t\tpointsArr[ 2 ] = triangle.c;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = satBounds[ i ];\n\t\t\tconst sa = satAxes[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, pointsArr );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t}\n\n\t\tconst triSatBounds = triangle.satBounds;\n\t\tconst triSatAxes = triangle.satAxes;\n\t\tconst points = this.points;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = triSatBounds[ i ];\n\t\t\tconst sa = triSatAxes[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, points );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t}\n\n\t\t// check crossed axes\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sa1 = satAxes[ i ];\n\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\n\n\t\t\t\tconst sa2 = triSatAxes[ i2 ];\n\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\n\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, pointsArr );\n\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, points );\n\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.closestPointToPoint = ( function () {\n\n\treturn function closestPointToPoint( point, target1 ) {\n\n\t\ttarget1\n\t\t\t.copy( point )\n\t\t\t.applyMatrix4( this.invMatrix )\n\t\t\t.clamp( this.min, this.max )\n\t\t\t.applyMatrix4( this.matrix );\n\n\t\treturn target1;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.distanceToPoint = ( function () {\n\n\tconst target = new Vector3();\n\treturn function distanceToPoint( point ) {\n\n\t\tthis.closestPointToPoint( point, target );\n\t\treturn point.distanceTo( target );\n\n\t};\n\n} )();\n\n\nOrientedBox.prototype.distanceToBox = ( function () {\n\n\tconst xyzFields = [ 'x', 'y', 'z' ];\n\tconst segments1 = new Array( 12 ).fill().map( () => new Line3() );\n\tconst segments2 = new Array( 12 ).fill().map( () => new Line3() );\n\n\tconst point1 = new Vector3();\n\tconst point2 = new Vector3();\n\n\treturn function distanceToBox( box, threshold = 0, target1 = null, target2 = null ) {\n\n\t\tif ( this.intersectsBox( box ) ) {\n\n\t\t\tif ( target1 || target2 ) {\n\n\t\t\t\tbox.getCenter( point2 );\n\t\t\t\tthis.closestPointToPoint( point2, point1 );\n\t\t\t\tbox.closestPointToPoint( point1, point2 );\n\n\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t}\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tconst threshold2 = threshold * threshold;\n\t\tconst min = box.min;\n\t\tconst max = box.max;\n\t\tconst points = this.points;\n\n\n\t\t// iterate over every edge and compare distances\n\t\tlet closestDistanceSq = Infinity;\n\n\t\t// check over all these points\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst p = points[ i ];\n\t\t\tpoint2.copy( p ).clamp( min, max );\n\n\t\t\tconst dist = p.distanceToSquared( point2 );\n\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\tif ( target1 ) target1.copy( p );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate and check all line segment distances\n\t\tlet count = 0;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let i1 = 0; i1 <= 1; i1 ++ ) {\n\n\t\t\t\tfor ( let i2 = 0; i2 <= 1; i2 ++ ) {\n\n\t\t\t\t\tconst nextIndex = ( i + 1 ) % 3;\n\t\t\t\t\tconst nextIndex2 = ( i + 2 ) % 3;\n\n\t\t\t\t\t// get obb line segments\n\t\t\t\t\tconst index = i1 << nextIndex | i2 << nextIndex2;\n\t\t\t\t\tconst index2 = 1 << i | i1 << nextIndex | i2 << nextIndex2;\n\t\t\t\t\tconst p1 = points[ index ];\n\t\t\t\t\tconst p2 = points[ index2 ];\n\t\t\t\t\tconst line1 = segments1[ count ];\n\t\t\t\t\tline1.set( p1, p2 );\n\n\n\t\t\t\t\t// get aabb line segments\n\t\t\t\t\tconst f1 = xyzFields[ i ];\n\t\t\t\t\tconst f2 = xyzFields[ nextIndex ];\n\t\t\t\t\tconst f3 = xyzFields[ nextIndex2 ];\n\t\t\t\t\tconst line2 = segments2[ count ];\n\t\t\t\t\tconst start = line2.start;\n\t\t\t\t\tconst end = line2.end;\n\n\t\t\t\t\tstart[ f1 ] = min[ f1 ];\n\t\t\t\t\tstart[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\n\t\t\t\t\tstart[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\n\n\t\t\t\t\tend[ f1 ] = max[ f1 ];\n\t\t\t\t\tend[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\n\t\t\t\t\tend[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\n\n\t\t\t\t\tcount ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// check all the other boxes point\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tpoint2.x = x ? max.x : min.x;\n\t\t\t\t\tpoint2.y = y ? max.y : min.y;\n\t\t\t\t\tpoint2.z = z ? max.z : min.z;\n\n\t\t\t\t\tthis.closestPointToPoint( point2, point1 );\n\t\t\t\t\tconst dist = point2.distanceToSquared( point1 );\n\t\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 12; i ++ ) {\n\n\t\t\tconst l1 = segments1[ i ];\n\t\t\tfor ( let i2 = 0; i2 < 12; i2 ++ ) {\n\n\t\t\t\tconst l2 = segments2[ i2 ];\n\t\t\t\tclosestPointsSegmentToSegment( l1, l2, point1, point2 );\n\t\t\t\tconst dist = point1.distanceToSquared( point2 );\n\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Math.sqrt( closestDistanceSq );\n\n\t};\n\n} )();\n","// sets the vertices of triangle `tri` with the 3 vertices after i\r\nexport function setTriangle( tri, i, index, pos ) {\r\n\r\n\tconst ta = tri.a;\r\n\tconst tb = tri.b;\r\n\tconst tc = tri.c;\r\n\r\n\tlet i3 = index.getX( i );\r\n\tta.x = pos.getX( i3 );\r\n\tta.y = pos.getY( i3 );\r\n\tta.z = pos.getZ( i3 );\r\n\r\n\ti3 = index.getX( i + 1 );\r\n\ttb.x = pos.getX( i3 );\r\n\ttb.y = pos.getY( i3 );\r\n\ttb.z = pos.getZ( i3 );\r\n\r\n\ti3 = index.getX( i + 2 );\r\n\ttc.x = pos.getX( i3 );\r\n\ttc.y = pos.getY( i3 );\r\n\ttc.z = pos.getZ( i3 );\r\n\r\n}\r\n","import { Vector3, Vector2, Triangle, DoubleSide, BackSide } from 'three';\r\n\r\n// Ripped and modified From THREE.js Mesh raycast\r\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L115\r\nvar vA = new Vector3();\r\nvar vB = new Vector3();\r\nvar vC = new Vector3();\r\n\r\nvar uvA = new Vector2();\r\nvar uvB = new Vector2();\r\nvar uvC = new Vector2();\r\n\r\nvar intersectionPoint = new Vector3();\r\nvar intersectionPointWorld = new Vector3();\r\n\r\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\tvar intersect;\r\n\tif ( material.side === BackSide ) {\r\n\r\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t} else {\r\n\r\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\r\n\r\n\t}\r\n\r\n\tif ( intersect === null ) return null;\r\n\r\n\tintersectionPointWorld.copy( point );\r\n\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\treturn {\r\n\t\tdistance: distance,\r\n\t\tpoint: intersectionPointWorld.clone(),\r\n\t\tobject: object\r\n\t};\r\n\r\n}\r\n\r\nfunction checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\r\n\r\n\tvA.fromBufferAttribute( position, a );\r\n\tvB.fromBufferAttribute( position, b );\r\n\tvC.fromBufferAttribute( position, c );\r\n\r\n\tvar intersection = checkIntersection( object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tif ( uv ) {\r\n\r\n\t\t\tuvA.fromBufferAttribute( uv, a );\r\n\t\t\tuvB.fromBufferAttribute( uv, b );\r\n\t\t\tuvC.fromBufferAttribute( uv, c );\r\n\r\n\t\t\tintersection.uv = Triangle.getUV( intersectionPoint, vA, vB, vC, uvA, uvB, uvC, new Vector2( ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst face = {\r\n\t\t\ta: a,\r\n\t\t\tb: b,\r\n\t\t\tc: c,\r\n\t\t\tnormal: new Vector3( ),\r\n\t\t\tmaterialIndex: 0\r\n\t\t};\r\n\r\n\t\tTriangle.getNormal( vA, vB, vC, face.normal );\r\n\r\n\t\tintersection.face = face;\r\n\t\tintersection.faceIndex = a;\r\n\r\n\t}\r\n\r\n\treturn intersection;\r\n\r\n}\r\n\r\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L258\r\nfunction intersectTri( mesh, geo, raycaster, ray, tri, intersections ) {\r\n\r\n\tconst triOffset = tri * 3;\r\n\tconst a = geo.index.getX( triOffset );\r\n\tconst b = geo.index.getX( triOffset + 1 );\r\n\tconst c = geo.index.getX( triOffset + 2 );\r\n\r\n\tconst intersection = checkBufferGeometryIntersection( mesh, raycaster, ray, geo.attributes.position, geo.attributes.uv, a, b, c );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tintersection.faceIndex = tri;\r\n\t\tif ( intersections ) intersections.push( intersection );\r\n\t\treturn intersection;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n}\r\n\r\nexport { intersectTri };\r\n","import { intersectTri } from './ThreeIntersectionUtilities.js';\r\n\r\nexport function intersectTris( mesh, geo, raycaster, ray, offset, count, intersections ) {\r\n\r\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\tintersectTri( mesh, geo, raycaster, ray, i, intersections );\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport function intersectClosestTri( mesh, geo, raycaster, ray, offset, count ) {\r\n\r\n\tlet dist = Infinity;\r\n\tlet res = null;\r\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\tconst intersection = intersectTri( mesh, geo, raycaster, ray, i );\r\n\t\tif ( intersection && intersection.distance < dist ) {\r\n\r\n\t\t\tres = intersection;\r\n\t\t\tdist = intersection.distance;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn res;\r\n\r\n};\r\n","\r\nimport { Box3, Vector3, Mesh, Matrix4 } from 'three';\r\nimport { intersectTris, intersectClosestTri } from './Utils/RayIntersectTriUtlities.js';\r\nimport { arrayToBox } from './Utils/ArrayBoxUtilities.js';\r\nimport { OrientedBox } from './Utils/OrientedBox.js';\r\nimport { setTriangle } from './Utils/TriangleUtils.js';\r\nimport { SeparatingAxisTriangle } from './Utils/SeparatingAxisTriangle.js';\r\nimport { CONTAINED } from './Constants.js';\r\n\r\nconst boundingBox = new Box3();\r\nconst boxIntersection = new Vector3();\r\nconst xyzFields = [ 'x', 'y', 'z' ];\r\n\r\nfunction intersectRay( node, ray, target ) {\r\n\r\n\tarrayToBox( node.boundingData, boundingBox );\r\n\r\n\treturn ray.intersectBox( boundingBox, target );\r\n\r\n}\r\n\r\nexport function raycast( node, mesh, raycaster, ray, intersects ) {\r\n\r\n\tif ( node.continueGeneration ) {\r\n\r\n\t\tnode.continueGeneration();\r\n\r\n\t}\r\n\r\n\tconst isLeaf = ! ! node.count;\r\n\tif ( isLeaf ) {\r\n\r\n\t\tintersectTris( mesh, mesh.geometry, raycaster, ray, node.offset, node.count, intersects );\r\n\r\n\t} else {\r\n\r\n\t\tif ( intersectRay( node.left, ray, boxIntersection ) ) {\r\n\r\n\t\t\traycast( node.left, mesh, raycaster, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t\tif ( intersectRay( node.right, ray, boxIntersection ) ) {\r\n\r\n\t\t\traycast( node.right, mesh, raycaster, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport function raycastFirst( node, mesh, raycaster, ray ) {\r\n\r\n\tif ( node.continueGeneration ) {\r\n\r\n\t\tnode.continueGeneration();\r\n\r\n\t}\r\n\r\n\tconst isLeaf = ! ! node.count;\r\n\tif ( isLeaf ) {\r\n\r\n\t\treturn intersectClosestTri( mesh, mesh.geometry, raycaster, ray, node.offset, node.count );\r\n\r\n\t} else {\r\n\r\n\r\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\r\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\r\n\t\tconst splitAxis = node.splitAxis;\r\n\t\tconst xyzAxis = xyzFields[ splitAxis ];\r\n\t\tconst rayDir = ray.direction[ xyzAxis ];\r\n\t\tconst leftToRight = rayDir >= 0;\r\n\r\n\t\t// c1 is the child to check first\r\n\t\tlet c1, c2;\r\n\t\tif ( leftToRight ) {\r\n\r\n\t\t\tc1 = node.left;\r\n\t\t\tc2 = node.right;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tc1 = node.right;\r\n\t\t\tc2 = node.left;\r\n\r\n\t\t}\r\n\r\n\t\tconst c1Intersection = intersectRay( c1, ray, boxIntersection );\r\n\t\tconst c1Result = c1Intersection ? raycastFirst( c1, mesh, raycaster, ray ) : null;\r\n\r\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\r\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\r\n\t\tif ( c1Result ) {\r\n\r\n\t\t\t// check if the point is within the second bounds\r\n\t\t\tconst point = c1Result.point[ xyzAxis ];\r\n\t\t\tconst isOutside = leftToRight ?\r\n\t\t\t\tpoint <= c2.boundingData[ splitAxis ] :\r\n\t\t\t\tpoint >= c2.boundingData[ splitAxis + 3 ];\r\n\r\n\t\t\tif ( isOutside ) {\r\n\r\n\t\t\t\treturn c1Result;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// either there was no intersection in the first node, or there could still be a closer\r\n\t\t// intersection in the second, so check the second node and then take the better of the two\r\n\t\tconst c2Intersection = intersectRay( c2, ray, boxIntersection );\r\n\t\tconst c2Result = c2Intersection ? raycastFirst( c2, mesh, raycaster, ray ) : null;\r\n\r\n\t\tif ( c1Result && c2Result ) {\r\n\r\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn c1Result || c2Result || null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport const shapecast = ( function () {\r\n\r\n\tconst _triangle = new SeparatingAxisTriangle();\r\n\tconst _cachedBox1 = new Box3();\r\n\tconst _cachedBox2 = new Box3();\r\n\r\n\tfunction iterateOverTriangles(\r\n\t\toffset,\r\n\t\tcount,\r\n\t\tgeometry,\r\n\t\tintersectsTriangleFunc,\r\n\t\tcontained,\r\n\t\tdepth,\r\n\t\ttriangle\r\n\t) {\r\n\r\n\t\tconst index = geometry.index;\r\n\t\tconst pos = geometry.attributes.position;\r\n\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\tsetTriangle( triangle, i, index, pos );\r\n\t\t\ttriangle.needsUpdate = true;\r\n\r\n\t\t\tif ( intersectsTriangleFunc( triangle, i, i + 1, i + 2, contained, depth ) ) {\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\treturn function shapecast(\r\n\t\tnode,\r\n\t\tmesh,\r\n\t\tintersectsBoundsFunc,\r\n\t\tintersectsTriangleFunc = null,\r\n\t\tnodeScoreFunc = null,\r\n\t\tdepth = 0,\r\n\t\ttriangle = _triangle,\r\n\t\tcachedBox1 = _cachedBox1,\r\n\t\tcachedBox2 = _cachedBox2\r\n\t) {\r\n\r\n\t\t// Define these inside the function so it has access to the local variables needed\r\n\t\t// when converting to the buffer equivalents\r\n\t\tfunction getLeftOffset( node ) {\r\n\r\n\t\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t}\r\n\r\n\t\t\twhile ( ! node.count ) {\r\n\r\n\t\t\t\tnode = node.left;\r\n\t\t\t\tif ( /* skip */ node.continueGeneration ) {\r\n\r\n\t\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node.offset;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getRightEndOffset( node ) {\r\n\r\n\t\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t}\r\n\r\n\t\t\twhile ( ! node.count ) {\r\n\r\n\t\t\t\tnode = node.right;\r\n\t\t\t\tif ( /* skip */ node.continueGeneration ) {\r\n\r\n\t\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node.offset + node.count;\r\n\r\n\t\t}\r\n\r\n\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\tnode.continueGeneration();\r\n\r\n\t\t}\r\n\r\n\t\tconst isLeaf = ! ! node.count;\r\n\t\tif ( isLeaf && intersectsTriangleFunc ) {\r\n\r\n\t\t\tconst geometry = mesh.geometry;\r\n\t\t\tconst offset = node.offset;\r\n\t\t\tconst count = node.count;\r\n\t\t\treturn iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, false, depth, triangle );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst left = node.left;\r\n\t\t\tconst right = node.right;\r\n\t\t\tlet c1 = left;\r\n\t\t\tlet c2 = right;\r\n\r\n\t\t\tlet score1, score2;\r\n\t\t\tlet box1, box2;\r\n\t\t\tif ( nodeScoreFunc ) {\r\n\r\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tbox2 = cachedBox2;\r\n\r\n\t\t\t\tarrayToBox( c1.boundingData, box1 );\r\n\t\t\t\tarrayToBox( c2.boundingData, box2 );\r\n\r\n\t\t\t\tscore1 = nodeScoreFunc( box1 );\r\n\t\t\t\tscore2 = nodeScoreFunc( box2 );\r\n\r\n\t\t\t\tif ( score2 < score1 ) {\r\n\r\n\t\t\t\t\tc1 = right;\r\n\t\t\t\t\tc2 = left;\r\n\r\n\t\t\t\t\tconst temp = score1;\r\n\t\t\t\t\tscore1 = score2;\r\n\t\t\t\t\tscore2 = temp;\r\n\r\n\t\t\t\t\tbox1 = box2;\r\n\t\t\t\t\t// box2 is always set before use below\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Check box 1 intersection\r\n\t\t\tif ( ! box1 ) {\r\n\r\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tarrayToBox( c1.boundingData, box1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst isC1Leaf = ! ! c1.count;\r\n\t\t\tconst c1Intersection = intersectsBoundsFunc( box1, isC1Leaf, score1, depth + 1 );\r\n\r\n\t\t\tlet c1StopTraversal;\r\n\t\t\tif ( c1Intersection === CONTAINED ) {\r\n\r\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffset( c1 );\r\n\t\t\t\tconst end = getRightEndOffset( c1 );\r\n\t\t\t\tconst count = end - offset;\r\n\r\n\t\t\t\tc1StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tc1StopTraversal =\r\n\t\t\t\t\tc1Intersection &&\r\n\t\t\t\t\tshapecast(\r\n\t\t\t\t\t\tc1,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( c1StopTraversal ) return true;\r\n\r\n\t\t\t// Check box 2 intersection\r\n\t\t\t// cached box2 will have been overwritten by previous traversal\r\n\t\t\tbox2 = cachedBox2;\r\n\t\t\tarrayToBox( c2.boundingData, box2 );\r\n\r\n\t\t\tconst isC2Leaf = ! ! c2.count;\r\n\t\t\tconst c2Intersection = intersectsBoundsFunc( box2, isC2Leaf, score2, depth + 1 );\r\n\r\n\t\t\tlet c2StopTraversal;\r\n\t\t\tif ( c2Intersection === CONTAINED ) {\r\n\r\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffset( c2 );\r\n\t\t\t\tconst end = getRightEndOffset( c2 );\r\n\t\t\t\tconst count = end - offset;\r\n\r\n\t\t\t\tc2StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tc2StopTraversal =\r\n\t\t\t\t\tc2Intersection &&\r\n\t\t\t\t\tshapecast(\r\n\t\t\t\t\t\tc2,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( c2StopTraversal ) return true;\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nexport const intersectsGeometry = ( function () {\r\n\r\n\tconst triangle = new SeparatingAxisTriangle();\r\n\tconst triangle2 = new SeparatingAxisTriangle();\r\n\tconst cachedMesh = new Mesh();\r\n\tconst invertedMat = new Matrix4();\r\n\r\n\tconst obb = new OrientedBox();\r\n\tconst obb2 = new OrientedBox();\r\n\r\n\treturn function intersectsGeometry( node, mesh, geometry, geometryToBvh, cachedObb = null ) {\r\n\r\n\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\tnode.continueGeneration();\r\n\r\n\t\t}\r\n\r\n\t\tif ( cachedObb === null ) {\r\n\r\n\t\t\tif ( ! geometry.boundingBox ) {\r\n\r\n\t\t\t\tgeometry.computeBoundingBox();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobb.set( geometry.boundingBox.min, geometry.boundingBox.max, geometryToBvh );\r\n\t\t\tobb.update();\r\n\t\t\tcachedObb = obb;\r\n\r\n\t\t}\r\n\r\n\t\tconst isLeaf = ! ! node.count;\r\n\t\tif ( isLeaf ) {\r\n\r\n\t\t\tconst thisGeometry = mesh.geometry;\r\n\t\t\tconst thisIndex = thisGeometry.index;\r\n\t\t\tconst thisPos = thisGeometry.attributes.position;\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst pos = geometry.attributes.position;\r\n\r\n\t\t\tconst offset = node.offset;\r\n\t\t\tconst count = node.count;\r\n\r\n\t\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\r\n\t\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\r\n\t\t\t// here.\r\n\t\t\tinvertedMat.copy( geometryToBvh ).invert();\r\n\r\n\t\t\tif ( geometry.boundsTree ) {\r\n\r\n\t\t\t\tarrayToBox( node.boundingData, obb2 );\r\n\t\t\t\tobb2.matrix.copy( invertedMat );\r\n\t\t\t\tobb2.update();\r\n\r\n\t\t\t\tcachedMesh.geometry = geometry;\r\n\t\t\t\tconst res = geometry.boundsTree.shapecast( cachedMesh, box => obb2.intersectsBox( box ), function ( tri ) {\r\n\r\n\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.update();\r\n\r\n\t\t\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\t\tsetTriangle( triangle2, i, thisIndex, thisPos );\r\n\t\t\t\t\t\ttriangle2.update();\r\n\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tcachedMesh.geometry = null;\r\n\r\n\t\t\t\treturn res;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = offset * 3, l = ( count + offset * 3 ); i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\tsetTriangle( triangle, i, thisIndex, thisPos );\r\n\t\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.update();\r\n\r\n\t\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\r\n\r\n\t\t\t\t\t\tsetTriangle( triangle2, i2, index, pos );\r\n\t\t\t\t\t\ttriangle2.update();\r\n\r\n\t\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst left = node.left;\r\n\t\t\tconst right = node.right;\r\n\r\n\t\t\tarrayToBox( left.boundingData, boundingBox );\r\n\t\t\tconst leftIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometry( left, mesh, geometry, geometryToBvh, cachedObb );\r\n\r\n\t\t\tif ( leftIntersection ) return true;\r\n\r\n\r\n\t\t\tarrayToBox( right.boundingData, boundingBox );\r\n\t\t\tconst rightIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometry( right, mesh, geometry, geometryToBvh, cachedObb );\r\n\r\n\t\t\tif ( rightIntersection ) return true;\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n","// Split strategy constants\r\nexport const CENTER = 0;\r\nexport const AVERAGE = 1;\r\nexport const SAH = 2;\r\n\r\nexport const NOT_INTERSECTED = 0;\r\nexport const INTERSECTED = 1;\r\nexport const CONTAINED = 2;\r\n","\n/**************************************************************************************************\n *\n * This file is generated from castFunctions.js and scripts/generate-cast-function.mjs. Do not edit.\n *\n *************************************************************************************************/\n\nimport { Box3, Vector3, Mesh, Matrix4 } from 'three';\r\nimport { intersectTris, intersectClosestTri } from './Utils/RayIntersectTriUtlities.js';\n\nimport { OrientedBox } from './Utils/OrientedBox.js';\r\nimport { setTriangle } from './Utils/TriangleUtils.js';\r\nimport { SeparatingAxisTriangle } from './Utils/SeparatingAxisTriangle.js';\r\nimport { CONTAINED } from './Constants.js';\n\nconst boundingBox = new Box3();\r\nconst boxIntersection = new Vector3();\r\nconst xyzFields = [ 'x', 'y', 'z' ];\n\nexport function raycastBuffer( stride4Offset, mesh, raycaster, ray, intersects ) {\n\n\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\tif ( isLeaf ) {\n\n\t\tintersectTris( mesh, mesh.geometry, raycaster, ray, /* node offset */ uint32Array[ stride4Offset + 6 ], /* node count */ uint16Array[ stride2Offset + 14 ], intersects );\n\n\t} else {\n\n\t\tif ( intersectRayBuffer( /* node left */ stride4Offset + 8, float32Array, ray, boxIntersection ) ) {\n\n\t\t\traycastBuffer( /* node left */ stride4Offset + 8, mesh, raycaster, ray, intersects );\n\n\t\t}\n\n\t\tif ( intersectRayBuffer( /* node right */ uint32Array[ stride4Offset + 6 ], float32Array, ray, boxIntersection ) ) {\n\n\t\t\traycastBuffer( /* node right */ uint32Array[ stride4Offset + 6 ], mesh, raycaster, ray, intersects );\n\n\t\t}\n\n\t}\n\n}\n\nexport function raycastFirstBuffer( stride4Offset, mesh, raycaster, ray ) {\n\n\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\tif ( isLeaf ) {\n\n\t\treturn intersectClosestTri( mesh, mesh.geometry, raycaster, ray, /* node offset */ uint32Array[ stride4Offset + 6 ], /* node count */ uint16Array[ stride2Offset + 14 ] );\n\n\t} else {\n\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\r\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\r\n\t\tconst splitAxis = /* node splitAxis */ uint32Array[ stride4Offset + 7 ];\r\n\t\tconst xyzAxis = xyzFields[ splitAxis ];\r\n\t\tconst rayDir = ray.direction[ xyzAxis ];\r\n\t\tconst leftToRight = rayDir >= 0;\n\n\t\t// c1 is the child to check first\r\n\t\tlet c1, c2;\r\n\t\tif ( leftToRight ) {\n\n\t\t\tc1 = /* node left */ stride4Offset + 8;\r\n\t\t\tc2 = /* node right */ uint32Array[ stride4Offset + 6 ];\n\n\t\t} else {\n\n\t\t\tc1 = /* node right */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tc2 = /* node left */ stride4Offset + 8;\n\n\t\t}\n\n\t\tconst c1Intersection = intersectRayBuffer( c1, float32Array, ray, boxIntersection );\r\n\t\tconst c1Result = c1Intersection ? raycastFirstBuffer( c1, mesh, raycaster, ray ) : null;\n\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\r\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\r\n\t\tif ( c1Result ) {\n\n\t\t\t// check if the point is within the second bounds\r\n\t\t\tconst point = c1Result.point[ xyzAxis ];\r\n\t\t\tconst isOutside = leftToRight ?\r\n\t\t\t\tpoint <= /* c2 boundingData */ float32Array[ c2 + splitAxis ] :\r\n\t\t\t\tpoint >= /* c2 boundingData */ float32Array[ c2 + splitAxis + 3 ];\n\n\t\t\tif ( isOutside ) {\n\n\t\t\t\treturn c1Result;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// either there was no intersection in the first node, or there could still be a closer\r\n\t\t// intersection in the second, so check the second node and then take the better of the two\r\n\t\tconst c2Intersection = intersectRayBuffer( c2, float32Array, ray, boxIntersection );\r\n\t\tconst c2Result = c2Intersection ? raycastFirstBuffer( c2, mesh, raycaster, ray ) : null;\n\n\t\tif ( c1Result && c2Result ) {\n\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\n\n\t\t} else {\n\n\t\t\treturn c1Result || c2Result || null;\n\n\t\t}\n\n\t}\n\n}\n\nexport const shapecastBuffer = ( function () {\n\n\tconst _triangle = new SeparatingAxisTriangle();\r\n\tconst _cachedBox1 = new Box3();\r\n\tconst _cachedBox2 = new Box3();\n\n\tfunction iterateOverTriangles(\r\n\t\toffset,\r\n\t\tcount,\r\n\t\tgeometry,\r\n\t\tintersectsTriangleFunc,\r\n\t\tcontained,\r\n\t\tdepth,\r\n\t\ttriangle\r\n\t) {\n\n\t\tconst index = geometry.index;\r\n\t\tconst pos = geometry.attributes.position;\r\n\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\n\n\t\t\tsetTriangle( triangle, i, index, pos );\r\n\t\t\ttriangle.needsUpdate = true;\n\n\t\t\tif ( intersectsTriangleFunc( triangle, i, i + 1, i + 2, contained, depth ) ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\treturn function shapecastBuffer( stride4Offset,\r\n\t\tmesh,\r\n\t\tintersectsBoundsFunc,\r\n\t\tintersectsTriangleFunc = null,\r\n\t\tnodeScoreFunc = null,\r\n\t\tdepth = 0,\r\n\t\ttriangle = _triangle,\r\n\t\tcachedBox1 = _cachedBox1,\r\n\t\tcachedBox2 = _cachedBox2\r\n\t) {\n\n\t\t// Define these inside the function so it has access to the local variables needed\r\n\t\t// when converting to the buffer equivalents\r\n\t\tfunction getLeftOffsetBuffer( stride4Offset ) {\n\n\t\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\t\twhile ( /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff ) ) {\n\n\t\t\t\t/* node */ stride4Offset = /* node left */ stride4Offset + 8, stride2Offset = stride4Offset * 2;\n\n\t\t\t}\n\n\t\t\treturn /* node offset */ uint32Array[ stride4Offset + 6 ];\n\n\t\t}\n\n\t\tfunction getRightEndOffsetBuffer( stride4Offset ) {\n\n\t\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\t\twhile ( /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff ) ) {\n\n\t\t\t\t/* node */ stride4Offset = /* node right */ uint32Array[ stride4Offset + 6 ], stride2Offset = stride4Offset * 2;\n\n\t\t\t}\n\n\t\t\treturn /* node offset */ uint32Array[ stride4Offset + 6 ] + /* node count */ uint16Array[ stride2Offset + 14 ];\n\n\t\t}\n\n\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\t\tif ( isLeaf && intersectsTriangleFunc ) {\n\n\t\t\tconst geometry = mesh.geometry;\r\n\t\t\tconst offset = /* node offset */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tconst count = /* node count */ uint16Array[ stride2Offset + 14 ];\r\n\t\t\treturn iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, false, depth, triangle );\n\n\t\t} else {\n\n\t\t\tconst left = /* node left */ stride4Offset + 8;\r\n\t\t\tconst right = /* node right */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tlet c1 = left;\r\n\t\t\tlet c2 = right;\n\n\t\t\tlet score1, score2;\r\n\t\t\tlet box1, box2;\r\n\t\t\tif ( nodeScoreFunc ) {\n\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tbox2 = cachedBox2;\n\n\t\t\t\tarrayToBoxBuffer( /* c1 boundingData */ c1, float32Array, box1 );\r\n\t\t\t\tarrayToBoxBuffer( /* c2 boundingData */ c2, float32Array, box2 );\n\n\t\t\t\tscore1 = nodeScoreFunc( box1 );\r\n\t\t\t\tscore2 = nodeScoreFunc( box2 );\n\n\t\t\t\tif ( score2 < score1 ) {\n\n\t\t\t\t\tc1 = right;\r\n\t\t\t\t\tc2 = left;\n\n\t\t\t\t\tconst temp = score1;\r\n\t\t\t\t\tscore1 = score2;\r\n\t\t\t\t\tscore2 = temp;\n\n\t\t\t\t\tbox1 = box2;\r\n\t\t\t\t\t// box2 is always set before use below\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Check box 1 intersection\r\n\t\t\tif ( ! box1 ) {\n\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tarrayToBoxBuffer( /* c1 boundingData */ c1, float32Array, box1 );\n\n\t\t\t}\n\n\t\t\tconst isC1Leaf = ! /* c1 count */ ( uint16Array[ c1 + 15 ] !== 0xffff );\r\n\t\t\tconst c1Intersection = intersectsBoundsFunc( box1, isC1Leaf, score1, depth + 1 );\n\n\t\t\tlet c1StopTraversal;\r\n\t\t\tif ( c1Intersection === CONTAINED ) {\n\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffsetBuffer( c1 );\r\n\t\t\t\tconst end = getRightEndOffsetBuffer( c1 );\r\n\t\t\t\tconst count = end - offset;\n\n\t\t\t\tc1StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\n\n\t\t\t} else {\n\n\t\t\t\tc1StopTraversal =\r\n\t\t\t\t\tc1Intersection &&\r\n\t\t\t\t\tshapecastBuffer(\r\n\t\t\t\t\t\tc1,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( c1StopTraversal ) return true;\n\n\t\t\t// Check box 2 intersection\r\n\t\t\t// cached box2 will have been overwritten by previous traversal\r\n\t\t\tbox2 = cachedBox2;\r\n\t\t\tarrayToBoxBuffer( /* c2 boundingData */ c2, float32Array, box2 );\n\n\t\t\tconst isC2Leaf = ! /* c2 count */ ( uint16Array[ c2 + 15 ] !== 0xffff );\r\n\t\t\tconst c2Intersection = intersectsBoundsFunc( box2, isC2Leaf, score2, depth + 1 );\n\n\t\t\tlet c2StopTraversal;\r\n\t\t\tif ( c2Intersection === CONTAINED ) {\n\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffsetBuffer( c2 );\r\n\t\t\t\tconst end = getRightEndOffsetBuffer( c2 );\r\n\t\t\t\tconst count = end - offset;\n\n\t\t\t\tc2StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\n\n\t\t\t} else {\n\n\t\t\t\tc2StopTraversal =\r\n\t\t\t\t\tc2Intersection &&\r\n\t\t\t\t\tshapecastBuffer(\r\n\t\t\t\t\t\tc2,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( c2StopTraversal ) return true;\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n} )();\n\nexport const intersectsGeometryBuffer = ( function () {\n\n\tconst triangle = new SeparatingAxisTriangle();\r\n\tconst triangle2 = new SeparatingAxisTriangle();\r\n\tconst cachedMesh = new Mesh();\r\n\tconst invertedMat = new Matrix4();\n\n\tconst obb = new OrientedBox();\r\n\tconst obb2 = new OrientedBox();\n\n\treturn function intersectsGeometryBuffer( stride4Offset, mesh, geometry, geometryToBvh, cachedObb = null ) {\n\n\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\tif ( cachedObb === null ) {\n\n\t\t\tif ( ! geometry.boundingBox ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\tobb.set( geometry.boundingBox.min, geometry.boundingBox.max, geometryToBvh );\r\n\t\t\tobb.update();\r\n\t\t\tcachedObb = obb;\n\n\t\t}\n\n\t\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\t\tif ( isLeaf ) {\n\n\t\t\tconst thisGeometry = mesh.geometry;\r\n\t\t\tconst thisIndex = thisGeometry.index;\r\n\t\t\tconst thisPos = thisGeometry.attributes.position;\n\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst pos = geometry.attributes.position;\n\n\t\t\tconst offset = /* node offset */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tconst count = /* node count */ uint16Array[ stride2Offset + 14 ];\n\n\t\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\r\n\t\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\r\n\t\t\t// here.\r\n\t\t\tinvertedMat.copy( geometryToBvh ).invert();\n\n\t\t\tif ( geometry.boundsTree ) {\n\n\t\t\t\tarrayToBoxBuffer( /* node boundingData */ stride4Offset, float32Array, obb2 );\r\n\t\t\t\tobb2.matrix.copy( invertedMat );\r\n\t\t\t\tobb2.update();\n\n\t\t\t\tcachedMesh.geometry = geometry;\r\n\t\t\t\tconst res = geometry.boundsTree.shapecast( cachedMesh, box => obb2.intersectsBox( box ), function ( tri ) {\n\n\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.update();\n\n\t\t\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\n\n\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\t\tsetTriangle( triangle2, i, thisIndex, thisPos );\r\n\t\t\t\t\t\ttriangle2.update();\r\n\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t} );\r\n\t\t\t\tcachedMesh.geometry = null;\n\n\t\t\t\treturn res;\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = offset * 3, l = ( count + offset * 3 ); i < l; i += 3 ) {\n\n\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\tsetTriangle( triangle, i, thisIndex, thisPos );\r\n\t\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.update();\n\n\t\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\n\n\t\t\t\t\t\tsetTriangle( triangle2, i2, index, pos );\r\n\t\t\t\t\t\ttriangle2.update();\n\n\t\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst left = /* node left */ stride4Offset + 8;\r\n\t\t\tconst right = /* node right */ uint32Array[ stride4Offset + 6 ];\n\n\t\t\tarrayToBoxBuffer( /* left boundingData */ left, float32Array, boundingBox );\r\n\t\t\tconst leftIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometryBuffer( left, mesh, geometry, geometryToBvh, cachedObb );\n\n\t\t\tif ( leftIntersection ) return true;\n\n\t\t\tarrayToBoxBuffer( /* right boundingData */ right, float32Array, boundingBox );\r\n\t\t\tconst rightIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometryBuffer( right, mesh, geometry, geometryToBvh, cachedObb );\n\n\t\t\tif ( rightIntersection ) return true;\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n} )();\n\nfunction intersectRayBuffer( stride4Offset, array, ray, target ) {\n\n\tarrayToBoxBuffer( stride4Offset, array, boundingBox );\n\treturn ray.intersectBox( boundingBox, target );\n\n}\n\nconst bufferStack = [];\nlet _prevBuffer;\nlet _float32Array;\nlet _uint16Array;\nlet _uint32Array;\nexport function setBuffer( buffer ) {\n\n\tif ( _prevBuffer ) {\n\n\t\tbufferStack.push( _prevBuffer );\n\n\t}\n\n\t_prevBuffer = buffer;\n\t_float32Array = new Float32Array( buffer );\n\t_uint16Array = new Uint16Array( buffer );\n\t_uint32Array = new Uint32Array( buffer );\n\n}\n\nexport function clearBuffer() {\n\n\t_prevBuffer = null;\n\t_float32Array = null;\n\t_uint16Array = null;\n\t_uint32Array = null;\n\n\tif ( bufferStack.length ) {\n\n\t\tsetBuffer( bufferStack.pop() );\n\n\t}\n\n}\n\nfunction arrayToBoxBuffer( stride4Offset, array, target ) {\n\n\ttarget.min.x = array[ stride4Offset ];\n\ttarget.min.y = array[ stride4Offset + 1 ];\n\ttarget.min.z = array[ stride4Offset + 2 ];\n\n\ttarget.max.x = array[ stride4Offset + 3 ];\n\ttarget.max.y = array[ stride4Offset + 4 ];\n\ttarget.max.z = array[ stride4Offset + 5 ];\n\n}\n","import { Vector3, BufferAttribute } from 'three';\r\nimport { CENTER } from './Constants.js';\r\nimport { buildTree } from './buildFunctions.js';\r\nimport { OrientedBox } from './Utils/OrientedBox.js';\r\nimport { SeparatingAxisTriangle } from './Utils/SeparatingAxisTriangle.js';\r\nimport { setTriangle } from './Utils/TriangleUtils.js';\r\nimport {\r\n\traycast,\r\n\traycastFirst,\r\n\tshapecast,\r\n\tintersectsGeometry,\r\n} from './castFunctions.js';\r\n\r\nimport {\r\n\traycastBuffer,\r\n\traycastFirstBuffer,\r\n\tshapecastBuffer,\r\n\tintersectsGeometryBuffer,\r\n\tsetBuffer,\r\n\tclearBuffer,\r\n} from './castFunctionsBuffer.js';\r\n\r\n// boundingData  \t\t\t\t: 6 float32\r\n// right / offset \t\t\t\t: 1 uint32\r\n// splitAxis / isLeaf + count \t: 1 uint32 / 2 uint16\r\nconst BYTES_PER_NODE = 6 * 4 + 4 + 4;\r\nconst IS_LEAFNODE_FLAG = 0xFFFF;\r\nconst SKIP_GENERATION = Symbol( 'skip tree generation' );\r\n\r\nconst obb = new OrientedBox();\r\nconst temp = new Vector3();\r\nconst tri2 = new SeparatingAxisTriangle();\r\nconst temp1 = new Vector3();\r\nconst temp2 = new Vector3();\r\n\r\nexport default class MeshBVH {\r\n\r\n\tstatic serialize( bvh, geometry, copyIndexBuffer = true ) {\r\n\r\n\t\tfunction finishTree( node ) {\r\n\r\n\t\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! node.count ) {\r\n\r\n\t\t\t\tfinishTree( node.left );\r\n\t\t\t\tfinishTree( node.right );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction countNodes( node ) {\r\n\r\n\t\t\tif ( node.count ) {\r\n\r\n\t\t\t\treturn 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn 1 + countNodes( node.left ) + countNodes( node.right );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction populateBuffer( byteOffset, node ) {\r\n\r\n\t\t\tconst stride4Offset = byteOffset / 4;\r\n\t\t\tconst stride2Offset = byteOffset / 2;\r\n\t\t\tconst isLeaf = ! ! node.count;\r\n\t\t\tconst boundingData = node.boundingData;\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tfloat32Array[ stride4Offset + i ] = boundingData[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\tconst offset = node.offset;\r\n\t\t\t\tconst count = node.count;\r\n\t\t\t\tuint32Array[ stride4Offset + 6 ] = offset;\r\n\t\t\t\tuint16Array[ stride2Offset + 14 ] = count;\r\n\t\t\t\tuint16Array[ stride2Offset + 15 ] = IS_LEAFNODE_FLAG;\r\n\t\t\t\treturn byteOffset + BYTES_PER_NODE;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst left = node.left;\r\n\t\t\t\tconst right = node.right;\r\n\t\t\t\tconst splitAxis = node.splitAxis;\r\n\r\n\t\t\t\tlet nextUnusedPointer;\r\n\t\t\t\tnextUnusedPointer = populateBuffer( byteOffset + BYTES_PER_NODE, left );\r\n\r\n\t\t\t\tuint32Array[ stride4Offset + 6 ] = nextUnusedPointer / 4;\r\n\t\t\t\tnextUnusedPointer = populateBuffer( nextUnusedPointer, right );\r\n\r\n\t\t\t\tuint32Array[ stride4Offset + 7 ] = splitAxis;\r\n\t\t\t\treturn nextUnusedPointer;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet float32Array;\r\n\t\tlet uint32Array;\r\n\t\tlet uint16Array;\r\n\r\n\t\tconst roots = bvh._roots;\r\n\t\tlet rootData;\r\n\r\n\t\tif ( bvh._isPacked ) {\r\n\r\n\t\t\trootData = roots;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trootData = [];\r\n\t\t\tfor ( let i = 0; i < roots.length; i ++ ) {\r\n\r\n\t\t\t\tconst root = roots[ i ];\r\n\t\t\t\tfinishTree( root );\r\n\t\t\t\tlet nodeCount = countNodes( root );\r\n\r\n\t\t\t\tconst buffer = new ArrayBuffer( BYTES_PER_NODE * nodeCount );\r\n\t\t\t\tfloat32Array = new Float32Array( buffer );\r\n\t\t\t\tuint32Array = new Uint32Array( buffer );\r\n\t\t\t\tuint16Array = new Uint16Array( buffer );\r\n\t\t\t\tpopulateBuffer( 0, root );\r\n\t\t\t\trootData.push( buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst indexAttribute = geometry.getIndex();\r\n\t\tconst result = {\r\n\t\t\troots: rootData,\r\n\t\t\tindex: copyIndexBuffer ? indexAttribute.array.slice() : indexAttribute.array,\r\n\t\t};\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tstatic deserialize( data, geometry, setIndex = true ) {\r\n\r\n\t\tconst { index, roots } = data;\r\n\t\tconst bvh = new MeshBVH( geometry, { [ SKIP_GENERATION ]: true } );\r\n\t\tbvh._roots = roots;\r\n\t\tbvh._isPacked = true;\r\n\r\n\t\tif ( setIndex ) {\r\n\r\n\t\t\tconst indexAttribute = geometry.getIndex();\r\n\t\t\tif ( indexAttribute === null ) {\r\n\r\n\t\t\t\tconst newIndex = new BufferAttribute( data.index, 1, false );\r\n\t\t\t\tgeometry.setIndex( newIndex );\r\n\r\n\t\t\t} else if ( indexAttribute.array !== index ) {\r\n\r\n\t\t\t\tindexAttribute.array.set( index );\r\n\t\t\t\tindexAttribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn bvh;\r\n\r\n\t}\r\n\r\n\tconstructor( geo, options = {} ) {\r\n\r\n\t\tif ( ! geo.isBufferGeometry ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: Only BufferGeometries are supported.' );\r\n\r\n\t\t} else if ( geo.attributes.position.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: InterleavedBufferAttribute is not supported for the position attribute.' );\r\n\r\n\t\t} else if ( geo.index && geo.index.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.' );\r\n\r\n\t\t}\r\n\r\n\t\t// default options\r\n\t\toptions = Object.assign( {\r\n\r\n\t\t\tstrategy: CENTER,\r\n\t\t\tmaxDepth: 40,\r\n\t\t\tmaxLeafTris: 10,\r\n\t\t\tverbose: true,\r\n\t\t\tlazyGeneration: true,\r\n\r\n\t\t\t// undocumented options\r\n\r\n\t\t\t// whether to the pack the data as a buffer or not. The data\r\n\t\t\t// will not be packed if lazyGeneration is true.\r\n\t\t\tpackData: true,\r\n\r\n\t\t\t// Whether to skip generating the tree. Used for deserialization.\r\n\t\t\t[ SKIP_GENERATION ]: false\r\n\r\n\t\t}, options );\r\n\t\toptions.strategy = Math.max( 0, Math.min( 2, options.strategy ) );\r\n\r\n\t\tthis._isPacked = false;\r\n\t\tthis._roots = null;\r\n\t\tif ( ! options[ SKIP_GENERATION ] ) {\r\n\r\n\t\t\tthis._roots = buildTree( geo, options );\r\n\t\t\tif ( ! options.lazyGeneration && options.packData ) {\r\n\r\n\t\t\t\tthis._roots = MeshBVH.serialize( this, geo, false ).roots;\r\n\t\t\t\tthis._isPacked = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\ttraverse( callback, rootIndex = 0 ) {\r\n\r\n\t\tif ( this._isPacked ) {\r\n\r\n\t\t\tconst buffer = this._roots[ rootIndex ];\r\n\t\t\tconst uint32Array = new Uint32Array( buffer );\r\n\t\t\tconst uint16Array = new Uint16Array( buffer );\r\n\t\t\t_traverseBuffer( 0 );\r\n\r\n\t\t\tfunction _traverseBuffer( stride4Offset, depth = 0 ) {\r\n\r\n\t\t\t\tconst stride2Offset = stride4Offset * 2;\r\n\t\t\t\tconst isLeaf = uint16Array[ stride2Offset + 15 ];\r\n\t\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\t\tconst offset = uint32Array[ stride4Offset + 6 ];\r\n\t\t\t\t\tconst count = uint16Array[ stride2Offset + 14 ];\r\n\t\t\t\t\tcallback( depth, isLeaf, new Float32Array( buffer, stride4Offset * 4, 6 ), offset, count );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst left = stride4Offset + BYTES_PER_NODE / 4;\r\n\t\t\t\t\tconst right = uint32Array[ stride4Offset + 6 ];\r\n\t\t\t\t\tconst splitAxis = uint32Array[ stride4Offset + 7 ];\r\n\t\t\t\t\tconst stopTraversal = callback( depth, isLeaf, new Float32Array( buffer, stride4Offset * 4, 6 ), splitAxis, false );\r\n\r\n\t\t\t\t\tif ( ! stopTraversal ) {\r\n\r\n\t\t\t\t\t\t_traverseBuffer( left, depth + 1 );\r\n\t\t\t\t\t\t_traverseBuffer( right, depth + 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_traverseNode( this._roots[ rootIndex ] );\r\n\r\n\t\t\tfunction _traverseNode( node, depth = 0 ) {\r\n\r\n\t\t\t\tconst isLeaf = ! ! node.count;\r\n\t\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\t\tcallback( depth, isLeaf, node.boundingData, node.offset, node.count );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst stopTraversal = callback( depth, isLeaf, node.boundingData, node.splitAxis, ! ! node.continueGeneration );\r\n\r\n\t\t\t\t\tif ( ! stopTraversal ) {\r\n\r\n\t\t\t\t\t\tif ( node.left ) _traverseNode( node.left, depth + 1 );\r\n\t\t\t\t\t\tif ( node.right ) _traverseNode( node.right, depth + 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Core Cast Functions */\r\n\traycast( mesh, raycaster, ray, intersects ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\traycastBuffer( 0, mesh, raycaster, ray, intersects );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\traycast( root, mesh, raycaster, ray, intersects );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t}\r\n\r\n\traycastFirst( mesh, raycaster, ray ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tlet closestResult = null;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tlet result;\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\tresult = raycastFirstBuffer( 0, mesh, raycaster, ray );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult = raycastFirst( root, mesh, raycaster, ray );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( result != null && ( closestResult == null || result.distance < closestResult.distance ) ) {\r\n\r\n\t\t\t\tclosestResult = result;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t\treturn closestResult;\r\n\r\n\t}\r\n\r\n\tintersectsGeometry( mesh, geometry, geomToMesh ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tlet result = false;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\tresult = intersectsGeometryBuffer( 0, mesh, geometry, geomToMesh );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult = intersectsGeometry( root, mesh, geometry, geomToMesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( result ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tshapecast( mesh, intersectsBoundsFunc, intersectsTriangleFunc = null, orderNodesFunc = null ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tlet result = false;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\tresult = shapecastBuffer( 0, mesh, intersectsBoundsFunc, intersectsTriangleFunc, orderNodesFunc );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult = shapecast( root, mesh, intersectsBoundsFunc, intersectsTriangleFunc, orderNodesFunc );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( result ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/* Derived Cast Functions */\r\n\tintersectsBox( mesh, box, boxToMesh ) {\r\n\r\n\t\tobb.set( box.min, box.max, boxToMesh );\r\n\t\tobb.update();\r\n\r\n\t\treturn this.shapecast(\r\n\t\t\tmesh,\r\n\t\t\tbox => obb.intersectsBox( box ),\r\n\t\t\ttri => obb.intersectsTriangle( tri )\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tintersectsSphere( mesh, sphere ) {\r\n\r\n\t\treturn this.shapecast(\r\n\t\t\tmesh,\r\n\t\t\tbox => sphere.intersectsBox( box ),\r\n\t\t\ttri => tri.intersectsSphere( sphere )\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tclosestPointToGeometry( mesh, geom, geometryToBvh, target1 = null, target2 = null, minThreshold = 0, maxThreshold = Infinity ) {\r\n\r\n\t\tif ( ! geom.boundingBox ) {\r\n\r\n\t\t\tgeom.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tobb.set( geom.boundingBox.min, geom.boundingBox.max, geometryToBvh );\r\n\t\tobb.update();\r\n\r\n\t\tconst pos = geom.attributes.position;\r\n\t\tconst index = geom.index;\r\n\r\n\t\tlet tempTarget1 = null;\r\n\t\tlet tempTarget2 = null;\r\n\t\tif ( target1 ) {\r\n\r\n\t\t\ttempTarget1 = temp1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( target2 ) {\r\n\r\n\t\t\ttempTarget2 = temp2;\r\n\r\n\t\t}\r\n\r\n\t\tlet closestDistance = Infinity;\r\n\t\tthis.shapecast(\r\n\t\t\tmesh,\r\n\t\t\t( box, isLeaf, score ) => score < closestDistance && score < maxThreshold,\r\n\t\t\ttri => {\r\n\r\n\t\t\t\tif ( tri.needsUpdate ) {\r\n\r\n\t\t\t\t\ttri.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst sphere1 = tri.sphere;\r\n\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\r\n\r\n\t\t\t\t\tsetTriangle( tri2, i2, index, pos );\r\n\t\t\t\t\ttri2.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri2.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri2.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri2.sphere.setFromPoints( tri2.points );\r\n\r\n\t\t\t\t\tconst sphere2 = tri2.sphere;\r\n\t\t\t\t\tconst sphereDist = sphere2.center.distanceTo( sphere1.center ) - sphere2.radius - sphere1.radius;\r\n\t\t\t\t\tif ( sphereDist > closestDistance ) {\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttri2.update();\r\n\r\n\t\t\t\t\tconst dist = tri.distanceToTriangle( tri2, tempTarget1, tempTarget2 );\r\n\t\t\t\t\tif ( dist < closestDistance ) {\r\n\r\n\t\t\t\t\t\tif ( target1 ) {\r\n\r\n\t\t\t\t\t\t\ttarget1.copy( tempTarget1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( target2 ) {\r\n\r\n\t\t\t\t\t\t\ttarget2.copy( tempTarget2 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tclosestDistance = dist;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\r\n\t\t\t\t\tif ( dist < minThreshold ) {\r\n\r\n\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t},\r\n\t\t\tbox => obb.distanceToBox( box, Math.min( closestDistance, maxThreshold ) )\r\n\r\n\t\t);\r\n\r\n\t\treturn closestDistance;\r\n\r\n\t}\r\n\r\n\tdistanceToGeometry( mesh, geom, matrix, minThreshold, maxThreshold ) {\r\n\r\n\t\treturn this.closestPointToGeometry( mesh, geom, matrix, null, null, minThreshold, maxThreshold );\r\n\r\n\t}\r\n\r\n\tclosestPointToPoint( mesh, point, target, minThreshold = 0, maxThreshold = Infinity ) {\r\n\r\n\t\t// early out if under minThreshold\r\n\t\t// skip checking if over maxThreshold\r\n\t\t// set minThreshold = maxThreshold to quickly check if a point is within a threshold\r\n\t\t// returns Infinity if no value found\r\n\t\tlet closestDistance = Infinity;\r\n\t\tthis.shapecast(\r\n\r\n\t\t\tmesh,\r\n\t\t\t( box, isLeaf, score ) => score < closestDistance && score < maxThreshold,\r\n\t\t\ttri => {\r\n\r\n\t\t\t\ttri.closestPointToPoint( point, temp );\r\n\t\t\t\tconst dist = point.distanceTo( temp );\r\n\t\t\t\tif ( dist < closestDistance ) {\r\n\r\n\t\t\t\t\tif ( target ) {\r\n\r\n\t\t\t\t\t\ttarget.copy( temp );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tclosestDistance = dist;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( dist < minThreshold ) {\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tbox => box.distanceToPoint( point )\r\n\r\n\t\t);\r\n\r\n\t\treturn closestDistance;\r\n\r\n\t}\r\n\r\n\tdistanceToPoint( mesh, point, minThreshold, maxThreshold ) {\r\n\r\n\t\treturn this.closestPointToPoint( mesh, point, null, minThreshold, maxThreshold );\r\n\r\n\t}\r\n\r\n}\r\n","import { LineBasicMaterial, Box3Helper, Box3, Group, LineSegments } from 'three';\r\nimport { arrayToBox } from './Utils/ArrayBoxUtilities.js';\r\n\r\nconst wiremat = new LineBasicMaterial( { color: 0x00FF88, transparent: true, opacity: 0.3 } );\r\nconst boxGeom = new Box3Helper().geometry;\r\nlet boundingBox = new Box3();\r\n\r\nclass MeshBVHRootVisualizer extends Group {\r\n\r\n\tconstructor( mesh, depth = 10, group = 0 ) {\r\n\r\n\t\tsuper( 'MeshBVHRootVisualizer' );\r\n\r\n\t\tthis.depth = depth;\r\n\t\tthis._oldDepth = - 1;\r\n\t\tthis.mesh = mesh;\r\n\t\tthis._boundsTree = null;\r\n\t\tthis._group = group;\r\n\r\n\t\tthis.update();\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tthis._oldDepth = this.depth;\r\n\t\tthis._boundsTree = this.mesh.geometry.boundsTree;\r\n\r\n\t\tlet requiredChildren = 0;\r\n\t\tif ( this._boundsTree ) {\r\n\r\n\t\t\tthis._boundsTree.traverse( ( depth, isLeaf, boundingData, offsetOrSplit, countOrIsUnfinished ) => {\r\n\r\n\t\t\t\tlet isTerminal = isLeaf || countOrIsUnfinished;\r\n\r\n\t\t\t\t// Stop traversal\r\n\t\t\t\tif ( depth >= this.depth ) {\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( depth === this.depth - 1 || isTerminal ) {\r\n\r\n\t\t\t\t\tlet m = requiredChildren < this.children.length ? this.children[ requiredChildren ] : null;\r\n\t\t\t\t\tif ( ! m ) {\r\n\r\n\t\t\t\t\t\tm = new LineSegments( boxGeom, wiremat );\r\n\t\t\t\t\t\tm.raycast = () => [];\r\n\t\t\t\t\t\tthis.add( m );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trequiredChildren ++;\r\n\t\t\t\t\tarrayToBox( boundingData, boundingBox );\r\n\t\t\t\t\tboundingBox.getCenter( m.position );\r\n\t\t\t\t\tm.scale.subVectors( boundingBox.max, boundingBox.min ).multiplyScalar( 0.5 );\r\n\r\n\t\t\t\t\tif ( m.scale.x === 0 ) m.scale.x = Number.EPSILON;\r\n\t\t\t\t\tif ( m.scale.y === 0 ) m.scale.y = Number.EPSILON;\r\n\t\t\t\t\tif ( m.scale.z === 0 ) m.scale.z = Number.EPSILON;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\twhile ( this.children.length > requiredChildren ) this.remove( this.children.pop() );\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass MeshBVHVisualizer extends Group {\r\n\r\n\tconstructor( mesh, depth = 10 ) {\r\n\r\n\t\tsuper( 'MeshBVHVisualizer' );\r\n\r\n\t\tthis.depth = depth;\r\n\t\tthis.mesh = mesh;\r\n\t\tthis._roots = [];\r\n\r\n\t\tthis.update();\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tconst bvh = this.mesh.geometry.boundsTree;\r\n\t\tconst totalRoots = bvh ? bvh._roots.length : 0;\r\n\t\twhile ( this._roots.length > totalRoots ) {\r\n\r\n\t\t\tthis._roots.pop();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < totalRoots; i ++ ) {\r\n\r\n\t\t\tif ( i >= this._roots.length ) {\r\n\r\n\t\t\t\tconst root = new MeshBVHRootVisualizer( this.mesh, this.depth, i );\r\n\t\t\t\tthis.add( root );\r\n\t\t\t\tthis._roots.push( root );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlet root = this._roots[ i ];\r\n\t\t\t\troot.depth = this.depth;\r\n\t\t\t\troot.update();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdateMatrixWorld( ...args ) {\r\n\r\n\t\tthis.position.copy( this.mesh.position );\r\n\t\tthis.rotation.copy( this.mesh.rotation );\r\n\t\tthis.scale.copy( this.mesh.scale );\r\n\r\n\t\tsuper.updateMatrixWorld( ...args );\r\n\r\n\t}\r\n\r\n\tcopy( source ) {\r\n\r\n\t\tthis.depth = source.depth;\r\n\t\tthis.mesh = source.mesh;\r\n\r\n\t}\r\n\r\n\tclone() {\r\n\r\n\t\treturn new MeshBVHVisualizer( this.mesh, this.depth );\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport default MeshBVHVisualizer;\r\n","import { Box3, Vector3 } from 'three';\r\nimport { arrayToBox } from './Utils/ArrayBoxUtilities.js';\r\nconst box1 = new Box3();\r\nconst box2 = new Box3();\r\nconst vec = new Vector3();\r\n\r\nexport class MeshBVHDebug {\r\n\r\n\tconstructor( bvh, geometry ) {\r\n\r\n\t\tthis.bvh = bvh;\r\n\t\tthis.geometry = geometry;\r\n\r\n\t}\r\n\r\n\t// Returns a simple, human readable object that represents the BVH.\r\n\tgetJSONStructure() {\r\n\r\n\t\tconst { bvh } = this;\r\n\t\tconst depthStack = [];\r\n\r\n\t\tbvh.traverse( ( depth, isLeaf, boundingData, offset, count ) => {\r\n\r\n\t\t\tconst info = {\r\n\t\t\t\tbounds: arrayToBox( boundingData, new Box3() ),\r\n\t\t\t};\r\n\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\tinfo.count = count;\r\n\t\t\t\tinfo.offset = offset;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tinfo.left = null;\r\n\t\t\t\tinfo.right = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdepthStack[ depth ] = info;\r\n\r\n\t\t\t// traversal hits the left then right node\r\n\t\t\tconst parent = depthStack[ depth - 1 ];\r\n\t\t\tif ( parent ) {\r\n\r\n\t\t\t\tif ( parent.left === null ) {\r\n\r\n\t\t\t\t\tparent.left = info;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tparent.right = info;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn depthStack[ 0 ];\r\n\r\n\t}\r\n\r\n\tvalidateBounds() {\r\n\r\n\t\tconst { bvh, geometry } = this;\r\n\t\tconst depthStack = [];\r\n\t\tconst index = geometry.index;\r\n\t\tconst position = geometry.getAttribute( 'position' );\r\n\t\tlet passes = true;\r\n\r\n\t\tbvh.traverse( ( depth, isLeaf, boundingData, offset, count ) => {\r\n\r\n\t\t\tconst info = {\r\n\t\t\t\tdepth,\r\n\t\t\t\tisLeaf,\r\n\t\t\t\tboundingData,\r\n\t\t\t\toffset,\r\n\t\t\t\tcount,\r\n\t\t\t};\r\n\t\t\tdepthStack[ depth ] = info;\r\n\r\n\t\t\tarrayToBox( boundingData, box1 );\r\n\t\t\tconst parent = depthStack[ depth - 1 ];\r\n\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\t// check triangles\r\n\t\t\t\tfor ( let i = offset * 3, l = ( offset + count ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\tconst i0 = index.getX( i );\r\n\t\t\t\t\tconst i1 = index.getX( i + 1 );\r\n\t\t\t\t\tconst i2 = index.getX( i + 2 );\r\n\r\n\t\t\t\t\tlet isContained;\r\n\r\n\t\t\t\t\tvec.fromBufferAttribute( position, i0 );\r\n\t\t\t\t\tisContained = box1.containsPoint( vec );\r\n\r\n\t\t\t\t\tvec.fromBufferAttribute( position, i1 );\r\n\t\t\t\t\tisContained = isContained && box1.containsPoint( vec );\r\n\r\n\t\t\t\t\tvec.fromBufferAttribute( position, i2 );\r\n\t\t\t\t\tisContained = isContained && box1.containsPoint( vec );\r\n\r\n\t\t\t\t\tconsole.assert( isContained, 'Leaf bounds does not fully contain triangle.' );\r\n\t\t\t\t\tpasses = passes && isContained;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( parent ) {\r\n\r\n\t\t\t\t// check if my bounds fit in my parents\r\n\t\t\t\tarrayToBox( boundingData, box2 );\r\n\r\n\t\t\t\tconst isContained = box2.containsBox( box1 );\r\n\t\t\t\tconsole.assert( isContained, 'Parent bounds does not fully contain child.' );\r\n\t\t\t\tpasses = passes && isContained;\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn passes;\r\n\r\n\t}\r\n\r\n}\r\n","import { Ray, Matrix4, Mesh } from 'three';\r\nimport MeshBVH from './MeshBVH.js';\r\nimport Visualizer from './MeshBVHVisualizer.js';\r\nimport { CENTER, AVERAGE, SAH, NOT_INTERSECTED, INTERSECTED, CONTAINED } from './Constants.js';\r\nimport { getBVHExtremes, estimateMemoryInBytes } from './Utils/Debug.js';\r\nimport { MeshBVHDebug } from './MeshBVHDebug.js';\r\n\r\nconst ray = new Ray();\r\nconst tmpInverseMatrix = new Matrix4();\r\nconst origMeshRaycastFunc = Mesh.prototype.raycast;\r\n\r\nfunction acceleratedRaycast( raycaster, intersects ) {\r\n\r\n\tif ( this.geometry.boundsTree ) {\r\n\r\n\t\tif ( this.material === undefined ) return;\r\n\r\n\t\ttmpInverseMatrix.copy( this.matrixWorld ).invert();\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( tmpInverseMatrix );\r\n\r\n\t\tif ( raycaster.firstHitOnly === true ) {\r\n\r\n\t\t\tconst res = this.geometry.boundsTree.raycastFirst( this, raycaster, ray );\r\n\t\t\tif ( res ) intersects.push( res );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.geometry.boundsTree.raycast( this, raycaster, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\torigMeshRaycastFunc.call( this, raycaster, intersects );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction computeBoundsTree( options ) {\r\n\r\n\tthis.boundsTree = new MeshBVH( this, options );\r\n\treturn this.boundsTree;\r\n\r\n}\r\n\r\nfunction disposeBoundsTree() {\r\n\r\n\tthis.boundsTree = null;\r\n\r\n}\r\n\r\nexport {\r\n\tMeshBVH, Visualizer, Visualizer as MeshBVHVisualizer, MeshBVHDebug,\r\n\tacceleratedRaycast, computeBoundsTree, disposeBoundsTree,\r\n\tCENTER, AVERAGE, SAH, NOT_INTERSECTED, INTERSECTED, CONTAINED,\r\n\testimateMemoryInBytes, getBVHExtremes\r\n};\r\n","// NOTE when changing be sure to check hardcoded mask values in hub.html\nexport const Layers = {\n  // These 3 layers are hardcoded in THREE\n  CAMERA_LAYER_DEFAULT: 0,\n  CAMERA_LAYER_XR_LEFT_EYE: 1,\n  CAMERA_LAYER_XR_RIGHT_EYE: 2,\n\n  CAMERA_LAYER_REFLECTION: 3,\n  CAMERA_LAYER_INSPECT: 4,\n  CAMERA_LAYER_VIDEO_TEXTURE_TARGET: 5,\n\n  CAMERA_LAYER_THIRD_PERSON_ONLY: 6,\n  CAMERA_LAYER_FIRST_PERSON_ONLY: 7,\n  CAMERA_LAYER_UI: 8\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    mask: { default: Layers.CAMERA_LAYER_DEFAULT },\n    recursive: { default: false }\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"object3dset\", this.update);\n  },\n  update() {\n    const obj = this.el.object3D;\n    if (this.data.recursive) {\n      obj.traverse(o => (o.layers.mask = this.data.mask));\n    } else {\n      obj.layers.mask = this.data.mask;\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"object3dset\", this.update);\n  }\n});\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  src.updateMatrices();\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  if (mtrl.aoMap) mtrl.aoMap.dispose();\n  if (mtrl.metalnessMap) mtrl.metalnessMap.dispose();\n  if (mtrl.roughnessMap) mtrl.roughnessMap.dispose();\n  if (mtrl.emissiveMap) mtrl.emissiveMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    if (Array.isArray(node.material)) {\n      node.material.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n\nconst IDENTITY = new THREE.Matrix4().identity();\nconst tempMatrix4 = new THREE.Matrix4();\nconst EPSILON = 0.00000000001;\nexport function setMatrixWorld(object3D, m) {\n  if (!object3D.matrixIsModified) {\n    object3D.applyMatrix4(IDENTITY); // hack around our matrix optimizations\n  }\n  tempMatrix4.copy(object3D.matrixWorld);\n  object3D.matrixWorld.copy(m);\n  if (object3D.parent) {\n    object3D.parent.updateMatrices();\n    object3D.matrix\n      .copy(object3D.parent.matrixWorld)\n      .invert()\n      .multiply(m);\n  } else {\n    object3D.matrix.copy(m);\n  }\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\n  if (tempMatrix4.near(object3D.matrixWorld, EPSILON)) {\n    object3D.matrixWorld.copy(tempMatrix4);\n  } else {\n    object3D.childrenNeedMatrixWorldUpdate = true;\n  }\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\n// Supports the following PropertyBinding path formats:\n// uuid.propertyName\n// uuid.propertyName[propertyIndex]\n// uuid.objectName[objectIndex].propertyName[propertyIndex]\n// Does not support property bindings that use object3D names or parent nodes\nfunction cloneKeyframeTrack(sourceKeyframeTrack, cloneUUIDLookup) {\n  const { nodeName: uuid, objectName, objectIndex, propertyName, propertyIndex } = THREE.PropertyBinding.parseTrackName(\n    sourceKeyframeTrack.name\n  );\n\n  let path = \"\";\n\n  if (uuid !== undefined) {\n    const clonedUUID = cloneUUIDLookup.get(uuid);\n\n    if (clonedUUID === undefined) {\n      console.warn(`Could not find KeyframeTrack target with uuid: \"${uuid}\"`);\n    }\n\n    path += clonedUUID;\n  }\n\n  if (objectName !== undefined) {\n    path += \".\" + objectName;\n  }\n\n  if (objectIndex !== undefined) {\n    path += \"[\" + objectIndex + \"]\";\n  }\n\n  if (propertyName !== undefined) {\n    path += \".\" + propertyName;\n  }\n\n  if (propertyIndex !== undefined) {\n    path += \"[\" + propertyIndex + \"]\";\n  }\n\n  const clonedKeyframeTrack = sourceKeyframeTrack.clone();\n  clonedKeyframeTrack.name = path;\n\n  return clonedKeyframeTrack;\n}\n\nfunction cloneAnimationClip(sourceAnimationClip, cloneUUIDLookup) {\n  const clonedTracks = sourceAnimationClip.tracks.map(keyframeTrack =>\n    cloneKeyframeTrack(keyframeTrack, cloneUUIDLookup)\n  );\n  return new THREE.AnimationClip(sourceAnimationClip.name, sourceAnimationClip.duration, clonedTracks);\n}\n\nexport function cloneObject3D(source, preserveUUIDs) {\n  const cloneLookup = new Map();\n  const cloneUUIDLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, (sourceNode, clonedNode) => {\n    cloneLookup.set(sourceNode, clonedNode);\n  });\n\n  source.traverse(sourceNode => {\n    const clonedNode = cloneLookup.get(sourceNode);\n\n    if (preserveUUIDs) {\n      clonedNode.uuid = sourceNode.uuid;\n    }\n\n    cloneUUIDLookup.set(sourceNode.uuid, clonedNode.uuid);\n  });\n\n  source.traverse(sourceNode => {\n    const clonedNode = cloneLookup.get(sourceNode);\n\n    if (!clonedNode) {\n      return;\n    }\n\n    if (sourceNode.animations) {\n      clonedNode.animations = sourceNode.animations.map(animationClip =>\n        cloneAnimationClip(animationClip, cloneUUIDLookup)\n      );\n    }\n\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n\n    if ((clonedNode.isDirectionalLight || clonedNode.isSpotLight) && sourceNode.target) {\n      clonedNode.target = cloneLookup.get(sourceNode.target);\n    }\n\n    if (!sourceNode.isSkinnedMesh) return;\n\n    const sourceBones = sourceNode.skeleton.bones;\n\n    clonedNode.skeleton = sourceNode.skeleton.clone();\n\n    clonedNode.skeleton.bones = sourceBones.map(sourceBone => {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedNode.bind(clonedNode.skeleton, sourceNode.bindMatrix);\n  });\n\n  return clone;\n}\n\nexport function findNode(root, pred) {\n  let nodes = [root];\n  while (nodes.length) {\n    const node = nodes.shift();\n    if (pred(node)) return node;\n    if (node.children) nodes = nodes.concat(node.children);\n  }\n  return null;\n}\n\nexport const interpolateAffine = (function() {\n  const mat4 = new THREE.Matrix4();\n  const end = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  const start = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  const interpolated = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  return function(startMat4, endMat4, progress, outMat4) {\n    start.quaternion.setFromRotationMatrix(mat4.extractRotation(startMat4));\n    end.quaternion.setFromRotationMatrix(mat4.extractRotation(endMat4));\n    interpolated.quaternion.slerpQuaternions(start.quaternion, end.quaternion, progress);\n    interpolated.position.lerpVectors(\n      start.position.setFromMatrixColumn(startMat4, 3),\n      end.position.setFromMatrixColumn(endMat4, 3),\n      progress\n    );\n    interpolated.scale.lerpVectors(\n      start.scale.setFromMatrixScale(startMat4),\n      end.scale.setFromMatrixScale(endMat4),\n      progress\n    );\n    return outMat4.compose(\n      interpolated.position,\n      interpolated.quaternion,\n      interpolated.scale\n    );\n  };\n})();\n\nexport const squareDistanceBetween = (function() {\n  const posA = new THREE.Vector3();\n  const posB = new THREE.Vector3();\n  return function(objA, objB) {\n    objA.updateMatrices();\n    objB.updateMatrices();\n    posA.setFromMatrixColumn(objA.matrixWorld, 3);\n    posB.setFromMatrixColumn(objB.matrixWorld, 3);\n    return posA.distanceToSquared(posB);\n  };\n})();\n\nexport function isAlmostUniformVector3(v, epsilonHalf = 0.005) {\n  return Math.abs(v.x - v.y) < epsilonHalf && Math.abs(v.x - v.z) < epsilonHalf;\n}\nexport function almostEqual(a, b, epsilon = 0.01) {\n  return Math.abs(a - b) < epsilon;\n}\n\nexport const affixToWorldUp = (function() {\n  const inRotationMat4 = new THREE.Matrix4();\n  const inForward = new THREE.Vector3();\n  const outForward = new THREE.Vector3();\n  const outSide = new THREE.Vector3();\n  const worldUp = new THREE.Vector3(); // Could be called \"outUp\"\n  const v = new THREE.Vector3();\n  const inMat4Copy = new THREE.Matrix4();\n  return function affixToWorldUp(inMat4, outMat4) {\n    inRotationMat4.identity().extractRotation(inMat4Copy.copy(inMat4));\n    inForward.setFromMatrixColumn(inRotationMat4, 2).multiplyScalar(-1);\n    outForward\n      .copy(inForward)\n      .sub(v.copy(inForward).projectOnVector(worldUp.set(0, 1, 0)))\n      .normalize();\n    outSide.crossVectors(outForward, worldUp);\n    outMat4.makeBasis(outSide, worldUp, outForward.multiplyScalar(-1));\n    outMat4.scale(v.setFromMatrixScale(inMat4Copy));\n    outMat4.setPosition(v.setFromMatrixColumn(inMat4Copy, 3));\n    return outMat4;\n  };\n})();\n\nexport const calculateCameraTransformForWaypoint = (function() {\n  const upAffixedCameraTransform = new THREE.Matrix4();\n  const upAffixedWaypointTransform = new THREE.Matrix4();\n  const detachFromWorldUp = new THREE.Matrix4();\n  return function calculateCameraTransformForWaypoint(cameraTransform, waypointTransform, outMat4) {\n    affixToWorldUp(cameraTransform, upAffixedCameraTransform);\n    detachFromWorldUp\n      .copy(upAffixedCameraTransform)\n      .invert()\n      .multiply(cameraTransform);\n    affixToWorldUp(waypointTransform, upAffixedWaypointTransform);\n    outMat4.copy(upAffixedWaypointTransform).multiply(detachFromWorldUp);\n  };\n})();\n\nexport const calculateViewingDistance = (function() {\n  return function calculateViewingDistance(fov, aspect, box, center, vrMode) {\n    const halfYExtents = Math.max(Math.abs(box.max.y - center.y), Math.abs(center.y - box.min.y));\n    const halfXExtents = Math.max(Math.abs(box.max.x - center.x), Math.abs(center.x - box.min.x));\n    const halfVertFOV = THREE.MathUtils.degToRad(fov / 2);\n    const halfHorFOV = Math.atan(Math.tan(halfVertFOV) * aspect) * (vrMode ? 0.5 : 1);\n    const margin = 1.05;\n    const length1 = Math.abs((halfYExtents * margin) / Math.tan(halfVertFOV));\n    const length2 = Math.abs((halfXExtents * margin) / Math.tan(halfHorFOV));\n    const length3 = Math.abs(box.max.z - center.z) + Math.max(length1, length2);\n    const length = vrMode ? Math.max(0.25, length3) : length3;\n    return length || 1.25;\n  };\n})();\n\nexport const rotateInPlaceAroundWorldUp = (function() {\n  const inMat4Copy = new THREE.Matrix4();\n  const startRotation = new THREE.Matrix4();\n  const endRotation = new THREE.Matrix4();\n  const v = new THREE.Vector3();\n  return function rotateInPlaceAroundWorldUp(inMat4, theta, outMat4) {\n    inMat4Copy.copy(inMat4);\n    return outMat4\n      .copy(endRotation.makeRotationY(theta).multiply(startRotation.extractRotation(inMat4Copy)))\n      .scale(v.setFromMatrixScale(inMat4Copy))\n      .setPosition(v.setFromMatrixPosition(inMat4Copy));\n  };\n})();\n\nexport const childMatch = (function() {\n  const inverseParentWorld = new THREE.Matrix4();\n  const childRelativeToParent = new THREE.Matrix4();\n  const childInverse = new THREE.Matrix4();\n  const newParentMatrix = new THREE.Matrix4();\n  // transform the parent such that its child matches the target\n  return function childMatch(parent, child, target) {\n    parent.updateMatrices();\n    inverseParentWorld.copy(parent.matrixWorld).invert();\n    child.updateMatrices();\n    childRelativeToParent.multiplyMatrices(inverseParentWorld, child.matrixWorld);\n    childInverse.copy(childRelativeToParent).invert();\n    newParentMatrix.multiplyMatrices(target, childInverse);\n    setMatrixWorld(parent, newParentMatrix);\n  };\n})();\n\nexport function createPlaneBufferGeometry(width, height, widthSegments, heightSegments, flipY = true) {\n  const geometry = new THREE.PlaneBufferGeometry(width, height, widthSegments, heightSegments);\n  // Three.js seems to assume texture flipY is true for all its built in geometry\n  // but we turn this off on our texture loader since createImageBitmap in Firefox\n  // does not support flipping. Then we flip the uv for flipY = false texture.\n  if (flipY === false) {\n    const uv = geometry.getAttribute(\"uv\");\n    for (let i = 0; i < uv.count; i++) {\n      uv.setY(i, 1.0 - uv.getY(i));\n    }\n  }\n  return geometry;\n}\n\nimport { Layers } from \"../components/layers\";\n\n// This code is from three-vrm. We will likely be using that in the future and this inlined code can go away\nfunction excludeTriangles(triangles, bws, skinIndex, exclude) {\n  let count = 0;\n  if (bws != null && bws.length > 0) {\n    for (let i = 0; i < triangles.length; i += 3) {\n      const a = triangles[i];\n      const b = triangles[i + 1];\n      const c = triangles[i + 2];\n      const bw0 = bws[a];\n      const skin0 = skinIndex[a];\n\n      if (bw0[0] > 0 && exclude.includes(skin0[0])) continue;\n      if (bw0[1] > 0 && exclude.includes(skin0[1])) continue;\n      if (bw0[2] > 0 && exclude.includes(skin0[2])) continue;\n      if (bw0[3] > 0 && exclude.includes(skin0[3])) continue;\n\n      const bw1 = bws[b];\n      const skin1 = skinIndex[b];\n      if (bw1[0] > 0 && exclude.includes(skin1[0])) continue;\n      if (bw1[1] > 0 && exclude.includes(skin1[1])) continue;\n      if (bw1[2] > 0 && exclude.includes(skin1[2])) continue;\n      if (bw1[3] > 0 && exclude.includes(skin1[3])) continue;\n\n      const bw2 = bws[c];\n      const skin2 = skinIndex[c];\n      if (bw2[0] > 0 && exclude.includes(skin2[0])) continue;\n      if (bw2[1] > 0 && exclude.includes(skin2[1])) continue;\n      if (bw2[2] > 0 && exclude.includes(skin2[2])) continue;\n      if (bw2[3] > 0 && exclude.includes(skin2[3])) continue;\n\n      triangles[count++] = a;\n      triangles[count++] = b;\n      triangles[count++] = c;\n    }\n  }\n  return count;\n}\n\nfunction createErasedMesh(src, erasingBonesIndex) {\n  const dst = new THREE.SkinnedMesh(src.geometry.clone(), src.material);\n  dst.name = `${src.name}(headless)`;\n  dst.frustumCulled = src.frustumCulled;\n  dst.layers.set(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n\n  const geometry = dst.geometry;\n\n  const skinIndexAttr = geometry.getAttribute(\"skinIndex\").array;\n  const skinIndex = [];\n  for (let i = 0; i < skinIndexAttr.length; i += 4) {\n    skinIndex.push([skinIndexAttr[i], skinIndexAttr[i + 1], skinIndexAttr[i + 2], skinIndexAttr[i + 3]]);\n  }\n\n  const skinWeightAttr = geometry.getAttribute(\"skinWeight\").array;\n  const skinWeight = [];\n  for (let i = 0; i < skinWeightAttr.length; i += 4) {\n    skinWeight.push([skinWeightAttr[i], skinWeightAttr[i + 1], skinWeightAttr[i + 2], skinWeightAttr[i + 3]]);\n  }\n\n  const index = geometry.getIndex();\n  if (!index) {\n    throw new Error(\"The geometry doesn't have an index buffer\");\n  }\n  const oldTriangles = Array.from(index.array);\n\n  const count = excludeTriangles(oldTriangles, skinWeight, skinIndex, erasingBonesIndex);\n  const newTriangle = [];\n  for (let i = 0; i < count; i++) {\n    newTriangle[i] = oldTriangles[i];\n  }\n  geometry.setIndex(newTriangle);\n\n  if (src.onBeforeRender) {\n    dst.onBeforeRender = src.onBeforeRender;\n  }\n\n  dst.bind(new THREE.Skeleton(src.skeleton.bones, src.skeleton.boneInverses), new THREE.Matrix4());\n\n  return dst;\n}\n\nfunction isEraseTarget(bone) {\n  return bone.name === \"Head\" || (bone.parent && isEraseTarget(bone.parent));\n}\n\nexport function createHeadlessModelForSkinnedMesh(mesh) {\n  const eraseBoneIndexes = [];\n  mesh.skeleton.bones.forEach((bone, index) => {\n    if (isEraseTarget(bone)) eraseBoneIndexes.push(index);\n  });\n\n  if (!eraseBoneIndexes.length) {\n    mesh.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n    mesh.layers.enable(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n    return;\n  }\n\n  mesh.layers.set(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n\n  return createErasedMesh(mesh, eraseBoneIndexes);\n}\n\nexport function createModelForSkinnedMesh(mesh) {\n  return createErasedMesh(mesh, []);\n}\n\nexport const isFacingCamera = (function() {\n  const objWorldDir = new THREE.Vector3();\n  const objWorld = new THREE.Vector3();\n  const camWorld = new THREE.Vector3();\n  return function isFacingCamera(obj) {\n    const playerCamera = AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.viewingCamera;\n    playerCamera.getWorldPosition(camWorld);\n    obj.getWorldPosition(objWorld);\n    obj.getWorldDirection(objWorldDir);\n    return objWorldDir.dot(objWorld.sub(camWorld)) < 0;\n  };\n})();\n","import { isIOS as detectIOS } from \"../utils/is-mobile\";\n\nconst isIOS = detectIOS();\n\n// Disable ImageBitmap for Firefox so far because\n// createImageBitmap() with option fails on Firefox due to the bug.\n// Three.js ImageBitmapLoader passes {colorSpaceConversion: 'none'} option.\n// Without the option, the rendering result can be wrong if image file has ICC profiles.\n// See https://github.com/mrdoob/three.js/pull/21336\nconst HAS_IMAGE_BITMAP =\n  window.createImageBitmap !== undefined && /Firefox/.test(navigator.userAgent) === false && !isIOS;\nexport const TEXTURES_FLIP_Y = !HAS_IMAGE_BITMAP;\n\n// Browsers on iOS devices can crash if huge or many textures are used in a room.\n// Perhaps huge VRAM usage may cause it. We already reported it to the webkit devs.\n// Until the root issue is fixed on iOS end, we resize huge texture images in the\n// low material quality mode as workaround. It isn't a perfect solution but it\n// should mitigate the problem. Also disable image bitmap (See the above)\n// because huge textures resize + image bitmap can still even crash browsers.\n//\n// See\n//   - https://github.com/mozilla/hubs/issues/5295\n//   - https://bugs.webkit.org/show_bug.cgi?id=241478\n\nconst IOS_TEXTURE_MAX_WIDTH = 2048;\nconst IOS_TEXTURE_MAX_HEIGHT = 2048;\n\nfunction resizeIfNeeded(texture) {\n  if (!isIOS || window.APP.store.state.preferences.materialQualitySetting !== \"low\") {\n    return texture;\n  }\n\n  const image = texture.image;\n\n  // Just in case.\n  if (!image || image.width === undefined || image.height === undefined) {\n    return texture;\n  }\n\n  if (image.width <= IOS_TEXTURE_MAX_WIDTH && image.height <= IOS_TEXTURE_MAX_HEIGHT) {\n    return texture;\n  }\n\n  const conversionRatio = Math.min(IOS_TEXTURE_MAX_WIDTH / image.width, IOS_TEXTURE_MAX_HEIGHT / image.height);\n\n  const newWidth = Math.round(image.width * conversionRatio);\n  const newHeight = Math.round(image.height * conversionRatio);\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = newWidth;\n  canvas.height = newHeight;\n  const context = canvas.getContext(\"2d\");\n  context.drawImage(image, 0, 0, newWidth, newHeight);\n\n  texture.image = canvas;\n\n  if (image.close !== undefined) {\n    image.close();\n  }\n\n  texture.format = THREE.RGBAFormat;\n  texture.type = THREE.UnsignedByteType;\n  return texture;\n}\n\nexport default class HubsTextureLoader extends THREE.TextureLoader {\n  constructor(manager) {\n    super(manager);\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const callback = texture => {\n      resizeIfNeeded(texture);\n      if (onLoad) {\n        onLoad(texture);\n      }\n    };\n\n    const texture = HAS_IMAGE_BITMAP\n      ? this._loadImageBitmapTexture(url, callback, onProgress, onError)\n      : super.load(url, callback, onProgress, onError);\n\n    texture.onUpdate = function() {\n      // Delete texture data once it has been uploaded to the GPU\n      texture.image.close && texture.image.close();\n      texture.image = null;\n    };\n\n    return texture;\n  }\n\n  async loadAsync(url, onProgress) {\n    return new Promise((resolve, reject) => {\n      this.load(url, resolve, onProgress, reject);\n    });\n  }\n\n  _loadImageBitmapTexture(url, onLoad, onProgress, onError) {\n    const texture = new THREE.Texture();\n    const loader = new THREE.ImageBitmapLoader(this.manager);\n    loader.setCrossOrigin(this.crossOrigin);\n    loader.setPath(this.path);\n\n    loader.load(\n      url,\n      bitmap => {\n        texture.image = bitmap;\n        texture.needsUpdate = true;\n\n        // We close the image bitmap when it's uploaded to texture.\n        // Closed image bitmap can't be reused so we remove the cache\n        // added in ImageBitmapLoader.\n        // You can remove this line once we entirely disable THREE.Cache.\n        THREE.Cache.remove(this.manager.resolveURL(url));\n\n        if (onLoad !== undefined) {\n          onLoad(texture);\n        }\n      },\n      onProgress,\n      onError\n    );\n\n    texture.flipY = false;\n    return texture;\n  }\n}\n","import nextTick from \"../utils/next-tick\";\nimport { updateMaterials, mapMaterials, convertStandardMaterial } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nimport { disposeNode, cloneObject3D } from \"../utils/three-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { KTX2Loader } from \"three/examples/jsm/loaders/KTX2Loader\";\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader\";\nimport { BasisTextureLoader } from \"three/examples/jsm/loaders/BasisTextureLoader\";\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\n\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nclass GLTFCache {\n  cache = new Map();\n\n  set(src, gltf) {\n    this.cache.set(src, {\n      gltf,\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached gltf ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    if (cacheItem.count <= 0) {\n      cacheItem.gltf.scene.traverse(disposeNode);\n      this.cache.delete(src);\n    }\n  }\n}\nexport const gltfCache = new GLTFCache();\nconst inflightGltfs = new Map();\n\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    console.warn(`Inflator failed. \"${componentName}\" component does not exist.`);\n    return;\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n\n      if (\n        geo.attributes.position.isInterleavedBufferAttribute ||\n        (geo.index && geo.index.isInterleavedBufferAttribute)\n      ) {\n        console.warn(\"Skipping generaton of MeshBVH for interleaved geoemtry as it is not supported\");\n        return;\n      }\n\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.scene.animations,\n    scene: cloneObject3D(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\nfunction getHubsComponentsFromMaterial(node) {\n  const material = node.material;\n\n  if (!material) {\n    return null;\n  }\n\n  return getHubsComponents(material);\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function (indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n  const materialComponents = getHubsComponentsFromMaterial(node);\n\n  const nodeHasBehavior = !!entityComponents || !!materialComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that templates can be attached to the correct AFrame entity.\n  el.object3D.name = node.name;\n\n  // Set the uuid of the `THREE.Group` to match the uuid of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.uuid = node.uuid;\n  node.uuid = THREE.MathUtils.generateUUID();\n\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  if (node.morphTargetInfluences) {\n    node.parent.morphTargetInfluences = node.morphTargetInfluences;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nasync function inflateComponents(inflatedEntity, indexToEntityMap) {\n  let isFirstInflation = true;\n  const objectInflations = [];\n\n  inflatedEntity.object3D.traverse(async object3D => {\n    const objectInflation = {};\n    objectInflation.promise = new Promise(resolve => (objectInflation.resolve = resolve));\n    objectInflations.push(objectInflation);\n\n    if (!isFirstInflation) {\n      await objectInflations.shift().promise;\n    }\n    isFirstInflation = false;\n\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    function resolveNodeRefs(componentData) {\n      for (const propName in componentData) {\n        const value = componentData[propName];\n        const type = value?.__mhc_link_type;\n        if (type === \"node\" && value.index !== undefined) {\n          if (indexToEntityMap[value.index]) {\n            componentData[propName] = indexToEntityMap[value.index].object3D;\n          } else {\n            console.warn(\"inflateComponents: invalid node reference\", propName);\n            componentData[propName] = null;\n          }\n        }\n      }\n      return componentData;\n    }\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          await inflator(\n            el,\n            componentName,\n            resolveNodeRefs(entityComponents[prop]),\n            entityComponents,\n            indexToEntityMap\n          );\n        }\n      }\n    }\n\n    const materialComponents = getHubsComponentsFromMaterial(object3D);\n\n    if (materialComponents && el) {\n      for (const prop in materialComponents) {\n        if (materialComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          await inflator(\n            el,\n            componentName,\n            resolveNodeRefs(materialComponents[prop]),\n            materialComponents,\n            indexToEntityMap\n          );\n        }\n      }\n    }\n\n    objectInflation.resolve();\n  });\n\n  await objectInflations.shift().promise;\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction getHubsComponentsExtension(node) {\n  if (node.extensions && node.extensions.MOZ_hubs_components) {\n    return node.extensions.MOZ_hubs_components;\n  } else if (node.extensions && node.extensions.HUBS_components) {\n    return node.extensions.HUBS_components;\n  } else if (node.extras && node.extras.gltfExtensions && node.extras.gltfExtensions.MOZ_hubs_components) {\n    return node.extras.gltfExtensions.MOZ_hubs_components;\n  }\n}\n\n// Versions are documented here: https://github.com/mozilla/hubs/wiki/MOZ_hubs_components-Changelog\n// Make sure to update the wiki and Spoke when bumping a version\nfunction runMigration(version, json) {\n  if (version < 2) {\n    //old heightfields will be on the same node as the nav-mesh, delete those\n    const oldHeightfieldNode = json.nodes.find(node => {\n      const components = getHubsComponentsExtension(node);\n      return components && components.heightfield && components[\"nav-mesh\"];\n    });\n    if (oldHeightfieldNode) {\n      if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.MOZ_hubs_components) {\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\n      } else if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.HUBS_components) {\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\n      } else if (\n        oldHeightfieldNode.extras &&\n        oldHeightfieldNode.extras.gltfExtensions &&\n        oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components\n      ) {\n        delete oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components;\n      }\n    }\n  }\n\n  if (version < 4) {\n    // Lights prior to version 4 should treat range === 0 as if it has zero decay\n    if (json.nodes) {\n      for (const node of json.nodes) {\n        const components = getHubsComponentsExtension(node);\n\n        if (!components) {\n          continue;\n        }\n\n        const light = components[\"spot-light\"] || components[\"point-light\"];\n\n        if (light && light.range === 0) {\n          light.decay = 0;\n        }\n      }\n    }\n  }\n}\n\nlet ktxLoader;\nlet dracoLoader;\n\nclass GLTFHubsPlugin {\n  constructor(parser, jsonPreprocessor) {\n    this.parser = parser;\n    this.jsonPreprocessor = jsonPreprocessor;\n\n    // We override glTF parser textureLoader with our HubsTextureLoader for\n    // 1. Clean up the texture image related resources after it is uploaded to WebGL texture\n    // 2. Use ImageBitmapLoader if it is available. The latest official Three.js (r128) glTF loader\n    //    attempts to use ImageBitmapLoader if it is avaiable except for Firefox.\n    //    But we want to use ImageBitmapLoader even for Firefox so we need this overriding hack.\n    // But overriding the textureLoader is hacky and it can cause future potential problems\n    // especially in upstraming Three.js. So ideally we should replace this hack\n    // with the one using more proper APIs like plugin system at some point.\n    // Note: Be careful when replacing our Three.js fork with the official upstraming one that\n    //       the latest ImageBitmapLoader passes the second argument to createImageBitmap()\n    //       but currently createImageBitmap() on Firefox fails if the second argument is defined.\n    //       https://bugzilla.mozilla.org/show_bug.cgi?id=1367251\n    //       and this is the reason why the official glTF loader doesn't use ImageBitmapLoader\n    //       for Firefox. We will need a workaround for that.\n    parser.textureLoader = new HubsTextureLoader(parser.options.manager);\n  }\n\n  beforeRoot() {\n    const parser = this.parser;\n    const jsonPreprocessor = this.jsonPreprocessor;\n\n    //\n    if (jsonPreprocessor) {\n      parser.json = jsonPreprocessor(parser.json);\n    }\n\n    // Ideally Hubs components stuffs should be handled in MozHubsComponents plugin?\n    let version = 0;\n    if (\n      parser.json.extensions &&\n      parser.json.extensions.MOZ_hubs_components &&\n      parser.json.extensions.MOZ_hubs_components.hasOwnProperty(\"version\")\n    ) {\n      version = parser.json.extensions.MOZ_hubs_components.version;\n    }\n    runMigration(version, parser.json);\n\n    // Note: Here may be rewritten with the one with parser.associations\n    const nodes = parser.json.nodes;\n    if (nodes) {\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (!node.extras) {\n          node.extras = {};\n        }\n\n        node.extras.gltfIndex = i;\n      }\n    }\n  }\n\n  afterRoot(gltf) {\n    gltf.scene.traverse(object => {\n      // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n      // @TODO: Should this be fixed in the gltf loader?\n      object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n      const materialQuality = window.APP.store.state.preferences.materialQualitySetting;\n      updateMaterials(object, material => convertStandardMaterial(material, materialQuality));\n    });\n\n    // Replace animation target node name with the node uuid.\n    // I assume track name is 'nodename.property'.\n    if (gltf.animations) {\n      for (const animation of gltf.animations) {\n        for (const track of animation.tracks) {\n          const parsedPath = THREE.PropertyBinding.parseTrackName(track.name);\n          for (const scene of gltf.scenes) {\n            const node = THREE.PropertyBinding.findNode(scene, parsedPath.nodeName);\n            if (node) {\n              track.name = track.name.replace(/^[^.]*\\./, node.uuid + \".\");\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    //\n    gltf.scene.animations = gltf.animations;\n  }\n}\n\nclass GLTFHubsComponentsExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = \"MOZ_hubs_components\";\n  }\n\n  afterRoot({ scenes, parser }) {\n    const deps = [];\n\n    const resolveComponents = (gltfRootType, obj) => {\n      const idx = parser.associations.get(obj)?.[gltfRootType];\n      if (idx === undefined) return;\n      const ext = parser.json[gltfRootType][idx].extensions?.[this.name];\n      if (!ext) return;\n\n      // TODO putting this into userData is a bit silly, we should just inflate here, but entities need to be inflated first...\n      obj.userData.gltfExtensions = Object.assign(obj.userData.gltfExtensions || {}, {\n        MOZ_hubs_components: ext\n      });\n\n      for (const componentName in ext) {\n        const props = ext[componentName];\n        for (const propName in props) {\n          const value = props[propName];\n          const type = value?.__mhc_link_type;\n          if (type && value.index !== undefined) {\n            deps.push(\n              parser.getDependency(type, value.index).then(loadedDep => {\n                // TODO similar to above, this logic being spread out in multiple places is not great...\n                // Node refences are assumed to always be in the scene graph. These referneces are late-resolved in inflateComponents\n                // otherwise they will need to be updated when cloning (which happens as part of caching).\n                if (type === \"node\") return;\n\n                if (type === \"texture\" && !parser.json.textures[value.index].extensions?.MOZ_texture_rgbe) {\n                  // For now assume all non HDR textures linked in hubs components are sRGB.\n                  // We can allow this to be overriden later if needed\n                  loadedDep.encoding = THREE.sRGBEncoding;\n                }\n\n                props[propName] = loadedDep;\n\n                return loadedDep;\n              })\n            );\n          }\n        }\n      }\n    };\n\n    for (let i = 0; i < scenes.length; i++) {\n      // TODO this should be done by GLTLoader\n      parser.associations.set(scenes[i], { scenes: i });\n      scenes[i].traverse(obj => {\n        resolveComponents(\"scenes\", obj);\n        resolveComponents(\"nodes\", obj);\n        mapMaterials(obj, resolveComponents.bind(this, \"materials\"));\n      });\n    }\n\n    return Promise.all(deps);\n  }\n}\n\nclass GLTFHubsLightMapExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = \"MOZ_lightmap\";\n  }\n\n  // @TODO: Ideally we should use extendMaterialParams hook.\n  //        But the current official glTF loader doesn't fire extendMaterialParams\n  //        hook for unlit and specular-glossiness materials.\n  //        So using loadMaterial hook as workaround so far.\n  //        Cons is loadMaterial hook is fired as _invokeOne so\n  //        if other plugins defining loadMaterial is registered\n  //        there is a chance that this light map extension handler isn't called.\n  //        The glTF loader should be updated to remove the limitation.\n  loadMaterial(materialIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const materialDef = json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return null;\n    }\n\n    const extensionDef = materialDef.extensions[this.name];\n\n    const pending = [];\n\n    pending.push(parser.loadMaterial(materialIndex));\n    pending.push(parser.getDependency(\"texture\", extensionDef.index));\n\n    return Promise.all(pending).then(results => {\n      const material = results[0];\n      const lightMap = results[1];\n      material.lightMap = lightMap;\n      material.lightMapIntensity = extensionDef.intensity !== undefined ? extensionDef.intensity : 1;\n\n      // See https://github.com/mrdoob/three.js/pull/23613\n      if (material.isMeshBasicMaterial) {\n        material.lightMapIntensity *= Math.PI;\n      }\n\n      return material;\n    });\n  }\n}\n\nclass GLTFHubsTextureBasisExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = \"MOZ_HUBS_texture_basis\";\n    this.basisLoader = null;\n  }\n\n  loadTexture(textureIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n      return null;\n    }\n\n    if (this.basisLoader === null) {\n      this.basisLoader = new BasisTextureLoader(parser.options.manager).detectSupport(AFRAME.scenes[0].renderer);\n    }\n\n    if (!this.basisLoader) {\n      // @TODO: Display warning (only if the extension is in extensionsRequired)?\n      return null;\n    }\n\n    console.warn(`The ${this.name} extension is deprecated, you should use KHR_texture_basisu instead.`);\n\n    const extensionDef = textureDef.extensions[this.name];\n    const source = extensionDef.source;\n\n    return parser.loadTextureImage(textureIndex, source, this.basisLoader);\n  }\n}\n\nclass GLTFMozTextureRGBE {\n  constructor(parser, loader) {\n    this.parser = parser;\n    this.loader = loader;\n    this.name = \"MOZ_texture_rgbe\";\n  }\n\n  loadTexture(textureIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n      return null;\n    }\n\n    const extensionDef = textureDef.extensions[this.name];\n    const source = extensionDef.source;\n    return parser.loadTextureImage(textureIndex, source, this.loader).then(t => {\n      // TODO pretty severe artifacting when using mipmaps, disable for now\n      if (t.minFilter == THREE.NearestMipmapNearestFilter || t.minFilter == THREE.NearestMipmapLinearFilter) {\n        t.minFilter = THREE.NearestFilter;\n      } else if (t.minFilter == THREE.LinearMipmapNearestFilter || t.minFilter == THREE.LinearMipmapLinearFilter) {\n        t.minFilter = THREE.LinearFilter;\n      }\n      return t;\n    });\n  }\n}\n\nexport async function loadGLTF(src, contentType, onProgress, jsonPreprocessor) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType && (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\"))) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new GLTFLoader(loadingManager);\n  gltfLoader\n    .register(parser => new GLTFHubsComponentsExtension(parser))\n    .register(parser => new GLTFHubsPlugin(parser, jsonPreprocessor))\n    .register(parser => new GLTFHubsLightMapExtension(parser))\n    .register(parser => new GLTFHubsTextureBasisExtension(parser))\n    .register(parser => new GLTFMozTextureRGBE(parser, new RGBELoader().setDataType(THREE.HalfFloatType)));\n\n  // TODO some models are loaded before the renderer exists. This is likely things like the camera tool and loading cube.\n  // They don't currently use KTX textures but if they did this would be an issue. Fixing this is hard but is part of\n  // \"taking control of the render loop\" which is something we want to tackle for many reasons.\n  if (!ktxLoader && AFRAME && AFRAME.scenes && AFRAME.scenes[0]) {\n    ktxLoader = new KTX2Loader(loadingManager).detectSupport(AFRAME.scenes[0].renderer);\n  }\n  if (!dracoLoader && AFRAME && AFRAME.scenes && AFRAME.scenes[0]) {\n    dracoLoader = new DRACOLoader(loadingManager);\n  }\n\n  if (ktxLoader) {\n    gltfLoader.setKTX2Loader(ktxLoader);\n  }\n  if (dracoLoader) {\n    gltfLoader.setDRACOLoader(dracoLoader);\n  }\n\n  return new Promise((resolve, reject) => {\n    gltfLoader.load(gltfUrl, resolve, onProgress, reject);\n  }).finally(() => {\n    if (fileMap) {\n      // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n      Object.keys(fileMap).forEach(URL.revokeObjectURL);\n    }\n  });\n}\n\nexport async function loadModel(src, contentType = null, useCache = false, jsonPreprocessor = null) {\n  console.log(`Loading model ${src}`);\n  if (useCache) {\n    if (gltfCache.has(src)) {\n      gltfCache.retain(src);\n      return cloneGltf(gltfCache.get(src).gltf);\n    } else {\n      if (inflightGltfs.has(src)) {\n        const gltf = await inflightGltfs.get(src);\n        gltfCache.retain(src);\n        return cloneGltf(gltf);\n      } else {\n        const promise = loadGLTF(src, contentType, null, jsonPreprocessor);\n        inflightGltfs.set(src, promise);\n        const gltf = await promise;\n        inflightGltfs.delete(src);\n        gltfCache.set(src, gltf);\n        return cloneGltf(gltf);\n      }\n    }\n  } else {\n    return loadGLTF(src, contentType, null, jsonPreprocessor);\n  }\n}\n\nfunction resolveAsset(src) {\n  // If the src attribute is a selector, get the url from the asset item.\n  if (src && src.charAt(0) === \"#\") {\n    const assetEl = document.getElementById(src.substring(1));\n    if (assetEl) {\n      return assetEl.getAttribute(\"src\");\n    }\n  }\n  return src;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * allowed components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    // This can be set externally if a consumer wants to do some node preprocssing.\n    this.jsonPreprocessor = null;\n\n    this.loadTemplates();\n  },\n\n  play() {\n    this.el.components[\"listed-media\"] && this.el.sceneEl.emit(\"listed_media_changed\");\n  },\n\n  update() {\n    this.applySrc(resolveAsset(this.data.src), this.data.contentType);\n  },\n\n  remove() {\n    if (this.data.useCache) {\n      const src = resolveAsset(this.data.src);\n      if (src) {\n        gltfCache.release(src);\n      }\n    }\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      if (src === this.lastSrc) return;\n\n      const lastSrc = this.lastSrc;\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await loadModel(src, contentType, this.data.useCache, this.jsonPreprocessor);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene;\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(this.model.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        object3DToSet.visible = false;\n\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        await inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      if (lastSrc && this.data.useCache) {\n        gltfCache.release(lastSrc);\n      }\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      object3DToSet.visible = true;\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: object3DToSet });\n    } catch (e) {\n      gltfCache.release(src);\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer, args = {}) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage(Object.assign(args, { id, payload: data }), transfer);\n    return promise;\n  };\n}\n","\nimport worker from \"!!../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"!function(){\\\"use strict\\\";var e,t,i=(e=function(e,t){var i=\\\"undefined\\\"!=typeof Uint8Array&&\\\"undefined\\\"!=typeof Uint16Array&&\\\"undefined\\\"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if(\\\"object\\\"!=typeof i)throw new TypeError(i+\\\"must be non-object\\\");for(var a in i)n(i,a)&&(e[a]=i[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,i,n,a){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+n),a);else for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){var t,i,n,a,r,o;for(n=0,t=0,i=e.length;t<i;t++)n+=e[t].length;for(o=new Uint8Array(n),a=0,t=0,i=e.length;t<i;t++)r=e[t],o.set(r,a),a+=r.length;return o}},r={arraySet:function(e,t,i,n,a){for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(i)},e(t={exports:{}},t.exports),t.exports);i.assign,i.shrinkBuf,i.setTyped,i.Buf8,i.Buf16,i.Buf32;var n=function(e,t,i,n){for(var a=65535&e|0,r=e>>>16&65535|0,o=0;0!==i;){i-=o=i>2e3?2e3:i;do{r=r+(a=a+t[n++]|0)|0}while(--o);a%=65521,r%=65521}return a|r<<16|0},a=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}(),r=function(e,t,i,n){var r=a,o=n+i;e^=-1;for(var s=n;s<o;s++)e=e>>>8^r[255&(e^t[s])];return-1^e},o=function(e,t){var i,n,a,r,o,s,f,l,d,c,h,u,w,b,p,m,k,_,v,g,y,x,B,E,S;i=e.state,n=e.next_in,E=e.input,a=n+(e.avail_in-5),r=e.next_out,S=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),f=i.dmax,l=i.wsize,d=i.whave,c=i.wnext,h=i.window,u=i.hold,w=i.bits,b=i.lencode,p=i.distcode,m=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{w<15&&(u+=E[n++]<<w,w+=8,u+=E[n++]<<w,w+=8),_=b[u&m];t:for(;;){if(u>>>=v=_>>>24,w-=v,0==(v=_>>>16&255))S[r++]=65535&_;else{if(!(16&v)){if(0==(64&v)){_=b[(65535&_)+(u&(1<<v)-1)];continue t}if(32&v){i.mode=12;break e}e.msg=\\\"invalid literal/length code\\\",i.mode=30;break e}g=65535&_,(v&=15)&&(w<v&&(u+=E[n++]<<w,w+=8),g+=u&(1<<v)-1,u>>>=v,w-=v),w<15&&(u+=E[n++]<<w,w+=8,u+=E[n++]<<w,w+=8),_=p[u&k];i:for(;;){if(u>>>=v=_>>>24,w-=v,!(16&(v=_>>>16&255))){if(0==(64&v)){_=p[(65535&_)+(u&(1<<v)-1)];continue i}e.msg=\\\"invalid distance code\\\",i.mode=30;break e}if(y=65535&_,w<(v&=15)&&(u+=E[n++]<<w,(w+=8)<v&&(u+=E[n++]<<w,w+=8)),(y+=u&(1<<v)-1)>f){e.msg=\\\"invalid distance too far back\\\",i.mode=30;break e}if(u>>>=v,w-=v,y>(v=r-o)){if((v=y-v)>d&&i.sane){e.msg=\\\"invalid distance too far back\\\",i.mode=30;break e}if(x=0,B=h,0===c){if(x+=l-v,v<g){g-=v;do{S[r++]=h[x++]}while(--v);x=r-y,B=S}}else if(c<v){if(x+=l+c-v,(v-=c)<g){g-=v;do{S[r++]=h[x++]}while(--v);if(x=0,c<g){g-=v=c;do{S[r++]=h[x++]}while(--v);x=r-y,B=S}}}else if(x+=c-v,v<g){g-=v;do{S[r++]=h[x++]}while(--v);x=r-y,B=S}for(;g>2;)S[r++]=B[x++],S[r++]=B[x++],S[r++]=B[x++],g-=3;g&&(S[r++]=B[x++],g>1&&(S[r++]=B[x++]))}else{x=r-y;do{S[r++]=S[x++],S[r++]=S[x++],S[r++]=S[x++],g-=3}while(g>2);g&&(S[r++]=S[x++],g>1&&(S[r++]=S[x++]))}break}}break}}while(n<a&&r<s);n-=g=w>>3,u&=(1<<(w-=g<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=r<s?s-r+257:257-(r-s),i.hold=u,i.bits=w},s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],c=function(e,t,n,a,r,o,c,h){var u,w,b,p,m,k,_,v,g,y=h.bits,x=0,B=0,E=0,S=0,R=0,A=0,Z=0,T=0,O=0,U=0,L=null,C=0,N=new i.Buf16(16),D=new i.Buf16(16),I=null,F=0;for(x=0;x<=15;x++)N[x]=0;for(B=0;B<a;B++)N[t[n+B]]++;for(R=y,S=15;S>=1&&0===N[S];S--);if(R>S&&(R=S),0===S)return r[o++]=20971520,r[o++]=20971520,h.bits=1,0;for(E=1;E<S&&0===N[E];E++);for(R<E&&(R=E),T=1,x=1;x<=15;x++)if(T<<=1,(T-=N[x])<0)return-1;if(T>0&&(0===e||1!==S))return-1;for(D[1]=0,x=1;x<15;x++)D[x+1]=D[x]+N[x];for(B=0;B<a;B++)0!==t[n+B]&&(c[D[t[n+B]]++]=B);if(0===e?(L=I=c,k=19):1===e?(L=s,C-=257,I=f,F-=257,k=256):(L=l,I=d,k=-1),U=0,B=0,x=E,m=o,A=R,Z=0,b=-1,p=(O=1<<R)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){_=x-Z,c[B]<k?(v=0,g=c[B]):c[B]>k?(v=I[F+c[B]],g=L[C+c[B]]):(v=96,g=0),u=1<<x-Z,E=w=1<<A;do{r[m+(U>>Z)+(w-=u)]=_<<24|v<<16|g|0}while(0!==w);for(u=1<<x-1;U&u;)u>>=1;if(0!==u?(U&=u-1,U+=u):U=0,B++,0==--N[x]){if(x===S)break;x=t[n+c[B]]}if(x>R&&(U&p)!==b){for(0===Z&&(Z=R),m+=E,T=1<<(A=x-Z);A+Z<S&&!((T-=N[A+Z])<=0);)A++,T<<=1;if(O+=1<<A,1===e&&O>852||2===e&&O>592)return 1;r[b=U&p]=R<<24|A<<16|m-o|0}}return 0!==U&&(r[m+U]=x-Z<<24|64<<16|0),h.bits=R,0},h=0,u=-2,w=1,b=12,p=30,m=852,k=592;function _(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\\\"\\\",t.wrap&&(e.adler=1&t.wrap),t.mode=w,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(m),t.distcode=t.distdyn=new i.Buf32(k),t.sane=1,t.back=-1,h):u}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,g(e)):u}function x(e,t){var i,n;return e&&e.state?(n=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?u:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,y(e))):u}function B(e,t){var i,n;return e?(n=new v,e.state=n,n.window=null,(i=x(e,t))!==h&&(e.state=null),i):u}var E,S,R=!0;function A(e){if(R){var t;for(E=new i.Buf32(512),S=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c(1,e.lens,0,288,E,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c(2,e.lens,0,32,S,0,e.work,{bits:5}),R=!1}e.lencode=E,e.lenbits=9,e.distcode=S,e.distbits=5}function Z(e,t,n,a){var r,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),a>=o.wsize?(i.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>a&&(r=a),i.arraySet(o.window,t,n-a,r,o.wnext),(a-=r)?(i.arraySet(o.window,t,n-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}var T={inflateReset:y,inflateReset2:x,inflateResetKeep:g,inflateInit:function(e){return B(e,15)},inflateInit2:B,inflate:function(e,t){var a,s,f,l,d,m,k,v,g,y,x,B,E,S,R,T,O,U,L,C,N,D,I,F,H=0,z=new i.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;(a=e.state).mode===b&&(a.mode=13),d=e.next_out,f=e.output,k=e.avail_out,l=e.next_in,s=e.input,m=e.avail_in,v=a.hold,g=a.bits,y=m,x=k,D=h;e:for(;;)switch(a.mode){case w:if(0===a.wrap){a.mode=13;break}for(;g<16;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(2&a.wrap&&35615===v){a.check=0,z[0]=255&v,z[1]=v>>>8&255,a.check=r(a.check,z,2,0),v=0,g=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg=\\\"incorrect header check\\\",a.mode=p;break}if(8!=(15&v)){e.msg=\\\"unknown compression method\\\",a.mode=p;break}if(g-=4,N=8+(15&(v>>>=4)),0===a.wbits)a.wbits=N;else if(N>a.wbits){e.msg=\\\"invalid window size\\\",a.mode=p;break}a.dmax=1<<N,e.adler=a.check=1,a.mode=512&v?10:b,v=0,g=0;break;case 2:for(;g<16;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(a.flags=v,8!=(255&a.flags)){e.msg=\\\"unknown compression method\\\",a.mode=p;break}if(57344&a.flags){e.msg=\\\"unknown header flags set\\\",a.mode=p;break}a.head&&(a.head.text=v>>8&1),512&a.flags&&(z[0]=255&v,z[1]=v>>>8&255,a.check=r(a.check,z,2,0)),v=0,g=0,a.mode=3;case 3:for(;g<32;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.head&&(a.head.time=v),512&a.flags&&(z[0]=255&v,z[1]=v>>>8&255,z[2]=v>>>16&255,z[3]=v>>>24&255,a.check=r(a.check,z,4,0)),v=0,g=0,a.mode=4;case 4:for(;g<16;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.head&&(a.head.xflags=255&v,a.head.os=v>>8),512&a.flags&&(z[0]=255&v,z[1]=v>>>8&255,a.check=r(a.check,z,2,0)),v=0,g=0,a.mode=5;case 5:if(1024&a.flags){for(;g<16;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.length=v,a.head&&(a.head.extra_len=v),512&a.flags&&(z[0]=255&v,z[1]=v>>>8&255,a.check=r(a.check,z,2,0)),v=0,g=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&((B=a.length)>m&&(B=m),B&&(a.head&&(N=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),i.arraySet(a.head.extra,s,l,B,N)),512&a.flags&&(a.check=r(a.check,s,B,l)),m-=B,l+=B,a.length-=B),a.length))break e;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===m)break e;B=0;do{N=s[l+B++],a.head&&N&&a.length<65536&&(a.head.name+=String.fromCharCode(N))}while(N&&B<m);if(512&a.flags&&(a.check=r(a.check,s,B,l)),m-=B,l+=B,N)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===m)break e;B=0;do{N=s[l+B++],a.head&&N&&a.length<65536&&(a.head.comment+=String.fromCharCode(N))}while(N&&B<m);if(512&a.flags&&(a.check=r(a.check,s,B,l)),m-=B,l+=B,N)break e}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;g<16;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(v!==(65535&a.check)){e.msg=\\\"header crc mismatch\\\",a.mode=p;break}v=0,g=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=b;break;case 10:for(;g<32;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}e.adler=a.check=_(v),v=0,g=0,a.mode=11;case 11:if(0===a.havedict)return e.next_out=d,e.avail_out=k,e.next_in=l,e.avail_in=m,a.hold=v,a.bits=g,2;e.adler=a.check=1,a.mode=b;case b:if(5===t||6===t)break e;case 13:if(a.last){v>>>=7&g,g-=7&g,a.mode=27;break}for(;g<3;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}switch(a.last=1&v,g-=1,3&(v>>>=1)){case 0:a.mode=14;break;case 1:if(A(a),a.mode=20,6===t){v>>>=2,g-=2;break e}break;case 2:a.mode=17;break;case 3:e.msg=\\\"invalid block type\\\",a.mode=p}v>>>=2,g-=2;break;case 14:for(v>>>=7&g,g-=7&g;g<32;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if((65535&v)!=(v>>>16^65535)){e.msg=\\\"invalid stored block lengths\\\",a.mode=p;break}if(a.length=65535&v,v=0,g=0,a.mode=15,6===t)break e;case 15:a.mode=16;case 16:if(B=a.length){if(B>m&&(B=m),B>k&&(B=k),0===B)break e;i.arraySet(f,s,l,B,d),m-=B,l+=B,k-=B,d+=B,a.length-=B;break}a.mode=b;break;case 17:for(;g<14;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(a.nlen=257+(31&v),v>>>=5,g-=5,a.ndist=1+(31&v),v>>>=5,g-=5,a.ncode=4+(15&v),v>>>=4,g-=4,a.nlen>286||a.ndist>30){e.msg=\\\"too many length or distance symbols\\\",a.mode=p;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;g<3;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.lens[j[a.have++]]=7&v,v>>>=3,g-=3}for(;a.have<19;)a.lens[j[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,I={bits:a.lenbits},D=c(0,a.lens,0,19,a.lencode,0,a.work,I),a.lenbits=I.bits,D){e.msg=\\\"invalid code lengths set\\\",a.mode=p;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;T=(H=a.lencode[v&(1<<a.lenbits)-1])>>>16&255,O=65535&H,!((R=H>>>24)<=g);){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(O<16)v>>>=R,g-=R,a.lens[a.have++]=O;else{if(16===O){for(F=R+2;g<F;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(v>>>=R,g-=R,0===a.have){e.msg=\\\"invalid bit length repeat\\\",a.mode=p;break}N=a.lens[a.have-1],B=3+(3&v),v>>>=2,g-=2}else if(17===O){for(F=R+3;g<F;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}g-=R,N=0,B=3+(7&(v>>>=R)),v>>>=3,g-=3}else{for(F=R+7;g<F;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}g-=R,N=0,B=11+(127&(v>>>=R)),v>>>=7,g-=7}if(a.have+B>a.nlen+a.ndist){e.msg=\\\"invalid bit length repeat\\\",a.mode=p;break}for(;B--;)a.lens[a.have++]=N}}if(a.mode===p)break;if(0===a.lens[256]){e.msg=\\\"invalid code -- missing end-of-block\\\",a.mode=p;break}if(a.lenbits=9,I={bits:a.lenbits},D=c(1,a.lens,0,a.nlen,a.lencode,0,a.work,I),a.lenbits=I.bits,D){e.msg=\\\"invalid literal/lengths set\\\",a.mode=p;break}if(a.distbits=6,a.distcode=a.distdyn,I={bits:a.distbits},D=c(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,I),a.distbits=I.bits,D){e.msg=\\\"invalid distances set\\\",a.mode=p;break}if(a.mode=20,6===t)break e;case 20:a.mode=21;case 21:if(m>=6&&k>=258){e.next_out=d,e.avail_out=k,e.next_in=l,e.avail_in=m,a.hold=v,a.bits=g,o(e,x),d=e.next_out,f=e.output,k=e.avail_out,l=e.next_in,s=e.input,m=e.avail_in,v=a.hold,g=a.bits,a.mode===b&&(a.back=-1);break}for(a.back=0;T=(H=a.lencode[v&(1<<a.lenbits)-1])>>>16&255,O=65535&H,!((R=H>>>24)<=g);){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(T&&0==(240&T)){for(U=R,L=T,C=O;T=(H=a.lencode[C+((v&(1<<U+L)-1)>>U)])>>>16&255,O=65535&H,!(U+(R=H>>>24)<=g);){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}v>>>=U,g-=U,a.back+=U}if(v>>>=R,g-=R,a.back+=R,a.length=O,0===T){a.mode=26;break}if(32&T){a.back=-1,a.mode=b;break}if(64&T){e.msg=\\\"invalid literal/length code\\\",a.mode=p;break}a.extra=15&T,a.mode=22;case 22:if(a.extra){for(F=a.extra;g<F;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.length+=v&(1<<a.extra)-1,v>>>=a.extra,g-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;T=(H=a.distcode[v&(1<<a.distbits)-1])>>>16&255,O=65535&H,!((R=H>>>24)<=g);){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(0==(240&T)){for(U=R,L=T,C=O;T=(H=a.distcode[C+((v&(1<<U+L)-1)>>U)])>>>16&255,O=65535&H,!(U+(R=H>>>24)<=g);){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}v>>>=U,g-=U,a.back+=U}if(v>>>=R,g-=R,a.back+=R,64&T){e.msg=\\\"invalid distance code\\\",a.mode=p;break}a.offset=O,a.extra=15&T,a.mode=24;case 24:if(a.extra){for(F=a.extra;g<F;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.offset+=v&(1<<a.extra)-1,v>>>=a.extra,g-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg=\\\"invalid distance too far back\\\",a.mode=p;break}a.mode=25;case 25:if(0===k)break e;if(B=x-k,a.offset>B){if((B=a.offset-B)>a.whave&&a.sane){e.msg=\\\"invalid distance too far back\\\",a.mode=p;break}B>a.wnext?(B-=a.wnext,E=a.wsize-B):E=a.wnext-B,B>a.length&&(B=a.length),S=a.window}else S=f,E=d-a.offset,B=a.length;B>k&&(B=k),k-=B,a.length-=B;do{f[d++]=S[E++]}while(--B);0===a.length&&(a.mode=21);break;case 26:if(0===k)break e;f[d++]=a.length,k--,a.mode=21;break;case 27:if(a.wrap){for(;g<32;){if(0===m)break e;m--,v|=s[l++]<<g,g+=8}if(x-=k,e.total_out+=x,a.total+=x,x&&(e.adler=a.check=a.flags?r(a.check,f,x,d-x):n(a.check,f,x,d-x)),x=k,(a.flags?v:_(v))!==a.check){e.msg=\\\"incorrect data check\\\",a.mode=p;break}v=0,g=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;g<32;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(v!==(4294967295&a.total)){e.msg=\\\"incorrect length check\\\",a.mode=p;break}v=0,g=0}a.mode=29;case 29:D=1;break e;case p:D=-3;break e;case 31:return-4;default:return u}return e.next_out=d,e.avail_out=k,e.next_in=l,e.avail_in=m,a.hold=v,a.bits=g,(a.wsize||x!==e.avail_out&&a.mode<p&&(a.mode<27||4!==t))&&Z(e,e.output,e.next_out,x-e.avail_out)?(a.mode=31,-4):(y-=e.avail_in,x-=e.avail_out,e.total_in+=y,e.total_out+=x,a.total+=x,a.wrap&&x&&(e.adler=a.check=a.flags?r(a.check,f,x,e.next_out-x):n(a.check,f,x,e.next_out-x)),e.data_type=a.bits+(a.last?64:0)+(a.mode===b?128:0)+(20===a.mode||15===a.mode?256:0),(0===y&&0===x||4===t)&&D===h&&(D=-5),D)},inflateEnd:function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,h},inflateGetHeader:function(e,t){var i;return e&&e.state?0==(2&(i=e.state).wrap)?u:(i.head=t,t.done=!1,h):u},inflateSetDictionary:function(e,t){var i,a=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?u:11===i.mode&&n(1,t,a,0)!==i.check?-3:Z(e,t,a,a)?(i.mode=31,-4):(i.havedict=1,h):u},inflateInfo:\\\"pako inflate (from Nodeca project)\\\"},O=!0,U=!0;try{String.fromCharCode.apply(null,[0])}catch(e){O=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){U=!1}for(var L=new i.Buf8(256),C=0;C<256;C++)L[C]=C>=252?6:C>=248?5:C>=240?4:C>=224?3:C>=192?2:1;L[254]=L[254]=1;var N=function(e){var t,n,a,r,o,s=e.length,f=0;for(r=0;r<s;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(a=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(a-56320),r++),f+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(f),o=0,r=0;o<f;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(a=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(a-56320),r++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},D=function(e,t){var n,a,r,o,s=t||e.length,f=new Array(2*s);for(a=0,n=0;n<s;)if((r=e[n++])<128)f[a++]=r;else if((o=L[r])>4)f[a++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&n<s;)r=r<<6|63&e[n++],o--;o>1?f[a++]=65533:r<65536?f[a++]=r:(r-=65536,f[a++]=55296|r>>10&1023,f[a++]=56320|1023&r)}return function(e,t){if(t<65537&&(e.subarray&&U||!e.subarray&&O))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n=\\\"\\\",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}(f,a)},I=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+L[e[i]]>t?i:t},F={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},H={2:\\\"need dictionary\\\",1:\\\"stream end\\\",0:\\\"\\\",\\\"-1\\\":\\\"file error\\\",\\\"-2\\\":\\\"stream error\\\",\\\"-3\\\":\\\"data error\\\",\\\"-4\\\":\\\"insufficient memory\\\",\\\"-5\\\":\\\"buffer error\\\",\\\"-6\\\":\\\"incompatible version\\\"},z=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\\\"\\\",this.state=null,this.data_type=2,this.adler=0},j=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\\\"\\\",this.comment=\\\"\\\",this.hcrc=0,this.done=!1},M=Object.prototype.toString;function K(e){if(!(this instanceof K))return new K(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:\\\"\\\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\\\"\\\",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var n=T.inflateInit2(this.strm,t.windowBits);if(n!==F.Z_OK)throw new Error(H[n]);this.header=new j,T.inflateGetHeader(this.strm,this.header)}function P(e,t){var i=new K(t);if(i.push(e,!0),i.err)throw i.msg||H[i.err];return i.result}K.prototype.push=function(e,t){var n,a,r,o,s,f,l=this.strm,d=this.options.chunkSize,c=this.options.dictionary,h=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?F.Z_FINISH:F.Z_NO_FLUSH,\\\"string\\\"==typeof e?l.input=function(e){for(var t=new i.Buf8(e.length),n=0,a=t.length;n<a;n++)t[n]=e.charCodeAt(n);return t}(e):\\\"[object ArrayBuffer]\\\"===M.call(e)?l.input=new Uint8Array(e):l.input=e,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new i.Buf8(d),l.next_out=0,l.avail_out=d),(n=T.inflate(l,F.Z_NO_FLUSH))===F.Z_NEED_DICT&&c&&(f=\\\"string\\\"==typeof c?N(c):\\\"[object ArrayBuffer]\\\"===M.call(c)?new Uint8Array(c):c,n=T.inflateSetDictionary(this.strm,f)),n===F.Z_BUF_ERROR&&!0===h&&(n=F.Z_OK,h=!1),n!==F.Z_STREAM_END&&n!==F.Z_OK)return this.onEnd(n),this.ended=!0,!1;l.next_out&&(0!==l.avail_out&&n!==F.Z_STREAM_END&&(0!==l.avail_in||a!==F.Z_FINISH&&a!==F.Z_SYNC_FLUSH)||(\\\"string\\\"===this.options.to?(r=I(l.output,l.next_out),o=l.next_out-r,s=D(l.output,r),l.next_out=o,l.avail_out=d-o,o&&i.arraySet(l.output,l.output,r,o,0),this.onData(s)):this.onData(i.shrinkBuf(l.output,l.next_out)))),0===l.avail_in&&0===l.avail_out&&(h=!0)}while((l.avail_in>0||0===l.avail_out)&&n!==F.Z_STREAM_END);return n===F.Z_STREAM_END&&(a=F.Z_FINISH),a===F.Z_FINISH?(n=T.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===F.Z_OK):a!==F.Z_SYNC_FLUSH||(this.onEnd(F.Z_OK),l.avail_out=0,!0)},K.prototype.onData=function(e){this.chunks.push(e)},K.prototype.onEnd=function(e){e===F.Z_OK&&(\\\"string\\\"===this.options.to?this.result=this.chunks.join(\\\"\\\"):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var J={Inflate:K,inflate:P,inflateRaw:function(e,t){return(t=t||{}).raw=!0,P(e,t)},ungzip:P},Y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e),this.dataView=new DataView(t),this.position=0}return e.prototype.skip=function(e){this.position+=e},e.prototype.readBytes=function(e){var t=4===e?\\\"getUint32\\\":2===e?\\\"getUint16\\\":\\\"getUint8\\\",i=this.position;return this.position+=e,this.dataView[t](i,!0)},e}(),G=function(e){for(var t=new Y(e),i={};;){var n=t.readBytes(4);if(67324752!==n){if(33639248!==n)break;V(t)}else{var a=$(t);i[a.name]={buffer:a.buffer}}}return i},$=function(e){var t=0,i=void 0;e.skip(4);var n=e.readBytes(2);e.skip(8);var a=e.readBytes(4);e.skip(4);var r=e.readBytes(2),o=e.readBytes(2),s=[],f=new Uint8Array(a);for(t=0;t<r;t++)s.push(String.fromCharCode(e.readBytes(1)));for(e.skip(o),t=0;t<a;t++)f[t]=e.readBytes(1);switch(n){case 0:i=f;break;case 8:i=new Uint8Array(J.inflate(f,{raw:!0}));break;default:console.log(s.join(\\\"\\\")+\\\": unsupported compression type\\\"),i=f}return{name:s.join(\\\"\\\"),buffer:i}},V=function(e){e.skip(24);var t=e.readBytes(2),i=e.readBytes(2),n=e.readBytes(2);e.skip(12),e.skip(t),e.skip(i),e.skip(n)},X=\\\"function\\\"==typeof Promise?Promise:function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e);var i=function(){};return t((function(){i()})),{then:function(e){i=e}}},q=0,W=void 0,Q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e),this._id=q,this._listeners={},this.url=t,this.files=null,q++}return e.unzip=function(t){return new X((function(i){var n=new e,a=new FileReader;a.onload=function(e){var t=e.target.result;n.files=G(t),i(n)},t instanceof Blob&&a.readAsArrayBuffer(t)}))},e.prototype.load=function(){var e=this;return new X((function(t){var i=Date.now(),n=new XMLHttpRequest;n.open(\\\"GET\\\",e.url,!0),n.responseType=\\\"arraybuffer\\\",n.onprogress=function(t){e.dispatch({type:\\\"progress\\\",loaded:t.loaded,total:t.total,elapsedTime:Date.now()-i})},n.onload=function(){e.files=G(n.response),e.dispatch({type:\\\"load\\\",elapsedTime:Date.now()-i}),t()},n.send()}))},e.prototype.extractAsBlobUrl=function(e,t){if(this.files[e].url)return this.files[e].url;var i=new Blob([this.files[e].buffer],{type:t});return this.files[e].url=URL.createObjectURL(i),this.files[e].url},e.prototype.extractAsText=function(e){var t=this.files[e].buffer;if(\\\"undefined\\\"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var i=\\\"\\\",n=0,a=t.length;n<a;n++)i+=String.fromCharCode(t[n]);return decodeURIComponent(escape(i))},e.prototype.extractAsJSON=function(e){return JSON.parse(this.extractAsText(e))},e.prototype.loadThreeJSON=function(e){var t=this,i=this.extractAsJSON(e),n=e.replace(/\\\\/.+\\\\.json$/,\\\"/\\\"),a=\\\"__ziploader_\\\"+this._id+\\\"__\\\",r=new RegExp(a);return-1!==!W.Loader.Handlers.handlers.indexOf(r)&&W.Loader.Handlers.add(r,{load:function(e){return t.loadThreeTexture(e.replace(r,\\\"\\\"))}}),W.JSONLoader.prototype.parse(i,a+n)},e.prototype.loadThreeTexture=function(e){var t=new W.Texture,i=/\\\\.jpg$/.test(e)?\\\"image/jpeg\\\":/\\\\.png$/.test(e)?\\\"image/png\\\":/\\\\.gif$/.test(e)?\\\"image/gif\\\":void 0,n=new Blob([this.files[e].buffer],{type:i});return t.image=new Image,t.image.addEventListener(\\\"load\\\",(function e(){t.needsUpdate=!0,t.image.removeEventListener(\\\"load\\\",e),URL.revokeObjectURL(t.image.src)})),t.image.src=URL.createObjectURL(n),t},e.prototype.on=function(e,t){this._listeners[e]||(this._listeners[e]=[]),-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t)},e.prototype.off=function(e,t){var i=this._listeners[e];if(i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}},e.prototype.dispatch=function(e){var t=this._listeners[e.type];if(t){e.target=this;for(var i=t.length,n=0;n<i;n++)t[n].call(this,e)}},e.prototype.clear=function(e){if(e)return URL.revokeObjectURL(this.files[e].url),void delete this.files[e];for(var t in this.files)URL.revokeObjectURL(this.files[t].url);if(delete this.files,W){var i=\\\"__ziploader_\\\"+this._id+\\\"__\\\";W.Loader.Handlers.handlers.some((function(e,t){if(e instanceof RegExp&&e.source===i)return W.Loader.Handlers.handlers.splice(t,2),!0}))}},e.install=function(e){e.THREE&&(W=e.THREE)},e}();function ee(e,t,i,n,a,r,o){try{var s=e[r](o),f=s.value}catch(e){return void i(e)}s.done?t(f):Promise.resolve(f).then(n,a)}function te(e){return function(){var t=this,i=arguments;return new Promise((function(n,a){var r=e.apply(t,i);function o(e){ee(r,n,a,o,s,\\\"next\\\",e)}function s(e){ee(r,n,a,o,s,\\\"throw\\\",e)}o(void 0)}))}}function ie(){return(ie=te((function*(e){const t=new Q(e);return t.load().then((()=>{const e={},i=i=>(e[i]=e[i]||t.extractAsBlobUrl(i),e[i]),n=JSON.parse(t.extractAsText(\\\"scene.gltf\\\"));return n.buffers&&n.buffers.forEach((e=>e.uri=i(e.uri))),n.images&&n.images.forEach((e=>e.uri=i(e.uri))),e[\\\"scene.gtlf\\\"]=URL.createObjectURL(new Blob([JSON.stringify(n,null,2)],{type:\\\"text/plain\\\"})),e}))}))).apply(this,arguments)}self.onmessage=function(){var e=te((function*(e){try{const t=yield function(e){return ie.apply(this,arguments)}(e.data.payload);self.postMessage({id:e.data.id,result:t})}catch(t){self.postMessage({id:e.data.id,err:t.message})}}));return function(t){return e.apply(this,arguments)}}()}();\\n\", \"Worker\", undefined, undefined);\n}\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport { proxiedUrlFor } from \"./media-url-utils\";\nimport avatarUnavailableImage from \"../assets/images/avatar_unavailable.png\";\n\nconst AVATARS_API = \"/api/v1/avatars\";\n\nexport const AVATAR_TYPES = {\n  SKINNABLE: \"skinnable\",\n  URL: \"url\"\n};\n\nexport function getAvatarType(avatarId) {\n  if (avatarId.startsWith(\"http\")) return AVATAR_TYPES.URL;\n  return AVATAR_TYPES.SKINNABLE;\n}\n\nasync function fetchSkinnableAvatar(avatarId) {\n  const resp = await fetchReticulumAuthenticated(`/api/v1/avatars/${avatarId}`);\n  return resp && resp.avatars && resp.avatars[0];\n}\n\nexport async function fetchAvatar(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchSkinnableAvatar(avatarId);\n    case AVATAR_TYPES.URL:\n      return {\n        avatar_id: avatarId,\n        gltf_url: proxiedUrlFor(avatarId)\n      };\n  }\n}\n\nasync function fetchAvatarGltfUrl(avatarId) {\n  return fetchAvatar(avatarId).then(avatar => avatar && avatar.gltf_url);\n}\n\nexport function getAvatarSrc(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatarGltfUrl(avatarId);\n    case AVATAR_TYPES.URL:\n      return proxiedUrlFor(avatarId);\n    default:\n      return avatarId;\n  }\n}\n\nexport async function getAvatarThumbnailUrl(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatar(avatarId).then(avatar => avatar.files.thumbnail);\n    default:\n      return avatarUnavailableImage;\n  }\n}\n\n// Currently the way we do material overrides is with a special named material.\n// We want to migrate eventually to having a GLTF extension that specifies what\n// materials can be overridden, but in the meantime we want to be able to support\n// arbitrary models with some sort of functionality. This provides a fallback\nexport const MAT_NAME = \"Bot_PBS\";\nexport function ensureAvatarMaterial(gltf) {\n  if (gltf.materials.find(m => m.name === MAT_NAME)) return gltf;\n\n  function materialForMesh(mesh) {\n    if (!mesh.primitives) return;\n    const primitive = mesh.primitives.find(p => p.material !== undefined);\n    return primitive && gltf.materials[primitive.material];\n  }\n\n  let nodes = gltf.scenes[gltf.scene].nodes.slice(0);\n  while (nodes.length) {\n    const node = gltf.nodes[nodes.shift()];\n    const material = node.mesh !== undefined && materialForMesh(gltf.meshes[node.mesh]);\n    if (material) {\n      material.name = MAT_NAME;\n      break;\n    }\n    if (node.children) nodes = nodes.concat(node.children);\n  }\n\n  return gltf;\n}\n\nexport async function remixAvatar(parentId, name) {\n  const avatar = {\n    parent_avatar_listing_id: parentId,\n    name: name,\n    files: {}\n  };\n\n  return fetchReticulumAuthenticated(AVATARS_API, \"POST\", { avatar });\n}\n","export const createImageBitmap =\n  window.createImageBitmap ||\n  async function(data) {\n    return new Promise(resolve => {\n      // https://dev.to/nektro/createimagebitmap-polyfill-for-safari-and-edge-228\n      // https://gist.github.com/MonsieurV/fb640c29084c171b4444184858a91bc7\n\n      let srcUrl;\n      if (data instanceof Blob) {\n        srcUrl = URL.createObjectURL(data);\n      } else {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        canvas.width = data.width;\n        canvas.height = data.height;\n        ctx.putImageData(data, 0, 0);\n        srcUrl = canvas.toDataURL();\n      }\n      const img = document.createElement(\"img\");\n\n      img.addEventListener(\"load\", () => resolve(img));\n\n      img.src = srcUrl;\n    });\n  };\n\nexport function disposeImageBitmap(imageBitmap) {\n  if (imageBitmap instanceof HTMLImageElement && imageBitmap.src.startsWith(\"blob:\")) {\n    URL.revokeObjectURL(imageBitmap.src);\n  } else {\n    imageBitmap.close && imageBitmap.close();\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"preview\":\"avatar-preview__preview__Exp7B\"};","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport { getColorSchemePref } from \"../utils/get-color-scheme-pref\";\nimport classNames from \"classnames\";\n\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nimport { createDefaultEnvironmentMap } from \"../components/environment-map\";\nimport { loadGLTF } from \"../components/gltf-model-plus\";\nimport { disposeNode, findNode } from \"../utils/three-utils\";\nimport { ensureAvatarMaterial, MAT_NAME } from \"../utils/avatar-utils\";\nimport { createImageBitmap, disposeImageBitmap } from \"../utils/image-bitmap-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport styles from \"../assets/stylesheets/avatar-preview.scss\";\n\nconst TEXTURE_PROPS = {\n  base_map: [\"map\"],\n  emissive_map: [\"emissiveMap\"],\n  normal_map: [\"normalMap\"],\n  orm_map: [\"aoMap\", \"roughnessMap\", \"metalnessMap\"]\n};\n\nconst ALL_MAPS = Object.keys(TEXTURE_PROPS);\n\n// This should match our aframe renderer=\"antialias: true; colorManagement: true; sortObjects: true;\n// physicallyCorrectLights: true; webgl2: true; multiview: false;\"\nfunction createRenderer(canvas, alpha = false, useDevicePixelRatio = true) {\n  const context = canvas.getContext(\"webgl2\", {\n    alpha,\n    depth: true,\n    antialias: true,\n    premultipliedAlpha: true,\n    preserveDrawingBuffer: false,\n    powerPreference: \"default\"\n  });\n\n  const renderer = new THREE.WebGLRenderer({ alpha, canvas, context, forceWebVR: true });\n  renderer.outputEncoding = THREE.sRGBEncoding;\n  renderer.physicallyCorrectLights = true;\n  if (useDevicePixelRatio) {\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n  return renderer;\n}\n\nconst createImageBitmapFromURL = url =>\n  fetch(url)\n    .then(r => r.blob())\n    .then(createImageBitmap);\n\nconst ORBIT_ANGLE = new THREE.Euler(-30 * THREE.MathUtils.DEG2RAD, 30 * THREE.MathUtils.DEG2RAD, 0);\nconst DEFAULT_MARGIN = 1;\n\nfunction fitBoxInFrustum(camera, box, center, margin = DEFAULT_MARGIN) {\n  const halfYExtents = Math.max(box.max.y - center.y, center.y - box.min.y);\n  const halfVertFOV = THREE.MathUtils.degToRad(camera.fov / 2);\n  camera.position.set(0, 0, (halfYExtents / Math.tan(halfVertFOV) + box.max.z) * margin);\n  camera.position.applyEuler(ORBIT_ANGLE);\n  camera.position.add(center);\n  camera.lookAt(center);\n}\n\nfunction getThemeBackground() {\n  const currentTheme = APP?.store?.state?.preferences?.theme;\n  const themes = window.APP_CONFIG?.theme?.themes;\n  const currentThemeObject = themes?.find(t => t.id === currentTheme) || getColorSchemePref();\n  const previewBackgroundColor = new THREE.Color(currentThemeObject?.variables[\"background3-color\"] || 0xeaeaea);\n  return previewBackgroundColor;\n}\n\nclass AvatarPreview extends Component {\n  static propTypes = {\n    avatarGltfUrl: PropTypes.string,\n    className: PropTypes.string,\n    onGltfLoaded: PropTypes.func\n  };\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: null };\n    this.avatar = null;\n    this.imageBitmaps = {};\n    this.mounted = false;\n  }\n\n  componentDidMount = () => {\n    this.scene = new THREE.Scene();\n\n    this.camera = new THREE.PerspectiveCamera(55, this.canvas.clientWidth / this.canvas.clientHeight, 0.1, 1000);\n    this.controls = new OrbitControls(this.camera, this.canvas);\n    this.controls.screenSpacePanning = true;\n    this.controls.enableKeys = true;\n\n    const light = new THREE.DirectionalLight(0xf7f6ef, 1);\n    light.position.set(0, 10, 10);\n    this.scene.add(light);\n    this.scene.add(new THREE.HemisphereLight(0xb1e3ff, 0xb1e3ff, 2.5));\n\n    this.loadId = 0;\n\n    this.camera.position.set(-0.2, 0.5, 0.5);\n    this.camera.matrixAutoUpdate = true;\n\n    this.controls.target.set(0, 0.45, 0);\n    this.controls.update();\n\n    if (this.props.avatarGltfUrl) {\n      this.loadCurrentAvatarGltfUrl();\n    }\n\n    const clock = new THREE.Clock();\n\n    this.snapshotCanvas = document.createElement(\"canvas\");\n    this.snapshotCanvas.width = 720;\n    this.snapshotCanvas.height = 1280;\n    this.snapshotCamera = new THREE.PerspectiveCamera(55, 720 / 1280, 0.1, 1000);\n    this.snapshotCamera.matrixAutoUpdate = true;\n    this.snapshotRenderer = createRenderer(this.snapshotCanvas, true, false);\n    this.snapshotRenderer.setClearAlpha(0);\n\n    this.previewRenderer = createRenderer(this.canvas);\n    this.previewRenderer.setClearColor(getThemeBackground());\n    this.previewRenderer.setAnimationLoop(() => {\n      const dt = clock.getDelta();\n      this.mixer && this.mixer.update(dt);\n      this.previewRenderer.render(this.scene, this.camera);\n    });\n    window.addEventListener(\"resize\", this.resize);\n    this.resize();\n\n    this.mounted = true;\n  };\n\n  resize = () => {\n    const width = this.canvas.parentElement.offsetWidth;\n    const height = this.canvas.parentElement.offsetHeight;\n    this.previewRenderer.setSize(width, height);\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  };\n\n  setAvatar = avatar => {\n    if (!avatar) return;\n    this.avatar = avatar;\n    this.scene.add(avatar);\n    this.resetCamera();\n    this.setState({ error: null, loading: false });\n  };\n\n  resetCamera = (() => {\n    const box = new THREE.Box3();\n    const center = new THREE.Vector3();\n    return () => {\n      box.setFromObject(this.avatar);\n      box.getCenter(center);\n\n      // Shift the center vertically in order to frame the avatar nicely.\n      center.y = (box.max.y - box.min.y) * 0.6 + box.min.y;\n\n      fitBoxInFrustum(this.camera, box, center);\n      fitBoxInFrustum(this.snapshotCamera, box, center, 0.7);\n\n      this.controls.target.copy(center);\n      this.controls.update();\n    };\n  })();\n\n  componentWillUnmount = () => {\n    this.mounted = false;\n\n    // Gotta be particularly careful about disposing things here since we will likely create many avatar\n    // previews during a session and Chrome will eventually discard the oldest webgl context if we leak\n    // contexts by holding on to them directly or indirectly.\n\n    this.scene && this.scene.traverse(disposeNode);\n    if (this.previewRenderer) {\n      this.previewRenderer.dispose();\n    }\n    if (this.snapshotRenderer) {\n      this.snapshotRenderer.dispose();\n    }\n    if (this.controls) {\n      this.controls.dispose();\n      this.controls.domElement = null;\n    }\n\n    Object.values(this.imageBitmaps).forEach(img => disposeImageBitmap(img));\n    window.removeEventListener(\"resize\", this.resize);\n  };\n\n  componentDidUpdate = async oldProps => {\n    if (oldProps.avatarGltfUrl !== this.props.avatarGltfUrl) {\n      if (this.avatar) {\n        this.scene.remove(this.avatar);\n        this.avatar = null;\n      }\n      if (this.props.avatarGltfUrl) {\n        this.setState({ error: null, loading: true });\n        await this.loadCurrentAvatarGltfUrl();\n      }\n    }\n    this.applyMaps(oldProps, this.props);\n  };\n\n  async loadCurrentAvatarGltfUrl() {\n    const newLoadId = ++this.loadId;\n    const url = proxiedUrlFor(this.props.avatarGltfUrl);\n    const gltf = await this.loadPreviewAvatar(url);\n    // If we had started loading another avatar while we were loading this one, throw this one away\n    if (!this.mounted || newLoadId !== this.loadId) return;\n    if (gltf && this.props.onGltfLoaded) this.props.onGltfLoaded(gltf);\n    this.setAvatar(gltf.scene);\n  }\n\n  applyMaps(oldProps, newProps) {\n    return Promise.all(\n      ALL_MAPS.map(mapName => {\n        const applyMap = this.applyMapToPreview.bind(this, mapName);\n        if (oldProps[mapName] != newProps[mapName]) {\n          if (newProps[mapName] instanceof File) {\n            return createImageBitmap(newProps[mapName]).then(applyMap);\n          } else if (newProps[mapName]) {\n            return createImageBitmapFromURL(newProps[mapName]).then(applyMap);\n          } else {\n            return this.revertMap(mapName);\n          }\n        }\n      })\n    );\n  }\n\n  loadPreviewAvatar = async avatarGltfUrl => {\n    let gltf;\n    try {\n      gltf = await loadGLTF(avatarGltfUrl, \"model/gltf\", null, ensureAvatarMaterial);\n    } catch (e) {\n      console.error(\"Failed to load avatar preview\", e);\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    if (!this.mounted) return;\n\n    // TODO Check for \"Bot_Skinned\" here is a hack for legacy avatars which only has a name one of the MOZ_alt_material nodes\n    this.previewMesh = findNode(\n      gltf.scene,\n      n => (n.isMesh && n.material && n.material.name === MAT_NAME) || n.name === \"Bot_Skinned\"\n    );\n\n    if (!this.previewMesh) {\n      console.error(\"Failed to find avatar preview mesh\");\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    const idleAnimation = gltf.animations && gltf.animations.find(({ name }) => name === \"idle_eyes\");\n    if (idleAnimation) {\n      this.mixer = new THREE.AnimationMixer(gltf.scene);\n      const action = this.mixer.clipAction(idleAnimation);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.idleAnimationAction = action;\n    }\n\n    gltf.scene.traverse(node => {\n      // Camera in preview is pretty tight, and skinned meshes tend to have poor bounding boxes\n      if (node.isSkinnedMesh) {\n        node.frustumCulled = false;\n      }\n\n      // We delete onUpdate here to opt out of the auto texture cleanup after GPU upload.\n      if (node.material) {\n        const removeOnUpdate = p => node.material[p] && delete node.material[p].onUpdate;\n        TEXTURE_PROPS[\"base_map\"].forEach(removeOnUpdate);\n        TEXTURE_PROPS[\"emissive_map\"].forEach(removeOnUpdate);\n        TEXTURE_PROPS[\"normal_map\"].forEach(removeOnUpdate);\n        TEXTURE_PROPS[\"orm_map\"].forEach(removeOnUpdate);\n      }\n    });\n\n    const { material } = this.previewMesh;\n    if (material) {\n      const getImage = p => material[p] && material[p].image;\n      this.originalMaps = {\n        base_map: TEXTURE_PROPS[\"base_map\"].map(getImage),\n        emissive_map: TEXTURE_PROPS[\"emissive_map\"].map(getImage),\n        normal_map: TEXTURE_PROPS[\"normal_map\"].map(getImage),\n        orm_map: TEXTURE_PROPS[\"orm_map\"].map(getImage)\n      };\n\n      const dependencies = [\n        this.applyMaps({}, this.props) // Apply initial maps\n      ];\n\n      // Low and medium quality materials don't use environment maps\n      if (window.APP.store.state.preferences.materialQualitySetting === \"high\") {\n        dependencies.push(\n          // TODO apply environment map to secondary materials as well\n          createDefaultEnvironmentMap().then(t => {\n            this.previewMesh.material.envMap = t;\n            this.previewMesh.material.needsUpdate = true;\n          })\n        );\n      }\n\n      await Promise.all(dependencies);\n    } else {\n      this.originalMaps = {};\n    }\n\n    return gltf;\n  };\n\n  applyMapToPreview = (name, image) => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    this.imageBitmaps[name] = image;\n    TEXTURE_PROPS[name].forEach(prop => {\n      const texture = this.previewMesh.material[prop];\n\n      // Low quality materials are missing normal maps\n      if (prop === \"normalMap\" && window.APP.store.state.preferences.materialQualitySetting === \"low\") {\n        return;\n      }\n\n      // Medium Quality materials are missing metalness and roughness maps\n      if (\n        (prop === \"roughnessMap\" || prop === \"metalnessMap\") &&\n        window.APP.store.state.preferences.materialQualitySetting !== \"high\"\n      ) {\n        return;\n      }\n\n      texture.image = image;\n      texture.needsUpdate = true;\n    });\n  };\n\n  revertMap = name => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    delete this.imageBitmaps[name];\n    this.originalMaps[name].forEach((bm, i) => {\n      const texture = this.previewMesh.material[TEXTURE_PROPS[name][i]];\n\n      if (texture) {\n        texture.image = bm;\n        texture.needsUpdate = true;\n      }\n    });\n  };\n\n  snapshot = () => {\n    return new Promise(resolve => {\n      if (this.idleAnimationAction) this.idleAnimationAction.stop();\n      this.snapshotCamera.position.copy(this.camera.position);\n      this.snapshotCamera.rotation.copy(this.camera.rotation);\n      this.snapshotRenderer.render(this.scene, this.snapshotCamera);\n      this.snapshotCanvas.toBlob(blob => {\n        if (this.idleAnimationAction) this.idleAnimationAction.play();\n        resolve(blob);\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div className={classNames(styles.preview, this.props.className)}>\n        {!this.props.avatarGltfUrl ||\n          (this.state.loading && !this.state.error && (\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          ))}\n        {this.props.avatarGltfUrl && this.state.error && !this.state.loading && (\n          <div className=\"error\">\n            <img\n              src=\"../assets/images/warning_icon.png\"\n              srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n              className=\"error-icon\"\n            />\n            <FormattedMessage\n              id=\"avatar-preview.loading-failed\"\n              defaultMessage=\"Loading failed{linebreak}Please choose another avatar\"\n              values={{ linebreak: <br /> }}\n            />\n          </div>\n        )}\n        <canvas ref={c => (this.canvas = c)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(AvatarPreview, { forwardRef: true });\n","// extracted by mini-css-extract-plugin\nexport default {\"avatar-landing\":\"avatar__avatar-landing__eSlGJ\",\"avatarLanding\":\"avatar__avatar-landing__eSlGJ\",\"form-submit\":\"avatar__form-submit__tZtEc\",\"formSubmit\":\"avatar__form-submit__tZtEc\",\"no-default-button-style\":\"avatar__no-default-button-style__O7SWN\",\"noDefaultButtonStyle\":\"avatar__no-default-button-style__O7SWN\",\"logo\":\"avatar__logo__oP3Yt\",\"box\":\"avatar__box__ywpDd\",\"title\":\"avatar__title__jS9v5\",\"selected-message\":\"avatar__selected-message__aGq9S\",\"selectedMessage\":\"avatar__selected-message__aGq9S\",\"attributions\":\"avatar__attributions__BbZN2\",\"preview\":\"avatar__preview__Z2aKa\",\"copy-tip\":\"avatar__copy-tip__y8MyZ\",\"copyTip\":\"avatar__copy-tip__y8MyZ\",\"edit-avatar\":\"avatar__edit-avatar__THzPH\",\"editAvatar\":\"avatar__edit-avatar__THzPH\"};","// We should technically be able to just include three here, but our dependancies are tangled such that not having aframe is a bit difficult\nimport \"./utils/theme\";\nconsole.log(`Hubs version: ${process.env.BUILD_VERSION || \"?\"}`);\n\nimport \"aframe\";\nimport \"./utils/logging\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { WrappedIntlProvider } from \"./react-components/wrapped-intl-provider\";\n\nimport configs from \"./utils/configs\";\n\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\ndisableiOSZoom();\n\nimport { App } from \"./App\";\n\nimport AvatarPreview from \"./react-components/avatar-preview\";\n\nimport { fetchAvatar, remixAvatar } from \"./utils/avatar-utils\";\n\nimport \"./react-components/styles/global.scss\";\nimport styles from \"./assets/stylesheets/avatar.scss\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faClone } from \"@fortawesome/free-solid-svg-icons/faClone\";\nimport { ThemeProvider } from \"./react-components/styles/theme\";\n\nconst qs = new URLSearchParams(location.search);\nwindow.APP = new App();\n\nclass AvatarPage extends React.Component {\n  static propTypes = {\n    avatarId: PropTypes.string,\n    store: PropTypes.object,\n    intl: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { copyMessage: null };\n  }\n\n  componentDidMount() {\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.refetchAvatar();\n  }\n\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  storeUpdated = () => this.forceUpdate();\n\n  refetchAvatar = async () => {\n    const avatar = await fetchAvatar(this.props.avatarId);\n    this.setState({ avatar });\n  };\n\n  setAvatar = e => {\n    e && e.preventDefault();\n    this.props.store.update({\n      profile: { avatarId: this.state.avatar.avatar_id }\n    });\n  };\n\n  handleCopyAvatar = async e => {\n    e.preventDefault();\n    const { avatar } = this.state;\n    this.setState({ copyState: \"copying\" });\n    await remixAvatar(avatar.avatar_id, avatar.name);\n    this.setState({ copyState: \"copied\" });\n    setTimeout(() => this.setState({ copyMessage: null }), 2000);\n  };\n\n  render() {\n    const { avatar, copyState } = this.state;\n    if (!avatar) {\n      return (\n        <div className={styles.avatarLanding}>\n          <div className={classNames([styles.box, styles.darkened])}>\n            <FormattedMessage id=\"avatar-page.loading\" defaultMessage=\"Loading\" />\n          </div>\n        </div>\n      );\n    }\n\n    const selectedAvatarId = this.props.store.state.profile.avatarId;\n    const isSelected = avatar.avatar_id === selectedAvatarId;\n\n    return (\n      <form onSubmit={this.setAvatar} className={styles.avatarLanding}>\n        <div className={classNames([styles.box, styles.darkened])}>\n          <label className={styles.title}>\n            <span>{avatar.name}</span>\n          </label>\n          <div className={styles.attributions}>\n            {avatar.attributions && avatar.attributions.creator && <span>{`by ${avatar.attributions.creator}`}</span>}\n          </div>\n          <div className={styles.preview}>\n            {avatar && <AvatarPreview avatarGltfUrl={avatar.gltf_url} />}\n            {copyState ? (\n              <div className={styles.copyTip}>\n                {copyState === \"copying\" ? (\n                  <FormattedMessage id=\"avatar-page.copying-avatar\" defaultMessage=\"Copying...\" />\n                ) : (\n                  <FormattedMessage id=\"avatar-page.copied-avatar\" defaultMessage=\"Copied\" />\n                )}\n              </div>\n            ) : (\n              avatar &&\n              avatar.type === \"avatar_listing\" &&\n              avatar.allow_remixing && (\n                <a\n                  className={styles.editAvatar}\n                  onClick={this.handleCopyAvatar}\n                  title={<FormattedMessage id=\"avatar-page.copy-button\" defaultMessage=\"Copy to my avatars\" />}\n                >\n                  <FontAwesomeIcon icon={faClone} />\n                </a>\n              )\n            )}\n          </div>\n          {isSelected ? (\n            <span className={styles.selectedMessage}>\n              <FormattedMessage id=\"avatar-page.selected\" defaultMessage=\"This is your current avatar\" />\n            </span>\n          ) : (\n            <button disabled={isSelected} className={styles.formSubmit} type=\"submit\">\n              <FormattedMessage id=\"avatar-page.select\" defaultMessage=\"Select\" />\n            </button>\n          )}\n        </div>\n        <img\n          className={styles.logo}\n          src={configs.image(\"logo\")}\n          alt={<FormattedMessage id=\"avatar-page.logo\" defaultMessage=\"Logo\" />}\n        />\n      </form>\n    );\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const avatarId = qs.get(\"avatar_id\") || document.location.pathname.substring(1).split(\"/\")[1];\n  console.log(`Avatar ID: ${avatarId}`);\n  ReactDOM.render(\n    <WrappedIntlProvider>\n      <ThemeProvider store={window.APP.store}>\n        <AvatarPage avatarId={avatarId} store={window.APP.store} />\n      </ThemeProvider>\n    </WrappedIntlProvider>,\n    document.getElementById(\"ui-root\")\n  );\n});\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*! https://mths.be/punycode v1.3.2 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","\"use strict\";\n\n/* eslint-env browser */\n\n/* eslint-disable no-undef, no-use-before-define, new-cap */\nmodule.exports = function (content, workerConstructor, workerOptions, url) {\n  var globalScope = self || window;\n\n  try {\n    try {\n      var blob;\n\n      try {\n        // New API\n        blob = new globalScope.Blob([content]);\n      } catch (e) {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = globalScope.BlobBuilder || globalScope.WebKitBlobBuilder || globalScope.MozBlobBuilder || globalScope.MSBlobBuilder;\n        blob = new BlobBuilder();\n        blob.append(content);\n        blob = blob.getBlob();\n      }\n\n      var URL = globalScope.URL || globalScope.webkitURL;\n      var objectURL = URL.createObjectURL(blob);\n      var worker = new globalScope[workerConstructor](objectURL, workerOptions);\n      URL.revokeObjectURL(objectURL);\n      return worker;\n    } catch (e) {\n      return new globalScope[workerConstructor](\"data:application/javascript,\".concat(encodeURIComponent(content)), workerOptions);\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error(\"Inline worker is not supported\");\n    }\n\n    return new globalScope[workerConstructor](url, workerOptions);\n  }\n};","var map = {\n\t\"./de.json\": [\n\t\t33116,\n\t\t116\n\t],\n\t\"./es.json\": [\n\t\t27297,\n\t\t297\n\t],\n\t\"./fr.json\": [\n\t\t83056,\n\t\t56\n\t],\n\t\"./ja.json\": [\n\t\t23160,\n\t\t160\n\t],\n\t\"./ko.json\": [\n\t\t55540,\n\t\t540\n\t],\n\t\"./pt.json\": [\n\t\t10188,\n\t\t188\n\t],\n\t\"./ru.json\": [\n\t\t97441,\n\t\t441\n\t],\n\t\"./zh-cn.json\": [\n\t\t2030,\n\t\t30\n\t],\n\t\"./zh-tw.json\": [\n\t\t4076,\n\t\t76\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 37472;\nmodule.exports = webpackAsyncContext;","// src/Constants.js\nvar TYPES_ENUM = {\n  i8: \"i8\",\n  ui8: \"ui8\",\n  ui8c: \"ui8c\",\n  i16: \"i16\",\n  ui16: \"ui16\",\n  i32: \"i32\",\n  ui32: \"ui32\",\n  f32: \"f32\",\n  f64: \"f64\",\n  eid: \"eid\"\n};\nvar TYPES_NAMES = {\n  i8: \"Int8\",\n  ui8: \"Uint8\",\n  ui8c: \"Uint8Clamped\",\n  i16: \"Int16\",\n  ui16: \"Uint16\",\n  i32: \"Int32\",\n  ui32: \"Uint32\",\n  eid: \"Uint32\",\n  f32: \"Float32\",\n  f64: \"Float64\"\n};\nvar TYPES = {\n  i8: Int8Array,\n  ui8: Uint8Array,\n  ui8c: Uint8ClampedArray,\n  i16: Int16Array,\n  ui16: Uint16Array,\n  i32: Int32Array,\n  ui32: Uint32Array,\n  f32: Float32Array,\n  f64: Float64Array,\n  eid: Uint32Array\n};\nvar UNSIGNED_MAX = {\n  uint8: 2 ** 8,\n  uint16: 2 ** 16,\n  uint32: 2 ** 32\n};\n\n// src/Storage.js\nvar roundToMultiple = (mul) => (x) => Math.ceil(x / mul) * mul;\nvar roundToMultiple4 = roundToMultiple(4);\nvar $storeRef = Symbol(\"storeRef\");\nvar $storeSize = Symbol(\"storeSize\");\nvar $storeMaps = Symbol(\"storeMaps\");\nvar $storeFlattened = Symbol(\"storeFlattened\");\nvar $storeBase = Symbol(\"storeBase\");\nvar $storeType = Symbol(\"storeType\");\nvar $storeArrayElementCounts = Symbol(\"storeArrayElementCounts\");\nvar $storeSubarrays = Symbol(\"storeSubarrays\");\nvar $subarrayCursors = Symbol(\"subarrayCursors\");\nvar $subarray = Symbol(\"subarray\");\nvar $subarrayFrom = Symbol(\"subarrayFrom\");\nvar $subarrayTo = Symbol(\"subarrayTo\");\nvar $parentArray = Symbol(\"parentArray\");\nvar $tagStore = Symbol(\"tagStore\");\nvar $queryShadow = Symbol(\"queryShadow\");\nvar $serializeShadow = Symbol(\"serializeShadow\");\nvar $indexType = Symbol(\"indexType\");\nvar $indexBytes = Symbol(\"indexBytes\");\nvar $isEidType = Symbol(\"isEidType\");\nvar stores = {};\nvar resize = (ta, size) => {\n  const newBuffer = new ArrayBuffer(size * ta.BYTES_PER_ELEMENT);\n  const newTa = new ta.constructor(newBuffer);\n  newTa.set(ta, 0);\n  return newTa;\n};\nvar createShadow = (store, key) => {\n  if (!ArrayBuffer.isView(store)) {\n    const shadowStore = store[$parentArray].slice(0);\n    store[key] = store.map((_, eid) => {\n      const { length } = store[eid];\n      const start = length * eid;\n      const end = start + length;\n      return shadowStore.subarray(start, end);\n    });\n  } else {\n    store[key] = store.slice(0);\n  }\n};\nvar resizeSubarray = (metadata, store, storeSize) => {\n  const cursors = metadata[$subarrayCursors];\n  let type = store[$storeType];\n  const length = store[0].length;\n  const indexType = length <= UNSIGNED_MAX.uint8 ? TYPES_ENUM.ui8 : length <= UNSIGNED_MAX.uint16 ? TYPES_ENUM.ui16 : TYPES_ENUM.ui32;\n  if (cursors[type] === 0) {\n    const arrayElementCount = metadata[$storeArrayElementCounts][type];\n    const array = new TYPES[type](roundToMultiple4(arrayElementCount * storeSize));\n    array.set(metadata[$storeSubarrays][type]);\n    metadata[$storeSubarrays][type] = array;\n    array[$indexType] = TYPES_NAMES[indexType];\n    array[$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n  }\n  const start = cursors[type];\n  const end = start + storeSize * length;\n  cursors[type] = end;\n  store[$parentArray] = metadata[$storeSubarrays][type].subarray(start, end);\n  for (let eid = 0; eid < storeSize; eid++) {\n    const start2 = length * eid;\n    const end2 = start2 + length;\n    store[eid] = store[$parentArray].subarray(start2, end2);\n    store[eid][$indexType] = TYPES_NAMES[indexType];\n    store[eid][$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    store[eid][$subarray] = true;\n  }\n};\nvar resizeRecursive = (metadata, store, size) => {\n  Object.keys(store).forEach((key) => {\n    const ta = store[key];\n    if (Array.isArray(ta)) {\n      resizeSubarray(metadata, ta, size);\n      store[$storeFlattened].push(ta);\n    } else if (ArrayBuffer.isView(ta)) {\n      store[key] = resize(ta, size);\n      store[$storeFlattened].push(store[key]);\n    } else if (typeof ta === \"object\") {\n      resizeRecursive(metadata, store[key], size);\n    }\n  });\n};\nvar resizeStore = (store, size) => {\n  if (store[$tagStore])\n    return;\n  store[$storeSize] = size;\n  store[$storeFlattened].length = 0;\n  Object.keys(store[$subarrayCursors]).forEach((k) => {\n    store[$subarrayCursors][k] = 0;\n  });\n  resizeRecursive(store, store, size);\n};\nvar resetStoreFor = (store, eid) => {\n  if (store[$storeFlattened]) {\n    store[$storeFlattened].forEach((ta) => {\n      if (ArrayBuffer.isView(ta))\n        ta[eid] = 0;\n      else\n        ta[eid].fill(0);\n    });\n  }\n};\nvar createTypeStore = (type, length) => {\n  const totalBytes = length * TYPES[type].BYTES_PER_ELEMENT;\n  const buffer = new ArrayBuffer(totalBytes);\n  const store = new TYPES[type](buffer);\n  store[$isEidType] = type === TYPES_ENUM.eid;\n  return store;\n};\nvar parentArray = (store) => store[$parentArray];\nvar createArrayStore = (metadata, type, length) => {\n  const storeSize = metadata[$storeSize];\n  const store = Array(storeSize).fill(0);\n  store[$storeType] = type;\n  store[$isEidType] = type === TYPES_ENUM.eid;\n  const cursors = metadata[$subarrayCursors];\n  const indexType = length <= UNSIGNED_MAX.uint8 ? TYPES_ENUM.ui8 : length <= UNSIGNED_MAX.uint16 ? TYPES_ENUM.ui16 : TYPES_ENUM.ui32;\n  if (!length)\n    throw new Error(\"bitECS - Must define component array length\");\n  if (!TYPES[type])\n    throw new Error(`bitECS - Invalid component array property type ${type}`);\n  if (!metadata[$storeSubarrays][type]) {\n    const arrayElementCount = metadata[$storeArrayElementCounts][type];\n    const array = new TYPES[type](roundToMultiple4(arrayElementCount * storeSize));\n    array[$indexType] = TYPES_NAMES[indexType];\n    array[$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    metadata[$storeSubarrays][type] = array;\n  }\n  const start = cursors[type];\n  const end = start + storeSize * length;\n  cursors[type] = end;\n  store[$parentArray] = metadata[$storeSubarrays][type].subarray(start, end);\n  for (let eid = 0; eid < storeSize; eid++) {\n    const start2 = length * eid;\n    const end2 = start2 + length;\n    store[eid] = store[$parentArray].subarray(start2, end2);\n    store[eid][$indexType] = TYPES_NAMES[indexType];\n    store[eid][$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    store[eid][$subarray] = true;\n  }\n  return store;\n};\nvar isArrayType = (x) => Array.isArray(x) && typeof x[0] === \"string\" && typeof x[1] === \"number\";\nvar createStore = (schema, size) => {\n  const $store = Symbol(\"store\");\n  if (!schema || !Object.keys(schema).length) {\n    stores[$store] = {\n      [$storeSize]: size,\n      [$tagStore]: true,\n      [$storeBase]: () => stores[$store]\n    };\n    return stores[$store];\n  }\n  schema = JSON.parse(JSON.stringify(schema));\n  const arrayElementCounts = {};\n  const collectArrayElementCounts = (s) => {\n    const keys = Object.keys(s);\n    for (const k of keys) {\n      if (isArrayType(s[k])) {\n        if (!arrayElementCounts[s[k][0]])\n          arrayElementCounts[s[k][0]] = 0;\n        arrayElementCounts[s[k][0]] += s[k][1];\n      } else if (s[k] instanceof Object) {\n        collectArrayElementCounts(s[k]);\n      }\n    }\n  };\n  collectArrayElementCounts(schema);\n  const metadata = {\n    [$storeSize]: size,\n    [$storeMaps]: {},\n    [$storeSubarrays]: {},\n    [$storeRef]: $store,\n    [$subarrayCursors]: Object.keys(TYPES).reduce((a, type) => ({ ...a, [type]: 0 }), {}),\n    [$storeFlattened]: [],\n    [$storeArrayElementCounts]: arrayElementCounts\n  };\n  if (schema instanceof Object && Object.keys(schema).length) {\n    const recursiveTransform = (a, k) => {\n      if (typeof a[k] === \"string\") {\n        a[k] = createTypeStore(a[k], size);\n        a[k][$storeBase] = () => stores[$store];\n        metadata[$storeFlattened].push(a[k]);\n      } else if (isArrayType(a[k])) {\n        const [type, length] = a[k];\n        a[k] = createArrayStore(metadata, type, length);\n        a[k][$storeBase] = () => stores[$store];\n        metadata[$storeFlattened].push(a[k]);\n      } else if (a[k] instanceof Object) {\n        a[k] = Object.keys(a[k]).reduce(recursiveTransform, a[k]);\n      }\n      return a;\n    };\n    stores[$store] = Object.assign(Object.keys(schema).reduce(recursiveTransform, schema), metadata);\n    stores[$store][$storeBase] = () => stores[$store];\n    return stores[$store];\n  }\n};\n\n// src/Util.js\nvar SparseSet = () => {\n  const dense = [];\n  const sparse = [];\n  dense.sort = function(comparator) {\n    const result = Array.prototype.sort.call(this, comparator);\n    for (let i = 0; i < dense.length; i++) {\n      sparse[dense[i]] = i;\n    }\n    return result;\n  };\n  const has = (val) => dense[sparse[val]] === val;\n  const add = (val) => {\n    if (has(val))\n      return;\n    sparse[val] = dense.push(val) - 1;\n  };\n  const remove = (val) => {\n    if (!has(val))\n      return;\n    const index = sparse[val];\n    const swapped = dense.pop();\n    if (swapped !== val) {\n      dense[index] = swapped;\n      sparse[swapped] = index;\n    }\n  };\n  return {\n    add,\n    remove,\n    has,\n    sparse,\n    dense\n  };\n};\n\n// src/Serialize.js\nvar DESERIALIZE_MODE = {\n  REPLACE: 0,\n  APPEND: 1,\n  MAP: 2\n};\nvar resized = false;\nvar setSerializationResized = (v) => {\n  resized = v;\n};\nvar concat = (a, v) => a.concat(v);\nvar not = (fn) => (v) => !fn(v);\nvar storeFlattened = (c) => c[$storeFlattened];\nvar isFullComponent = storeFlattened;\nvar isProperty = not(isFullComponent);\nvar isModifier = (c) => typeof c === \"function\";\nvar isNotModifier = not(isModifier);\nvar isChangedModifier = (c) => isModifier(c) && c()[1] === \"changed\";\nvar isWorld = (w) => Object.getOwnPropertySymbols(w).includes($componentMap);\nvar fromModifierToComponent = (c) => c()[0];\nvar canonicalize = (target) => {\n  if (isWorld(target))\n    return [[], /* @__PURE__ */ new Map()];\n  const fullComponentProps = target.filter(isNotModifier).filter(isFullComponent).map(storeFlattened).reduce(concat, []);\n  const changedComponentProps = target.filter(isChangedModifier).map(fromModifierToComponent).filter(isFullComponent).map(storeFlattened).reduce(concat, []);\n  const props = target.filter(isNotModifier).filter(isProperty);\n  const changedProps = target.filter(isChangedModifier).map(fromModifierToComponent).filter(isProperty);\n  const componentProps = [...fullComponentProps, ...props, ...changedComponentProps, ...changedProps];\n  const allChangedProps = [...changedComponentProps, ...changedProps].reduce((map, prop) => {\n    const $ = Symbol();\n    createShadow(prop, $);\n    map.set(prop, $);\n    return map;\n  }, /* @__PURE__ */ new Map());\n  return [componentProps, allChangedProps];\n};\nvar defineSerializer = (target, maxBytes = 2e7) => {\n  const worldSerializer = isWorld(target);\n  let [componentProps, changedProps] = canonicalize(target);\n  const buffer = new ArrayBuffer(maxBytes);\n  const view = new DataView(buffer);\n  const entityComponentCache = /* @__PURE__ */ new Map();\n  return (ents) => {\n    if (resized) {\n      [componentProps, changedProps] = canonicalize(target);\n      resized = false;\n    }\n    if (worldSerializer) {\n      componentProps = [];\n      target[$componentMap].forEach((c, component) => {\n        if (component[$storeFlattened])\n          componentProps.push(...component[$storeFlattened]);\n        else\n          componentProps.push(component);\n      });\n    }\n    let world;\n    if (Object.getOwnPropertySymbols(ents).includes($componentMap)) {\n      world = ents;\n      ents = ents[$entityArray];\n    } else {\n      world = eidToWorld.get(ents[0]);\n    }\n    let where = 0;\n    if (!ents.length)\n      return buffer.slice(0, where);\n    const cache = /* @__PURE__ */ new Map();\n    for (let pid = 0; pid < componentProps.length; pid++) {\n      const prop = componentProps[pid];\n      const component = prop[$storeBase]();\n      const $diff = changedProps.get(prop);\n      const shadow = $diff ? prop[$diff] : null;\n      if (!cache.has(component))\n        cache.set(component, /* @__PURE__ */ new Map());\n      view.setUint8(where, pid);\n      where += 1;\n      const countWhere = where;\n      where += 4;\n      let writeCount = 0;\n      for (let i = 0; i < ents.length; i++) {\n        const eid = ents[i];\n        let componentCache = entityComponentCache.get(eid);\n        if (!componentCache)\n          componentCache = entityComponentCache.set(eid, /* @__PURE__ */ new Set()).get(eid);\n        componentCache.add(eid);\n        const newlyAddedComponent = shadow && cache.get(component).get(eid) || !componentCache.has(component) && hasComponent(world, component, eid);\n        cache.get(component).set(eid, newlyAddedComponent);\n        if (newlyAddedComponent) {\n          componentCache.add(component);\n        } else if (!hasComponent(world, component, eid)) {\n          componentCache.delete(component);\n          continue;\n        }\n        const rewindWhere = where;\n        view.setUint32(where, eid);\n        where += 4;\n        if (prop[$tagStore]) {\n          writeCount++;\n          continue;\n        }\n        if (ArrayBuffer.isView(prop[eid])) {\n          const type = prop[eid].constructor.name.replace(\"Array\", \"\");\n          const indexType = prop[eid][$indexType];\n          const indexBytes = prop[eid][$indexBytes];\n          const countWhere2 = where;\n          where += indexBytes;\n          let arrayWriteCount = 0;\n          for (let i2 = 0; i2 < prop[eid].length; i2++) {\n            if (shadow) {\n              const changed = shadow[eid][i2] !== prop[eid][i2];\n              shadow[eid][i2] = prop[eid][i2];\n              if (!changed && !newlyAddedComponent) {\n                continue;\n              }\n            }\n            view[`set${indexType}`](where, i2);\n            where += indexBytes;\n            const value = prop[eid][i2];\n            view[`set${type}`](where, value);\n            where += prop[eid].BYTES_PER_ELEMENT;\n            arrayWriteCount++;\n          }\n          if (arrayWriteCount > 0) {\n            view[`set${indexType}`](countWhere2, arrayWriteCount);\n            writeCount++;\n          } else {\n            where = rewindWhere;\n            continue;\n          }\n        } else {\n          if (shadow) {\n            const changed = shadow[eid] !== prop[eid];\n            shadow[eid] = prop[eid];\n            if (!changed && !newlyAddedComponent) {\n              where = rewindWhere;\n              continue;\n            }\n          }\n          const type = prop.constructor.name.replace(\"Array\", \"\");\n          view[`set${type}`](where, prop[eid]);\n          where += prop.BYTES_PER_ELEMENT;\n          writeCount++;\n        }\n      }\n      if (writeCount > 0) {\n        view.setUint32(countWhere, writeCount);\n      } else {\n        where -= 5;\n      }\n    }\n    return buffer.slice(0, where);\n  };\n};\nvar newEntities = /* @__PURE__ */ new Map();\nvar defineDeserializer = (target) => {\n  const isWorld2 = Object.getOwnPropertySymbols(target).includes($componentMap);\n  let [componentProps] = canonicalize(target);\n  const deserializedEntities = /* @__PURE__ */ new Set();\n  return (world, packet, mode = 0) => {\n    newEntities.clear();\n    if (resized) {\n      [componentProps] = canonicalize(target);\n      resized = false;\n    }\n    if (isWorld2) {\n      componentProps = [];\n      target[$componentMap].forEach((c, component) => {\n        if (component[$storeFlattened])\n          componentProps.push(...component[$storeFlattened]);\n        else\n          componentProps.push(component);\n      });\n    }\n    const localEntities = world[$localEntities];\n    const localEntityLookup = world[$localEntityLookup];\n    const view = new DataView(packet);\n    let where = 0;\n    while (where < packet.byteLength) {\n      const pid = view.getUint8(where);\n      where += 1;\n      const entityCount = view.getUint32(where);\n      where += 4;\n      const prop = componentProps[pid];\n      for (let i = 0; i < entityCount; i++) {\n        let eid = view.getUint32(where);\n        where += 4;\n        if (mode === DESERIALIZE_MODE.MAP) {\n          if (localEntities.has(eid)) {\n            eid = localEntities.get(eid);\n          } else if (newEntities.has(eid)) {\n            eid = newEntities.get(eid);\n          } else {\n            const newEid = addEntity(world);\n            localEntities.set(eid, newEid);\n            localEntityLookup.set(newEid, eid);\n            newEntities.set(eid, newEid);\n            eid = newEid;\n          }\n        }\n        if (mode === DESERIALIZE_MODE.APPEND || mode === DESERIALIZE_MODE.REPLACE && !world[$entitySparseSet].has(eid)) {\n          const newEid = newEntities.get(eid) || addEntity(world);\n          newEntities.set(eid, newEid);\n          eid = newEid;\n        }\n        const component = prop[$storeBase]();\n        if (!hasComponent(world, component, eid)) {\n          addComponent(world, component, eid);\n        }\n        deserializedEntities.add(eid);\n        if (component[$tagStore]) {\n          continue;\n        }\n        if (ArrayBuffer.isView(prop[eid])) {\n          const array = prop[eid];\n          const count = view[`get${array[$indexType]}`](where);\n          where += array[$indexBytes];\n          for (let i2 = 0; i2 < count; i2++) {\n            const index = view[`get${array[$indexType]}`](where);\n            where += array[$indexBytes];\n            const value = view[`get${array.constructor.name.replace(\"Array\", \"\")}`](where);\n            where += array.BYTES_PER_ELEMENT;\n            if (prop[$isEidType]) {\n              let localEid;\n              if (localEntities.has(value)) {\n                localEid = localEntities.get(value);\n              } else if (newEntities.has(value)) {\n                localEid = newEntities.get(value);\n              } else {\n                const newEid = addEntity(world);\n                localEntities.set(value, newEid);\n                localEntityLookup.set(newEid, value);\n                newEntities.set(value, newEid);\n                localEid = newEid;\n              }\n              prop[eid][index] = localEid;\n            } else\n              prop[eid][index] = value;\n          }\n        } else {\n          const value = view[`get${prop.constructor.name.replace(\"Array\", \"\")}`](where);\n          where += prop.BYTES_PER_ELEMENT;\n          if (prop[$isEidType]) {\n            let localEid;\n            if (localEntities.has(value)) {\n              localEid = localEntities.get(value);\n            } else if (newEntities.has(value)) {\n              localEid = newEntities.get(value);\n            } else {\n              const newEid = addEntity(world);\n              localEntities.set(value, newEid);\n              localEntityLookup.set(newEid, value);\n              newEntities.set(value, newEid);\n              localEid = newEid;\n            }\n            prop[eid] = localEid;\n          } else\n            prop[eid] = value;\n        }\n      }\n    }\n    const ents = Array.from(deserializedEntities);\n    deserializedEntities.clear();\n    return ents;\n  };\n};\n\n// src/Entity.js\nvar $entityMasks = Symbol(\"entityMasks\");\nvar $entityComponents = Symbol(\"entityComponents\");\nvar $entitySparseSet = Symbol(\"entitySparseSet\");\nvar $entityArray = Symbol(\"entityArray\");\nvar $entityIndices = Symbol(\"entityIndices\");\nvar $removedEntities = Symbol(\"removedEntities\");\nvar defaultSize = 1e5;\nvar globalEntityCursor = 0;\nvar globalSize = defaultSize;\nvar resizeThreshold = () => globalSize - globalSize / 5;\nvar getGlobalSize = () => globalSize;\nvar removed = [];\nvar defaultRemovedReuseThreshold = 0.01;\nvar removedReuseThreshold = defaultRemovedReuseThreshold;\nvar resetGlobals = () => {\n  globalSize = defaultSize;\n  globalEntityCursor = 0;\n  removedReuseThreshold = defaultRemovedReuseThreshold;\n  removed.length = 0;\n};\nvar setDefaultSize = (newSize) => {\n  const oldSize = globalSize;\n  defaultSize = newSize;\n  resetGlobals();\n  globalSize = newSize;\n  resizeWorlds(newSize);\n  resizeComponents(newSize);\n  setSerializationResized(true);\n  console.info(`\\u{1F47E} bitECS - resizing all data stores from ${oldSize} to ${newSize}`);\n};\nvar setRemovedRecycleThreshold = (newThreshold) => {\n  removedReuseThreshold = newThreshold;\n};\nvar getEntityCursor = () => globalEntityCursor;\nvar eidToWorld = /* @__PURE__ */ new Map();\nvar addEntity = (world) => {\n  if (globalEntityCursor >= resizeThreshold()) {\n    const size = globalSize;\n    const amount = Math.ceil(size / 2 / 4) * 4;\n    setDefaultSize(size + amount);\n  }\n  const eid = removed.length > Math.round(defaultSize * removedReuseThreshold) ? removed.shift() : globalEntityCursor++;\n  world[$entitySparseSet].add(eid);\n  eidToWorld.set(eid, world);\n  world[$notQueries].forEach((q) => {\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n  });\n  world[$entityComponents].set(eid, /* @__PURE__ */ new Set());\n  return eid;\n};\nvar removeEntity = (world, eid) => {\n  if (!world[$entitySparseSet].has(eid))\n    return;\n  world[$queries].forEach((q) => {\n    queryRemoveEntity(world, q, eid);\n  });\n  removed.push(eid);\n  world[$entitySparseSet].remove(eid);\n  world[$entityComponents].delete(eid);\n  world[$localEntities].delete(world[$localEntityLookup].get(eid));\n  world[$localEntityLookup].delete(eid);\n  for (let i = 0; i < world[$entityMasks].length; i++)\n    world[$entityMasks][i][eid] = 0;\n};\nvar getEntityComponents = (world, eid) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  return Array.from(world[$entityComponents].get(eid));\n};\nvar entityExists = (world, eid) => world[$entitySparseSet].has(eid);\n\n// src/Query.js\nfunction Not(c) {\n  return () => [c, \"not\"];\n}\nfunction Changed(c) {\n  return () => [c, \"changed\"];\n}\nfunction Any(...comps) {\n  return function QueryAny() {\n    return comps;\n  };\n}\nfunction All(...comps) {\n  return function QueryAll() {\n    return comps;\n  };\n}\nfunction None(...comps) {\n  return function QueryNone() {\n    return comps;\n  };\n}\nvar $queries = Symbol(\"queries\");\nvar $notQueries = Symbol(\"notQueries\");\nvar $queryAny = Symbol(\"queryAny\");\nvar $queryAll = Symbol(\"queryAll\");\nvar $queryNone = Symbol(\"queryNone\");\nvar $queryMap = Symbol(\"queryMap\");\nvar $dirtyQueries = Symbol(\"$dirtyQueries\");\nvar $queryComponents = Symbol(\"queryComponents\");\nvar $enterQuery = Symbol(\"enterQuery\");\nvar $exitQuery = Symbol(\"exitQuery\");\nvar enterQuery = (query) => (world) => {\n  if (!world[$queryMap].has(query))\n    registerQuery(world, query);\n  const q = world[$queryMap].get(query);\n  const entered = q.entered.dense.slice();\n  q.entered = SparseSet();\n  return entered;\n};\nvar exitQuery = (query) => (world) => {\n  if (!world[$queryMap].has(query))\n    registerQuery(world, query);\n  const q = world[$queryMap].get(query);\n  const exited = q.exited.dense.slice();\n  q.exited = SparseSet();\n  return exited;\n};\nvar registerQuery = (world, query) => {\n  const components2 = [];\n  const notComponents = [];\n  const changedComponents = [];\n  query[$queryComponents].forEach((c) => {\n    if (typeof c === \"function\") {\n      const [comp, mod] = c();\n      if (!world[$componentMap].has(comp))\n        registerComponent(world, comp);\n      if (mod === \"not\") {\n        notComponents.push(comp);\n      }\n      if (mod === \"changed\") {\n        changedComponents.push(comp);\n        components2.push(comp);\n      }\n    } else {\n      if (!world[$componentMap].has(c))\n        registerComponent(world, c);\n      components2.push(c);\n    }\n  });\n  const mapComponents = (c) => world[$componentMap].get(c);\n  const allComponents = components2.concat(notComponents).map(mapComponents);\n  const sparseSet = SparseSet();\n  const archetypes = [];\n  const changed = [];\n  const toRemove = SparseSet();\n  const entered = SparseSet();\n  const exited = SparseSet();\n  const generations = allComponents.map((c) => c.generationId).reduce((a, v) => {\n    if (a.includes(v))\n      return a;\n    a.push(v);\n    return a;\n  }, []);\n  const reduceBitflags = (a, c) => {\n    if (!a[c.generationId])\n      a[c.generationId] = 0;\n    a[c.generationId] |= c.bitflag;\n    return a;\n  };\n  const masks = components2.map(mapComponents).reduce(reduceBitflags, {});\n  const notMasks = notComponents.map(mapComponents).reduce(reduceBitflags, {});\n  const hasMasks = allComponents.reduce(reduceBitflags, {});\n  const flatProps = components2.filter((c) => !c[$tagStore]).map((c) => Object.getOwnPropertySymbols(c).includes($storeFlattened) ? c[$storeFlattened] : [c]).reduce((a, v) => a.concat(v), []);\n  const shadows = [];\n  const q = Object.assign(sparseSet, {\n    archetypes,\n    changed,\n    components: components2,\n    notComponents,\n    changedComponents,\n    allComponents,\n    masks,\n    notMasks,\n    hasMasks,\n    generations,\n    flatProps,\n    toRemove,\n    entered,\n    exited,\n    shadows\n  });\n  world[$queryMap].set(query, q);\n  world[$queries].add(q);\n  allComponents.forEach((c) => {\n    c.queries.add(q);\n  });\n  if (notComponents.length)\n    world[$notQueries].add(q);\n  for (let eid = 0; eid < getEntityCursor(); eid++) {\n    if (!world[$entitySparseSet].has(eid))\n      continue;\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n  }\n};\nvar generateShadow = (q, pid) => {\n  const $ = Symbol();\n  const prop = q.flatProps[pid];\n  createShadow(prop, $);\n  q.shadows[pid] = prop[$];\n  return prop[$];\n};\nvar diff = (q, clearDiff) => {\n  if (clearDiff)\n    q.changed = [];\n  const { flatProps, shadows } = q;\n  for (let i = 0; i < q.dense.length; i++) {\n    const eid = q.dense[i];\n    let dirty = false;\n    for (let pid = 0; pid < flatProps.length; pid++) {\n      const prop = flatProps[pid];\n      const shadow = shadows[pid] || generateShadow(q, pid);\n      if (ArrayBuffer.isView(prop[eid])) {\n        for (let i2 = 0; i2 < prop[eid].length; i2++) {\n          if (prop[eid][i2] !== shadow[eid][i2]) {\n            dirty = true;\n            break;\n          }\n        }\n        shadow[eid].set(prop[eid]);\n      } else {\n        if (prop[eid] !== shadow[eid]) {\n          dirty = true;\n          shadow[eid] = prop[eid];\n        }\n      }\n    }\n    if (dirty)\n      q.changed.push(eid);\n  }\n  return q.changed;\n};\nvar flatten = (a, v) => a.concat(v);\nvar aggregateComponentsFor = (mod) => (x) => x.filter((f) => f.name === mod().constructor.name).reduce(flatten);\nvar getAnyComponents = aggregateComponentsFor(Any);\nvar getAllComponents = aggregateComponentsFor(All);\nvar getNoneComponents = aggregateComponentsFor(None);\nvar defineQuery = (...args) => {\n  let components2;\n  let any, all, none;\n  if (Array.isArray(args[0])) {\n    components2 = args[0];\n  } else {\n  }\n  if (components2 === void 0 || components2[$componentMap] !== void 0) {\n    return (world) => world ? world[$entityArray] : components2[$entityArray];\n  }\n  const query = function(world, clearDiff = true) {\n    if (!world[$queryMap].has(query))\n      registerQuery(world, query);\n    const q = world[$queryMap].get(query);\n    commitRemovals(world);\n    if (q.changedComponents.length)\n      return diff(q, clearDiff);\n    return q.dense;\n  };\n  query[$queryComponents] = components2;\n  query[$queryAny] = any;\n  query[$queryAll] = all;\n  query[$queryNone] = none;\n  return query;\n};\nvar queryCheckEntity = (world, q, eid) => {\n  const { masks, notMasks, generations } = q;\n  let or = 0;\n  for (let i = 0; i < generations.length; i++) {\n    const generationId = generations[i];\n    const qMask = masks[generationId];\n    const qNotMask = notMasks[generationId];\n    const eMask = world[$entityMasks][generationId][eid];\n    if (qNotMask && (eMask & qNotMask) !== 0) {\n      return false;\n    }\n    if (qMask && (eMask & qMask) !== qMask) {\n      return false;\n    }\n  }\n  return true;\n};\nvar queryAddEntity = (q, eid) => {\n  q.toRemove.remove(eid);\n  q.entered.add(eid);\n  q.add(eid);\n};\nvar queryCommitRemovals = (q) => {\n  for (let i = q.toRemove.dense.length - 1; i >= 0; i--) {\n    const eid = q.toRemove.dense[i];\n    q.toRemove.remove(eid);\n    q.remove(eid);\n  }\n};\nvar commitRemovals = (world) => {\n  if (!world[$dirtyQueries].size)\n    return;\n  world[$dirtyQueries].forEach(queryCommitRemovals);\n  world[$dirtyQueries].clear();\n};\nvar queryRemoveEntity = (world, q, eid) => {\n  if (!q.has(eid) || q.toRemove.has(eid))\n    return;\n  q.toRemove.add(eid);\n  world[$dirtyQueries].add(q);\n  q.exited.add(eid);\n};\nvar resetChangedQuery = (world, query) => {\n  const q = world[$queryMap].get(query);\n  q.changed = [];\n};\nvar removeQuery = (world, query) => {\n  const q = world[$queryMap].get(query);\n  world[$queries].delete(q);\n  world[$queryMap].delete(query);\n};\n\n// src/Component.js\nvar $componentMap = Symbol(\"componentMap\");\nvar components = [];\nvar resizeComponents = (size) => {\n  components.forEach((component) => resizeStore(component, size));\n};\nvar defineComponent = (schema, size) => {\n  const component = createStore(schema, size || getGlobalSize());\n  if (schema && Object.keys(schema).length)\n    components.push(component);\n  return component;\n};\nvar incrementBitflag = (world) => {\n  world[$bitflag] *= 2;\n  if (world[$bitflag] >= 2 ** 31) {\n    world[$bitflag] = 1;\n    world[$entityMasks].push(new Uint32Array(world[$size]));\n  }\n};\nvar registerComponent = (world, component) => {\n  if (!component)\n    throw new Error(`bitECS - Cannot register null or undefined component`);\n  const queries = /* @__PURE__ */ new Set();\n  const notQueries = /* @__PURE__ */ new Set();\n  const changedQueries = /* @__PURE__ */ new Set();\n  world[$queries].forEach((q) => {\n    if (q.allComponents.includes(component)) {\n      queries.add(q);\n    }\n  });\n  world[$componentMap].set(component, {\n    generationId: world[$entityMasks].length - 1,\n    bitflag: world[$bitflag],\n    store: component,\n    queries,\n    notQueries,\n    changedQueries\n  });\n  if (component[$storeSize] < getGlobalSize()) {\n    resizeStore(component, getGlobalSize());\n  }\n  incrementBitflag(world);\n};\nvar registerComponents = (world, components2) => {\n  components2.forEach((c) => registerComponent(world, c));\n};\nvar hasComponent = (world, component, eid) => {\n  const registeredComponent = world[$componentMap].get(component);\n  if (!registeredComponent)\n    return false;\n  const { generationId, bitflag } = registeredComponent;\n  const mask = world[$entityMasks][generationId][eid];\n  return (mask & bitflag) === bitflag;\n};\nvar addComponent = (world, component, eid, reset = false) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  if (!world[$componentMap].has(component))\n    registerComponent(world, component);\n  if (hasComponent(world, component, eid))\n    return;\n  const c = world[$componentMap].get(component);\n  const { generationId, bitflag, queries, notQueries } = c;\n  world[$entityMasks][generationId][eid] |= bitflag;\n  queries.forEach((q) => {\n    if (q.toRemove.has(eid))\n      q.toRemove.remove(eid);\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n    if (!match)\n      queryRemoveEntity(world, q, eid);\n  });\n  world[$entityComponents].get(eid).add(component);\n  if (reset)\n    resetStoreFor(component, eid);\n};\nvar removeComponent = (world, component, eid, reset = true) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  if (!hasComponent(world, component, eid))\n    return;\n  const c = world[$componentMap].get(component);\n  const { generationId, bitflag, queries } = c;\n  world[$entityMasks][generationId][eid] &= ~bitflag;\n  queries.forEach((q) => {\n    if (q.toRemove.has(eid))\n      q.toRemove.remove(eid);\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n    if (!match)\n      queryRemoveEntity(world, q, eid);\n  });\n  world[$entityComponents].get(eid).delete(component);\n  if (reset)\n    resetStoreFor(component, eid);\n};\n\n// src/World.js\nvar $size = Symbol(\"size\");\nvar $resizeThreshold = Symbol(\"resizeThreshold\");\nvar $bitflag = Symbol(\"bitflag\");\nvar $archetypes = Symbol(\"archetypes\");\nvar $localEntities = Symbol(\"localEntities\");\nvar $localEntityLookup = Symbol(\"localEntityLookup\");\nvar worlds = [];\nvar resizeWorlds = (size) => {\n  worlds.forEach((world) => {\n    world[$size] = size;\n    for (let i = 0; i < world[$entityMasks].length; i++) {\n      const masks = world[$entityMasks][i];\n      world[$entityMasks][i] = resize(masks, size);\n    }\n    world[$resizeThreshold] = world[$size] - world[$size] / 5;\n  });\n};\nvar createWorld = (...args) => {\n  const world = typeof args[0] === \"object\" ? args[0] : {};\n  const size = typeof args[0] === \"number\" ? args[0] : typeof args[1] === \"number\" ? args[1] : getGlobalSize();\n  resetWorld(world, size);\n  worlds.push(world);\n  return world;\n};\nvar resetWorld = (world, size = getGlobalSize()) => {\n  world[$size] = size;\n  if (world[$entityArray])\n    world[$entityArray].forEach((eid) => removeEntity(world, eid));\n  world[$entityMasks] = [new Uint32Array(size)];\n  world[$entityComponents] = /* @__PURE__ */ new Map();\n  world[$archetypes] = [];\n  world[$entitySparseSet] = SparseSet();\n  world[$entityArray] = world[$entitySparseSet].dense;\n  world[$bitflag] = 1;\n  world[$componentMap] = /* @__PURE__ */ new Map();\n  world[$queryMap] = /* @__PURE__ */ new Map();\n  world[$queries] = /* @__PURE__ */ new Set();\n  world[$notQueries] = /* @__PURE__ */ new Set();\n  world[$dirtyQueries] = /* @__PURE__ */ new Set();\n  world[$localEntities] = /* @__PURE__ */ new Map();\n  world[$localEntityLookup] = /* @__PURE__ */ new Map();\n  return world;\n};\nvar deleteWorld = (world) => {\n  Object.getOwnPropertySymbols(world).forEach(($) => {\n    delete world[$];\n  });\n  Object.keys(world).forEach((key) => {\n    delete world[key];\n  });\n  worlds.splice(worlds.indexOf(world), 1);\n};\nvar getWorldComponents = (world) => Array.from(world[$componentMap].keys());\nvar getAllEntities = (world) => world[$entitySparseSet].dense.slice(0);\n\n// src/System.js\nvar defineSystem = (update) => (world, ...args) => {\n  update(world, ...args);\n  return world;\n};\n\n// src/index.js\nvar pipe = (...fns) => (input) => {\n  let tmp = input;\n  for (let i = 0; i < fns.length; i++) {\n    const fn = fns[i];\n    tmp = fn(tmp);\n  }\n  return tmp;\n};\nvar Types = TYPES_ENUM;\nexport {\n  Changed,\n  DESERIALIZE_MODE,\n  Not,\n  Types,\n  addComponent,\n  addEntity,\n  commitRemovals,\n  createWorld,\n  defineComponent,\n  defineDeserializer,\n  defineQuery,\n  defineSerializer,\n  defineSystem,\n  deleteWorld,\n  enterQuery,\n  entityExists,\n  exitQuery,\n  getAllEntities,\n  getEntityComponents,\n  getWorldComponents,\n  hasComponent,\n  parentArray,\n  pipe,\n  registerComponent,\n  registerComponents,\n  removeComponent,\n  removeEntity,\n  removeQuery,\n  resetChangedQuery,\n  resetWorld,\n  setDefaultSize,\n  setRemovedRecycleThreshold\n};\n//# sourceMappingURL=index.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"assets/js/\" + chunkId + \"-\" + {\"30\":\"33feee8912fbb9f86cb7\",\"56\":\"6355c5185b4e4ce6dcd8\",\"76\":\"e33c44d6605d1ba4d9e7\",\"116\":\"7bcf915010ef5cfec6b0\",\"160\":\"3a627c660bdcd661b30f\",\"188\":\"72828fae6854d71bb4e4\",\"297\":\"027c0244da655969168e\",\"441\":\"5f411d5aacab400324d8\",\"540\":\"88f7021158d167173ca5\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 425;","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t425: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkhubs\"] = self[\"webpackChunkhubs\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [495,542,119], function() { return __webpack_require__(90091); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","Object","defineProperty","exports","value","isUnicodeLanguageSubtag","isUnicodeScriptSubtag","isUnicodeRegionSubtag","isStructurallyValidLanguageTag","parseUnicodeLanguageId","parseUnicodeLocaleId","getCanonicalLocales","tslib_1","parser_1","emitter_1","canonicalizer_1","locales","undefined","seen","_i","locales_1","length","locale","canonicalizedTag","emitUnicodeLocaleId","canonicalizeUnicodeLocaleId","indexOf","push","CanonicalizeLocaleList","parser_2","enumerable","get","__exportStar","variantAlias","scriptAlias","territoryAlias","languageAlias","canonicalizeUnicodeLanguageId","aliases_generated_1","likelySubtags_generated_1","canonicalizeKVs","arr","all","result","arr_1","kv","toLowerCase","sort","compareKV","t1","t2","compareExtension","e1","e2","type","mergeVariants","v1","v2","__spreadArray","v2_1","v","unicodeLanguageId","finalLangAst","variants","replacedLang_1","_a","variant","emitUnicodeLanguageId","lang","replacedLangAst","split","SEPARATOR","script","region","replacedLang_2","replacedLang_3","replacedLang","toUpperCase","regionAlias","replacedRegion","regions","likelySubtag","likelySubtags","likelyRegion","slice","i","alias","isUnicodeVariantSubtag","extensions","extension","keywords","attributes","strs","keys","reduce","str","fields","filter","Boolean","join","chunks","extensions_1","ext","apply","concat","ALPHANUM_1_8","ALPHANUM_2_8","ALPHANUM_3_8","KEY_REGEX","TYPE_REGEX","ALPHA_4","OTHER_EXTENSION_TYPE","UNICODE_REGION_SUBTAG_REGEX","UNICODE_VARIANT_SUBTAG_REGEX","UNICODE_LANGUAGE_SUBTAG_REGEX","TKEY_REGEX","test","shift","RangeError","parseUnicodeExtension","keyword","parseKeyword","key","parseTransformedExtension","e","parsePuExtension","exts","parseOtherExtensionValue","tag","__assign","unicodeExtension","transformedExtension","puExtension","otherExtensionMap","parseExtensions","internalSlotMap","WeakMap","x","internalSlots","create","set","Locale","ecma402_abstract_1","intl_getcanonicallocales_1","get_internal_slots_1","__importDefault","RELEVANT_EXTENSION_KEYS","UNICODE_TYPE_REGEX","mergeUnicodeLanguageId","replacement","addLikelySubtags","ast","unicodeLangId","match_1","parts_1","match_2","parts_2","match_3","parts_3","match","Error","parts","opts","this","constructor","TypeError","relevantExtensionKeys","internalSlotsList","default","initializedLocale","toString","options","CoerceOptionsToObject","invariant","language","GetOption","languageId","Intl","applyOptionsToTag","opt","calendar","ca","collation","co","hc","kf","kn","_kn","String","numberingSystem","nu","r","Array","isArray","_b","relevantExtensionKeys_1","entry","_c","keywords_1","optionsValue","applyUnicodeExtensionToTag","hourCycle","caseFirst","numeric","SameValue","prototype","maximize","minimize","maxLocale","removeLikelySubtags","configurable","Symbol","toStringTag","writable","_1","shouldPolyfill","hasIntlGetCanonicalLocalesBug","GetOperands","s","n","ToNumber","isFinite","iv","f","dp","fv","w","t","Math","abs","ft","replace","Number","IntegerDigits","NumberOfFractionDigits","NumberOfFractionDigitsWithoutTrailing","FractionDigits","FractionDigitsWithoutTrailing","InitializePluralRules","intl_localematcher_1","pl","availableLocales","localeData","getDefaultLocale","getInternalSlots","requestedLocales","initializedPluralRules","matcher","localeMatcher","SetNumberFormatDigitOptions","ResolveLocale","ResolvePlural","GetOperands_1","PluralRuleSelect","Type","FormatNumericToString","formattedString","PluralRules","InitializePluralRules_1","ResolvePlural_1","validateInstance","instance","method","_n","fn","resolvedOptions","forEach","field","val","pluralCategories","categories","select","supportedLocalesOf","SupportedLocales","__addLocaleData","data","arguments","data_1","d","add","__defaultLocale","Set","polyfilled","error","ex","ord","v0","t0","n10","n100","supported_locales_1","minimumFractionDigits","supportedLocales","RelativeTimeFormat","InitializeRelativeTimeFormat","format","unit","initializedRelativeTimeFormat","PartitionRelativeTimePattern","ToString","map","el","formatToParts","style","minimizedLocale","getMagnitude","floor","log","LOG10E","repeat","times","setInternalSlot","setMultiInternalSlots","props","k","getInternalSlot","getMultiInternalSlots","slots","isLiteralPart","patternPart","target","name","UNICODE_EXTENSION_SEQUENCE_REGEX","condition","message","Err","RangePatternType","DATE_TIME_PROPS","removalPenalty","additionPenalty","differentNumericTypePenalty","longLessPenalty","longMorePenalty","shortLessPenalty","shortMorePenalty","DATE_TIME_REGEX","expPatternTrimmer","matchSkeletonPattern","len","era","year","month","day","weekday","hour12","hour","minute","second","timeZoneName","skeletonTokenToTable2","c","processDateTimePattern","pattern","literals","pattern12","_","literal","m","parseDateTimeSkeleton","skeleton","rawPattern","rangePatterns","intervalFormatFallback","rangePatterns12","intervalResult","patternParts","pattern_1","pattern12_1","splitRangePattern","source","startRange","endRange","shared","splitFallbackRangePattern","PART_REGEX","splitIndex","exec","index","isNumericType","bestFitFormatMatcherScore","score","DATE_TIME_PROPS_1","prop","optionsProp","formatProp","values","optionsPropIndex","formatPropIndex","delta","max","min","BestFitFormatMatcher","formats","bestScore","bestFormat","formats_1","skeletonFormat","patternFormat","skeletonValue","patternValue","requestedValue","CanonicalizeTimeZoneName","tz","tzData","uppercaseLinks","uppercasedTz","uppercasedZones","z","ianaTimeZone","o","NaN","TimeClip","time","number","isNaN","integer","ToInteger","ToObject","arg","y","is","ArrayCreate","HasOwnProperty","hasOwnProperty","call","MS_PER_DAY","mod","Day","WeekDay","DayFromYear","Date","UTC","TimeFromYear","YearFromTime","getUTCFullYear","DaysInYear","DayWithinYear","InLeapYear","MonthFromTime","dwy","leap","DateFromTime","mft","HOURS_PER_DAY","MINUTES_PER_HOUR","SECONDS_PER_MINUTE","MS_PER_SECOND","MS_PER_MINUTE","MS_PER_HOUR","HourFromTime","MinFromTime","SecFromTime","OrdinaryHasInstance","C","O","boundTargetFunction","P","isPrototypeOf","msFromTime","BasicFormatMatcher","DateTimeStyleFormat","dateStyle","timeStyle","dataLocaleData","dateFormat","timeFormat","connector","dateTimeFormat","ToLocalTime","timeZone","zoneData","offset","dst","getApplicableZoneData","timeZoneOffset","inDST","relatedYear","yearName","millisecond","pad","offsetToGmtString","gmtFormat","hourFormat","offsetInMs","offsetInMinutes","mins","hours","positivePattern","negativePattern","offsetStr","FormatDateTimePattern","dtf","getDefaultTimeZone","dataLocale","nfOptions","useGrouping","nf","NumberFormat","nf2Options","minimumIntegerDigits","nf3","nf2","fractionalSecondDigits","nf3Options","tm","patternParts_1","p","pow","timeZoneData","pm","am","PartitionPattern","beginIndex","endIndex","nextIndex","substring","PartitionDateTimePattern","implDetails","FormatDateTime","TABLE_2_FIELDS","PartitionDateTimeRangePattern","rangePattern","tm1","tm2","dateFieldsPracticallyEqual","patternContainsLargerDateField","TABLE_2_FIELDS_1","fieldName","rp","ampm","result_2","result_1","_d","_e","rangePatternPart","partResult","_f","partResult_1","FormatDateTimeRange","FormatDateTimeRangeToParts","part","FormatDateTimeToParts","ToDateTimeOptions","required","defaults","needDefaults","_g","fallback","BestAvailableLocale","candidate","has","pos","lastIndexOf","UnicodeExtensionValue","size","searchValue","start","end","done","requestedLocales_1","noExtensionLocale","availableLocale","LookupMatcher","foundLocale","minimizedAvailableLocaleMap","minimizedAvailableLocales","l","maximizedRequestedLocale","minimizedRequestedLocale","BestFitMatcher","supportedExtension","foundLocaleData","keyLocaleData","supportedExtensionAddition","privateIndex","preExtension","postExtension","IsValidTimeZoneName","zoneNames","DefaultNumberOption","GetNumberOption","property","minimum","maximum","resolveHourCycle","hcDefault","InitializeDateTimeFormat","formatMatcher","isTimeRelated","NOT_A_Z_REGEX","IsWellFormedCurrencyCode","currency","CanonicalCodeForDisplayNames","code","GetOptionsObject","SANCTIONED_UNITS","removeUnitNamespace","SIMPLE_UNITS","IsSanctionedSimpleUnitIdentifier","unitIdentifier","IsWellFormedUnitIdentifier","units","numerator","denominator","ComputeExponentForMagnitude","numberFormat","magnitude","notation","compactDisplay","currencyDisplay","thresholdMap","numbers","short","decimal","long","num","thresholds","magnitudeKey","other","ToRawPrecision","minPrecision","maxPrecision","xFinal","int","xToString","xToStringExponentIndex","xToStringMantissa","xToStringExponent","xToStringMantissaWithoutDecimalPoint","decimalPlaceOffset","round","adjustDecimalPlace","cut","roundedNumber","integerDigitsCount","ToRawFixed","minFraction","maxFraction","mantissa","exponent","a","b","intlObject","isNegative","roundingType","minimumSignificantDigits","maximumSignificantDigits","maximumFractionDigits","string","minInteger","ComputeExponent","formatNumberResult","CurrencyDigits","currencyDigitsData","S_UNICODE_REGEX","CARET_S_UNICODE_REGEX","RegExp","S_DOLLAR_UNICODE_REGEX","CLDR_NUMBER_PATTERN","numberResult","nonNameCurrencyPart","numberPattern","sign","defaultNumberingSystem","compactNumberPattern","compactPluralRules","byNumberingSystem","selectPlural","compactPlaralRule","getPatternForSign","getCompactDisplayPattern","byCurrencyDisplay","currencies","symbol","narrow","standard","currencyData","currencySign","percent","decimalNumberPattern","afterCurrency","currencySpacing","afterInsertBetween","beforeCurrency","beforeInsertBetween","numberPatternParts","numberParts","symbols","numberPatternParts_1","paritionNumberIntoParts","minusSign","plusSign","percentSign","unitName","unitPattern","currencyNameData","displayName","unitPatternParts_1","unitDisplay","unitData","simple","numeratorUnit","denominatorUnit","numeratorUnitPattern","perUnitPattern","perUnit","perPattern","compound","per","denominatorPattern","interpolateMatch","digitReplacementTable","digit","fraction","decimalSepIndex","groupSepSymbol","group","groups","patternGroups","primaryGroupingSize","secondaryGroupingSize","integerGroup","pop","exponential","exponentResult","zeroPattern","rules","PartitionNumberPattern","nan","infinity","signDisplay","FormatNumericToParts","SetNumberFormatUnitOptions","mnfdDefault","mxfdDefault","mnid","mnfd","mxfd","mnsd","mxsd","InitializeNumberFormat","numberingSystemNames","cDigits","SingularRelativeTimeUnit","MakePartsList","rtf","resolvedUnit","pluralRules","patterns","tl","po","FormatRelativeTime","FormatRelativeTimeToParts","_super","NUMBERING_SYSTEM_REGEX","subset","LookupSupportedLocales","isMissingLocaleDataError","__extends","_this","getColorSchemePref","window","matchMedia","matches","themes","find","darkModeDefault","AVAILABLE_LOCALES","en","pt","ja","es","ru","fr","ko","de","FALLBACK_LOCALES","jp","defaultLocaleData","DEFAULT_LOCALE","cachedMessages","Map","_locale","_localeData","setLocale","resolvedLocale","navigator","languages","userLanguage","unshift","curLocale","primaryLanguageSubtag","findLocale","dispatchEvent","CustomEvent","then","interval","setInterval","APP","store","clearInterval","state","preferences","addEventListener","getLocale","getMessages","configs","configTranslations","messageKey","entries","messages","_match","subkey","acc","isAdmin","document","querySelector","getAttribute","process","BASE_ASSETS_PATH_KEY","startsWith","URL","location","__webpack_public_path__","hasThumbnailServerMetaTag","IS_LOCAL_OR_CUSTOM_CLIENT","AVAILABLE_INTEGRATIONS","APP_CONFIG","theme","colorVars","createElement","innerHTML","head","insertBefore","firstChild","features","feature","featureName","localDevImages","image","imageName","cssUrl","url","images","link","linkName","defaultValue","links","setIsAdmin","_isAdmin","integration","availableIntegrations","translation","translationsConfig","translations","getMessage","config","STORYBOOK_APP_CONFIG","JSON","parse","console","useThemeFromStore","themeId","setThemeId","useState","useEffect","onStoreChanged","nextThemeId","removeEventListener","darkMode","setDarkMode","changeListener","useCallback","event","darkmodeQuery","addListener","removeListener","useDarkMode","id","variables","styleTag","appendChild","removeChild","useTheme","ThemeProvider","children","propTypes","PropTypes","DEFAULT_ACTION_COLOR","DEFAULT_ACTION_COLOR_LIGHT","DEFAULT_COLORS","getThemeColor","activateTheme","actionColor","actionHoverColor","setAttribute","newThemeId","eventObj","readyState","Promise","resolve","once","body","classList","qs","URLSearchParams","search","qsTruthy","param","qsGet","isDebug","logFilter","debug","WrappedIntlProvider","React","updateLocale","setState","componentDidMount","componentWillUnmount","render","hackyMobileSafariTestValue","MOBILE_RE","TABLET_RE","isIpadOS","maxTouchPoints","platform","isIOS","isMobileVR","userAgent","_isMobile","vendor","opera","substr","mockUserAgent","isTablet","hasTouchScreen","msMaxTouchPoints","mQ","media","UA","detectTouchScreen","detectIOS","setDefaultSize","setRemovedRecycleThreshold","$isStringType","Networked","defineComponent","Types","creator","owner","lastOwnerTime","Owned","capturedNid","scale","mediaType","bounds","preview","previewingNid","insets","position","rotation","AEntity","Object3DTag","RemoteHoverTarget","NotRemoteHoverTarget","RemoveNetworkedEntityButton","HandRight","HandLeft","RemoteRight","RemoteLeft","DestroyAtExtremeDistance","labelRef","bodyId","collisionGroup","collisionMask","flags","gravity","shapeId","halfExtents","releaseGravity","snapTime","captureDurIdx","trackTarget","snapMenuRef","button_next","button_prev","snapRef","cancelRef","recVideoRef","screenRef","selfieScreenRef","cameraRef","countdownLblRef","captureDurLblRef","sndToggleRef","aframeComponentName","bitecsComponent","AFRAME","registerComponent","init","addComponent","world","object3D","eid","remove","removeComponent","isMergeableObject","isNonNullObject","stringValue","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","for","cloneUnlessOtherwiseSpecified","clone","deepmerge","defaultArrayMerge","element","arrayMerge","sourceIsArray","destination","mergeObject","array","prev","next","names","chooseRandom","random","fetchRandomDefaultAvatarId","defaultAvatars","fetchReticulumAuthenticated","defaultAvatar","href","avatar","freeze","PERMISSIONS_STATUS_CHANGED","MIC_SHARE_STARTED","MIC_SHARE_ENDED","VIDEO_SHARE_STARTED","VIDEO_SHARE_ENDED","DEVICE_CHANGE","GRANTED","DENIED","PROMPT","MICROPHONE","SPEAKERS","CAMERA","SCREEN","NO_DEVICE_ID","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","defaultMaterialQuality","MATERIAL_QUALITY_OPTIONS","utils","device","isMobile","qsMobileDefault","qsDefault","isFirefoxReality","SCHEMA","definitions","profile","additionalProperties","properties","avatarId","personalAvatarId","credentials","token","email","activity","hasFoundFreeze","hasChangedName","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","hasOpenedShare","entryCount","settings","lastUsedMicDeviceId","micMuted","shouldPromptForRefresh","preferredMic","preferredSpeakers","preferredCamera","muteMicOnEntry","disableLeftRightPanning","audioNormalization","invertTouchscreenCameraMove","enableOnScreenJoystickLeft","detectMobile","enableOnScreenJoystickRight","enableGyro","animateWaypointTransitions","showFPSCounter","allowMultipleHubsInstances","disableIdleDetection","fastRoomSwitching","lazyLoadSceneMedia","preferMobileObjectInfoPanel","maxResolutionWidth","maxResolutionHeight","globalVoiceVolume","globalMediaVolume","globalSFXVolume","snapRotationDegrees","materialQualitySetting","enableDynamicShadows","disableSoundEffects","disableMovement","disableBackwardsMovement","disableStrafing","disableTeleporter","disableAutoPixelRatio","movementSpeedModifier","disableEchoCancellation","disableNoiseSuppression","disableAutoGainControl","showRtcDebugPanel","showAudioDebugPanel","enableAudioClipping","audioClippingThreshold","audioPanningQuality","cursorSize","nametagVisibility","nametagVisibilityDistance","avatarVoiceLevels","confirmedDiscordRooms","items","confirmedBroadcastedRooms","uploadPromotionTokens","fileId","promotionToken","creatorAssignmentTokens","hubId","creatorAssignmentToken","embedTokens","embedToken","onLoadActions","action","args","$ref","Store","EventTarget","super","_signOutOnExpiredAuthToken","jwtDecode","exp","now","update","initProfile","_shouldResetAvatarOnInit","resetToRandomDefaultAvatar","_preferences","localStorage","getItem","setItem","stringify","oauthFlowCredentials","Cookies","maybeDispatchThemeChanged","previous","current","detail","credentialsAccountId","sub","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","bumpEntryCount","currentEntryCount","enqueueOnLoadAction","executeOnLoadActions","sceneEl","emit","clearOnLoadActions","destinationArray","sourceArray","newState","mergeOpts","finalState","merge","valid","errors","validate","argument","schema","hasReticulumServer","resolverLink","getReticulumFetchUrl","path","absolute","host","port","payload","retUrl","params","headers","authorization","fetch","text","pushHistoryPath","history","newPathname","newSearch","newLength","__historyLength","__duplicate","pathname","hash","isDuplicate","pushOrUpdateHistory","sluglessPath","withSlug","EMPTY_RESULT","meta","URL_SOURCE_TO_TO_API_SOURCE","scenes","videos","youtube","gifs","sketchfab","twitch","favorites","SOURCES","apiSource","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","_update","urlSource","getUrlMediaSource","previousSource","urlParams","requestIndex","currentRequestIndex","searchParams","locationSearchParams","isMy","singular","lastSavedUrl","isFetching","nextCursor","next_cursor","lastFetchedUrl","pageNavigate","goBack","filterQueryNavigate","query","delete","getSearchClearedSearchParams","keepSource","keepNav","keepSelectAction","_stashLastSearchParams","_stashedParams","_stashedSource","clearStashedQuery","q","sourceNavigate","_sourceNavigate","sourceNavigateToDefaultSource","sourceNavigateWithNoNav","selectAction","hideNav","useLastStashedParams","currentQuery","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","pushExitMediaBrowserHistory","stashLastSearchParams","setHistory","listen","$B","bitecs","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","texture","reject","THREE","CubeTextureLoader","load","RGBAFormat","HubsMeshBasicMaterial","MeshBasicMaterial","fromMeshStandardMaterial","material","Material","copy","color","emissive","emissiveIntensity","emissiveMap","lightMap","lightMapIntensity","PI","aoMap","aoMapIntensity","alphaMap","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","onBeforeCompile","shader","uniforms","_emissive","_emissiveIntensity","_emissiveMap","fragmentShader","Color","HubsMeshPhongMaterial","MeshPhongMaterial","vertexShader","normalMapType","normalMap","normalScale","bumpMap","bumpScale","displacementMap","displacementScale","displacementBias","reflectivity","refractionRatio","nonCorsProxyDomains","hostname","proxiedUrlFor","parsedUrl","domain","endsWith","getCustomGLTFParserURLResolver","gltfUrl","basisJsUrl","basisWasmUrl","dracoWrapperJsUrl","dracoWasmUrl","corsProxyPrefix","originalUrlParts","decodeURIComponent","MeshBVHNode","getLongestEdgeIndex","splitDimIdx","splitDist","dist","FLOAT32_EPSILON","xyzFields","boxTemp","Box3","getBounds","triangleBounds","count","centroidTarget","minx","Infinity","miny","minz","maxx","maxy","maxz","cminx","cminy","cminz","cmaxx","cmaxy","cmaxz","includeCentroid","cx","hx","lx","rx","cy","hy","ly","ry","cz","hz","lz","rz","getCentroidBounds","SeparatingAxisBounds","setFromPointsField","points","setFromPoints","axis","dot","isSeparated","setFromBox","Vector3","box","boxMin","boxMax","closestPointLineToLine","dir1","dir2","v02","l1","l2","v10","v32","subVectors","d0232","d3210","d3232","d0210","denom","d2","closestPointsSegmentToSegment","paramResult","Vector2","temp1","temp2","target1","target2","at","closestPointToPoint","p2","closestPoint","closestPoint2","distanceToSquared","sphereIntersectTriangle","closestPointTemp","projectedPointTemp","planeTemp","Plane","lineTemp","Line3","sphere","triangle","radius","center","distanceTo","plane","getPlane","distanceToPoint","pp","projectPoint","containsPoint","SeparatingAxisTriangle","Triangle","isSeparatingAxisTriangle","satAxes","fill","satBounds","Sphere","needsUpdate","intersectsSphere","axis0","sab0","getNormal","axis1","sab1","axis2","sab2","axis3","sab3","closestPointToSegment","point1","point2","edge","segment","distSq","closestDistanceSq","nexti","sqrt","intersectsTriangle","saTri2","arr1","arr2","cachedSatBounds","cachedSatBounds2","cachedAxis","satBounds1","satAxes1","sb","sa","satBounds2","satAxes2","sa1","i2","sa2","crossVectors","point","distanceToTriangle","cornerFields","line1","line2","getMidpoint","otherVec","thisVec","f11","f12","f21","f22","OrientedBox","isOrientedBox","matrix","Matrix4","invMatrix","alignedSatBounds","setTriangle","tri","ta","tb","tc","i3","getX","getY","getZ","applyMatrix4","minVec","pi","invert","intersectsBox","aabbBounds","saTri","pointsArr","triSatBounds","triSatAxes","clamp","distanceToBox","segments1","segments2","threshold","getCenter","threshold2","i1","nextIndex2","index2","p1","f1","f2","f3","vA","vB","vC","uvA","uvB","uvC","intersectionPoint","intersectionPointWorld","intersectTri","mesh","geo","raycaster","ray","intersections","triOffset","intersection","object","uv","fromBufferAttribute","pA","pB","pC","side","BackSide","intersectTriangle","DoubleSide","matrixWorld","distance","origin","near","far","checkIntersection","face","normal","materialIndex","faceIndex","checkBufferGeometryIntersection","intersectTris","intersectClosestTri","res","boundingBox","boxIntersection","intersectRay","node","boundingData","intersectBox","raycast","intersects","continueGeneration","geometry","left","right","raycastFirst","splitAxis","xyzAxis","leftToRight","direction","c1","c2","c1Result","c2Result","shapecast","_triangle","_cachedBox1","_cachedBox2","iterateOverTriangles","intersectsTriangleFunc","contained","depth","intersectsBoundsFunc","nodeScoreFunc","cachedBox1","cachedBox2","getLeftOffset","getRightEndOffset","score1","score2","box1","box2","temp","c1Intersection","c1StopTraversal","c2Intersection","c2StopTraversal","intersectsGeometry","triangle2","cachedMesh","Mesh","invertedMat","obb","obb2","geometryToBvh","cachedObb","computeBoundingBox","thisGeometry","thisIndex","thisPos","boundsTree","raycastBuffer","stride4Offset","stride2Offset","float32Array","_float32Array","uint16Array","_uint16Array","uint32Array","_uint32Array","intersectRayBuffer","raycastFirstBuffer","shapecastBuffer","getLeftOffsetBuffer","getRightEndOffsetBuffer","arrayToBoxBuffer","intersectsGeometryBuffer","bufferStack","_prevBuffer","setBuffer","buffer","Float32Array","Uint16Array","Uint32Array","clearBuffer","SKIP_GENERATION","tri2","serialize","bvh","copyIndexBuffer","finishTree","countNodes","populateBuffer","byteOffset","isLeaf","nextUnusedPointer","roots","_roots","rootData","_isPacked","root","nodeCount","ArrayBuffer","indexAttribute","getIndex","deserialize","setIndex","newIndex","BufferAttribute","isBufferGeometry","isInterleavedBufferAttribute","assign","strategy","maxDepth","maxLeafTris","verbose","lazyGeneration","packData","splitNode","centroidBoundingData","reachedMaxDepth","warn","nodeBoundingData","sahPlanes","avg","getAverage","TRAVERSAL_COST","INTERSECTION_COST","bb","dim","filteredLists","planes","getCost","sal","nl","sar","nr","bestCost","o1","o2","bmin","bmax","pinfo","ldim","rdim","ldimo1","rdimo1","ldimo2","rdimo2","cost","getOptimalSplit","splitOffset","axisOffset","partition","indexArray","lstart","lcount","cacheCentroidBoundingData","rstart","rcount","vertexCount","ensureIndex","verts","triCount","tri3","tri6","ai","bi","ci","el2","computeTriangleBounds","computeSAHPlanes","ranges","rangeBoundaries","sortedBoundaries","from","getRootIndexRanges","range","bx","boxToArray","rootBox","union","buildTree","traverse","callback","rootIndex","_traverseBuffer","BYTES_PER_NODE","_traverseNode","isPacked","closestResult","geomToMesh","orderNodesFunc","boxToMesh","closestPointToGeometry","geom","minThreshold","maxThreshold","tempTarget1","tempTarget2","closestDistance","sphere1","sphere2","distanceToGeometry","LineBasicMaterial","transparent","opacity","Box3Helper","Ray","tmpInverseMatrix","origMeshRaycastFunc","mask","recursive","bind","obj","layers","disposeMaterial","mtrl","dispose","specularMap","envMap","metalnessMap","roughnessMap","disposeNode","Quaternion","identity","parallelTraverse","cloneObject3D","preserveUUIDs","cloneLookup","cloneUUIDLookup","sourceNode","clonedNode","uuid","animations","animationClip","sourceAnimationClip","clonedTracks","tracks","keyframeTrack","sourceKeyframeTrack","nodeName","objectName","objectIndex","propertyName","propertyIndex","PropertyBinding","parseTrackName","clonedUUID","clonedKeyframeTrack","cloneKeyframeTrack","AnimationClip","duration","cloneAnimationClip","isMesh","isDirectionalLight","isSpotLight","isSkinnedMesh","sourceBones","bones","sourceBone","bindMatrix","inRotationMat4","inForward","outForward","outSide","worldUp","inMat4Copy","HAS_IMAGE_BITMAP","createImageBitmap","HubsTextureLoader","TextureLoader","manager","onLoad","onProgress","onError","width","height","conversionRatio","newWidth","newHeight","canvas","getContext","drawImage","close","UnsignedByteType","resizeIfNeeded","_loadImageBitmapTexture","onUpdate","loadAsync","Texture","loader","ImageBitmapLoader","setCrossOrigin","crossOrigin","setPath","bitmap","Cache","resolveURL","flipY","firstHitOnly","gltfCache","cache","src","gltf","retain","cacheItem","release","scene","inflightGltfs","extractZipFile","worker","nextItemId","outstanding","onmessage","msg","err","handlers","transfer","promise","postMessage","promisifyWorker","defaultInflator","componentName","componentData","components","multiple","cloneGltf","getHubsComponents","hubsComponents","userData","gltfExtensions","MOZ_hubs_components","HUBS_components","legacyComponents","getHubsComponentsFromMaterial","GLTFModelPlus","componentKey","inflator","inflateEntities","indexToEntityMap","templates","isRoot","modelToWorldScale","childEntities","child","entityComponents","materialComponents","append","className","order","setFromQuaternion","quaternion","multiplyScalar","matrixNeedsUpdate","matrixAutoUpdate","decompose","setObject3D","MathUtils","generateUUID","parent","morphTargetInfluences","gltfIndex","inflatedEntity","isFirstInflation","objectInflations","objectInflation","resolveNodeRefs","propName","__mhc_link_type","attachTemplate","templateRoot","targetEls","querySelectorAll","cloneNode","getHubsComponentsExtension","extras","ktxLoader","dracoLoader","GLTFHubsPlugin","parser","jsonPreprocessor","textureLoader","beforeRoot","json","version","oldHeightfieldNode","nodes","heightfield","light","decay","runMigration","afterRoot","Object3D","DefaultMatrixAutoUpdate","materialQuality","convertStandardMaterial","quality","isMeshStandardMaterial","animation","track","parsedPath","findNode","GLTFHubsComponentsExtension","deps","resolveComponents","gltfRootType","idx","associations","getDependency","loadedDep","textures","MOZ_texture_rgbe","encoding","sRGBEncoding","GLTFHubsLightMapExtension","loadMaterial","materialDef","materials","extensionDef","pending","results","intensity","isMeshBasicMaterial","GLTFHubsTextureBasisExtension","basisLoader","loadTexture","textureIndex","textureDef","BasisTextureLoader","detectSupport","renderer","loadTextureImage","GLTFMozTextureRGBE","minFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","NearestFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","LinearFilter","loadGLTF","contentType","fileMap","includes","loadingManager","LoadingManager","setURLModifier","gltfLoader","GLTFLoader","register","RGBELoader","setDataType","HalfFloatType","KTX2Loader","DRACOLoader","setKTX2Loader","setDRACOLoader","finally","revokeObjectURL","useCache","resolveAsset","charAt","assetEl","getElementById","inflate","loadTemplates","play","applySrc","templateEl","importNode","firstElementChild","content","lastSrc","inflatedEl","disposeLastInflatedEl","loadModel","model","initMixer","hasBufferGeometry","hasBoundsTree","MeshBVH","object3DToSet","visible","setTimeout","inflateComponents","rewires","parentNode","removeAttribute","AVATAR_TYPES","SKINNABLE","resp","avatars","getAvatarType","fetchSkinnableAvatar","avatar_id","gltf_url","MAT_NAME","ensureAvatarMaterial","materialForMesh","primitives","primitive","meshes","parentId","parent_avatar_listing_id","files","srcUrl","Blob","createObjectURL","ctx","putImageData","toDataURL","img","disposeImageBitmap","imageBitmap","HTMLImageElement","TEXTURE_PROPS","base_map","emissive_map","normal_map","orm_map","ALL_MAPS","createRenderer","alpha","useDevicePixelRatio","context","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","WebGLRenderer","forceWebVR","outputEncoding","physicallyCorrectLights","setPixelRatio","devicePixelRatio","ORBIT_ANGLE","Euler","DEG2RAD","fitBoxInFrustum","camera","margin","halfYExtents","halfVertFOV","degToRad","fov","tan","applyEuler","lookAt","AvatarPreview","Component","Scene","PerspectiveCamera","clientWidth","clientHeight","controls","OrbitControls","screenSpacePanning","enableKeys","DirectionalLight","HemisphereLight","loadId","avatarGltfUrl","loadCurrentAvatarGltfUrl","clock","Clock","snapshotCanvas","snapshotCamera","snapshotRenderer","setClearAlpha","previewRenderer","setClearColor","currentTheme","currentThemeObject","getThemeBackground","setAnimationLoop","dt","getDelta","mixer","resize","mounted","parentElement","offsetWidth","offsetHeight","setSize","aspect","updateProjectionMatrix","setAvatar","resetCamera","loading","setFromObject","domElement","imageBitmaps","componentDidUpdate","oldProps","applyMaps","loadPreviewAvatar","previewMesh","pred","idleAnimation","AnimationMixer","clipAction","enabled","setLoop","LoopRepeat","idleAnimationAction","frustumCulled","removeOnUpdate","getImage","originalMaps","dependencies","createDefaultEnvironmentMap","applyMapToPreview","revertMap","bm","snapshot","stop","toBlob","blob","newLoadId","onGltfLoaded","newProps","mapName","applyMap","File","classNames","srcSet","defaultMessage","linebreak","ref","injectIntl","forwardRef","BUILD_VERSION","lastTouchAtMs","ev","preventDefault","getTime","isDoubleTouch","disableiOSZoom","mediaSearchStore","hubChannel","mediaDevicesManager","audios","sourceType","audioOverrides","zoneOverrides","audioDebugPanelOverrides","sceneAudioDefaults","gainMultipliers","supplementaryAttenuation","clippingState","mutedState","isAudioPaused","createWorld","eid2obj","nid2eid","deletedNids","ignoredNids","str2sid","sid2str","nextSid","$o","addEntity","nameToComponent","object3d","networked","owned","getSid","sid","getString","setupRenderer","dataset","aframeCanvas","stencil","logarithmicDepthBuffer","checkShaderErrors","innerWidth","innerHeight","audioListener","AudioListener","renderClock","mainTick","_rafTime","xrFrame","elapsedTime","frame","performance","elapsed","tick","timeSystem","isPlaying","renderStarted","AvatarPage","storeUpdated","forceUpdate","refetchAvatar","fetchAvatar","handleCopyAvatar","copyState","remixAvatar","copyMessage","styles","selectedAvatarId","isSelected","onSubmit","attributions","allow_remixing","onClick","title","icon","faClone","disabled","alt","intl","ReactDOM","cachedSetTimeout","cachedClearTimeout","module","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","browser","env","argv","versions","on","off","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","nodeType","freeGlobal","g","global","self","punycode","maxInt","base","tMax","skew","damp","regexPunycode","regexNonASCII","regexSeparators","baseMinusTMin","stringFromCharCode","fromCharCode","mapDomain","ucs2decode","extra","output","counter","charCodeAt","ucs2encode","digitToBasic","flag","adapt","numPoints","firstTime","decode","input","out","basic","j","oldi","baseMinusT","codePoint","inputLength","bias","splice","encode","handledCPCount","basicLength","currentValue","handledCPCountPlusOne","qMinusT","sep","eq","regexp","maxKeys","kstr","vstr","stringifyPrimitive","ks","encodeURIComponent","util","Url","protocol","slashes","auth","urlParse","relative","resolveObject","isString","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","isObject","u","queryIndex","splitter","uSplit","rest","trim","simplePath","proto","lowerProto","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","newpart","validParts","notHost","bit","toASCII","h","ae","esc","escape","qm","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","up","isAbsolute","workerConstructor","workerOptions","globalScope","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","getBlob","webkitURL","objectURL","webpackAsyncContext","req","__webpack_require__","ids","TYPES_ENUM","i8","ui8","ui8c","i16","ui16","i32","ui32","f32","f64","TYPES_NAMES","TYPES","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Float64Array","roundToMultiple4","ceil","$storeRef","$storeSize","$storeMaps","$storeFlattened","$storeBase","$storeType","$storeArrayElementCounts","$storeSubarrays","$subarrayCursors","$subarray","$parentArray","$tagStore","$indexType","$indexBytes","$isEidType","stores","newBuffer","BYTES_PER_ELEMENT","newTa","createShadow","isView","shadowStore","subarray","resizeRecursive","metadata","storeSize","cursors","indexType","arrayElementCount","start2","end2","resizeSubarray","resizeStore","resetStoreFor","parentArray","isArrayType","SparseSet","dense","sparse","comparator","swapped","DESERIALIZE_MODE","REPLACE","APPEND","MAP","resized","not","storeFlattened","isFullComponent","isProperty","isModifier","isNotModifier","isChangedModifier","isWorld","getOwnPropertySymbols","$componentMap","fromModifierToComponent","canonicalize","fullComponentProps","changedComponentProps","changedProps","$","defineSerializer","maxBytes","worldSerializer","componentProps","view","DataView","entityComponentCache","ents","component","$entityArray","eidToWorld","where","pid","$diff","shadow","setUint8","countWhere","writeCount","componentCache","newlyAddedComponent","hasComponent","rewindWhere","setUint32","indexBytes","countWhere2","arrayWriteCount","changed","newEntities","defineDeserializer","isWorld2","deserializedEntities","packet","mode","clear","localEntities","$localEntities","localEntityLookup","$localEntityLookup","byteLength","getUint8","entityCount","getUint32","newEid","$entitySparseSet","localEid","$entityMasks","$entityComponents","defaultSize","globalEntityCursor","globalSize","getGlobalSize","removed","removedReuseThreshold","newSize","oldSize","resizeWorlds","resizeComponents","info","newThreshold","amount","$notQueries","queryCheckEntity","queryAddEntity","removeEntity","$queries","queryRemoveEntity","getEntityComponents","entityExists","Not","Changed","$queryAny","$queryAll","$queryNone","$queryMap","$dirtyQueries","$queryComponents","enterQuery","registerQuery","entered","exitQuery","exited","components2","notComponents","changedComponents","comp","mapComponents","allComponents","sparseSet","toRemove","generations","generationId","reduceBitflags","bitflag","masks","notMasks","hasMasks","flatProps","archetypes","shadows","queries","generateShadow","flatten","aggregateComponentsFor","defineQuery","comps","clearDiff","commitRemovals","dirty","diff","any","none","qMask","qNotMask","eMask","queryCommitRemovals","resetChangedQuery","removeQuery","$store","arrayElementCounts","collectArrayElementCounts","recursiveTransform","totalBytes","createTypeStore","createArrayStore","createStore","notQueries","changedQueries","$bitflag","$size","incrementBitflag","registerComponents","registeredComponent","reset","$resizeThreshold","$archetypes","worlds","resetWorld","deleteWorld","getWorldComponents","getAllEntities","defineSystem","pipe","fns","tmp","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","chunkIds","priority","notFulfilled","fulfilled","every","getter","__esModule","getPrototypeOf","__proto__","ns","def","getOwnPropertyNames","definition","chunkId","promises","miniCssF","globalThis","Function","needAttach","scripts","getElementsByTagName","charset","nc","onScriptComplete","onerror","onload","doneFns","nmd","paths","installedChunks","installedChunkData","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}