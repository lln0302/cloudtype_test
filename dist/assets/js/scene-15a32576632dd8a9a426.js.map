{"version":3,"file":"assets/js/scene-15a32576632dd8a9a426.js","mappings":"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P,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,QACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,YAAa,iBACb,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,UACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,aAAc,MACd,IAAO,KACP,QAAS,MACT,QAAS,MACT,YAAa,iBACb,aAAc,mBACd,QAAS,MACT,YAAa,MACb,QAAS,KACT,UAAW,gBACX,WAAY,KACZ,QAAS,MACT,QAAS,MACT,QAAS,MACT,QAAS,MACT,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,GAAM,KACN,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,GAAM,KACN,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,SAAU,KACV,YAAa,KACb,SAAU,KACV,aAAc,KACd,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,QACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,YAAa,MACb,YAAa,MACb,SAAU,MACV,YAAa,MACb,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,SAAU,MACV,GAAM,UACN,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,GAAM,MACN,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,QACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,aAAc,SACd,cAAe,MACf,cAAe,MACf,aAAc,MACd,YAAa,MACb,qBAAsB,cACtB,aAAc,MACd,cAAe,MACf,YAAa,MACb,YAAa,MACb,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,IAAO,KACP,IAAO,MACP,IAAO,MACP,IAAO,MACP,SAAU,KACV,cAAe,UACf,cAAe,UACf,SAAU,MACV,WAAY,KACZ,WAAY,MACZ,SAAU,eACV,aAAc,MACd,SAAU,MACV,WAAY,MACZ,SAAU,MACV,IAAO,KACP,IAAO,KACP,IAAO,MACP,IAAO,KACP,IAAO,KACP,IAAO,MAEXhD,EAAQ+C,eAAiB,CACrB,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,sCACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,WACP,IAAO,KACP,IAAO,WACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,cACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,+CACP,IAAO,KACP,IAAO,KACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,oBACP,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,UACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,MAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,WACN,IAAO,KACP,IAAO,WACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,QACN,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,QACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,GAAM,QACN,IAAO,QACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,cACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KACN,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,IAAO,KACP,GAAM,KA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,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,WAAY,cACZ,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,QAAS,aACT,QAAS,aACT,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,IAAO,cACP,IAAO,cACP,GAAM,cACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,IAAO,cACP,GAAM,aACN,GAAM,aACN,GAAM,cACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,cACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,eACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,UAAW,aACX,QAAS,aACT,QAAS,aACT,QAAS,aACT,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,UAAW,aACX,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,SAAU,cACV,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,UAAW,aACX,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,QAAS,aACT,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,eACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,WAAY,cACZ,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,eACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,SAAU,cACV,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,UAAW,aACX,UAAW,aACX,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,QAAS,aACT,QAAS,aACT,QAAS,aACT,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,IAAO,cACP,GAAM,aACN,UAAW,aACX,QAAS,aACT,QAAS,aACT,IAAO,cACP,GAAM,aACN,IAAO,cACP,IAAO,cACP,IAAO,aACP,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,aACX,UAAW,cACX,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,cACV,SAAU,aACV,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,cACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,cACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,cACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,cACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,cACV,WAAY,cACZ,cAAe,cACf,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,cACV,SAAU,aACV,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,aACf,SAAU,aACV,SAAU,aACV,WAAY,aACZ,cAAe,aACf,cAAe,cACf,cAAe,cACf,cAAe,cACf,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,cAAe,cACf,SAAU,cACV,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,WAAY,aACZ,WAAY,cACZ,WAAY,aACZ,WAAY,aACZ,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,SAAU,cACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,aACZ,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,aACf,cAAe,aACf,cAAe,cACf,cAAe,aACf,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,SAAU,cACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,aACZ,cAAe,cACf,cAAe,cACf,SAAU,aACV,SAAU,aACV,WAAY,aACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,cACZ,WAAY,aACZ,WAAY,eACZ,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,cACV,SAAU,cACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,cACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,WAAY,aACZ,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,SAAU,aACV,WAAY,aACZ,SAAU,aACV,SAAU,aACV,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,cACZ,WAAY,aACZ,WAAY,cACZ,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY,aACZ,WAAY,aACZ,cAAe,cACf,cAAe,cACf,cAAe,cACf,WAAY,aACZ,WAAY,cACZ,SAAU,aACV,SAAU,cACV,SAAU,aACV,SAAU,aACV,SAAU,aACV,WAAY,cACZ,SAAU,aACV,WAAY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U,CA/DC,EAOC,GAMK,GAMF,IA6Cf,kBAAmB,CAjEV,EAOC,GAMK,GAMF,KAiDTC,GAAqB,CACzB,QAAS,CAvEE,EAOC,EAMK,GAMF,qBCnCjB,MAAMC,GAAa,CACjB,OACA,WACA,aACA,YACA,eACA,WACA,SACA,YACA,WACA,cACA,QACA,UACA,UACA,OACA,SACA,UACA,WACA,SACA,WACA,aACA,WACA,SACA,UACA,UACA,OACA,QACA,QACA,UACA,OACA,YACA,WACA,SACA,WACA,OACA,WACA,WACA,SACA,QACA,YACA,MACA,WACA,SACA,UACA,QACA,WACA,WACA,QACA,QACA,MACA,QACA,YACA,OACA,UACA,SACA,cACA,WACA,UACA,YACA,UACA,WACA,YACA,UACA,aACA,SACA,WACA,UACA,WACA,SACA,YACA,UACA,QACA,OACA,OACA,QACA,YACA,QACA,SACA,SACA,QACA,UACA,aACA,SACA,cACA,YACA,WACA,OACA,QACA,WACA,UACA,WACA,WACA,cACA,cACA,OACA,SACA,QACA,YACA,UACA,WACA,SACA,WACA,eACA,aACA,OACA,SACA,MACA,WACA,SACA,QACA,SACA,UACA,QACA,QACA,SACA,SACA,WACA,OACA,UACA,aACA,aACA,YACA,YACA,UACA,SACA,UACA,aACA,aACA,OACA,YACA,WACA,WACA,SACA,YACA,WACA,aACA,aACA,cACA,UACA,UACA,OACA,QACA,QACA,SACA,OACA,WACA,OACA,YACA,QACA,UACA,UACA,WACA,QACA,WACA,YACA,QACA,YACA,QACA,OACA,YACA,aACA,QACA,SACA,SACA,QACA,QACA,QACA,MACA,QACA,WACA,QACA,WACA,QACA,WACA,UACA,SACA,OACA,QACA,MACA,UACA,QACA,UACA,QACA,QACA,QACA,WACA,WACA,SACA,WACA,WACA,cACA,gBACA,WACA,aACA,QACA,aACA,YACA,cACA,WACA,aACA,UACA,YACA,UACA,YACA,YACA,aACA,YACA,WACA,OACA,WACA,OACA,YACA,QACA,SACA,WACA,WACA,SACA,SACA,OACA,WACA,WACA,UACA,YACA,SACA,UACA,YACA,aACA,QACA,SACA,eACA,UACA,QACA,SACA,UACA,YACA,OACA,MACA,UACA,UACA,WACA,WACA,QACA,QACA,WACA,SACA,WACA,WACA,aACA,SACA,aACA,cACA,SACA,aACA,WACA,SACA,SACA,OACA,QACA,SACA,SACA,SACA,UACA,OACA,WACA,QACA,aACA,SACA,UACA,UACA,WACA,YACA,YACA,QACA,UACA,YACA,QACA,SACA,UACA,UACA,UACA,UACA,OACA,QACA,OACA,SACA,YACA,UACA,YACA,cACA,WACA,UACA,eACA,SACA,OACA,cACA,WACA,YACA,SACA,WACA,UACA,YACA,UACA,WACA,WACA,SACA,YACA,UACA,OACA,WACA,QACA,YACA,WACA,WACA,QACA,QACA,SACA,OACA,YACA,SACA,eACA,aACA,WACA,SACA,SACA,YACA,SACA,OACA,WACA,YACA,QACA,QACA,OACA,OACA,QACA,SACA,UACA,UACA,SACA,UACA,OACA,WACA,UACA,WACA,YACA,WACA,UACA,cACA,QACA,YACA,OACA,QACA,WACA,OACA,QACA,OACA,gBACA,UACA,YACA,cACA,SACA,QACA,SACA,WACA,WACA,WACA,WACA,OACA,UACA,OACA,QACA,SACA,SACA,SACA,WACA,SACA,SACA,OACA,OACA,UACA,UACA,QACA,SACA,eACA,cACA,WACA,UACA,cACA,SACA,YACA,SACA,cACA,aACA,YACA,SACA,QACA,SACA,WACA,QACA,UACA,WACA,YACA,YACA,cACA,QACA,OACA,YACA,YACA,YACA,YACA,aACA,YACA,WACA,QACA,OACA,WACA,QACA,WACA,aACA,SACA,WACA,WACA,SACA,YACA,UACA,UACA,aACA,MACA,OACA,aACA,WACA,WACA,YACA,cACA,QACA,QACA,UACA,gBACA,WACA,OACA,UACA,SACA,SACA,SACA,aACA,SACA,UACA,WACA,WACA,SACA,UACA,UACA,WACA,UACA,QACA,aACA,aACA,QACA,iBACA,UACA,SACA,SACA,WACA,SACA,QACA,SACA,QACA,cACA,WACA,UACA,SACA,WACA,WACA,QACA,UACA,YACA,aACA,aACA,SACA,SACA,UACA,SACA,UACA,QACA,YACA,SACA,UACA,WACA,WACA,YACA,aACA,UACA,YACA,YACA,QACA,UACA,SACA,WACA,OACA,UACA,SACA,WACA,QACA,QACA,OACA,cACA,YACA,WACA,UACA,WACA,SACA,cACA,SACA,SACA,WACA,OACA,WACA,QACA,QACA,UACA,QACA,QACA,SACA,YACA,SACA,cACA,cACA,QACA,QACA,QACA,QACA,WACA,WACA,YACA,eACA,aACA,aACA,OACA,aACA,cACA,YACA,SACA,QACA,UACA,WACA,OACA,OACA,UACA,WACA,SACA,aACA,SACA,UACA,UACA,SACA,QACA,QACA,SACA,aACA,YACA,QACA,QACA,cACA,UACA,WACA,cACA,SACA,WACA,OACA,SACA,OACA,SACA,WACA,QACA,QACA,UACA,aACA,SACA,WACA,MACA,QACA,YACA,UACA,OACA,UACA,OACA,WACA,OACA,QACA,UACA,QACA,OACA,SACA,WACA,SACA,OACA,UACA,SACA,cACA,YACA,UAGIC,GAAQ,CACZ,QACA,OACA,QACA,WACA,QACA,OACA,SACA,QACA,YACA,SACA,eACA,WACA,QACA,SACA,WACA,QACA,SACA,UACA,OACA,SACA,SACA,UACA,OACA,OACA,OACA,QACA,OACA,QACA,YACA,SACA,OACA,SACA,SACA,WACA,YACA,cACA,SACA,YACA,SACA,UACA,aACA,WACA,cACA,YACA,OACA,UACA,SACA,aACA,WACA,eACA,aACA,SACA,OACA,UAGK,SAASC,KACd,MAAMC,EAAW59C,IACf,MAAM6E,EAAI7E,EAAIuF,KAAK6E,MAAM7E,KAAKq4B,SAAW59B,EAAIrH,SAC7C,OAAOkM,EAAEg5C,OAAO,GAAG3hD,cAAgB2I,EAAEpI,MAAM,EAA3C,EAGF,MAAQ,GAAEmhD,EAASH,OAAeG,EAASH,OAAeG,EAA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,MACzC,CACL,MAAMC,EAAKvnB,OAAOic,YAAcA,WAAW,oBAC3C,GAAIsL,GAAmB,qBAAbA,EAAGC,MACXH,IAAmBE,EAAGzL,aACjB,GAAI,gBAAiB9b,OAC1BqnB,GAAiB,MACZ,CAEL,MAAMI,EAAK7P,UAAUmP,UACrBM,EACE,0CAA0CvoD,KAAK2oD,IAAO,yCAAyC3oD,KAAK2oD,EACvG,CACF,CACD,OAAOJ,CACR,CAa4FK,IAGpFlB,KCcHQ,GAAY,GAEVtZ,OACFsZ,GAAY,GAIT,WACL,OAAOA,CACR,CACF,CArBiB,6MCrClB,MAAM3yB,GAAQ,CACZ,gBACA,cACA,oBACA,cACA,YACA,cACA,aACA,aACA,aACA,gBACA,gBACA,gBACA,gBACA,YACA,eACA,mBACA,mBACA,iBACA,gBACA,kBACA,eACA,eACA,mBACA,iBACA,WACA,cACA,gBACA,UACA,WACA,gBACA,cACA,YACA,WACA,YACA,YACA,mBACA,aACA,aACA,YACA,cACA,eACA,cACA,cACA,UACA,WACA,eACA,eACA,YACA,mBACA,gBACA,oBACA,kBACA,YACA,cACA,kBACA,aACA,cACA,eACA,cACA,cACA,cACA,iBACA,kBACA,cACA,WACA,WACA,cACA,OACA,mBACA,cACA,mBACA,cACA,iBACA,aACA,cACA,cACA,gBACA,qBACA,iBACA,eACA,gBACA,eACA,SACA,YACA,iBAGF,SAASszB,GAAatmD,GACpB,OAAOA,EAAIyL,KAAK6E,MAAM7E,KAAKq4B,SAAW9jC,EAAInB,QAC3C,CAMM,SAAe0nD,KAAtB,6DAAO,YACL,MACMC,SAAwBC,GADA,+DACoDlP,SAAW,GAC7F,OAA8B,IAA1BiP,EAAe3nD,OAGV,IAAIm5C,IAAI0O,GAAezO,SAAS0O,MAAMA,KAGxCL,GADWE,EAAex2C,KAAI42C,GAAUA,EAAO7xB,KAEvD,qtCCtGD,MAAM8xB,GAAkB,gBAClBC,GAAwBt8C,SACxBu8C,GAA6B,qCAC7BC,GAAY,IAAIC,GAAAA,UAMhBC,GAA0B,WAC9B,MAAMC,EAA2B,CAAC,MAAO,SAAU,QAMnD,GADiBxoB,O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AAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,EAAE,IAAI,EAAE,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,EAAE,IAAI,IAAI,IAAI,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,IAAI,IAAI,IAAI,IAAI,EAAE,EAAE,E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","sources":["webpack://hubs/webpack/runtime/chunk loaded","webpack://hubs/webpack/runtime/create fake namespace object","webpack://hubs/webpack/runtime/load script","webpack://hubs/./node_modules/@braintree/sanitize-url/dist/index.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/index.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/aliases.generated.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/canonicalizer.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/emitter.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/likelySubtags.generated.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/parser.js","webpack://hubs/./node_modules/@formatjs/intl-getcanonicallocales/src/types.js","webpack://hubs/./node_modules/@formatjs/intl-locale/get_internal_slots.js","webpack://hubs/./node_modules/@formatjs/intl-locale/index.js","webpack://hubs/./node_modules/@formatjs/intl-locale/polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-locale/should-polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/abstract/GetOperands.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/abstract/InitializePluralRules.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/abstract/ResolvePlural.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/get_internal_slots.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/index.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/locale-data/en.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/should-polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-pluralrules/supported-locales.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/get_internal_slots.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/index.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/locale-data/en.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/utils.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/utils.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/types/date-time.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/skeleton.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/BestFitFormatMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/CanonicalizeLocaleList.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/CanonicalizeTimeZoneName.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/262.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/CoerceOptionsToObject.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/BasicFormatMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/DateTimeStyleFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/ToLocalTime.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PartitionPattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/PartitionDateTimePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTime.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/PartitionDateTimeRangePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimeRange.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimeRangeToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/FormatDateTimeToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/ToDateTimeOptions.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/GetOption.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/BestAvailableLocale.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/UnicodeExtensionValue.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/ResolveLocale.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/LookupMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/BestFitMatcher.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsValidTimeZoneName.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DefaultNumberOption.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/GetNumberOption.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DateTimeFormat/InitializeDateTimeFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsWellFormedCurrencyCode.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/DisplayNames/CanonicalCodeForDisplayNames.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/GetOptionsObject.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsSanctionedSimpleUnitIdentifier.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/IsWellFormedUnitIdentifier.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ComputeExponentForMagnitude.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ToRawPrecision.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ToRawFixed.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/FormatNumericToString.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/ComputeExponent.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/CurrencyDigits.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/format_to_parts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/PartitionNumberPattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/FormatNumericToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/SetNumberFormatUnitOptions.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/SetNumberFormatDigitOptions.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/NumberFormat/InitializeNumberFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PluralRules/GetOperands.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PluralRules/InitializePluralRules.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/PluralRules/ResolvePlural.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/SingularRelativeTimeUnit.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/MakePartsList.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/PartitionRelativeTimePattern.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/FormatRelativeTime.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/FormatRelativeTimeToParts.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/RelativeTimeFormat/InitializeRelativeTimeFormat.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/data.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/SupportedLocales.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/node_modules/@formatjs/ecma402-abstract/lib/LookupSupportedLocales.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/polyfill.js","webpack://hubs/./node_modules/@formatjs/intl-relativetimeformat/should-polyfill.js","webpack://hubs/./node_modules/animejs/lib/anime.es.js","webpack://hubs/./src/components/ambient-light.js","webpack://hubs/./src/components/animation.js","webpack://hubs/./src/components/audio-zone.js","webpack://hubs/./src/components/billboard.js","webpack://hubs/./src/components/css-class.js","webpack://hubs/./src/components/debug.js","webpack://hubs/./src/components/directional-light.js","webpack://hubs/./src/components/duck.js","webpack://hubs/./src/components/event-repeater.js","webpack://hubs/./src/components/frustrum.js","webpack://hubs/./src/components/heightfield.js","webpack://hubs/./src/components/hemisphere-light.js","webpack://hubs/./src/components/hide-when-quality.js","webpack://hubs/./src/components/inject-main-camera-here.js","webpack://hubs/./src/components/point-light.js","webpack://hubs/./src/components/spot-light.js","webpack://hubs/./src/components/trigger-volume.js","webpack://hubs/./src/components/video-pause-state.js","webpack://hubs/./src/constants.js","webpack://hubs/./src/assets/locales/locale_config.js","webpack://hubs/./src/utils/i18n.js","webpack://hubs/./src/utils/configs.js","webpack://hubs/./src/react-components/styles/theme.js","webpack://hubs/./src/utils/get-color-scheme-pref.js","webpack://hubs/./src/utils/async-utils.js","webpack://hubs/./src/utils/theme.js","webpack://hubs/./src/assets/stylesheets/scene.scss","webpack://hubs/./src/utils/qs_truthy.js","webpack://hubs/./src/utils/logging.js","webpack://hubs/./src/utils/webgl.js","webpack://hubs/./src/components/animation-mixer.js","webpack://hubs/./src/utils/scene-graph.js","webpack://hubs/./src/utils/easing.js","webpack://hubs/./src/utils/media-devices-utils.js","webpack://hubs/./src/components/audio-feedback.js","webpack://hubs/./src/utils/component-utils.js","webpack://hubs/./src/object-types.js","webpack://hubs/./src/utils/name-generation.js","webpack://hubs/./node_modules/deepmerge/dist/es.js","webpack://hubs/./src/utils/detect-touchscreen.js","webpack://hubs/./src/utils/is-mobile.js","webpack://hubs/./src/utils/identity.js","webpack://hubs/./src/storage/store.js","webpack://hubs/./src/utils/phoenix-utils.js","webpack://hubs/./src/utils/material-utils.js","webpack://hubs/./src/loaders/HubsTextureLoader.js","webpack://hubs/./src/bit-components.js","webpack://hubs/./src/components/hoverable-visuals.js","webpack://hubs/./src/utils/permissions-utils.js","webpack://hubs/./src/utils/media-url-utils.js","webpack://hubs/./src/utils/media-utils.js","webpack://hubs/./src/components/slice9.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVHNode.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/ArrayBoxUtilities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/buildFunctions.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/SeparatingAxisBounds.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/MathUtilities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/SeparatingAxisTriangle.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/OrientedBox.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/TriangleUtils.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/ThreeIntersectionUtilities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Utils/RayIntersectTriUtlities.js","webpack://hubs/./node_modules/three-mesh-bvh/src/castFunctions.js","webpack://hubs/./node_modules/three-mesh-bvh/src/Constants.js","webpack://hubs/./node_modules/three-mesh-bvh/src/castFunctionsBuffer.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVH.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVHVisualizer.js","webpack://hubs/./node_modules/three-mesh-bvh/src/MeshBVHDebug.js","webpack://hubs/./node_modules/three-mesh-bvh/src/index.js","webpack://hubs/./src/components/layers.js","webpack://hubs/./src/utils/three-utils.js","webpack://hubs/./src/components/gltf-model-plus.js","webpack://hubs/./src/utils/promisify-worker.js","webpack://hubs/./src/workers/sketchfab-zip.worker.js","webpack://hubs/./src/utils/next-tick.js","webpack://hubs/./src/components/loop-animation.js","webpack://hubs/./src/components/uv-scroll.js","webpack://hubs/./src/utils/auto-box-collider.js","webpack://hubs/./src/components/audio-params.js","webpack://hubs/./src/update-audio-settings.js","webpack://hubs/./src/systems/sound-effects-system.js","webpack://hubs/./src/components/media-loader.js","webpack://hubs/./src/utils/animation.js","webpack://hubs/./src/components/quack.js","webpack://hubs/./src/systems/userinput/paths.js","webpack://hubs/./src/components/tags.js","webpack://hubs/./src/systems/camera-system.js","webpack://hubs/./src/components/scene-preview-camera.js","webpack://hubs/./src/components/skybox.js","webpack://hubs/./src/components/spawn-controller.js","webpack://hubs/./src/systems/floaty-object-system.js","webpack://hubs/./src/components/floaty-object.js","webpack://hubs/./src/components/super-spawner.js","webpack://hubs/./src/components/water.js","webpack://hubs/./src/components/simple-water.js","webpack://hubs/./node_modules/@mozillareality/easing-functions/lib/esm/index.js","webpack://hubs/./node_modules/lib-hubs/packages/three-particle-emitter/lib/esm/index.js","webpack://hubs/./src/components/particle-emitter.js","webpack://hubs/./node_modules/troika-worker-utils/dist/troika-worker-utils.esm.js","webpack://hubs/./src/components/audio-zone-source.js","webpack://hubs/./node_modules/troika-three-utils/dist/troika-three-utils.esm.js","webpack://hubs/./node_modules/troika-three-text/dist/troika-three-text.esm.js","webpack://hubs/./node_modules/bidi-js/dist/bidi.mjs","webpack://hubs/./src/components/troika-text.js","webpack://hubs/./src/systems/nav.js","webpack://hubs/./src/react-components/if-feature.js","webpack://hubs/./src/assets/stylesheets/scene-ui.scss","webpack://hubs/./src/react-components/icons/Twitter.svg","webpack://hubs/./src/react-components/icons/CodeBranch.svg","webpack://hubs/./src/react-components/icons/Pen.svg","webpack://hubs/./src/react-components/icons/HmcLogo.svg","webpack://hubs/./src/react-components/misc/AppLogo.js","webpack://hubs/./src/utils/isHmc.js","webpack://hubs/./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","webpack://hubs/./src/utils/screen-orientation-utils.js","webpack://hubs/./src/react-components/scene-ui.js","webpack://hubs/./src/react-components/room/useResizeViewport.js","webpack://hubs/./src/utils/disable-ios-zoom.js","webpack://hubs/./src/systems/scene-preview-camera-system.js","webpack://hubs/./src/systems/shadow-system.js","webpack://hubs/./src/systems/scene-systems.js","webpack://hubs/./src/utils/component-mappings.js","webpack://hubs/./src/systems/bit-physics.js","webpack://hubs/./src/inflators/media-frame.js","webpack://hubs/./src/inflators/text.js","webpack://hubs/./src/utils/jsx-entity.js","webpack://hubs/./src/inflators/slice9.js","webpack://hubs/./src/update-slice9-geometry.js","webpack://hubs/./src/inflators/model.js","webpack://hubs/./src/gltf-component-mappings.js","webpack://hubs/./src/systems/environment-system.js","webpack://hubs/./src/utils/history.js","webpack://hubs/./src/aframe-to-bit-components.js","webpack://hubs/./src/storage/media-search-store.js","webpack://hubs/./src/App.js","webpack://hubs/./src/telemetry.js","webpack://hubs/./src/react-components/wrapped-intl-provider.js","webpack://hubs/./src/scene.js","webpack://hubs/./src/vendor/Water.js","webpack://hubs/./node_modules/linkify-it/index.js","webpack://hubs/./node_modules/linkify-it/lib/re.js","webpack://hubs/./node_modules/process/browser.js","webpack://hubs/./node_modules/three-ammo/constants.js","webpack://hubs/./node_modules/three-pathfinding/dist/three-pathfinding.module.js","webpack://hubs/./node_modules/uc.micro/categories/Cc/regex.js","webpack://hubs/./node_modules/uc.micro/categories/P/regex.js","webpack://hubs/./node_modules/uc.micro/categories/Z/regex.js","webpack://hubs/./node_modules/uc.micro/properties/Any/regex.js","webpack://hubs/./node_modules/url/node_modules/punycode/punycode.js","webpack://hubs/./node_modules/url/node_modules/querystring/decode.js","webpack://hubs/./node_modules/url/node_modules/querystring/encode.js","webpack://hubs/./node_modules/url/node_modules/querystring/index.js","webpack://hubs/./node_modules/url/url.js","webpack://hubs/./node_modules/url/util.js","webpack://hubs/./node_modules/worker-loader/dist/runtime/inline.js","webpack://hubs/./src/assets/locales/ lazy ^\\.\\/.*\\.json$ namespace object","webpack://hubs/./node_modules/bitecs/dist/index.mjs","webpack://hubs/webpack/bootstrap","webpack://hubs/webpack/runtime/compat get default export","webpack://hubs/webpack/runtime/define property getters","webpack://hubs/webpack/runtime/ensure chunk","webpack://hubs/webpack/runtime/get javascript chunk filename","webpack://hubs/webpack/runtime/get mini-css chunk filename","webpack://hubs/webpack/runtime/global","webpack://hubs/webpack/runtime/hasOwnProperty shorthand","webpack://hubs/webpack/runtime/make namespace object","webpack://hubs/webpack/runtime/node module decorator","webpack://hubs/webpack/runtime/runtimeId","webpack://hubs/webpack/runtime/publicPath","webpack://hubs/webpack/runtime/jsonp chunk loading","webpack://hubs/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"hubs:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sanitizeUrl = void 0;\nvar invalidProtocolRegex = /^([^\\w]*)(javascript|data|vbscript)/im;\nvar ctrlCharactersRegex = /[\\u0000-\\u001F\\u007F-\\u009F\\u2000-\\u200D\\uFEFF]/gim;\nvar urlSchemeRegex = /^([^:]+):/gm;\nvar relativeFirstCharacters = [\".\", \"/\"];\nfunction isRelativeUrlWithoutProtocol(url) {\n    return relativeFirstCharacters.indexOf(url[0]) > -1;\n}\nfunction sanitizeUrl(url) {\n    if (!url) {\n        return \"about:blank\";\n    }\n    var sanitizedUrl = url.replace(ctrlCharactersRegex, \"\").trim();\n    if (isRelativeUrlWithoutProtocol(sanitizedUrl)) {\n        return sanitizedUrl;\n    }\n    var urlSchemeParseResults = sanitizedUrl.match(urlSchemeRegex);\n    if (!urlSchemeParseResults) {\n        return sanitizedUrl;\n    }\n    var urlScheme = urlSchemeParseResults[0];\n    if (invalidProtocolRegex.test(urlScheme)) {\n        return \"about:blank\";\n    }\n    return sanitizedUrl;\n}\nexports.sanitizeUrl = sanitizeUrl;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isUnicodeLanguageSubtag = exports.isUnicodeScriptSubtag = exports.isUnicodeRegionSubtag = exports.isStructurallyValidLanguageTag = exports.parseUnicodeLanguageId = exports.parseUnicodeLocaleId = exports.getCanonicalLocales = void 0;\nvar tslib_1 = require(\"tslib\");\nvar parser_1 = require(\"./src/parser\");\nvar emitter_1 = require(\"./src/emitter\");\nvar canonicalizer_1 = require(\"./src/canonicalizer\");\n/**\n * https://tc39.es/ecma402/#sec-canonicalizelocalelist\n * @param locales\n */\nfunction CanonicalizeLocaleList(locales) {\n    if (locales === undefined) {\n        return [];\n    }\n    var seen = [];\n    if (typeof locales === 'string') {\n        locales = [locales];\n    }\n    for (var _i = 0, locales_1 = locales; _i < locales_1.length; _i++) {\n        var locale = locales_1[_i];\n        var canonicalizedTag = (0, emitter_1.emitUnicodeLocaleId)((0, canonicalizer_1.canonicalizeUnicodeLocaleId)((0, parser_1.parseUnicodeLocaleId)(locale)));\n        if (seen.indexOf(canonicalizedTag) < 0) {\n            seen.push(canonicalizedTag);\n        }\n    }\n    return seen;\n}\nfunction getCanonicalLocales(locales) {\n    return CanonicalizeLocaleList(locales);\n}\nexports.getCanonicalLocales = getCanonicalLocales;\nvar parser_2 = require(\"./src/parser\");\nObject.defineProperty(exports, \"parseUnicodeLocaleId\", { enumerable: true, get: function () { return parser_2.parseUnicodeLocaleId; } });\nObject.defineProperty(exports, \"parseUnicodeLanguageId\", { enumerable: true, get: function () { return parser_2.parseUnicodeLanguageId; } });\nObject.defineProperty(exports, \"isStructurallyValidLanguageTag\", { enumerable: true, get: function () { return parser_2.isStructurallyValidLanguageTag; } });\nObject.defineProperty(exports, \"isUnicodeRegionSubtag\", { enumerable: true, get: function () { return parser_2.isUnicodeRegionSubtag; } });\nObject.defineProperty(exports, \"isUnicodeScriptSubtag\", { enumerable: true, get: function () { return parser_2.isUnicodeScriptSubtag; } });\nObject.defineProperty(exports, \"isUnicodeLanguageSubtag\", { enumerable: true, get: function () { return parser_2.isUnicodeLanguageSubtag; } });\n(0, tslib_1.__exportStar)(require(\"./src/types\"), exports);\n(0, tslib_1.__exportStar)(require(\"./src/emitter\"), exports);\n(0, tslib_1.__exportStar)(require(\"./src/likelySubtags.generated\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.variantAlias = exports.scriptAlias = exports.territoryAlias = exports.languageAlias = void 0;\n/* @generated */\n// prettier-ignore  \nexports.languageAlias = {\n    \"aa-saaho\": \"ssy\",\n    \"aam\": \"aas\",\n    \"aar\": \"aa\",\n    \"abk\": \"ab\",\n    \"adp\": \"dz\",\n    \"afr\": \"af\",\n    \"agp\": \"apf\",\n    \"ais\": \"ami\",\n    \"aju\": \"jrb\",\n    \"aka\": \"ak\",\n    \"alb\": \"sq\",\n    \"als\": \"sq\",\n    \"amh\": \"am\",\n    \"ara\": \"ar\",\n    \"arb\": \"ar\",\n    \"arg\": \"an\",\n    \"arm\": \"hy\",\n    \"art-lojban\": \"jbo\",\n    \"asd\": \"snz\",\n    \"asm\": \"as\",\n    \"aue\": \"ktz\",\n    \"ava\": \"av\",\n    \"ave\": \"ae\",\n    \"aym\": \"ay\",\n    \"ayr\": \"ay\",\n    \"ayx\": \"nun\",\n    \"aze\": \"az\",\n    \"azj\": \"az\",\n    \"bak\": \"ba\",\n    \"bam\": \"bm\",\n    \"baq\": \"eu\",\n    \"baz\": \"nvo\",\n    \"bcc\": \"bal\",\n    \"bcl\": \"bik\",\n    \"bel\": \"be\",\n    \"ben\": \"bn\",\n    \"bgm\": \"bcg\",\n    \"bh\": \"bho\",\n    \"bhk\": \"fbl\",\n    \"bic\": \"bir\",\n    \"bih\": \"bho\",\n    \"bis\": \"bi\",\n    \"bjd\": \"drl\",\n    \"bjq\": \"bzc\",\n    \"bkb\": \"ebk\",\n    \"blg\": \"iba\",\n    \"bod\": \"bo\",\n    \"bos\": \"bs\",\n    \"bre\": \"br\",\n    \"btb\": \"beb\",\n    \"bul\": \"bg\",\n    \"bur\": \"my\",\n    \"bxk\": \"luy\",\n    \"bxr\": \"bua\",\n    \"cat\": \"ca\",\n    \"ccq\": \"rki\",\n    \"cel-gaulish\": \"xtg\",\n    \"ces\": \"cs\",\n    \"cha\": \"ch\",\n    \"che\": \"ce\",\n    \"chi\": \"zh\",\n    \"chu\": \"cu\",\n    \"chv\": \"cv\",\n    \"cjr\": \"mom\",\n    \"cka\": \"cmr\",\n    \"cld\": \"syr\",\n    \"cmk\": \"xch\",\n    \"cmn\": \"zh\",\n    \"cnr\": \"sr-ME\",\n    \"cor\": \"kw\",\n    \"cos\": \"co\",\n    \"coy\": \"pij\",\n    \"cqu\": \"quh\",\n    \"cre\": \"cr\",\n    \"cwd\": \"cr\",\n    \"cym\": \"cy\",\n    \"cze\": \"cs\",\n    \"daf\": \"dnj\",\n    \"dan\": \"da\",\n    \"dap\": \"njz\",\n    \"deu\": \"de\",\n    \"dgo\": \"doi\",\n    \"dhd\": \"mwr\",\n    \"dik\": \"din\",\n    \"diq\": \"zza\",\n    \"dit\": \"dif\",\n    \"div\": \"dv\",\n    \"djl\": \"dze\",\n    \"dkl\": \"aqd\",\n    \"drh\": \"mn\",\n    \"drr\": \"kzk\",\n    \"drw\": \"fa-AF\",\n    \"dud\": \"uth\",\n    \"duj\": \"dwu\",\n    \"dut\": \"nl\",\n    \"dwl\": \"dbt\",\n    \"dzo\": \"dz\",\n    \"ekk\": \"et\",\n    \"ell\": \"el\",\n    \"elp\": \"amq\",\n    \"emk\": \"man\",\n    \"en-GB-oed\": \"en-GB-oxendict\",\n    \"eng\": \"en\",\n    \"epo\": \"eo\",\n    \"esk\": \"ik\",\n    \"est\": \"et\",\n    \"eus\": \"eu\",\n    \"ewe\": \"ee\",\n    \"fao\": \"fo\",\n    \"fas\": \"fa\",\n    \"fat\": \"ak\",\n    \"fij\": \"fj\",\n    \"fin\": \"fi\",\n    \"fra\": \"fr\",\n    \"fre\": \"fr\",\n    \"fry\": \"fy\",\n    \"fuc\": \"ff\",\n    \"ful\": \"ff\",\n    \"gav\": \"dev\",\n    \"gaz\": \"om\",\n    \"gbc\": \"wny\",\n    \"gbo\": \"grb\",\n    \"geo\": \"ka\",\n    \"ger\": \"de\",\n    \"gfx\": \"vaj\",\n    \"ggn\": \"gvr\",\n    \"ggo\": \"esg\",\n    \"ggr\": \"gtu\",\n    \"gio\": \"aou\",\n    \"gla\": \"gd\",\n    \"gle\": \"ga\",\n    \"glg\": \"gl\",\n    \"gli\": \"kzk\",\n    \"glv\": \"gv\",\n    \"gno\": \"gon\",\n    \"gre\": \"el\",\n    \"grn\": \"gn\",\n    \"gti\": \"nyc\",\n    \"gug\": \"gn\",\n    \"guj\": \"gu\",\n    \"guv\": \"duz\",\n    \"gya\": \"gba\",\n    \"hat\": \"ht\",\n    \"hau\": \"ha\",\n    \"hbs\": \"sr-Latn\",\n    \"hdn\": \"hai\",\n    \"hea\": \"hmn\",\n    \"heb\": \"he\",\n    \"her\": \"hz\",\n    \"him\": \"srx\",\n    \"hin\": \"hi\",\n    \"hmo\": \"ho\",\n    \"hrr\": \"jal\",\n    \"hrv\": \"hr\",\n    \"hun\": \"hu\",\n    \"hy-arevmda\": \"hyw\",\n    \"hye\": \"hy\",\n    \"i-ami\": \"ami\",\n    \"i-bnn\": \"bnn\",\n    \"i-default\": \"en-x-i-default\",\n    \"i-enochian\": \"und-x-i-enochian\",\n    \"i-hak\": \"hak\",\n    \"i-klingon\": \"tlh\",\n    \"i-lux\": \"lb\",\n    \"i-mingo\": \"see-x-i-mingo\",\n    \"i-navajo\": \"nv\",\n    \"i-pwn\": \"pwn\",\n    \"i-tao\": \"tao\",\n    \"i-tay\": \"tay\",\n    \"i-tsu\": \"tsu\",\n    \"ibi\": \"opa\",\n    \"ibo\": \"ig\",\n    \"ice\": \"is\",\n    \"ido\": \"io\",\n    \"iii\": \"ii\",\n    \"ike\": \"iu\",\n    \"iku\": \"iu\",\n    \"ile\": \"ie\",\n    \"ill\": \"ilm\",\n    \"ilw\": \"gal\",\n    \"in\": \"id\",\n    \"ina\": \"ia\",\n    \"ind\": \"id\",\n    \"ipk\": \"ik\",\n    \"isl\": \"is\",\n    \"ita\": \"it\",\n    \"iw\": \"he\",\n    \"izi\": \"eza\",\n    \"jar\": \"jgk\",\n    \"jav\": \"jv\",\n    \"jeg\": \"oyb\",\n    \"ji\": \"yi\",\n    \"jpn\": \"ja\",\n    \"jw\": \"jv\",\n    \"kal\": \"kl\",\n    \"kan\": \"kn\",\n    \"kas\": \"ks\",\n    \"kat\": \"ka\",\n    \"kau\": \"kr\",\n    \"kaz\": \"kk\",\n    \"kdv\": \"zkd\",\n    \"kgc\": \"tdf\",\n    \"kgd\": \"ncq\",\n    \"kgh\": \"kml\",\n    \"khk\": \"mn\",\n    \"khm\": \"km\",\n    \"kik\": \"ki\",\n    \"kin\": \"rw\",\n    \"kir\": \"ky\",\n    \"kmr\": \"ku\",\n    \"knc\": \"kr\",\n    \"kng\": \"kg\",\n    \"knn\": \"kok\",\n    \"koj\": \"kwv\",\n    \"kom\": \"kv\",\n    \"kon\": \"kg\",\n    \"kor\": \"ko\",\n    \"kpp\": \"jkm\",\n    \"kpv\": \"kv\",\n    \"krm\": \"bmf\",\n    \"ktr\": \"dtp\",\n    \"kua\": \"kj\",\n    \"kur\": \"ku\",\n    \"kvs\": \"gdj\",\n    \"kwq\": \"yam\",\n    \"kxe\": \"tvd\",\n    \"kxl\": \"kru\",\n    \"kzh\": \"dgl\",\n    \"kzj\": \"dtp\",\n    \"kzt\": \"dtp\",\n    \"lao\": \"lo\",\n    \"lat\": \"la\",\n    \"lav\": \"lv\",\n    \"lbk\": \"bnc\",\n    \"leg\": \"enl\",\n    \"lii\": \"raq\",\n    \"lim\": \"li\",\n    \"lin\": \"ln\",\n    \"lit\": \"lt\",\n    \"llo\": \"ngt\",\n    \"lmm\": \"rmx\",\n    \"ltz\": \"lb\",\n    \"lub\": \"lu\",\n    \"lug\": \"lg\",\n    \"lvs\": \"lv\",\n    \"mac\": \"mk\",\n    \"mah\": \"mh\",\n    \"mal\": \"ml\",\n    \"mao\": \"mi\",\n    \"mar\": \"mr\",\n    \"may\": \"ms\",\n    \"meg\": \"cir\",\n    \"mgx\": \"jbk\",\n    \"mhr\": \"chm\",\n    \"mkd\": \"mk\",\n    \"mlg\": \"mg\",\n    \"mlt\": \"mt\",\n    \"mnk\": \"man\",\n    \"mnt\": \"wnn\",\n    \"mo\": \"ro\",\n    \"mof\": \"xnt\",\n    \"mol\": \"ro\",\n    \"mon\": \"mn\",\n    \"mri\": \"mi\",\n    \"msa\": \"ms\",\n    \"mst\": \"mry\",\n    \"mup\": \"raj\",\n    \"mwd\": \"dmw\",\n    \"mwj\": \"vaj\",\n    \"mya\": \"my\",\n    \"myd\": \"aog\",\n    \"myt\": \"mry\",\n    \"nad\": \"xny\",\n    \"nau\": \"na\",\n    \"nav\": \"nv\",\n    \"nbf\": \"nru\",\n    \"nbl\": \"nr\",\n    \"nbx\": \"ekc\",\n    \"ncp\": \"kdz\",\n    \"nde\": \"nd\",\n    \"ndo\": \"ng\",\n    \"nep\": \"ne\",\n    \"nld\": \"nl\",\n    \"nln\": \"azd\",\n    \"nlr\": \"nrk\",\n    \"nno\": \"nn\",\n    \"nns\": \"nbr\",\n    \"nnx\": \"ngv\",\n    \"no-bok\": \"nb\",\n    \"no-bokmal\": \"nb\",\n    \"no-nyn\": \"nn\",\n    \"no-nynorsk\": \"nn\",\n    \"nob\": \"nb\",\n    \"noo\": \"dtd\",\n    \"nor\": \"no\",\n    \"npi\": \"ne\",\n    \"nts\": \"pij\",\n    \"nxu\": \"bpp\",\n    \"nya\": \"ny\",\n    \"oci\": \"oc\",\n    \"ojg\": \"oj\",\n    \"oji\": \"oj\",\n    \"ori\": \"or\",\n    \"orm\": \"om\",\n    \"ory\": \"or\",\n    \"oss\": \"os\",\n    \"oun\": \"vaj\",\n    \"pan\": \"pa\",\n    \"pat\": \"kxr\",\n    \"pbu\": \"ps\",\n    \"pcr\": \"adx\",\n    \"per\": \"fa\",\n    \"pes\": \"fa\",\n    \"pli\": \"pi\",\n    \"plt\": \"mg\",\n    \"pmc\": \"huw\",\n    \"pmu\": \"phr\",\n    \"pnb\": \"lah\",\n    \"pol\": \"pl\",\n    \"por\": \"pt\",\n    \"ppa\": \"bfy\",\n    \"ppr\": \"lcq\",\n    \"prs\": \"fa-AF\",\n    \"pry\": \"prt\",\n    \"pus\": \"ps\",\n    \"puz\": \"pub\",\n    \"que\": \"qu\",\n    \"quz\": \"qu\",\n    \"rmr\": \"emx\",\n    \"rmy\": \"rom\",\n    \"roh\": \"rm\",\n    \"ron\": \"ro\",\n    \"rum\": \"ro\",\n    \"run\": \"rn\",\n    \"rus\": \"ru\",\n    \"sag\": \"sg\",\n    \"san\": \"sa\",\n    \"sap\": \"aqt\",\n    \"sca\": \"hle\",\n    \"scc\": \"sr\",\n    \"scr\": \"hr\",\n    \"sgl\": \"isk\",\n    \"sgn-BE-FR\": \"sfb\",\n    \"sgn-BE-NL\": \"vgt\",\n    \"sgn-BR\": \"bzs\",\n    \"sgn-CH-DE\": \"sgg\",\n    \"sgn-CO\": \"csn\",\n    \"sgn-DE\": \"gsg\",\n    \"sgn-DK\": \"dsl\",\n    \"sgn-ES\": \"ssp\",\n    \"sgn-FR\": \"fsl\",\n    \"sgn-GB\": \"bfi\",\n    \"sgn-GR\": \"gss\",\n    \"sgn-IE\": \"isg\",\n    \"sgn-IT\": \"ise\",\n    \"sgn-JP\": \"jsl\",\n    \"sgn-MX\": \"mfs\",\n    \"sgn-NI\": \"ncs\",\n    \"sgn-NL\": \"dse\",\n    \"sgn-NO\": \"nsi\",\n    \"sgn-PT\": \"psr\",\n    \"sgn-SE\": \"swl\",\n    \"sgn-US\": \"ase\",\n    \"sgn-ZA\": \"sfs\",\n    \"sh\": \"sr-Latn\",\n    \"sin\": \"si\",\n    \"skk\": \"oyb\",\n    \"slk\": \"sk\",\n    \"slo\": \"sk\",\n    \"slv\": \"sl\",\n    \"sme\": \"se\",\n    \"smo\": \"sm\",\n    \"sna\": \"sn\",\n    \"snd\": \"sd\",\n    \"som\": \"so\",\n    \"sot\": \"st\",\n    \"spa\": \"es\",\n    \"spy\": \"kln\",\n    \"sqi\": \"sq\",\n    \"src\": \"sc\",\n    \"srd\": \"sc\",\n    \"srp\": \"sr\",\n    \"ssw\": \"ss\",\n    \"sul\": \"sgd\",\n    \"sum\": \"ulw\",\n    \"sun\": \"su\",\n    \"swa\": \"sw\",\n    \"swc\": \"sw-CD\",\n    \"swe\": \"sv\",\n    \"swh\": \"sw\",\n    \"tah\": \"ty\",\n    \"tam\": \"ta\",\n    \"tat\": \"tt\",\n    \"tdu\": \"dtp\",\n    \"tel\": \"te\",\n    \"tgg\": \"bjp\",\n    \"tgk\": \"tg\",\n    \"tgl\": \"fil\",\n    \"tha\": \"th\",\n    \"thc\": \"tpo\",\n    \"thw\": \"ola\",\n    \"thx\": \"oyb\",\n    \"tib\": \"bo\",\n    \"tid\": \"itd\",\n    \"tie\": \"ras\",\n    \"tir\": \"ti\",\n    \"tkk\": \"twm\",\n    \"tl\": \"fil\",\n    \"tlw\": \"weo\",\n    \"tmp\": \"tyj\",\n    \"tne\": \"kak\",\n    \"tnf\": \"fa-AF\",\n    \"ton\": \"to\",\n    \"tsf\": \"taj\",\n    \"tsn\": \"tn\",\n    \"tso\": \"ts\",\n    \"ttq\": \"tmh\",\n    \"tuk\": \"tk\",\n    \"tur\": \"tr\",\n    \"tw\": \"ak\",\n    \"twi\": \"ak\",\n    \"uig\": \"ug\",\n    \"ukr\": \"uk\",\n    \"umu\": \"del\",\n    \"und-aaland\": \"und-AX\",\n    \"und-arevela\": \"und\",\n    \"und-arevmda\": \"und\",\n    \"und-bokmal\": \"und\",\n    \"und-hakka\": \"und\",\n    \"und-hepburn-heploc\": \"und-alalc97\",\n    \"und-lojban\": \"und\",\n    \"und-nynorsk\": \"und\",\n    \"und-saaho\": \"und\",\n    \"und-xiang\": \"und\",\n    \"unp\": \"wro\",\n    \"uok\": \"ema\",\n    \"urd\": \"ur\",\n    \"uzb\": \"uz\",\n    \"uzn\": \"uz\",\n    \"ven\": \"ve\",\n    \"vie\": \"vi\",\n    \"vol\": \"vo\",\n    \"wel\": \"cy\",\n    \"wgw\": \"wgb\",\n    \"wit\": \"nol\",\n    \"wiw\": \"nwo\",\n    \"wln\": \"wa\",\n    \"wol\": \"wo\",\n    \"xba\": \"cax\",\n    \"xho\": \"xh\",\n    \"xia\": \"acn\",\n    \"xkh\": \"waw\",\n    \"xpe\": \"kpe\",\n    \"xrq\": \"dmw\",\n    \"xsj\": \"suj\",\n    \"xsl\": \"den\",\n    \"ybd\": \"rki\",\n    \"ydd\": \"yi\",\n    \"yen\": \"ynq\",\n    \"yid\": \"yi\",\n    \"yiy\": \"yrm\",\n    \"yma\": \"lrr\",\n    \"ymt\": \"mtm\",\n    \"yor\": \"yo\",\n    \"yos\": \"zom\",\n    \"yuu\": \"yug\",\n    \"zai\": \"zap\",\n    \"zh-cmn\": \"zh\",\n    \"zh-cmn-Hans\": \"zh-Hans\",\n    \"zh-cmn-Hant\": \"zh-Hant\",\n    \"zh-gan\": \"gan\",\n    \"zh-guoyu\": \"zh\",\n    \"zh-hakka\": \"hak\",\n    \"zh-min\": \"nan-x-zh-min\",\n    \"zh-min-nan\": \"nan\",\n    \"zh-wuu\": \"wuu\",\n    \"zh-xiang\": \"hsn\",\n    \"zh-yue\": \"yue\",\n    \"zha\": \"za\",\n    \"zho\": \"zh\",\n    \"zir\": \"scv\",\n    \"zsm\": \"ms\",\n    \"zul\": \"zu\",\n    \"zyb\": \"za\"\n};\nexports.territoryAlias = {\n    \"100\": \"BG\",\n    \"104\": \"MM\",\n    \"108\": \"BI\",\n    \"112\": \"BY\",\n    \"116\": \"KH\",\n    \"120\": \"CM\",\n    \"124\": \"CA\",\n    \"132\": \"CV\",\n    \"136\": \"KY\",\n    \"140\": \"CF\",\n    \"144\": \"LK\",\n    \"148\": \"TD\",\n    \"152\": \"CL\",\n    \"156\": \"CN\",\n    \"158\": \"TW\",\n    \"162\": \"CX\",\n    \"166\": \"CC\",\n    \"170\": \"CO\",\n    \"172\": \"RU AM AZ BY GE KG KZ MD TJ TM UA UZ\",\n    \"174\": \"KM\",\n    \"175\": \"YT\",\n    \"178\": \"CG\",\n    \"180\": \"CD\",\n    \"184\": \"CK\",\n    \"188\": \"CR\",\n    \"191\": \"HR\",\n    \"192\": \"CU\",\n    \"196\": \"CY\",\n    \"200\": \"CZ SK\",\n    \"203\": \"CZ\",\n    \"204\": \"BJ\",\n    \"208\": \"DK\",\n    \"212\": \"DM\",\n    \"214\": \"DO\",\n    \"218\": \"EC\",\n    \"222\": \"SV\",\n    \"226\": \"GQ\",\n    \"230\": \"ET\",\n    \"231\": \"ET\",\n    \"232\": \"ER\",\n    \"233\": \"EE\",\n    \"234\": \"FO\",\n    \"238\": \"FK\",\n    \"239\": \"GS\",\n    \"242\": \"FJ\",\n    \"246\": \"FI\",\n    \"248\": \"AX\",\n    \"249\": \"FR\",\n    \"250\": \"FR\",\n    \"254\": \"GF\",\n    \"258\": \"PF\",\n    \"260\": \"TF\",\n    \"262\": \"DJ\",\n    \"266\": \"GA\",\n    \"268\": \"GE\",\n    \"270\": \"GM\",\n    \"275\": \"PS\",\n    \"276\": \"DE\",\n    \"278\": \"DE\",\n    \"280\": \"DE\",\n    \"288\": \"GH\",\n    \"292\": \"GI\",\n    \"296\": \"KI\",\n    \"300\": \"GR\",\n    \"304\": \"GL\",\n    \"308\": \"GD\",\n    \"312\": \"GP\",\n    \"316\": \"GU\",\n    \"320\": \"GT\",\n    \"324\": \"GN\",\n    \"328\": \"GY\",\n    \"332\": \"HT\",\n    \"334\": \"HM\",\n    \"336\": \"VA\",\n    \"340\": \"HN\",\n    \"344\": \"HK\",\n    \"348\": \"HU\",\n    \"352\": \"IS\",\n    \"356\": \"IN\",\n    \"360\": \"ID\",\n    \"364\": \"IR\",\n    \"368\": \"IQ\",\n    \"372\": \"IE\",\n    \"376\": \"IL\",\n    \"380\": \"IT\",\n    \"384\": \"CI\",\n    \"388\": \"JM\",\n    \"392\": \"JP\",\n    \"398\": \"KZ\",\n    \"400\": \"JO\",\n    \"404\": \"KE\",\n    \"408\": \"KP\",\n    \"410\": \"KR\",\n    \"414\": \"KW\",\n    \"417\": \"KG\",\n    \"418\": \"LA\",\n    \"422\": \"LB\",\n    \"426\": \"LS\",\n    \"428\": \"LV\",\n    \"430\": \"LR\",\n    \"434\": \"LY\",\n    \"438\": \"LI\",\n    \"440\": \"LT\",\n    \"442\": \"LU\",\n    \"446\": \"MO\",\n    \"450\": \"MG\",\n    \"454\": \"MW\",\n    \"458\": \"MY\",\n    \"462\": \"MV\",\n    \"466\": \"ML\",\n    \"470\": \"MT\",\n    \"474\": \"MQ\",\n    \"478\": \"MR\",\n    \"480\": \"MU\",\n    \"484\": \"MX\",\n    \"492\": \"MC\",\n    \"496\": \"MN\",\n    \"498\": \"MD\",\n    \"499\": \"ME\",\n    \"500\": \"MS\",\n    \"504\": \"MA\",\n    \"508\": \"MZ\",\n    \"512\": \"OM\",\n    \"516\": \"NA\",\n    \"520\": \"NR\",\n    \"524\": \"NP\",\n    \"528\": \"NL\",\n    \"530\": \"CW SX BQ\",\n    \"531\": \"CW\",\n    \"532\": \"CW SX BQ\",\n    \"533\": \"AW\",\n    \"534\": \"SX\",\n    \"535\": \"BQ\",\n    \"536\": \"SA IQ\",\n    \"540\": \"NC\",\n    \"548\": \"VU\",\n    \"554\": \"NZ\",\n    \"558\": \"NI\",\n    \"562\": \"NE\",\n    \"566\": \"NG\",\n    \"570\": \"NU\",\n    \"574\": \"NF\",\n    \"578\": \"NO\",\n    \"580\": \"MP\",\n    \"581\": \"UM\",\n    \"582\": \"FM MH MP PW\",\n    \"583\": \"FM\",\n    \"584\": \"MH\",\n    \"585\": \"PW\",\n    \"586\": \"PK\",\n    \"591\": \"PA\",\n    \"598\": \"PG\",\n    \"600\": \"PY\",\n    \"604\": \"PE\",\n    \"608\": \"PH\",\n    \"612\": \"PN\",\n    \"616\": \"PL\",\n    \"620\": \"PT\",\n    \"624\": \"GW\",\n    \"626\": \"TL\",\n    \"630\": \"PR\",\n    \"634\": \"QA\",\n    \"638\": \"RE\",\n    \"642\": \"RO\",\n    \"643\": \"RU\",\n    \"646\": \"RW\",\n    \"652\": \"BL\",\n    \"654\": \"SH\",\n    \"659\": \"KN\",\n    \"660\": \"AI\",\n    \"662\": \"LC\",\n    \"663\": \"MF\",\n    \"666\": \"PM\",\n    \"670\": \"VC\",\n    \"674\": \"SM\",\n    \"678\": \"ST\",\n    \"682\": \"SA\",\n    \"686\": \"SN\",\n    \"688\": \"RS\",\n    \"690\": \"SC\",\n    \"694\": \"SL\",\n    \"702\": \"SG\",\n    \"703\": \"SK\",\n    \"704\": \"VN\",\n    \"705\": \"SI\",\n    \"706\": \"SO\",\n    \"710\": \"ZA\",\n    \"716\": \"ZW\",\n    \"720\": \"YE\",\n    \"724\": \"ES\",\n    \"728\": \"SS\",\n    \"729\": \"SD\",\n    \"732\": \"EH\",\n    \"736\": \"SD\",\n    \"740\": \"SR\",\n    \"744\": \"SJ\",\n    \"748\": \"SZ\",\n    \"752\": \"SE\",\n    \"756\": \"CH\",\n    \"760\": \"SY\",\n    \"762\": \"TJ\",\n    \"764\": \"TH\",\n    \"768\": \"TG\",\n    \"772\": \"TK\",\n    \"776\": \"TO\",\n    \"780\": \"TT\",\n    \"784\": \"AE\",\n    \"788\": \"TN\",\n    \"792\": \"TR\",\n    \"795\": \"TM\",\n    \"796\": \"TC\",\n    \"798\": \"TV\",\n    \"800\": \"UG\",\n    \"804\": \"UA\",\n    \"807\": \"MK\",\n    \"810\": \"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ\",\n    \"818\": \"EG\",\n    \"826\": \"GB\",\n    \"830\": \"JE GG\",\n    \"831\": \"GG\",\n    \"832\": \"JE\",\n    \"833\": \"IM\",\n    \"834\": \"TZ\",\n    \"840\": \"US\",\n    \"850\": \"VI\",\n    \"854\": \"BF\",\n    \"858\": \"UY\",\n    \"860\": \"UZ\",\n    \"862\": \"VE\",\n    \"876\": \"WF\",\n    \"882\": \"WS\",\n    \"886\": \"YE\",\n    \"887\": \"YE\",\n    \"890\": \"RS ME SI HR MK BA\",\n    \"891\": \"RS ME\",\n    \"894\": \"ZM\",\n    \"958\": \"AA\",\n    \"959\": \"QM\",\n    \"960\": \"QN\",\n    \"962\": \"QP\",\n    \"963\": \"QQ\",\n    \"964\": \"QR\",\n    \"965\": \"QS\",\n    \"966\": \"QT\",\n    \"967\": \"EU\",\n    \"968\": \"QV\",\n    \"969\": \"QW\",\n    \"970\": \"QX\",\n    \"971\": \"QY\",\n    \"972\": \"QZ\",\n    \"973\": \"XA\",\n    \"974\": \"XB\",\n    \"975\": \"XC\",\n    \"976\": \"XD\",\n    \"977\": \"XE\",\n    \"978\": \"XF\",\n    \"979\": \"XG\",\n    \"980\": \"XH\",\n    \"981\": \"XI\",\n    \"982\": \"XJ\",\n    \"983\": \"XK\",\n    \"984\": \"XL\",\n    \"985\": \"XM\",\n    \"986\": \"XN\",\n    \"987\": \"XO\",\n    \"988\": \"XP\",\n    \"989\": \"XQ\",\n    \"990\": \"XR\",\n    \"991\": \"XS\",\n    \"992\": \"XT\",\n    \"993\": \"XU\",\n    \"994\": \"XV\",\n    \"995\": \"XW\",\n    \"996\": \"XX\",\n    \"997\": \"XY\",\n    \"998\": \"XZ\",\n    \"999\": \"ZZ\",\n    \"004\": \"AF\",\n    \"008\": \"AL\",\n    \"010\": \"AQ\",\n    \"012\": \"DZ\",\n    \"016\": \"AS\",\n    \"020\": \"AD\",\n    \"024\": \"AO\",\n    \"028\": \"AG\",\n    \"031\": \"AZ\",\n    \"032\": \"AR\",\n    \"036\": \"AU\",\n    \"040\": \"AT\",\n    \"044\": \"BS\",\n    \"048\": \"BH\",\n    \"050\": \"BD\",\n    \"051\": \"AM\",\n    \"052\": \"BB\",\n    \"056\": \"BE\",\n    \"060\": \"BM\",\n    \"062\": \"034 143\",\n    \"064\": \"BT\",\n    \"068\": \"BO\",\n    \"070\": \"BA\",\n    \"072\": \"BW\",\n    \"074\": \"BV\",\n    \"076\": \"BR\",\n    \"084\": \"BZ\",\n    \"086\": \"IO\",\n    \"090\": \"SB\",\n    \"092\": \"VG\",\n    \"096\": \"BN\",\n    \"AAA\": \"AA\",\n    \"ABW\": \"AW\",\n    \"AFG\": \"AF\",\n    \"AGO\": \"AO\",\n    \"AIA\": \"AI\",\n    \"ALA\": \"AX\",\n    \"ALB\": \"AL\",\n    \"AN\": \"CW SX BQ\",\n    \"AND\": \"AD\",\n    \"ANT\": \"CW SX BQ\",\n    \"ARE\": \"AE\",\n    \"ARG\": \"AR\",\n    \"ARM\": \"AM\",\n    \"ASC\": \"AC\",\n    \"ASM\": \"AS\",\n    \"ATA\": \"AQ\",\n    \"ATF\": \"TF\",\n    \"ATG\": \"AG\",\n    \"AUS\": \"AU\",\n    \"AUT\": \"AT\",\n    \"AZE\": \"AZ\",\n    \"BDI\": \"BI\",\n    \"BEL\": \"BE\",\n    \"BEN\": \"BJ\",\n    \"BES\": \"BQ\",\n    \"BFA\": \"BF\",\n    \"BGD\": \"BD\",\n    \"BGR\": \"BG\",\n    \"BHR\": \"BH\",\n    \"BHS\": \"BS\",\n    \"BIH\": \"BA\",\n    \"BLM\": \"BL\",\n    \"BLR\": \"BY\",\n    \"BLZ\": \"BZ\",\n    \"BMU\": \"BM\",\n    \"BOL\": \"BO\",\n    \"BRA\": \"BR\",\n    \"BRB\": \"BB\",\n    \"BRN\": \"BN\",\n    \"BTN\": \"BT\",\n    \"BU\": \"MM\",\n    \"BUR\": \"MM\",\n    \"BVT\": \"BV\",\n    \"BWA\": \"BW\",\n    \"CAF\": \"CF\",\n    \"CAN\": \"CA\",\n    \"CCK\": \"CC\",\n    \"CHE\": \"CH\",\n    \"CHL\": \"CL\",\n    \"CHN\": \"CN\",\n    \"CIV\": \"CI\",\n    \"CMR\": \"CM\",\n    \"COD\": \"CD\",\n    \"COG\": \"CG\",\n    \"COK\": \"CK\",\n    \"COL\": \"CO\",\n    \"COM\": \"KM\",\n    \"CPT\": \"CP\",\n    \"CPV\": \"CV\",\n    \"CRI\": \"CR\",\n    \"CS\": \"RS ME\",\n    \"CT\": \"KI\",\n    \"CUB\": \"CU\",\n    \"CUW\": \"CW\",\n    \"CXR\": \"CX\",\n    \"CYM\": \"KY\",\n    \"CYP\": \"CY\",\n    \"CZE\": \"CZ\",\n    \"DD\": \"DE\",\n    \"DDR\": \"DE\",\n    \"DEU\": \"DE\",\n    \"DGA\": \"DG\",\n    \"DJI\": \"DJ\",\n    \"DMA\": \"DM\",\n    \"DNK\": \"DK\",\n    \"DOM\": \"DO\",\n    \"DY\": \"BJ\",\n    \"DZA\": \"DZ\",\n    \"ECU\": \"EC\",\n    \"EGY\": \"EG\",\n    \"ERI\": \"ER\",\n    \"ESH\": \"EH\",\n    \"ESP\": \"ES\",\n    \"EST\": \"EE\",\n    \"ETH\": \"ET\",\n    \"FIN\": \"FI\",\n    \"FJI\": \"FJ\",\n    \"FLK\": \"FK\",\n    \"FQ\": \"AQ TF\",\n    \"FRA\": \"FR\",\n    \"FRO\": \"FO\",\n    \"FSM\": \"FM\",\n    \"FX\": \"FR\",\n    \"FXX\": \"FR\",\n    \"GAB\": \"GA\",\n    \"GBR\": \"GB\",\n    \"GEO\": \"GE\",\n    \"GGY\": \"GG\",\n    \"GHA\": \"GH\",\n    \"GIB\": \"GI\",\n    \"GIN\": \"GN\",\n    \"GLP\": \"GP\",\n    \"GMB\": \"GM\",\n    \"GNB\": \"GW\",\n    \"GNQ\": \"GQ\",\n    \"GRC\": \"GR\",\n    \"GRD\": \"GD\",\n    \"GRL\": \"GL\",\n    \"GTM\": \"GT\",\n    \"GUF\": \"GF\",\n    \"GUM\": \"GU\",\n    \"GUY\": \"GY\",\n    \"HKG\": \"HK\",\n    \"HMD\": \"HM\",\n    \"HND\": \"HN\",\n    \"HRV\": \"HR\",\n    \"HTI\": \"HT\",\n    \"HUN\": \"HU\",\n    \"HV\": \"BF\",\n    \"IDN\": \"ID\",\n    \"IMN\": \"IM\",\n    \"IND\": \"IN\",\n    \"IOT\": \"IO\",\n    \"IRL\": \"IE\",\n    \"IRN\": \"IR\",\n    \"IRQ\": \"IQ\",\n    \"ISL\": \"IS\",\n    \"ISR\": \"IL\",\n    \"ITA\": \"IT\",\n    \"JAM\": \"JM\",\n    \"JEY\": \"JE\",\n    \"JOR\": \"JO\",\n    \"JPN\": \"JP\",\n    \"JT\": \"UM\",\n    \"KAZ\": \"KZ\",\n    \"KEN\": \"KE\",\n    \"KGZ\": \"KG\",\n    \"KHM\": \"KH\",\n    \"KIR\": \"KI\",\n    \"KNA\": \"KN\",\n    \"KOR\": \"KR\",\n    \"KWT\": \"KW\",\n    \"LAO\": \"LA\",\n    \"LBN\": \"LB\",\n    \"LBR\": \"LR\",\n    \"LBY\": \"LY\",\n    \"LCA\": \"LC\",\n    \"LIE\": \"LI\",\n    \"LKA\": \"LK\",\n    \"LSO\": \"LS\",\n    \"LTU\": \"LT\",\n    \"LUX\": \"LU\",\n    \"LVA\": \"LV\",\n    \"MAC\": \"MO\",\n    \"MAF\": \"MF\",\n    \"MAR\": \"MA\",\n    \"MCO\": \"MC\",\n    \"MDA\": \"MD\",\n    \"MDG\": \"MG\",\n    \"MDV\": \"MV\",\n    \"MEX\": \"MX\",\n    \"MHL\": \"MH\",\n    \"MI\": \"UM\",\n    \"MKD\": \"MK\",\n    \"MLI\": \"ML\",\n    \"MLT\": \"MT\",\n    \"MMR\": \"MM\",\n    \"MNE\": \"ME\",\n    \"MNG\": \"MN\",\n    \"MNP\": \"MP\",\n    \"MOZ\": \"MZ\",\n    \"MRT\": \"MR\",\n    \"MSR\": \"MS\",\n    \"MTQ\": \"MQ\",\n    \"MUS\": \"MU\",\n    \"MWI\": \"MW\",\n    \"MYS\": \"MY\",\n    \"MYT\": \"YT\",\n    \"NAM\": \"NA\",\n    \"NCL\": \"NC\",\n    \"NER\": \"NE\",\n    \"NFK\": \"NF\",\n    \"NGA\": \"NG\",\n    \"NH\": \"VU\",\n    \"NIC\": \"NI\",\n    \"NIU\": \"NU\",\n    \"NLD\": \"NL\",\n    \"NOR\": \"NO\",\n    \"NPL\": \"NP\",\n    \"NQ\": \"AQ\",\n    \"NRU\": \"NR\",\n    \"NT\": \"SA IQ\",\n    \"NTZ\": \"SA IQ\",\n    \"NZL\": \"NZ\",\n    \"OMN\": \"OM\",\n    \"PAK\": \"PK\",\n    \"PAN\": \"PA\",\n    \"PC\": \"FM MH MP PW\",\n    \"PCN\": \"PN\",\n    \"PER\": \"PE\",\n    \"PHL\": \"PH\",\n    \"PLW\": \"PW\",\n    \"PNG\": \"PG\",\n    \"POL\": \"PL\",\n    \"PRI\": \"PR\",\n    \"PRK\": \"KP\",\n    \"PRT\": \"PT\",\n    \"PRY\": \"PY\",\n    \"PSE\": \"PS\",\n    \"PU\": \"UM\",\n    \"PYF\": \"PF\",\n    \"PZ\": \"PA\",\n    \"QAT\": \"QA\",\n    \"QMM\": \"QM\",\n    \"QNN\": \"QN\",\n    \"QPP\": \"QP\",\n    \"QQQ\": \"QQ\",\n    \"QRR\": \"QR\",\n    \"QSS\": \"QS\",\n    \"QTT\": \"QT\",\n    \"QU\": \"EU\",\n    \"QUU\": \"EU\",\n    \"QVV\": \"QV\",\n    \"QWW\": \"QW\",\n    \"QXX\": \"QX\",\n    \"QYY\": \"QY\",\n    \"QZZ\": \"QZ\",\n    \"REU\": \"RE\",\n    \"RH\": \"ZW\",\n    \"ROU\": \"RO\",\n    \"RUS\": \"RU\",\n    \"RWA\": \"RW\",\n    \"SAU\": \"SA\",\n    \"SCG\": \"RS ME\",\n    \"SDN\": \"SD\",\n    \"SEN\": \"SN\",\n    \"SGP\": \"SG\",\n    \"SGS\": \"GS\",\n    \"SHN\": \"SH\",\n    \"SJM\": \"SJ\",\n    \"SLB\": \"SB\",\n    \"SLE\": \"SL\",\n    \"SLV\": \"SV\",\n    \"SMR\": \"SM\",\n    \"SOM\": \"SO\",\n    \"SPM\": \"PM\",\n    \"SRB\": \"RS\",\n    \"SSD\": \"SS\",\n    \"STP\": \"ST\",\n    \"SU\": \"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ\",\n    \"SUN\": \"RU AM AZ BY EE GE KZ KG LV LT MD TJ TM UA UZ\",\n    \"SUR\": \"SR\",\n    \"SVK\": \"SK\",\n    \"SVN\": \"SI\",\n    \"SWE\": \"SE\",\n    \"SWZ\": \"SZ\",\n    \"SXM\": \"SX\",\n    \"SYC\": \"SC\",\n    \"SYR\": \"SY\",\n    \"TAA\": \"TA\",\n    \"TCA\": \"TC\",\n    \"TCD\": \"TD\",\n    \"TGO\": \"TG\",\n    \"THA\": \"TH\",\n    \"TJK\": \"TJ\",\n    \"TKL\": \"TK\",\n    \"TKM\": \"TM\",\n    \"TLS\": \"TL\",\n    \"TMP\": \"TL\",\n    \"TON\": \"TO\",\n    \"TP\": \"TL\",\n    \"TTO\": \"TT\",\n    \"TUN\": \"TN\",\n    \"TUR\": \"TR\",\n    \"TUV\": \"TV\",\n    \"TWN\": \"TW\",\n    \"TZA\": \"TZ\",\n    \"UGA\": \"UG\",\n    \"UK\": \"GB\",\n    \"UKR\": \"UA\",\n    \"UMI\": \"UM\",\n    \"URY\": \"UY\",\n    \"USA\": \"US\",\n    \"UZB\": \"UZ\",\n    \"VAT\": \"VA\",\n    \"VCT\": \"VC\",\n    \"VD\": \"VN\",\n    \"VEN\": \"VE\",\n    \"VGB\": \"VG\",\n    \"VIR\": \"VI\",\n    \"VNM\": \"VN\",\n    \"VUT\": \"VU\",\n    \"WK\": \"UM\",\n    \"WLF\": \"WF\",\n    \"WSM\": \"WS\",\n    \"XAA\": \"XA\",\n    \"XBB\": \"XB\",\n    \"XCC\": \"XC\",\n    \"XDD\": \"XD\",\n    \"XEE\": \"XE\",\n    \"XFF\": \"XF\",\n    \"XGG\": \"XG\",\n    \"XHH\": \"XH\",\n    \"XII\": \"XI\",\n    \"XJJ\": \"XJ\",\n    \"XKK\": \"XK\",\n    \"XLL\": \"XL\",\n    \"XMM\": \"XM\",\n    \"XNN\": \"XN\",\n    \"XOO\": \"XO\",\n    \"XPP\": \"XP\",\n    \"XQQ\": \"XQ\",\n    \"XRR\": \"XR\",\n    \"XSS\": \"XS\",\n    \"XTT\": \"XT\",\n    \"XUU\": \"XU\",\n    \"XVV\": \"XV\",\n    \"XWW\": \"XW\",\n    \"XXX\": \"XX\",\n    \"XYY\": \"XY\",\n    \"XZZ\": \"XZ\",\n    \"YD\": \"YE\",\n    \"YEM\": \"YE\",\n    \"YMD\": \"YE\",\n    \"YU\": \"RS ME\",\n    \"YUG\": \"RS ME\",\n    \"ZAF\": \"ZA\",\n    \"ZAR\": \"CD\",\n    \"ZMB\": \"ZM\",\n    \"ZR\": \"CD\",\n    \"ZWE\": \"ZW\",\n    \"ZZZ\": \"ZZ\"\n};\nexports.scriptAlias = {\n    \"Qaai\": \"Zinh\"\n};\nexports.variantAlias = {\n    \"heploc\": \"alalc97\",\n    \"polytoni\": \"polyton\"\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canonicalizeUnicodeLocaleId = exports.canonicalizeUnicodeLanguageId = void 0;\nvar tslib_1 = require(\"tslib\");\nvar aliases_generated_1 = require(\"./aliases.generated\");\nvar parser_1 = require(\"./parser\");\nvar likelySubtags_generated_1 = require(\"./likelySubtags.generated\");\nvar emitter_1 = require(\"./emitter\");\nfunction canonicalizeAttrs(strs) {\n    return Object.keys(strs.reduce(function (all, str) {\n        all[str.toLowerCase()] = 1;\n        return all;\n    }, {})).sort();\n}\nfunction canonicalizeKVs(arr) {\n    var all = {};\n    var result = [];\n    for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n        var kv = arr_1[_i];\n        if (kv[0] in all) {\n            continue;\n        }\n        all[kv[0]] = 1;\n        if (!kv[1] || kv[1] === 'true') {\n            result.push([kv[0].toLowerCase()]);\n        }\n        else {\n            result.push([kv[0].toLowerCase(), kv[1].toLowerCase()]);\n        }\n    }\n    return result.sort(compareKV);\n}\nfunction compareKV(t1, t2) {\n    return t1[0] < t2[0] ? -1 : t1[0] > t2[0] ? 1 : 0;\n}\nfunction compareExtension(e1, e2) {\n    return e1.type < e2.type ? -1 : e1.type > e2.type ? 1 : 0;\n}\nfunction mergeVariants(v1, v2) {\n    var result = (0, tslib_1.__spreadArray)([], v1, true);\n    for (var _i = 0, v2_1 = v2; _i < v2_1.length; _i++) {\n        var v = v2_1[_i];\n        if (v1.indexOf(v) < 0) {\n            result.push(v);\n        }\n    }\n    return result;\n}\n/**\n * CAVEAT: We don't do this section in the spec bc they have no JSON data\n * Use the bcp47 data to replace keys, types, tfields, and tvalues by their canonical forms. See Section 3.6.4 U Extension Data Files) and Section 3.7.1 T Extension Data Files. The aliases are in the alias attribute value, while the canonical is in the name attribute value. For example,\nBecause of the following bcp47 data:\n<key name=\"ms\"><type name=\"uksystem\"  alias=\"imperial\"  /></key>\nWe get the following transformation:\nen-u-ms-imperial  en-u-ms-uksystem\n * @param lang\n */\nfunction canonicalizeUnicodeLanguageId(unicodeLanguageId) {\n    /**\n     * If the language subtag matches the type attribute of a languageAlias element in Supplemental Data, replace the language subtag with the replacement value.\n     *  1. If there are additional subtags in the replacement value, add them to the result, but only if there is no corresponding subtag already in the tag.\n     *  2. Five special deprecated grandfathered codes (such as i-default) are in type attributes, and are also replaced.\n     */\n    // From https://github.com/unicode-org/icu/blob/master/icu4j/main/classes/core/src/com/ibm/icu/util/ULocale.java#L1246\n    // Try language _ variant\n    var finalLangAst = unicodeLanguageId;\n    if (unicodeLanguageId.variants.length) {\n        var replacedLang_1 = '';\n        for (var _i = 0, _a = unicodeLanguageId.variants; _i < _a.length; _i++) {\n            var variant = _a[_i];\n            if ((replacedLang_1 =\n                aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n                    lang: unicodeLanguageId.lang,\n                    variants: [variant],\n                })])) {\n                var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_1.split(parser_1.SEPARATOR));\n                finalLangAst = {\n                    lang: replacedLangAst.lang,\n                    script: finalLangAst.script || replacedLangAst.script,\n                    region: finalLangAst.region || replacedLangAst.region,\n                    variants: mergeVariants(finalLangAst.variants, replacedLangAst.variants),\n                };\n                break;\n            }\n        }\n    }\n    // language _ script _ country\n    // ug-Arab-CN -> ug-CN\n    if (finalLangAst.script && finalLangAst.region) {\n        var replacedLang_2 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n            lang: finalLangAst.lang,\n            script: finalLangAst.script,\n            region: finalLangAst.region,\n            variants: [],\n        })];\n        if (replacedLang_2) {\n            var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_2.split(parser_1.SEPARATOR));\n            finalLangAst = {\n                lang: replacedLangAst.lang,\n                script: replacedLangAst.script,\n                region: replacedLangAst.region,\n                variants: finalLangAst.variants,\n            };\n        }\n    }\n    // language _ country\n    // eg. az_AZ -> az_Latn_A\n    if (finalLangAst.region) {\n        var replacedLang_3 = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n            lang: finalLangAst.lang,\n            region: finalLangAst.region,\n            variants: [],\n        })];\n        if (replacedLang_3) {\n            var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang_3.split(parser_1.SEPARATOR));\n            finalLangAst = {\n                lang: replacedLangAst.lang,\n                script: finalLangAst.script || replacedLangAst.script,\n                region: replacedLangAst.region,\n                variants: finalLangAst.variants,\n            };\n        }\n    }\n    // only language\n    // e.g. twi -> ak\n    var replacedLang = aliases_generated_1.languageAlias[(0, emitter_1.emitUnicodeLanguageId)({\n        lang: finalLangAst.lang,\n        variants: [],\n    })];\n    if (replacedLang) {\n        var replacedLangAst = (0, parser_1.parseUnicodeLanguageId)(replacedLang.split(parser_1.SEPARATOR));\n        finalLangAst = {\n            lang: replacedLangAst.lang,\n            script: finalLangAst.script || replacedLangAst.script,\n            region: finalLangAst.region || replacedLangAst.region,\n            variants: finalLangAst.variants,\n        };\n    }\n    if (finalLangAst.region) {\n        var region = finalLangAst.region.toUpperCase();\n        var regionAlias = aliases_generated_1.territoryAlias[region];\n        var replacedRegion = void 0;\n        if (regionAlias) {\n            var regions = regionAlias.split(' ');\n            replacedRegion = regions[0];\n            var likelySubtag = likelySubtags_generated_1.likelySubtags[(0, emitter_1.emitUnicodeLanguageId)({\n                lang: finalLangAst.lang,\n                script: finalLangAst.script,\n                variants: [],\n            })];\n            if (likelySubtag) {\n                var likelyRegion = (0, parser_1.parseUnicodeLanguageId)(likelySubtag.split(parser_1.SEPARATOR)).region;\n                if (likelyRegion && regions.indexOf(likelyRegion) > -1) {\n                    replacedRegion = likelyRegion;\n                }\n            }\n        }\n        if (replacedRegion) {\n            finalLangAst.region = replacedRegion;\n        }\n        finalLangAst.region = finalLangAst.region.toUpperCase();\n    }\n    if (finalLangAst.script) {\n        finalLangAst.script =\n            finalLangAst.script[0].toUpperCase() +\n                finalLangAst.script.slice(1).toLowerCase();\n        if (aliases_generated_1.scriptAlias[finalLangAst.script]) {\n            finalLangAst.script = aliases_generated_1.scriptAlias[finalLangAst.script];\n        }\n    }\n    if (finalLangAst.variants.length) {\n        for (var i = 0; i < finalLangAst.variants.length; i++) {\n            var variant = finalLangAst.variants[i].toLowerCase();\n            if (aliases_generated_1.variantAlias[variant]) {\n                var alias = aliases_generated_1.variantAlias[variant];\n                if ((0, parser_1.isUnicodeVariantSubtag)(alias)) {\n                    finalLangAst.variants[i] = alias;\n                }\n                else if ((0, parser_1.isUnicodeLanguageSubtag)(alias)) {\n                    // Yes this can happen per the spec\n                    finalLangAst.lang = alias;\n                }\n            }\n        }\n        finalLangAst.variants.sort();\n    }\n    return finalLangAst;\n}\nexports.canonicalizeUnicodeLanguageId = canonicalizeUnicodeLanguageId;\n/**\n * Canonicalize based on\n * https://www.unicode.org/reports/tr35/tr35.html#Canonical_Unicode_Locale_Identifiers\n * https://tc39.es/ecma402/#sec-canonicalizeunicodelocaleid\n * IMPORTANT: This modifies the object inline\n * @param locale\n */\nfunction canonicalizeUnicodeLocaleId(locale) {\n    locale.lang = canonicalizeUnicodeLanguageId(locale.lang);\n    if (locale.extensions) {\n        for (var _i = 0, _a = locale.extensions; _i < _a.length; _i++) {\n            var extension = _a[_i];\n            switch (extension.type) {\n                case 'u':\n                    extension.keywords = canonicalizeKVs(extension.keywords);\n                    if (extension.attributes) {\n                        extension.attributes = canonicalizeAttrs(extension.attributes);\n                    }\n                    break;\n                case 't':\n                    if (extension.lang) {\n                        extension.lang = canonicalizeUnicodeLanguageId(extension.lang);\n                    }\n                    extension.fields = canonicalizeKVs(extension.fields);\n                    break;\n                default:\n                    extension.value = extension.value.toLowerCase();\n                    break;\n            }\n        }\n        locale.extensions.sort(compareExtension);\n    }\n    return locale;\n}\nexports.canonicalizeUnicodeLocaleId = canonicalizeUnicodeLocaleId;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.emitUnicodeLocaleId = exports.emitUnicodeLanguageId = void 0;\nvar tslib_1 = require(\"tslib\");\nfunction emitUnicodeLanguageId(lang) {\n    if (!lang) {\n        return '';\n    }\n    return (0, tslib_1.__spreadArray)([lang.lang, lang.script, lang.region], (lang.variants || []), true).filter(Boolean)\n        .join('-');\n}\nexports.emitUnicodeLanguageId = emitUnicodeLanguageId;\nfunction emitUnicodeLocaleId(_a) {\n    var lang = _a.lang, extensions = _a.extensions;\n    var chunks = [emitUnicodeLanguageId(lang)];\n    for (var _i = 0, extensions_1 = extensions; _i < extensions_1.length; _i++) {\n        var ext = extensions_1[_i];\n        chunks.push(ext.type);\n        switch (ext.type) {\n            case 'u':\n                chunks.push.apply(chunks, (0, tslib_1.__spreadArray)((0, tslib_1.__spreadArray)([], ext.attributes, false), ext.keywords.reduce(function (all, kv) { return all.concat(kv); }, []), false));\n                break;\n            case 't':\n                chunks.push.apply(chunks, (0, tslib_1.__spreadArray)([emitUnicodeLanguageId(ext.lang)], ext.fields.reduce(function (all, kv) { return all.concat(kv); }, []), false));\n                break;\n            default:\n                chunks.push(ext.value);\n                break;\n        }\n    }\n    return chunks.filter(Boolean).join('-');\n}\nexports.emitUnicodeLocaleId = emitUnicodeLocaleId;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.likelySubtags = void 0;\n/* @generated */\n// prettier-ignore  \nexports.likelySubtags = {\n    \"aa\": \"aa-Latn-ET\",\n    \"aai\": \"aai-Latn-ZZ\",\n    \"aak\": \"aak-Latn-ZZ\",\n    \"aau\": \"aau-Latn-ZZ\",\n    \"ab\": \"ab-Cyrl-GE\",\n    \"abi\": \"abi-Latn-ZZ\",\n    \"abq\": \"abq-Cyrl-ZZ\",\n    \"abr\": \"abr-Latn-GH\",\n    \"abt\": \"abt-Latn-ZZ\",\n    \"aby\": \"aby-Latn-ZZ\",\n    \"acd\": \"acd-Latn-ZZ\",\n    \"ace\": \"ace-Latn-ID\",\n    \"ach\": \"ach-Latn-UG\",\n    \"ada\": \"ada-Latn-GH\",\n    \"ade\": \"ade-Latn-ZZ\",\n    \"adj\": \"adj-Latn-ZZ\",\n    \"adp\": \"adp-Tibt-BT\",\n    \"ady\": \"ady-Cyrl-RU\",\n    \"adz\": \"adz-Latn-ZZ\",\n    \"ae\": \"ae-Avst-IR\",\n    \"aeb\": \"aeb-Arab-TN\",\n    \"aey\": \"aey-Latn-ZZ\",\n    \"af\": \"af-Latn-ZA\",\n    \"agc\": \"agc-Latn-ZZ\",\n    \"agd\": \"agd-Latn-ZZ\",\n    \"agg\": \"agg-Latn-ZZ\",\n    \"agm\": \"agm-Latn-ZZ\",\n    \"ago\": \"ago-Latn-ZZ\",\n    \"agq\": \"agq-Latn-CM\",\n    \"aha\": \"aha-Latn-ZZ\",\n    \"ahl\": \"ahl-Latn-ZZ\",\n    \"aho\": \"aho-Ahom-IN\",\n    \"ajg\": \"ajg-Latn-ZZ\",\n    \"ak\": \"ak-Latn-GH\",\n    \"akk\": \"akk-Xsux-IQ\",\n    \"ala\": \"ala-Latn-ZZ\",\n    \"ali\": \"ali-Latn-ZZ\",\n    \"aln\": \"aln-Latn-XK\",\n    \"alt\": \"alt-Cyrl-RU\",\n    \"am\": \"am-Ethi-ET\",\n    \"amm\": \"amm-Latn-ZZ\",\n    \"amn\": \"amn-Latn-ZZ\",\n    \"amo\": \"amo-Latn-NG\",\n    \"amp\": \"amp-Latn-ZZ\",\n    \"an\": \"an-Latn-ES\",\n    \"anc\": \"anc-Latn-ZZ\",\n    \"ank\": \"ank-Latn-ZZ\",\n    \"ann\": \"ann-Latn-ZZ\",\n    \"any\": \"any-Latn-ZZ\",\n    \"aoj\": \"aoj-Latn-ZZ\",\n    \"aom\": \"aom-Latn-ZZ\",\n    \"aoz\": \"aoz-Latn-ID\",\n    \"apc\": \"apc-Arab-ZZ\",\n    \"apd\": \"apd-Arab-TG\",\n    \"ape\": \"ape-Latn-ZZ\",\n    \"apr\": \"apr-Latn-ZZ\",\n    \"aps\": \"aps-Latn-ZZ\",\n    \"apz\": \"apz-Latn-ZZ\",\n    \"ar\": \"ar-Arab-EG\",\n    \"arc\": \"arc-Armi-IR\",\n    \"arc-Nbat\": \"arc-Nbat-JO\",\n    \"arc-Palm\": \"arc-Palm-SY\",\n    \"arh\": \"arh-Latn-ZZ\",\n    \"arn\": \"arn-Latn-CL\",\n    \"aro\": \"aro-Latn-BO\",\n    \"arq\": \"arq-Arab-DZ\",\n    \"ars\": \"ars-Arab-SA\",\n    \"ary\": \"ary-Arab-MA\",\n    \"arz\": \"arz-Arab-EG\",\n    \"as\": \"as-Beng-IN\",\n    \"asa\": \"asa-Latn-TZ\",\n    \"ase\": \"ase-Sgnw-US\",\n    \"asg\": \"asg-Latn-ZZ\",\n    \"aso\": \"aso-Latn-ZZ\",\n    \"ast\": \"ast-Latn-ES\",\n    \"ata\": \"ata-Latn-ZZ\",\n    \"atg\": \"atg-Latn-ZZ\",\n    \"atj\": \"atj-Latn-CA\",\n    \"auy\": \"auy-Latn-ZZ\",\n    \"av\": \"av-Cyrl-RU\",\n    \"avl\": \"avl-Arab-ZZ\",\n    \"avn\": \"avn-Latn-ZZ\",\n    \"avt\": \"avt-Latn-ZZ\",\n    \"avu\": \"avu-Latn-ZZ\",\n    \"awa\": \"awa-Deva-IN\",\n    \"awb\": \"awb-Latn-ZZ\",\n    \"awo\": \"awo-Latn-ZZ\",\n    \"awx\": \"awx-Latn-ZZ\",\n    \"ay\": \"ay-Latn-BO\",\n    \"ayb\": \"ayb-Latn-ZZ\",\n    \"az\": \"az-Latn-AZ\",\n    \"az-Arab\": \"az-Arab-IR\",\n    \"az-IQ\": \"az-Arab-IQ\",\n    \"az-IR\": \"az-Arab-IR\",\n    \"az-RU\": \"az-Cyrl-RU\",\n    \"ba\": \"ba-Cyrl-RU\",\n    \"bal\": \"bal-Arab-PK\",\n    \"ban\": \"ban-Latn-ID\",\n    \"bap\": \"bap-Deva-NP\",\n    \"bar\": \"bar-Latn-AT\",\n    \"bas\": \"bas-Latn-CM\",\n    \"bav\": \"bav-Latn-ZZ\",\n    \"bax\": \"bax-Bamu-CM\",\n    \"bba\": \"bba-Latn-ZZ\",\n    \"bbb\": \"bbb-Latn-ZZ\",\n    \"bbc\": \"bbc-Latn-ID\",\n    \"bbd\": \"bbd-Latn-ZZ\",\n    \"bbj\": \"bbj-Latn-CM\",\n    \"bbp\": \"bbp-Latn-ZZ\",\n    \"bbr\": \"bbr-Latn-ZZ\",\n    \"bcf\": \"bcf-Latn-ZZ\",\n    \"bch\": \"bch-Latn-ZZ\",\n    \"bci\": \"bci-Latn-CI\",\n    \"bcm\": \"bcm-Latn-ZZ\",\n    \"bcn\": \"bcn-Latn-ZZ\",\n    \"bco\": \"bco-Latn-ZZ\",\n    \"bcq\": \"bcq-Ethi-ZZ\",\n    \"bcu\": \"bcu-Latn-ZZ\",\n    \"bdd\": \"bdd-Latn-ZZ\",\n    \"be\": \"be-Cyrl-BY\",\n    \"bef\": \"bef-Latn-ZZ\",\n    \"beh\": \"beh-Latn-ZZ\",\n    \"bej\": \"bej-Arab-SD\",\n    \"bem\": \"bem-Latn-ZM\",\n    \"bet\": \"bet-Latn-ZZ\",\n    \"bew\": \"bew-Latn-ID\",\n    \"bex\": \"bex-Latn-ZZ\",\n    \"bez\": \"bez-Latn-TZ\",\n    \"bfd\": \"bfd-Latn-CM\",\n    \"bfq\": \"bfq-Taml-IN\",\n    \"bft\": \"bft-Arab-PK\",\n    \"bfy\": \"bfy-Deva-IN\",\n    \"bg\": \"bg-Cyrl-BG\",\n    \"bgc\": \"bgc-Deva-IN\",\n    \"bgn\": \"bgn-Arab-PK\",\n    \"bgx\": \"bgx-Grek-TR\",\n    \"bhb\": \"bhb-Deva-IN\",\n    \"bhg\": \"bhg-Latn-ZZ\",\n    \"bhi\": \"bhi-Deva-IN\",\n    \"bhl\": \"bhl-Latn-ZZ\",\n    \"bho\": \"bho-Deva-IN\",\n    \"bhy\": \"bhy-Latn-ZZ\",\n    \"bi\": \"bi-Latn-VU\",\n    \"bib\": \"bib-Latn-ZZ\",\n    \"big\": \"big-Latn-ZZ\",\n    \"bik\": \"bik-Latn-PH\",\n    \"bim\": \"bim-Latn-ZZ\",\n    \"bin\": \"bin-Latn-NG\",\n    \"bio\": \"bio-Latn-ZZ\",\n    \"biq\": \"biq-Latn-ZZ\",\n    \"bjh\": \"bjh-Latn-ZZ\",\n    \"bji\": \"bji-Ethi-ZZ\",\n    \"bjj\": \"bjj-Deva-IN\",\n    \"bjn\": \"bjn-Latn-ID\",\n    \"bjo\": \"bjo-Latn-ZZ\",\n    \"bjr\": \"bjr-Latn-ZZ\",\n    \"bjt\": \"bjt-Latn-SN\",\n    \"bjz\": \"bjz-Latn-ZZ\",\n    \"bkc\": \"bkc-Latn-ZZ\",\n    \"bkm\": \"bkm-Latn-CM\",\n    \"bkq\": \"bkq-Latn-ZZ\",\n    \"bku\": \"bku-Latn-PH\",\n    \"bkv\": \"bkv-Latn-ZZ\",\n    \"blg\": \"blg-Latn-MY\",\n    \"blt\": \"blt-Tavt-VN\",\n    \"bm\": \"bm-Latn-ML\",\n    \"bmh\": \"bmh-Latn-ZZ\",\n    \"bmk\": \"bmk-Latn-ZZ\",\n    \"bmq\": \"bmq-Latn-ML\",\n    \"bmu\": \"bmu-Latn-ZZ\",\n    \"bn\": \"bn-Beng-BD\",\n    \"bng\": \"bng-Latn-ZZ\",\n    \"bnm\": \"bnm-Latn-ZZ\",\n    \"bnp\": \"bnp-Latn-ZZ\",\n    \"bo\": \"bo-Tibt-CN\",\n    \"boj\": \"boj-Latn-ZZ\",\n    \"bom\": \"bom-Latn-ZZ\",\n    \"bon\": \"bon-Latn-ZZ\",\n    \"bpy\": \"bpy-Beng-IN\",\n    \"bqc\": \"bqc-Latn-ZZ\",\n    \"bqi\": \"bqi-Arab-IR\",\n    \"bqp\": \"bqp-Latn-ZZ\",\n    \"bqv\": \"bqv-Latn-CI\",\n    \"br\": \"br-Latn-FR\",\n    \"bra\": \"bra-Deva-IN\",\n    \"brh\": \"brh-Arab-PK\",\n    \"brx\": \"brx-Deva-IN\",\n    \"brz\": \"brz-Latn-ZZ\",\n    \"bs\": \"bs-Latn-BA\",\n    \"bsj\": \"bsj-Latn-ZZ\",\n    \"bsq\": \"bsq-Bass-LR\",\n    \"bss\": \"bss-Latn-CM\",\n    \"bst\": \"bst-Ethi-ZZ\",\n    \"bto\": \"bto-Latn-PH\",\n    \"btt\": \"btt-Latn-ZZ\",\n    \"btv\": \"btv-Deva-PK\",\n    \"bua\": \"bua-Cyrl-RU\",\n    \"buc\": \"buc-Latn-YT\",\n    \"bud\": \"bud-Latn-ZZ\",\n    \"bug\": \"bug-Latn-ID\",\n    \"buk\": \"buk-Latn-ZZ\",\n    \"bum\": \"bum-Latn-CM\",\n    \"buo\": \"buo-Latn-ZZ\",\n    \"bus\": \"bus-Latn-ZZ\",\n    \"buu\": \"buu-Latn-ZZ\",\n    \"bvb\": \"bvb-Latn-GQ\",\n    \"bwd\": \"bwd-Latn-ZZ\",\n    \"bwr\": \"bwr-Latn-ZZ\",\n    \"bxh\": \"bxh-Latn-ZZ\",\n    \"bye\": \"bye-Latn-ZZ\",\n    \"byn\": \"byn-Ethi-ER\",\n    \"byr\": \"byr-Latn-ZZ\",\n    \"bys\": \"bys-Latn-ZZ\",\n    \"byv\": \"byv-Latn-CM\",\n    \"byx\": \"byx-Latn-ZZ\",\n    \"bza\": \"bza-Latn-ZZ\",\n    \"bze\": \"bze-Latn-ML\",\n    \"bzf\": \"bzf-Latn-ZZ\",\n    \"bzh\": \"bzh-Latn-ZZ\",\n    \"bzw\": \"bzw-Latn-ZZ\",\n    \"ca\": \"ca-Latn-ES\",\n    \"cad\": \"cad-Latn-US\",\n    \"can\": \"can-Latn-ZZ\",\n    \"cbj\": \"cbj-Latn-ZZ\",\n    \"cch\": \"cch-Latn-NG\",\n    \"ccp\": \"ccp-Cakm-BD\",\n    \"ce\": \"ce-Cyrl-RU\",\n    \"ceb\": \"ceb-Latn-PH\",\n    \"cfa\": \"cfa-Latn-ZZ\",\n    \"cgg\": \"cgg-Latn-UG\",\n    \"ch\": \"ch-Latn-GU\",\n    \"chk\": \"chk-Latn-FM\",\n    \"chm\": \"chm-Cyrl-RU\",\n    \"cho\": \"cho-Latn-US\",\n    \"chp\": \"chp-Latn-CA\",\n    \"chr\": \"chr-Cher-US\",\n    \"cic\": \"cic-Latn-US\",\n    \"cja\": \"cja-Arab-KH\",\n    \"cjm\": \"cjm-Cham-VN\",\n    \"cjv\": \"cjv-Latn-ZZ\",\n    \"ckb\": \"ckb-Arab-IQ\",\n    \"ckl\": \"ckl-Latn-ZZ\",\n    \"cko\": \"cko-Latn-ZZ\",\n    \"cky\": \"cky-Latn-ZZ\",\n    \"cla\": \"cla-Latn-ZZ\",\n    \"cme\": \"cme-Latn-ZZ\",\n    \"cmg\": \"cmg-Soyo-MN\",\n    \"co\": \"co-Latn-FR\",\n    \"cop\": \"cop-Copt-EG\",\n    \"cps\": \"cps-Latn-PH\",\n    \"cr\": \"cr-Cans-CA\",\n    \"crh\": \"crh-Cyrl-UA\",\n    \"crj\": \"crj-Cans-CA\",\n    \"crk\": \"crk-Cans-CA\",\n    \"crl\": \"crl-Cans-CA\",\n    \"crm\": \"crm-Cans-CA\",\n    \"crs\": \"crs-Latn-SC\",\n    \"cs\": \"cs-Latn-CZ\",\n    \"csb\": \"csb-Latn-PL\",\n    \"csw\": \"csw-Cans-CA\",\n    \"ctd\": \"ctd-Pauc-MM\",\n    \"cu\": \"cu-Cyrl-RU\",\n    \"cu-Glag\": \"cu-Glag-BG\",\n    \"cv\": \"cv-Cyrl-RU\",\n    \"cy\": \"cy-Latn-GB\",\n    \"da\": \"da-Latn-DK\",\n    \"dad\": \"dad-Latn-ZZ\",\n    \"daf\": \"daf-Latn-CI\",\n    \"dag\": \"dag-Latn-ZZ\",\n    \"dah\": \"dah-Latn-ZZ\",\n    \"dak\": \"dak-Latn-US\",\n    \"dar\": \"dar-Cyrl-RU\",\n    \"dav\": \"dav-Latn-KE\",\n    \"dbd\": \"dbd-Latn-ZZ\",\n    \"dbq\": \"dbq-Latn-ZZ\",\n    \"dcc\": \"dcc-Arab-IN\",\n    \"ddn\": \"ddn-Latn-ZZ\",\n    \"de\": \"de-Latn-DE\",\n    \"ded\": \"ded-Latn-ZZ\",\n    \"den\": \"den-Latn-CA\",\n    \"dga\": \"dga-Latn-ZZ\",\n    \"dgh\": \"dgh-Latn-ZZ\",\n    \"dgi\": \"dgi-Latn-ZZ\",\n    \"dgl\": \"dgl-Arab-ZZ\",\n    \"dgr\": \"dgr-Latn-CA\",\n    \"dgz\": \"dgz-Latn-ZZ\",\n    \"dia\": \"dia-Latn-ZZ\",\n    \"dje\": \"dje-Latn-NE\",\n    \"dmf\": \"dmf-Medf-NG\",\n    \"dnj\": \"dnj-Latn-CI\",\n    \"dob\": \"dob-Latn-ZZ\",\n    \"doi\": \"doi-Deva-IN\",\n    \"dop\": \"dop-Latn-ZZ\",\n    \"dow\": \"dow-Latn-ZZ\",\n    \"drh\": \"drh-Mong-CN\",\n    \"dri\": \"dri-Latn-ZZ\",\n    \"drs\": \"drs-Ethi-ZZ\",\n    \"dsb\": \"dsb-Latn-DE\",\n    \"dtm\": \"dtm-Latn-ML\",\n    \"dtp\": \"dtp-Latn-MY\",\n    \"dts\": \"dts-Latn-ZZ\",\n    \"dty\": \"dty-Deva-NP\",\n    \"dua\": \"dua-Latn-CM\",\n    \"duc\": \"duc-Latn-ZZ\",\n    \"dud\": \"dud-Latn-ZZ\",\n    \"dug\": \"dug-Latn-ZZ\",\n    \"dv\": \"dv-Thaa-MV\",\n    \"dva\": \"dva-Latn-ZZ\",\n    \"dww\": \"dww-Latn-ZZ\",\n    \"dyo\": \"dyo-Latn-SN\",\n    \"dyu\": \"dyu-Latn-BF\",\n    \"dz\": \"dz-Tibt-BT\",\n    \"dzg\": \"dzg-Latn-ZZ\",\n    \"ebu\": \"ebu-Latn-KE\",\n    \"ee\": \"ee-Latn-GH\",\n    \"efi\": \"efi-Latn-NG\",\n    \"egl\": \"egl-Latn-IT\",\n    \"egy\": \"egy-Egyp-EG\",\n    \"eka\": \"eka-Latn-ZZ\",\n    \"eky\": \"eky-Kali-MM\",\n    \"el\": \"el-Grek-GR\",\n    \"ema\": \"ema-Latn-ZZ\",\n    \"emi\": \"emi-Latn-ZZ\",\n    \"en\": \"en-Latn-US\",\n    \"en-Shaw\": \"en-Shaw-GB\",\n    \"enn\": \"enn-Latn-ZZ\",\n    \"enq\": \"enq-Latn-ZZ\",\n    \"eo\": \"eo-Latn-001\",\n    \"eri\": \"eri-Latn-ZZ\",\n    \"es\": \"es-Latn-ES\",\n    \"esg\": \"esg-Gonm-IN\",\n    \"esu\": \"esu-Latn-US\",\n    \"et\": \"et-Latn-EE\",\n    \"etr\": \"etr-Latn-ZZ\",\n    \"ett\": \"ett-Ital-IT\",\n    \"etu\": \"etu-Latn-ZZ\",\n    \"etx\": \"etx-Latn-ZZ\",\n    \"eu\": \"eu-Latn-ES\",\n    \"ewo\": \"ewo-Latn-CM\",\n    \"ext\": \"ext-Latn-ES\",\n    \"eza\": \"eza-Latn-ZZ\",\n    \"fa\": \"fa-Arab-IR\",\n    \"faa\": \"faa-Latn-ZZ\",\n    \"fab\": \"fab-Latn-ZZ\",\n    \"fag\": \"fag-Latn-ZZ\",\n    \"fai\": \"fai-Latn-ZZ\",\n    \"fan\": \"fan-Latn-GQ\",\n    \"ff\": \"ff-Latn-SN\",\n    \"ff-Adlm\": \"ff-Adlm-GN\",\n    \"ffi\": \"ffi-Latn-ZZ\",\n    \"ffm\": \"ffm-Latn-ML\",\n    \"fi\": \"fi-Latn-FI\",\n    \"fia\": \"fia-Arab-SD\",\n    \"fil\": \"fil-Latn-PH\",\n    \"fit\": \"fit-Latn-SE\",\n    \"fj\": \"fj-Latn-FJ\",\n    \"flr\": \"flr-Latn-ZZ\",\n    \"fmp\": \"fmp-Latn-ZZ\",\n    \"fo\": \"fo-Latn-FO\",\n    \"fod\": \"fod-Latn-ZZ\",\n    \"fon\": \"fon-Latn-BJ\",\n    \"for\": \"for-Latn-ZZ\",\n    \"fpe\": \"fpe-Latn-ZZ\",\n    \"fqs\": \"fqs-Latn-ZZ\",\n    \"fr\": \"fr-Latn-FR\",\n    \"frc\": \"frc-Latn-US\",\n    \"frp\": \"frp-Latn-FR\",\n    \"frr\": \"frr-Latn-DE\",\n    \"frs\": \"frs-Latn-DE\",\n    \"fub\": \"fub-Arab-CM\",\n    \"fud\": \"fud-Latn-WF\",\n    \"fue\": \"fue-Latn-ZZ\",\n    \"fuf\": \"fuf-Latn-GN\",\n    \"fuh\": \"fuh-Latn-ZZ\",\n    \"fuq\": \"fuq-Latn-NE\",\n    \"fur\": \"fur-Latn-IT\",\n    \"fuv\": \"fuv-Latn-NG\",\n    \"fuy\": \"fuy-Latn-ZZ\",\n    \"fvr\": \"fvr-Latn-SD\",\n    \"fy\": \"fy-Latn-NL\",\n    \"ga\": \"ga-Latn-IE\",\n    \"gaa\": \"gaa-Latn-GH\",\n    \"gaf\": \"gaf-Latn-ZZ\",\n    \"gag\": \"gag-Latn-MD\",\n    \"gah\": \"gah-Latn-ZZ\",\n    \"gaj\": \"gaj-Latn-ZZ\",\n    \"gam\": \"gam-Latn-ZZ\",\n    \"gan\": \"gan-Hans-CN\",\n    \"gaw\": \"gaw-Latn-ZZ\",\n    \"gay\": \"gay-Latn-ID\",\n    \"gba\": \"gba-Latn-ZZ\",\n    \"gbf\": \"gbf-Latn-ZZ\",\n    \"gbm\": \"gbm-Deva-IN\",\n    \"gby\": \"gby-Latn-ZZ\",\n    \"gbz\": \"gbz-Arab-IR\",\n    \"gcr\": \"gcr-Latn-GF\",\n    \"gd\": \"gd-Latn-GB\",\n    \"gde\": \"gde-Latn-ZZ\",\n    \"gdn\": \"gdn-Latn-ZZ\",\n    \"gdr\": \"gdr-Latn-ZZ\",\n    \"geb\": \"geb-Latn-ZZ\",\n    \"gej\": \"gej-Latn-ZZ\",\n    \"gel\": \"gel-Latn-ZZ\",\n    \"gez\": \"gez-Ethi-ET\",\n    \"gfk\": \"gfk-Latn-ZZ\",\n    \"ggn\": \"ggn-Deva-NP\",\n    \"ghs\": \"ghs-Latn-ZZ\",\n    \"gil\": \"gil-Latn-KI\",\n    \"gim\": \"gim-Latn-ZZ\",\n    \"gjk\": \"gjk-Arab-PK\",\n    \"gjn\": \"gjn-Latn-ZZ\",\n    \"gju\": \"gju-Arab-PK\",\n    \"gkn\": \"gkn-Latn-ZZ\",\n    \"gkp\": \"gkp-Latn-ZZ\",\n    \"gl\": \"gl-Latn-ES\",\n    \"glk\": \"glk-Arab-IR\",\n    \"gmm\": \"gmm-Latn-ZZ\",\n    \"gmv\": \"gmv-Ethi-ZZ\",\n    \"gn\": \"gn-Latn-PY\",\n    \"gnd\": \"gnd-Latn-ZZ\",\n    \"gng\": \"gng-Latn-ZZ\",\n    \"god\": \"god-Latn-ZZ\",\n    \"gof\": \"gof-Ethi-ZZ\",\n    \"goi\": \"goi-Latn-ZZ\",\n    \"gom\": \"gom-Deva-IN\",\n    \"gon\": \"gon-Telu-IN\",\n    \"gor\": \"gor-Latn-ID\",\n    \"gos\": \"gos-Latn-NL\",\n    \"got\": \"got-Goth-UA\",\n    \"grb\": \"grb-Latn-ZZ\",\n    \"grc\": \"grc-Cprt-CY\",\n    \"grc-Linb\": \"grc-Linb-GR\",\n    \"grt\": \"grt-Beng-IN\",\n    \"grw\": \"grw-Latn-ZZ\",\n    \"gsw\": \"gsw-Latn-CH\",\n    \"gu\": \"gu-Gujr-IN\",\n    \"gub\": \"gub-Latn-BR\",\n    \"guc\": \"guc-Latn-CO\",\n    \"gud\": \"gud-Latn-ZZ\",\n    \"gur\": \"gur-Latn-GH\",\n    \"guw\": \"guw-Latn-ZZ\",\n    \"gux\": \"gux-Latn-ZZ\",\n    \"guz\": \"guz-Latn-KE\",\n    \"gv\": \"gv-Latn-IM\",\n    \"gvf\": \"gvf-Latn-ZZ\",\n    \"gvr\": \"gvr-Deva-NP\",\n    \"gvs\": \"gvs-Latn-ZZ\",\n    \"gwc\": \"gwc-Arab-ZZ\",\n    \"gwi\": \"gwi-Latn-CA\",\n    \"gwt\": \"gwt-Arab-ZZ\",\n    \"gyi\": \"gyi-Latn-ZZ\",\n    \"ha\": \"ha-Latn-NG\",\n    \"ha-CM\": \"ha-Arab-CM\",\n    \"ha-SD\": \"ha-Arab-SD\",\n    \"hag\": \"hag-Latn-ZZ\",\n    \"hak\": \"hak-Hans-CN\",\n    \"ham\": \"ham-Latn-ZZ\",\n    \"haw\": \"haw-Latn-US\",\n    \"haz\": \"haz-Arab-AF\",\n    \"hbb\": \"hbb-Latn-ZZ\",\n    \"hdy\": \"hdy-Ethi-ZZ\",\n    \"he\": \"he-Hebr-IL\",\n    \"hhy\": \"hhy-Latn-ZZ\",\n    \"hi\": \"hi-Deva-IN\",\n    \"hia\": \"hia-Latn-ZZ\",\n    \"hif\": \"hif-Latn-FJ\",\n    \"hig\": \"hig-Latn-ZZ\",\n    \"hih\": \"hih-Latn-ZZ\",\n    \"hil\": \"hil-Latn-PH\",\n    \"hla\": \"hla-Latn-ZZ\",\n    \"hlu\": \"hlu-Hluw-TR\",\n    \"hmd\": \"hmd-Plrd-CN\",\n    \"hmt\": \"hmt-Latn-ZZ\",\n    \"hnd\": \"hnd-Arab-PK\",\n    \"hne\": \"hne-Deva-IN\",\n    \"hnj\": \"hnj-Hmnp-US\",\n    \"hnn\": \"hnn-Latn-PH\",\n    \"hno\": \"hno-Arab-PK\",\n    \"ho\": \"ho-Latn-PG\",\n    \"hoc\": \"hoc-Deva-IN\",\n    \"hoj\": \"hoj-Deva-IN\",\n    \"hot\": \"hot-Latn-ZZ\",\n    \"hr\": \"hr-Latn-HR\",\n    \"hsb\": \"hsb-Latn-DE\",\n    \"hsn\": \"hsn-Hans-CN\",\n    \"ht\": \"ht-Latn-HT\",\n    \"hu\": \"hu-Latn-HU\",\n    \"hui\": \"hui-Latn-ZZ\",\n    \"hy\": \"hy-Armn-AM\",\n    \"hz\": \"hz-Latn-NA\",\n    \"ia\": \"ia-Latn-001\",\n    \"ian\": \"ian-Latn-ZZ\",\n    \"iar\": \"iar-Latn-ZZ\",\n    \"iba\": \"iba-Latn-MY\",\n    \"ibb\": \"ibb-Latn-NG\",\n    \"iby\": \"iby-Latn-ZZ\",\n    \"ica\": \"ica-Latn-ZZ\",\n    \"ich\": \"ich-Latn-ZZ\",\n    \"id\": \"id-Latn-ID\",\n    \"idd\": \"idd-Latn-ZZ\",\n    \"idi\": \"idi-Latn-ZZ\",\n    \"idu\": \"idu-Latn-ZZ\",\n    \"ife\": \"ife-Latn-TG\",\n    \"ig\": \"ig-Latn-NG\",\n    \"igb\": \"igb-Latn-ZZ\",\n    \"ige\": \"ige-Latn-ZZ\",\n    \"ii\": \"ii-Yiii-CN\",\n    \"ijj\": \"ijj-Latn-ZZ\",\n    \"ik\": \"ik-Latn-US\",\n    \"ikk\": \"ikk-Latn-ZZ\",\n    \"ikt\": \"ikt-Latn-CA\",\n    \"ikw\": \"ikw-Latn-ZZ\",\n    \"ikx\": \"ikx-Latn-ZZ\",\n    \"ilo\": \"ilo-Latn-PH\",\n    \"imo\": \"imo-Latn-ZZ\",\n    \"in\": \"in-Latn-ID\",\n    \"inh\": \"inh-Cyrl-RU\",\n    \"io\": \"io-Latn-001\",\n    \"iou\": \"iou-Latn-ZZ\",\n    \"iri\": \"iri-Latn-ZZ\",\n    \"is\": \"is-Latn-IS\",\n    \"it\": \"it-Latn-IT\",\n    \"iu\": \"iu-Cans-CA\",\n    \"iw\": \"iw-Hebr-IL\",\n    \"iwm\": \"iwm-Latn-ZZ\",\n    \"iws\": \"iws-Latn-ZZ\",\n    \"izh\": \"izh-Latn-RU\",\n    \"izi\": \"izi-Latn-ZZ\",\n    \"ja\": \"ja-Jpan-JP\",\n    \"jab\": \"jab-Latn-ZZ\",\n    \"jam\": \"jam-Latn-JM\",\n    \"jar\": \"jar-Latn-ZZ\",\n    \"jbo\": \"jbo-Latn-001\",\n    \"jbu\": \"jbu-Latn-ZZ\",\n    \"jen\": \"jen-Latn-ZZ\",\n    \"jgk\": \"jgk-Latn-ZZ\",\n    \"jgo\": \"jgo-Latn-CM\",\n    \"ji\": \"ji-Hebr-UA\",\n    \"jib\": \"jib-Latn-ZZ\",\n    \"jmc\": \"jmc-Latn-TZ\",\n    \"jml\": \"jml-Deva-NP\",\n    \"jra\": \"jra-Latn-ZZ\",\n    \"jut\": \"jut-Latn-DK\",\n    \"jv\": \"jv-Latn-ID\",\n    \"jw\": \"jw-Latn-ID\",\n    \"ka\": \"ka-Geor-GE\",\n    \"kaa\": \"kaa-Cyrl-UZ\",\n    \"kab\": \"kab-Latn-DZ\",\n    \"kac\": \"kac-Latn-MM\",\n    \"kad\": \"kad-Latn-ZZ\",\n    \"kai\": \"kai-Latn-ZZ\",\n    \"kaj\": \"kaj-Latn-NG\",\n    \"kam\": \"kam-Latn-KE\",\n    \"kao\": \"kao-Latn-ML\",\n    \"kbd\": \"kbd-Cyrl-RU\",\n    \"kbm\": \"kbm-Latn-ZZ\",\n    \"kbp\": \"kbp-Latn-ZZ\",\n    \"kbq\": \"kbq-Latn-ZZ\",\n    \"kbx\": \"kbx-Latn-ZZ\",\n    \"kby\": \"kby-Arab-NE\",\n    \"kcg\": \"kcg-Latn-NG\",\n    \"kck\": \"kck-Latn-ZW\",\n    \"kcl\": \"kcl-Latn-ZZ\",\n    \"kct\": \"kct-Latn-ZZ\",\n    \"kde\": \"kde-Latn-TZ\",\n    \"kdh\": \"kdh-Latn-TG\",\n    \"kdl\": \"kdl-Latn-ZZ\",\n    \"kdt\": \"kdt-Thai-TH\",\n    \"kea\": \"kea-Latn-CV\",\n    \"ken\": \"ken-Latn-CM\",\n    \"kez\": \"kez-Latn-ZZ\",\n    \"kfo\": \"kfo-Latn-CI\",\n    \"kfr\": \"kfr-Deva-IN\",\n    \"kfy\": \"kfy-Deva-IN\",\n    \"kg\": \"kg-Latn-CD\",\n    \"kge\": \"kge-Latn-ID\",\n    \"kgf\": \"kgf-Latn-ZZ\",\n    \"kgp\": \"kgp-Latn-BR\",\n    \"kha\": \"kha-Latn-IN\",\n    \"khb\": \"khb-Talu-CN\",\n    \"khn\": \"khn-Deva-IN\",\n    \"khq\": \"khq-Latn-ML\",\n    \"khs\": \"khs-Latn-ZZ\",\n    \"kht\": \"kht-Mymr-IN\",\n    \"khw\": \"khw-Arab-PK\",\n    \"khz\": \"khz-Latn-ZZ\",\n    \"ki\": \"ki-Latn-KE\",\n    \"kij\": \"kij-Latn-ZZ\",\n    \"kiu\": \"kiu-Latn-TR\",\n    \"kiw\": \"kiw-Latn-ZZ\",\n    \"kj\": \"kj-Latn-NA\",\n    \"kjd\": \"kjd-Latn-ZZ\",\n    \"kjg\": \"kjg-Laoo-LA\",\n    \"kjs\": \"kjs-Latn-ZZ\",\n    \"kjy\": \"kjy-Latn-ZZ\",\n    \"kk\": \"kk-Cyrl-KZ\",\n    \"kk-AF\": \"kk-Arab-AF\",\n    \"kk-Arab\": \"kk-Arab-CN\",\n    \"kk-CN\": \"kk-Arab-CN\",\n    \"kk-IR\": \"kk-Arab-IR\",\n    \"kk-MN\": \"kk-Arab-MN\",\n    \"kkc\": \"kkc-Latn-ZZ\",\n    \"kkj\": \"kkj-Latn-CM\",\n    \"kl\": \"kl-Latn-GL\",\n    \"kln\": \"kln-Latn-KE\",\n    \"klq\": \"klq-Latn-ZZ\",\n    \"klt\": \"klt-Latn-ZZ\",\n    \"klx\": \"klx-Latn-ZZ\",\n    \"km\": \"km-Khmr-KH\",\n    \"kmb\": \"kmb-Latn-AO\",\n    \"kmh\": \"kmh-Latn-ZZ\",\n    \"kmo\": \"kmo-Latn-ZZ\",\n    \"kms\": \"kms-Latn-ZZ\",\n    \"kmu\": \"kmu-Latn-ZZ\",\n    \"kmw\": \"kmw-Latn-ZZ\",\n    \"kn\": \"kn-Knda-IN\",\n    \"knf\": \"knf-Latn-GW\",\n    \"knp\": \"knp-Latn-ZZ\",\n    \"ko\": \"ko-Kore-KR\",\n    \"koi\": \"koi-Cyrl-RU\",\n    \"kok\": \"kok-Deva-IN\",\n    \"kol\": \"kol-Latn-ZZ\",\n    \"kos\": \"kos-Latn-FM\",\n    \"koz\": \"koz-Latn-ZZ\",\n    \"kpe\": \"kpe-Latn-LR\",\n    \"kpf\": \"kpf-Latn-ZZ\",\n    \"kpo\": \"kpo-Latn-ZZ\",\n    \"kpr\": \"kpr-Latn-ZZ\",\n    \"kpx\": \"kpx-Latn-ZZ\",\n    \"kqb\": \"kqb-Latn-ZZ\",\n    \"kqf\": \"kqf-Latn-ZZ\",\n    \"kqs\": \"kqs-Latn-ZZ\",\n    \"kqy\": \"kqy-Ethi-ZZ\",\n    \"kr\": \"kr-Latn-ZZ\",\n    \"krc\": \"krc-Cyrl-RU\",\n    \"kri\": \"kri-Latn-SL\",\n    \"krj\": \"krj-Latn-PH\",\n    \"krl\": \"krl-Latn-RU\",\n    \"krs\": \"krs-Latn-ZZ\",\n    \"kru\": \"kru-Deva-IN\",\n    \"ks\": \"ks-Arab-IN\",\n    \"ksb\": \"ksb-Latn-TZ\",\n    \"ksd\": \"ksd-Latn-ZZ\",\n    \"ksf\": \"ksf-Latn-CM\",\n    \"ksh\": \"ksh-Latn-DE\",\n    \"ksj\": \"ksj-Latn-ZZ\",\n    \"ksr\": \"ksr-Latn-ZZ\",\n    \"ktb\": \"ktb-Ethi-ZZ\",\n    \"ktm\": \"ktm-Latn-ZZ\",\n    \"kto\": \"kto-Latn-ZZ\",\n    \"ktr\": \"ktr-Latn-MY\",\n    \"ku\": \"ku-Latn-TR\",\n    \"ku-Arab\": \"ku-Arab-IQ\",\n    \"ku-LB\": \"ku-Arab-LB\",\n    \"ku-Yezi\": \"ku-Yezi-GE\",\n    \"kub\": \"kub-Latn-ZZ\",\n    \"kud\": \"kud-Latn-ZZ\",\n    \"kue\": \"kue-Latn-ZZ\",\n    \"kuj\": \"kuj-Latn-ZZ\",\n    \"kum\": \"kum-Cyrl-RU\",\n    \"kun\": \"kun-Latn-ZZ\",\n    \"kup\": \"kup-Latn-ZZ\",\n    \"kus\": \"kus-Latn-ZZ\",\n    \"kv\": \"kv-Cyrl-RU\",\n    \"kvg\": \"kvg-Latn-ZZ\",\n    \"kvr\": \"kvr-Latn-ID\",\n    \"kvx\": \"kvx-Arab-PK\",\n    \"kw\": \"kw-Latn-GB\",\n    \"kwj\": \"kwj-Latn-ZZ\",\n    \"kwo\": \"kwo-Latn-ZZ\",\n    \"kwq\": \"kwq-Latn-ZZ\",\n    \"kxa\": \"kxa-Latn-ZZ\",\n    \"kxc\": \"kxc-Ethi-ZZ\",\n    \"kxe\": \"kxe-Latn-ZZ\",\n    \"kxl\": \"kxl-Deva-IN\",\n    \"kxm\": \"kxm-Thai-TH\",\n    \"kxp\": \"kxp-Arab-PK\",\n    \"kxw\": \"kxw-Latn-ZZ\",\n    \"kxz\": \"kxz-Latn-ZZ\",\n    \"ky\": \"ky-Cyrl-KG\",\n    \"ky-Arab\": \"ky-Arab-CN\",\n    \"ky-CN\": \"ky-Arab-CN\",\n    \"ky-Latn\": \"ky-Latn-TR\",\n    \"ky-TR\": \"ky-Latn-TR\",\n    \"kye\": \"kye-Latn-ZZ\",\n    \"kyx\": \"kyx-Latn-ZZ\",\n    \"kzh\": \"kzh-Arab-ZZ\",\n    \"kzj\": \"kzj-Latn-MY\",\n    \"kzr\": \"kzr-Latn-ZZ\",\n    \"kzt\": \"kzt-Latn-MY\",\n    \"la\": \"la-Latn-VA\",\n    \"lab\": \"lab-Lina-GR\",\n    \"lad\": \"lad-Hebr-IL\",\n    \"lag\": \"lag-Latn-TZ\",\n    \"lah\": \"lah-Arab-PK\",\n    \"laj\": \"laj-Latn-UG\",\n    \"las\": \"las-Latn-ZZ\",\n    \"lb\": \"lb-Latn-LU\",\n    \"lbe\": \"lbe-Cyrl-RU\",\n    \"lbu\": \"lbu-Latn-ZZ\",\n    \"lbw\": \"lbw-Latn-ID\",\n    \"lcm\": \"lcm-Latn-ZZ\",\n    \"lcp\": \"lcp-Thai-CN\",\n    \"ldb\": \"ldb-Latn-ZZ\",\n    \"led\": \"led-Latn-ZZ\",\n    \"lee\": \"lee-Latn-ZZ\",\n    \"lem\": \"lem-Latn-ZZ\",\n    \"lep\": \"lep-Lepc-IN\",\n    \"leq\": \"leq-Latn-ZZ\",\n    \"leu\": \"leu-Latn-ZZ\",\n    \"lez\": \"lez-Cyrl-RU\",\n    \"lg\": \"lg-Latn-UG\",\n    \"lgg\": \"lgg-Latn-ZZ\",\n    \"li\": \"li-Latn-NL\",\n    \"lia\": \"lia-Latn-ZZ\",\n    \"lid\": \"lid-Latn-ZZ\",\n    \"lif\": \"lif-Deva-NP\",\n    \"lif-Limb\": \"lif-Limb-IN\",\n    \"lig\": \"lig-Latn-ZZ\",\n    \"lih\": \"lih-Latn-ZZ\",\n    \"lij\": \"lij-Latn-IT\",\n    \"lis\": \"lis-Lisu-CN\",\n    \"ljp\": \"ljp-Latn-ID\",\n    \"lki\": \"lki-Arab-IR\",\n    \"lkt\": \"lkt-Latn-US\",\n    \"lle\": \"lle-Latn-ZZ\",\n    \"lln\": \"lln-Latn-ZZ\",\n    \"lmn\": \"lmn-Telu-IN\",\n    \"lmo\": \"lmo-Latn-IT\",\n    \"lmp\": \"lmp-Latn-ZZ\",\n    \"ln\": \"ln-Latn-CD\",\n    \"lns\": \"lns-Latn-ZZ\",\n    \"lnu\": \"lnu-Latn-ZZ\",\n    \"lo\": \"lo-Laoo-LA\",\n    \"loj\": \"loj-Latn-ZZ\",\n    \"lok\": \"lok-Latn-ZZ\",\n    \"lol\": \"lol-Latn-CD\",\n    \"lor\": \"lor-Latn-ZZ\",\n    \"los\": \"los-Latn-ZZ\",\n    \"loz\": \"loz-Latn-ZM\",\n    \"lrc\": \"lrc-Arab-IR\",\n    \"lt\": \"lt-Latn-LT\",\n    \"ltg\": \"ltg-Latn-LV\",\n    \"lu\": \"lu-Latn-CD\",\n    \"lua\": \"lua-Latn-CD\",\n    \"luo\": \"luo-Latn-KE\",\n    \"luy\": \"luy-Latn-KE\",\n    \"luz\": \"luz-Arab-IR\",\n    \"lv\": \"lv-Latn-LV\",\n    \"lwl\": \"lwl-Thai-TH\",\n    \"lzh\": \"lzh-Hans-CN\",\n    \"lzz\": \"lzz-Latn-TR\",\n    \"mad\": \"mad-Latn-ID\",\n    \"maf\": \"maf-Latn-CM\",\n    \"mag\": \"mag-Deva-IN\",\n    \"mai\": \"mai-Deva-IN\",\n    \"mak\": \"mak-Latn-ID\",\n    \"man\": \"man-Latn-GM\",\n    \"man-GN\": \"man-Nkoo-GN\",\n    \"man-Nkoo\": \"man-Nkoo-GN\",\n    \"mas\": \"mas-Latn-KE\",\n    \"maw\": \"maw-Latn-ZZ\",\n    \"maz\": \"maz-Latn-MX\",\n    \"mbh\": \"mbh-Latn-ZZ\",\n    \"mbo\": \"mbo-Latn-ZZ\",\n    \"mbq\": \"mbq-Latn-ZZ\",\n    \"mbu\": \"mbu-Latn-ZZ\",\n    \"mbw\": \"mbw-Latn-ZZ\",\n    \"mci\": \"mci-Latn-ZZ\",\n    \"mcp\": \"mcp-Latn-ZZ\",\n    \"mcq\": \"mcq-Latn-ZZ\",\n    \"mcr\": \"mcr-Latn-ZZ\",\n    \"mcu\": \"mcu-Latn-ZZ\",\n    \"mda\": \"mda-Latn-ZZ\",\n    \"mde\": \"mde-Arab-ZZ\",\n    \"mdf\": \"mdf-Cyrl-RU\",\n    \"mdh\": \"mdh-Latn-PH\",\n    \"mdj\": \"mdj-Latn-ZZ\",\n    \"mdr\": \"mdr-Latn-ID\",\n    \"mdx\": \"mdx-Ethi-ZZ\",\n    \"med\": \"med-Latn-ZZ\",\n    \"mee\": \"mee-Latn-ZZ\",\n    \"mek\": \"mek-Latn-ZZ\",\n    \"men\": \"men-Latn-SL\",\n    \"mer\": \"mer-Latn-KE\",\n    \"met\": \"met-Latn-ZZ\",\n    \"meu\": \"meu-Latn-ZZ\",\n    \"mfa\": \"mfa-Arab-TH\",\n    \"mfe\": \"mfe-Latn-MU\",\n    \"mfn\": \"mfn-Latn-ZZ\",\n    \"mfo\": \"mfo-Latn-ZZ\",\n    \"mfq\": \"mfq-Latn-ZZ\",\n    \"mg\": \"mg-Latn-MG\",\n    \"mgh\": \"mgh-Latn-MZ\",\n    \"mgl\": \"mgl-Latn-ZZ\",\n    \"mgo\": \"mgo-Latn-CM\",\n    \"mgp\": \"mgp-Deva-NP\",\n    \"mgy\": \"mgy-Latn-TZ\",\n    \"mh\": \"mh-Latn-MH\",\n    \"mhi\": \"mhi-Latn-ZZ\",\n    \"mhl\": \"mhl-Latn-ZZ\",\n    \"mi\": \"mi-Latn-NZ\",\n    \"mif\": \"mif-Latn-ZZ\",\n    \"min\": \"min-Latn-ID\",\n    \"miw\": \"miw-Latn-ZZ\",\n    \"mk\": \"mk-Cyrl-MK\",\n    \"mki\": \"mki-Arab-ZZ\",\n    \"mkl\": \"mkl-Latn-ZZ\",\n    \"mkp\": \"mkp-Latn-ZZ\",\n    \"mkw\": \"mkw-Latn-ZZ\",\n    \"ml\": \"ml-Mlym-IN\",\n    \"mle\": \"mle-Latn-ZZ\",\n    \"mlp\": \"mlp-Latn-ZZ\",\n    \"mls\": \"mls-Latn-SD\",\n    \"mmo\": \"mmo-Latn-ZZ\",\n    \"mmu\": \"mmu-Latn-ZZ\",\n    \"mmx\": \"mmx-Latn-ZZ\",\n    \"mn\": \"mn-Cyrl-MN\",\n    \"mn-CN\": \"mn-Mong-CN\",\n    \"mn-Mong\": \"mn-Mong-CN\",\n    \"mna\": \"mna-Latn-ZZ\",\n    \"mnf\": \"mnf-Latn-ZZ\",\n    \"mni\": \"mni-Beng-IN\",\n    \"mnw\": \"mnw-Mymr-MM\",\n    \"mo\": \"mo-Latn-RO\",\n    \"moa\": \"moa-Latn-ZZ\",\n    \"moe\": \"moe-Latn-CA\",\n    \"moh\": \"moh-Latn-CA\",\n    \"mos\": \"mos-Latn-BF\",\n    \"mox\": \"mox-Latn-ZZ\",\n    \"mpp\": \"mpp-Latn-ZZ\",\n    \"mps\": \"mps-Latn-ZZ\",\n    \"mpt\": \"mpt-Latn-ZZ\",\n    \"mpx\": \"mpx-Latn-ZZ\",\n    \"mql\": \"mql-Latn-ZZ\",\n    \"mr\": \"mr-Deva-IN\",\n    \"mrd\": \"mrd-Deva-NP\",\n    \"mrj\": \"mrj-Cyrl-RU\",\n    \"mro\": \"mro-Mroo-BD\",\n    \"ms\": \"ms-Latn-MY\",\n    \"ms-CC\": \"ms-Arab-CC\",\n    \"mt\": \"mt-Latn-MT\",\n    \"mtc\": \"mtc-Latn-ZZ\",\n    \"mtf\": \"mtf-Latn-ZZ\",\n    \"mti\": \"mti-Latn-ZZ\",\n    \"mtr\": \"mtr-Deva-IN\",\n    \"mua\": \"mua-Latn-CM\",\n    \"mur\": \"mur-Latn-ZZ\",\n    \"mus\": \"mus-Latn-US\",\n    \"mva\": \"mva-Latn-ZZ\",\n    \"mvn\": \"mvn-Latn-ZZ\",\n    \"mvy\": \"mvy-Arab-PK\",\n    \"mwk\": \"mwk-Latn-ML\",\n    \"mwr\": \"mwr-Deva-IN\",\n    \"mwv\": \"mwv-Latn-ID\",\n    \"mww\": \"mww-Hmnp-US\",\n    \"mxc\": \"mxc-Latn-ZW\",\n    \"mxm\": \"mxm-Latn-ZZ\",\n    \"my\": \"my-Mymr-MM\",\n    \"myk\": \"myk-Latn-ZZ\",\n    \"mym\": \"mym-Ethi-ZZ\",\n    \"myv\": \"myv-Cyrl-RU\",\n    \"myw\": \"myw-Latn-ZZ\",\n    \"myx\": \"myx-Latn-UG\",\n    \"myz\": \"myz-Mand-IR\",\n    \"mzk\": \"mzk-Latn-ZZ\",\n    \"mzm\": \"mzm-Latn-ZZ\",\n    \"mzn\": \"mzn-Arab-IR\",\n    \"mzp\": \"mzp-Latn-ZZ\",\n    \"mzw\": \"mzw-Latn-ZZ\",\n    \"mzz\": \"mzz-Latn-ZZ\",\n    \"na\": \"na-Latn-NR\",\n    \"nac\": \"nac-Latn-ZZ\",\n    \"naf\": \"naf-Latn-ZZ\",\n    \"nak\": \"nak-Latn-ZZ\",\n    \"nan\": \"nan-Hans-CN\",\n    \"nap\": \"nap-Latn-IT\",\n    \"naq\": \"naq-Latn-NA\",\n    \"nas\": \"nas-Latn-ZZ\",\n    \"nb\": \"nb-Latn-NO\",\n    \"nca\": \"nca-Latn-ZZ\",\n    \"nce\": \"nce-Latn-ZZ\",\n    \"ncf\": \"ncf-Latn-ZZ\",\n    \"nch\": \"nch-Latn-MX\",\n    \"nco\": \"nco-Latn-ZZ\",\n    \"ncu\": \"ncu-Latn-ZZ\",\n    \"nd\": \"nd-Latn-ZW\",\n    \"ndc\": \"ndc-Latn-MZ\",\n    \"nds\": \"nds-Latn-DE\",\n    \"ne\": \"ne-Deva-NP\",\n    \"neb\": \"neb-Latn-ZZ\",\n    \"new\": \"new-Deva-NP\",\n    \"nex\": \"nex-Latn-ZZ\",\n    \"nfr\": \"nfr-Latn-ZZ\",\n    \"ng\": \"ng-Latn-NA\",\n    \"nga\": \"nga-Latn-ZZ\",\n    \"ngb\": \"ngb-Latn-ZZ\",\n    \"ngl\": \"ngl-Latn-MZ\",\n    \"nhb\": \"nhb-Latn-ZZ\",\n    \"nhe\": \"nhe-Latn-MX\",\n    \"nhw\": \"nhw-Latn-MX\",\n    \"nif\": \"nif-Latn-ZZ\",\n    \"nii\": \"nii-Latn-ZZ\",\n    \"nij\": \"nij-Latn-ID\",\n    \"nin\": \"nin-Latn-ZZ\",\n    \"niu\": \"niu-Latn-NU\",\n    \"niy\": \"niy-Latn-ZZ\",\n    \"niz\": \"niz-Latn-ZZ\",\n    \"njo\": \"njo-Latn-IN\",\n    \"nkg\": \"nkg-Latn-ZZ\",\n    \"nko\": \"nko-Latn-ZZ\",\n    \"nl\": \"nl-Latn-NL\",\n    \"nmg\": \"nmg-Latn-CM\",\n    \"nmz\": \"nmz-Latn-ZZ\",\n    \"nn\": \"nn-Latn-NO\",\n    \"nnf\": \"nnf-Latn-ZZ\",\n    \"nnh\": \"nnh-Latn-CM\",\n    \"nnk\": \"nnk-Latn-ZZ\",\n    \"nnm\": \"nnm-Latn-ZZ\",\n    \"nnp\": \"nnp-Wcho-IN\",\n    \"no\": \"no-Latn-NO\",\n    \"nod\": \"nod-Lana-TH\",\n    \"noe\": \"noe-Deva-IN\",\n    \"non\": \"non-Runr-SE\",\n    \"nop\": \"nop-Latn-ZZ\",\n    \"nou\": \"nou-Latn-ZZ\",\n    \"nqo\": \"nqo-Nkoo-GN\",\n    \"nr\": \"nr-Latn-ZA\",\n    \"nrb\": \"nrb-Latn-ZZ\",\n    \"nsk\": \"nsk-Cans-CA\",\n    \"nsn\": \"nsn-Latn-ZZ\",\n    \"nso\": \"nso-Latn-ZA\",\n    \"nss\": \"nss-Latn-ZZ\",\n    \"nst\": \"nst-Tnsa-IN\",\n    \"ntm\": \"ntm-Latn-ZZ\",\n    \"ntr\": \"ntr-Latn-ZZ\",\n    \"nui\": \"nui-Latn-ZZ\",\n    \"nup\": \"nup-Latn-ZZ\",\n    \"nus\": \"nus-Latn-SS\",\n    \"nuv\": \"nuv-Latn-ZZ\",\n    \"nux\": \"nux-Latn-ZZ\",\n    \"nv\": \"nv-Latn-US\",\n    \"nwb\": \"nwb-Latn-ZZ\",\n    \"nxq\": \"nxq-Latn-CN\",\n    \"nxr\": \"nxr-Latn-ZZ\",\n    \"ny\": \"ny-Latn-MW\",\n    \"nym\": \"nym-Latn-TZ\",\n    \"nyn\": \"nyn-Latn-UG\",\n    \"nzi\": \"nzi-Latn-GH\",\n    \"oc\": \"oc-Latn-FR\",\n    \"ogc\": \"ogc-Latn-ZZ\",\n    \"okr\": \"okr-Latn-ZZ\",\n    \"okv\": \"okv-Latn-ZZ\",\n    \"om\": \"om-Latn-ET\",\n    \"ong\": \"ong-Latn-ZZ\",\n    \"onn\": \"onn-Latn-ZZ\",\n    \"ons\": \"ons-Latn-ZZ\",\n    \"opm\": \"opm-Latn-ZZ\",\n    \"or\": \"or-Orya-IN\",\n    \"oro\": \"oro-Latn-ZZ\",\n    \"oru\": \"oru-Arab-ZZ\",\n    \"os\": \"os-Cyrl-GE\",\n    \"osa\": \"osa-Osge-US\",\n    \"ota\": \"ota-Arab-ZZ\",\n    \"otk\": \"otk-Orkh-MN\",\n    \"oui\": \"oui-Ougr-143\",\n    \"ozm\": \"ozm-Latn-ZZ\",\n    \"pa\": \"pa-Guru-IN\",\n    \"pa-Arab\": \"pa-Arab-PK\",\n    \"pa-PK\": \"pa-Arab-PK\",\n    \"pag\": \"pag-Latn-PH\",\n    \"pal\": \"pal-Phli-IR\",\n    \"pal-Phlp\": \"pal-Phlp-CN\",\n    \"pam\": \"pam-Latn-PH\",\n    \"pap\": \"pap-Latn-AW\",\n    \"pau\": \"pau-Latn-PW\",\n    \"pbi\": \"pbi-Latn-ZZ\",\n    \"pcd\": \"pcd-Latn-FR\",\n    \"pcm\": \"pcm-Latn-NG\",\n    \"pdc\": \"pdc-Latn-US\",\n    \"pdt\": \"pdt-Latn-CA\",\n    \"ped\": \"ped-Latn-ZZ\",\n    \"peo\": \"peo-Xpeo-IR\",\n    \"pex\": \"pex-Latn-ZZ\",\n    \"pfl\": \"pfl-Latn-DE\",\n    \"phl\": \"phl-Arab-ZZ\",\n    \"phn\": \"phn-Phnx-LB\",\n    \"pil\": \"pil-Latn-ZZ\",\n    \"pip\": \"pip-Latn-ZZ\",\n    \"pka\": \"pka-Brah-IN\",\n    \"pko\": \"pko-Latn-KE\",\n    \"pl\": \"pl-Latn-PL\",\n    \"pla\": \"pla-Latn-ZZ\",\n    \"pms\": \"pms-Latn-IT\",\n    \"png\": \"png-Latn-ZZ\",\n    \"pnn\": \"pnn-Latn-ZZ\",\n    \"pnt\": \"pnt-Grek-GR\",\n    \"pon\": \"pon-Latn-FM\",\n    \"ppa\": \"ppa-Deva-IN\",\n    \"ppo\": \"ppo-Latn-ZZ\",\n    \"pra\": \"pra-Khar-PK\",\n    \"prd\": \"prd-Arab-IR\",\n    \"prg\": \"prg-Latn-001\",\n    \"ps\": \"ps-Arab-AF\",\n    \"pss\": \"pss-Latn-ZZ\",\n    \"pt\": \"pt-Latn-BR\",\n    \"ptp\": \"ptp-Latn-ZZ\",\n    \"puu\": \"puu-Latn-GA\",\n    \"pwa\": \"pwa-Latn-ZZ\",\n    \"qu\": \"qu-Latn-PE\",\n    \"quc\": \"quc-Latn-GT\",\n    \"qug\": \"qug-Latn-EC\",\n    \"rai\": \"rai-Latn-ZZ\",\n    \"raj\": \"raj-Deva-IN\",\n    \"rao\": \"rao-Latn-ZZ\",\n    \"rcf\": \"rcf-Latn-RE\",\n    \"rej\": \"rej-Latn-ID\",\n    \"rel\": \"rel-Latn-ZZ\",\n    \"res\": \"res-Latn-ZZ\",\n    \"rgn\": \"rgn-Latn-IT\",\n    \"rhg\": \"rhg-Rohg-MM\",\n    \"ria\": \"ria-Latn-IN\",\n    \"rif\": \"rif-Tfng-MA\",\n    \"rif-NL\": \"rif-Latn-NL\",\n    \"rjs\": \"rjs-Deva-NP\",\n    \"rkt\": \"rkt-Beng-BD\",\n    \"rm\": \"rm-Latn-CH\",\n    \"rmf\": \"rmf-Latn-FI\",\n    \"rmo\": \"rmo-Latn-CH\",\n    \"rmt\": \"rmt-Arab-IR\",\n    \"rmu\": \"rmu-Latn-SE\",\n    \"rn\": \"rn-Latn-BI\",\n    \"rna\": \"rna-Latn-ZZ\",\n    \"rng\": \"rng-Latn-MZ\",\n    \"ro\": \"ro-Latn-RO\",\n    \"rob\": \"rob-Latn-ID\",\n    \"rof\": \"rof-Latn-TZ\",\n    \"roo\": \"roo-Latn-ZZ\",\n    \"rro\": \"rro-Latn-ZZ\",\n    \"rtm\": \"rtm-Latn-FJ\",\n    \"ru\": \"ru-Cyrl-RU\",\n    \"rue\": \"rue-Cyrl-UA\",\n    \"rug\": \"rug-Latn-SB\",\n    \"rw\": \"rw-Latn-RW\",\n    \"rwk\": \"rwk-Latn-TZ\",\n    \"rwo\": \"rwo-Latn-ZZ\",\n    \"ryu\": \"ryu-Kana-JP\",\n    \"sa\": \"sa-Deva-IN\",\n    \"saf\": \"saf-Latn-GH\",\n    \"sah\": \"sah-Cyrl-RU\",\n    \"saq\": \"saq-Latn-KE\",\n    \"sas\": \"sas-Latn-ID\",\n    \"sat\": \"sat-Olck-IN\",\n    \"sav\": \"sav-Latn-SN\",\n    \"saz\": \"saz-Saur-IN\",\n    \"sba\": \"sba-Latn-ZZ\",\n    \"sbe\": \"sbe-Latn-ZZ\",\n    \"sbp\": \"sbp-Latn-TZ\",\n    \"sc\": \"sc-Latn-IT\",\n    \"sck\": \"sck-Deva-IN\",\n    \"scl\": \"scl-Arab-ZZ\",\n    \"scn\": \"scn-Latn-IT\",\n    \"sco\": \"sco-Latn-GB\",\n    \"scs\": \"scs-Latn-CA\",\n    \"sd\": \"sd-Arab-PK\",\n    \"sd-Deva\": \"sd-Deva-IN\",\n    \"sd-Khoj\": \"sd-Khoj-IN\",\n    \"sd-Sind\": \"sd-Sind-IN\",\n    \"sdc\": \"sdc-Latn-IT\",\n    \"sdh\": \"sdh-Arab-IR\",\n    \"se\": \"se-Latn-NO\",\n    \"sef\": \"sef-Latn-CI\",\n    \"seh\": \"seh-Latn-MZ\",\n    \"sei\": \"sei-Latn-MX\",\n    \"ses\": \"ses-Latn-ML\",\n    \"sg\": \"sg-Latn-CF\",\n    \"sga\": \"sga-Ogam-IE\",\n    \"sgs\": \"sgs-Latn-LT\",\n    \"sgw\": \"sgw-Ethi-ZZ\",\n    \"sgz\": \"sgz-Latn-ZZ\",\n    \"shi\": \"shi-Tfng-MA\",\n    \"shk\": \"shk-Latn-ZZ\",\n    \"shn\": \"shn-Mymr-MM\",\n    \"shu\": \"shu-Arab-ZZ\",\n    \"si\": \"si-Sinh-LK\",\n    \"sid\": \"sid-Latn-ET\",\n    \"sig\": \"sig-Latn-ZZ\",\n    \"sil\": \"sil-Latn-ZZ\",\n    \"sim\": \"sim-Latn-ZZ\",\n    \"sjr\": \"sjr-Latn-ZZ\",\n    \"sk\": \"sk-Latn-SK\",\n    \"skc\": \"skc-Latn-ZZ\",\n    \"skr\": \"skr-Arab-PK\",\n    \"sks\": \"sks-Latn-ZZ\",\n    \"sl\": \"sl-Latn-SI\",\n    \"sld\": \"sld-Latn-ZZ\",\n    \"sli\": \"sli-Latn-PL\",\n    \"sll\": \"sll-Latn-ZZ\",\n    \"sly\": \"sly-Latn-ID\",\n    \"sm\": \"sm-Latn-WS\",\n    \"sma\": \"sma-Latn-SE\",\n    \"smj\": \"smj-Latn-SE\",\n    \"smn\": \"smn-Latn-FI\",\n    \"smp\": \"smp-Samr-IL\",\n    \"smq\": \"smq-Latn-ZZ\",\n    \"sms\": \"sms-Latn-FI\",\n    \"sn\": \"sn-Latn-ZW\",\n    \"snc\": \"snc-Latn-ZZ\",\n    \"snk\": \"snk-Latn-ML\",\n    \"snp\": \"snp-Latn-ZZ\",\n    \"snx\": \"snx-Latn-ZZ\",\n    \"sny\": \"sny-Latn-ZZ\",\n    \"so\": \"so-Latn-SO\",\n    \"sog\": \"sog-Sogd-UZ\",\n    \"sok\": \"sok-Latn-ZZ\",\n    \"soq\": \"soq-Latn-ZZ\",\n    \"sou\": \"sou-Thai-TH\",\n    \"soy\": \"soy-Latn-ZZ\",\n    \"spd\": \"spd-Latn-ZZ\",\n    \"spl\": \"spl-Latn-ZZ\",\n    \"sps\": \"sps-Latn-ZZ\",\n    \"sq\": \"sq-Latn-AL\",\n    \"sr\": \"sr-Cyrl-RS\",\n    \"sr-ME\": \"sr-Latn-ME\",\n    \"sr-RO\": \"sr-Latn-RO\",\n    \"sr-RU\": \"sr-Latn-RU\",\n    \"sr-TR\": \"sr-Latn-TR\",\n    \"srb\": \"srb-Sora-IN\",\n    \"srn\": \"srn-Latn-SR\",\n    \"srr\": \"srr-Latn-SN\",\n    \"srx\": \"srx-Deva-IN\",\n    \"ss\": \"ss-Latn-ZA\",\n    \"ssd\": \"ssd-Latn-ZZ\",\n    \"ssg\": \"ssg-Latn-ZZ\",\n    \"ssy\": \"ssy-Latn-ER\",\n    \"st\": \"st-Latn-ZA\",\n    \"stk\": \"stk-Latn-ZZ\",\n    \"stq\": \"stq-Latn-DE\",\n    \"su\": \"su-Latn-ID\",\n    \"sua\": \"sua-Latn-ZZ\",\n    \"sue\": \"sue-Latn-ZZ\",\n    \"suk\": \"suk-Latn-TZ\",\n    \"sur\": \"sur-Latn-ZZ\",\n    \"sus\": \"sus-Latn-GN\",\n    \"sv\": \"sv-Latn-SE\",\n    \"sw\": \"sw-Latn-TZ\",\n    \"swb\": \"swb-Arab-YT\",\n    \"swc\": \"swc-Latn-CD\",\n    \"swg\": \"swg-Latn-DE\",\n    \"swp\": \"swp-Latn-ZZ\",\n    \"swv\": \"swv-Deva-IN\",\n    \"sxn\": \"sxn-Latn-ID\",\n    \"sxw\": \"sxw-Latn-ZZ\",\n    \"syl\": \"syl-Beng-BD\",\n    \"syr\": \"syr-Syrc-IQ\",\n    \"szl\": \"szl-Latn-PL\",\n    \"ta\": \"ta-Taml-IN\",\n    \"taj\": \"taj-Deva-NP\",\n    \"tal\": \"tal-Latn-ZZ\",\n    \"tan\": \"tan-Latn-ZZ\",\n    \"taq\": \"taq-Latn-ZZ\",\n    \"tbc\": \"tbc-Latn-ZZ\",\n    \"tbd\": \"tbd-Latn-ZZ\",\n    \"tbf\": \"tbf-Latn-ZZ\",\n    \"tbg\": \"tbg-Latn-ZZ\",\n    \"tbo\": \"tbo-Latn-ZZ\",\n    \"tbw\": \"tbw-Latn-PH\",\n    \"tbz\": \"tbz-Latn-ZZ\",\n    \"tci\": \"tci-Latn-ZZ\",\n    \"tcy\": \"tcy-Knda-IN\",\n    \"tdd\": \"tdd-Tale-CN\",\n    \"tdg\": \"tdg-Deva-NP\",\n    \"tdh\": \"tdh-Deva-NP\",\n    \"tdu\": \"tdu-Latn-MY\",\n    \"te\": \"te-Telu-IN\",\n    \"ted\": \"ted-Latn-ZZ\",\n    \"tem\": \"tem-Latn-SL\",\n    \"teo\": \"teo-Latn-UG\",\n    \"tet\": \"tet-Latn-TL\",\n    \"tfi\": \"tfi-Latn-ZZ\",\n    \"tg\": \"tg-Cyrl-TJ\",\n    \"tg-Arab\": \"tg-Arab-PK\",\n    \"tg-PK\": \"tg-Arab-PK\",\n    \"tgc\": \"tgc-Latn-ZZ\",\n    \"tgo\": \"tgo-Latn-ZZ\",\n    \"tgu\": \"tgu-Latn-ZZ\",\n    \"th\": \"th-Thai-TH\",\n    \"thl\": \"thl-Deva-NP\",\n    \"thq\": \"thq-Deva-NP\",\n    \"thr\": \"thr-Deva-NP\",\n    \"ti\": \"ti-Ethi-ET\",\n    \"tif\": \"tif-Latn-ZZ\",\n    \"tig\": \"tig-Ethi-ER\",\n    \"tik\": \"tik-Latn-ZZ\",\n    \"tim\": \"tim-Latn-ZZ\",\n    \"tio\": \"tio-Latn-ZZ\",\n    \"tiv\": \"tiv-Latn-NG\",\n    \"tk\": \"tk-Latn-TM\",\n    \"tkl\": \"tkl-Latn-TK\",\n    \"tkr\": \"tkr-Latn-AZ\",\n    \"tkt\": \"tkt-Deva-NP\",\n    \"tl\": \"tl-Latn-PH\",\n    \"tlf\": \"tlf-Latn-ZZ\",\n    \"tlx\": \"tlx-Latn-ZZ\",\n    \"tly\": \"tly-Latn-AZ\",\n    \"tmh\": \"tmh-Latn-NE\",\n    \"tmy\": \"tmy-Latn-ZZ\",\n    \"tn\": \"tn-Latn-ZA\",\n    \"tnh\": \"tnh-Latn-ZZ\",\n    \"to\": \"to-Latn-TO\",\n    \"tof\": \"tof-Latn-ZZ\",\n    \"tog\": \"tog-Latn-MW\",\n    \"toq\": \"toq-Latn-ZZ\",\n    \"tpi\": \"tpi-Latn-PG\",\n    \"tpm\": \"tpm-Latn-ZZ\",\n    \"tpz\": \"tpz-Latn-ZZ\",\n    \"tqo\": \"tqo-Latn-ZZ\",\n    \"tr\": \"tr-Latn-TR\",\n    \"tru\": \"tru-Latn-TR\",\n    \"trv\": \"trv-Latn-TW\",\n    \"trw\": \"trw-Arab-PK\",\n    \"ts\": \"ts-Latn-ZA\",\n    \"tsd\": \"tsd-Grek-GR\",\n    \"tsf\": \"tsf-Deva-NP\",\n    \"tsg\": \"tsg-Latn-PH\",\n    \"tsj\": \"tsj-Tibt-BT\",\n    \"tsw\": \"tsw-Latn-ZZ\",\n    \"tt\": \"tt-Cyrl-RU\",\n    \"ttd\": \"ttd-Latn-ZZ\",\n    \"tte\": \"tte-Latn-ZZ\",\n    \"ttj\": \"ttj-Latn-UG\",\n    \"ttr\": \"ttr-Latn-ZZ\",\n    \"tts\": \"tts-Thai-TH\",\n    \"ttt\": \"ttt-Latn-AZ\",\n    \"tuh\": \"tuh-Latn-ZZ\",\n    \"tul\": \"tul-Latn-ZZ\",\n    \"tum\": \"tum-Latn-MW\",\n    \"tuq\": \"tuq-Latn-ZZ\",\n    \"tvd\": \"tvd-Latn-ZZ\",\n    \"tvl\": \"tvl-Latn-TV\",\n    \"tvu\": \"tvu-Latn-ZZ\",\n    \"twh\": \"twh-Latn-ZZ\",\n    \"twq\": \"twq-Latn-NE\",\n    \"txg\": \"txg-Tang-CN\",\n    \"txo\": \"txo-Toto-IN\",\n    \"ty\": \"ty-Latn-PF\",\n    \"tya\": \"tya-Latn-ZZ\",\n    \"tyv\": \"tyv-Cyrl-RU\",\n    \"tzm\": \"tzm-Latn-MA\",\n    \"ubu\": \"ubu-Latn-ZZ\",\n    \"udi\": \"udi-Aghb-RU\",\n    \"udm\": \"udm-Cyrl-RU\",\n    \"ug\": \"ug-Arab-CN\",\n    \"ug-Cyrl\": \"ug-Cyrl-KZ\",\n    \"ug-KZ\": \"ug-Cyrl-KZ\",\n    \"ug-MN\": \"ug-Cyrl-MN\",\n    \"uga\": \"uga-Ugar-SY\",\n    \"uk\": \"uk-Cyrl-UA\",\n    \"uli\": \"uli-Latn-FM\",\n    \"umb\": \"umb-Latn-AO\",\n    \"und\": \"en-Latn-US\",\n    \"und-002\": \"en-Latn-NG\",\n    \"und-003\": \"en-Latn-US\",\n    \"und-005\": \"pt-Latn-BR\",\n    \"und-009\": \"en-Latn-AU\",\n    \"und-011\": \"en-Latn-NG\",\n    \"und-013\": \"es-Latn-MX\",\n    \"und-014\": \"sw-Latn-TZ\",\n    \"und-015\": \"ar-Arab-EG\",\n    \"und-017\": \"sw-Latn-CD\",\n    \"und-018\": \"en-Latn-ZA\",\n    \"und-019\": \"en-Latn-US\",\n    \"und-021\": \"en-Latn-US\",\n    \"und-029\": \"es-Latn-CU\",\n    \"und-030\": \"zh-Hans-CN\",\n    \"und-034\": \"hi-Deva-IN\",\n    \"und-035\": \"id-Latn-ID\",\n    \"und-039\": \"it-Latn-IT\",\n    \"und-053\": \"en-Latn-AU\",\n    \"und-054\": \"en-Latn-PG\",\n    \"und-057\": \"en-Latn-GU\",\n    \"und-061\": \"sm-Latn-WS\",\n    \"und-142\": \"zh-Hans-CN\",\n    \"und-143\": \"uz-Latn-UZ\",\n    \"und-145\": \"ar-Arab-SA\",\n    \"und-150\": \"ru-Cyrl-RU\",\n    \"und-151\": \"ru-Cyrl-RU\",\n    \"und-154\": \"en-Latn-GB\",\n    \"und-155\": \"de-Latn-DE\",\n    \"und-202\": \"en-Latn-NG\",\n    \"und-419\": \"es-Latn-419\",\n    \"und-AD\": \"ca-Latn-AD\",\n    \"und-Adlm\": \"ff-Adlm-GN\",\n    \"und-AE\": \"ar-Arab-AE\",\n    \"und-AF\": \"fa-Arab-AF\",\n    \"und-Aghb\": \"udi-Aghb-RU\",\n    \"und-Ahom\": \"aho-Ahom-IN\",\n    \"und-AL\": \"sq-Latn-AL\",\n    \"und-AM\": \"hy-Armn-AM\",\n    \"und-AO\": \"pt-Latn-AO\",\n    \"und-AQ\": \"und-Latn-AQ\",\n    \"und-AR\": \"es-Latn-AR\",\n    \"und-Arab\": \"ar-Arab-EG\",\n    \"und-Arab-CC\": \"ms-Arab-CC\",\n    \"und-Arab-CN\": \"ug-Arab-CN\",\n    \"und-Arab-GB\": \"ks-Arab-GB\",\n    \"und-Arab-ID\": \"ms-Arab-ID\",\n    \"und-Arab-IN\": \"ur-Arab-IN\",\n    \"und-Arab-KH\": \"cja-Arab-KH\",\n    \"und-Arab-MM\": \"rhg-Arab-MM\",\n    \"und-Arab-MN\": \"kk-Arab-MN\",\n    \"und-Arab-MU\": \"ur-Arab-MU\",\n    \"und-Arab-NG\": \"ha-Arab-NG\",\n    \"und-Arab-PK\": \"ur-Arab-PK\",\n    \"und-Arab-TG\": \"apd-Arab-TG\",\n    \"und-Arab-TH\": \"mfa-Arab-TH\",\n    \"und-Arab-TJ\": \"fa-Arab-TJ\",\n    \"und-Arab-TR\": \"az-Arab-TR\",\n    \"und-Arab-YT\": \"swb-Arab-YT\",\n    \"und-Armi\": \"arc-Armi-IR\",\n    \"und-Armn\": \"hy-Armn-AM\",\n    \"und-AS\": \"sm-Latn-AS\",\n    \"und-AT\": \"de-Latn-AT\",\n    \"und-Avst\": \"ae-Avst-IR\",\n    \"und-AW\": \"nl-Latn-AW\",\n    \"und-AX\": \"sv-Latn-AX\",\n    \"und-AZ\": \"az-Latn-AZ\",\n    \"und-BA\": \"bs-Latn-BA\",\n    \"und-Bali\": \"ban-Bali-ID\",\n    \"und-Bamu\": \"bax-Bamu-CM\",\n    \"und-Bass\": \"bsq-Bass-LR\",\n    \"und-Batk\": \"bbc-Batk-ID\",\n    \"und-BD\": \"bn-Beng-BD\",\n    \"und-BE\": \"nl-Latn-BE\",\n    \"und-Beng\": \"bn-Beng-BD\",\n    \"und-BF\": \"fr-Latn-BF\",\n    \"und-BG\": \"bg-Cyrl-BG\",\n    \"und-BH\": \"ar-Arab-BH\",\n    \"und-Bhks\": \"sa-Bhks-IN\",\n    \"und-BI\": \"rn-Latn-BI\",\n    \"und-BJ\": \"fr-Latn-BJ\",\n    \"und-BL\": \"fr-Latn-BL\",\n    \"und-BN\": \"ms-Latn-BN\",\n    \"und-BO\": \"es-Latn-BO\",\n    \"und-Bopo\": \"zh-Bopo-TW\",\n    \"und-BQ\": \"pap-Latn-BQ\",\n    \"und-BR\": \"pt-Latn-BR\",\n    \"und-Brah\": \"pka-Brah-IN\",\n    \"und-Brai\": \"fr-Brai-FR\",\n    \"und-BT\": \"dz-Tibt-BT\",\n    \"und-Bugi\": \"bug-Bugi-ID\",\n    \"und-Buhd\": \"bku-Buhd-PH\",\n    \"und-BV\": \"und-Latn-BV\",\n    \"und-BY\": \"be-Cyrl-BY\",\n    \"und-Cakm\": \"ccp-Cakm-BD\",\n    \"und-Cans\": \"cr-Cans-CA\",\n    \"und-Cari\": \"xcr-Cari-TR\",\n    \"und-CD\": \"sw-Latn-CD\",\n    \"und-CF\": \"fr-Latn-CF\",\n    \"und-CG\": \"fr-Latn-CG\",\n    \"und-CH\": \"de-Latn-CH\",\n    \"und-Cham\": \"cjm-Cham-VN\",\n    \"und-Cher\": \"chr-Cher-US\",\n    \"und-Chrs\": \"xco-Chrs-UZ\",\n    \"und-CI\": \"fr-Latn-CI\",\n    \"und-CL\": \"es-Latn-CL\",\n    \"und-CM\": \"fr-Latn-CM\",\n    \"und-CN\": \"zh-Hans-CN\",\n    \"und-CO\": \"es-Latn-CO\",\n    \"und-Copt\": \"cop-Copt-EG\",\n    \"und-CP\": \"und-Latn-CP\",\n    \"und-Cpmn\": \"und-Cpmn-CY\",\n    \"und-Cpmn-CY\": \"und-Cpmn-CY\",\n    \"und-Cprt\": \"grc-Cprt-CY\",\n    \"und-CR\": \"es-Latn-CR\",\n    \"und-CU\": \"es-Latn-CU\",\n    \"und-CV\": \"pt-Latn-CV\",\n    \"und-CW\": \"pap-Latn-CW\",\n    \"und-CY\": \"el-Grek-CY\",\n    \"und-Cyrl\": \"ru-Cyrl-RU\",\n    \"und-Cyrl-AL\": \"mk-Cyrl-AL\",\n    \"und-Cyrl-BA\": \"sr-Cyrl-BA\",\n    \"und-Cyrl-GE\": \"os-Cyrl-GE\",\n    \"und-Cyrl-GR\": \"mk-Cyrl-GR\",\n    \"und-Cyrl-MD\": \"uk-Cyrl-MD\",\n    \"und-Cyrl-RO\": \"bg-Cyrl-RO\",\n    \"und-Cyrl-SK\": \"uk-Cyrl-SK\",\n    \"und-Cyrl-TR\": \"kbd-Cyrl-TR\",\n    \"und-Cyrl-XK\": \"sr-Cyrl-XK\",\n    \"und-CZ\": \"cs-Latn-CZ\",\n    \"und-DE\": \"de-Latn-DE\",\n    \"und-Deva\": \"hi-Deva-IN\",\n    \"und-Deva-BT\": \"ne-Deva-BT\",\n    \"und-Deva-FJ\": \"hif-Deva-FJ\",\n    \"und-Deva-MU\": \"bho-Deva-MU\",\n    \"und-Deva-PK\": \"btv-Deva-PK\",\n    \"und-Diak\": \"dv-Diak-MV\",\n    \"und-DJ\": \"aa-Latn-DJ\",\n    \"und-DK\": \"da-Latn-DK\",\n    \"und-DO\": \"es-Latn-DO\",\n    \"und-Dogr\": \"doi-Dogr-IN\",\n    \"und-Dupl\": \"fr-Dupl-FR\",\n    \"und-DZ\": \"ar-Arab-DZ\",\n    \"und-EA\": \"es-Latn-EA\",\n    \"und-EC\": \"es-Latn-EC\",\n    \"und-EE\": \"et-Latn-EE\",\n    \"und-EG\": \"ar-Arab-EG\",\n    \"und-Egyp\": \"egy-Egyp-EG\",\n    \"und-EH\": \"ar-Arab-EH\",\n    \"und-Elba\": \"sq-Elba-AL\",\n    \"und-Elym\": \"arc-Elym-IR\",\n    \"und-ER\": \"ti-Ethi-ER\",\n    \"und-ES\": \"es-Latn-ES\",\n    \"und-ET\": \"am-Ethi-ET\",\n    \"und-Ethi\": \"am-Ethi-ET\",\n    \"und-EU\": \"en-Latn-IE\",\n    \"und-EZ\": \"de-Latn-EZ\",\n    \"und-FI\": \"fi-Latn-FI\",\n    \"und-FO\": \"fo-Latn-FO\",\n    \"und-FR\": \"fr-Latn-FR\",\n    \"und-GA\": \"fr-Latn-GA\",\n    \"und-GE\": \"ka-Geor-GE\",\n    \"und-Geor\": \"ka-Geor-GE\",\n    \"und-GF\": \"fr-Latn-GF\",\n    \"und-GH\": \"ak-Latn-GH\",\n    \"und-GL\": \"kl-Latn-GL\",\n    \"und-Glag\": \"cu-Glag-BG\",\n    \"und-GN\": \"fr-Latn-GN\",\n    \"und-Gong\": \"wsg-Gong-IN\",\n    \"und-Gonm\": \"esg-Gonm-IN\",\n    \"und-Goth\": \"got-Goth-UA\",\n    \"und-GP\": \"fr-Latn-GP\",\n    \"und-GQ\": \"es-Latn-GQ\",\n    \"und-GR\": \"el-Grek-GR\",\n    \"und-Gran\": \"sa-Gran-IN\",\n    \"und-Grek\": \"el-Grek-GR\",\n    \"und-Grek-TR\": \"bgx-Grek-TR\",\n    \"und-GS\": \"und-Latn-GS\",\n    \"und-GT\": \"es-Latn-GT\",\n    \"und-Gujr\": \"gu-Gujr-IN\",\n    \"und-Guru\": \"pa-Guru-IN\",\n    \"und-GW\": \"pt-Latn-GW\",\n    \"und-Hanb\": \"zh-Hanb-TW\",\n    \"und-Hang\": \"ko-Hang-KR\",\n    \"und-Hani\": \"zh-Hani-CN\",\n    \"und-Hano\": \"hnn-Hano-PH\",\n    \"und-Hans\": \"zh-Hans-CN\",\n    \"und-Hant\": \"zh-Hant-TW\",\n    \"und-Hebr\": \"he-Hebr-IL\",\n    \"und-Hebr-CA\": \"yi-Hebr-CA\",\n    \"und-Hebr-GB\": \"yi-Hebr-GB\",\n    \"und-Hebr-SE\": \"yi-Hebr-SE\",\n    \"und-Hebr-UA\": \"yi-Hebr-UA\",\n    \"und-Hebr-US\": \"yi-Hebr-US\",\n    \"und-Hira\": \"ja-Hira-JP\",\n    \"und-HK\": \"zh-Hant-HK\",\n    \"und-Hluw\": \"hlu-Hluw-TR\",\n    \"und-HM\": \"und-Latn-HM\",\n    \"und-Hmng\": \"hnj-Hmng-LA\",\n    \"und-Hmnp\": \"hnj-Hmnp-US\",\n    \"und-HN\": \"es-Latn-HN\",\n    \"und-HR\": \"hr-Latn-HR\",\n    \"und-HT\": \"ht-Latn-HT\",\n    \"und-HU\": \"hu-Latn-HU\",\n    \"und-Hung\": \"hu-Hung-HU\",\n    \"und-IC\": \"es-Latn-IC\",\n    \"und-ID\": \"id-Latn-ID\",\n    \"und-IL\": \"he-Hebr-IL\",\n    \"und-IN\": \"hi-Deva-IN\",\n    \"und-IQ\": \"ar-Arab-IQ\",\n    \"und-IR\": \"fa-Arab-IR\",\n    \"und-IS\": \"is-Latn-IS\",\n    \"und-IT\": \"it-Latn-IT\",\n    \"und-Ital\": \"ett-Ital-IT\",\n    \"und-Jamo\": \"ko-Jamo-KR\",\n    \"und-Java\": \"jv-Java-ID\",\n    \"und-JO\": \"ar-Arab-JO\",\n    \"und-JP\": \"ja-Jpan-JP\",\n    \"und-Jpan\": \"ja-Jpan-JP\",\n    \"und-Kali\": \"eky-Kali-MM\",\n    \"und-Kana\": \"ja-Kana-JP\",\n    \"und-KE\": \"sw-Latn-KE\",\n    \"und-KG\": \"ky-Cyrl-KG\",\n    \"und-KH\": \"km-Khmr-KH\",\n    \"und-Khar\": \"pra-Khar-PK\",\n    \"und-Khmr\": \"km-Khmr-KH\",\n    \"und-Khoj\": \"sd-Khoj-IN\",\n    \"und-Kits\": \"zkt-Kits-CN\",\n    \"und-KM\": \"ar-Arab-KM\",\n    \"und-Knda\": \"kn-Knda-IN\",\n    \"und-Kore\": \"ko-Kore-KR\",\n    \"und-KP\": \"ko-Kore-KP\",\n    \"und-KR\": \"ko-Kore-KR\",\n    \"und-Kthi\": \"bho-Kthi-IN\",\n    \"und-KW\": \"ar-Arab-KW\",\n    \"und-KZ\": \"ru-Cyrl-KZ\",\n    \"und-LA\": \"lo-Laoo-LA\",\n    \"und-Lana\": \"nod-Lana-TH\",\n    \"und-Laoo\": \"lo-Laoo-LA\",\n    \"und-Latn-AF\": \"tk-Latn-AF\",\n    \"und-Latn-AM\": \"ku-Latn-AM\",\n    \"und-Latn-CN\": \"za-Latn-CN\",\n    \"und-Latn-CY\": \"tr-Latn-CY\",\n    \"und-Latn-DZ\": \"fr-Latn-DZ\",\n    \"und-Latn-ET\": \"en-Latn-ET\",\n    \"und-Latn-GE\": \"ku-Latn-GE\",\n    \"und-Latn-IR\": \"tk-Latn-IR\",\n    \"und-Latn-KM\": \"fr-Latn-KM\",\n    \"und-Latn-MA\": \"fr-Latn-MA\",\n    \"und-Latn-MK\": \"sq-Latn-MK\",\n    \"und-Latn-MM\": \"kac-Latn-MM\",\n    \"und-Latn-MO\": \"pt-Latn-MO\",\n    \"und-Latn-MR\": \"fr-Latn-MR\",\n    \"und-Latn-RU\": \"krl-Latn-RU\",\n    \"und-Latn-SY\": \"fr-Latn-SY\",\n    \"und-Latn-TN\": \"fr-Latn-TN\",\n    \"und-Latn-TW\": \"trv-Latn-TW\",\n    \"und-Latn-UA\": \"pl-Latn-UA\",\n    \"und-LB\": \"ar-Arab-LB\",\n    \"und-Lepc\": \"lep-Lepc-IN\",\n    \"und-LI\": \"de-Latn-LI\",\n    \"und-Limb\": \"lif-Limb-IN\",\n    \"und-Lina\": \"lab-Lina-GR\",\n    \"und-Linb\": \"grc-Linb-GR\",\n    \"und-Lisu\": \"lis-Lisu-CN\",\n    \"und-LK\": \"si-Sinh-LK\",\n    \"und-LS\": \"st-Latn-LS\",\n    \"und-LT\": \"lt-Latn-LT\",\n    \"und-LU\": \"fr-Latn-LU\",\n    \"und-LV\": \"lv-Latn-LV\",\n    \"und-LY\": \"ar-Arab-LY\",\n    \"und-Lyci\": \"xlc-Lyci-TR\",\n    \"und-Lydi\": \"xld-Lydi-TR\",\n    \"und-MA\": \"ar-Arab-MA\",\n    \"und-Mahj\": \"hi-Mahj-IN\",\n    \"und-Maka\": \"mak-Maka-ID\",\n    \"und-Mand\": \"myz-Mand-IR\",\n    \"und-Mani\": \"xmn-Mani-CN\",\n    \"und-Marc\": \"bo-Marc-CN\",\n    \"und-MC\": \"fr-Latn-MC\",\n    \"und-MD\": \"ro-Latn-MD\",\n    \"und-ME\": \"sr-Latn-ME\",\n    \"und-Medf\": \"dmf-Medf-NG\",\n    \"und-Mend\": \"men-Mend-SL\",\n    \"und-Merc\": \"xmr-Merc-SD\",\n    \"und-Mero\": \"xmr-Mero-SD\",\n    \"und-MF\": \"fr-Latn-MF\",\n    \"und-MG\": \"mg-Latn-MG\",\n    \"und-MK\": \"mk-Cyrl-MK\",\n    \"und-ML\": \"bm-Latn-ML\",\n    \"und-Mlym\": \"ml-Mlym-IN\",\n    \"und-MM\": \"my-Mymr-MM\",\n    \"und-MN\": \"mn-Cyrl-MN\",\n    \"und-MO\": \"zh-Hant-MO\",\n    \"und-Modi\": \"mr-Modi-IN\",\n    \"und-Mong\": \"mn-Mong-CN\",\n    \"und-MQ\": \"fr-Latn-MQ\",\n    \"und-MR\": \"ar-Arab-MR\",\n    \"und-Mroo\": \"mro-Mroo-BD\",\n    \"und-MT\": \"mt-Latn-MT\",\n    \"und-Mtei\": \"mni-Mtei-IN\",\n    \"und-MU\": \"mfe-Latn-MU\",\n    \"und-Mult\": \"skr-Mult-PK\",\n    \"und-MV\": \"dv-Thaa-MV\",\n    \"und-MX\": \"es-Latn-MX\",\n    \"und-MY\": \"ms-Latn-MY\",\n    \"und-Mymr\": \"my-Mymr-MM\",\n    \"und-Mymr-IN\": \"kht-Mymr-IN\",\n    \"und-Mymr-TH\": \"mnw-Mymr-TH\",\n    \"und-MZ\": \"pt-Latn-MZ\",\n    \"und-NA\": \"af-Latn-NA\",\n    \"und-Nand\": \"sa-Nand-IN\",\n    \"und-Narb\": \"xna-Narb-SA\",\n    \"und-Nbat\": \"arc-Nbat-JO\",\n    \"und-NC\": \"fr-Latn-NC\",\n    \"und-NE\": \"ha-Latn-NE\",\n    \"und-Newa\": \"new-Newa-NP\",\n    \"und-NI\": \"es-Latn-NI\",\n    \"und-Nkoo\": \"man-Nkoo-GN\",\n    \"und-NL\": \"nl-Latn-NL\",\n    \"und-NO\": \"nb-Latn-NO\",\n    \"und-NP\": \"ne-Deva-NP\",\n    \"und-Nshu\": \"zhx-Nshu-CN\",\n    \"und-Ogam\": \"sga-Ogam-IE\",\n    \"und-Olck\": \"sat-Olck-IN\",\n    \"und-OM\": \"ar-Arab-OM\",\n    \"und-Orkh\": \"otk-Orkh-MN\",\n    \"und-Orya\": \"or-Orya-IN\",\n    \"und-Osge\": \"osa-Osge-US\",\n    \"und-Osma\": \"so-Osma-SO\",\n    \"und-Ougr\": \"oui-Ougr-143\",\n    \"und-PA\": \"es-Latn-PA\",\n    \"und-Palm\": \"arc-Palm-SY\",\n    \"und-Pauc\": \"ctd-Pauc-MM\",\n    \"und-PE\": \"es-Latn-PE\",\n    \"und-Perm\": \"kv-Perm-RU\",\n    \"und-PF\": \"fr-Latn-PF\",\n    \"und-PG\": \"tpi-Latn-PG\",\n    \"und-PH\": \"fil-Latn-PH\",\n    \"und-Phag\": \"lzh-Phag-CN\",\n    \"und-Phli\": \"pal-Phli-IR\",\n    \"und-Phlp\": \"pal-Phlp-CN\",\n    \"und-Phnx\": \"phn-Phnx-LB\",\n    \"und-PK\": \"ur-Arab-PK\",\n    \"und-PL\": \"pl-Latn-PL\",\n    \"und-Plrd\": \"hmd-Plrd-CN\",\n    \"und-PM\": \"fr-Latn-PM\",\n    \"und-PR\": \"es-Latn-PR\",\n    \"und-Prti\": \"xpr-Prti-IR\",\n    \"und-PS\": \"ar-Arab-PS\",\n    \"und-PT\": \"pt-Latn-PT\",\n    \"und-PW\": \"pau-Latn-PW\",\n    \"und-PY\": \"gn-Latn-PY\",\n    \"und-QA\": \"ar-Arab-QA\",\n    \"und-QO\": \"en-Latn-DG\",\n    \"und-RE\": \"fr-Latn-RE\",\n    \"und-Rjng\": \"rej-Rjng-ID\",\n    \"und-RO\": \"ro-Latn-RO\",\n    \"und-Rohg\": \"rhg-Rohg-MM\",\n    \"und-RS\": \"sr-Cyrl-RS\",\n    \"und-RU\": \"ru-Cyrl-RU\",\n    \"und-Runr\": \"non-Runr-SE\",\n    \"und-RW\": \"rw-Latn-RW\",\n    \"und-SA\": \"ar-Arab-SA\",\n    \"und-Samr\": \"smp-Samr-IL\",\n    \"und-Sarb\": \"xsa-Sarb-YE\",\n    \"und-Saur\": \"saz-Saur-IN\",\n    \"und-SC\": \"fr-Latn-SC\",\n    \"und-SD\": \"ar-Arab-SD\",\n    \"und-SE\": \"sv-Latn-SE\",\n    \"und-Sgnw\": \"ase-Sgnw-US\",\n    \"und-Shaw\": \"en-Shaw-GB\",\n    \"und-Shrd\": \"sa-Shrd-IN\",\n    \"und-SI\": \"sl-Latn-SI\",\n    \"und-Sidd\": \"sa-Sidd-IN\",\n    \"und-Sind\": \"sd-Sind-IN\",\n    \"und-Sinh\": \"si-Sinh-LK\",\n    \"und-SJ\": \"nb-Latn-SJ\",\n    \"und-SK\": \"sk-Latn-SK\",\n    \"und-SM\": \"it-Latn-SM\",\n    \"und-SN\": \"fr-Latn-SN\",\n    \"und-SO\": \"so-Latn-SO\",\n    \"und-Sogd\": \"sog-Sogd-UZ\",\n    \"und-Sogo\": \"sog-Sogo-UZ\",\n    \"und-Sora\": \"srb-Sora-IN\",\n    \"und-Soyo\": \"cmg-Soyo-MN\",\n    \"und-SR\": \"nl-Latn-SR\",\n    \"und-ST\": \"pt-Latn-ST\",\n    \"und-Sund\": \"su-Sund-ID\",\n    \"und-SV\": \"es-Latn-SV\",\n    \"und-SY\": \"ar-Arab-SY\",\n    \"und-Sylo\": \"syl-Sylo-BD\",\n    \"und-Syrc\": \"syr-Syrc-IQ\",\n    \"und-Tagb\": \"tbw-Tagb-PH\",\n    \"und-Takr\": \"doi-Takr-IN\",\n    \"und-Tale\": \"tdd-Tale-CN\",\n    \"und-Talu\": \"khb-Talu-CN\",\n    \"und-Taml\": \"ta-Taml-IN\",\n    \"und-Tang\": \"txg-Tang-CN\",\n    \"und-Tavt\": \"blt-Tavt-VN\",\n    \"und-TD\": \"fr-Latn-TD\",\n    \"und-Telu\": \"te-Telu-IN\",\n    \"und-TF\": \"fr-Latn-TF\",\n    \"und-Tfng\": \"zgh-Tfng-MA\",\n    \"und-TG\": \"fr-Latn-TG\",\n    \"und-Tglg\": \"fil-Tglg-PH\",\n    \"und-TH\": \"th-Thai-TH\",\n    \"und-Thaa\": \"dv-Thaa-MV\",\n    \"und-Thai\": \"th-Thai-TH\",\n    \"und-Thai-CN\": \"lcp-Thai-CN\",\n    \"und-Thai-KH\": \"kdt-Thai-KH\",\n    \"und-Thai-LA\": \"kdt-Thai-LA\",\n    \"und-Tibt\": \"bo-Tibt-CN\",\n    \"und-Tirh\": \"mai-Tirh-IN\",\n    \"und-TJ\": \"tg-Cyrl-TJ\",\n    \"und-TK\": \"tkl-Latn-TK\",\n    \"und-TL\": \"pt-Latn-TL\",\n    \"und-TM\": \"tk-Latn-TM\",\n    \"und-TN\": \"ar-Arab-TN\",\n    \"und-Tnsa\": \"nst-Tnsa-IN\",\n    \"und-TO\": \"to-Latn-TO\",\n    \"und-Toto\": \"txo-Toto-IN\",\n    \"und-TR\": \"tr-Latn-TR\",\n    \"und-TV\": \"tvl-Latn-TV\",\n    \"und-TW\": \"zh-Hant-TW\",\n    \"und-TZ\": \"sw-Latn-TZ\",\n    \"und-UA\": \"uk-Cyrl-UA\",\n    \"und-UG\": \"sw-Latn-UG\",\n    \"und-Ugar\": \"uga-Ugar-SY\",\n    \"und-UY\": \"es-Latn-UY\",\n    \"und-UZ\": \"uz-Latn-UZ\",\n    \"und-VA\": \"it-Latn-VA\",\n    \"und-Vaii\": \"vai-Vaii-LR\",\n    \"und-VE\": \"es-Latn-VE\",\n    \"und-Vith\": \"sq-Vith-AL\",\n    \"und-VN\": \"vi-Latn-VN\",\n    \"und-VU\": \"bi-Latn-VU\",\n    \"und-Wara\": \"hoc-Wara-IN\",\n    \"und-Wcho\": \"nnp-Wcho-IN\",\n    \"und-WF\": \"fr-Latn-WF\",\n    \"und-WS\": \"sm-Latn-WS\",\n    \"und-XK\": \"sq-Latn-XK\",\n    \"und-Xpeo\": \"peo-Xpeo-IR\",\n    \"und-Xsux\": \"akk-Xsux-IQ\",\n    \"und-YE\": \"ar-Arab-YE\",\n    \"und-Yezi\": \"ku-Yezi-GE\",\n    \"und-Yiii\": \"ii-Yiii-CN\",\n    \"und-YT\": \"fr-Latn-YT\",\n    \"und-Zanb\": \"cmg-Zanb-MN\",\n    \"und-ZW\": \"sn-Latn-ZW\",\n    \"unr\": \"unr-Beng-IN\",\n    \"unr-Deva\": \"unr-Deva-NP\",\n    \"unr-NP\": \"unr-Deva-NP\",\n    \"unx\": \"unx-Beng-IN\",\n    \"uok\": \"uok-Latn-ZZ\",\n    \"ur\": \"ur-Arab-PK\",\n    \"uri\": \"uri-Latn-ZZ\",\n    \"urt\": \"urt-Latn-ZZ\",\n    \"urw\": \"urw-Latn-ZZ\",\n    \"usa\": \"usa-Latn-ZZ\",\n    \"uth\": \"uth-Latn-ZZ\",\n    \"utr\": \"utr-Latn-ZZ\",\n    \"uvh\": \"uvh-Latn-ZZ\",\n    \"uvl\": \"uvl-Latn-ZZ\",\n    \"uz\": \"uz-Latn-UZ\",\n    \"uz-AF\": \"uz-Arab-AF\",\n    \"uz-Arab\": \"uz-Arab-AF\",\n    \"uz-CN\": \"uz-Cyrl-CN\",\n    \"vag\": \"vag-Latn-ZZ\",\n    \"vai\": \"vai-Vaii-LR\",\n    \"van\": \"van-Latn-ZZ\",\n    \"ve\": \"ve-Latn-ZA\",\n    \"vec\": \"vec-Latn-IT\",\n    \"vep\": \"vep-Latn-RU\",\n    \"vi\": \"vi-Latn-VN\",\n    \"vic\": \"vic-Latn-SX\",\n    \"viv\": \"viv-Latn-ZZ\",\n    \"vls\": \"vls-Latn-BE\",\n    \"vmf\": \"vmf-Latn-DE\",\n    \"vmw\": \"vmw-Latn-MZ\",\n    \"vo\": \"vo-Latn-001\",\n    \"vot\": \"vot-Latn-RU\",\n    \"vro\": \"vro-Latn-EE\",\n    \"vun\": \"vun-Latn-TZ\",\n    \"vut\": \"vut-Latn-ZZ\",\n    \"wa\": \"wa-Latn-BE\",\n    \"wae\": \"wae-Latn-CH\",\n    \"waj\": \"waj-Latn-ZZ\",\n    \"wal\": \"wal-Ethi-ET\",\n    \"wan\": \"wan-Latn-ZZ\",\n    \"war\": \"war-Latn-PH\",\n    \"wbp\": \"wbp-Latn-AU\",\n    \"wbq\": \"wbq-Telu-IN\",\n    \"wbr\": \"wbr-Deva-IN\",\n    \"wci\": \"wci-Latn-ZZ\",\n    \"wer\": \"wer-Latn-ZZ\",\n    \"wgi\": \"wgi-Latn-ZZ\",\n    \"whg\": \"whg-Latn-ZZ\",\n    \"wib\": \"wib-Latn-ZZ\",\n    \"wiu\": \"wiu-Latn-ZZ\",\n    \"wiv\": \"wiv-Latn-ZZ\",\n    \"wja\": \"wja-Latn-ZZ\",\n    \"wji\": \"wji-Latn-ZZ\",\n    \"wls\": \"wls-Latn-WF\",\n    \"wmo\": \"wmo-Latn-ZZ\",\n    \"wnc\": \"wnc-Latn-ZZ\",\n    \"wni\": \"wni-Arab-KM\",\n    \"wnu\": \"wnu-Latn-ZZ\",\n    \"wo\": \"wo-Latn-SN\",\n    \"wob\": \"wob-Latn-ZZ\",\n    \"wos\": \"wos-Latn-ZZ\",\n    \"wrs\": \"wrs-Latn-ZZ\",\n    \"wsg\": \"wsg-Gong-IN\",\n    \"wsk\": \"wsk-Latn-ZZ\",\n    \"wtm\": \"wtm-Deva-IN\",\n    \"wuu\": \"wuu-Hans-CN\",\n    \"wuv\": \"wuv-Latn-ZZ\",\n    \"wwa\": \"wwa-Latn-ZZ\",\n    \"xav\": \"xav-Latn-BR\",\n    \"xbi\": \"xbi-Latn-ZZ\",\n    \"xco\": \"xco-Chrs-UZ\",\n    \"xcr\": \"xcr-Cari-TR\",\n    \"xes\": \"xes-Latn-ZZ\",\n    \"xh\": \"xh-Latn-ZA\",\n    \"xla\": \"xla-Latn-ZZ\",\n    \"xlc\": \"xlc-Lyci-TR\",\n    \"xld\": \"xld-Lydi-TR\",\n    \"xmf\": \"xmf-Geor-GE\",\n    \"xmn\": \"xmn-Mani-CN\",\n    \"xmr\": \"xmr-Merc-SD\",\n    \"xna\": \"xna-Narb-SA\",\n    \"xnr\": \"xnr-Deva-IN\",\n    \"xog\": \"xog-Latn-UG\",\n    \"xon\": \"xon-Latn-ZZ\",\n    \"xpr\": \"xpr-Prti-IR\",\n    \"xrb\": \"xrb-Latn-ZZ\",\n    \"xsa\": \"xsa-Sarb-YE\",\n    \"xsi\": \"xsi-Latn-ZZ\",\n    \"xsm\": \"xsm-Latn-ZZ\",\n    \"xsr\": \"xsr-Deva-NP\",\n    \"xwe\": \"xwe-Latn-ZZ\",\n    \"yam\": \"yam-Latn-ZZ\",\n    \"yao\": \"yao-Latn-MZ\",\n    \"yap\": \"yap-Latn-FM\",\n    \"yas\": \"yas-Latn-ZZ\",\n    \"yat\": \"yat-Latn-ZZ\",\n    \"yav\": \"yav-Latn-CM\",\n    \"yay\": \"yay-Latn-ZZ\",\n    \"yaz\": \"yaz-Latn-ZZ\",\n    \"yba\": \"yba-Latn-ZZ\",\n    \"ybb\": \"ybb-Latn-CM\",\n    \"yby\": \"yby-Latn-ZZ\",\n    \"yer\": \"yer-Latn-ZZ\",\n    \"ygr\": \"ygr-Latn-ZZ\",\n    \"ygw\": \"ygw-Latn-ZZ\",\n    \"yi\": \"yi-Hebr-001\",\n    \"yko\": \"yko-Latn-ZZ\",\n    \"yle\": \"yle-Latn-ZZ\",\n    \"ylg\": \"ylg-Latn-ZZ\",\n    \"yll\": \"yll-Latn-ZZ\",\n    \"yml\": \"yml-Latn-ZZ\",\n    \"yo\": \"yo-Latn-NG\",\n    \"yon\": \"yon-Latn-ZZ\",\n    \"yrb\": \"yrb-Latn-ZZ\",\n    \"yre\": \"yre-Latn-ZZ\",\n    \"yrl\": \"yrl-Latn-BR\",\n    \"yss\": \"yss-Latn-ZZ\",\n    \"yua\": \"yua-Latn-MX\",\n    \"yue\": \"yue-Hant-HK\",\n    \"yue-CN\": \"yue-Hans-CN\",\n    \"yue-Hans\": \"yue-Hans-CN\",\n    \"yuj\": \"yuj-Latn-ZZ\",\n    \"yut\": \"yut-Latn-ZZ\",\n    \"yuw\": \"yuw-Latn-ZZ\",\n    \"za\": \"za-Latn-CN\",\n    \"zag\": \"zag-Latn-SD\",\n    \"zdj\": \"zdj-Arab-KM\",\n    \"zea\": \"zea-Latn-NL\",\n    \"zgh\": \"zgh-Tfng-MA\",\n    \"zh\": \"zh-Hans-CN\",\n    \"zh-AU\": \"zh-Hant-AU\",\n    \"zh-BN\": \"zh-Hant-BN\",\n    \"zh-Bopo\": \"zh-Bopo-TW\",\n    \"zh-GB\": \"zh-Hant-GB\",\n    \"zh-GF\": \"zh-Hant-GF\",\n    \"zh-Hanb\": \"zh-Hanb-TW\",\n    \"zh-Hant\": \"zh-Hant-TW\",\n    \"zh-HK\": \"zh-Hant-HK\",\n    \"zh-ID\": \"zh-Hant-ID\",\n    \"zh-MO\": \"zh-Hant-MO\",\n    \"zh-PA\": \"zh-Hant-PA\",\n    \"zh-PF\": \"zh-Hant-PF\",\n    \"zh-PH\": \"zh-Hant-PH\",\n    \"zh-SR\": \"zh-Hant-SR\",\n    \"zh-TH\": \"zh-Hant-TH\",\n    \"zh-TW\": \"zh-Hant-TW\",\n    \"zh-US\": \"zh-Hant-US\",\n    \"zh-VN\": \"zh-Hant-VN\",\n    \"zhx\": \"zhx-Nshu-CN\",\n    \"zia\": \"zia-Latn-ZZ\",\n    \"zkt\": \"zkt-Kits-CN\",\n    \"zlm\": \"zlm-Latn-TG\",\n    \"zmi\": \"zmi-Latn-MY\",\n    \"zne\": \"zne-Latn-ZZ\",\n    \"zu\": \"zu-Latn-ZA\",\n    \"zza\": \"zza-Latn-TR\"\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseUnicodeLocaleId = exports.parseUnicodeLanguageId = exports.isUnicodeVariantSubtag = exports.isUnicodeScriptSubtag = exports.isUnicodeRegionSubtag = exports.isStructurallyValidLanguageTag = exports.isUnicodeLanguageSubtag = exports.SEPARATOR = void 0;\nvar tslib_1 = require(\"tslib\");\nvar ALPHANUM_1_8 = /^[a-z0-9]{1,8}$/i;\nvar ALPHANUM_2_8 = /^[a-z0-9]{2,8}$/i;\nvar ALPHANUM_3_8 = /^[a-z0-9]{3,8}$/i;\nvar KEY_REGEX = /^[a-z0-9][a-z]$/i;\nvar TYPE_REGEX = /^[a-z0-9]{3,8}$/i;\nvar ALPHA_4 = /^[a-z]{4}$/i;\n// alphanum-[tTuUxX]\nvar OTHER_EXTENSION_TYPE = /^[0-9a-svwyz]$/i;\nvar UNICODE_REGION_SUBTAG_REGEX = /^([a-z]{2}|[0-9]{3})$/i;\nvar UNICODE_VARIANT_SUBTAG_REGEX = /^([a-z0-9]{5,8}|[0-9][a-z0-9]{3})$/i;\nvar UNICODE_LANGUAGE_SUBTAG_REGEX = /^([a-z]{2,3}|[a-z]{5,8})$/i;\nvar TKEY_REGEX = /^[a-z][0-9]$/i;\nexports.SEPARATOR = '-';\nfunction isUnicodeLanguageSubtag(lang) {\n    return UNICODE_LANGUAGE_SUBTAG_REGEX.test(lang);\n}\nexports.isUnicodeLanguageSubtag = isUnicodeLanguageSubtag;\nfunction isStructurallyValidLanguageTag(tag) {\n    try {\n        parseUnicodeLanguageId(tag.split(exports.SEPARATOR));\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nexports.isStructurallyValidLanguageTag = isStructurallyValidLanguageTag;\nfunction isUnicodeRegionSubtag(region) {\n    return UNICODE_REGION_SUBTAG_REGEX.test(region);\n}\nexports.isUnicodeRegionSubtag = isUnicodeRegionSubtag;\nfunction isUnicodeScriptSubtag(script) {\n    return ALPHA_4.test(script);\n}\nexports.isUnicodeScriptSubtag = isUnicodeScriptSubtag;\nfunction isUnicodeVariantSubtag(variant) {\n    return UNICODE_VARIANT_SUBTAG_REGEX.test(variant);\n}\nexports.isUnicodeVariantSubtag = isUnicodeVariantSubtag;\nfunction parseUnicodeLanguageId(chunks) {\n    if (typeof chunks === 'string') {\n        chunks = chunks.split(exports.SEPARATOR);\n    }\n    var lang = chunks.shift();\n    if (!lang) {\n        throw new RangeError('Missing unicode_language_subtag');\n    }\n    if (lang === 'root') {\n        return { lang: 'root', variants: [] };\n    }\n    // unicode_language_subtag\n    if (!isUnicodeLanguageSubtag(lang)) {\n        throw new RangeError('Malformed unicode_language_subtag');\n    }\n    var script;\n    // unicode_script_subtag\n    if (chunks.length && isUnicodeScriptSubtag(chunks[0])) {\n        script = chunks.shift();\n    }\n    var region;\n    // unicode_region_subtag\n    if (chunks.length && isUnicodeRegionSubtag(chunks[0])) {\n        region = chunks.shift();\n    }\n    var variants = {};\n    while (chunks.length && isUnicodeVariantSubtag(chunks[0])) {\n        var variant = chunks.shift();\n        if (variant in variants) {\n            throw new RangeError(\"Duplicate variant \\\"\".concat(variant, \"\\\"\"));\n        }\n        variants[variant] = 1;\n    }\n    return {\n        lang: lang,\n        script: script,\n        region: region,\n        variants: Object.keys(variants),\n    };\n}\nexports.parseUnicodeLanguageId = parseUnicodeLanguageId;\nfunction parseUnicodeExtension(chunks) {\n    var keywords = [];\n    var keyword;\n    while (chunks.length && (keyword = parseKeyword(chunks))) {\n        keywords.push(keyword);\n    }\n    if (keywords.length) {\n        return {\n            type: 'u',\n            keywords: keywords,\n            attributes: [],\n        };\n    }\n    // Mix of attributes & keywords\n    // Check for attributes first\n    var attributes = [];\n    while (chunks.length && ALPHANUM_3_8.test(chunks[0])) {\n        attributes.push(chunks.shift());\n    }\n    while (chunks.length && (keyword = parseKeyword(chunks))) {\n        keywords.push(keyword);\n    }\n    if (keywords.length || attributes.length) {\n        return {\n            type: 'u',\n            attributes: attributes,\n            keywords: keywords,\n        };\n    }\n    throw new RangeError('Malformed unicode_extension');\n}\nfunction parseKeyword(chunks) {\n    var key;\n    if (!KEY_REGEX.test(chunks[0])) {\n        return;\n    }\n    key = chunks.shift();\n    var type = [];\n    while (chunks.length && TYPE_REGEX.test(chunks[0])) {\n        type.push(chunks.shift());\n    }\n    var value = '';\n    if (type.length) {\n        value = type.join(exports.SEPARATOR);\n    }\n    return [key, value];\n}\nfunction parseTransformedExtension(chunks) {\n    var lang;\n    try {\n        lang = parseUnicodeLanguageId(chunks);\n    }\n    catch (e) {\n        // Try just parsing tfield\n    }\n    var fields = [];\n    while (chunks.length && TKEY_REGEX.test(chunks[0])) {\n        var key = chunks.shift();\n        var value = [];\n        while (chunks.length && ALPHANUM_3_8.test(chunks[0])) {\n            value.push(chunks.shift());\n        }\n        if (!value.length) {\n            throw new RangeError(\"Missing tvalue for tkey \\\"\".concat(key, \"\\\"\"));\n        }\n        fields.push([key, value.join(exports.SEPARATOR)]);\n    }\n    if (fields.length) {\n        return {\n            type: 't',\n            fields: fields,\n            lang: lang,\n        };\n    }\n    throw new RangeError('Malformed transformed_extension');\n}\nfunction parsePuExtension(chunks) {\n    var exts = [];\n    while (chunks.length && ALPHANUM_1_8.test(chunks[0])) {\n        exts.push(chunks.shift());\n    }\n    if (exts.length) {\n        return {\n            type: 'x',\n            value: exts.join(exports.SEPARATOR),\n        };\n    }\n    throw new RangeError('Malformed private_use_extension');\n}\nfunction parseOtherExtensionValue(chunks) {\n    var exts = [];\n    while (chunks.length && ALPHANUM_2_8.test(chunks[0])) {\n        exts.push(chunks.shift());\n    }\n    if (exts.length) {\n        return exts.join(exports.SEPARATOR);\n    }\n    return '';\n}\nfunction parseExtensions(chunks) {\n    if (!chunks.length) {\n        return { extensions: [] };\n    }\n    var extensions = [];\n    var unicodeExtension;\n    var transformedExtension;\n    var puExtension;\n    var otherExtensionMap = {};\n    do {\n        var type = chunks.shift();\n        switch (type) {\n            case 'u':\n            case 'U':\n                if (unicodeExtension) {\n                    throw new RangeError('There can only be 1 -u- extension');\n                }\n                unicodeExtension = parseUnicodeExtension(chunks);\n                extensions.push(unicodeExtension);\n                break;\n            case 't':\n            case 'T':\n                if (transformedExtension) {\n                    throw new RangeError('There can only be 1 -t- extension');\n                }\n                transformedExtension = parseTransformedExtension(chunks);\n                extensions.push(transformedExtension);\n                break;\n            case 'x':\n            case 'X':\n                if (puExtension) {\n                    throw new RangeError('There can only be 1 -x- extension');\n                }\n                puExtension = parsePuExtension(chunks);\n                extensions.push(puExtension);\n                break;\n            default:\n                if (!OTHER_EXTENSION_TYPE.test(type)) {\n                    throw new RangeError('Malformed extension type');\n                }\n                if (type in otherExtensionMap) {\n                    throw new RangeError(\"There can only be 1 -\".concat(type, \"- extension\"));\n                }\n                var extension = {\n                    type: type,\n                    value: parseOtherExtensionValue(chunks),\n                };\n                otherExtensionMap[extension.type] = extension;\n                extensions.push(extension);\n                break;\n        }\n    } while (chunks.length);\n    return { extensions: extensions };\n}\nfunction parseUnicodeLocaleId(locale) {\n    var chunks = locale.split(exports.SEPARATOR);\n    var lang = parseUnicodeLanguageId(chunks);\n    return (0, tslib_1.__assign)({ lang: lang }, parseExtensions(chunks));\n}\nexports.parseUnicodeLocaleId = parseUnicodeLocaleId;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\n// Type-only circular import\n// eslint-disable-next-line import/no-cycle\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar internalSlotMap = new WeakMap();\nfunction getInternalSlots(x) {\n    var internalSlots = internalSlotMap.get(x);\n    if (!internalSlots) {\n        internalSlots = Object.create(null);\n        internalSlotMap.set(x, internalSlots);\n    }\n    return internalSlots;\n}\nexports.default = getInternalSlots;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Locale = void 0;\nvar tslib_1 = require(\"tslib\");\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar intl_getcanonicallocales_1 = require(\"@formatjs/intl-getcanonicallocales\");\nvar get_internal_slots_1 = (0, tslib_1.__importDefault)(require(\"./get_internal_slots\"));\nvar RELEVANT_EXTENSION_KEYS = ['ca', 'co', 'hc', 'kf', 'kn', 'nu'];\nvar UNICODE_TYPE_REGEX = /^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;\nfunction applyOptionsToTag(tag, options) {\n    (0, ecma402_abstract_1.invariant)(typeof tag === 'string', 'language tag must be a string');\n    (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isStructurallyValidLanguageTag)(tag), 'malformed language tag', RangeError);\n    var language = (0, ecma402_abstract_1.GetOption)(options, 'language', 'string', undefined, undefined);\n    if (language !== undefined) {\n        (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isUnicodeLanguageSubtag)(language), 'Malformed unicode_language_subtag', RangeError);\n    }\n    var script = (0, ecma402_abstract_1.GetOption)(options, 'script', 'string', undefined, undefined);\n    if (script !== undefined) {\n        (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isUnicodeScriptSubtag)(script), 'Malformed unicode_script_subtag', RangeError);\n    }\n    var region = (0, ecma402_abstract_1.GetOption)(options, 'region', 'string', undefined, undefined);\n    if (region !== undefined) {\n        (0, ecma402_abstract_1.invariant)((0, intl_getcanonicallocales_1.isUnicodeRegionSubtag)(region), 'Malformed unicode_region_subtag', RangeError);\n    }\n    var languageId = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(tag);\n    if (language !== undefined) {\n        languageId.lang = language;\n    }\n    if (script !== undefined) {\n        languageId.script = script;\n    }\n    if (region !== undefined) {\n        languageId.region = region;\n    }\n    return Intl.getCanonicalLocales((0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag)), { lang: languageId })))[0];\n}\nfunction applyUnicodeExtensionToTag(tag, options, relevantExtensionKeys) {\n    var unicodeExtension;\n    var keywords = [];\n    var ast = (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag);\n    for (var _i = 0, _a = ast.extensions; _i < _a.length; _i++) {\n        var ext = _a[_i];\n        if (ext.type === 'u') {\n            unicodeExtension = ext;\n            if (Array.isArray(ext.keywords))\n                keywords = ext.keywords;\n        }\n    }\n    var result = Object.create(null);\n    for (var _b = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _b < relevantExtensionKeys_1.length; _b++) {\n        var key = relevantExtensionKeys_1[_b];\n        var value = void 0, entry = void 0;\n        for (var _c = 0, keywords_1 = keywords; _c < keywords_1.length; _c++) {\n            var keyword = keywords_1[_c];\n            if (keyword[0] === key) {\n                entry = keyword;\n                value = entry[1];\n            }\n        }\n        (0, ecma402_abstract_1.invariant)(key in options, \"\".concat(key, \" must be in options\"));\n        var optionsValue = options[key];\n        if (optionsValue !== undefined) {\n            (0, ecma402_abstract_1.invariant)(typeof optionsValue === 'string', \"Value for \".concat(key, \" must be a string\"));\n            value = optionsValue;\n            if (entry) {\n                entry[1] = value;\n            }\n            else {\n                keywords.push([key, value]);\n            }\n        }\n        result[key] = value;\n    }\n    if (!unicodeExtension) {\n        if (keywords.length) {\n            ast.extensions.push({\n                type: 'u',\n                keywords: keywords,\n                attributes: [],\n            });\n        }\n    }\n    else {\n        unicodeExtension.keywords = keywords;\n    }\n    result.locale = Intl.getCanonicalLocales((0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast))[0];\n    return result;\n}\nfunction mergeUnicodeLanguageId(lang, script, region, variants, replacement) {\n    if (variants === void 0) { variants = []; }\n    if (!replacement) {\n        return {\n            lang: lang || 'und',\n            script: script,\n            region: region,\n            variants: variants,\n        };\n    }\n    return {\n        lang: !lang || lang === 'und' ? replacement.lang : lang,\n        script: script || replacement.script,\n        region: region || replacement.region,\n        variants: (0, tslib_1.__spreadArray)((0, tslib_1.__spreadArray)([], variants, true), replacement.variants, true),\n    };\n}\nfunction addLikelySubtags(tag) {\n    var ast = (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag);\n    var unicodeLangId = ast.lang;\n    var lang = unicodeLangId.lang, script = unicodeLangId.script, region = unicodeLangId.region, variants = unicodeLangId.variants;\n    if (script && region) {\n        var match_1 = intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, script: script, region: region, variants: [] })];\n        if (match_1) {\n            var parts_1 = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match_1);\n            ast.lang = mergeUnicodeLanguageId(undefined, undefined, undefined, variants, parts_1);\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n        }\n    }\n    if (script) {\n        var match_2 = intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, script: script, variants: [] })];\n        if (match_2) {\n            var parts_2 = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match_2);\n            ast.lang = mergeUnicodeLanguageId(undefined, undefined, region, variants, parts_2);\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n        }\n    }\n    if (region) {\n        var match_3 = intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, region: region, variants: [] })];\n        if (match_3) {\n            var parts_3 = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match_3);\n            ast.lang = mergeUnicodeLanguageId(undefined, script, undefined, variants, parts_3);\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n        }\n    }\n    var match = intl_getcanonicallocales_1.likelySubtags[lang] ||\n        intl_getcanonicallocales_1.likelySubtags[(0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: 'und', script: script, variants: [] })];\n    if (!match) {\n        throw new Error(\"No match for addLikelySubtags\");\n    }\n    var parts = (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(match);\n    ast.lang = mergeUnicodeLanguageId(undefined, script, region, variants, parts);\n    return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)(ast);\n}\n/**\n * From: https://github.com/unicode-org/icu/blob/4231ca5be053a22a1be24eb891817458c97db709/icu4j/main/classes/core/src/com/ibm/icu/util/ULocale.java#L2395\n * @param tag\n */\nfunction removeLikelySubtags(tag) {\n    var maxLocale = addLikelySubtags(tag);\n    if (!maxLocale) {\n        return tag;\n    }\n    maxLocale = (0, intl_getcanonicallocales_1.emitUnicodeLanguageId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(maxLocale)), { variants: [] }));\n    var ast = (0, intl_getcanonicallocales_1.parseUnicodeLocaleId)(tag);\n    var _a = ast.lang, lang = _a.lang, script = _a.script, region = _a.region, variants = _a.variants;\n    var trial = addLikelySubtags((0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, variants: [] }));\n    if (trial === maxLocale) {\n        return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, ast), { lang: mergeUnicodeLanguageId(lang, undefined, undefined, variants) }));\n    }\n    if (region) {\n        var trial_1 = addLikelySubtags((0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, region: region, variants: [] }));\n        if (trial_1 === maxLocale) {\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, ast), { lang: mergeUnicodeLanguageId(lang, undefined, region, variants) }));\n        }\n    }\n    if (script) {\n        var trial_2 = addLikelySubtags((0, intl_getcanonicallocales_1.emitUnicodeLanguageId)({ lang: lang, script: script, variants: [] }));\n        if (trial_2 === maxLocale) {\n            return (0, intl_getcanonicallocales_1.emitUnicodeLocaleId)((0, tslib_1.__assign)((0, tslib_1.__assign)({}, ast), { lang: mergeUnicodeLanguageId(lang, script, undefined, variants) }));\n        }\n    }\n    return tag;\n}\nvar Locale = /** @class */ (function () {\n    function Locale(tag, opts) {\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof Locale ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.Locale must be called with 'new'\");\n        }\n        var relevantExtensionKeys = Locale.relevantExtensionKeys;\n        var internalSlotsList = [\n            'initializedLocale',\n            'locale',\n            'calendar',\n            'collation',\n            'hourCycle',\n            'numberingSystem',\n        ];\n        if (relevantExtensionKeys.indexOf('kf') > -1) {\n            internalSlotsList.push('caseFirst');\n        }\n        if (relevantExtensionKeys.indexOf('kn') > -1) {\n            internalSlotsList.push('numeric');\n        }\n        if (tag === undefined) {\n            throw new TypeError(\"First argument to Intl.Locale constructor can't be empty or missing\");\n        }\n        if (typeof tag !== 'string' && typeof tag !== 'object') {\n            throw new TypeError('tag must be a string or object');\n        }\n        var internalSlots;\n        if (typeof tag === 'object' &&\n            (internalSlots = (0, get_internal_slots_1.default)(tag)) &&\n            internalSlots.initializedLocale) {\n            tag = internalSlots.locale;\n        }\n        else {\n            tag = tag.toString();\n        }\n        internalSlots = (0, get_internal_slots_1.default)(this);\n        var options = (0, ecma402_abstract_1.CoerceOptionsToObject)(opts);\n        tag = applyOptionsToTag(tag, options);\n        var opt = Object.create(null);\n        var calendar = (0, ecma402_abstract_1.GetOption)(options, 'calendar', 'string', undefined, undefined);\n        if (calendar !== undefined) {\n            if (!UNICODE_TYPE_REGEX.test(calendar)) {\n                throw new RangeError('invalid calendar');\n            }\n        }\n        opt.ca = calendar;\n        var collation = (0, ecma402_abstract_1.GetOption)(options, 'collation', 'string', undefined, undefined);\n        if (collation !== undefined) {\n            if (!UNICODE_TYPE_REGEX.test(collation)) {\n                throw new RangeError('invalid collation');\n            }\n        }\n        opt.co = collation;\n        var hc = (0, ecma402_abstract_1.GetOption)(options, 'hourCycle', 'string', ['h11', 'h12', 'h23', 'h24'], undefined);\n        opt.hc = hc;\n        var kf = (0, ecma402_abstract_1.GetOption)(options, 'caseFirst', 'string', ['upper', 'lower', 'false'], undefined);\n        opt.kf = kf;\n        var _kn = (0, ecma402_abstract_1.GetOption)(options, 'numeric', 'boolean', undefined, undefined);\n        var kn;\n        if (_kn !== undefined) {\n            kn = String(_kn);\n        }\n        opt.kn = kn;\n        var numberingSystem = (0, ecma402_abstract_1.GetOption)(options, 'numberingSystem', 'string', undefined, undefined);\n        if (numberingSystem !== undefined) {\n            if (!UNICODE_TYPE_REGEX.test(numberingSystem)) {\n                throw new RangeError('Invalid numberingSystem');\n            }\n        }\n        opt.nu = numberingSystem;\n        var r = applyUnicodeExtensionToTag(tag, opt, relevantExtensionKeys);\n        internalSlots.locale = r.locale;\n        internalSlots.calendar = r.ca;\n        internalSlots.collation = r.co;\n        internalSlots.hourCycle = r.hc;\n        if (relevantExtensionKeys.indexOf('kf') > -1) {\n            internalSlots.caseFirst = r.kf;\n        }\n        if (relevantExtensionKeys.indexOf('kn') > -1) {\n            internalSlots.numeric = (0, ecma402_abstract_1.SameValue)(r.kn, 'true');\n        }\n        internalSlots.numberingSystem = r.nu;\n    }\n    /**\n     * https://www.unicode.org/reports/tr35/#Likely_Subtags\n     */\n    Locale.prototype.maximize = function () {\n        var locale = (0, get_internal_slots_1.default)(this).locale;\n        try {\n            var maximizedLocale = addLikelySubtags(locale);\n            return new Locale(maximizedLocale);\n        }\n        catch (e) {\n            return new Locale(locale);\n        }\n    };\n    /**\n     * https://www.unicode.org/reports/tr35/#Likely_Subtags\n     */\n    Locale.prototype.minimize = function () {\n        var locale = (0, get_internal_slots_1.default)(this).locale;\n        try {\n            var minimizedLocale = removeLikelySubtags(locale);\n            return new Locale(minimizedLocale);\n        }\n        catch (e) {\n            return new Locale(locale);\n        }\n    };\n    Locale.prototype.toString = function () {\n        return (0, get_internal_slots_1.default)(this).locale;\n    };\n    Object.defineProperty(Locale.prototype, \"baseName\", {\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.emitUnicodeLanguageId)((0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"calendar\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).calendar;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"collation\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).collation;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"hourCycle\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).hourCycle;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"caseFirst\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).caseFirst;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"numeric\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).numeric;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"numberingSystem\", {\n        get: function () {\n            return (0, get_internal_slots_1.default)(this).numberingSystem;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"language\", {\n        /**\n         * https://tc39.es/proposal-intl-locale/#sec-Intl.Locale.prototype.language\n         */\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale).lang;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"script\", {\n        /**\n         * https://tc39.es/proposal-intl-locale/#sec-Intl.Locale.prototype.script\n         */\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale).script;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Locale.prototype, \"region\", {\n        /**\n         * https://tc39.es/proposal-intl-locale/#sec-Intl.Locale.prototype.region\n         */\n        get: function () {\n            var locale = (0, get_internal_slots_1.default)(this).locale;\n            return (0, intl_getcanonicallocales_1.parseUnicodeLanguageId)(locale).region;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Locale.relevantExtensionKeys = RELEVANT_EXTENSION_KEYS;\n    return Locale;\n}());\nexports.Locale = Locale;\ntry {\n    if (typeof Symbol !== 'undefined') {\n        Object.defineProperty(Locale.prototype, Symbol.toStringTag, {\n            value: 'Intl.Locale',\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    Object.defineProperty(Locale.prototype.constructor, 'length', {\n        value: 1,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n}\ncatch (e) {\n    // Meta fix so we're test262-compliant, not important\n}\nexports.default = Locale;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _1 = require(\"./\");\nvar should_polyfill_1 = require(\"./should-polyfill\");\nif ((0, should_polyfill_1.shouldPolyfill)()) {\n    Object.defineProperty(Intl, 'Locale', {\n        value: _1.Locale,\n        writable: true,\n        enumerable: false,\n        configurable: true,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldPolyfill = void 0;\n/**\n * https://bugs.chromium.org/p/v8/issues/detail?id=10682\n */\nfunction hasIntlGetCanonicalLocalesBug() {\n    try {\n        return new Intl.Locale('und-x-private').toString() === 'x-private';\n    }\n    catch (e) {\n        return true;\n    }\n}\nfunction shouldPolyfill() {\n    return !('Locale' in Intl) || hasIntlGetCanonicalLocalesBug();\n}\nexports.shouldPolyfill = shouldPolyfill;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GetOperands = void 0;\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-getoperands\n * @param s\n */\nfunction GetOperands(s) {\n    (0, ecma402_abstract_1.invariant)(typeof s === 'string', \"GetOperands should have been called with a string\");\n    var n = (0, ecma402_abstract_1.ToNumber)(s);\n    (0, ecma402_abstract_1.invariant)(isFinite(n), 'n should be finite');\n    var dp = s.indexOf('.');\n    var iv;\n    var f;\n    var v;\n    var fv = '';\n    if (dp === -1) {\n        iv = n;\n        f = 0;\n        v = 0;\n    }\n    else {\n        iv = s.slice(0, dp);\n        fv = s.slice(dp, s.length);\n        f = (0, ecma402_abstract_1.ToNumber)(fv);\n        v = fv.length;\n    }\n    var i = Math.abs((0, ecma402_abstract_1.ToNumber)(iv));\n    var w;\n    var t;\n    if (f !== 0) {\n        var ft = fv.replace(/0+$/, '');\n        w = ft.length;\n        t = (0, ecma402_abstract_1.ToNumber)(ft);\n    }\n    else {\n        w = 0;\n        t = 0;\n    }\n    return {\n        Number: n,\n        IntegerDigits: i,\n        NumberOfFractionDigits: v,\n        NumberOfFractionDigitsWithoutTrailing: w,\n        FractionDigits: f,\n        FractionDigitsWithoutTrailing: t,\n    };\n}\nexports.GetOperands = GetOperands;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InitializePluralRules = void 0;\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar intl_localematcher_1 = require(\"@formatjs/intl-localematcher\");\nfunction InitializePluralRules(pl, locales, options, _a) {\n    var availableLocales = _a.availableLocales, relevantExtensionKeys = _a.relevantExtensionKeys, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale, getInternalSlots = _a.getInternalSlots;\n    var requestedLocales = (0, ecma402_abstract_1.CanonicalizeLocaleList)(locales);\n    var opt = Object.create(null);\n    var opts = (0, ecma402_abstract_1.CoerceOptionsToObject)(options);\n    var internalSlots = getInternalSlots(pl);\n    internalSlots.initializedPluralRules = true;\n    var matcher = (0, ecma402_abstract_1.GetOption)(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n    opt.localeMatcher = matcher;\n    internalSlots.type = (0, ecma402_abstract_1.GetOption)(opts, 'type', 'string', ['cardinal', 'ordinal'], 'cardinal');\n    (0, ecma402_abstract_1.SetNumberFormatDigitOptions)(internalSlots, opts, 0, 3, 'standard');\n    var r = (0, intl_localematcher_1.ResolveLocale)(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    internalSlots.locale = r.locale;\n    return pl;\n}\nexports.InitializePluralRules = InitializePluralRules;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResolvePlural = void 0;\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar GetOperands_1 = require(\"./GetOperands\");\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-resolveplural\n * @param pl\n * @param n\n * @param PluralRuleSelect Has to pass in bc it's implementation-specific\n */\nfunction ResolvePlural(pl, n, _a) {\n    var getInternalSlots = _a.getInternalSlots, PluralRuleSelect = _a.PluralRuleSelect;\n    var internalSlots = getInternalSlots(pl);\n    (0, ecma402_abstract_1.invariant)((0, ecma402_abstract_1.Type)(internalSlots) === 'Object', 'pl has to be an object');\n    (0, ecma402_abstract_1.invariant)('initializedPluralRules' in internalSlots, 'pluralrules must be initialized');\n    (0, ecma402_abstract_1.invariant)((0, ecma402_abstract_1.Type)(n) === 'Number', 'n must be a number');\n    if (!isFinite(n)) {\n        return 'other';\n    }\n    var locale = internalSlots.locale, type = internalSlots.type;\n    var res = (0, ecma402_abstract_1.FormatNumericToString)(internalSlots, n);\n    var s = res.formattedString;\n    var operands = (0, GetOperands_1.GetOperands)(s);\n    return PluralRuleSelect(locale, type, n, operands);\n}\nexports.ResolvePlural = ResolvePlural;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar internalSlotMap = new WeakMap();\nfunction getInternalSlots(x) {\n    var internalSlots = internalSlotMap.get(x);\n    if (!internalSlots) {\n        internalSlots = Object.create(null);\n        internalSlotMap.set(x, internalSlots);\n    }\n    return internalSlots;\n}\nexports.default = getInternalSlots;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PluralRules = void 0;\nvar tslib_1 = require(\"tslib\");\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar InitializePluralRules_1 = require(\"./abstract/InitializePluralRules\");\nvar ResolvePlural_1 = require(\"./abstract/ResolvePlural\");\nvar get_internal_slots_1 = (0, tslib_1.__importDefault)(require(\"./get_internal_slots\"));\nfunction validateInstance(instance, method) {\n    if (!(instance instanceof PluralRules)) {\n        throw new TypeError(\"Method Intl.PluralRules.prototype.\".concat(method, \" called on incompatible receiver \").concat(String(instance)));\n    }\n}\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-pluralruleselect\n * @param locale\n * @param type\n * @param _n\n * @param param3\n */\nfunction PluralRuleSelect(locale, type, _n, _a) {\n    var IntegerDigits = _a.IntegerDigits, NumberOfFractionDigits = _a.NumberOfFractionDigits, FractionDigits = _a.FractionDigits;\n    return PluralRules.localeData[locale].fn(NumberOfFractionDigits\n        ? \"\".concat(IntegerDigits, \".\").concat(FractionDigits)\n        : IntegerDigits, type === 'ordinal');\n}\nvar PluralRules = /** @class */ (function () {\n    function PluralRules(locales, options) {\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof PluralRules ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.PluralRules must be called with 'new'\");\n        }\n        return (0, InitializePluralRules_1.InitializePluralRules)(this, locales, options, {\n            availableLocales: PluralRules.availableLocales,\n            relevantExtensionKeys: PluralRules.relevantExtensionKeys,\n            localeData: PluralRules.localeData,\n            getDefaultLocale: PluralRules.getDefaultLocale,\n            getInternalSlots: get_internal_slots_1.default,\n        });\n    }\n    PluralRules.prototype.resolvedOptions = function () {\n        validateInstance(this, 'resolvedOptions');\n        var opts = Object.create(null);\n        var internalSlots = (0, get_internal_slots_1.default)(this);\n        opts.locale = internalSlots.locale;\n        opts.type = internalSlots.type;\n        [\n            'minimumIntegerDigits',\n            'minimumFractionDigits',\n            'maximumFractionDigits',\n            'minimumSignificantDigits',\n            'maximumSignificantDigits',\n        ].forEach(function (field) {\n            var val = internalSlots[field];\n            if (val !== undefined) {\n                opts[field] = val;\n            }\n        });\n        opts.pluralCategories = (0, tslib_1.__spreadArray)([], PluralRules.localeData[opts.locale].categories[opts.type], true);\n        return opts;\n    };\n    PluralRules.prototype.select = function (val) {\n        var pr = this;\n        validateInstance(pr, 'select');\n        var n = (0, ecma402_abstract_1.ToNumber)(val);\n        return (0, ResolvePlural_1.ResolvePlural)(pr, n, { getInternalSlots: get_internal_slots_1.default, PluralRuleSelect: PluralRuleSelect });\n    };\n    PluralRules.prototype.toString = function () {\n        return '[object Intl.PluralRules]';\n    };\n    PluralRules.supportedLocalesOf = function (locales, options) {\n        return (0, ecma402_abstract_1.SupportedLocales)(PluralRules.availableLocales, (0, ecma402_abstract_1.CanonicalizeLocaleList)(locales), options);\n    };\n    PluralRules.__addLocaleData = function () {\n        var data = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            data[_i] = arguments[_i];\n        }\n        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n            var _b = data_1[_a], d = _b.data, locale = _b.locale;\n            PluralRules.localeData[locale] = d;\n            PluralRules.availableLocales.add(locale);\n            if (!PluralRules.__defaultLocale) {\n                PluralRules.__defaultLocale = locale;\n            }\n        }\n    };\n    PluralRules.getDefaultLocale = function () {\n        return PluralRules.__defaultLocale;\n    };\n    PluralRules.localeData = {};\n    PluralRules.availableLocales = new Set();\n    PluralRules.__defaultLocale = '';\n    PluralRules.relevantExtensionKeys = [];\n    PluralRules.polyfilled = true;\n    return PluralRules;\n}());\nexports.PluralRules = PluralRules;\ntry {\n    // IE11 does not have Symbol\n    if (typeof Symbol !== 'undefined') {\n        Object.defineProperty(PluralRules.prototype, Symbol.toStringTag, {\n            value: 'Intl.PluralRules',\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    try {\n        // https://github.com/tc39/test262/blob/master/test/intl402/PluralRules/length.js\n        Object.defineProperty(PluralRules, 'length', {\n            value: 0,\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    catch (error) {\n        // IE 11 sets Function.prototype.length to be non-configurable which will cause the\n        // above Object.defineProperty to throw an error.\n    }\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/length.js\n    Object.defineProperty(PluralRules.prototype.constructor, 'length', {\n        value: 0,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/length.js\n    Object.defineProperty(PluralRules.supportedLocalesOf, 'length', {\n        value: 1,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n}\ncatch (ex) {\n    // Meta fixes for test262\n}\n","/* @generated */\n// prettier-ignore\nif (Intl.PluralRules && typeof Intl.PluralRules.__addLocaleData === 'function') {\n  Intl.PluralRules.__addLocaleData({\"data\":{\"categories\":{\"cardinal\":[\"one\",\"other\"],\"ordinal\":[\"one\",\"two\",\"few\",\"other\"]},\"fn\":function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n, n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return n10 == 1 && n100 != 11 ? 'one'\n    : n10 == 2 && n100 != 12 ? 'two'\n    : n10 == 3 && n100 != 13 ? 'few'\n    : 'other';\n  return n == 1 && v0 ? 'one' : 'other';\n}},\"locale\":\"en\"})\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _1 = require(\"./\");\nvar should_polyfill_1 = require(\"./should-polyfill\");\nif ((0, should_polyfill_1.shouldPolyfill)()) {\n    Object.defineProperty(Intl, 'PluralRules', {\n        value: _1.PluralRules,\n        writable: true,\n        enumerable: false,\n        configurable: true,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldPolyfill = void 0;\nvar intl_localematcher_1 = require(\"@formatjs/intl-localematcher\");\nvar supported_locales_1 = require(\"./supported-locales\");\nfunction supportedLocalesOf(locale) {\n    if (!locale) {\n        return true;\n    }\n    var locales = Array.isArray(locale) ? locale : [locale];\n    return Intl.PluralRules.supportedLocalesOf(locales).length === locales.length;\n}\nfunction shouldPolyfill(locale) {\n    if (locale === void 0) { locale = 'en'; }\n    if (!('PluralRules' in Intl) ||\n        new Intl.PluralRules('en', { minimumFractionDigits: 2 }).select(1) ===\n            'one' ||\n        !supportedLocalesOf(locale)) {\n        return locale ? (0, intl_localematcher_1.match)([locale], supported_locales_1.supportedLocales, 'en') : undefined;\n    }\n}\nexports.shouldPolyfill = shouldPolyfill;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.supportedLocales = void 0;\n// This file is generated from supported-locales-gen.ts\nexports.supportedLocales = [\"af\", \"ak\", \"am\", \"an\", \"ar\", \"ars\", \"as\", \"asa\", \"ast\", \"az\", \"bal\", \"be\", \"bem\", \"bez\", \"bg\", \"bho\", \"bm\", \"bn\", \"bo\", \"br\", \"brx\", \"bs\", \"ca\", \"ce\", \"ceb\", \"cgg\", \"chr\", \"ckb\", \"cs\", \"cy\", \"da\", \"de\", \"doi\", \"dsb\", \"dv\", \"dz\", \"ee\", \"el\", \"en\", \"eo\", \"es\", \"et\", \"eu\", \"fa\", \"ff\", \"fi\", \"fil\", \"fo\", \"fr\", \"fur\", \"fy\", \"ga\", \"gd\", \"gl\", \"gsw\", \"gu\", \"guw\", \"gv\", \"ha\", \"haw\", \"he\", \"hi\", \"hnj\", \"hr\", \"hsb\", \"hu\", \"hy\", \"ia\", \"id\", \"ig\", \"ii\", \"io\", \"is\", \"it\", \"iu\", \"ja\", \"jbo\", \"jgo\", \"jmc\", \"jv\", \"jw\", \"ka\", \"kab\", \"kaj\", \"kcg\", \"kde\", \"kea\", \"kk\", \"kkj\", \"kl\", \"km\", \"kn\", \"ko\", \"ks\", \"ksb\", \"ksh\", \"ku\", \"kw\", \"ky\", \"lag\", \"lb\", \"lg\", \"lij\", \"lkt\", \"ln\", \"lo\", \"lt\", \"lv\", \"mas\", \"mg\", \"mgo\", \"mk\", \"ml\", \"mn\", \"mo\", \"mr\", \"ms\", \"mt\", \"my\", \"nah\", \"naq\", \"nb\", \"nd\", \"ne\", \"nl\", \"nn\", \"nnh\", \"no\", \"nqo\", \"nr\", \"nso\", \"ny\", \"nyn\", \"om\", \"or\", \"os\", \"osa\", \"pa\", \"pap\", \"pcm\", \"pl\", \"prg\", \"ps\", \"pt-PT\", \"pt\", \"rm\", \"ro\", \"rof\", \"ru\", \"rwk\", \"sah\", \"saq\", \"sat\", \"sc\", \"scn\", \"sd\", \"sdh\", \"se\", \"seh\", \"ses\", \"sg\", \"sh\", \"shi\", \"si\", \"sk\", \"sl\", \"sma\", \"smi\", \"smj\", \"smn\", \"sms\", \"sn\", \"so\", \"sq\", \"sr\", \"ss\", \"ssy\", \"st\", \"su\", \"sv\", \"sw\", \"syr\", \"ta\", \"te\", \"teo\", \"th\", \"ti\", \"tig\", \"tk\", \"tl\", \"tn\", \"to\", \"tpi\", \"tr\", \"ts\", \"tzm\", \"ug\", \"uk\", \"und\", \"ur\", \"uz\", \"ve\", \"vi\", \"vo\", \"vun\", \"wa\", \"wae\", \"wo\", \"xh\", \"xog\", \"yi\", \"yo\", \"yue\", \"zh\", \"zu\"];\n","\"use strict\";\n// Type-only circular import\n// eslint-disable-next-line import/no-cycle\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar internalSlotMap = new WeakMap();\nfunction getInternalSlots(x) {\n    var internalSlots = internalSlotMap.get(x);\n    if (!internalSlots) {\n        internalSlots = Object.create(null);\n        internalSlotMap.set(x, internalSlots);\n    }\n    return internalSlots;\n}\nexports.default = getInternalSlots;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar ecma402_abstract_1 = require(\"@formatjs/ecma402-abstract\");\nvar get_internal_slots_1 = tslib_1.__importDefault(require(\"./get_internal_slots\"));\nvar RelativeTimeFormat = /** @class */ (function () {\n    function RelativeTimeFormat(locales, options) {\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof RelativeTimeFormat ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.RelativeTimeFormat must be called with 'new'\");\n        }\n        return ecma402_abstract_1.InitializeRelativeTimeFormat(this, locales, options, {\n            getInternalSlots: get_internal_slots_1.default,\n            availableLocales: RelativeTimeFormat.availableLocales,\n            relevantExtensionKeys: RelativeTimeFormat.relevantExtensionKeys,\n            localeData: RelativeTimeFormat.localeData,\n            getDefaultLocale: RelativeTimeFormat.getDefaultLocale,\n        });\n    }\n    RelativeTimeFormat.prototype.format = function (value, unit) {\n        if (typeof this !== 'object') {\n            throw new TypeError('format was called on a non-object');\n        }\n        var internalSlots = get_internal_slots_1.default(this);\n        if (!internalSlots.initializedRelativeTimeFormat) {\n            throw new TypeError('format was called on a invalid context');\n        }\n        return ecma402_abstract_1.PartitionRelativeTimePattern(this, Number(value), ecma402_abstract_1.ToString(unit), {\n            getInternalSlots: get_internal_slots_1.default,\n        })\n            .map(function (el) { return el.value; })\n            .join('');\n    };\n    RelativeTimeFormat.prototype.formatToParts = function (value, unit) {\n        if (typeof this !== 'object') {\n            throw new TypeError('formatToParts was called on a non-object');\n        }\n        var internalSlots = get_internal_slots_1.default(this);\n        if (!internalSlots.initializedRelativeTimeFormat) {\n            throw new TypeError('formatToParts was called on a invalid context');\n        }\n        return ecma402_abstract_1.PartitionRelativeTimePattern(this, Number(value), ecma402_abstract_1.ToString(unit), { getInternalSlots: get_internal_slots_1.default });\n    };\n    RelativeTimeFormat.prototype.resolvedOptions = function () {\n        if (typeof this !== 'object') {\n            throw new TypeError('resolvedOptions was called on a non-object');\n        }\n        var internalSlots = get_internal_slots_1.default(this);\n        if (!internalSlots.initializedRelativeTimeFormat) {\n            throw new TypeError('resolvedOptions was called on a invalid context');\n        }\n        // test262/test/intl402/RelativeTimeFormat/prototype/resolvedOptions/type.js\n        return {\n            locale: internalSlots.locale,\n            style: internalSlots.style,\n            numeric: internalSlots.numeric,\n            numberingSystem: internalSlots.numberingSystem,\n        };\n    };\n    RelativeTimeFormat.supportedLocalesOf = function (locales, options) {\n        return ecma402_abstract_1.SupportedLocales(RelativeTimeFormat.availableLocales, ecma402_abstract_1.CanonicalizeLocaleList(locales), options);\n    };\n    RelativeTimeFormat.__addLocaleData = function () {\n        var data = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            data[_i] = arguments[_i];\n        }\n        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n            var _b = data_1[_a], d = _b.data, locale = _b.locale;\n            var minimizedLocale = new Intl.Locale(locale)\n                .minimize()\n                .toString();\n            RelativeTimeFormat.localeData[locale] = RelativeTimeFormat.localeData[minimizedLocale] = d;\n            RelativeTimeFormat.availableLocales.add(minimizedLocale);\n            RelativeTimeFormat.availableLocales.add(locale);\n            if (!RelativeTimeFormat.__defaultLocale) {\n                RelativeTimeFormat.__defaultLocale = minimizedLocale;\n            }\n        }\n    };\n    RelativeTimeFormat.getDefaultLocale = function () {\n        return RelativeTimeFormat.__defaultLocale;\n    };\n    RelativeTimeFormat.localeData = {};\n    RelativeTimeFormat.availableLocales = new Set();\n    RelativeTimeFormat.__defaultLocale = '';\n    RelativeTimeFormat.relevantExtensionKeys = ['nu'];\n    RelativeTimeFormat.polyfilled = true;\n    return RelativeTimeFormat;\n}());\nexports.default = RelativeTimeFormat;\ntry {\n    // IE11 does not have Symbol\n    if (typeof Symbol !== 'undefined') {\n        Object.defineProperty(RelativeTimeFormat.prototype, Symbol.toStringTag, {\n            value: 'Intl.RelativeTimeFormat',\n            writable: false,\n            enumerable: false,\n            configurable: true,\n        });\n    }\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/length.js\n    Object.defineProperty(RelativeTimeFormat.prototype.constructor, 'length', {\n        value: 0,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n    // https://github.com/tc39/test262/blob/master/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/length.js\n    Object.defineProperty(RelativeTimeFormat.supportedLocalesOf, 'length', {\n        value: 1,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n    });\n}\ncatch (e) {\n    // Meta fix so we're test262-compliant, not important\n}\n","/* @generated */\t\n// prettier-ignore\nif (Intl.RelativeTimeFormat && typeof Intl.RelativeTimeFormat.__addLocaleData === 'function') {\n  Intl.RelativeTimeFormat.__addLocaleData({\"data\":{\"nu\":[\"latn\"],\"year\":{\"0\":\"this year\",\"1\":\"next year\",\"future\":{\"one\":\"in {0} year\",\"other\":\"in {0} years\"},\"past\":{\"one\":\"{0} year ago\",\"other\":\"{0} years ago\"},\"-1\":\"last year\"},\"year-short\":{\"0\":\"this yr.\",\"1\":\"next yr.\",\"future\":{\"one\":\"in {0} yr.\",\"other\":\"in {0} yr.\"},\"past\":{\"one\":\"{0} yr. ago\",\"other\":\"{0} yr. ago\"},\"-1\":\"last yr.\"},\"year-narrow\":{\"0\":\"this yr.\",\"1\":\"next yr.\",\"future\":{\"one\":\"in {0} yr.\",\"other\":\"in {0} yr.\"},\"past\":{\"one\":\"{0} yr. ago\",\"other\":\"{0} yr. ago\"},\"-1\":\"last yr.\"},\"quarter\":{\"0\":\"this quarter\",\"1\":\"next quarter\",\"future\":{\"one\":\"in {0} quarter\",\"other\":\"in {0} quarters\"},\"past\":{\"one\":\"{0} quarter ago\",\"other\":\"{0} quarters ago\"},\"-1\":\"last quarter\"},\"quarter-short\":{\"0\":\"this qtr.\",\"1\":\"next qtr.\",\"future\":{\"one\":\"in {0} qtr.\",\"other\":\"in {0} qtrs.\"},\"past\":{\"one\":\"{0} qtr. ago\",\"other\":\"{0} qtrs. ago\"},\"-1\":\"last qtr.\"},\"quarter-narrow\":{\"0\":\"this qtr.\",\"1\":\"next qtr.\",\"future\":{\"one\":\"in {0} qtr.\",\"other\":\"in {0} qtrs.\"},\"past\":{\"one\":\"{0} qtr. ago\",\"other\":\"{0} qtrs. ago\"},\"-1\":\"last qtr.\"},\"month\":{\"0\":\"this month\",\"1\":\"next month\",\"future\":{\"one\":\"in {0} month\",\"other\":\"in {0} months\"},\"past\":{\"one\":\"{0} month ago\",\"other\":\"{0} months ago\"},\"-1\":\"last month\"},\"month-short\":{\"0\":\"this mo.\",\"1\":\"next mo.\",\"future\":{\"one\":\"in {0} mo.\",\"other\":\"in {0} mo.\"},\"past\":{\"one\":\"{0} mo. ago\",\"other\":\"{0} mo. ago\"},\"-1\":\"last mo.\"},\"month-narrow\":{\"0\":\"this mo.\",\"1\":\"next mo.\",\"future\":{\"one\":\"in {0} mo.\",\"other\":\"in {0} mo.\"},\"past\":{\"one\":\"{0} mo. ago\",\"other\":\"{0} mo. ago\"},\"-1\":\"last mo.\"},\"week\":{\"0\":\"this week\",\"1\":\"next week\",\"future\":{\"one\":\"in {0} week\",\"other\":\"in {0} weeks\"},\"past\":{\"one\":\"{0} week ago\",\"other\":\"{0} weeks ago\"},\"-1\":\"last week\"},\"week-short\":{\"0\":\"this wk.\",\"1\":\"next wk.\",\"future\":{\"one\":\"in {0} wk.\",\"other\":\"in {0} wk.\"},\"past\":{\"one\":\"{0} wk. ago\",\"other\":\"{0} wk. ago\"},\"-1\":\"last wk.\"},\"week-narrow\":{\"0\":\"this wk.\",\"1\":\"next wk.\",\"future\":{\"one\":\"in {0} wk.\",\"other\":\"in {0} wk.\"},\"past\":{\"one\":\"{0} wk. ago\",\"other\":\"{0} wk. ago\"},\"-1\":\"last wk.\"},\"day\":{\"0\":\"today\",\"1\":\"tomorrow\",\"future\":{\"one\":\"in {0} day\",\"other\":\"in {0} days\"},\"past\":{\"one\":\"{0} day ago\",\"other\":\"{0} days ago\"},\"-1\":\"yesterday\"},\"day-short\":{\"0\":\"today\",\"1\":\"tomorrow\",\"future\":{\"one\":\"in {0} day\",\"other\":\"in {0} days\"},\"past\":{\"one\":\"{0} day ago\",\"other\":\"{0} days ago\"},\"-1\":\"yesterday\"},\"day-narrow\":{\"0\":\"today\",\"1\":\"tomorrow\",\"future\":{\"one\":\"in {0} day\",\"other\":\"in {0} days\"},\"past\":{\"one\":\"{0} day ago\",\"other\":\"{0} days ago\"},\"-1\":\"yesterday\"},\"hour\":{\"0\":\"this hour\",\"future\":{\"one\":\"in {0} hour\",\"other\":\"in {0} hours\"},\"past\":{\"one\":\"{0} hour ago\",\"other\":\"{0} hours ago\"}},\"hour-short\":{\"0\":\"this hour\",\"future\":{\"one\":\"in {0} hr.\",\"other\":\"in {0} hr.\"},\"past\":{\"one\":\"{0} hr. ago\",\"other\":\"{0} hr. ago\"}},\"hour-narrow\":{\"0\":\"this hour\",\"future\":{\"one\":\"in {0} hr.\",\"other\":\"in {0} hr.\"},\"past\":{\"one\":\"{0} hr. ago\",\"other\":\"{0} hr. ago\"}},\"minute\":{\"0\":\"this minute\",\"future\":{\"one\":\"in {0} minute\",\"other\":\"in {0} minutes\"},\"past\":{\"one\":\"{0} minute ago\",\"other\":\"{0} minutes ago\"}},\"minute-short\":{\"0\":\"this minute\",\"future\":{\"one\":\"in {0} min.\",\"other\":\"in {0} min.\"},\"past\":{\"one\":\"{0} min. ago\",\"other\":\"{0} min. ago\"}},\"minute-narrow\":{\"0\":\"this minute\",\"future\":{\"one\":\"in {0} min.\",\"other\":\"in {0} min.\"},\"past\":{\"one\":\"{0} min. ago\",\"other\":\"{0} min. ago\"}},\"second\":{\"0\":\"now\",\"future\":{\"one\":\"in {0} second\",\"other\":\"in {0} seconds\"},\"past\":{\"one\":\"{0} second ago\",\"other\":\"{0} seconds ago\"}},\"second-short\":{\"0\":\"now\",\"future\":{\"one\":\"in {0} sec.\",\"other\":\"in {0} sec.\"},\"past\":{\"one\":\"{0} sec. ago\",\"other\":\"{0} sec. ago\"}},\"second-narrow\":{\"0\":\"now\",\"future\":{\"one\":\"in {0} sec.\",\"other\":\"in {0} sec.\"},\"past\":{\"one\":\"{0} sec. ago\",\"other\":\"{0} sec. ago\"}}},\"locale\":\"en\"}\n)\n}","/**\n * Cannot do Math.log(x) / Math.log(10) bc if IEEE floating point issue\n * @param x number\n */\nexport function getMagnitude(x) {\n    // Cannot count string length via Number.toString because it may use scientific notation\n    // for very small or very large numbers.\n    return Math.floor(Math.log(x) * Math.LOG10E);\n}\nexport function repeat(s, times) {\n    if (typeof s.repeat === 'function') {\n        return s.repeat(times);\n    }\n    var arr = new Array(times);\n    for (var i = 0; i < arr.length; i++) {\n        arr[i] = s;\n    }\n    return arr.join('');\n}\nexport function setInternalSlot(map, pl, field, value) {\n    if (!map.get(pl)) {\n        map.set(pl, Object.create(null));\n    }\n    var slots = map.get(pl);\n    slots[field] = value;\n}\nexport function setMultiInternalSlots(map, pl, props) {\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\n        var k = _a[_i];\n        setInternalSlot(map, pl, k, props[k]);\n    }\n}\nexport function getInternalSlot(map, pl, field) {\n    return getMultiInternalSlots(map, pl, field)[field];\n}\nexport function getMultiInternalSlots(map, pl) {\n    var fields = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        fields[_i - 2] = arguments[_i];\n    }\n    var slots = map.get(pl);\n    if (!slots) {\n        throw new TypeError(pl + \" InternalSlot has not been initialized\");\n    }\n    return fields.reduce(function (all, f) {\n        all[f] = slots[f];\n        return all;\n    }, Object.create(null));\n}\nexport function isLiteralPart(patternPart) {\n    return patternPart.type === 'literal';\n}\n/*\n  17 ECMAScript Standard Built-in Objects:\n    Every built-in Function object, including constructors, that is not\n    identified as an anonymous function has a name property whose value\n    is a String.\n\n    Unless otherwise specified, the name property of a built-in Function\n    object, if it exists, has the attributes { [[Writable]]: false,\n    [[Enumerable]]: false, [[Configurable]]: true }.\n*/\nexport function defineProperty(target, name, _a) {\n    var value = _a.value;\n    Object.defineProperty(target, name, {\n        configurable: true,\n        enumerable: false,\n        writable: true,\n        value: value,\n    });\n}\nexport var UNICODE_EXTENSION_SEQUENCE_REGEX = /-u(?:-[0-9a-z]{2,8})+/gi;\nexport function invariant(condition, message, Err) {\n    if (Err === void 0) { Err = Error; }\n    if (!condition) {\n        throw new Err(message);\n    }\n}\n","export var DATE_TIME_PROPS = [\n    'weekday',\n    'era',\n    'year',\n    'month',\n    'day',\n    'hour',\n    'minute',\n    'second',\n    'timeZoneName',\n];\nexport var removalPenalty = 120;\nexport var additionPenalty = 20;\nexport var differentNumericTypePenalty = 15;\nexport var longLessPenalty = 8;\nexport var longMorePenalty = 6;\nexport var shortLessPenalty = 6;\nexport var shortMorePenalty = 3;\n","export var RangePatternType;\n(function (RangePatternType) {\n    RangePatternType[\"startRange\"] = \"startRange\";\n    RangePatternType[\"shared\"] = \"shared\";\n    RangePatternType[\"endRange\"] = \"endRange\";\n})(RangePatternType || (RangePatternType = {}));\n","import { __assign } from \"tslib\";\nimport { RangePatternType, } from '../types/date-time';\n/**\n * https://unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * Credit: https://github.com/caridy/intl-datetimeformat-pattern/blob/master/index.js\n * with some tweaks\n */\nvar DATE_TIME_REGEX = /(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;\n// trim patterns after transformations\nvar expPatternTrimmer = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\nfunction matchSkeletonPattern(match, result) {\n    var len = match.length;\n    switch (match[0]) {\n        // Era\n        case 'G':\n            result.era = len === 4 ? 'long' : len === 5 ? 'narrow' : 'short';\n            return '{era}';\n        // Year\n        case 'y':\n        case 'Y':\n        case 'u':\n        case 'U':\n        case 'r':\n            result.year = len === 2 ? '2-digit' : 'numeric';\n            return '{year}';\n        // Quarter\n        case 'q':\n        case 'Q':\n            throw new RangeError('`w/Q` (quarter) patterns are not supported');\n        // Month\n        case 'M':\n        case 'L':\n            result.month = ['numeric', '2-digit', 'short', 'long', 'narrow'][len - 1];\n            return '{month}';\n        // Week\n        case 'w':\n        case 'W':\n            throw new RangeError('`w/W` (week of year) patterns are not supported');\n        case 'd':\n            result.day = ['numeric', '2-digit'][len - 1];\n            return '{day}';\n        case 'D':\n        case 'F':\n        case 'g':\n            result.day = 'numeric';\n            return '{day}';\n        // Weekday\n        case 'E':\n            result.weekday = len === 4 ? 'long' : len === 5 ? 'narrow' : 'short';\n            return '{weekday}';\n        case 'e':\n            result.weekday = [\n                undefined,\n                undefined,\n                'short',\n                'long',\n                'narrow',\n                'short',\n            ][len - 1];\n            return '{weekday}';\n        case 'c':\n            result.weekday = [\n                undefined,\n                undefined,\n                'short',\n                'long',\n                'narrow',\n                'short',\n            ][len - 1];\n            return '{weekday}';\n        // Period\n        case 'a': // AM, PM\n        case 'b': // am, pm, noon, midnight\n        case 'B': // flexible day periods\n            result.hour12 = true;\n            return '{ampm}';\n        // Hour\n        case 'h':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            result.hour12 = true;\n            return '{hour}';\n        case 'H':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            return '{hour}';\n        case 'K':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            result.hour12 = true;\n            return '{hour}';\n        case 'k':\n            result.hour = ['numeric', '2-digit'][len - 1];\n            return '{hour}';\n        case 'j':\n        case 'J':\n        case 'C':\n            throw new RangeError('`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead');\n        // Minute\n        case 'm':\n            result.minute = ['numeric', '2-digit'][len - 1];\n            return '{minute}';\n        // Second\n        case 's':\n            result.second = ['numeric', '2-digit'][len - 1];\n            return '{second}';\n        case 'S':\n        case 'A':\n            result.second = 'numeric';\n            return '{second}';\n        // Zone\n        case 'z': // 1..3, 4: specific non-location format\n        case 'Z': // 1..3, 4, 5: The ISO8601 varios formats\n        case 'O': // 1, 4: miliseconds in day short, long\n        case 'v': // 1, 4: generic non-location format\n        case 'V': // 1, 2, 3, 4: time zone ID or city\n        case 'X': // 1, 2, 3, 4: The ISO8601 varios formats\n        case 'x': // 1, 2, 3, 4: The ISO8601 varios formats\n            result.timeZoneName = len < 4 ? 'short' : 'long';\n            return '{timeZoneName}';\n    }\n    return '';\n}\nfunction skeletonTokenToTable2(c) {\n    switch (c) {\n        // Era\n        case 'G':\n            return 'era';\n        // Year\n        case 'y':\n        case 'Y':\n        case 'u':\n        case 'U':\n        case 'r':\n            return 'year';\n        // Month\n        case 'M':\n        case 'L':\n            return 'month';\n        // Day\n        case 'd':\n        case 'D':\n        case 'F':\n        case 'g':\n            return 'day';\n        // Period\n        case 'a': // AM, PM\n        case 'b': // am, pm, noon, midnight\n        case 'B': // flexible day periods\n            return 'ampm';\n        // Hour\n        case 'h':\n        case 'H':\n        case 'K':\n        case 'k':\n            return 'hour';\n        // Minute\n        case 'm':\n            return 'minute';\n        // Second\n        case 's':\n        case 'S':\n        case 'A':\n            return 'second';\n        default:\n            throw new RangeError('Invalid range pattern token');\n    }\n}\nexport function processDateTimePattern(pattern, result) {\n    var literals = [];\n    // Use skeleton to populate result, but use mapped pattern to populate pattern\n    var pattern12 = pattern\n        // Double apostrophe\n        .replace(/'{2}/g, '{apostrophe}')\n        // Apostrophe-escaped\n        .replace(/'(.*?)'/g, function (_, literal) {\n        literals.push(literal);\n        return \"$$\" + (literals.length - 1) + \"$$\";\n    })\n        .replace(DATE_TIME_REGEX, function (m) { return matchSkeletonPattern(m, result || {}); });\n    //Restore literals\n    if (literals.length) {\n        pattern12 = pattern12\n            .replace(/\\$\\$(\\d+)\\$\\$/g, function (_, i) {\n            return literals[+i];\n        })\n            .replace(/\\{apostrophe\\}/g, \"'\");\n    }\n    // Handle apostrophe-escaped things\n    return [\n        pattern12\n            .replace(/([\\s\\uFEFF\\xA0])\\{ampm\\}([\\s\\uFEFF\\xA0])/, '$1')\n            .replace('{ampm}', '')\n            .replace(expPatternTrimmer, ''),\n        pattern12,\n    ];\n}\n/**\n * Parse Date time skeleton into Intl.DateTimeFormatOptions\n * Ref: https://unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * @public\n * @param skeleton skeleton string\n */\nexport function parseDateTimeSkeleton(skeleton, rawPattern, rangePatterns, intervalFormatFallback) {\n    if (rawPattern === void 0) { rawPattern = skeleton; }\n    var result = {\n        pattern: '',\n        pattern12: '',\n        skeleton: skeleton,\n        rawPattern: rawPattern,\n        rangePatterns: {},\n        rangePatterns12: {},\n    };\n    if (rangePatterns) {\n        for (var k in rangePatterns) {\n            var key = skeletonTokenToTable2(k);\n            var rawPattern_1 = rangePatterns[k];\n            var intervalResult = {\n                patternParts: [],\n            };\n            var _a = processDateTimePattern(rawPattern_1, intervalResult), pattern_1 = _a[0], pattern12_1 = _a[1];\n            result.rangePatterns[key] = __assign(__assign({}, intervalResult), { patternParts: splitRangePattern(pattern_1) });\n            result.rangePatterns12[key] = __assign(__assign({}, intervalResult), { patternParts: splitRangePattern(pattern12_1) });\n        }\n    }\n    else if (intervalFormatFallback) {\n        var patternParts = splitFallbackRangePattern(intervalFormatFallback);\n        result.rangePatterns.default = {\n            patternParts: patternParts,\n        };\n        result.rangePatterns12.default = {\n            patternParts: patternParts,\n        };\n    }\n    // Process skeleton\n    skeleton.replace(DATE_TIME_REGEX, function (m) { return matchSkeletonPattern(m, result); });\n    var _b = processDateTimePattern(rawPattern), pattern = _b[0], pattern12 = _b[1];\n    result.pattern = pattern;\n    result.pattern12 = pattern12;\n    return result;\n}\nexport function splitFallbackRangePattern(pattern) {\n    var parts = pattern.split(/(\\{[0|1]\\})/g).filter(Boolean);\n    return parts.map(function (pattern) {\n        switch (pattern) {\n            case '{0}':\n                return {\n                    source: RangePatternType.startRange,\n                    pattern: pattern,\n                };\n            case '{1}':\n                return {\n                    source: RangePatternType.endRange,\n                    pattern: pattern,\n                };\n            default:\n                return {\n                    source: RangePatternType.shared,\n                    pattern: pattern,\n                };\n        }\n    });\n}\nexport function splitRangePattern(pattern) {\n    var PART_REGEX = /\\{(.*?)\\}/g;\n    // Map of part and index within the string\n    var parts = {};\n    var match;\n    var splitIndex = 0;\n    while ((match = PART_REGEX.exec(pattern))) {\n        if (!(match[0] in parts)) {\n            parts[match[0]] = match.index;\n        }\n        else {\n            splitIndex = match.index;\n            break;\n        }\n    }\n    if (!splitIndex) {\n        return [\n            {\n                source: RangePatternType.startRange,\n                pattern: pattern,\n            },\n        ];\n    }\n    return [\n        {\n            source: RangePatternType.startRange,\n            pattern: pattern.slice(0, splitIndex),\n        },\n        {\n            source: RangePatternType.endRange,\n            pattern: pattern.slice(splitIndex),\n        },\n    ];\n}\n","import { __assign } from \"tslib\";\nimport { invariant } from '../utils';\nimport { DATE_TIME_PROPS, removalPenalty, additionPenalty, differentNumericTypePenalty, longMorePenalty, shortMorePenalty, shortLessPenalty, longLessPenalty, } from './utils';\nimport { processDateTimePattern } from './skeleton';\nfunction isNumericType(t) {\n    return t === 'numeric' || t === '2-digit';\n}\n/**\n * Credit: https://github.com/andyearnshaw/Intl.js/blob/0958dc1ad8153f1056653ea22b8208f0df289a4e/src/12.datetimeformat.js#L611\n * with some modifications\n * @param options\n * @param format\n */\nexport function bestFitFormatMatcherScore(options, format) {\n    var score = 0;\n    if (options.hour12 && !format.hour12) {\n        score -= removalPenalty;\n    }\n    else if (!options.hour12 && format.hour12) {\n        score -= additionPenalty;\n    }\n    for (var _i = 0, DATE_TIME_PROPS_1 = DATE_TIME_PROPS; _i < DATE_TIME_PROPS_1.length; _i++) {\n        var prop = DATE_TIME_PROPS_1[_i];\n        var optionsProp = options[prop];\n        var formatProp = format[prop];\n        if (optionsProp === undefined && formatProp !== undefined) {\n            score -= additionPenalty;\n        }\n        else if (optionsProp !== undefined && formatProp === undefined) {\n            score -= removalPenalty;\n        }\n        else if (optionsProp !== formatProp) {\n            // extra penalty for numeric vs non-numeric\n            if (isNumericType(optionsProp) !==\n                isNumericType(formatProp)) {\n                score -= differentNumericTypePenalty;\n            }\n            else {\n                var values = ['2-digit', 'numeric', 'narrow', 'short', 'long'];\n                var optionsPropIndex = values.indexOf(optionsProp);\n                var formatPropIndex = values.indexOf(formatProp);\n                var delta = Math.max(-2, Math.min(formatPropIndex - optionsPropIndex, 2));\n                if (delta === 2) {\n                    score -= longMorePenalty;\n                }\n                else if (delta === 1) {\n                    score -= shortMorePenalty;\n                }\n                else if (delta === -1) {\n                    score -= shortLessPenalty;\n                }\n                else if (delta === -2) {\n                    score -= longLessPenalty;\n                }\n            }\n        }\n    }\n    return score;\n}\n/**\n * https://tc39.es/ecma402/#sec-bestfitformatmatcher\n * Just alias to basic for now\n * @param options\n * @param formats\n * @param implDetails Implementation details\n */\nexport function BestFitFormatMatcher(options, formats) {\n    var bestScore = -Infinity;\n    var bestFormat = formats[0];\n    invariant(Array.isArray(formats), 'formats should be a list of things');\n    for (var _i = 0, formats_1 = formats; _i < formats_1.length; _i++) {\n        var format = formats_1[_i];\n        var score = bestFitFormatMatcherScore(options, format);\n        if (score > bestScore) {\n            bestScore = score;\n            bestFormat = format;\n        }\n    }\n    var skeletonFormat = __assign({}, bestFormat);\n    var patternFormat = { rawPattern: bestFormat.rawPattern };\n    processDateTimePattern(bestFormat.rawPattern, patternFormat);\n    // Kinda following https://github.com/unicode-org/icu/blob/dd50e38f459d84e9bf1b0c618be8483d318458ad/icu4j/main/classes/core/src/com/ibm/icu/text/DateTimePatternGenerator.java\n    // Method adjustFieldTypes\n    for (var prop in skeletonFormat) {\n        var skeletonValue = skeletonFormat[prop];\n        var patternValue = patternFormat[prop];\n        var requestedValue = options[prop];\n        // Don't mess with minute/second or we can get in the situation of\n        // 7:0:0 which is weird\n        if (prop === 'minute' || prop === 'second') {\n            continue;\n        }\n        // Nothing to do here\n        if (!requestedValue) {\n            continue;\n        }\n        // https://unicode.org/reports/tr35/tr35-dates.html#Matching_Skeletons\n        // Looks like we should not convert numeric to alphabetic but the other way\n        // around is ok\n        if (isNumericType(patternValue) &&\n            !isNumericType(requestedValue)) {\n            continue;\n        }\n        if (skeletonValue === requestedValue) {\n            continue;\n        }\n        patternFormat[prop] = requestedValue;\n    }\n    // Copy those over\n    patternFormat.pattern = skeletonFormat.pattern;\n    patternFormat.pattern12 = skeletonFormat.pattern12;\n    patternFormat.skeleton = skeletonFormat.skeleton;\n    patternFormat.rangePatterns = skeletonFormat.rangePatterns;\n    patternFormat.rangePatterns12 = skeletonFormat.rangePatterns12;\n    return patternFormat;\n}\n","/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-canonicalizelocalelist\n * @param locales\n */\nexport function CanonicalizeLocaleList(locales) {\n    // TODO\n    return Intl.getCanonicalLocales(locales);\n}\n","/**\n * https://tc39.es/ecma402/#sec-canonicalizetimezonename\n * @param tz\n */\nexport function CanonicalizeTimeZoneName(tz, _a) {\n    var tzData = _a.tzData, uppercaseLinks = _a.uppercaseLinks;\n    var uppercasedTz = tz.toUpperCase();\n    var uppercasedZones = Object.keys(tzData).reduce(function (all, z) {\n        all[z.toUpperCase()] = z;\n        return all;\n    }, {});\n    var ianaTimeZone = uppercaseLinks[uppercasedTz] || uppercasedZones[uppercasedTz];\n    if (ianaTimeZone === 'Etc/UTC' || ianaTimeZone === 'Etc/GMT') {\n        return 'UTC';\n    }\n    return ianaTimeZone;\n}\n","/**\n * https://tc39.es/ecma262/#sec-tostring\n */\nexport function ToString(o) {\n    // Only symbol is irregular...\n    if (typeof o === 'symbol') {\n        throw TypeError('Cannot convert a Symbol value to a string');\n    }\n    return String(o);\n}\n/**\n * https://tc39.es/ecma262/#sec-tonumber\n * @param val\n */\nexport function ToNumber(val) {\n    if (val === undefined) {\n        return NaN;\n    }\n    if (val === null) {\n        return +0;\n    }\n    if (typeof val === 'boolean') {\n        return val ? 1 : +0;\n    }\n    if (typeof val === 'number') {\n        return val;\n    }\n    if (typeof val === 'symbol' || typeof val === 'bigint') {\n        throw new TypeError('Cannot convert symbol/bigint to number');\n    }\n    return Number(val);\n}\n/**\n * https://tc39.es/ecma262/#sec-tointeger\n * @param n\n */\nfunction ToInteger(n) {\n    var number = ToNumber(n);\n    if (isNaN(number) || SameValue(number, -0)) {\n        return 0;\n    }\n    if (isFinite(number)) {\n        return number;\n    }\n    var integer = Math.floor(Math.abs(number));\n    if (number < 0) {\n        integer = -integer;\n    }\n    if (SameValue(integer, -0)) {\n        return 0;\n    }\n    return integer;\n}\n/**\n * https://tc39.es/ecma262/#sec-timeclip\n * @param time\n */\nexport function TimeClip(time) {\n    if (!isFinite(time)) {\n        return NaN;\n    }\n    if (Math.abs(time) > 8.64 * 1e15) {\n        return NaN;\n    }\n    return ToInteger(time);\n}\n/**\n * https://tc39.es/ecma262/#sec-toobject\n * @param arg\n */\nexport function ToObject(arg) {\n    if (arg == null) {\n        throw new TypeError('undefined/null cannot be converted to object');\n    }\n    return Object(arg);\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-samevalue\n * @param x\n * @param y\n */\nexport function SameValue(x, y) {\n    if (Object.is) {\n        return Object.is(x, y);\n    }\n    // SameValue algorithm\n    if (x === y) {\n        // Steps 1-5, 7-10\n        // Steps 6.b-6.e: +0 != -0\n        return x !== 0 || 1 / x === 1 / y;\n    }\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-arraycreate\n * @param len\n */\nexport function ArrayCreate(len) {\n    return new Array(len);\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-hasownproperty\n * @param o\n * @param prop\n */\nexport function HasOwnProperty(o, prop) {\n    return Object.prototype.hasOwnProperty.call(o, prop);\n}\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#sec-type\n * @param x\n */\nexport function Type(x) {\n    if (x === null) {\n        return 'Null';\n    }\n    if (typeof x === 'undefined') {\n        return 'Undefined';\n    }\n    if (typeof x === 'function' || typeof x === 'object') {\n        return 'Object';\n    }\n    if (typeof x === 'number') {\n        return 'Number';\n    }\n    if (typeof x === 'boolean') {\n        return 'Boolean';\n    }\n    if (typeof x === 'string') {\n        return 'String';\n    }\n    if (typeof x === 'symbol') {\n        return 'Symbol';\n    }\n    if (typeof x === 'bigint') {\n        return 'BigInt';\n    }\n}\nvar MS_PER_DAY = 86400000;\n/**\n * https://www.ecma-international.org/ecma-262/11.0/index.html#eqn-modulo\n * @param x\n * @param y\n * @return k of the same sign as y\n */\nfunction mod(x, y) {\n    return x - Math.floor(x / y) * y;\n}\n/**\n * https://tc39.es/ecma262/#eqn-Day\n * @param t\n */\nexport function Day(t) {\n    return Math.floor(t / MS_PER_DAY);\n}\n/**\n * https://tc39.es/ecma262/#sec-week-day\n * @param t\n */\nexport function WeekDay(t) {\n    return mod(Day(t) + 4, 7);\n}\n/**\n * https://tc39.es/ecma262/#sec-year-number\n * @param y\n */\nexport function DayFromYear(y) {\n    return Date.UTC(y, 0) / MS_PER_DAY;\n}\n/**\n * https://tc39.es/ecma262/#sec-year-number\n * @param y\n */\nexport function TimeFromYear(y) {\n    return Date.UTC(y, 0);\n}\n/**\n * https://tc39.es/ecma262/#sec-year-number\n * @param t\n */\nexport function YearFromTime(t) {\n    return new Date(t).getUTCFullYear();\n}\nexport function DaysInYear(y) {\n    if (y % 4 !== 0) {\n        return 365;\n    }\n    if (y % 100 !== 0) {\n        return 366;\n    }\n    if (y % 400 !== 0) {\n        return 365;\n    }\n    return 366;\n}\nexport function DayWithinYear(t) {\n    return Day(t) - DayFromYear(YearFromTime(t));\n}\nexport function InLeapYear(t) {\n    return DaysInYear(YearFromTime(t)) === 365 ? 0 : 1;\n}\n/**\n * https://tc39.es/ecma262/#sec-month-number\n * @param t\n */\nexport function MonthFromTime(t) {\n    var dwy = DayWithinYear(t);\n    var leap = InLeapYear(t);\n    if (dwy >= 0 && dwy < 31) {\n        return 0;\n    }\n    if (dwy < 59 + leap) {\n        return 1;\n    }\n    if (dwy < 90 + leap) {\n        return 2;\n    }\n    if (dwy < 120 + leap) {\n        return 3;\n    }\n    if (dwy < 151 + leap) {\n        return 4;\n    }\n    if (dwy < 181 + leap) {\n        return 5;\n    }\n    if (dwy < 212 + leap) {\n        return 6;\n    }\n    if (dwy < 243 + leap) {\n        return 7;\n    }\n    if (dwy < 273 + leap) {\n        return 8;\n    }\n    if (dwy < 304 + leap) {\n        return 9;\n    }\n    if (dwy < 334 + leap) {\n        return 10;\n    }\n    if (dwy < 365 + leap) {\n        return 11;\n    }\n    throw new Error('Invalid time');\n}\nexport function DateFromTime(t) {\n    var dwy = DayWithinYear(t);\n    var mft = MonthFromTime(t);\n    var leap = InLeapYear(t);\n    if (mft === 0) {\n        return dwy + 1;\n    }\n    if (mft === 1) {\n        return dwy - 30;\n    }\n    if (mft === 2) {\n        return dwy - 58 - leap;\n    }\n    if (mft === 3) {\n        return dwy - 89 - leap;\n    }\n    if (mft === 4) {\n        return dwy - 119 - leap;\n    }\n    if (mft === 5) {\n        return dwy - 150 - leap;\n    }\n    if (mft === 6) {\n        return dwy - 180 - leap;\n    }\n    if (mft === 7) {\n        return dwy - 211 - leap;\n    }\n    if (mft === 8) {\n        return dwy - 242 - leap;\n    }\n    if (mft === 9) {\n        return dwy - 272 - leap;\n    }\n    if (mft === 10) {\n        return dwy - 303 - leap;\n    }\n    if (mft === 11) {\n        return dwy - 333 - leap;\n    }\n    throw new Error('Invalid time');\n}\nvar HOURS_PER_DAY = 24;\nvar MINUTES_PER_HOUR = 60;\nvar SECONDS_PER_MINUTE = 60;\nvar MS_PER_SECOND = 1e3;\nvar MS_PER_MINUTE = MS_PER_SECOND * SECONDS_PER_MINUTE;\nvar MS_PER_HOUR = MS_PER_MINUTE * MINUTES_PER_HOUR;\nexport function HourFromTime(t) {\n    return mod(Math.floor(t / MS_PER_HOUR), HOURS_PER_DAY);\n}\nexport function MinFromTime(t) {\n    return mod(Math.floor(t / MS_PER_MINUTE), MINUTES_PER_HOUR);\n}\nexport function SecFromTime(t) {\n    return mod(Math.floor(t / MS_PER_SECOND), SECONDS_PER_MINUTE);\n}\nfunction IsCallable(fn) {\n    return typeof fn === 'function';\n}\n/**\n * The abstract operation OrdinaryHasInstance implements\n * the default algorithm for determining if an object O\n * inherits from the instance object inheritance path\n * provided by constructor C.\n * @param C class\n * @param O object\n * @param internalSlots internalSlots\n */\nexport function OrdinaryHasInstance(C, O, internalSlots) {\n    if (!IsCallable(C)) {\n        return false;\n    }\n    if (internalSlots === null || internalSlots === void 0 ? void 0 : internalSlots.boundTargetFunction) {\n        var BC = internalSlots === null || internalSlots === void 0 ? void 0 : internalSlots.boundTargetFunction;\n        return O instanceof BC;\n    }\n    if (typeof O !== 'object') {\n        return false;\n    }\n    var P = C.prototype;\n    if (typeof P !== 'object') {\n        throw new TypeError('OrdinaryHasInstance called on an object with an invalid prototype property.');\n    }\n    return Object.prototype.isPrototypeOf.call(P, O);\n}\nexport function msFromTime(t) {\n    return mod(t, MS_PER_SECOND);\n}\n","import { ToObject } from './262';\n/**\n * https://tc39.es/ecma402/#sec-coerceoptionstoobject\n * @param options\n * @returns\n */\nexport function CoerceOptionsToObject(options) {\n    if (typeof options === 'undefined') {\n        return Object.create(null);\n    }\n    return ToObject(options);\n}\n","import { __assign } from \"tslib\";\nimport { invariant } from '../utils';\nimport { DATE_TIME_PROPS, additionPenalty, removalPenalty, longMorePenalty, shortMorePenalty, shortLessPenalty, longLessPenalty, } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-basicformatmatcher\n * @param options\n * @param formats\n */\nexport function BasicFormatMatcher(options, formats) {\n    var bestScore = -Infinity;\n    var bestFormat = formats[0];\n    invariant(Array.isArray(formats), 'formats should be a list of things');\n    for (var _i = 0, formats_1 = formats; _i < formats_1.length; _i++) {\n        var format = formats_1[_i];\n        var score = 0;\n        for (var _a = 0, DATE_TIME_PROPS_1 = DATE_TIME_PROPS; _a < DATE_TIME_PROPS_1.length; _a++) {\n            var prop = DATE_TIME_PROPS_1[_a];\n            var optionsProp = options[prop];\n            var formatProp = format[prop];\n            if (optionsProp === undefined && formatProp !== undefined) {\n                score -= additionPenalty;\n            }\n            else if (optionsProp !== undefined && formatProp === undefined) {\n                score -= removalPenalty;\n            }\n            else if (optionsProp !== formatProp) {\n                var values = void 0;\n                if (prop === 'fractionalSecondDigits') {\n                    values = [1, 2, 3];\n                }\n                else {\n                    values = ['2-digit', 'numeric', 'narrow', 'short', 'long'];\n                }\n                var optionsPropIndex = values.indexOf(optionsProp);\n                var formatPropIndex = values.indexOf(formatProp);\n                var delta = Math.max(-2, Math.min(formatPropIndex - optionsPropIndex, 2));\n                if (delta === 2) {\n                    score -= longMorePenalty;\n                }\n                else if (delta === 1) {\n                    score -= shortMorePenalty;\n                }\n                else if (delta === -1) {\n                    score -= shortLessPenalty;\n                }\n                else if (delta === -2) {\n                    score -= longLessPenalty;\n                }\n            }\n        }\n        if (score > bestScore) {\n            bestScore = score;\n            bestFormat = format;\n        }\n    }\n    return __assign({}, bestFormat);\n}\n","import { invariant } from '../utils';\nexport function DateTimeStyleFormat(dateStyle, timeStyle, dataLocaleData) {\n    var dateFormat, timeFormat;\n    if (timeStyle !== undefined) {\n        invariant(timeStyle === 'full' ||\n            timeStyle === 'long' ||\n            timeStyle === 'medium' ||\n            timeStyle === 'short', 'invalid timeStyle');\n        timeFormat = dataLocaleData.timeFormat[timeStyle];\n    }\n    if (dateStyle !== undefined) {\n        invariant(dateStyle === 'full' ||\n            dateStyle === 'long' ||\n            dateStyle === 'medium' ||\n            dateStyle === 'short', 'invalid dateStyle');\n        dateFormat = dataLocaleData.dateFormat[dateStyle];\n    }\n    if (dateStyle !== undefined && timeStyle !== undefined) {\n        var format = {};\n        for (var field in dateFormat) {\n            if (field !== 'pattern') {\n                // @ts-ignore\n                format[field] = dateFormat[field];\n            }\n        }\n        for (var field in timeFormat) {\n            if (field !== 'pattern' && field !== 'pattern12') {\n                // @ts-ignore\n                format[field] = timeFormat[field];\n            }\n        }\n        var connector = dataLocaleData.dateTimeFormat[dateStyle];\n        var pattern = connector\n            .replace('{0}', timeFormat.pattern)\n            .replace('{1}', dateFormat.pattern);\n        format.pattern = pattern;\n        if ('pattern12' in timeFormat) {\n            var pattern12 = connector\n                .replace('{0}', timeFormat.pattern12)\n                .replace('{1}', dateFormat.pattern);\n            format.pattern12 = pattern12;\n        }\n        return format;\n    }\n    if (timeStyle !== undefined) {\n        return timeFormat;\n    }\n    invariant(dateStyle !== undefined, 'dateStyle should not be undefined');\n    return dateFormat;\n}\n","import { invariant } from '../utils';\nimport { Type, YearFromTime, WeekDay, MonthFromTime, DateFromTime, HourFromTime, MinFromTime, SecFromTime, msFromTime, } from '../262';\nfunction getApplicableZoneData(t, timeZone, tzData) {\n    var _a;\n    var zoneData = tzData[timeZone];\n    // We don't have data for this so just say it's UTC\n    if (!zoneData) {\n        return [0, false];\n    }\n    var i = 0;\n    var offset = 0;\n    var dst = false;\n    for (; i <= zoneData.length; i++) {\n        if (i === zoneData.length || zoneData[i][0] * 1e3 > t) {\n            ;\n            _a = zoneData[i - 1], offset = _a[2], dst = _a[3];\n            break;\n        }\n    }\n    return [offset * 1e3, dst];\n}\n/**\n * https://tc39.es/ecma402/#sec-tolocaltime\n * @param t\n * @param calendar\n * @param timeZone\n */\nexport function ToLocalTime(t, calendar, timeZone, _a) {\n    var tzData = _a.tzData;\n    invariant(Type(t) === 'Number', 'invalid time');\n    invariant(calendar === 'gregory', 'We only support Gregory calendar right now');\n    var _b = getApplicableZoneData(t, timeZone, tzData), timeZoneOffset = _b[0], inDST = _b[1];\n    var tz = t + timeZoneOffset;\n    var year = YearFromTime(tz);\n    return {\n        weekday: WeekDay(tz),\n        era: year < 0 ? 'BC' : 'AD',\n        year: year,\n        relatedYear: undefined,\n        yearName: undefined,\n        month: MonthFromTime(tz),\n        day: DateFromTime(tz),\n        hour: HourFromTime(tz),\n        minute: MinFromTime(tz),\n        second: SecFromTime(tz),\n        millisecond: msFromTime(tz),\n        inDST: inDST,\n        // IMPORTANT: Not in spec\n        timeZoneOffset: timeZoneOffset,\n    };\n}\n","import { DATE_TIME_PROPS } from './utils';\nimport { ToLocalTime } from './ToLocalTime';\nimport { TimeClip } from '../262';\nfunction pad(n) {\n    if (n < 10) {\n        return \"0\" + n;\n    }\n    return String(n);\n}\nfunction offsetToGmtString(gmtFormat, hourFormat, offsetInMs, style) {\n    var offsetInMinutes = Math.floor(offsetInMs / 60000);\n    var mins = Math.abs(offsetInMinutes) % 60;\n    var hours = Math.floor(Math.abs(offsetInMinutes) / 60);\n    var _a = hourFormat.split(';'), positivePattern = _a[0], negativePattern = _a[1];\n    var offsetStr = '';\n    var pattern = offsetInMs < 0 ? negativePattern : positivePattern;\n    if (style === 'long') {\n        offsetStr = pattern\n            .replace('HH', pad(hours))\n            .replace('H', String(hours))\n            .replace('mm', pad(mins))\n            .replace('m', String(mins));\n    }\n    else if (mins || hours) {\n        if (!mins) {\n            pattern = pattern.replace(/:?m+/, '');\n        }\n        offsetStr = pattern.replace(/H+/, String(hours)).replace(/m+/, String(mins));\n    }\n    return gmtFormat.replace('{0}', offsetStr);\n}\n/**\n * https://tc39.es/ecma402/#sec-partitiondatetimepattern\n * @param dtf\n * @param x\n */\nexport function FormatDateTimePattern(dtf, patternParts, x, _a) {\n    var getInternalSlots = _a.getInternalSlots, localeData = _a.localeData, getDefaultTimeZone = _a.getDefaultTimeZone, tzData = _a.tzData;\n    x = TimeClip(x);\n    /** IMPL START */\n    var internalSlots = getInternalSlots(dtf);\n    var dataLocale = internalSlots.dataLocale;\n    var dataLocaleData = localeData[dataLocale];\n    /** IMPL END */\n    var locale = internalSlots.locale;\n    var nfOptions = Object.create(null);\n    nfOptions.useGrouping = false;\n    var nf = new Intl.NumberFormat(locale, nfOptions);\n    var nf2Options = Object.create(null);\n    nf2Options.minimumIntegerDigits = 2;\n    nf2Options.useGrouping = false;\n    var nf2 = new Intl.NumberFormat(locale, nf2Options);\n    var fractionalSecondDigits = internalSlots.fractionalSecondDigits;\n    var nf3;\n    if (fractionalSecondDigits !== undefined) {\n        var nf3Options = Object.create(null);\n        nf3Options.minimumIntegerDigits = fractionalSecondDigits;\n        nf3Options.useGrouping = false;\n        nf3 = new Intl.NumberFormat(locale, nf3Options);\n    }\n    var tm = ToLocalTime(x, \n    // @ts-ignore\n    internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n    var result = [];\n    for (var _i = 0, patternParts_1 = patternParts; _i < patternParts_1.length; _i++) {\n        var patternPart = patternParts_1[_i];\n        var p = patternPart.type;\n        if (p === 'literal') {\n            result.push({\n                type: 'literal',\n                value: patternPart.value,\n            });\n        }\n        else if (p === 'fractionalSecondDigits') {\n            var v = Math.floor(tm.millisecond * Math.pow(10, ((fractionalSecondDigits || 0) - 3)));\n            result.push({\n                // @ts-expect-error Spec is not there yet\n                type: 'fractionalSecond',\n                value: nf3.format(v),\n            });\n        }\n        else if (DATE_TIME_PROPS.indexOf(p) > -1) {\n            var fv = '';\n            var f = internalSlots[p];\n            // @ts-ignore\n            var v = tm[p];\n            if (p === 'year' && v <= 0) {\n                v = 1 - v;\n            }\n            if (p === 'month') {\n                v++;\n            }\n            var hourCycle = internalSlots.hourCycle;\n            if (p === 'hour' && (hourCycle === 'h11' || hourCycle === 'h12')) {\n                v = v % 12;\n                if (v === 0 && hourCycle === 'h12') {\n                    v = 12;\n                }\n            }\n            if (p === 'hour' && hourCycle === 'h24') {\n                if (v === 0) {\n                    v = 24;\n                }\n            }\n            if (f === 'numeric') {\n                fv = nf.format(v);\n            }\n            else if (f === '2-digit') {\n                fv = nf2.format(v);\n                if (fv.length > 2) {\n                    fv = fv.slice(fv.length - 2, fv.length);\n                }\n            }\n            else if (f === 'narrow' || f === 'short' || f === 'long') {\n                if (p === 'era') {\n                    fv = dataLocaleData[p][f][v];\n                }\n                else if (p === 'timeZoneName') {\n                    var timeZoneName = dataLocaleData.timeZoneName, gmtFormat = dataLocaleData.gmtFormat, hourFormat = dataLocaleData.hourFormat;\n                    var timeZone = internalSlots.timeZone || getDefaultTimeZone();\n                    var timeZoneData = timeZoneName[timeZone];\n                    if (timeZoneData && timeZoneData[f]) {\n                        fv = timeZoneData[f][+tm.inDST];\n                    }\n                    else {\n                        // Fallback to gmtFormat\n                        fv = offsetToGmtString(gmtFormat, hourFormat, tm.timeZoneOffset, f);\n                    }\n                }\n                else if (p === 'month') {\n                    fv = dataLocaleData.month[f][v - 1];\n                }\n                else {\n                    fv = dataLocaleData[p][f][v];\n                }\n            }\n            result.push({\n                type: p,\n                value: fv,\n            });\n        }\n        else if (p === 'ampm') {\n            var v = tm.hour;\n            var fv = void 0;\n            if (v > 11) {\n                fv = dataLocaleData.pm;\n            }\n            else {\n                fv = dataLocaleData.am;\n            }\n            result.push({\n                type: 'dayPeriod',\n                value: fv,\n            });\n        }\n        else if (p === 'relatedYear') {\n            var v = tm.relatedYear;\n            // @ts-ignore\n            var fv = nf.format(v);\n            result.push({\n                // @ts-ignore TODO: Fix TS type\n                type: 'relatedYear',\n                value: fv,\n            });\n        }\n        else if (p === 'yearName') {\n            var v = tm.yearName;\n            // @ts-ignore\n            var fv = nf.format(v);\n            result.push({\n                // @ts-ignore TODO: Fix TS type\n                type: 'yearName',\n                value: fv,\n            });\n        }\n    }\n    return result;\n}\n","import { invariant } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-partitionpattern\n * @param pattern\n */\nexport function PartitionPattern(pattern) {\n    var result = [];\n    var beginIndex = pattern.indexOf('{');\n    var endIndex = 0;\n    var nextIndex = 0;\n    var length = pattern.length;\n    while (beginIndex < pattern.length && beginIndex > -1) {\n        endIndex = pattern.indexOf('}', beginIndex);\n        invariant(endIndex > beginIndex, \"Invalid pattern \" + pattern);\n        if (beginIndex > nextIndex) {\n            result.push({\n                type: 'literal',\n                value: pattern.substring(nextIndex, beginIndex),\n            });\n        }\n        result.push({\n            type: pattern.substring(beginIndex + 1, endIndex),\n            value: undefined,\n        });\n        nextIndex = endIndex + 1;\n        beginIndex = pattern.indexOf('{', nextIndex);\n    }\n    if (nextIndex < length) {\n        result.push({\n            type: 'literal',\n            value: pattern.substring(nextIndex, length),\n        });\n    }\n    return result;\n}\n","import { TimeClip } from '../262';\nimport { FormatDateTimePattern, } from './FormatDateTimePattern';\nimport { PartitionPattern } from '../PartitionPattern';\n/**\n * https://tc39.es/ecma402/#sec-partitiondatetimepattern\n * @param dtf\n * @param x\n */\nexport function PartitionDateTimePattern(dtf, x, implDetails) {\n    x = TimeClip(x);\n    if (isNaN(x)) {\n        throw new RangeError('invalid time');\n    }\n    /** IMPL START */\n    var getInternalSlots = implDetails.getInternalSlots;\n    var internalSlots = getInternalSlots(dtf);\n    /** IMPL END */\n    var pattern = internalSlots.pattern;\n    return FormatDateTimePattern(dtf, PartitionPattern(pattern), x, implDetails);\n}\n","import { PartitionDateTimePattern } from './PartitionDateTimePattern';\n/**\n * https://tc39.es/ecma402/#sec-formatdatetime\n * @param dtf DateTimeFormat\n * @param x\n */\nexport function FormatDateTime(dtf, x, implDetails) {\n    var parts = PartitionDateTimePattern(dtf, x, implDetails);\n    var result = '';\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result += part.value;\n    }\n    return result;\n}\n","import { RangePatternType, } from '../types/date-time';\nimport { SameValue, TimeClip } from '../262';\nimport { ToLocalTime } from './ToLocalTime';\nimport { FormatDateTimePattern, } from './FormatDateTimePattern';\nimport { PartitionPattern } from '../PartitionPattern';\nvar TABLE_2_FIELDS = [\n    'era',\n    'year',\n    'month',\n    'day',\n    'ampm',\n    'hour',\n    'minute',\n    'second',\n    'fractionalSecondDigits',\n];\nexport function PartitionDateTimeRangePattern(dtf, x, y, implDetails) {\n    x = TimeClip(x);\n    if (isNaN(x)) {\n        throw new RangeError('Invalid start time');\n    }\n    y = TimeClip(y);\n    if (isNaN(y)) {\n        throw new RangeError('Invalid end time');\n    }\n    /** IMPL START */\n    var getInternalSlots = implDetails.getInternalSlots, tzData = implDetails.tzData;\n    var internalSlots = getInternalSlots(dtf);\n    /** IMPL END */\n    var tm1 = ToLocalTime(x, \n    // @ts-ignore\n    internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n    var tm2 = ToLocalTime(y, \n    // @ts-ignore\n    internalSlots.calendar, internalSlots.timeZone, { tzData: tzData });\n    var pattern = internalSlots.pattern, rangePatterns = internalSlots.rangePatterns;\n    var rangePattern;\n    var dateFieldsPracticallyEqual = true;\n    var patternContainsLargerDateField = false;\n    for (var _i = 0, TABLE_2_FIELDS_1 = TABLE_2_FIELDS; _i < TABLE_2_FIELDS_1.length; _i++) {\n        var fieldName = TABLE_2_FIELDS_1[_i];\n        if (dateFieldsPracticallyEqual && !patternContainsLargerDateField) {\n            if (fieldName === 'ampm') {\n                var rp = rangePatterns.ampm;\n                if (rangePattern !== undefined && rp === undefined) {\n                    patternContainsLargerDateField = true;\n                }\n                else {\n                    var v1 = tm1.hour;\n                    var v2 = tm2.hour;\n                    if ((v1 > 11 && v2 < 11) || (v1 < 11 && v2 > 11)) {\n                        dateFieldsPracticallyEqual = false;\n                    }\n                    rangePattern = rp;\n                }\n            }\n            else if (fieldName === 'fractionalSecondDigits') {\n                var fractionalSecondDigits = internalSlots.fractionalSecondDigits;\n                if (fractionalSecondDigits === undefined) {\n                    fractionalSecondDigits = 3;\n                }\n                var v1 = Math.floor(tm1.millisecond * Math.pow(10, (fractionalSecondDigits - 3)));\n                var v2 = Math.floor(tm2.millisecond * Math.pow(10, (fractionalSecondDigits - 3)));\n                if (v1 !== v2) {\n                    dateFieldsPracticallyEqual = false;\n                }\n            }\n            else {\n                var rp = rangePatterns[fieldName];\n                if (rangePattern !== undefined && rp === undefined) {\n                    patternContainsLargerDateField = true;\n                }\n                else {\n                    var v1 = tm1[fieldName];\n                    var v2 = tm2[fieldName];\n                    if (!SameValue(v1, v2)) {\n                        dateFieldsPracticallyEqual = false;\n                    }\n                    rangePattern = rp;\n                }\n            }\n        }\n    }\n    if (dateFieldsPracticallyEqual) {\n        var result_2 = FormatDateTimePattern(dtf, PartitionPattern(pattern), x, implDetails);\n        for (var _a = 0, result_1 = result_2; _a < result_1.length; _a++) {\n            var r = result_1[_a];\n            r.source = RangePatternType.shared;\n        }\n        return result_2;\n    }\n    var result = [];\n    if (rangePattern === undefined) {\n        rangePattern = rangePatterns.default;\n        /** IMPL DETAILS */\n        // Now we have to replace {0} & {1} with actual pattern\n        for (var _b = 0, _c = rangePattern.patternParts; _b < _c.length; _b++) {\n            var patternPart = _c[_b];\n            if (patternPart.pattern === '{0}' || patternPart.pattern === '{1}') {\n                patternPart.pattern = pattern;\n            }\n        }\n    }\n    for (var _d = 0, _e = rangePattern.patternParts; _d < _e.length; _d++) {\n        var rangePatternPart = _e[_d];\n        var source = rangePatternPart.source, pattern_1 = rangePatternPart.pattern;\n        var z = void 0;\n        if (source === RangePatternType.startRange ||\n            source === RangePatternType.shared) {\n            z = x;\n        }\n        else {\n            z = y;\n        }\n        var patternParts = PartitionPattern(pattern_1);\n        var partResult = FormatDateTimePattern(dtf, patternParts, z, implDetails);\n        for (var _f = 0, partResult_1 = partResult; _f < partResult_1.length; _f++) {\n            var r = partResult_1[_f];\n            r.source = source;\n        }\n        result = result.concat(partResult);\n    }\n    return result;\n}\n","import { PartitionDateTimeRangePattern } from './PartitionDateTimeRangePattern';\nexport function FormatDateTimeRange(dtf, x, y, implDetails) {\n    var parts = PartitionDateTimeRangePattern(dtf, x, y, implDetails);\n    var result = '';\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result += part.value;\n    }\n    return result;\n}\n","import { PartitionDateTimeRangePattern } from './PartitionDateTimeRangePattern';\nexport function FormatDateTimeRangeToParts(dtf, x, y, implDetails) {\n    var parts = PartitionDateTimeRangePattern(dtf, x, y, implDetails);\n    var result = new Array(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result.push({\n            type: part.type,\n            value: part.value,\n            source: part.source,\n        });\n    }\n    return result;\n}\n","import { PartitionDateTimePattern } from './PartitionDateTimePattern';\nimport { ArrayCreate } from '../262';\n/**\n * https://tc39.es/ecma402/#sec-formatdatetimetoparts\n *\n * @param dtf\n * @param x\n * @param implDetails\n */\nexport function FormatDateTimeToParts(dtf, x, implDetails) {\n    var parts = PartitionDateTimePattern(dtf, x, implDetails);\n    var result = ArrayCreate(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result.push({\n            type: part.type,\n            value: part.value,\n        });\n    }\n    return result;\n}\n","import { ToObject } from '../262';\n/**\n * https://tc39.es/ecma402/#sec-todatetimeoptions\n * @param options\n * @param required\n * @param defaults\n */\nexport function ToDateTimeOptions(options, required, defaults) {\n    if (options === undefined) {\n        options = null;\n    }\n    else {\n        options = ToObject(options);\n    }\n    options = Object.create(options);\n    var needDefaults = true;\n    if (required === 'date' || required === 'any') {\n        for (var _i = 0, _a = ['weekday', 'year', 'month', 'day']; _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var value = options[prop];\n            if (value !== undefined) {\n                needDefaults = false;\n            }\n        }\n    }\n    if (required === 'time' || required === 'any') {\n        for (var _b = 0, _c = [\n            'dayPeriod',\n            'hour',\n            'minute',\n            'second',\n            'fractionalSecondDigits',\n        ]; _b < _c.length; _b++) {\n            var prop = _c[_b];\n            var value = options[prop];\n            if (value !== undefined) {\n                needDefaults = false;\n            }\n        }\n    }\n    if (options.dateStyle !== undefined || options.timeStyle !== undefined) {\n        needDefaults = false;\n    }\n    if (required === 'date' && options.timeStyle) {\n        throw new TypeError('Intl.DateTimeFormat date was required but timeStyle was included');\n    }\n    if (required === 'time' && options.dateStyle) {\n        throw new TypeError('Intl.DateTimeFormat time was required but dateStyle was included');\n    }\n    if (needDefaults && (defaults === 'date' || defaults === 'all')) {\n        for (var _d = 0, _e = ['year', 'month', 'day']; _d < _e.length; _d++) {\n            var prop = _e[_d];\n            options[prop] = 'numeric';\n        }\n    }\n    if (needDefaults && (defaults === 'time' || defaults === 'all')) {\n        for (var _f = 0, _g = ['hour', 'minute', 'second']; _f < _g.length; _f++) {\n            var prop = _g[_f];\n            options[prop] = 'numeric';\n        }\n    }\n    return options;\n}\n","import { ToString } from './262';\n/**\n * https://tc39.es/ecma402/#sec-getoption\n * @param opts\n * @param prop\n * @param type\n * @param values\n * @param fallback\n */\nexport function GetOption(opts, prop, type, values, fallback) {\n    if (typeof opts !== 'object') {\n        throw new TypeError('Options must be an object');\n    }\n    var value = opts[prop];\n    if (value !== undefined) {\n        if (type !== 'boolean' && type !== 'string') {\n            throw new TypeError('invalid type');\n        }\n        if (type === 'boolean') {\n            value = Boolean(value);\n        }\n        if (type === 'string') {\n            value = ToString(value);\n        }\n        if (values !== undefined && !values.filter(function (val) { return val == value; }).length) {\n            throw new RangeError(value + \" is not within \" + values.join(', '));\n        }\n        return value;\n    }\n    return fallback;\n}\n","/**\n * https://tc39.es/ecma402/#sec-bestavailablelocale\n * @param availableLocales\n * @param locale\n */\nexport function BestAvailableLocale(availableLocales, locale) {\n    var candidate = locale;\n    while (true) {\n        if (availableLocales.has(candidate)) {\n            return candidate;\n        }\n        var pos = candidate.lastIndexOf('-');\n        if (!~pos) {\n            return undefined;\n        }\n        if (pos >= 2 && candidate[pos - 2] === '-') {\n            pos -= 2;\n        }\n        candidate = candidate.slice(0, pos);\n    }\n}\n","import { invariant } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-unicodeextensionvalue\n * @param extension\n * @param key\n */\nexport function UnicodeExtensionValue(extension, key) {\n    invariant(key.length === 2, 'key must have 2 elements');\n    var size = extension.length;\n    var searchValue = \"-\" + key + \"-\";\n    var pos = extension.indexOf(searchValue);\n    if (pos !== -1) {\n        var start = pos + 4;\n        var end = start;\n        var k = start;\n        var done = false;\n        while (!done) {\n            var e = extension.indexOf('-', k);\n            var len = void 0;\n            if (e === -1) {\n                len = size - k;\n            }\n            else {\n                len = e - k;\n            }\n            if (len === 2) {\n                done = true;\n            }\n            else if (e === -1) {\n                end = size;\n                done = true;\n            }\n            else {\n                end = e;\n                k = e + 1;\n            }\n        }\n        return extension.slice(start, end);\n    }\n    searchValue = \"-\" + key;\n    pos = extension.indexOf(searchValue);\n    if (pos !== -1 && pos + 3 === size) {\n        return '';\n    }\n    return undefined;\n}\n","import { LookupMatcher } from './LookupMatcher';\nimport { BestFitMatcher } from './BestFitMatcher';\nimport { invariant } from './utils';\nimport { UnicodeExtensionValue } from './UnicodeExtensionValue';\n/**\n * https://tc39.es/ecma402/#sec-resolvelocale\n */\nexport function ResolveLocale(availableLocales, requestedLocales, options, relevantExtensionKeys, localeData, getDefaultLocale) {\n    var matcher = options.localeMatcher;\n    var r;\n    if (matcher === 'lookup') {\n        r = LookupMatcher(availableLocales, requestedLocales, getDefaultLocale);\n    }\n    else {\n        r = BestFitMatcher(availableLocales, requestedLocales, getDefaultLocale);\n    }\n    var foundLocale = r.locale;\n    var result = { locale: '', dataLocale: foundLocale };\n    var supportedExtension = '-u';\n    for (var _i = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _i < relevantExtensionKeys_1.length; _i++) {\n        var key = relevantExtensionKeys_1[_i];\n        invariant(foundLocale in localeData, \"Missing locale data for \" + foundLocale);\n        var foundLocaleData = localeData[foundLocale];\n        invariant(typeof foundLocaleData === 'object' && foundLocaleData !== null, \"locale data \" + key + \" must be an object\");\n        var keyLocaleData = foundLocaleData[key];\n        invariant(Array.isArray(keyLocaleData), \"keyLocaleData for \" + key + \" must be an array\");\n        var value = keyLocaleData[0];\n        invariant(typeof value === 'string' || value === null, \"value must be string or null but got \" + typeof value + \" in key \" + key);\n        var supportedExtensionAddition = '';\n        if (r.extension) {\n            var requestedValue = UnicodeExtensionValue(r.extension, key);\n            if (requestedValue !== undefined) {\n                if (requestedValue !== '') {\n                    if (~keyLocaleData.indexOf(requestedValue)) {\n                        value = requestedValue;\n                        supportedExtensionAddition = \"-\" + key + \"-\" + value;\n                    }\n                }\n                else if (~requestedValue.indexOf('true')) {\n                    value = 'true';\n                    supportedExtensionAddition = \"-\" + key;\n                }\n            }\n        }\n        if (key in options) {\n            var optionsValue = options[key];\n            invariant(typeof optionsValue === 'string' ||\n                typeof optionsValue === 'undefined' ||\n                optionsValue === null, 'optionsValue must be String, Undefined or Null');\n            if (~keyLocaleData.indexOf(optionsValue)) {\n                if (optionsValue !== value) {\n                    value = optionsValue;\n                    supportedExtensionAddition = '';\n                }\n            }\n        }\n        result[key] = value;\n        supportedExtension += supportedExtensionAddition;\n    }\n    if (supportedExtension.length > 2) {\n        var privateIndex = foundLocale.indexOf('-x-');\n        if (privateIndex === -1) {\n            foundLocale = foundLocale + supportedExtension;\n        }\n        else {\n            var preExtension = foundLocale.slice(0, privateIndex);\n            var postExtension = foundLocale.slice(privateIndex, foundLocale.length);\n            foundLocale = preExtension + supportedExtension + postExtension;\n        }\n        foundLocale = Intl.getCanonicalLocales(foundLocale)[0];\n    }\n    result.locale = foundLocale;\n    return result;\n}\n","import { UNICODE_EXTENSION_SEQUENCE_REGEX } from './utils';\nimport { BestAvailableLocale } from './BestAvailableLocale';\n/**\n * https://tc39.es/ecma402/#sec-lookupmatcher\n * @param availableLocales\n * @param requestedLocales\n * @param getDefaultLocale\n */\nexport function LookupMatcher(availableLocales, requestedLocales, getDefaultLocale) {\n    var result = { locale: '' };\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n        var locale = requestedLocales_1[_i];\n        var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        var availableLocale = BestAvailableLocale(availableLocales, noExtensionLocale);\n        if (availableLocale) {\n            result.locale = availableLocale;\n            if (locale !== noExtensionLocale) {\n                result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n            }\n            return result;\n        }\n    }\n    result.locale = getDefaultLocale();\n    return result;\n}\n","import { BestAvailableLocale } from './BestAvailableLocale';\nimport { UNICODE_EXTENSION_SEQUENCE_REGEX } from './utils';\n/**\n * https://tc39.es/ecma402/#sec-bestfitmatcher\n * @param availableLocales\n * @param requestedLocales\n * @param getDefaultLocale\n */\nexport function BestFitMatcher(availableLocales, requestedLocales, getDefaultLocale) {\n    var minimizedAvailableLocaleMap = {};\n    var minimizedAvailableLocales = new Set();\n    availableLocales.forEach(function (locale) {\n        var minimizedLocale = new Intl.Locale(locale)\n            .minimize()\n            .toString();\n        minimizedAvailableLocaleMap[minimizedLocale] = locale;\n        minimizedAvailableLocales.add(minimizedLocale);\n    });\n    var foundLocale;\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n        var l = requestedLocales_1[_i];\n        if (foundLocale) {\n            break;\n        }\n        var noExtensionLocale = l.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        if (availableLocales.has(noExtensionLocale)) {\n            foundLocale = noExtensionLocale;\n            break;\n        }\n        if (minimizedAvailableLocales.has(noExtensionLocale)) {\n            foundLocale = minimizedAvailableLocaleMap[noExtensionLocale];\n            break;\n        }\n        var locale = new Intl.Locale(noExtensionLocale);\n        var maximizedRequestedLocale = locale.maximize().toString();\n        var minimizedRequestedLocale = locale.minimize().toString();\n        // Check minimized locale\n        if (minimizedAvailableLocales.has(minimizedRequestedLocale)) {\n            foundLocale = minimizedAvailableLocaleMap[minimizedRequestedLocale];\n            break;\n        }\n        // Lookup algo on maximized locale\n        foundLocale = BestAvailableLocale(minimizedAvailableLocales, maximizedRequestedLocale);\n    }\n    return {\n        locale: foundLocale || getDefaultLocale(),\n    };\n}\n","/**\n * https://tc39.es/ecma402/#sec-isvalidtimezonename\n * @param tz\n * @param implDetails implementation details\n */\nexport function IsValidTimeZoneName(tz, _a) {\n    var tzData = _a.tzData, uppercaseLinks = _a.uppercaseLinks;\n    var uppercasedTz = tz.toUpperCase();\n    var zoneNames = new Set();\n    Object.keys(tzData)\n        .map(function (z) { return z.toUpperCase(); })\n        .forEach(function (z) { return zoneNames.add(z); });\n    return zoneNames.has(uppercasedTz) || uppercasedTz in uppercaseLinks;\n}\n","export function DefaultNumberOption(val, min, max, fallback) {\n    if (val !== undefined) {\n        val = Number(val);\n        if (isNaN(val) || val < min || val > max) {\n            throw new RangeError(val + \" is outside of range [\" + min + \", \" + max + \"]\");\n        }\n        return Math.floor(val);\n    }\n    return fallback;\n}\n","/**\n * https://tc39.es/ecma402/#sec-getnumberoption\n * @param options\n * @param property\n * @param min\n * @param max\n * @param fallback\n */\nimport { DefaultNumberOption } from './DefaultNumberOption';\nexport function GetNumberOption(options, property, minimum, maximum, fallback) {\n    var val = options[property];\n    // @ts-expect-error\n    return DefaultNumberOption(val, minimum, maximum, fallback);\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { ToDateTimeOptions } from './ToDateTimeOptions';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { IsValidTimeZoneName } from '../IsValidTimeZoneName';\nimport { CanonicalizeTimeZoneName } from '../CanonicalizeTimeZoneName';\nimport { BasicFormatMatcher } from './BasicFormatMatcher';\nimport { BestFitFormatMatcher } from './BestFitFormatMatcher';\nimport { invariant } from '../utils';\nimport { DATE_TIME_PROPS } from './utils';\nimport { DateTimeStyleFormat } from './DateTimeStyleFormat';\nimport { GetNumberOption } from '../GetNumberOption';\nfunction isTimeRelated(opt) {\n    for (var _i = 0, _a = ['hour', 'minute', 'second']; _i < _a.length; _i++) {\n        var prop = _a[_i];\n        var value = opt[prop];\n        if (value !== undefined) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction resolveHourCycle(hc, hcDefault, hour12) {\n    if (hc == null) {\n        hc = hcDefault;\n    }\n    if (hour12 !== undefined) {\n        if (hour12) {\n            if (hcDefault === 'h11' || hcDefault === 'h23') {\n                hc = 'h11';\n            }\n            else {\n                hc = 'h12';\n            }\n        }\n        else {\n            invariant(!hour12, 'hour12 must not be set');\n            if (hcDefault === 'h11' || hcDefault === 'h23') {\n                hc = 'h23';\n            }\n            else {\n                hc = 'h24';\n            }\n        }\n    }\n    return hc;\n}\nvar TYPE_REGEX = /^[a-z0-9]{3,8}$/i;\n/**\n * https://tc39.es/ecma402/#sec-initializedatetimeformat\n * @param dtf DateTimeFormat\n * @param locales locales\n * @param opts options\n */\nexport function InitializeDateTimeFormat(dtf, locales, opts, _a) {\n    var getInternalSlots = _a.getInternalSlots, availableLocales = _a.availableLocales, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale, getDefaultTimeZone = _a.getDefaultTimeZone, relevantExtensionKeys = _a.relevantExtensionKeys, tzData = _a.tzData, uppercaseLinks = _a.uppercaseLinks;\n    // @ts-ignore\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var options = ToDateTimeOptions(opts, 'any', 'date');\n    var opt = Object.create(null);\n    var matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    opt.localeMatcher = matcher;\n    var calendar = GetOption(options, 'calendar', 'string', undefined, undefined);\n    if (calendar !== undefined && !TYPE_REGEX.test(calendar)) {\n        throw new RangeError('Malformed calendar');\n    }\n    var internalSlots = getInternalSlots(dtf);\n    opt.ca = calendar;\n    var numberingSystem = GetOption(options, 'numberingSystem', 'string', undefined, undefined);\n    if (numberingSystem !== undefined && !TYPE_REGEX.test(numberingSystem)) {\n        throw new RangeError('Malformed numbering system');\n    }\n    opt.nu = numberingSystem;\n    var hour12 = GetOption(options, 'hour12', 'boolean', undefined, undefined);\n    var hourCycle = GetOption(options, 'hourCycle', 'string', ['h11', 'h12', 'h23', 'h24'], undefined);\n    if (hour12 !== undefined) {\n        // @ts-ignore\n        hourCycle = null;\n    }\n    opt.hc = hourCycle;\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    internalSlots.locale = r.locale;\n    calendar = r.ca;\n    internalSlots.calendar = calendar;\n    internalSlots.hourCycle = r.hc;\n    internalSlots.numberingSystem = r.nu;\n    var dataLocale = r.dataLocale;\n    internalSlots.dataLocale = dataLocale;\n    var timeZone = options.timeZone;\n    if (timeZone !== undefined) {\n        timeZone = String(timeZone);\n        if (!IsValidTimeZoneName(timeZone, { tzData: tzData, uppercaseLinks: uppercaseLinks })) {\n            throw new RangeError('Invalid timeZoneName');\n        }\n        timeZone = CanonicalizeTimeZoneName(timeZone, { tzData: tzData, uppercaseLinks: uppercaseLinks });\n    }\n    else {\n        timeZone = getDefaultTimeZone();\n    }\n    internalSlots.timeZone = timeZone;\n    opt = Object.create(null);\n    opt.weekday = GetOption(options, 'weekday', 'string', ['narrow', 'short', 'long'], undefined);\n    opt.era = GetOption(options, 'era', 'string', ['narrow', 'short', 'long'], undefined);\n    opt.year = GetOption(options, 'year', 'string', ['2-digit', 'numeric'], undefined);\n    opt.month = GetOption(options, 'month', 'string', ['2-digit', 'numeric', 'narrow', 'short', 'long'], undefined);\n    opt.day = GetOption(options, 'day', 'string', ['2-digit', 'numeric'], undefined);\n    opt.hour = GetOption(options, 'hour', 'string', ['2-digit', 'numeric'], undefined);\n    opt.minute = GetOption(options, 'minute', 'string', ['2-digit', 'numeric'], undefined);\n    opt.second = GetOption(options, 'second', 'string', ['2-digit', 'numeric'], undefined);\n    opt.timeZoneName = GetOption(options, 'timeZoneName', 'string', ['short', 'long'], undefined);\n    opt.fractionalSecondDigits = GetNumberOption(options, 'fractionalSecondDigits', 1, 3, \n    // @ts-expect-error\n    undefined);\n    var dataLocaleData = localeData[dataLocale];\n    invariant(!!dataLocaleData, \"Missing locale data for \" + dataLocale);\n    var formats = dataLocaleData.formats[calendar];\n    // UNSPECCED: IMPLEMENTATION DETAILS\n    if (!formats) {\n        throw new RangeError(\"Calendar \\\"\" + calendar + \"\\\" is not supported. Try setting \\\"calendar\\\" to 1 of the following: \" + Object.keys(dataLocaleData.formats).join(', '));\n    }\n    var formatMatcher = GetOption(options, 'formatMatcher', 'string', ['basic', 'best fit'], 'best fit');\n    var dateStyle = GetOption(options, 'dateStyle', 'string', ['full', 'long', 'medium', 'short'], undefined);\n    internalSlots.dateStyle = dateStyle;\n    var timeStyle = GetOption(options, 'timeStyle', 'string', ['full', 'long', 'medium', 'short'], undefined);\n    internalSlots.timeStyle = timeStyle;\n    var bestFormat;\n    if (dateStyle === undefined && timeStyle === undefined) {\n        if (formatMatcher === 'basic') {\n            bestFormat = BasicFormatMatcher(opt, formats);\n        }\n        else {\n            // IMPL DETAILS START\n            if (isTimeRelated(opt)) {\n                var hc = resolveHourCycle(internalSlots.hourCycle, dataLocaleData.hourCycle, hour12);\n                opt.hour12 = hc === 'h11' || hc === 'h12';\n            }\n            // IMPL DETAILS END\n            bestFormat = BestFitFormatMatcher(opt, formats);\n        }\n    }\n    else {\n        for (var _i = 0, DATE_TIME_PROPS_1 = DATE_TIME_PROPS; _i < DATE_TIME_PROPS_1.length; _i++) {\n            var prop = DATE_TIME_PROPS_1[_i];\n            var p = opt[prop];\n            if (p !== undefined) {\n                throw new TypeError(\"Intl.DateTimeFormat can't set option \" + prop + \" when \" + (dateStyle ? 'dateStyle' : 'timeStyle') + \" is used\");\n            }\n        }\n        bestFormat = DateTimeStyleFormat(dateStyle, timeStyle, dataLocaleData);\n    }\n    // IMPL DETAIL START\n    // For debugging\n    internalSlots.format = bestFormat;\n    // IMPL DETAIL END\n    for (var prop in opt) {\n        var p = bestFormat[prop];\n        if (p !== undefined) {\n            internalSlots[prop] = p;\n        }\n    }\n    var pattern;\n    var rangePatterns;\n    if (internalSlots.hour !== undefined) {\n        var hc = resolveHourCycle(internalSlots.hourCycle, dataLocaleData.hourCycle, hour12);\n        internalSlots.hourCycle = hc;\n        if (hc === 'h11' || hc === 'h12') {\n            pattern = bestFormat.pattern12;\n            rangePatterns = bestFormat.rangePatterns12;\n        }\n        else {\n            pattern = bestFormat.pattern;\n            rangePatterns = bestFormat.rangePatterns;\n        }\n    }\n    else {\n        // @ts-ignore\n        internalSlots.hourCycle = undefined;\n        pattern = bestFormat.pattern;\n        rangePatterns = bestFormat.rangePatterns;\n    }\n    internalSlots.pattern = pattern;\n    internalSlots.rangePatterns = rangePatterns;\n    return dtf;\n}\n","/**\n * This follows https://tc39.es/ecma402/#sec-case-sensitivity-and-case-mapping\n * @param str string to convert\n */\nfunction toUpperCase(str) {\n    return str.replace(/([a-z])/g, function (_, c) { return c.toUpperCase(); });\n}\nvar NOT_A_Z_REGEX = /[^A-Z]/;\n/**\n * https://tc39.es/ecma402/#sec-iswellformedcurrencycode\n */\nexport function IsWellFormedCurrencyCode(currency) {\n    currency = toUpperCase(currency);\n    if (currency.length !== 3) {\n        return false;\n    }\n    if (NOT_A_Z_REGEX.test(currency)) {\n        return false;\n    }\n    return true;\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { invariant } from '../utils';\nimport { IsWellFormedCurrencyCode } from '../IsWellFormedCurrencyCode';\nvar UNICODE_REGION_SUBTAG_REGEX = /^([a-z]{2}|[0-9]{3})$/i;\nvar ALPHA_4 = /^[a-z]{4}$/i;\nfunction isUnicodeRegionSubtag(region) {\n    return UNICODE_REGION_SUBTAG_REGEX.test(region);\n}\nfunction isUnicodeScriptSubtag(script) {\n    return ALPHA_4.test(script);\n}\nexport function CanonicalCodeForDisplayNames(type, code) {\n    if (type === 'language') {\n        return CanonicalizeLocaleList([code])[0];\n    }\n    if (type === 'region') {\n        if (!isUnicodeRegionSubtag(code)) {\n            throw RangeError('invalid region');\n        }\n        return code.toUpperCase();\n    }\n    if (type === 'script') {\n        if (!isUnicodeScriptSubtag(code)) {\n            throw RangeError('invalid script');\n        }\n        return \"\" + code[0].toUpperCase() + code.slice(1).toLowerCase();\n    }\n    invariant(type === 'currency', 'invalid type');\n    if (!IsWellFormedCurrencyCode(code)) {\n        throw RangeError('invalid currency');\n    }\n    return code.toUpperCase();\n}\n","/**\n * https://tc39.es/ecma402/#sec-getoptionsobject\n * @param options\n * @returns\n */\nexport function GetOptionsObject(options) {\n    if (typeof options === 'undefined') {\n        return Object.create(null);\n    }\n    if (typeof options === 'object') {\n        return options;\n    }\n    throw new TypeError('Options must be an object');\n}\n","/**\n * https://tc39.es/ecma402/#table-sanctioned-simple-unit-identifiers\n */\nexport var SANCTIONED_UNITS = [\n    'angle-degree',\n    'area-acre',\n    'area-hectare',\n    'concentr-percent',\n    'digital-bit',\n    'digital-byte',\n    'digital-gigabit',\n    'digital-gigabyte',\n    'digital-kilobit',\n    'digital-kilobyte',\n    'digital-megabit',\n    'digital-megabyte',\n    'digital-petabyte',\n    'digital-terabit',\n    'digital-terabyte',\n    'duration-day',\n    'duration-hour',\n    'duration-millisecond',\n    'duration-minute',\n    'duration-month',\n    'duration-second',\n    'duration-week',\n    'duration-year',\n    'length-centimeter',\n    'length-foot',\n    'length-inch',\n    'length-kilometer',\n    'length-meter',\n    'length-mile-scandinavian',\n    'length-mile',\n    'length-millimeter',\n    'length-yard',\n    'mass-gram',\n    'mass-kilogram',\n    'mass-ounce',\n    'mass-pound',\n    'mass-stone',\n    'temperature-celsius',\n    'temperature-fahrenheit',\n    'volume-fluid-ounce',\n    'volume-gallon',\n    'volume-liter',\n    'volume-milliliter',\n];\n// In CLDR, the unit name always follows the form `namespace-unit` pattern.\n// For example: `digital-bit` instead of `bit`. This function removes the namespace prefix.\nexport function removeUnitNamespace(unit) {\n    return unit.slice(unit.indexOf('-') + 1);\n}\n/**\n * https://tc39.es/ecma402/#table-sanctioned-simple-unit-identifiers\n */\nexport var SIMPLE_UNITS = SANCTIONED_UNITS.map(removeUnitNamespace);\n/**\n * https://tc39.es/ecma402/#sec-issanctionedsimpleunitidentifier\n */\nexport function IsSanctionedSimpleUnitIdentifier(unitIdentifier) {\n    return SIMPLE_UNITS.indexOf(unitIdentifier) > -1;\n}\n","import { IsSanctionedSimpleUnitIdentifier } from './IsSanctionedSimpleUnitIdentifier';\n/**\n * This follows https://tc39.es/ecma402/#sec-case-sensitivity-and-case-mapping\n * @param str string to convert\n */\nfunction toLowerCase(str) {\n    return str.replace(/([A-Z])/g, function (_, c) { return c.toLowerCase(); });\n}\n/**\n * https://tc39.es/ecma402/#sec-iswellformedunitidentifier\n * @param unit\n */\nexport function IsWellFormedUnitIdentifier(unit) {\n    unit = toLowerCase(unit);\n    if (IsSanctionedSimpleUnitIdentifier(unit)) {\n        return true;\n    }\n    var units = unit.split('-per-');\n    if (units.length !== 2) {\n        return false;\n    }\n    var numerator = units[0], denominator = units[1];\n    if (!IsSanctionedSimpleUnitIdentifier(numerator) ||\n        !IsSanctionedSimpleUnitIdentifier(denominator)) {\n        return false;\n    }\n    return true;\n}\n","/**\n * The abstract operation ComputeExponentForMagnitude computes an exponent by which to scale a\n * number of the given magnitude (power of ten of the most significant digit) according to the\n * locale and the desired notation (scientific, engineering, or compact).\n */\nexport function ComputeExponentForMagnitude(numberFormat, magnitude, _a) {\n    var getInternalSlots = _a.getInternalSlots;\n    var internalSlots = getInternalSlots(numberFormat);\n    var notation = internalSlots.notation, dataLocaleData = internalSlots.dataLocaleData, numberingSystem = internalSlots.numberingSystem;\n    switch (notation) {\n        case 'standard':\n            return 0;\n        case 'scientific':\n            return magnitude;\n        case 'engineering':\n            return Math.floor(magnitude / 3) * 3;\n        default: {\n            // Let exponent be an implementation- and locale-dependent (ILD) integer by which to scale a\n            // number of the given magnitude in compact notation for the current locale.\n            var compactDisplay = internalSlots.compactDisplay, style = internalSlots.style, currencyDisplay = internalSlots.currencyDisplay;\n            var thresholdMap = void 0;\n            if (style === 'currency' && currencyDisplay !== 'name') {\n                var currency = dataLocaleData.numbers.currency[numberingSystem] ||\n                    dataLocaleData.numbers.currency[dataLocaleData.numbers.nu[0]];\n                thresholdMap = currency.short;\n            }\n            else {\n                var decimal = dataLocaleData.numbers.decimal[numberingSystem] ||\n                    dataLocaleData.numbers.decimal[dataLocaleData.numbers.nu[0]];\n                thresholdMap = compactDisplay === 'long' ? decimal.long : decimal.short;\n            }\n            if (!thresholdMap) {\n                return 0;\n            }\n            var num = String(Math.pow(10, magnitude));\n            var thresholds = Object.keys(thresholdMap); // TODO: this can be pre-processed\n            if (num < thresholds[0]) {\n                return 0;\n            }\n            if (num > thresholds[thresholds.length - 1]) {\n                return thresholds[thresholds.length - 1].length - 1;\n            }\n            var i = thresholds.indexOf(num);\n            if (i === -1) {\n                return 0;\n            }\n            // See https://unicode.org/reports/tr35/tr35-numbers.html#Compact_Number_Formats\n            // Special handling if the pattern is precisely `0`.\n            var magnitudeKey = thresholds[i];\n            // TODO: do we need to handle plural here?\n            var compactPattern = thresholdMap[magnitudeKey].other;\n            if (compactPattern === '0') {\n                return 0;\n            }\n            // Example: in zh-TW, `10000000` maps to `0000`. So we need to return 8 - 4 = 4 here.\n            return (magnitudeKey.length -\n                thresholdMap[magnitudeKey].other.match(/0+/)[0].length);\n        }\n    }\n}\n","import { repeat, getMagnitude } from '../utils';\nexport function ToRawPrecision(x, minPrecision, maxPrecision) {\n    var p = maxPrecision;\n    var m;\n    var e;\n    var xFinal;\n    if (x === 0) {\n        m = repeat('0', p);\n        e = 0;\n        xFinal = 0;\n    }\n    else {\n        var xToString = x.toString();\n        // If xToString is formatted as scientific notation, the number is either very small or very\n        // large. If the precision of the formatted string is lower that requested max precision, we\n        // should still infer them from the formatted string, otherwise the formatted result might have\n        // precision loss (e.g. 1e41 will not have 0 in every trailing digits).\n        var xToStringExponentIndex = xToString.indexOf('e');\n        var _a = xToString.split('e'), xToStringMantissa = _a[0], xToStringExponent = _a[1];\n        var xToStringMantissaWithoutDecimalPoint = xToStringMantissa.replace('.', '');\n        if (xToStringExponentIndex >= 0 &&\n            xToStringMantissaWithoutDecimalPoint.length <= p) {\n            e = +xToStringExponent;\n            m =\n                xToStringMantissaWithoutDecimalPoint +\n                    repeat('0', p - xToStringMantissaWithoutDecimalPoint.length);\n            xFinal = x;\n        }\n        else {\n            e = getMagnitude(x);\n            var decimalPlaceOffset = e - p + 1;\n            // n is the integer containing the required precision digits. To derive the formatted string,\n            // we will adjust its decimal place in the logic below.\n            var n = Math.round(adjustDecimalPlace(x, decimalPlaceOffset));\n            // The rounding caused the change of magnitude, so we should increment `e` by 1.\n            if (adjustDecimalPlace(n, p - 1) >= 10) {\n                e = e + 1;\n                // Divide n by 10 to swallow one precision.\n                n = Math.floor(n / 10);\n            }\n            m = n.toString();\n            // Equivalent of n * 10 ** (e - p + 1)\n            xFinal = adjustDecimalPlace(n, p - 1 - e);\n        }\n    }\n    var int;\n    if (e >= p - 1) {\n        m = m + repeat('0', e - p + 1);\n        int = e + 1;\n    }\n    else if (e >= 0) {\n        m = m.slice(0, e + 1) + \".\" + m.slice(e + 1);\n        int = e + 1;\n    }\n    else {\n        m = \"0.\" + repeat('0', -e - 1) + m;\n        int = 1;\n    }\n    if (m.indexOf('.') >= 0 && maxPrecision > minPrecision) {\n        var cut = maxPrecision - minPrecision;\n        while (cut > 0 && m[m.length - 1] === '0') {\n            m = m.slice(0, -1);\n            cut--;\n        }\n        if (m[m.length - 1] === '.') {\n            m = m.slice(0, -1);\n        }\n    }\n    return { formattedString: m, roundedNumber: xFinal, integerDigitsCount: int };\n    // x / (10 ** magnitude), but try to preserve as much floating point precision as possible.\n    function adjustDecimalPlace(x, magnitude) {\n        return magnitude < 0 ? x * Math.pow(10, -magnitude) : x / Math.pow(10, magnitude);\n    }\n}\n","import { repeat } from '../utils';\n/**\n * TODO: dedup with intl-pluralrules and support BigInt\n * https://tc39.es/ecma402/#sec-torawfixed\n * @param x a finite non-negative Number or BigInt\n * @param minFraction and integer between 0 and 20\n * @param maxFraction and integer between 0 and 20\n */\nexport function ToRawFixed(x, minFraction, maxFraction) {\n    var f = maxFraction;\n    var n = Math.round(x * Math.pow(10, f));\n    var xFinal = n / Math.pow(10, f);\n    // n is a positive integer, but it is possible to be greater than 1e21.\n    // In such case we will go the slow path.\n    // See also: https://tc39.es/ecma262/#sec-numeric-types-number-tostring\n    var m;\n    if (n < 1e21) {\n        m = n.toString();\n    }\n    else {\n        m = n.toString();\n        var _a = m.split('e'), mantissa = _a[0], exponent = _a[1];\n        m = mantissa.replace('.', '');\n        m = m + repeat('0', Math.max(+exponent - m.length + 1, 0));\n    }\n    var int;\n    if (f !== 0) {\n        var k = m.length;\n        if (k <= f) {\n            var z = repeat('0', f + 1 - k);\n            m = z + m;\n            k = f + 1;\n        }\n        var a = m.slice(0, k - f);\n        var b = m.slice(k - f);\n        m = a + \".\" + b;\n        int = a.length;\n    }\n    else {\n        int = m.length;\n    }\n    var cut = maxFraction - minFraction;\n    while (cut > 0 && m[m.length - 1] === '0') {\n        m = m.slice(0, -1);\n        cut--;\n    }\n    if (m[m.length - 1] === '.') {\n        m = m.slice(0, -1);\n    }\n    return { formattedString: m, roundedNumber: xFinal, integerDigitsCount: int };\n}\n","import { SameValue } from '../262';\nimport { ToRawPrecision } from './ToRawPrecision';\nimport { repeat } from '../utils';\nimport { ToRawFixed } from './ToRawFixed';\n/**\n * https://tc39.es/ecma402/#sec-formatnumberstring\n */\nexport function FormatNumericToString(intlObject, x) {\n    var isNegative = x < 0 || SameValue(x, -0);\n    if (isNegative) {\n        x = -x;\n    }\n    var result;\n    var rourndingType = intlObject.roundingType;\n    switch (rourndingType) {\n        case 'significantDigits':\n            result = ToRawPrecision(x, intlObject.minimumSignificantDigits, intlObject.maximumSignificantDigits);\n            break;\n        case 'fractionDigits':\n            result = ToRawFixed(x, intlObject.minimumFractionDigits, intlObject.maximumFractionDigits);\n            break;\n        default:\n            result = ToRawPrecision(x, 1, 2);\n            if (result.integerDigitsCount > 1) {\n                result = ToRawFixed(x, 0, 0);\n            }\n            break;\n    }\n    x = result.roundedNumber;\n    var string = result.formattedString;\n    var int = result.integerDigitsCount;\n    var minInteger = intlObject.minimumIntegerDigits;\n    if (int < minInteger) {\n        var forwardZeros = repeat('0', minInteger - int);\n        string = forwardZeros + string;\n    }\n    if (isNegative) {\n        x = -x;\n    }\n    return { roundedNumber: x, formattedString: string };\n}\n","import { getMagnitude } from '../utils';\nimport { ComputeExponentForMagnitude } from './ComputeExponentForMagnitude';\nimport { FormatNumericToString } from './FormatNumericToString';\n/**\n * The abstract operation ComputeExponent computes an exponent (power of ten) by which to scale x\n * according to the number formatting settings. It handles cases such as 999 rounding up to 1000,\n * requiring a different exponent.\n *\n * NOT IN SPEC: it returns [exponent, magnitude].\n */\nexport function ComputeExponent(numberFormat, x, _a) {\n    var getInternalSlots = _a.getInternalSlots;\n    if (x === 0) {\n        return [0, 0];\n    }\n    if (x < 0) {\n        x = -x;\n    }\n    var magnitude = getMagnitude(x);\n    var exponent = ComputeExponentForMagnitude(numberFormat, magnitude, {\n        getInternalSlots: getInternalSlots,\n    });\n    // Preserve more precision by doing multiplication when exponent is negative.\n    x = exponent < 0 ? x * Math.pow(10, -exponent) : x / Math.pow(10, exponent);\n    var formatNumberResult = FormatNumericToString(getInternalSlots(numberFormat), x);\n    if (formatNumberResult.roundedNumber === 0) {\n        return [exponent, magnitude];\n    }\n    var newMagnitude = getMagnitude(formatNumberResult.roundedNumber);\n    if (newMagnitude === magnitude - exponent) {\n        return [exponent, magnitude];\n    }\n    return [\n        ComputeExponentForMagnitude(numberFormat, magnitude + 1, {\n            getInternalSlots: getInternalSlots,\n        }),\n        magnitude + 1,\n    ];\n}\n","import { HasOwnProperty } from '../262';\n/**\n * https://tc39.es/ecma402/#sec-currencydigits\n */\nexport function CurrencyDigits(c, _a) {\n    var currencyDigitsData = _a.currencyDigitsData;\n    return HasOwnProperty(currencyDigitsData, c)\n        ? currencyDigitsData[c]\n        : 2;\n}\n","import { ToRawFixed } from './ToRawFixed';\nimport * as digitMapping from './digit-mapping.json';\n// This is from: unicode-12.1.0/General_Category/Symbol/regex.js\n// IE11 does not support unicode flag, otherwise this is just /\\p{S}/u.\nvar S_UNICODE_REGEX = /[\\$\\+<->\\^`\\|~\\xA2-\\xA6\\xA8\\xA9\\xAC\\xAE-\\xB1\\xB4\\xB8\\xD7\\xF7\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u03F6\\u0482\\u058D-\\u058F\\u0606-\\u0608\\u060B\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u07FE\\u07FF\\u09F2\\u09F3\\u09FA\\u09FB\\u0AF1\\u0B70\\u0BF3-\\u0BFA\\u0C7F\\u0D4F\\u0D79\\u0E3F\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u166D\\u17DB\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u2044\\u2052\\u207A-\\u207C\\u208A-\\u208C\\u20A0-\\u20BF\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116-\\u2118\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u2140-\\u2144\\u214A-\\u214D\\u214F\\u218A\\u218B\\u2190-\\u2307\\u230C-\\u2328\\u232B-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u2767\\u2794-\\u27C4\\u27C7-\\u27E5\\u27F0-\\u2982\\u2999-\\u29D7\\u29DC-\\u29FB\\u29FE-\\u2B73\\u2B76-\\u2B95\\u2B98-\\u2BFF\\u2CE5-\\u2CEA\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u309B\\u309C\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uA828-\\uA82B\\uA836-\\uA839\\uAA77-\\uAA79\\uAB5B\\uFB29\\uFBB2-\\uFBC1\\uFDFC\\uFDFD\\uFE62\\uFE64-\\uFE66\\uFE69\\uFF04\\uFF0B\\uFF1C-\\uFF1E\\uFF3E\\uFF40\\uFF5C\\uFF5E\\uFFE0-\\uFFE6\\uFFE8-\\uFFEE\\uFFFC\\uFFFD]|\\uD800[\\uDD37-\\uDD3F\\uDD79-\\uDD89\\uDD8C-\\uDD8E\\uDD90-\\uDD9B\\uDDA0\\uDDD0-\\uDDFC]|\\uD802[\\uDC77\\uDC78\\uDEC8]|\\uD805\\uDF3F|\\uD807[\\uDFD5-\\uDFF1]|\\uD81A[\\uDF3C-\\uDF3F\\uDF45]|\\uD82F\\uDC9C|\\uD834[\\uDC00-\\uDCF5\\uDD00-\\uDD26\\uDD29-\\uDD64\\uDD6A-\\uDD6C\\uDD83\\uDD84\\uDD8C-\\uDDA9\\uDDAE-\\uDDE8\\uDE00-\\uDE41\\uDE45\\uDF00-\\uDF56]|\\uD835[\\uDEC1\\uDEDB\\uDEFB\\uDF15\\uDF35\\uDF4F\\uDF6F\\uDF89\\uDFA9\\uDFC3]|\\uD836[\\uDC00-\\uDDFF\\uDE37-\\uDE3A\\uDE6D-\\uDE74\\uDE76-\\uDE83\\uDE85\\uDE86]|\\uD838[\\uDD4F\\uDEFF]|\\uD83B[\\uDCAC\\uDCB0\\uDD2E\\uDEF0\\uDEF1]|\\uD83C[\\uDC00-\\uDC2B\\uDC30-\\uDC93\\uDCA0-\\uDCAE\\uDCB1-\\uDCBF\\uDCC1-\\uDCCF\\uDCD1-\\uDCF5\\uDD10-\\uDD6C\\uDD70-\\uDDAC\\uDDE6-\\uDE02\\uDE10-\\uDE3B\\uDE40-\\uDE48\\uDE50\\uDE51\\uDE60-\\uDE65\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDED5\\uDEE0-\\uDEEC\\uDEF0-\\uDEFA\\uDF00-\\uDF73\\uDF80-\\uDFD8\\uDFE0-\\uDFEB]|\\uD83E[\\uDC00-\\uDC0B\\uDC10-\\uDC47\\uDC50-\\uDC59\\uDC60-\\uDC87\\uDC90-\\uDCAD\\uDD00-\\uDD0B\\uDD0D-\\uDD71\\uDD73-\\uDD76\\uDD7A-\\uDDA2\\uDDA5-\\uDDAA\\uDDAE-\\uDDCA\\uDDCD-\\uDE53\\uDE60-\\uDE6D\\uDE70-\\uDE73\\uDE78-\\uDE7A\\uDE80-\\uDE82\\uDE90-\\uDE95]/;\n// /^\\p{S}/u\nvar CARET_S_UNICODE_REGEX = new RegExp(\"^\" + S_UNICODE_REGEX.source);\n// /\\p{S}$/u\nvar S_DOLLAR_UNICODE_REGEX = new RegExp(S_UNICODE_REGEX.source + \"$\");\nvar CLDR_NUMBER_PATTERN = /[#0](?:[\\.,][#0]+)*/g;\nexport default function formatToParts(numberResult, data, pl, options) {\n    var sign = numberResult.sign, exponent = numberResult.exponent, magnitude = numberResult.magnitude;\n    var notation = options.notation, style = options.style, numberingSystem = options.numberingSystem;\n    var defaultNumberingSystem = data.numbers.nu[0];\n    // #region Part 1: partition and interpolate the CLDR number pattern.\n    // ----------------------------------------------------------\n    var compactNumberPattern = null;\n    if (notation === 'compact' && magnitude) {\n        compactNumberPattern = getCompactDisplayPattern(numberResult, pl, data, style, options.compactDisplay, options.currencyDisplay, numberingSystem);\n    }\n    // This is used multiple times\n    var nonNameCurrencyPart;\n    if (style === 'currency' && options.currencyDisplay !== 'name') {\n        var byCurrencyDisplay = data.currencies[options.currency];\n        if (byCurrencyDisplay) {\n            switch (options.currencyDisplay) {\n                case 'code':\n                    nonNameCurrencyPart = options.currency;\n                    break;\n                case 'symbol':\n                    nonNameCurrencyPart = byCurrencyDisplay.symbol;\n                    break;\n                default:\n                    nonNameCurrencyPart = byCurrencyDisplay.narrow;\n                    break;\n            }\n        }\n        else {\n            // Fallback for unknown currency\n            nonNameCurrencyPart = options.currency;\n        }\n    }\n    var numberPattern;\n    if (!compactNumberPattern) {\n        // Note: if the style is unit, or is currency and the currency display is name,\n        // its unit parts will be interpolated in part 2. So here we can fallback to decimal.\n        if (style === 'decimal' ||\n            style === 'unit' ||\n            (style === 'currency' && options.currencyDisplay === 'name')) {\n            // Shortcut for decimal\n            var decimalData = data.numbers.decimal[numberingSystem] ||\n                data.numbers.decimal[defaultNumberingSystem];\n            numberPattern = getPatternForSign(decimalData.standard, sign);\n        }\n        else if (style === 'currency') {\n            var currencyData = data.numbers.currency[numberingSystem] ||\n                data.numbers.currency[defaultNumberingSystem];\n            // We replace number pattern part with `0` for easier postprocessing.\n            numberPattern = getPatternForSign(currencyData[options.currencySign], sign);\n        }\n        else {\n            // percent\n            var percentPattern = data.numbers.percent[numberingSystem] ||\n                data.numbers.percent[defaultNumberingSystem];\n            numberPattern = getPatternForSign(percentPattern, sign);\n        }\n    }\n    else {\n        numberPattern = compactNumberPattern;\n    }\n    // Extract the decimal number pattern string. It looks like \"#,##0,00\", which will later be\n    // used to infer decimal group sizes.\n    var decimalNumberPattern = CLDR_NUMBER_PATTERN.exec(numberPattern)[0];\n    // Now we start to substitute patterns\n    // 1. replace strings like `0` and `#,##0.00` with `{0}`\n    // 2. unquote characters (invariant: the quoted characters does not contain the special tokens)\n    numberPattern = numberPattern\n        .replace(CLDR_NUMBER_PATTERN, '{0}')\n        .replace(/'(.)'/g, '$1');\n    // Handle currency spacing (both compact and non-compact).\n    if (style === 'currency' && options.currencyDisplay !== 'name') {\n        var currencyData = data.numbers.currency[numberingSystem] ||\n            data.numbers.currency[defaultNumberingSystem];\n        // See `currencySpacing` substitution rule in TR-35.\n        // Here we always assume the currencyMatch is \"[:^S:]\" and surroundingMatch is \"[:digit:]\".\n        //\n        // Example 1: for pattern \"#,##0.00\" with symbol \"US$\", we replace \"\" with the symbol,\n        // but insert an extra non-break space before the symbol, because \"[:^S:]\" matches \"U\" in\n        // \"US$\" and \"[:digit:]\" matches the latn numbering system digits.\n        //\n        // Example 2: for pattern \"#,##0.00\" with symbol \"US$\", there is no spacing between symbol\n        // and number, because `$` does not match \"[:^S:]\".\n        //\n        // Implementation note: here we do the best effort to infer the insertion.\n        // We also assume that `beforeInsertBetween` and `afterInsertBetween` will never be `;`.\n        var afterCurrency = currencyData.currencySpacing.afterInsertBetween;\n        if (afterCurrency && !S_DOLLAR_UNICODE_REGEX.test(nonNameCurrencyPart)) {\n            numberPattern = numberPattern.replace('{0}', \"\\u00A4\" + afterCurrency + \"{0}\");\n        }\n        var beforeCurrency = currencyData.currencySpacing.beforeInsertBetween;\n        if (beforeCurrency && !CARET_S_UNICODE_REGEX.test(nonNameCurrencyPart)) {\n            numberPattern = numberPattern.replace('{0}', \"{0}\" + beforeCurrency + \"\\u00A4\");\n        }\n    }\n    // The following tokens are special: `{0}`, ``, `%`, `-`, `+`, `{c:...}.\n    var numberPatternParts = numberPattern.split(/({c:[^}]+}|\\{0\\}|[%\\-\\+])/g);\n    var numberParts = [];\n    var symbols = data.numbers.symbols[numberingSystem] ||\n        data.numbers.symbols[defaultNumberingSystem];\n    for (var _i = 0, numberPatternParts_1 = numberPatternParts; _i < numberPatternParts_1.length; _i++) {\n        var part = numberPatternParts_1[_i];\n        if (!part) {\n            continue;\n        }\n        switch (part) {\n            case '{0}': {\n                // We only need to handle scientific and engineering notation here.\n                numberParts.push.apply(numberParts, paritionNumberIntoParts(symbols, numberResult, notation, exponent, numberingSystem, \n                // If compact number pattern exists, do not insert group separators.\n                !compactNumberPattern && options.useGrouping, decimalNumberPattern));\n                break;\n            }\n            case '-':\n                numberParts.push({ type: 'minusSign', value: symbols.minusSign });\n                break;\n            case '+':\n                numberParts.push({ type: 'plusSign', value: symbols.plusSign });\n                break;\n            case '%':\n                numberParts.push({ type: 'percentSign', value: symbols.percentSign });\n                break;\n            case '':\n                // Computed above when handling currency spacing.\n                numberParts.push({ type: 'currency', value: nonNameCurrencyPart });\n                break;\n            default:\n                if (/^\\{c:/.test(part)) {\n                    numberParts.push({\n                        type: 'compact',\n                        value: part.substring(3, part.length - 1),\n                    });\n                }\n                else {\n                    // literal\n                    numberParts.push({ type: 'literal', value: part });\n                }\n                break;\n        }\n    }\n    // #endregion\n    // #region Part 2: interpolate unit pattern if necessary.\n    // ----------------------------------------------\n    switch (style) {\n        case 'currency': {\n            // `currencyDisplay: 'name'` has similar pattern handling as units.\n            if (options.currencyDisplay === 'name') {\n                var unitPattern = (data.numbers.currency[numberingSystem] ||\n                    data.numbers.currency[defaultNumberingSystem]).unitPattern;\n                // Select plural\n                var unitName = void 0;\n                var currencyNameData = data.currencies[options.currency];\n                if (currencyNameData) {\n                    unitName = selectPlural(pl, numberResult.roundedNumber * Math.pow(10, exponent), currencyNameData.displayName);\n                }\n                else {\n                    // Fallback for unknown currency\n                    unitName = options.currency;\n                }\n                // Do {0} and {1} substitution\n                var unitPatternParts = unitPattern.split(/(\\{[01]\\})/g);\n                var result = [];\n                for (var _a = 0, unitPatternParts_1 = unitPatternParts; _a < unitPatternParts_1.length; _a++) {\n                    var part = unitPatternParts_1[_a];\n                    switch (part) {\n                        case '{0}':\n                            result.push.apply(result, numberParts);\n                            break;\n                        case '{1}':\n                            result.push({ type: 'currency', value: unitName });\n                            break;\n                        default:\n                            if (part) {\n                                result.push({ type: 'literal', value: part });\n                            }\n                            break;\n                    }\n                }\n                return result;\n            }\n            else {\n                return numberParts;\n            }\n        }\n        case 'unit': {\n            var unit = options.unit, unitDisplay = options.unitDisplay;\n            var unitData = data.units.simple[unit];\n            var unitPattern = void 0;\n            if (unitData) {\n                // Simple unit pattern\n                unitPattern = selectPlural(pl, numberResult.roundedNumber * Math.pow(10, exponent), data.units.simple[unit][unitDisplay]);\n            }\n            else {\n                // See: http://unicode.org/reports/tr35/tr35-general.html#perUnitPatterns\n                // If cannot find unit in the simple pattern, it must be \"per\" compound pattern.\n                // Implementation note: we are not following TR-35 here because we need to format to parts!\n                var _b = unit.split('-per-'), numeratorUnit = _b[0], denominatorUnit = _b[1];\n                unitData = data.units.simple[numeratorUnit];\n                var numeratorUnitPattern = selectPlural(pl, numberResult.roundedNumber * Math.pow(10, exponent), data.units.simple[numeratorUnit][unitDisplay]);\n                var perUnitPattern = data.units.simple[denominatorUnit].perUnit[unitDisplay];\n                if (perUnitPattern) {\n                    // perUnitPattern exists, combine it with numeratorUnitPattern\n                    unitPattern = perUnitPattern.replace('{0}', numeratorUnitPattern);\n                }\n                else {\n                    // get compoundUnit pattern (e.g. \"{0} per {1}\"), repalce {0} with numerator pattern and {1} with\n                    // the denominator pattern in singular form.\n                    var perPattern = data.units.compound.per[unitDisplay];\n                    var denominatorPattern = selectPlural(pl, 1, data.units.simple[denominatorUnit][unitDisplay]);\n                    unitPattern = unitPattern = perPattern\n                        .replace('{0}', numeratorUnitPattern)\n                        .replace('{1}', denominatorPattern.replace('{0}', ''));\n                }\n            }\n            var result = [];\n            // We need spacing around \"{0}\" because they are not treated as \"unit\" parts, but \"literal\".\n            for (var _c = 0, _d = unitPattern.split(/(\\s*\\{0\\}\\s*)/); _c < _d.length; _c++) {\n                var part = _d[_c];\n                var interpolateMatch = /^(\\s*)\\{0\\}(\\s*)$/.exec(part);\n                if (interpolateMatch) {\n                    // Space before \"{0}\"\n                    if (interpolateMatch[1]) {\n                        result.push({ type: 'literal', value: interpolateMatch[1] });\n                    }\n                    // \"{0}\" itself\n                    result.push.apply(result, numberParts);\n                    // Space after \"{0}\"\n                    if (interpolateMatch[2]) {\n                        result.push({ type: 'literal', value: interpolateMatch[2] });\n                    }\n                }\n                else if (part) {\n                    result.push({ type: 'unit', value: part });\n                }\n            }\n            return result;\n        }\n        default:\n            return numberParts;\n    }\n    // #endregion\n}\n// A subset of https://tc39.es/ecma402/#sec-partitionnotationsubpattern\n// Plus the exponent parts handling.\nfunction paritionNumberIntoParts(symbols, numberResult, notation, exponent, numberingSystem, useGrouping, \n/**\n * This is the decimal number pattern without signs or symbols.\n * It is used to infer the group size when `useGrouping` is true.\n *\n * A typical value looks like \"#,##0.00\" (primary group size is 3).\n * Some locales like Hindi has secondary group size of 2 (e.g. \"#,##,##0.00\").\n */\ndecimalNumberPattern) {\n    var result = [];\n    // eslint-disable-next-line prefer-const\n    var n = numberResult.formattedString, x = numberResult.roundedNumber;\n    if (isNaN(x)) {\n        return [{ type: 'nan', value: n }];\n    }\n    else if (!isFinite(x)) {\n        return [{ type: 'infinity', value: n }];\n    }\n    var digitReplacementTable = digitMapping[numberingSystem];\n    if (digitReplacementTable) {\n        n = n.replace(/\\d/g, function (digit) { return digitReplacementTable[+digit] || digit; });\n    }\n    // TODO: Else use an implementation dependent algorithm to map n to the appropriate\n    // representation of n in the given numbering system.\n    var decimalSepIndex = n.indexOf('.');\n    var integer;\n    var fraction;\n    if (decimalSepIndex > 0) {\n        integer = n.slice(0, decimalSepIndex);\n        fraction = n.slice(decimalSepIndex + 1);\n    }\n    else {\n        integer = n;\n    }\n    // #region Grouping integer digits\n    // The weird compact and x >= 10000 check is to ensure consistency with Node.js and Chrome.\n    // Note that `de` does not have compact form for thousands, but Node.js does not insert grouping separator\n    // unless the rounded number is greater than 10000:\n    //   NumberFormat('de', {notation: 'compact', compactDisplay: 'short'}).format(1234) //=> \"1234\"\n    //   NumberFormat('de').format(1234) //=> \"1.234\"\n    if (useGrouping && (notation !== 'compact' || x >= 10000)) {\n        var groupSepSymbol = symbols.group;\n        var groups = [];\n        // > There may be two different grouping sizes: The primary grouping size used for the least\n        // > significant integer group, and the secondary grouping size used for more significant groups.\n        // > If a pattern contains multiple grouping separators, the interval between the last one and the\n        // > end of the integer defines the primary grouping size, and the interval between the last two\n        // > defines the secondary grouping size. All others are ignored.\n        var integerNumberPattern = decimalNumberPattern.split('.')[0];\n        var patternGroups = integerNumberPattern.split(',');\n        var primaryGroupingSize = 3;\n        var secondaryGroupingSize = 3;\n        if (patternGroups.length > 1) {\n            primaryGroupingSize = patternGroups[patternGroups.length - 1].length;\n        }\n        if (patternGroups.length > 2) {\n            secondaryGroupingSize = patternGroups[patternGroups.length - 2].length;\n        }\n        var i = integer.length - primaryGroupingSize;\n        if (i > 0) {\n            // Slice the least significant integer group\n            groups.push(integer.slice(i, i + primaryGroupingSize));\n            // Then iteratively push the more signicant groups\n            // TODO: handle surrogate pairs in some numbering system digits\n            for (i -= secondaryGroupingSize; i > 0; i -= secondaryGroupingSize) {\n                groups.push(integer.slice(i, i + secondaryGroupingSize));\n            }\n            groups.push(integer.slice(0, i + secondaryGroupingSize));\n        }\n        else {\n            groups.push(integer);\n        }\n        while (groups.length > 0) {\n            var integerGroup = groups.pop();\n            result.push({ type: 'integer', value: integerGroup });\n            if (groups.length > 0) {\n                result.push({ type: 'group', value: groupSepSymbol });\n            }\n        }\n    }\n    else {\n        result.push({ type: 'integer', value: integer });\n    }\n    // #endregion\n    if (fraction !== undefined) {\n        result.push({ type: 'decimal', value: symbols.decimal }, { type: 'fraction', value: fraction });\n    }\n    if ((notation === 'scientific' || notation === 'engineering') &&\n        isFinite(x)) {\n        result.push({ type: 'exponentSeparator', value: symbols.exponential });\n        if (exponent < 0) {\n            result.push({ type: 'exponentMinusSign', value: symbols.minusSign });\n            exponent = -exponent;\n        }\n        var exponentResult = ToRawFixed(exponent, 0, 0);\n        result.push({\n            type: 'exponentInteger',\n            value: exponentResult.formattedString,\n        });\n    }\n    return result;\n}\nfunction getPatternForSign(pattern, sign) {\n    if (pattern.indexOf(';') < 0) {\n        pattern = pattern + \";-\" + pattern;\n    }\n    var _a = pattern.split(';'), zeroPattern = _a[0], negativePattern = _a[1];\n    switch (sign) {\n        case 0:\n            return zeroPattern;\n        case -1:\n            return negativePattern;\n        default:\n            return negativePattern.indexOf('-') >= 0\n                ? negativePattern.replace(/-/g, '+')\n                : \"+\" + zeroPattern;\n    }\n}\n// Find the CLDR pattern for compact notation based on the magnitude of data and style.\n//\n// Example return value: \"{c:laki}000;{c:laki}-0\" (`sw` locale):\n// - Notice the `{c:...}` token that wraps the compact literal.\n// - The consecutive zeros are normalized to single zero to match CLDR_NUMBER_PATTERN.\n//\n// Returning null means the compact display pattern cannot be found.\nfunction getCompactDisplayPattern(numberResult, pl, data, style, compactDisplay, currencyDisplay, numberingSystem) {\n    var _a;\n    var roundedNumber = numberResult.roundedNumber, sign = numberResult.sign, magnitude = numberResult.magnitude;\n    var magnitudeKey = String(Math.pow(10, magnitude));\n    var defaultNumberingSystem = data.numbers.nu[0];\n    var pattern;\n    if (style === 'currency' && currencyDisplay !== 'name') {\n        var byNumberingSystem = data.numbers.currency;\n        var currencyData = byNumberingSystem[numberingSystem] ||\n            byNumberingSystem[defaultNumberingSystem];\n        // NOTE: compact notation ignores currencySign!\n        var compactPluralRules = (_a = currencyData.short) === null || _a === void 0 ? void 0 : _a[magnitudeKey];\n        if (!compactPluralRules) {\n            return null;\n        }\n        pattern = selectPlural(pl, roundedNumber, compactPluralRules);\n    }\n    else {\n        var byNumberingSystem = data.numbers.decimal;\n        var byCompactDisplay = byNumberingSystem[numberingSystem] ||\n            byNumberingSystem[defaultNumberingSystem];\n        var compactPlaralRule = byCompactDisplay[compactDisplay][magnitudeKey];\n        if (!compactPlaralRule) {\n            return null;\n        }\n        pattern = selectPlural(pl, roundedNumber, compactPlaralRule);\n    }\n    // See https://unicode.org/reports/tr35/tr35-numbers.html#Compact_Number_Formats\n    // > If the value is precisely 0, either explicit or defaulted, then the normal number format\n    // > pattern for that sort of object is supplied.\n    if (pattern === '0') {\n        return null;\n    }\n    pattern = getPatternForSign(pattern, sign)\n        // Extract compact literal from the pattern\n        .replace(/([^\\s;\\-\\+\\d]+)/g, '{c:$1}')\n        // We replace one or more zeros with a single zero so it matches `CLDR_NUMBER_PATTERN`.\n        .replace(/0+/, '0');\n    return pattern;\n}\nfunction selectPlural(pl, x, rules) {\n    return rules[pl.select(x)] || rules.other;\n}\n","import { FormatNumericToString } from './FormatNumericToString';\nimport { SameValue } from '../262';\nimport { ComputeExponent } from './ComputeExponent';\nimport formatToParts from './format_to_parts';\n/**\n * https://tc39.es/ecma402/#sec-formatnumberstring\n */\nexport function PartitionNumberPattern(numberFormat, x, _a) {\n    var _b;\n    var getInternalSlots = _a.getInternalSlots;\n    var internalSlots = getInternalSlots(numberFormat);\n    var pl = internalSlots.pl, dataLocaleData = internalSlots.dataLocaleData, numberingSystem = internalSlots.numberingSystem;\n    var symbols = dataLocaleData.numbers.symbols[numberingSystem] ||\n        dataLocaleData.numbers.symbols[dataLocaleData.numbers.nu[0]];\n    var magnitude = 0;\n    var exponent = 0;\n    var n;\n    if (isNaN(x)) {\n        n = symbols.nan;\n    }\n    else if (!isFinite(x)) {\n        n = symbols.infinity;\n    }\n    else {\n        if (internalSlots.style === 'percent') {\n            x *= 100;\n        }\n        ;\n        _b = ComputeExponent(numberFormat, x, {\n            getInternalSlots: getInternalSlots,\n        }), exponent = _b[0], magnitude = _b[1];\n        // Preserve more precision by doing multiplication when exponent is negative.\n        x = exponent < 0 ? x * Math.pow(10, -exponent) : x / Math.pow(10, exponent);\n        var formatNumberResult = FormatNumericToString(internalSlots, x);\n        n = formatNumberResult.formattedString;\n        x = formatNumberResult.roundedNumber;\n    }\n    // Based on https://tc39.es/ecma402/#sec-getnumberformatpattern\n    // We need to do this before `x` is rounded.\n    var sign;\n    var signDisplay = internalSlots.signDisplay;\n    switch (signDisplay) {\n        case 'never':\n            sign = 0;\n            break;\n        case 'auto':\n            if (SameValue(x, 0) || x > 0 || isNaN(x)) {\n                sign = 0;\n            }\n            else {\n                sign = -1;\n            }\n            break;\n        case 'always':\n            if (SameValue(x, 0) || x > 0 || isNaN(x)) {\n                sign = 1;\n            }\n            else {\n                sign = -1;\n            }\n            break;\n        default:\n            // x === 0 -> x is 0 or x is -0\n            if (x === 0 || isNaN(x)) {\n                sign = 0;\n            }\n            else if (x > 0) {\n                sign = 1;\n            }\n            else {\n                sign = -1;\n            }\n    }\n    return formatToParts({ roundedNumber: x, formattedString: n, exponent: exponent, magnitude: magnitude, sign: sign }, internalSlots.dataLocaleData, pl, internalSlots);\n}\n","import { PartitionNumberPattern } from './PartitionNumberPattern';\nimport { ArrayCreate } from '../262';\nexport function FormatNumericToParts(nf, x, implDetails) {\n    var parts = PartitionNumberPattern(nf, x, implDetails);\n    var result = ArrayCreate(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result.push({\n            type: part.type,\n            value: part.value,\n        });\n    }\n    return result;\n}\n","import { GetOption } from '../GetOption';\nimport { IsWellFormedCurrencyCode } from '../IsWellFormedCurrencyCode';\nimport { IsWellFormedUnitIdentifier } from '../IsWellFormedUnitIdentifier';\n/**\n * https://tc39.es/ecma402/#sec-setnumberformatunitoptions\n */\nexport function SetNumberFormatUnitOptions(nf, options, _a) {\n    if (options === void 0) { options = Object.create(null); }\n    var getInternalSlots = _a.getInternalSlots;\n    var internalSlots = getInternalSlots(nf);\n    var style = GetOption(options, 'style', 'string', ['decimal', 'percent', 'currency', 'unit'], 'decimal');\n    internalSlots.style = style;\n    var currency = GetOption(options, 'currency', 'string', undefined, undefined);\n    if (currency !== undefined && !IsWellFormedCurrencyCode(currency)) {\n        throw RangeError('Malformed currency code');\n    }\n    if (style === 'currency' && currency === undefined) {\n        throw TypeError('currency cannot be undefined');\n    }\n    var currencyDisplay = GetOption(options, 'currencyDisplay', 'string', ['code', 'symbol', 'narrowSymbol', 'name'], 'symbol');\n    var currencySign = GetOption(options, 'currencySign', 'string', ['standard', 'accounting'], 'standard');\n    var unit = GetOption(options, 'unit', 'string', undefined, undefined);\n    if (unit !== undefined && !IsWellFormedUnitIdentifier(unit)) {\n        throw RangeError('Invalid unit argument for Intl.NumberFormat()');\n    }\n    if (style === 'unit' && unit === undefined) {\n        throw TypeError('unit cannot be undefined');\n    }\n    var unitDisplay = GetOption(options, 'unitDisplay', 'string', ['short', 'narrow', 'long'], 'short');\n    if (style === 'currency') {\n        internalSlots.currency = currency.toUpperCase();\n        internalSlots.currencyDisplay = currencyDisplay;\n        internalSlots.currencySign = currencySign;\n    }\n    if (style === 'unit') {\n        internalSlots.unit = unit;\n        internalSlots.unitDisplay = unitDisplay;\n    }\n}\n","import { GetNumberOption } from '../GetNumberOption';\nimport { DefaultNumberOption } from '../DefaultNumberOption';\n/**\n * https://tc39.es/ecma402/#sec-setnfdigitoptions\n */\nexport function SetNumberFormatDigitOptions(internalSlots, opts, mnfdDefault, mxfdDefault, notation) {\n    var mnid = GetNumberOption(opts, 'minimumIntegerDigits', 1, 21, 1);\n    var mnfd = opts.minimumFractionDigits;\n    var mxfd = opts.maximumFractionDigits;\n    var mnsd = opts.minimumSignificantDigits;\n    var mxsd = opts.maximumSignificantDigits;\n    internalSlots.minimumIntegerDigits = mnid;\n    if (mnsd !== undefined || mxsd !== undefined) {\n        internalSlots.roundingType = 'significantDigits';\n        mnsd = DefaultNumberOption(mnsd, 1, 21, 1);\n        mxsd = DefaultNumberOption(mxsd, mnsd, 21, 21);\n        internalSlots.minimumSignificantDigits = mnsd;\n        internalSlots.maximumSignificantDigits = mxsd;\n    }\n    else if (mnfd !== undefined || mxfd !== undefined) {\n        internalSlots.roundingType = 'fractionDigits';\n        mnfd = DefaultNumberOption(mnfd, 0, 20, mnfdDefault);\n        var mxfdActualDefault = Math.max(mnfd, mxfdDefault);\n        mxfd = DefaultNumberOption(mxfd, mnfd, 20, mxfdActualDefault);\n        internalSlots.minimumFractionDigits = mnfd;\n        internalSlots.maximumFractionDigits = mxfd;\n    }\n    else if (notation === 'compact') {\n        internalSlots.roundingType = 'compactRounding';\n    }\n    else {\n        internalSlots.roundingType = 'fractionDigits';\n        internalSlots.minimumFractionDigits = mnfdDefault;\n        internalSlots.maximumFractionDigits = mxfdDefault;\n    }\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { SetNumberFormatUnitOptions } from './SetNumberFormatUnitOptions';\nimport { CurrencyDigits } from './CurrencyDigits';\nimport { SetNumberFormatDigitOptions } from './SetNumberFormatDigitOptions';\nimport { invariant } from '../utils';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\n/**\n * https://tc39.es/ecma402/#sec-initializenumberformat\n */\nexport function InitializeNumberFormat(nf, locales, opts, _a) {\n    var getInternalSlots = _a.getInternalSlots, localeData = _a.localeData, availableLocales = _a.availableLocales, numberingSystemNames = _a.numberingSystemNames, getDefaultLocale = _a.getDefaultLocale, currencyDigitsData = _a.currencyDigitsData;\n    // @ts-ignore\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var options = CoerceOptionsToObject(opts);\n    var opt = Object.create(null);\n    var matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    opt.localeMatcher = matcher;\n    var numberingSystem = GetOption(options, 'numberingSystem', 'string', undefined, undefined);\n    if (numberingSystem !== undefined &&\n        numberingSystemNames.indexOf(numberingSystem) < 0) {\n        // 8.a. If numberingSystem does not match the Unicode Locale Identifier type nonterminal,\n        // throw a RangeError exception.\n        throw RangeError(\"Invalid numberingSystems: \" + numberingSystem);\n    }\n    opt.nu = numberingSystem;\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, \n    // [[RelevantExtensionKeys]] slot, which is a constant\n    ['nu'], localeData, getDefaultLocale);\n    var dataLocaleData = localeData[r.dataLocale];\n    invariant(!!dataLocaleData, \"Missing locale data for \" + r.dataLocale);\n    var internalSlots = getInternalSlots(nf);\n    internalSlots.locale = r.locale;\n    internalSlots.dataLocale = r.dataLocale;\n    internalSlots.numberingSystem = r.nu;\n    internalSlots.dataLocaleData = dataLocaleData;\n    SetNumberFormatUnitOptions(nf, options, { getInternalSlots: getInternalSlots });\n    var style = internalSlots.style;\n    var mnfdDefault;\n    var mxfdDefault;\n    if (style === 'currency') {\n        var currency = internalSlots.currency;\n        var cDigits = CurrencyDigits(currency, { currencyDigitsData: currencyDigitsData });\n        mnfdDefault = cDigits;\n        mxfdDefault = cDigits;\n    }\n    else {\n        mnfdDefault = 0;\n        mxfdDefault = style === 'percent' ? 0 : 3;\n    }\n    var notation = GetOption(options, 'notation', 'string', ['standard', 'scientific', 'engineering', 'compact'], 'standard');\n    internalSlots.notation = notation;\n    SetNumberFormatDigitOptions(internalSlots, options, mnfdDefault, mxfdDefault, notation);\n    var compactDisplay = GetOption(options, 'compactDisplay', 'string', ['short', 'long'], 'short');\n    if (notation === 'compact') {\n        internalSlots.compactDisplay = compactDisplay;\n    }\n    var useGrouping = GetOption(options, 'useGrouping', 'boolean', undefined, true);\n    internalSlots.useGrouping = useGrouping;\n    var signDisplay = GetOption(options, 'signDisplay', 'string', ['auto', 'never', 'always', 'exceptZero'], 'auto');\n    internalSlots.signDisplay = signDisplay;\n    return nf;\n}\n","import { invariant } from '../utils';\nimport { ToNumber } from '../262';\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-getoperands\n * @param s\n */\nexport function GetOperands(s) {\n    invariant(typeof s === 'string', \"GetOperands should have been called with a string\");\n    var n = ToNumber(s);\n    invariant(isFinite(n), 'n should be finite');\n    var dp = s.indexOf('.');\n    var iv;\n    var f;\n    var v;\n    var fv = '';\n    if (dp === -1) {\n        iv = n;\n        f = 0;\n        v = 0;\n    }\n    else {\n        iv = s.slice(0, dp);\n        fv = s.slice(dp, s.length);\n        f = ToNumber(fv);\n        v = fv.length;\n    }\n    var i = Math.abs(ToNumber(iv));\n    var w;\n    var t;\n    if (f !== 0) {\n        var ft = fv.replace(/0+$/, '');\n        w = ft.length;\n        t = ToNumber(ft);\n    }\n    else {\n        w = 0;\n        t = 0;\n    }\n    return {\n        Number: n,\n        IntegerDigits: i,\n        NumberOfFractionDigits: v,\n        NumberOfFractionDigitsWithoutTrailing: w,\n        FractionDigits: f,\n        FractionDigitsWithoutTrailing: t,\n    };\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { SetNumberFormatDigitOptions } from '../NumberFormat/SetNumberFormatDigitOptions';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\nexport function InitializePluralRules(pl, locales, options, _a) {\n    var availableLocales = _a.availableLocales, relevantExtensionKeys = _a.relevantExtensionKeys, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale, getInternalSlots = _a.getInternalSlots;\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var opt = Object.create(null);\n    var opts = CoerceOptionsToObject(options);\n    var internalSlots = getInternalSlots(pl);\n    internalSlots.initializedPluralRules = true;\n    var matcher = GetOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n    opt.localeMatcher = matcher;\n    internalSlots.type = GetOption(opts, 'type', 'string', ['cardinal', 'ordinal'], 'cardinal');\n    SetNumberFormatDigitOptions(internalSlots, opts, 0, 3, 'standard');\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    internalSlots.locale = r.locale;\n    return pl;\n}\n","import { invariant } from '../utils';\nimport { Type } from '../262';\nimport { FormatNumericToString } from '../NumberFormat/FormatNumericToString';\nimport { GetOperands } from './GetOperands';\n/**\n * http://ecma-international.org/ecma-402/7.0/index.html#sec-resolveplural\n * @param pl\n * @param n\n * @param PluralRuleSelect Has to pass in bc it's implementation-specific\n */\nexport function ResolvePlural(pl, n, _a) {\n    var getInternalSlots = _a.getInternalSlots, PluralRuleSelect = _a.PluralRuleSelect;\n    var internalSlots = getInternalSlots(pl);\n    invariant(Type(internalSlots) === 'Object', 'pl has to be an object');\n    invariant('initializedPluralRules' in internalSlots, 'pluralrules must be initialized');\n    invariant(Type(n) === 'Number', 'n must be a number');\n    if (!isFinite(n)) {\n        return 'other';\n    }\n    var locale = internalSlots.locale, type = internalSlots.type;\n    var res = FormatNumericToString(internalSlots, n);\n    var s = res.formattedString;\n    var operands = GetOperands(s);\n    return PluralRuleSelect(locale, type, n, operands);\n}\n","import { invariant } from '../utils';\nimport { Type } from '../262';\n/**\n * https://tc39.es/proposal-intl-relative-time/#sec-singularrelativetimeunit\n * @param unit\n */\nexport function SingularRelativeTimeUnit(unit) {\n    invariant(Type(unit) === 'String', 'unit must be a string');\n    if (unit === 'seconds')\n        return 'second';\n    if (unit === 'minutes')\n        return 'minute';\n    if (unit === 'hours')\n        return 'hour';\n    if (unit === 'days')\n        return 'day';\n    if (unit === 'weeks')\n        return 'week';\n    if (unit === 'months')\n        return 'month';\n    if (unit === 'quarters')\n        return 'quarter';\n    if (unit === 'years')\n        return 'year';\n    if (unit !== 'second' &&\n        unit !== 'minute' &&\n        unit !== 'hour' &&\n        unit !== 'day' &&\n        unit !== 'week' &&\n        unit !== 'month' &&\n        unit !== 'quarter' &&\n        unit !== 'year') {\n        throw new RangeError('invalid unit');\n    }\n    return unit;\n}\n","import { PartitionPattern } from '../PartitionPattern';\nimport { invariant } from '../utils';\nexport function MakePartsList(pattern, unit, parts) {\n    var patternParts = PartitionPattern(pattern);\n    var result = [];\n    for (var _i = 0, patternParts_1 = patternParts; _i < patternParts_1.length; _i++) {\n        var patternPart = patternParts_1[_i];\n        if (patternPart.type === 'literal') {\n            result.push({\n                type: 'literal',\n                value: patternPart.value,\n            });\n        }\n        else {\n            invariant(patternPart.type === '0', \"Malformed pattern \" + pattern);\n            for (var _a = 0, parts_1 = parts; _a < parts_1.length; _a++) {\n                var part = parts_1[_a];\n                result.push({\n                    type: part.type,\n                    value: part.value,\n                    unit: unit,\n                });\n            }\n        }\n    }\n    return result;\n}\n","import { invariant } from '../utils';\nimport { SingularRelativeTimeUnit } from './SingularRelativeTimeUnit';\nimport { MakePartsList } from './MakePartsList';\nimport { ToString, Type, SameValue } from '../262';\nexport function PartitionRelativeTimePattern(rtf, value, unit, _a) {\n    var getInternalSlots = _a.getInternalSlots;\n    invariant(Type(value) === 'Number', \"value must be number, instead got \" + typeof value, TypeError);\n    invariant(Type(unit) === 'String', \"unit must be number, instead got \" + typeof value, TypeError);\n    if (isNaN(value) || !isFinite(value)) {\n        throw new RangeError(\"Invalid value \" + value);\n    }\n    var resolvedUnit = SingularRelativeTimeUnit(unit);\n    var _b = getInternalSlots(rtf), fields = _b.fields, style = _b.style, numeric = _b.numeric, pluralRules = _b.pluralRules, numberFormat = _b.numberFormat;\n    var entry = resolvedUnit;\n    if (style === 'short') {\n        entry = resolvedUnit + \"-short\";\n    }\n    else if (style === 'narrow') {\n        entry = resolvedUnit + \"-narrow\";\n    }\n    if (!(entry in fields)) {\n        entry = resolvedUnit;\n    }\n    var patterns = fields[entry];\n    if (numeric === 'auto') {\n        if (ToString(value) in patterns) {\n            return [\n                {\n                    type: 'literal',\n                    value: patterns[ToString(value)],\n                },\n            ];\n        }\n    }\n    var tl = 'future';\n    if (SameValue(value, -0) || value < 0) {\n        tl = 'past';\n    }\n    var po = patterns[tl];\n    var fv = typeof numberFormat.formatToParts === 'function'\n        ? numberFormat.formatToParts(Math.abs(value))\n        : // TODO: If formatToParts is not supported, we assume the whole formatted\n            // number is a part\n            [\n                {\n                    type: 'literal',\n                    value: numberFormat.format(Math.abs(value)),\n                    unit: unit,\n                },\n            ];\n    var pr = pluralRules.select(value);\n    var pattern = po[pr];\n    return MakePartsList(pattern, resolvedUnit, fv);\n}\n","import { PartitionRelativeTimePattern } from './PartitionRelativeTimePattern';\nexport function FormatRelativeTime(rtf, value, unit, implDetails) {\n    var parts = PartitionRelativeTimePattern(rtf, value, unit, implDetails);\n    var result = '';\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        result += part.value;\n    }\n    return result;\n}\n","import { PartitionRelativeTimePattern } from './PartitionRelativeTimePattern';\nimport { ArrayCreate } from '../262';\nexport function FormatRelativeTimeToParts(rtf, value, unit, implDetails) {\n    var parts = PartitionRelativeTimePattern(rtf, value, unit, implDetails);\n    var result = ArrayCreate(0);\n    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n        var part = parts_1[_i];\n        var o = {\n            type: part.type,\n            value: part.value,\n        };\n        if ('unit' in part) {\n            o.unit = part.unit;\n        }\n        result.push(o);\n    }\n    return result;\n}\n","import { CanonicalizeLocaleList } from '../CanonicalizeLocaleList';\nimport { GetOption } from '../GetOption';\nimport { ResolveLocale } from '../ResolveLocale';\nimport { invariant } from '../utils';\nimport { CoerceOptionsToObject } from '../CoerceOptionsToObject';\nvar NUMBERING_SYSTEM_REGEX = /^[a-z0-9]{3,8}(-[a-z0-9]{3,8})*$/i;\nexport function InitializeRelativeTimeFormat(rtf, locales, options, _a) {\n    var getInternalSlots = _a.getInternalSlots, availableLocales = _a.availableLocales, relevantExtensionKeys = _a.relevantExtensionKeys, localeData = _a.localeData, getDefaultLocale = _a.getDefaultLocale;\n    var internalSlots = getInternalSlots(rtf);\n    internalSlots.initializedRelativeTimeFormat = true;\n    var requestedLocales = CanonicalizeLocaleList(locales);\n    var opt = Object.create(null);\n    var opts = CoerceOptionsToObject(options);\n    var matcher = GetOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n    opt.localeMatcher = matcher;\n    var numberingSystem = GetOption(opts, \n    // @ts-expect-error TS option is wack\n    'numberingSystem', 'string', undefined, undefined);\n    if (numberingSystem !== undefined) {\n        if (!NUMBERING_SYSTEM_REGEX.test(numberingSystem)) {\n            throw new RangeError(\"Invalid numbering system \" + numberingSystem);\n        }\n    }\n    opt.nu = numberingSystem;\n    var r = ResolveLocale(availableLocales, requestedLocales, opt, relevantExtensionKeys, localeData, getDefaultLocale);\n    var locale = r.locale, nu = r.nu;\n    internalSlots.locale = locale;\n    internalSlots.style = GetOption(opts, 'style', 'string', ['long', 'narrow', 'short'], 'long');\n    internalSlots.numeric = GetOption(opts, 'numeric', 'string', ['always', 'auto'], 'always');\n    var fields = localeData[r.dataLocale];\n    invariant(!!fields, \"Missing locale data for \" + r.dataLocale);\n    internalSlots.fields = fields;\n    internalSlots.numberFormat = new Intl.NumberFormat(locales);\n    internalSlots.pluralRules = new Intl.PluralRules(locales);\n    internalSlots.numberingSystem = nu;\n    return rtf;\n}\n","import { __extends } from \"tslib\";\nvar MissingLocaleDataError = /** @class */ (function (_super) {\n    __extends(MissingLocaleDataError, _super);\n    function MissingLocaleDataError() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'MISSING_LOCALE_DATA';\n        return _this;\n    }\n    return MissingLocaleDataError;\n}(Error));\nexport function isMissingLocaleDataError(e) {\n    return e.type === 'MISSING_LOCALE_DATA';\n}\n","import { ToObject } from './262';\nimport { GetOption } from './GetOption';\nimport { LookupSupportedLocales } from './LookupSupportedLocales';\n/**\n * https://tc39.es/ecma402/#sec-supportedlocales\n * @param availableLocales\n * @param requestedLocales\n * @param options\n */\nexport function SupportedLocales(availableLocales, requestedLocales, options) {\n    var matcher = 'best fit';\n    if (options !== undefined) {\n        options = ToObject(options);\n        matcher = GetOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    }\n    if (matcher === 'best fit') {\n        return LookupSupportedLocales(availableLocales, requestedLocales);\n    }\n    return LookupSupportedLocales(availableLocales, requestedLocales);\n}\n","import { UNICODE_EXTENSION_SEQUENCE_REGEX } from './utils';\nimport { BestAvailableLocale } from './BestAvailableLocale';\n/**\n * https://tc39.es/ecma402/#sec-lookupsupportedlocales\n * @param availableLocales\n * @param requestedLocales\n */\nexport function LookupSupportedLocales(availableLocales, requestedLocales) {\n    var subset = [];\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n        var locale = requestedLocales_1[_i];\n        var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        var availableLocale = BestAvailableLocale(availableLocales, noExtensionLocale);\n        if (availableLocale) {\n            subset.push(availableLocale);\n        }\n    }\n    return subset;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar _1 = tslib_1.__importDefault(require(\"./\"));\nvar should_polyfill_1 = require(\"./should-polyfill\");\nif (should_polyfill_1.shouldPolyfill()) {\n    Object.defineProperty(Intl, 'RelativeTimeFormat', {\n        value: _1.default,\n        writable: true,\n        enumerable: false,\n        configurable: true,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldPolyfill = void 0;\nfunction shouldPolyfill() {\n    return typeof Intl === 'undefined' || !('RelativeTimeFormat' in Intl);\n}\nexports.shouldPolyfill = shouldPolyfill;\n","/*\n * anime.js v3.0.1\n * (c) 2020 Julian Garnier\n * Released under the MIT license\n * animejs.com\n */\n\n// Defaults\n\nvar defaultInstanceSettings = {\n  update: null,\n  begin: null,\n  loopBegin: null,\n  changeBegin: null,\n  change: null,\n  changeComplete: null,\n  loopComplete: null,\n  complete: null,\n  loop: 1,\n  direction: 'normal',\n  autoplay: true,\n  timelineOffset: 0\n};\n\nvar defaultTweenSettings = {\n  duration: 1000,\n  delay: 0,\n  endDelay: 0,\n  easing: 'easeOutElastic(1, .5)',\n  round: 0\n};\n\nvar validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective'];\n\n// Caching\n\nvar cache = {\n  CSS: {},\n  springs: {}\n};\n\n// Utils\n\nfunction minMax(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\nfunction stringContains(str, text) {\n  return str.indexOf(text) > -1;\n}\n\nfunction applyArguments(func, args) {\n  return func.apply(null, args);\n}\n\nvar is = {\n  arr: function (a) { return Array.isArray(a); },\n  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },\n  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },\n  svg: function (a) { return a instanceof SVGElement; },\n  inp: function (a) { return a instanceof HTMLInputElement; },\n  dom: function (a) { return a.nodeType || is.svg(a); },\n  str: function (a) { return typeof a === 'string'; },\n  fnc: function (a) { return typeof a === 'function'; },\n  und: function (a) { return typeof a === 'undefined'; },\n  hex: function (a) { return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a); },\n  rgb: function (a) { return /^rgb/.test(a); },\n  hsl: function (a) { return /^hsl/.test(a); },\n  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },\n  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; }\n};\n\n// Easings\n\nfunction parseEasingParameters(string) {\n  var match = /\\(([^)]+)\\)/.exec(string);\n  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];\n}\n\n// Spring solver inspired by Webkit Copyright  2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\n\nfunction spring(string, duration) {\n\n  var params = parseEasingParameters(string);\n  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);\n  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);\n  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);\n  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  function solver(t) {\n    var progress = duration ? (duration * t) / 1000 : t;\n    if (zeta < 1) {\n      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n    } else {\n      progress = (a + b * progress) * Math.exp(-progress * w0);\n    }\n    if (t === 0 || t === 1) { return t; }\n    return 1 - progress;\n  }\n\n  function getDuration() {\n    var cached = cache.springs[string];\n    if (cached) { return cached; }\n    var frame = 1/6;\n    var elapsed = 0;\n    var rest = 0;\n    while(true) {\n      elapsed += frame;\n      if (solver(elapsed) === 1) {\n        rest++;\n        if (rest >= 16) { break; }\n      } else {\n        rest = 0;\n      }\n    }\n    var duration = elapsed * frame * 1000;\n    cache.springs[string] = duration;\n    return duration;\n  }\n\n  return duration ? solver : getDuration;\n\n}\n\n// Elastic easing adapted from jQueryUI http://api.jqueryui.com/easings/\n\nfunction elastic(amplitude, period) {\n  if ( amplitude === void 0 ) amplitude = 1;\n  if ( period === void 0 ) period = .5;\n\n  var a = minMax(amplitude, 1, 10);\n  var p = minMax(period, .1, 2);\n  return function (t) {\n    return (t === 0 || t === 1) ? t : \n      -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);\n  }\n}\n\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\n\nfunction steps(steps) {\n  if ( steps === void 0 ) steps = 10;\n\n  return function (t) { return Math.round(t * steps) * (1 / steps); };\n}\n\n// BezierEasing https://github.com/gre/bezier-easing\n\nvar bezier = (function () {\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }\n  function C(aA1)      { return 3.0 * aA1 }\n\n  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }\n  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }\n\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX, currentT, i = 0;\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }\n    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\n    return currentT;\n  }\n\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < 4; ++i) {\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\n      if (currentSlope === 0.0) { return aGuessT; }\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  }\n\n  function bezier(mX1, mY1, mX2, mY2) {\n\n    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }\n    var sampleValues = new Float32Array(kSplineTableSize);\n\n    if (mX1 !== mY1 || mX2 !== mY2) {\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    }\n\n    function getTForX(aX) {\n\n      var intervalStart = 0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n\n      --currentSample;\n\n      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n\n      if (initialSlope >= 0.001) {\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n      } else if (initialSlope === 0.0) {\n        return guessForT;\n      } else {\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n\n    }\n\n    return function (x) {\n      if (mX1 === mY1 && mX2 === mY2) { return x; }\n      if (x === 0 || x === 1) { return x; }\n      return calcBezier(getTForX(x), mY1, mY2);\n    }\n\n  }\n\n  return bezier;\n\n})();\n\nvar penner = (function () {\n\n  var names = ['Quad', 'Cubic', 'Quart', 'Quint', 'Sine', 'Expo', 'Circ', 'Back', 'Elastic'];\n\n  // Approximated Penner equations http://matthewlein.com/ceaser/\n\n  var curves = {\n    In: [\n      [0.550, 0.085, 0.680, 0.530], /* inQuad */\n      [0.550, 0.055, 0.675, 0.190], /* inCubic */\n      [0.895, 0.030, 0.685, 0.220], /* inQuart */\n      [0.755, 0.050, 0.855, 0.060], /* inQuint */\n      [0.470, 0.000, 0.745, 0.715], /* inSine */\n      [0.950, 0.050, 0.795, 0.035], /* inExpo */\n      [0.600, 0.040, 0.980, 0.335], /* inCirc */\n      [0.600,-0.280, 0.735, 0.045], /* inBack */\n      elastic /* inElastic */\n    ],\n    Out: [\n      [0.250, 0.460, 0.450, 0.940], /* outQuad */\n      [0.215, 0.610, 0.355, 1.000], /* outCubic */\n      [0.165, 0.840, 0.440, 1.000], /* outQuart */\n      [0.230, 1.000, 0.320, 1.000], /* outQuint */\n      [0.390, 0.575, 0.565, 1.000], /* outSine */\n      [0.190, 1.000, 0.220, 1.000], /* outExpo */\n      [0.075, 0.820, 0.165, 1.000], /* outCirc */\n      [0.175, 0.885, 0.320, 1.275], /* outBack */\n      function (a, p) { return function (t) { return 1 - elastic(a, p)(1 - t); }; } /* outElastic */\n    ],\n    InOut: [\n      [0.455, 0.030, 0.515, 0.955], /* inOutQuad */\n      [0.645, 0.045, 0.355, 1.000], /* inOutCubic */\n      [0.770, 0.000, 0.175, 1.000], /* inOutQuart */\n      [0.860, 0.000, 0.070, 1.000], /* inOutQuint */\n      [0.445, 0.050, 0.550, 0.950], /* inOutSine */\n      [1.000, 0.000, 0.000, 1.000], /* inOutExpo */\n      [0.785, 0.135, 0.150, 0.860], /* inOutCirc */\n      [0.680,-0.550, 0.265, 1.550], /* inOutBack */\n      function (a, p) { return function (t) { return t < .5 ? elastic(a, p)(t * 2) / 2 : 1 - elastic(a, p)(t * -2 + 2) / 2; }; } /* inOutElastic */\n    ]\n  };\n\n  var eases = { \n    linear: [0.250, 0.250, 0.750, 0.750]\n  };\n\n  var loop = function ( coords ) {\n    curves[coords].forEach(function (ease, i) {\n      eases['ease'+coords+names[i]] = ease;\n    });\n  };\n\n  for (var coords in curves) loop( coords );\n\n  return eases;\n\n})();\n\nfunction parseEasings(easing, duration) {\n  if (is.fnc(easing)) { return easing; }\n  var name = easing.split('(')[0];\n  var ease = penner[name];\n  var args = parseEasingParameters(easing);\n  switch (name) {\n    case 'spring' : return spring(easing, duration);\n    case 'cubicBezier' : return applyArguments(bezier, args);\n    case 'steps' : return applyArguments(steps, args);\n    default : return is.fnc(ease) ? applyArguments(ease, args) : applyArguments(bezier, ease);\n  }\n}\n\n// Strings\n\nfunction selectString(str) {\n  try {\n    var nodes = document.querySelectorAll(str);\n    return nodes;\n  } catch(e) {\n    return;\n  }\n}\n\n// Arrays\n\nfunction filterArray(arr, callback) {\n  var len = arr.length;\n  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n  var result = [];\n  for (var i = 0; i < len; i++) {\n    if (i in arr) {\n      var val = arr[i];\n      if (callback.call(thisArg, val, i, arr)) {\n        result.push(val);\n      }\n    }\n  }\n  return result;\n}\n\nfunction flattenArray(arr) {\n  return arr.reduce(function (a, b) { return a.concat(is.arr(b) ? flattenArray(b) : b); }, []);\n}\n\nfunction toArray(o) {\n  if (is.arr(o)) { return o; }\n  if (is.str(o)) { o = selectString(o) || o; }\n  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }\n  return [o];\n}\n\nfunction arrayContains(arr, val) {\n  return arr.some(function (a) { return a === val; });\n}\n\n// Objects\n\nfunction cloneObject(o) {\n  var clone = {};\n  for (var p in o) { clone[p] = o[p]; }\n  return clone;\n}\n\nfunction replaceObjectProps(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }\n  return o;\n}\n\nfunction mergeObjects(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }\n  return o;\n}\n\n// Colors\n\nfunction rgbToRgba(rgbValue) {\n  var rgb = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(rgbValue);\n  return rgb ? (\"rgba(\" + (rgb[1]) + \",1)\") : rgbValue;\n}\n\nfunction hexToRgba(hexValue) {\n  var rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  var hex = hexValue.replace(rgx, function (m, r, g, b) { return r + r + g + g + b + b; } );\n  var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  var r = parseInt(rgb[1], 16);\n  var g = parseInt(rgb[2], 16);\n  var b = parseInt(rgb[3], 16);\n  return (\"rgba(\" + r + \",\" + g + \",\" + b + \",1)\");\n}\n\nfunction hslToRgba(hslValue) {\n  var hsl = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(hslValue) || /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(hslValue);\n  var h = parseInt(hsl[1], 10) / 360;\n  var s = parseInt(hsl[2], 10) / 100;\n  var l = parseInt(hsl[3], 10) / 100;\n  var a = hsl[4] || 1;\n  function hue2rgb(p, q, t) {\n    if (t < 0) { t += 1; }\n    if (t > 1) { t -= 1; }\n    if (t < 1/6) { return p + (q - p) * 6 * t; }\n    if (t < 1/2) { return q; }\n    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }\n    return p;\n  }\n  var r, g, b;\n  if (s == 0) {\n    r = g = b = l;\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n  return (\"rgba(\" + (r * 255) + \",\" + (g * 255) + \",\" + (b * 255) + \",\" + a + \")\");\n}\n\nfunction colorToRgb(val) {\n  if (is.rgb(val)) { return rgbToRgba(val); }\n  if (is.hex(val)) { return hexToRgba(val); }\n  if (is.hsl(val)) { return hslToRgba(val); }\n}\n\n// Units\n\nfunction getUnit(val) {\n  var split = /([\\+\\-]?[0-9#\\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);\n  if (split) { return split[2]; }\n}\n\nfunction getTransformUnit(propName) {\n  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }\n  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }\n}\n\n// Values\n\nfunction getFunctionValue(val, animatable) {\n  if (!is.fnc(val)) { return val; }\n  return val(animatable.target, animatable.id, animatable.total);\n}\n\nfunction getAttribute(el, prop) {\n  return el.getAttribute(prop);\n}\n\nfunction convertPxToUnit(el, value, unit) {\n  var valueUnit = getUnit(value);\n  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }\n  var cached = cache.CSS[value + unit];\n  if (!is.und(cached)) { return cached; }\n  var baseline = 100;\n  var tempEl = document.createElement(el.tagName);\n  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;\n  parentEl.appendChild(tempEl);\n  tempEl.style.position = 'absolute';\n  tempEl.style.width = baseline + unit;\n  var factor = baseline / tempEl.offsetWidth;\n  parentEl.removeChild(tempEl);\n  var convertedUnit = factor * parseFloat(value);\n  cache.CSS[value + unit] = convertedUnit;\n  return convertedUnit;\n}\n\nfunction getCSSValue(el, prop, unit) {\n  if (prop in el.style) {\n    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';\n    return unit ? convertPxToUnit(el, value, unit) : value;\n  }\n}\n\nfunction getAnimationType(el, prop) {\n  if (is.dom(el) && !is.inp(el) && (getAttribute(el, prop) || (is.svg(el) && el[prop]))) { return 'attribute'; }\n  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }\n  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }\n  if (el[prop] != null) { return 'object'; }\n}\n\nfunction getElementTransforms(el) {\n  if (!is.dom(el)) { return; }\n  var str = el.style.transform || '';\n  var reg  = /(\\w+)\\(([^)]*)\\)/g;\n  var transforms = new Map();\n  var m; while (m = reg.exec(str)) { transforms.set(m[1], m[2]); }\n  return transforms;\n}\n\nfunction getTransformValue(el, propName, animatable, unit) {\n  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);\n  var value = getElementTransforms(el).get(propName) || defaultVal;\n  if (animatable) {\n    animatable.transforms.list.set(propName, value);\n    animatable.transforms['last'] = propName;\n  }\n  return unit ? convertPxToUnit(el, value, unit) : value;\n}\n\nfunction getOriginalTargetValue(target, propName, unit, animatable) {\n  switch (getAnimationType(target, propName)) {\n    case 'transform': return getTransformValue(target, propName, animatable, unit);\n    case 'css': return getCSSValue(target, propName, unit);\n    case 'attribute': return getAttribute(target, propName);\n    default: return target[propName] || 0;\n  }\n}\n\nfunction getRelativeValue(to, from) {\n  var operator = /^(\\*=|\\+=|-=)/.exec(to);\n  if (!operator) { return to; }\n  var u = getUnit(to) || 0;\n  var x = parseFloat(from);\n  var y = parseFloat(to.replace(operator[0], ''));\n  switch (operator[0][0]) {\n    case '+': return x + y + u;\n    case '-': return x - y + u;\n    case '*': return x * y + u;\n  }\n}\n\nfunction validateValue(val, unit) {\n  if (is.col(val)) { return colorToRgb(val); }\n  var originalUnit = getUnit(val);\n  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\n  return unit && !/\\s/g.test(val) ? unitLess + unit : unitLess;\n}\n\n// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes\n// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n\nfunction getCircleLength(el) {\n  return Math.PI * 2 * getAttribute(el, 'r');\n}\n\nfunction getRectLength(el) {\n  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);\n}\n\nfunction getLineLength(el) {\n  return getDistance(\n    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')}, \n    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}\n  );\n}\n\nfunction getPolylineLength(el) {\n  var points = el.points;\n  var totalLength = 0;\n  var previousPos;\n  for (var i = 0 ; i < points.numberOfItems; i++) {\n    var currentPos = points.getItem(i);\n    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }\n    previousPos = currentPos;\n  }\n  return totalLength;\n}\n\nfunction getPolygonLength(el) {\n  var points = el.points;\n  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\n}\n\n// Path animation\n\nfunction getTotalLength(el) {\n  if (el.getTotalLength) { return el.getTotalLength(); }\n  switch(el.tagName.toLowerCase()) {\n    case 'circle': return getCircleLength(el);\n    case 'rect': return getRectLength(el);\n    case 'line': return getLineLength(el);\n    case 'polyline': return getPolylineLength(el);\n    case 'polygon': return getPolygonLength(el);\n  }\n}\n\nfunction setDashoffset(el) {\n  var pathLength = getTotalLength(el);\n  el.setAttribute('stroke-dasharray', pathLength);\n  return pathLength;\n}\n\n// Motion path\n\nfunction getParentSvgEl(el) {\n  var parentEl = el.parentNode;\n  while (is.svg(parentEl)) {\n    parentEl = parentEl.parentNode;\n    if (!is.svg(parentEl.parentNode)) { break; }\n  }\n  return parentEl;\n}\n\nfunction getParentSvg(pathEl, svgData) {\n  var svg = svgData || {};\n  var parentSvgEl = svg.el || getParentSvgEl(pathEl);\n  var rect = parentSvgEl.getBoundingClientRect();\n  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');\n  var width = rect.width;\n  var height = rect.height;\n  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);\n  return {\n    el: parentSvgEl,\n    viewBox: viewBox,\n    x: viewBox[0] / 1,\n    y: viewBox[1] / 1,\n    w: width / viewBox[2],\n    h: height / viewBox[3]\n  }\n}\n\nfunction getPath(path, percent) {\n  var pathEl = is.str(path) ? selectString(path)[0] : path;\n  var p = percent || 100;\n  return function(property) {\n    return {\n      property: property,\n      el: pathEl,\n      svg: getParentSvg(pathEl),\n      totalLength: getTotalLength(pathEl) * (p / 100)\n    }\n  }\n}\n\nfunction getPathProgress(path, progress) {\n  function point(offset) {\n    if ( offset === void 0 ) offset = 0;\n\n    var l = progress + offset >= 1 ? progress + offset : 0;\n    return path.el.getPointAtLength(l);\n  }\n  var svg = getParentSvg(path.el, path.svg);\n  var p = point();\n  var p0 = point(-1);\n  var p1 = point(+1);\n  switch (path.property) {\n    case 'x': return (p.x - svg.x) * svg.w;\n    case 'y': return (p.y - svg.y) * svg.h;\n    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\n  }\n}\n\n// Decompose value\n\nfunction decomposeValue(val, unit) {\n  var rgx = /[-+]?\\d*\\.?\\d+([eE][-+]?\\d+)?/g;\n  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\n  return {\n    original: value,\n    numbers: value.match(rgx) ? value.match(rgx).map(Number) : [0],\n    strings: (is.str(val) || unit) ? value.split(rgx) : []\n  }\n}\n\n// Animatables\n\nfunction parseTargets(targets) {\n  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\n  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });\n}\n\nfunction getAnimatables(targets) {\n  var parsed = parseTargets(targets);\n  return parsed.map(function (t, i) {\n    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };\n  });\n}\n\n// Properties\n\nfunction normalizePropertyTweens(prop, tweenSettings) {\n  var settings = cloneObject(tweenSettings);\n  // Override duration if easing is a spring\n  if (/^spring/.test(settings.easing)) { settings.duration = spring(settings.easing); }\n  if (is.arr(prop)) {\n    var l = prop.length;\n    var isFromTo = (l === 2 && !is.obj(prop[0]));\n    if (!isFromTo) {\n      // Duration divided by the number of tweens\n      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }\n    } else {\n      // Transform [from, to] values shorthand to a valid tween value\n      prop = {value: prop};\n    }\n  }\n  var propArray = is.arr(prop) ? prop : [prop];\n  return propArray.map(function (v, i) {\n    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};\n    // Default delay value should only be applied to the first tween\n    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }\n    // Default endDelay value should only be applied to the last tween\n    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }\n    return obj;\n  }).map(function (k) { return mergeObjects(k, settings); });\n}\n\n\nfunction flattenKeyframes(keyframes) {\n  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })\n  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);\n  var properties = {};\n  var loop = function ( i ) {\n    var propName = propertyNames[i];\n    properties[propName] = keyframes.map(function (key) {\n      var newKey = {};\n      for (var p in key) {\n        if (is.key(p)) {\n          if (p == propName) { newKey.value = key[p]; }\n        } else {\n          newKey[p] = key[p];\n        }\n      }\n      return newKey;\n    });\n  };\n\n  for (var i = 0; i < propertyNames.length; i++) loop( i );\n  return properties;\n}\n\nfunction getProperties(tweenSettings, params) {\n  var properties = [];\n  var keyframes = params.keyframes;\n  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }\n  for (var p in params) {\n    if (is.key(p)) {\n      properties.push({\n        name: p,\n        tweens: normalizePropertyTweens(params[p], tweenSettings)\n      });\n    }\n  }\n  return properties;\n}\n\n// Tweens\n\nfunction normalizeTweenValues(tween, animatable) {\n  var t = {};\n  for (var p in tween) {\n    var value = getFunctionValue(tween[p], animatable);\n    if (is.arr(value)) {\n      value = value.map(function (v) { return getFunctionValue(v, animatable); });\n      if (value.length === 1) { value = value[0]; }\n    }\n    t[p] = value;\n  }\n  t.duration = parseFloat(t.duration);\n  t.delay = parseFloat(t.delay);\n  return t;\n}\n\nfunction normalizeTweens(prop, animatable) {\n  var previousTween;\n  return prop.tweens.map(function (t) {\n    var tween = normalizeTweenValues(t, animatable);\n    var tweenValue = tween.value;\n    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;\n    var toUnit = getUnit(to);\n    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);\n    var previousValue = previousTween ? previousTween.to.original : originalValue;\n    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\n    var fromUnit = getUnit(from) || getUnit(originalValue);\n    var unit = toUnit || fromUnit;\n    if (is.und(to)) { to = previousValue; }\n    tween.from = decomposeValue(from, unit);\n    tween.to = decomposeValue(getRelativeValue(to, from), unit);\n    tween.start = previousTween ? previousTween.end : 0;\n    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;\n    tween.easing = parseEasings(tween.easing, tween.duration);\n    tween.isPath = is.pth(tweenValue);\n    tween.isColor = is.col(tween.from.original);\n    if (tween.isColor) { tween.round = 1; }\n    previousTween = tween;\n    return tween;\n  });\n}\n\n// Tween progress\n\nvar setProgressValue = {\n  css: function (t, p, v) { return t.style[p] = v; },\n  attribute: function (t, p, v) { return t.setAttribute(p, v); },\n  object: function (t, p, v) { return t[p] = v; },\n  transform: function (t, p, v, transforms, manual) {\n    transforms.list.set(p, v);\n    if (p === transforms.last || manual) {\n      var str = '';\n      transforms.list.forEach(function (value, prop) { str += prop + \"(\" + value + \") \"; });\n      t.style.transform = str;\n    }\n  }\n};\n\n// Set Value helper\n\nfunction setTargetsValue(targets, properties) {\n  var animatables = getAnimatables(targets);\n  animatables.forEach(function (animatable) {\n    for (var property in properties) {\n      var value = getFunctionValue(properties[property], animatable);\n      var target = animatable.target;\n      var valueUnit = getUnit(value);\n      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);\n      var unit = valueUnit || getUnit(originalValue);\n      var to = getRelativeValue(validateValue(value, unit), originalValue);\n      var animType = getAnimationType(target, property);\n      setProgressValue[animType](target, property, to, animatable.transforms, true);\n    }\n  });\n}\n\n// Animations\n\nfunction createAnimation(animatable, prop) {\n  var animType = getAnimationType(animatable.target, prop.name);\n  if (animType) {\n    var tweens = normalizeTweens(prop, animatable);\n    var lastTween = tweens[tweens.length - 1];\n    return {\n      type: animType,\n      property: prop.name,\n      animatable: animatable,\n      tweens: tweens,\n      duration: lastTween.end,\n      delay: tweens[0].delay,\n      endDelay: lastTween.endDelay\n    }\n  }\n}\n\nfunction getAnimations(animatables, properties) {\n  return filterArray(flattenArray(animatables.map(function (animatable) {\n    return properties.map(function (prop) {\n      return createAnimation(animatable, prop);\n    });\n  })), function (a) { return !is.und(a); });\n}\n\n// Create Instance\n\nfunction getInstanceTimings(animations, tweenSettings) {\n  var animLength = animations.length;\n  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };\n  var timings = {};\n  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;\n  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;\n  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;\n  return timings;\n}\n\nvar instanceID = 0;\n\nfunction createNewInstance(params) {\n  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\n  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);\n  var properties = getProperties(tweenSettings, params);\n  var animatables = getAnimatables(params.targets);\n  var animations = getAnimations(animatables, properties);\n  var timings = getInstanceTimings(animations, tweenSettings);\n  var id = instanceID;\n  instanceID++;\n  return mergeObjects(instanceSettings, {\n    id: id,\n    children: [],\n    animatables: animatables,\n    animations: animations,\n    duration: timings.duration,\n    delay: timings.delay,\n    endDelay: timings.endDelay\n  });\n}\n\n// Core\n\nvar activeInstances = [];\nvar pausedInstances = [];\nvar raf;\n\nvar engine = (function () {\n  function play() { \n    raf = setTimeout(step, 5);\n  }\n  function step(t) {\n    var activeInstancesLength = activeInstances.length;\n    if (activeInstancesLength) {\n      var i = 0;\n      while (i < activeInstancesLength) {\n        var activeInstance = activeInstances[i];\n        if (!activeInstance.paused) {\n          activeInstance.tick(performance.now());\n        } else {\n          var instanceIndex = activeInstances.indexOf(activeInstance);\n          if (instanceIndex > -1) {\n            activeInstances.splice(instanceIndex, 1);\n            activeInstancesLength = activeInstances.length;\n          }\n        }\n        i++;\n      }\n      play();\n    } else {\n      raf = clearTimeout(raf);\n    }\n  }\n  return play;\n})();\n\nfunction handleVisibilityChange() {\n  if (document.hidden) {\n    activeInstances.forEach(function (ins) { return ins.pause(); });\n    pausedInstances = activeInstances.slice(0);\n    activeInstances = [];\n  } else {\n    pausedInstances.forEach(function (ins) { return ins.play(); });\n  }\n}\n\nif (typeof document !== 'undefined') {\n  document.addEventListener('visibilitychange', handleVisibilityChange);\n}\n\n// Public Instance\n\nfunction anime(params) {\n  if ( params === void 0 ) params = {};\n\n\n  var startTime = 0, lastTime = 0, now = 0;\n  var children, childrenLength = 0;\n  var resolve = null;\n\n  function makePromise(instance) {\n    var promise = window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });\n    instance.finished = promise;\n    return promise;\n  }\n\n  var instance = createNewInstance(params);\n  var promise = makePromise(instance);\n\n  function toggleInstanceDirection() {\n    var direction = instance.direction;\n    if (direction !== 'alternate') {\n      instance.direction = direction !== 'normal' ? 'normal' : 'reverse';\n    }\n    instance.reversed = !instance.reversed;\n    children.forEach(function (child) { return child.reversed = instance.reversed; });\n  }\n\n  function adjustTime(time) {\n    return instance.reversed ? instance.duration - time : time;\n  }\n\n  function resetTime() {\n    startTime = 0;\n    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);\n  }\n\n  function seekCild(time, child) {\n    if (child) { child.seek(time - child.timelineOffset); }\n  }\n\n  function syncInstanceChildren(time) {\n    if (!instance.reversePlayback) {\n      for (var i = 0; i < childrenLength; i++) { seekCild(time, children[i]); }\n    } else {\n      for (var i$1 = childrenLength; i$1--;) { seekCild(time, children[i$1]); }\n    }\n  }\n\n  function setAnimationsProgress(insTime) {\n    var i = 0;\n    var animations = instance.animations;\n    var animationsLength = animations.length;\n    while (i < animationsLength) {\n      var anim = animations[i];\n      var animatable = anim.animatable;\n      var tweens = anim.tweens;\n      var tweenLength = tweens.length - 1;\n      var tween = tweens[tweenLength];\n      // Only check for keyframes if there is more than one tween\n      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }\n      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\n      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);\n      var strings = tween.to.strings;\n      var round = tween.round;\n      var numbers = [];\n      var toNumbersLength = tween.to.numbers.length;\n      var progress = (void 0);\n      for (var n = 0; n < toNumbersLength; n++) {\n        var value = (void 0);\n        var toNumber = tween.to.numbers[n];\n        var fromNumber = tween.from.numbers[n] || 0;\n        if (!tween.isPath) {\n          value = fromNumber + (eased * (toNumber - fromNumber));\n        } else {\n          value = getPathProgress(tween.value, eased * toNumber);\n        }\n        if (round) {\n          if (!(tween.isColor && n > 2)) {\n            value = Math.round(value * round) / round;\n          }\n        }\n        numbers.push(value);\n      }\n      // Manual Array.reduce for better performances\n      var stringsLength = strings.length;\n      if (!stringsLength) {\n        progress = numbers[0];\n      } else {\n        progress = strings[0];\n        for (var s = 0; s < stringsLength; s++) {\n          var a = strings[s];\n          var b = strings[s + 1];\n          var n$1 = numbers[s];\n          if (!isNaN(n$1)) {\n            if (!b) {\n              progress += n$1 + ' ';\n            } else {\n              progress += n$1 + b;\n            }\n          }\n        }\n      }\n      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);\n      anim.currentValue = progress;\n      i++;\n    }\n  }\n\n  function setCallback(cb) {\n    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }\n  }\n\n  function countIteration() {\n    if (instance.remaining && instance.remaining !== true) {\n      instance.remaining--;\n    }\n  }\n\n  function setInstanceProgress(engineTime) {\n    var insDuration = instance.duration;\n    var insDelay = instance.delay;\n    var insEndDelay = insDuration - instance.endDelay;\n    var insTime = adjustTime(engineTime);\n    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);\n    instance.reversePlayback = insTime < instance.currentTime;\n    if (children) { syncInstanceChildren(insTime); }\n    if (!instance.began && instance.currentTime > 0) {\n      instance.began = true;\n      setCallback('begin');\n      setCallback('loopBegin');\n    }\n    if (insTime <= insDelay && instance.currentTime !== 0) {\n      setAnimationsProgress(0);\n    }\n    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {\n      setAnimationsProgress(insDuration);\n    }\n    if (insTime > insDelay && insTime < insEndDelay) {\n      if (!instance.changeBegan) {\n        instance.changeBegan = true;\n        instance.changeCompleted = false;\n        setCallback('changeBegin');\n      }\n      setCallback('change');\n      setAnimationsProgress(insTime);\n    } else {\n      if (instance.changeBegan) {\n        instance.changeCompleted = true;\n        instance.changeBegan = false;\n        setCallback('changeComplete');\n      }\n    }\n    instance.currentTime = minMax(insTime, 0, insDuration);\n    if (instance.began) { setCallback('update'); }\n    if (engineTime >= insDuration) {\n      lastTime = 0;\n      countIteration();\n      if (instance.remaining) {\n        startTime = now;\n        setCallback('loopComplete');\n        setCallback('loopBegin');\n        if (instance.direction === 'alternate') { toggleInstanceDirection(); }\n      } else {\n        instance.paused = true;\n        if (!instance.completed) {\n          instance.completed = true;\n          setCallback('loopComplete');\n          setCallback('complete');\n          if (!instance.passThrough && 'Promise' in window) {\n            resolve();\n            promise = makePromise(instance);\n          }\n        }\n      }\n    }\n  }\n\n  instance.reset = function() {\n    var direction = instance.direction;\n    instance.passThrough = false;\n    instance.currentTime = 0;\n    instance.progress = 0;\n    instance.paused = true;\n    instance.began = false;\n    instance.changeBegan = false;\n    instance.completed = false;\n    instance.changeCompleted = false;\n    instance.reversePlayback = false;\n    instance.reversed = direction === 'reverse';\n    instance.remaining = instance.loop;\n    children = instance.children;\n    childrenLength = children.length;\n    for (var i = childrenLength; i--;) { instance.children[i].reset(); }\n    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }\n    setAnimationsProgress(0);\n  };\n\n  // Set Value helper\n\n  instance.set = function(targets, properties) {\n    setTargetsValue(targets, properties);\n    return instance;\n  };\n\n  instance.tick = function(t) {\n    now = t;\n    if (!startTime) { startTime = now; }\n    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);\n  };\n\n  instance.seek = function(time) {\n    setInstanceProgress(adjustTime(time));\n  };\n\n  instance.pause = function() {\n    instance.paused = true;\n    resetTime();\n  };\n\n  instance.play = function() {\n    if (!instance.paused) { return; }\n    if (instance.completed) { instance.reset(); }\n    instance.paused = false;\n    activeInstances.push(instance);\n    resetTime();\n    if (!raf) { engine(); }\n  };\n\n  instance.reverse = function() {\n    toggleInstanceDirection();\n    resetTime();\n  };\n\n  instance.restart = function() {\n    instance.reset();\n    instance.play();\n  };\n\n  instance.reset();\n\n  if (instance.autoplay) { instance.play(); }\n\n  return instance;\n\n}\n\n// Remove targets from animation\n\nfunction removeTargetsFromAnimations(targetsArray, animations) {\n  for (var a = animations.length; a--;) {\n    if (arrayContains(targetsArray, animations[a].animatable.target)) {\n      animations.splice(a, 1);\n    }\n  }\n}\n\nfunction removeTargets(targets) {\n  var targetsArray = parseTargets(targets);\n  for (var i = activeInstances.length; i--;) {\n    var instance = activeInstances[i];\n    var animations = instance.animations;\n    var children = instance.children;\n    removeTargetsFromAnimations(targetsArray, animations);\n    for (var c = children.length; c--;) {\n      var child = children[c];\n      var childAnimations = child.animations;\n      removeTargetsFromAnimations(targetsArray, childAnimations);\n      if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }\n    }\n    if (!animations.length && !children.length) { instance.pause(); }\n  }\n}\n\n// Stagger helpers\n\nfunction stagger(val, params) {\n  if ( params === void 0 ) params = {};\n\n  var direction = params.direction || 'normal';\n  var easing = params.easing ? parseEasings(params.easing) : null;\n  var grid = params.grid;\n  var axis = params.axis;\n  var fromIndex = params.from || 0;\n  var fromFirst = fromIndex === 'first';\n  var fromCenter = fromIndex === 'center';\n  var fromLast = fromIndex === 'last';\n  var isRange = is.arr(val);\n  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);\n  var val2 = isRange ? parseFloat(val[1]) : 0;\n  var unit = getUnit(isRange ? val[1] : val) || 0;\n  var start = params.start || 0 + (isRange ? val1 : 0);\n  var values = [];\n  var maxValue = 0;\n  return function (el, i, t) {\n    if (fromFirst) { fromIndex = 0; }\n    if (fromCenter) { fromIndex = (t - 1) / 2; }\n    if (fromLast) { fromIndex = t - 1; }\n    if (!values.length) {\n      for (var index = 0; index < t; index++) {\n        if (!grid) {\n          values.push(Math.abs(fromIndex - index));\n        } else {\n          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;\n          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;\n          var toX = index%grid[0];\n          var toY = Math.floor(index/grid[0]);\n          var distanceX = fromX - toX;\n          var distanceY = fromY - toY;\n          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (axis === 'x') { value = -distanceX; }\n          if (axis === 'y') { value = -distanceY; }\n          values.push(value);\n        }\n        maxValue = Math.max.apply(Math, values);\n      }\n      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }\n      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }\n    }\n    var spacing = isRange ? (val2 - val1) / maxValue : val1;\n    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;\n  }\n}\n\n// Timeline\n\nfunction timeline(params) {\n  if ( params === void 0 ) params = {};\n\n  var tl = anime(params);\n  tl.duration = 0;\n  tl.add = function(instanceParams, timelineOffset) {\n    var tlIndex = activeInstances.indexOf(tl);\n    var children = tl.children;\n    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }\n    function passThrough(ins) { ins.passThrough = true; }\n    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }\n    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));\n    insParams.targets = insParams.targets || params.targets;\n    var tlDuration = tl.duration;\n    insParams.autoplay = false;\n    insParams.direction = tl.direction;\n    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);\n    passThrough(tl);\n    tl.seek(insParams.timelineOffset);\n    var ins = anime(insParams);\n    passThrough(ins);\n    children.push(ins);\n    var timings = getInstanceTimings(children, params);\n    tl.delay = timings.delay;\n    tl.endDelay = timings.endDelay;\n    tl.duration = timings.duration;\n    tl.seek(0);\n    tl.reset();\n    if (tl.autoplay) { tl.play(); }\n    return tl;\n  };\n  return tl;\n}\n\nanime.version = '3.0.1';\nanime.speed = 1;\nanime.running = activeInstances;\nanime.remove = removeTargets;\nanime.get = getOriginalTargetValue;\nanime.set = setTargetsValue;\nanime.convertPx = convertPxToUnit;\nanime.path = getPath;\nanime.setDashoffset = setDashoffset;\nanime.stagger = stagger;\nanime.timeline = timeline;\nanime.easing = parseEasings;\nanime.penner = penner;\nanime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };\n\nexport default anime;\n","AFRAME.registerComponent(\"ambient-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    this.light = new THREE.AmbientLight();\n    this.el.setObject3D(\"ambient-light\", this.light);\n  },\n\n  update(prevData) {\n    if (this.data.color !== prevData.color) {\n      this.light.color.set(this.data.color);\n      this.light.color.convertSRGBToLinear();\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"ambient-light\");\n  }\n});\n","/* eslint-disable */\n\n// Modified version of A-Frame's animation component to set matrixNeedsUpdate = true in the\n// scenario where the transform changes on an object during an animation.\n//\n// Changes are identified w comment // hubs\n//\n// Bugfix added 3/1/19 - If an animation component is removed before its delay setting, then\n// it erroneously restarts.\n\nvar anime = require(\"animejs\").default;\nvar components = AFRAME.components; // hubs\nvar registerComponent = AFRAME.registerComponent; // hubs\n//var THREE = require('../lib/three'); // hubs\nvar utils = AFRAME.utils; // hubs\n\ndelete AFRAME.components.animation; // hubs\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\n/**\n * Split a delimited component property string (e.g., `material.color`) to an object\n * containing `component` name and `property` name. If there is no delimiter, just return the\n * string back.\n *\n * Cache arrays from splitting strings via delimiter to save on memory.\n *\n * @param {string} str - e.g., `material.opacity`.\n * @param {string} delimiter - e.g., `.`.\n * @returns {array} e.g., `['material', 'opacity']`.\n */\nvar propertyPathCache = {};\nfunction getComponentPropertyPath(str, delimiter) {\n  delimiter = delimiter || \".\";\n  if (!propertyPathCache[delimiter]) {\n    propertyPathCache[delimiter] = {};\n  }\n  if (str.indexOf(delimiter) !== -1) {\n    propertyPathCache[delimiter][str] = str.split(delimiter);\n  } else {\n    propertyPathCache[delimiter][str] = str;\n  }\n  return propertyPathCache[delimiter][str];\n}\n\n/**\n * Get component property using encoded component name + component property name with a\n * delimiter.\n */\nconst getComponentProperty = function(el, name, delimiter) {\n  var splitName;\n  delimiter = delimiter || \".\";\n  if (name.indexOf(delimiter) !== -1) {\n    splitName = getComponentPropertyPath(name, delimiter);\n    if (splitName.constructor === String) {\n      return el.getAttribute(splitName);\n    }\n    return el.getAttribute(splitName[0])[splitName[1]];\n  }\n  return el.getAttribute(name);\n};\n\n/**\n * Set component property using encoded component name + component property name with a\n * delimiter.\n */\nconst setComponentProperty = function(el, name, value, delimiter) {\n  var splitName;\n  delimiter = delimiter || \".\";\n  if (name.indexOf(delimiter) !== -1) {\n    splitName = getComponentPropertyPath(name, delimiter);\n    if (splitName.constructor === String) {\n      el.setAttribute(splitName, value);\n    } else {\n      el.setAttribute(splitName[0], splitName[1], value);\n    }\n    return;\n  }\n  el.setAttribute(name, value);\n};\n\nvar splitCache = {};\n\nvar TYPE_COLOR = \"color\";\nvar PROP_POSITION = \"position\";\nvar PROP_ROTATION = \"rotation\";\nvar PROP_SCALE = \"scale\";\nvar STRING_COMPONENTS = \"components\";\nvar STRING_OBJECT3D = \"object3D\";\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nmodule.exports.Component = registerComponent(\"animation\", {\n  schema: {\n    autoplay: { default: true },\n    delay: { default: 0 },\n    dir: { default: \"\" },\n    dur: { default: 1000 },\n    easing: { default: \"easeInQuad\" },\n    elasticity: { default: 400 },\n    enabled: { default: true },\n    from: { default: \"\" },\n    loop: {\n      default: 0,\n      parse: function(value) {\n        // Boolean or integer.\n        if (value === true || value === \"true\") {\n          return true;\n        }\n        if (value === false || value === \"false\") {\n          return false;\n        }\n        return parseInt(value, 10);\n      }\n    },\n    property: { default: \"\" },\n    startEvents: { type: \"array\" },\n    pauseEvents: { type: \"array\" },\n    resumeEvents: { type: \"array\" },\n    round: { default: false },\n    to: { default: \"\" },\n    type: { default: \"\" },\n    isRawProperty: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    var self = this;\n\n    this.eventDetail = { name: this.attrName };\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function() {\n        self.animationIsPlaying = false;\n        self.el.emit(\"animationcomplete\", self.eventDetail, false);\n        if (self.id) {\n          self.el.emit(\"animationcomplete__\" + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function(oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) {\n      return;\n    }\n\n    if (!data.property) {\n      return;\n    }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function(t, dt) {\n    if (!this.animationIsPlaying) {\n      return;\n    }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function() {\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  pause: function() {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function() {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || (data.startEvents && data.startEvents.length)) {\n      return;\n    }\n\n    // Delay animation.\n    if (data.delay) {\n      // hubs\n      this.delayTimeout = setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function() {\n    this.updateConfig();\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit(\"animationbegin\", this.eventDetail, false);\n  },\n\n  pauseAnimation: function() {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function() {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function() {\n    if (!this.data.enabled) {\n      return;\n    }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === \"\" ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r && value.g === lastValue.g && value.b === lastValue.b) {\n          return;\n        }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === \"\") {\n      // Infer from.\n      from = isRawProperty(data) ? getRawProperty(el, data.property) : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === \"true\" || data.to === \"false\" || data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === \"true\" || data.from === true ? 1 : 0;\n      to = data.to === \"true\" || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function() {\n      var lastValue;\n\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaenously even if the value has not changed. Also better for perf\n        // anyways.\n        if (value === lastValue) {\n          return;\n        }\n        lastValue = value;\n\n        if (isBoolean) {\n          value = value >= 1;\n        }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n\n    // Parse coordinates.\n    from =\n      data.from !== \"\"\n        ? utils.coordinates.parse(data.from) // If data.from defined, use that.\n        : getComponentProperty(el, data.property); // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (data.property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (data.property === PROP_POSITION || data.property === PROP_ROTATION || data.property === PROP_SCALE) {\n      config.update = (function() {\n        var lastValue = {};\n        return function(anim) {\n          var value = anim.animatables[0].target;\n\n          if (data.property === PROP_SCALE) {\n            value.x = Math.max(0.0001, value.x);\n            value.y = Math.max(0.0001, value.y);\n            value.z = Math.max(0.0001, value.z);\n          }\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[data.property].set(value.x, value.y, value.z);\n          el.object3D.matrixNeedsUpdate = true; // hubs\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value = anim.animations[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function() {\n    var propType;\n\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === \"vec2\" || propType === \"vec3\" || propType === \"vec4\") {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function(cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== \"\") {\n      return false;\n    }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) {\n      return false;\n    }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) {\n      return false;\n    }\n\n    el.addEventListener(\"componentinitialized\", function wait(evt) {\n      if (evt.detail.name !== componentName) {\n        return;\n      }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener(\"componentinitialized\", wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function() {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) {\n        continue;\n      }\n      if (component.name !== \"animation\") {\n        continue;\n      }\n      if (!component.animationIsPlaying) {\n        continue;\n      }\n      if (component.data.property !== this.data.property) {\n        continue;\n      }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  // hubs\n  cancelDelayedStart: function() {\n    if (this.delayTimeout) {\n      clearTimeout(this.delayTimeout);\n      this.delayTimeout = null;\n    }\n  },\n\n  setColorConfig: function(from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType(el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split(\".\");\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) {\n    return null;\n  }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) {\n    return null;\n  }\n\n  // Multi-prop.\n  if (propertyName) {\n    return component.schema[propertyName].type;\n  }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians(obj) {\n  obj.x = THREE.MathUtils.degToRad(obj.x);\n  obj.y = THREE.MathUtils.degToRad(obj.y);\n  obj.z = THREE.MathUtils.degToRad(obj.z);\n}\n\nfunction addEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty(el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  return value;\n}\n\nfunction setRawProperty(el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith(\"object3D.rotation\")) {\n    value = THREE.MathUtils.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) {\n    targetValue = targetValue[split[i]];\n  }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if (\"r\" in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot(path) {\n  if (path in splitCache) {\n    return splitCache[path];\n  }\n  splitCache[path] = path.split(\".\");\n  return splitCache[path];\n}\n\nfunction isRawProperty(data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) || data.property.startsWith(STRING_OBJECT3D);\n}\n","const DEBUG_BBAA_COLOR = 0x49ef4;\n\nconst debugMaterial = new THREE.MeshBasicMaterial({\n  color: DEBUG_BBAA_COLOR,\n  transparent: true,\n  opacity: 0.25,\n  side: THREE.DoubleSide\n});\n\nAFRAME.registerComponent(\"audio-zone\", {\n  schema: {\n    enabled: { default: true },\n    inOut: { default: true },\n    outIn: { default: true },\n    debuggable: { default: true }\n  },\n\n  init() {\n    const debugGeometry = new THREE.BoxGeometry();\n    this.debugMesh = new THREE.Mesh(debugGeometry, debugMaterial);\n    this.debugMesh.el = this.el.object3D.el;\n    const debugBBAA = new THREE.BoxHelper(this.debugMesh, DEBUG_BBAA_COLOR);\n    this.el.object3D.add(debugBBAA);\n    this.el.object3D.updateMatrixWorld(true);\n\n    // In some cases (ie. the scene page) these systems might not exist\n    // so we need to check if the do before registering.\n    this.el.sceneEl.systems[\"audio-debug\"]?.registerZone(this);\n    this.el.sceneEl.systems[\"hubs-systems\"]?.audioZonesSystem.registerZone(this);\n\n    this.enableDebug(window.APP.store.state.preferences.showAudioDebugPanel);\n  },\n\n  remove() {\n    // In some cases (ie. the scene page) these systems might not exist\n    // so we need to check if the do before unregistering.\n    this.el.sceneEl.systems[\"audio-debug\"]?.unregisterZone(this);\n    this.el.sceneEl.systems[\"hubs-systems\"]?.audioZonesSystem.unregisterZone(this);\n  },\n\n  update() {\n    this.enableDebug(this.data.debuggable && window.APP.store.state.preferences.showAudioDebugPanel);\n  },\n\n  isEnabled() {\n    return this.data.enabled;\n  },\n\n  getBoundingBox: (function() {\n    const bbaa = new THREE.Box3();\n    return function() {\n      return bbaa.copy(this.debugMesh.geometry.boundingBox).applyMatrix4(this.el.object3D.matrixWorld);\n    };\n  })(),\n\n  enableDebug(debuggable) {\n    this.data.debuggable = debuggable;\n    this.el.object3D.visible = debuggable;\n  },\n\n  getAudioParams() {\n    return APP.audioOverrides.get(this.el);\n  },\n\n  contains(position) {\n    return this.getBoundingBox().containsPoint(position);\n  }\n});\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n// Billboard component that only updates visible objects and only those in the camera view on mobile VR.\n// TODO billboarding assumes a single camera viewpoint but with video-texture-source, mirrors, and camera tools this is no longer valid\nAFRAME.registerComponent(\"billboard\", {\n  schema: {\n    onlyY: { type: \"boolean\" }\n  },\n  init: function() {\n    this._updateBillboard = this._updateBillboard.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateIsInView, \"billboards\");\n    }\n  },\n  remove() {\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateIsInView, \"billboards\");\n    }\n  },\n\n  tick() {\n    if (this.isInView || !isMobileVR) {\n      this._updateBillboard();\n    }\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const box = new THREE.Box3();\n    const boxTemp = new THREE.Box3();\n\n    const expandBox = o => {\n      if (o.geometry) {\n        o.updateMatrices();\n        o.geometry.computeBoundingBox();\n        boxTemp.copy(o.geometry.boundingBox).applyMatrix4(o.matrixWorld);\n        box.expandByPoint(boxTemp.min);\n        box.expandByPoint(boxTemp.max);\n      }\n    };\n\n    const isInViewOfCamera = (obj, screenCamera) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromProjectionMatrix(frustumMatrix);\n      box.makeEmpty();\n      obj.traverse(expandBox);\n\n      // NOTE: not using box.setFromObject here because text nodes do not have Z values in their geometry buffer,\n      // and that routine ultimately assumes they do.\n      return frustum.intersectsBox(box);\n    };\n\n    return function() {\n      if (!this.el.object3D.visible) {\n        this.isInView = false;\n        return;\n      }\n\n      if (!this.playerCamera) {\n        this.playerCamera = document.getElementById(\"viewing-camera\").getObject3D(\"camera\");\n      }\n\n      if (!this.playerCamera) return;\n\n      this.isInView = this.el.sceneEl.is(\"vr-mode\") ? true : isInViewOfCamera(this.el.object3D, this.playerCamera);\n    };\n  })(),\n\n  _updateBillboard: (function() {\n    const targetPos = new THREE.Vector3();\n    const worldPos = new THREE.Vector3();\n    return function() {\n      if (!this.el.object3D.visible) return;\n\n      const camera = this.el.sceneEl.camera;\n      const object3D = this.el.object3D;\n\n      if (camera) {\n        // Set the camera world position as the target.\n        targetPos.setFromMatrixPosition(camera.matrixWorld);\n\n        if (this.data.onlyY) {\n          object3D.getWorldPosition(worldPos);\n          targetPos.y = worldPos.y;\n        }\n        object3D.lookAt(targetPos);\n\n        object3D.matrixNeedsUpdate = true;\n      }\n    };\n  })()\n});\n","/**\n * Sets the CSS class on an entity.\n * @component css-class\n */\nAFRAME.registerComponent(\"css-class\", {\n  schema: {\n    type: \"string\"\n  },\n  multiple: true,\n  init() {\n    this.el.classList.add(this.data);\n  },\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.el.classList.remove(oldData);\n      this.el.classList.add(this.data);\n    }\n  },\n  remove() {\n    this.el.classList.remove(this.data);\n  }\n});\n","/**\n * Logs all events dispatched on an entity\n * @namespace debug\n * @component log-events\n */\nAFRAME.registerComponent(\"log-events\", {\n  init: function() {\n    const el = this.el;\n    const log = this.log.bind(this);\n    const origDispatch = this.el.dispatchEvent;\n    this.el.dispatchEvent = function() {\n      log(Array.from(arguments));\n      return origDispatch.apply(el, arguments);\n    };\n  },\n  log: function([e]) {\n    if ([\"componentchanged\"].includes(e.type)) return;\n    let firstObject = true;\n    const replacer = (k, x) => {\n      if (!x) return x;\n      if (typeof x === \"object\" && x.length === undefined) {\n        if (firstObject) {\n          firstObject = false;\n          return x;\n        }\n        return \"[object]\";\n      }\n      return x;\n    };\n    console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail, replacer)}`);\n  }\n});\n\n/**\n * Logs all life cycle phases on an entity.\n * @namespace debug\n * @component lifecycle-checker\n */\nAFRAME.registerComponent(\"lifecycle-checker\", {\n  schema: {\n    name: { type: \"string\" },\n    tick: { default: false }\n  },\n  init: function() {\n    this.log(\"init\");\n  },\n  update: function() {\n    this.log(\"update\");\n  },\n  tick: function() {\n    if (this.data.tick) {\n      this.log(\"tick\");\n    }\n  },\n  remove: function() {\n    this.log(\"remove\");\n  },\n  pause: function() {\n    this.log(\"pause\");\n  },\n  play: function() {\n    this.log(\"play\");\n  },\n\n  log: function(method) {\n    console.info(`lifecycle-checker:${this.data.name} ${method}`);\n  }\n});\n","AFRAME.registerComponent(\"directional-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    this.light = new THREE.DirectionalLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.el.setObject3D(\"directional-light\", this.light);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      color.convertSRGBToLinear();\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n\n    this.light.shadow.camera.matrixNeedsUpdate = true;\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"directional-light\");\n  }\n});\n","/**\n * Floats a duck based on its scale.\n * @component duck\n */\nAFRAME.registerComponent(\"duck\", {\n  schema: {\n    initialForce: { default: 0 },\n    maxForce: { default: 6.5 },\n    maxScale: { default: 5 }\n  },\n\n  init: function() {\n    this.initialScale = this.el.object3D.scale.x;\n    this.maxScale = this.data.maxScale * this.initialScale;\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n      this.networkedEntity = networkedEntity;\n\n      this.initialScale = this.networkedEntity.object3D.scale.x;\n      this.maxScale = this.data.maxScale * this.initialScale;\n    });\n  },\n\n  tick: function() {\n    if (!this.networkedEntity || NAF.utils.isMine(this.networkedEntity)) {\n      const entity = this.networkedEntity || this.el;\n      const currentScale = entity.object3D.scale.x;\n      const ratio = Math.min(1, (currentScale - this.initialScale) / (this.maxScale - this.initialScale));\n      const force = ratio * this.data.maxForce;\n      if (force > 0) {\n        const angle = Math.random() * Math.PI * 2;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        entity.setAttribute(\"body-helper\", { gravity: { x, y: force, z } });\n      }\n    }\n  }\n});\n","/**\n * Listens to events from an event source and re-emits them on this entity\n * @component event-repeater\n */\nAFRAME.registerComponent(\"event-repeater\", {\n  schema: {\n    eventSource: { type: \"selector\" },\n    events: { type: \"array\" }\n  },\n\n  play: function() {\n    this.data.eventListeners = [];\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventListeners[event] = this._handleEvent.bind(this, event);\n      this.data.eventSource.addEventListener(event, this.data.eventListeners[event]);\n    }\n  },\n\n  pause: function() {\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventSource.removeEventListener(event, this.data.eventListeners[event]);\n    }\n    this.data.eventListeners = [];\n  },\n\n  _handleEvent: function(event, e) {\n    this.el.emit(event, e.detail);\n  }\n});\n","/**\n * Frustrum-based object visibilty\n * @component frustrum\n */\nAFRAME.registerComponent(\"frustrum\", {\n  schema: {\n    culled: { type: \"boolean\", default: true }\n  },\n\n  update: function() {\n    this.updateDescendants(this.data.culled);\n  },\n\n  remove: function() {\n    this.updateDescendants(true);\n  },\n\n  updateDescendants: function(culled) {\n    this.el.object3D.traverse(function(node) {\n      if (!(node instanceof THREE.Mesh)) {\n        return;\n      }\n      node.frustumCulled = culled;\n    });\n  }\n});\n","/* global CANNON */\nAFRAME.registerComponent(\"heightfield\", {\n  init() {\n    this.el.addEventListener(\"componentinitialized\", e => {\n      if (e.detail.name === \"static-body\") {\n        this.generateAndAddHeightfield(this.el.components[\"static-body\"]);\n      }\n    });\n    this.el.setAttribute(\"static-body\", { shape: \"none\", mass: 0 });\n  },\n  generateAndAddHeightfield(body) {\n    const { offset, distance, data } = this.data;\n\n    const orientation = new CANNON.Quaternion();\n    orientation.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);\n\n    const rotation = new CANNON.Quaternion();\n    rotation.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2);\n    rotation.mult(orientation, orientation);\n\n    const cannonOffset = new CANNON.Vec3(offset.x, offset.y, offset.z);\n\n    const shape = new CANNON.Heightfield(data, { elementSize: distance });\n\n    body.addShape(shape, cannonOffset, orientation);\n  }\n});\n","AFRAME.registerComponent(\"hemisphere-light\", {\n  schema: {\n    skyColor: { type: \"color\" },\n    groundColor: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    this.light = new THREE.HemisphereLight();\n    this.light.position.set(0, 0, 0);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"hemisphere-light\", this.light);\n  },\n\n  update(prevData) {\n    if (this.data.skyColor !== prevData.skyColor) {\n      this.light.color.set(this.data.skyColor);\n    }\n\n    if (this.data.groundColor !== prevData.groundColor) {\n      this.light.groundColor.set(this.data.groundColor);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"hemisphere-light\");\n  }\n});\n","/**\n * Hides entities based on the scene's quality mode\n * @namespace environment\n * @component hide-when-quality\n */\nAFRAME.registerComponent(\"hide-when-quality\", {\n  schema: { type: \"string\", default: \"low\" },\n\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.updateComponentState(window.APP.store.state.preferences.materialQualitySetting);\n    }\n  },\n\n  updateComponentState(quality) {\n    this.el.setAttribute(\"visible\", quality !== this.data);\n  }\n});\n","AFRAME.registerComponent(\"inject-main-camera-here\", {\n  init() {\n    // This is what actually puts the camera into the scene graph.\n    // Ideally we would just be doing this ourselves, but we have to do it after the entity we want to parent it to is created\n    // TODO any references to this entity should instead get the camera reference from the camera system\n    this.el.setObject3D(\"camera\", this.el.sceneEl.camera);\n  }\n});\n","AFRAME.registerComponent(\"point-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    this.light = new THREE.PointLight();\n    this.light.shadow.camera.matrixAutoUpdate = true;\n    this.el.setObject3D(\"point-light\", this.light);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      color.convertSRGBToLinear();\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"point-light\");\n  }\n});\n","AFRAME.registerComponent(\"spot-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    innerConeAngle: { default: 0 },\n    outerConeAngle: { default: Math.PI / 4.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    this.light = new THREE.SpotLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.matrixNeedsUpdate = true;\n    this.light.target.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"spot-light\", this.light);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.innerConeAngle !== prevData.innerConeAngle || this.data.outerConeAngle !== prevData.outerConeAngle) {\n      light.angle = this.data.outerConeAngle;\n      light.penumbra = 1.0 - this.data.innerConeAngle / this.data.outerConeAngle;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"spot-light\");\n  }\n});\n","const sizeVec = new THREE.Vector3();\nconst boundingBoxWorldPositionVec = new THREE.Vector3();\nconst colliderWorldPositionVec = new THREE.Vector3();\n\nAFRAME.registerComponent(\"trigger-volume\", {\n  schema: {\n    colliders: { type: \"selectorAll\" },\n    size: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    target: { type: \"selector\" },\n    enterComponent: { type: \"string\" },\n    enterProperty: { type: \"string\" },\n    enterValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    },\n    leaveComponent: { type: \"string\" },\n    leaveProperty: { type: \"string\" },\n    leaveValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n  init() {\n    this.boundingBox = new THREE.Box3();\n    this.collidingLastFrame = {};\n  },\n  update() {\n    this.el.object3D.getWorldPosition(boundingBoxWorldPositionVec);\n    sizeVec.copy(this.data.size);\n    this.boundingBox.setFromCenterAndSize(boundingBoxWorldPositionVec, sizeVec);\n  },\n  tick() {\n    if (!this.data.target) return;\n\n    const colliders = this.data.colliders;\n\n    for (let i = 0; i < colliders.length; i++) {\n      const collider = colliders[i];\n      const object3D = collider.object3D;\n\n      object3D.getWorldPosition(colliderWorldPositionVec);\n      const isColliding = this.boundingBox.containsPoint(colliderWorldPositionVec);\n      const collidingLastFrame = this.collidingLastFrame[object3D.id];\n\n      if (isColliding && !collidingLastFrame) {\n        this.data.target.setAttribute(this.data.enterComponent, this.data.enterProperty, this.data.enterValue);\n      } else if (!isColliding && collidingLastFrame) {\n        this.data.target.setAttribute(this.data.leaveComponent, this.data.leaveProperty, this.data.leaveValue);\n      }\n\n      this.collidingLastFrame[object3D.id] = isColliding;\n    }\n  }\n});\n","// HACK: Setting videoPaused on media-video doesn't work if you are the owner.\n// This component gets around that by calling .togglePlaying() to play/pause the video based on a property change.\nAFRAME.registerComponent(\"video-pause-state\", {\n  schema: {\n    paused: { default: false }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.videoComponent = this.el.components[\"media-video\"];\n\n    if (this.videoComponent) {\n      this.onVideoLoaded();\n    } else {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  onVideoLoaded() {\n    this.videoComponent = this.el.components[\"media-video\"];\n    this.video = this.videoComponent.video;\n    this.video.addEventListener(\"pause\", this.onPauseStateChange);\n  },\n\n  onPauseStateChange() {\n    this.el.setAttribute(\"paused\", this.video.paused);\n  },\n\n  update() {\n    if (this.video && this.data.paused !== this.video.paused) {\n      this.videoComponent.togglePlaying();\n    }\n  },\n\n  remove() {\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n    }\n    this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n  }\n});\n","let bit = 0;\nconst nextBit = () => 1 << bit++;\nconst CL = {\n  ALL: -1,\n  NONE: 0,\n  INTERACTABLES: nextBit(),\n  ENVIRONMENT: nextBit(),\n  AVATAR: nextBit(),\n  HANDS: nextBit(),\n  MEDIA_FRAMES: nextBit()\n};\n\n// @TODO we should split these \"sets\" off into something other than COLLISION_LAYERS or at least name\n// them differently to indicate they are a combination of multiple bits\nCL.DEFAULT_INTERACTABLE = CL.INTERACTABLES | CL.ENVIRONMENT | CL.AVATAR | CL.HANDS | CL.MEDIA_FRAMES;\nCL.UNOWNED_INTERACTABLE = CL.INTERACTABLES | CL.HANDS | CL.MEDIA_FRAMES;\nCL.DEFAULT_SPAWNER = CL.INTERACTABLES | CL.HANDS;\n\nconst PRIVACY = \"https://www.mozilla.org/en-US/privacy/hubs/\";\nconst TERMS = \"https://www.mozilla.org/en-US/about/legal/terms/hubs/\";\n\nmodule.exports = {\n  COLLISION_LAYERS: CL,\n  PRIVACY,\n  TERMS\n};\n","// Primary language tags for those languages we support\nexport const AVAILABLE_LOCALES = {\n  en: \"English\",\n  \"zh-cn\": \"\",\n  pt: \"Portugs (Brasil)\",\n  ja: \"\",\n  es: \"Espaol\",\n  ru: \"P\",\n  fr: \"Franais\",\n  ko: \"\",\n  de: \"Deutsch\",\n  \"zh-tw\": \"\"\n};\n\n// Map from alternative primary language tags to those we support\nexport const FALLBACK_LOCALES = {\n  jp: \"ja\"\n};\n","import configs from \"./configs\";\nimport { AVAILABLE_LOCALES, FALLBACK_LOCALES } from \"../assets/locales/locale_config\";\n\n// These are set in the admin panel and are only included as fallbacks.\nconst defaultLocaleData = {\n  \"app-name\": \"App\",\n  \"editor-name\": \"Scene Editor\",\n  \"contact-email\": \"app@company.com\",\n  \"company-name\": \"Company\",\n  \"share-hashtag\": \"#app\",\n  \"app-description\": \"Gather share and collaborate together in a virtual, private and safe space\",\n  \"app-tagline\": \"Private social VR in your web browser\"\n};\n\nconst DEFAULT_LOCALE = \"en\";\nconst cachedMessages = new Map();\n\nlet _locale = DEFAULT_LOCALE;\nlet _localeData = defaultLocaleData;\n\nfunction findLocale(locale) {\n  const locales = (() => {\n    if (navigator.languages) {\n      return [...navigator.languages];\n    }\n    if (navigator.language) {\n      return [navigator.language];\n    }\n    if (navigator.userLanguage) {\n      return [navigator.userLanguage];\n    }\n  })();\n\n  if (locale && locale !== \"browser\") {\n    locales.unshift(locale);\n  }\n\n  for (let i = 0; i < locales.length; i++) {\n    const curLocale = locales[i];\n    if (AVAILABLE_LOCALES.hasOwnProperty(curLocale)) {\n      return curLocale;\n    }\n    if (FALLBACK_LOCALES.hasOwnProperty(curLocale)) {\n      FALLBACK_LOCALES.hasOwnProperty(curLocale);\n    }\n    // Also check the primary language subtag in case\n    // we do not have an entry for full tag\n    // See https://en.wikipedia.org/wiki/IETF_language_tag#Syntax_of_language_tags\n    // and https://github.com/mozilla/hubs/pull/3350/files#diff-70ef5717d3da03ef288e8d15c2fda32c5237d7f37074421496f22403e4475bf1R16\n    const primaryLanguageSubtag = curLocale.split(\"-\")[0].toLowerCase();\n    if (AVAILABLE_LOCALES.hasOwnProperty(primaryLanguageSubtag)) {\n      return primaryLanguageSubtag;\n    }\n    if (FALLBACK_LOCALES.hasOwnProperty(primaryLanguageSubtag)) {\n      return FALLBACK_LOCALES[primaryLanguageSubtag];\n    }\n  }\n  return DEFAULT_LOCALE;\n}\n\nexport function setLocale(locale) {\n  const resolvedLocale = findLocale(locale);\n\n  if (resolvedLocale === DEFAULT_LOCALE) {\n    _locale = resolvedLocale;\n    _localeData = defaultLocaleData;\n    window.dispatchEvent(new CustomEvent(\"locale-updated\"));\n  } else {\n    if (cachedMessages.has(resolvedLocale)) {\n      _locale = resolvedLocale;\n      window.dispatchEvent(new CustomEvent(\"locale-updated\"));\n    } else {\n      import(`../assets/locales/${resolvedLocale}.json`).then(({ default: localeData }) => {\n        _locale = resolvedLocale;\n        _localeData = localeData;\n        window.dispatchEvent(new CustomEvent(\"locale-updated\"));\n      });\n    }\n  }\n}\n\nconst interval = window.setInterval(() => {\n  if (window.APP && window.APP.store) {\n    window.clearInterval(interval);\n    setLocale(window.APP.store.state.preferences.locale);\n    window.APP.store.addEventListener(\"statechanged\", () => {\n      setLocale(window.APP.store.state.preferences.locale);\n    });\n  }\n}, 100);\n\nexport const getLocale = () => {\n  return _locale;\n};\n\nexport const getMessage = key => {\n  return _localeData[key];\n};\n\n// TODO: This should be removed, lets not inject app config data up front but rather via variables so that defaultMessage works properly.\nexport const getMessages = () => {\n  if (cachedMessages.has(_locale)) {\n    return cachedMessages.get(_locale);\n  }\n\n  // Swap in translations specified via the admin panel\n  if (configs.APP_CONFIG && configs.APP_CONFIG.translations && configs.APP_CONFIG.translations[_locale]) {\n    const configTranslations = configs.APP_CONFIG.translations[_locale];\n    for (const messageKey in configTranslations) {\n      if (!configTranslations.hasOwnProperty(messageKey)) continue;\n      if (!configTranslations[messageKey]) continue;\n      _localeData[messageKey] = configTranslations[messageKey];\n    }\n  }\n\n  const entries = [];\n  for (const key in _localeData) {\n    if (!_localeData.hasOwnProperty(key)) continue;\n    entries.push([key, _localeData[key]]);\n  }\n\n  const messages = entries\n    .map(([key, message]) => [\n      key,\n      // Replace nested message keys (e.g. %app-name%) with their messages.\n      message.replace(/%([\\w-.]+)%/i, (_match, subkey) => _localeData[subkey])\n    ])\n    .reduce((acc, entry) => {\n      acc[entry[0]] = entry[1];\n      return acc;\n    }, {});\n\n  cachedMessages.set(_locale, messages);\n  return messages;\n};\n","import appLogo from \"../assets/images/app-logo.png\";\nimport appLogoDark from \"../assets/images/app-logo-dark.png\";\nimport companyLogo from \"../assets/images/company-logo.png\";\nimport homeHeroBackground from \"../assets/images/home-hero-background-unbranded.png\";\nimport sceneEditorLogo from \"../assets/images/editor-logo.png\";\nimport { getLocale, getMessage } from \"./i18n\";\n\n// Read configs from global variable if available, otherwise use the process.env injected from build.\nconst configs = {};\nlet isAdmin = false;\n[\n  \"RETICULUM_SERVER\",\n  \"THUMBNAIL_SERVER\",\n  \"CORS_PROXY_SERVER\",\n  \"NON_CORS_PROXY_DOMAINS\",\n  \"SENTRY_DSN\",\n  \"GA_TRACKING_ID\",\n  \"SHORTLINK_DOMAIN\",\n  \"BASE_ASSETS_PATH\",\n  \"UPLOADS_HOST\"\n].forEach(x => {\n  const el = document.querySelector(`meta[name='env:${x.toLowerCase()}']`);\n  configs[x] = el ? el.getAttribute(\"content\") : process.env[x];\n\n  const BASE_ASSETS_PATH_KEY = \"BASE_ASSETS_PATH\";\n  if (x === BASE_ASSETS_PATH_KEY && configs[BASE_ASSETS_PATH_KEY]) {\n    // BASE_ASSETS_PATH might be a relative URL like \"/\" when it is set in\n    // .env or .defaults.env when running locally. We need to convert that\n    // to an absolute URL.\n    if (!configs[BASE_ASSETS_PATH_KEY].startsWith(\"http\")) {\n      configs[BASE_ASSETS_PATH_KEY] = new URL(configs[BASE_ASSETS_PATH_KEY], window.location).toString();\n    }\n\n    // eslint-disable-next-line no-undef\n    __webpack_public_path__ = configs[BASE_ASSETS_PATH_KEY];\n  }\n});\n\n// Custom clients do not use <meta> tags for passing data, so if thumbnail_server meta tag exists, it is not a custom client\nconst hasThumbnailServerMetaTag = !!document.querySelector(\"meta[name='env:thumbnail_server']\");\nconfigs.IS_LOCAL_OR_CUSTOM_CLIENT = !hasThumbnailServerMetaTag;\n\n// Also include configs that reticulum injects as a script in the page head.\n\nconfigs.AVAILABLE_INTEGRATIONS = window.AVAILABLE_INTEGRATIONS || {};\n\nif (process.env.APP_CONFIG) {\n  window.APP_CONFIG = process.env.APP_CONFIG;\n}\n\nif (window.APP_CONFIG) {\n  configs.APP_CONFIG = window.APP_CONFIG;\n  const { theme } = configs.APP_CONFIG;\n  if (theme) {\n    const colorVars = [];\n    for (const key in theme) {\n      if (!theme.hasOwnProperty(key)) continue;\n      colorVars.push(`--${key}: ${theme[key]};`);\n    }\n    const style = document.createElement(\"style\");\n    style.innerHTML = `:root{${colorVars.join(\"\\n\")}}`;\n    document.head.insertBefore(style, document.head.firstChild);\n  }\n\n  if (!configs.APP_CONFIG.features) {\n    configs.APP_CONFIG.features = {};\n  }\n} else {\n  configs.APP_CONFIG = {\n    features: {}\n  };\n}\n\nconst isLocalDevelopment = process.env.NODE_ENV === \"development\";\n\nconfigs.feature = featureName => {\n  const value = configs.APP_CONFIG && configs.APP_CONFIG.features && configs.APP_CONFIG.features[featureName];\n  if (typeof value === \"boolean\" || featureName === \"enable_spoke\") {\n    const forceEnableSpoke = featureName === \"enable_spoke\" && isAdmin;\n    return forceEnableSpoke || value;\n  } else {\n    return value;\n  }\n};\n\nlet localDevImages = {};\nif (isLocalDevelopment) {\n  localDevImages = {\n    logo: appLogo,\n    logo_dark: appLogoDark,\n    company_logo: companyLogo,\n    editor_logo: sceneEditorLogo,\n    home_background: homeHeroBackground\n  };\n}\n\nconfigs.image = (imageName, cssUrl) => {\n  const url =\n    (configs.APP_CONFIG && configs.APP_CONFIG.images && configs.APP_CONFIG.images[imageName]) ||\n    localDevImages[imageName];\n  return url && cssUrl ? `url(${url})` : url;\n};\n\nconfigs.link = (linkName, defaultValue) => {\n  return (configs.APP_CONFIG && configs.APP_CONFIG.links && configs.APP_CONFIG.links[linkName]) || defaultValue;\n};\n\nconfigs.setIsAdmin = _isAdmin => {\n  isAdmin = _isAdmin;\n};\nconfigs.isAdmin = () => isAdmin;\n\nconfigs.integration = integration => {\n  const availableIntegrations = configs.AVAILABLE_INTEGRATIONS;\n  // AVAILABLE_INTEGRATIONS has no properties defined on the dev server, but does support all integrations.\n  return !availableIntegrations.hasOwnProperty(integration) || availableIntegrations[integration];\n};\n\nconfigs.translation = key => {\n  const locale = getLocale();\n  const translationsConfig = (configs.APP_CONFIG && configs.APP_CONFIG.translations) || {};\n\n  return (\n    (translationsConfig[locale] && translationsConfig[locale][key]) ||\n    (translationsConfig.en && translationsConfig.en[key]) ||\n    getMessage(key) ||\n    \"\"\n  );\n};\n\nexport default configs;\n","import { useCallback, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { getColorSchemePref } from \"../../utils/get-color-scheme-pref\";\nimport configs from \"../../utils/configs\";\n\nlet config = process.env.APP_CONFIG;\n\n// Storybook includes environment variables as a string\n// https://storybook.js.org/docs/react/configure/environment-variables\nif (!config && process.env.STORYBOOK_APP_CONFIG) {\n  config = JSON.parse(process.env.STORYBOOK_APP_CONFIG);\n}\n\nif (!config) {\n  config = window.APP_CONFIG;\n}\n\nif (config?.theme?.error) {\n  console.error(\n    `Custom themes failed to load.\\n${config.theme.error}\\nIf you are an admin, reconfigure your themes in the admin panel.`\n  );\n}\n\nexport const defaultTheme = \"default\";\n\nexport const themes = config?.theme?.themes || [];\n\nfunction useDarkMode() {\n  const [darkMode, setDarkMode] = useState(false);\n\n  const changeListener = useCallback(\n    event => {\n      setDarkMode(event.matches);\n    },\n    [setDarkMode]\n  );\n\n  useEffect(() => {\n    const darkmodeQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n\n    setDarkMode(darkmodeQuery.matches);\n\n    // This is a workaround for old Safari.\n    // Prior to Safari 14, MediaQueryList is based on EventTarget, so you must use\n    // addListener() and removeListener() to observe media query lists.\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList/addListener\n    // We may remove this workaround when no one will use Safari 13 or before.\n    if (darkmodeQuery.addEventListener) {\n      darkmodeQuery.addEventListener(\"change\", changeListener);\n    } else {\n      darkmodeQuery.addListener(changeListener);\n    }\n\n    return () => {\n      if (darkmodeQuery.removeEventListener) {\n        darkmodeQuery.removeEventListener(\"change\", changeListener);\n      } else {\n        darkmodeQuery.removeListener(changeListener);\n      }\n    };\n  }, [changeListener]);\n\n  return darkMode;\n}\n\nexport function useTheme(themeId) {\n  const darkMode = useDarkMode();\n\n  useEffect(() => {\n    // Themes can come from an external source. Ensure it is an array.\n    if (!Array.isArray(themes)) return;\n\n    let theme;\n\n    if (themeId) {\n      theme = themes.find(t => t.id === themeId);\n    }\n\n    if (!theme && darkMode) {\n      theme = themes.find(t => t.darkModeDefault);\n    }\n\n    if (!theme) {\n      theme = themes.find(t => t.default);\n    }\n\n    if (!theme) {\n      return;\n    }\n\n    const variables = [];\n\n    for (const key in theme.variables) {\n      if (!theme.variables.hasOwnProperty(key)) continue;\n      variables.push(`--${key}: ${theme.variables[key]};`);\n    }\n\n    const styleTag = document.createElement(\"style\");\n\n    styleTag.innerHTML = `:root {\n        ${variables.join(\"\\n\")}\n      }`;\n\n    document.head.appendChild(styleTag);\n\n    return () => {\n      document.head.removeChild(styleTag);\n    };\n  }, [themeId, darkMode]);\n}\n\nfunction getCurrentTheme() {\n  if (!Array.isArray(themes)) return;\n\n  const preferredThemeId = window.APP?.store?.state?.preferences?.theme;\n  if (preferredThemeId) {\n    return themes.find(t => t.id === preferredThemeId);\n  } else {\n    return getColorSchemePref();\n  }\n}\n\nfunction getAppLogo(darkMode) {\n  const theme = getCurrentTheme();\n  const shouldUseDarkLogo = theme ? theme.darkModeDefault : darkMode;\n  return (shouldUseDarkLogo && configs.image(\"logo_dark\")) || configs.image(\"logo\");\n}\n\nexport function useLogo() {\n  const darkMode = useDarkMode();\n  return getAppLogo(darkMode);\n}\n\nexport function useThemeFromStore(store) {\n  const [themeId, setThemeId] = useState(store?.state?.preferences?.theme);\n\n  useEffect(() => {\n    function onStoreChanged() {\n      const nextThemeId = store.state?.preferences?.theme;\n\n      if (themeId !== nextThemeId) {\n        setThemeId(nextThemeId);\n      }\n    }\n\n    if (store) {\n      store.addEventListener(\"statechanged\", onStoreChanged);\n    }\n\n    return () => {\n      if (store) {\n        store.removeEventListener(\"statechanged\", onStoreChanged);\n      }\n    };\n  });\n\n  useTheme(themeId);\n}\n\nexport function ThemeProvider({ store, children }) {\n  useThemeFromStore(store);\n  return children;\n}\n\nThemeProvider.propTypes = {\n  store: PropTypes.object,\n  children: PropTypes.node\n};\n","import { themes } from \"../react-components/styles/theme\";\n\nexport function getColorSchemePref() {\n  const darkmodeQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n  const darkMode = darkmodeQuery.matches;\n  return (darkMode && themes.find(t => t.darkModeDefault)) || themes.find(t => t.default);\n}\n","export const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n\nexport const waitForDOMContentLoaded = function() {\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\n    return Promise.resolve(null);\n  } else {\n    return waitForEvent(\"DOMContentLoaded\", window);\n  }\n};\n\nexport const sleep = function(milliseconds) {\n  return new Promise(resolve => {\n    setTimeout(resolve, milliseconds);\n  });\n};\n","import { themes } from \"../react-components/styles/theme\";\nimport { waitForDOMContentLoaded } from \"./async-utils\";\nimport configs from \"./configs\";\n\n// Node these should be synchronized with the top of shared.scss\nconst DEFAULT_ACTION_COLOR = \"#FF3464\";\nconst DEFAULT_ACTION_COLOR_LIGHT = \"#FF74A4\";\n\nconst DEFAULT_COLORS = {\n  \"action-color\": DEFAULT_ACTION_COLOR,\n  \"action-label-color\": DEFAULT_ACTION_COLOR,\n  \"action-color-disabled\": DEFAULT_ACTION_COLOR_LIGHT,\n  \"action-color-highlight\": DEFAULT_ACTION_COLOR_LIGHT,\n  \"action-text-color\": \"#FFFFFF\",\n  \"action-subtitle-color\": \"#F0F0F0\",\n  \"notice-background-color\": \"#2F80ED\",\n  \"notice-text-color\": \"#FFFFFF\",\n  \"favorited-color\": \"#FFC000\",\n  \"nametag-color\": \"#000000\",\n  \"nametag-volume-color\": \"#7ED320\",\n  \"nametag-text-color\": \"#FFFFFF\",\n  \"nametag-border-color\": \"#7ED320\",\n  \"nametag-border-color-raised-hand\": \"#FFCD74\"\n};\n\nfunction getThemeColor(name) {\n  const themeId = window.APP?.store?.state?.preferences?.theme;\n\n  const theme =\n    (themeId && configs.APP_CONFIG?.theme?.themes?.find(theme => theme.id === themeId)) ||\n    configs.APP_CONFIG?.theme?.themes?.find(theme => theme.default === true);\n  if (theme?.variables?.[name]) {\n    return theme.variables[name];\n  }\n\n  return DEFAULT_COLORS[name];\n}\n\nfunction activateTheme() {\n  const actionColor = getThemeColor(\"action-color\");\n  const actionHoverColor = getThemeColor(\"action-color-highlight\");\n\n  if (document.querySelector(\"#rounded-text-button\")) {\n    // NOTE, using the object-based {} setAttribute variant in a-frame\n    // seems to not work in Firefox here -- the entities with the mixins are not\n    // updated.\n    document\n      .querySelector(\"#rounded-text-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\n      );\n\n    document\n      .querySelector(\"#rounded-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\n      );\n\n    document\n      .querySelector(\"#rounded-text-action-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\n      );\n\n    document\n      .querySelector(\"#rounded-action-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\n      );\n  }\n\n  window.dispatchEvent(new CustomEvent(\"update_theme\"));\n}\n\nconst onStoreChanged = (function() {\n  let themeId;\n  return function onStoreChanged() {\n    const newThemeId = window.APP?.store?.state?.preferences?.theme;\n    if (themeId !== newThemeId) {\n      themeId = newThemeId;\n      activateTheme();\n    }\n  };\n})();\n\nwaitForDOMContentLoaded().then(() => {\n  if (configs.APP_CONFIG && configs.APP_CONFIG.theme && configs.APP_CONFIG.theme[\"dark-theme\"]) {\n    document.body.classList.add(\"dark-theme\");\n  } else {\n    document.body.classList.add(\"light-theme\");\n  }\n  activateTheme();\n  window.APP?.store?.addEventListener(\"statechanged\", onStoreChanged);\n});\n\nfunction applyThemeToTextButton(el, highlighted) {\n  el.setAttribute(\n    \"text-button\",\n    \"backgroundColor\",\n    highlighted ? getThemeColor(\"action-color-highlight\") : getThemeColor(\"action-color\")\n  );\n  el.setAttribute(\n    \"text-button\",\n    \"backgroundHoverColor\",\n    highlighted ? \"#aaa\" : getThemeColor(\"action-color-highlight\")\n  );\n}\n\nfunction getDefaultTheme() {\n  return themes.find(t => t.default) || themes[0];\n}\n\nexport { applyThemeToTextButton, getThemeColor, getDefaultTheme };\n","// extracted by mini-css-extract-plugin\nexport default {\"no-default-button-style\":\"scene__no-default-button-style__y0MkT\",\"noDefaultButtonStyle\":\"scene__no-default-button-style__y0MkT\",\"loading-text\":\"scene__loading-text__gWt0K\",\"loadingText\":\"scene__loading-text__gWt0K\"};","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n\nexport function qsGet(param) {\n  return qs.get(param);\n}\n","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*,naf-dialog-adapter:*,mediasoup*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","const THREE = AFRAME.THREE;\n\nfunction checkFloatTextureSupport() {\n  const renderer = new THREE.WebGLRenderer({ forceWebVR: true });\n\n  const scene = new THREE.Scene();\n  const size = 2;\n  const data = new Float32Array(size * size * 4);\n  const dataTexture = new THREE.DataTexture(data, size, size, THREE.RGBAFormat, THREE.FloatType);\n  const box = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), new THREE.MeshBasicMaterial({ map: dataTexture }));\n  box.material.map.needsUpdate = true;\n  scene.add(box);\n\n  renderer.render(scene, new THREE.Camera());\n  const result = renderer.getContext().getError() === 0;\n  renderer.dispose();\n  return result;\n}\n\nexport function patchWebGLRenderingContext() {\n  if (/Android.+Firefox/.test(navigator.userAgent)) {\n    // It appears that Galaxy S6 devices falsely report that they support\n    // OES_texture_float in Firefox. This workaround disables float textures\n    // for those devices.\n    // See https://github.com/mozilla/hubs/issues/32 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1338656\n    const originalGetExtension = WebGLRenderingContext.prototype.getExtension;\n    const supportsFloatTextures = checkFloatTextureSupport();\n    WebGLRenderingContext.prototype.getExtension = function patchedGetExtension(name) {\n      if (name === \"OES_texture_float\" && !supportsFloatTextures) {\n        return null;\n      }\n      return originalGetExtension.call(this, name);\n    };\n  }\n}\n\nexport function getWebGLVersion(renderer) {\n  const gl = renderer.getContext();\n  return gl.getParameter(gl.VERSION).split(\" \")[1];\n}\n","/**\n * Instantiates and updates a THREE.AnimationMixer on an entity.\n * @component animation-mixer\n */\n\nconst components = [];\nexport class AnimationMixerSystem {\n  tick(dt) {\n    for (let i = 0; i < components.length; i++) {\n      const cmp = components[i];\n      if (cmp.mixer) {\n        cmp.mixer.update(dt / 1000);\n      }\n    }\n  }\n}\n\nAFRAME.registerComponent(\"animation-mixer\", {\n  initMixer(animations) {\n    this.mixer = new THREE.AnimationMixer(this.el.object3D);\n    this.el.object3D.animations = animations;\n    this.animations = animations;\n  },\n  play() {\n    components.push(this);\n  },\n  pause() {\n    components.splice(components.indexOf(this), 1);\n  }\n});\n","export function findAncestorWithComponent(entity, componentName) {\n  while (entity && !(entity.components && entity.components[componentName])) {\n    entity = entity.parentNode;\n  }\n  return entity;\n}\n\nexport function findComponentsInNearestAncestor(entity, componentName) {\n  const components = [];\n  while (entity) {\n    if (entity.components) {\n      for (const c in entity.components) {\n        if (entity.components[c].name === componentName) {\n          components.push(entity.components[c]);\n        }\n      }\n    }\n    if (components.length) {\n      return components;\n    }\n    entity = entity.parentNode;\n  }\n  return components;\n}\n","export function easeOutQuadratic(t) {\n  return t * (2 - t);\n}\n// Adapted from\n// https://github.com/d3/d3-ease/blob/master/src/elastic.js#L18\nexport const elasticOut = (function() {\n  const tau = 2 * Math.PI,\n    a = 1,\n    p = 0.3 / tau,\n    s = Math.asin(1) * p;\n  return function elasticOut(t) {\n    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);\n  };\n})();\n","export const MediaDevicesEvents = Object.freeze({\n  PERMISSIONS_STATUS_CHANGED: \"permissions_status_changed\",\n  MIC_SHARE_STARTED: \"mic_share_started\",\n  MIC_SHARE_ENDED: \"mic_share_ended\",\n  VIDEO_SHARE_STARTED: \"video_share_started\",\n  VIDEO_SHARE_ENDED: \"video_share_ended\",\n  DEVICE_CHANGE: \"devicechange\"\n});\n\nexport const PermissionStatus = Object.freeze({\n  GRANTED: \"granted\",\n  DENIED: \"denied\",\n  PROMPT: \"prompt\"\n});\n\nexport const MediaDevices = Object.freeze({\n  MICROPHONE: \"microphone\",\n  SPEAKERS: \"speakers\",\n  CAMERA: \"camera\",\n  SCREEN: \"screen\"\n});\n\nexport const NO_DEVICE_ID = \"none\";\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { easeOutQuadratic } from \"../utils/easing\";\nimport { registerComponentInstance, deregisterComponentInstance } from \"../utils/component-utils\";\nimport { MediaDevicesEvents } from \"../utils/media-devices-utils\";\n\n// This computation is expensive, so we run on at most one avatar per frame, including quiet avatars.\n// However if we detect an avatar is seen speaking (its volume is above DISABLE_AT_VOLUME_THRESHOLD)\n// then we continue analysis for at least DISABLE_GRACE_PERIOD_MS and disable doing it every frame if\n// the avatar is quiet during that entire duration (eg they are muted)\nconst DISABLE_AT_VOLUME_THRESHOLD = 0.00001;\nconst DISABLE_GRACE_PERIOD_MS = 10000;\nconst IS_TALKING_THRESHOLD_MS = 1000;\nconst MIN_VOLUME_THRESHOLD = 0.08;\n\nconst calculateVolume = (analyser, levels) => {\n  // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n  analyser.getByteTimeDomainData(levels);\n  let sum = 0;\n  for (let i = 0; i < levels.length; i++) {\n    const amplitude = (levels[i] - 128) / 128;\n    sum += amplitude * amplitude;\n  }\n  const currVolume = Math.sqrt(sum / levels.length);\n  return currVolume;\n};\n\nfunction updateVolume(component) {\n  const newRawVolume = calculateVolume(component.analyser, component.levels);\n\n  const newPerceivedVolume = Math.log(THREE.MathUtils.mapLinear(newRawVolume, 0, 1, 1, Math.E));\n\n  component.volume = newPerceivedVolume < MIN_VOLUME_THRESHOLD ? 0 : newPerceivedVolume;\n\n  const s = component.volume > component.prevVolume ? 0.35 : 0.3;\n  component.volume = s * component.volume + (1 - s) * component.prevVolume;\n  component.prevVolume = component.volume;\n}\n\n/**\n * Updates a `volume` property based on a networked audio source\n * @namespace avatar\n * @component networked-audio-analyser\n */\nAFRAME.registerComponent(\"networked-audio-analyser\", {\n  async init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n    this.disableUpdates = true;\n    this.avatarIsTalking = false;\n\n    this._updateAnalysis = this._updateAnalysis.bind(this);\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._runScheduledWork, \"audio-analyser\");\n    this.el.addEventListener(\n      \"sound-source-set\",\n      event => {\n        const ctx = THREE.AudioContext.getContext();\n        this.analyser = ctx.createAnalyser();\n        this.analyser.fftSize = 32;\n        this.levels = new Uint8Array(this.analyser.fftSize);\n        event.detail.soundSource.connect(this.analyser);\n      },\n      { once: true }\n    );\n\n    this.playerSessionId = findAncestorWithComponent(this.el, \"player-info\").components[\"player-info\"].playerSessionId;\n    registerComponentInstance(this, \"networked-audio-analyser\");\n  },\n\n  remove: function() {\n    deregisterComponentInstance(this, \"networked-audio-analyser\");\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"audio-analyser\");\n  },\n\n  tick: function(t) {\n    if (!this.disableUpdates) {\n      this._updateAnalysis(t);\n    }\n  },\n\n  _runScheduledWork: function() {\n    if (this.disableUpdates) {\n      this._updateAnalysis();\n    }\n  },\n\n  // Updates the analysis/volume. If t is passed, that implies this is called via tick\n  // and so as a performance optimization will check to see if it's been at least DISABLE_GRACE_PERIOD_MS\n  // since the last volume was seen above DISABLE_AT_VOLUME_THRESHOLD, and if so, will disable\n  // tick updates until the volume exceeds the level again.\n  _updateAnalysis: function(t) {\n    if (!this.analyser) return;\n\n    updateVolume(this);\n\n    if (this.volume < DISABLE_AT_VOLUME_THRESHOLD) {\n      if (t && this.lastSeenVolume && this.lastSeenVolume < t - DISABLE_GRACE_PERIOD_MS) {\n        this.disableUpdates = true;\n      }\n      if (t && this.lastSeenVolume && this.lastSeenVolume < t - IS_TALKING_THRESHOLD_MS) {\n        this.avatarIsTalking = false;\n      }\n    } else {\n      if (t) {\n        this.lastSeenVolume = t;\n      }\n\n      this.disableUpdates = false;\n      this.avatarIsTalking = true;\n    }\n  }\n});\n\nfunction getAnalyser(el) {\n  // Is this the local player\n  const ikRootEl = findAncestorWithComponent(el, \"ik-root\");\n  if (ikRootEl && ikRootEl.id === \"avatar-rig\") {\n    return el.sceneEl.systems[\"local-audio-analyser\"];\n  } else {\n    const analyserEl = findAncestorWithComponent(el, \"networked-audio-analyser\");\n    if (!analyserEl) return null;\n    return analyserEl.components[\"networked-audio-analyser\"];\n  }\n}\n\n/**\n * Calculates volume of the local audio stream.\n */\nAFRAME.registerSystem(\"local-audio-analyser\", {\n  init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n\n    this.onMicEnabled = this.onMicEnabled.bind(this);\n    this.el.addEventListener(MediaDevicesEvents.MIC_SHARE_STARTED, this.onMicEnabled);\n  },\n\n  remove() {\n    this.el.removeEventListener(MediaDevicesEvents.MIC_SHARE_STARTED, this.onMicEnabled);\n  },\n\n  onMicEnabled() {\n    const audioSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSystem;\n    this.analyser = audioSystem.outboundAnalyser;\n    this.levels = audioSystem.analyserLevels;\n  },\n\n  tick: function() {\n    if (!this.analyser) return;\n\n    // TODO Ideally, when muted no audio should ever even make it into the analyser to begin with\n    if (APP.dialog.isMicEnabled) {\n      updateVolume(this);\n    } else {\n      this.prevVolume = this.volume;\n      this.volume = 0;\n    }\n  }\n});\n\n/**\n * Sets an entity's scale base on the volume of an audio-analyser in a parent entity.\n * @namespace avatar\n * @component scale-audio-feedback\n */\nAFRAME.registerComponent(\"scale-audio-feedback\", {\n  schema: {\n    minScale: { default: 1 },\n    maxScale: { default: 1.5 }\n  },\n\n  async init() {\n    await waitForDOMContentLoaded();\n    this.cameraEl = document.getElementById(\"viewing-camera\");\n  },\n\n  tick() {\n    if (!this.cameraEl) return;\n    if (!this.analyser) this.analyser = getAnalyser(this.el);\n\n    this.el.object3D.scale.setScalar(\n      THREE.MathUtils.mapLinear(this.analyser?.volume || 0, 0, 1, this.data.minScale, this.data.maxScale)\n    );\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n\n/**\n * Animates a morph target based on an audio-analyser in a parent entity\n * @namespace avatar\n * @component morph-audio-feedback\n */\nAFRAME.registerComponent(\"morph-audio-feedback\", {\n  schema: {\n    name: { default: \"\" },\n    minValue: { default: 0 },\n    maxValue: { default: 2 }\n  },\n\n  init() {\n    const meshes = [];\n    if (this.el.object3DMap.skinnedmesh) {\n      meshes.push(this.el.object3DMap.skinnedmesh);\n    } else if (this.el.object3DMap.group) {\n      // skinned mesh with multiple materials\n      this.el.object3DMap.group.traverse(o => o.isSkinnedMesh && meshes.push(o));\n    }\n    if (meshes.length) {\n      this.morphs = meshes\n        .map(mesh => ({ mesh, morphNumber: mesh.morphTargetDictionary[this.data.name] }))\n        .filter(m => m.morphNumber !== undefined);\n    }\n  },\n\n  tick() {\n    if (!this.morphs || !this.morphs.length) return;\n\n    if (!this.analyser) this.analyser = getAnalyser(this.el);\n\n    const { minValue, maxValue } = this.data;\n    const morphValue = THREE.MathUtils.mapLinear(\n      easeOutQuadratic(this.analyser ? this.analyser.volume : 0),\n      0,\n      1,\n      minValue,\n      maxValue\n    );\n    for (let i = 0; i < this.morphs.length; i++) {\n      this.morphs[i].mesh.morphTargetInfluences[this.morphs[i].morphNumber] = morphValue;\n    }\n  }\n});\n\nconst SPRITE_NAMES = {\n  MIC: [\"mic-0.png\", \"mic-1.png\", \"mic-2.png\", \"mic-3.png\", \"mic-4.png\", \"mic-5.png\", \"mic-6.png\", \"mic-7.png\"],\n  MIC_HOVER: [\n    \"mic-0_hover.png\",\n    \"mic-1_hover.png\",\n    \"mic-2_hover.png\",\n    \"mic-3_hover.png\",\n    \"mic-4_hover.png\",\n    \"mic-5_hover.png\",\n    \"mic-6_hover.png\",\n    \"mic-7_hover.png\"\n  ],\n  MIC_OFF: [\n    \"mic-off-0.png\",\n    \"mic-off-1.png\",\n    \"mic-off-2.png\",\n    \"mic-off-3.png\",\n    \"mic-off-4.png\",\n    \"mic-off-5.png\",\n    \"mic-off-6.png\",\n    \"mic-off-7.png\"\n  ],\n  MIC_OFF_HOVER: [\n    \"mic-off-0_hover.png\",\n    \"mic-off-1_hover.png\",\n    \"mic-off-2_hover.png\",\n    \"mic-off-3_hover.png\",\n    \"mic-off-4_hover.png\",\n    \"mic-off-5_hover.png\",\n    \"mic-off-6_hover.png\",\n    \"mic-off-7_hover.png\"\n  ]\n};\n\nexport function micLevelForVolume(volume) {\n  return THREE.MathUtils.clamp(Math.ceil(THREE.MathUtils.mapLinear(volume - 0.05, 0, 1, 0, 7)), 0, 7);\n}\n\nAFRAME.registerComponent(\"mic-button\", {\n  schema: {\n    active: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.prevSpriteName = \"\";\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.hovering = false;\n    this.onHover = () => {\n      this.hovering = true;\n      this.data.tooltip.setAttribute(\"visible\", true);\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.data.tooltip.setAttribute(\"visible\", false);\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    if (this.data.tooltip) {\n      this.textEl = this.data.tooltip.querySelector(\"[text]\");\n    }\n  },\n\n  tick() {\n    const audioAnalyser = this.el.sceneEl.systems[\"local-audio-analyser\"];\n    const active = this.data.active;\n    const hovering = this.hovering;\n    const spriteNames =\n      SPRITE_NAMES[active ? (hovering ? \"MIC_HOVER\" : \"MIC\") : hovering ? \"MIC_OFF_HOVER\" : \"MIC_OFF\"];\n    const level = micLevelForVolume(audioAnalyser.volume);\n    const spriteName = spriteNames[level];\n    if (spriteName !== this.prevSpriteName) {\n      this.prevSpriteName = spriteName;\n      this.el.setAttribute(\"sprite\", \"name\", spriteName);\n    }\n\n    if (this.data.tooltip && hovering) {\n      this.textEl = this.textEl || this.data.tooltip.querySelector(\"[text]\");\n      this.textEl.setAttribute(\"text\", \"value\", active ? this.data.activeTooltipText : this.data.tooltipText);\n    }\n  }\n});\n","// Provides a global registry of running components\nexport function registerComponentInstance(component, name) {\n  window.APP.componentRegistry = window.APP.componentRegistry || {};\n  window.APP.componentRegistry[name] = window.APP.componentRegistry[name] || [];\n  window.APP.componentRegistry[name].push(component);\n}\n\nexport function deregisterComponentInstance(component, name) {\n  if (!window.APP.componentRegistry || !window.APP.componentRegistry[name]) return;\n  window.APP.componentRegistry[name].splice(window.APP.componentRegistry[name].indexOf(component), 1);\n}\n\nexport function getCurrentStreamer() {\n  if (!window.APP || !window.APP.componentRegistry || !window.APP.hubChannel || !window.APP.hubChannel.presence)\n    return null;\n  const playerInfos = window.APP.componentRegistry[\"player-info\"] || [];\n  const presences = window.APP.hubChannel.presence.state;\n\n  for (let i = 0; i < playerInfos.length; i++) {\n    const playerInfo = playerInfos[i];\n    const presence = presences[playerInfo.playerSessionId];\n\n    if (presence && presence.metas[0] && presence.metas[0].streaming) {\n      return playerInfo;\n    }\n  }\n\n  return null;\n}\n\nexport function getPlayerInfo(sessionId) {\n  const playerInfos = window.APP?.componentRegistry[\"player-info\"] || [];\n  return playerInfos.find(info => {\n    return info.playerSessionId === sessionId;\n  });\n}\n","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"application/vnd.apple.mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"application/x-mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\nconst srcSuffixLookupMap = {\n  \".m3u8\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType, src) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.toLowerCase().startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  if (src) {\n    for (const suffix in srcSuffixLookupMap) {\n      if (src.toLowerCase().endsWith(suffix)) {\n        const types = srcSuffixLookupMap[suffix];\n        return objectTypeForOrigin(contentOrigin, ...types);\n      }\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","const adjectives = [\n  \"able\",\n  \"absolute\",\n  \"acceptable\",\n  \"acclaimed\",\n  \"accomplished\",\n  \"accurate\",\n  \"aching\",\n  \"acrobatic\",\n  \"adorable\",\n  \"adventurous\",\n  \"basic\",\n  \"belated\",\n  \"beloved\",\n  \"calm\",\n  \"candid\",\n  \"capital\",\n  \"carefree\",\n  \"caring\",\n  \"cautious\",\n  \"celebrated\",\n  \"charming\",\n  \"daring\",\n  \"darling\",\n  \"dearest\",\n  \"each\",\n  \"eager\",\n  \"early\",\n  \"earnest\",\n  \"easy\",\n  \"easygoing\",\n  \"ecstatic\",\n  \"edible\",\n  \"fabulous\",\n  \"fair\",\n  \"faithful\",\n  \"familiar\",\n  \"famous\",\n  \"fancy\",\n  \"fantastic\",\n  \"far\",\n  \"generous\",\n  \"gentle\",\n  \"genuine\",\n  \"giant\",\n  \"handmade\",\n  \"handsome\",\n  \"handy\",\n  \"happy\",\n  \"icy\",\n  \"ideal\",\n  \"identical\",\n  \"keen\",\n  \"lasting\",\n  \"lavish\",\n  \"magnificent\",\n  \"majestic\",\n  \"mammoth\",\n  \"marvelous\",\n  \"natural\",\n  \"obedient\",\n  \"palatable\",\n  \"parched\",\n  \"passionate\",\n  \"pastel\",\n  \"peaceful\",\n  \"perfect\",\n  \"perfumed\",\n  \"quaint\",\n  \"qualified\",\n  \"radiant\",\n  \"rapid\",\n  \"rare\",\n  \"safe\",\n  \"sandy\",\n  \"satisfied\",\n  \"scaly\",\n  \"scarce\",\n  \"scared\",\n  \"scary\",\n  \"scented\",\n  \"scientific\",\n  \"secret\",\n  \"sentimental\",\n  \"talkative\",\n  \"tangible\",\n  \"tart\",\n  \"tasty\",\n  \"tattered\",\n  \"teeming\",\n  \"ultimate\",\n  \"uncommon\",\n  \"unconscious\",\n  \"understated\",\n  \"warm\",\n  \"active\",\n  \"adept\",\n  \"admirable\",\n  \"admired\",\n  \"adorable\",\n  \"adored\",\n  \"advanced\",\n  \"affectionate\",\n  \"beneficial\",\n  \"best\",\n  \"better\",\n  \"big\",\n  \"cheerful\",\n  \"cheery\",\n  \"chief\",\n  \"chilly\",\n  \"classic\",\n  \"clean\",\n  \"clear\",\n  \"clever\",\n  \"decent\",\n  \"decisive\",\n  \"deep\",\n  \"defiant\",\n  \"definitive\",\n  \"delectable\",\n  \"delicious\",\n  \"elaborate\",\n  \"elastic\",\n  \"elated\",\n  \"elegant\",\n  \"elementary\",\n  \"elliptical\",\n  \"fast\",\n  \"favorable\",\n  \"favorite\",\n  \"fearless\",\n  \"gifted\",\n  \"glamorous\",\n  \"gleaming\",\n  \"glittering\",\n  \"harmonious\",\n  \"imaginative\",\n  \"immense\",\n  \"jealous\",\n  \"kind\",\n  \"leafy\",\n  \"legal\",\n  \"mature\",\n  \"mean\",\n  \"nautical\",\n  \"neat\",\n  \"necessary\",\n  \"needy\",\n  \"oddball\",\n  \"offbeat\",\n  \"periodic\",\n  \"perky\",\n  \"personal\",\n  \"pertinent\",\n  \"petty\",\n  \"quarterly\",\n  \"ready\",\n  \"real\",\n  \"realistic\",\n  \"reasonable\",\n  \"regal\",\n  \"serene\",\n  \"shabby\",\n  \"sharp\",\n  \"shiny\",\n  \"showy\",\n  \"shy\",\n  \"silky\",\n  \"tempting\",\n  \"tense\",\n  \"terrific\",\n  \"testy\",\n  \"thankful\",\n  \"uniform\",\n  \"unique\",\n  \"vast\",\n  \"weary\",\n  \"wee\",\n  \"welcome\",\n  \"agile\",\n  \"alarmed\",\n  \"alert\",\n  \"alive\",\n  \"bleak\",\n  \"blissful\",\n  \"blushing\",\n  \"coarse\",\n  \"colorful\",\n  \"colossal\",\n  \"comfortable\",\n  \"compassionate\",\n  \"complete\",\n  \"delightful\",\n  \"dense\",\n  \"dependable\",\n  \"dependent\",\n  \"descriptive\",\n  \"detailed\",\n  \"determined\",\n  \"devoted\",\n  \"different\",\n  \"eminent\",\n  \"emotional\",\n  \"enchanted\",\n  \"enchanting\",\n  \"energetic\",\n  \"enormous\",\n  \"fine\",\n  \"finished\",\n  \"firm\",\n  \"firsthand\",\n  \"fixed\",\n  \"flashy\",\n  \"flawless\",\n  \"glorious\",\n  \"glossy\",\n  \"golden\",\n  \"good\",\n  \"gorgeous\",\n  \"graceful\",\n  \"healthy\",\n  \"heartfelt\",\n  \"hearty\",\n  \"helpful\",\n  \"impartial\",\n  \"impressive\",\n  \"jolly\",\n  \"jovial\",\n  \"lighthearted\",\n  \"likable\",\n  \"lined\",\n  \"mellow\",\n  \"melodic\",\n  \"memorable\",\n  \"mild\",\n  \"new\",\n  \"opulent\",\n  \"playful\",\n  \"pleasant\",\n  \"pleasing\",\n  \"plump\",\n  \"plush\",\n  \"polished\",\n  \"polite\",\n  \"reliable\",\n  \"relieved\",\n  \"remarkable\",\n  \"remote\",\n  \"respectful\",\n  \"responsible\",\n  \"simple\",\n  \"simplistic\",\n  \"sizzling\",\n  \"sleepy\",\n  \"slight\",\n  \"slim\",\n  \"smart\",\n  \"smooth\",\n  \"snappy\",\n  \"snoopy\",\n  \"thirsty\",\n  \"this\",\n  \"thorough\",\n  \"those\",\n  \"thoughtful\",\n  \"united\",\n  \"vibrant\",\n  \"vicious\",\n  \"wellmade\",\n  \"whimsical\",\n  \"whirlwind\",\n  \"zesty\",\n  \"amazing\",\n  \"ambitious\",\n  \"ample\",\n  \"amused\",\n  \"amusing\",\n  \"ancient\",\n  \"angelic\",\n  \"antique\",\n  \"bold\",\n  \"bossy\",\n  \"both\",\n  \"bouncy\",\n  \"bountiful\",\n  \"complex\",\n  \"conscious\",\n  \"considerate\",\n  \"constant\",\n  \"content\",\n  \"conventional\",\n  \"cooked\",\n  \"cool\",\n  \"cooperative\",\n  \"diligent\",\n  \"dimwitted\",\n  \"direct\",\n  \"discrete\",\n  \"envious\",\n  \"essential\",\n  \"ethical\",\n  \"euphoric\",\n  \"flippant\",\n  \"fluffy\",\n  \"flustered\",\n  \"focused\",\n  \"fond\",\n  \"gracious\",\n  \"grand\",\n  \"grandiose\",\n  \"granular\",\n  \"grateful\",\n  \"grave\",\n  \"great\",\n  \"hidden\",\n  \"high\",\n  \"hilarious\",\n  \"homely\",\n  \"incomparable\",\n  \"incredible\",\n  \"infamous\",\n  \"joyful\",\n  \"lively\",\n  \"loathsome\",\n  \"lonely\",\n  \"long\",\n  \"mindless\",\n  \"miniature\",\n  \"minor\",\n  \"misty\",\n  \"next\",\n  \"nice\",\n  \"nifty\",\n  \"nimble\",\n  \"orderly\",\n  \"organic\",\n  \"ornate\",\n  \"popular\",\n  \"posh\",\n  \"positive\",\n  \"potable\",\n  \"powerful\",\n  \"powerless\",\n  \"precious\",\n  \"present\",\n  \"prestigious\",\n  \"quick\",\n  \"rewarding\",\n  \"rich\",\n  \"right\",\n  \"sociable\",\n  \"soft\",\n  \"solid\",\n  \"some\",\n  \"sophisticated\",\n  \"soulful\",\n  \"sparkling\",\n  \"spectacular\",\n  \"speedy\",\n  \"spicy\",\n  \"spiffy\",\n  \"spirited\",\n  \"spiteful\",\n  \"splendid\",\n  \"spotless\",\n  \"spry\",\n  \"thrifty\",\n  \"tidy\",\n  \"tight\",\n  \"timely\",\n  \"tinted\",\n  \"unruly\",\n  \"untimely\",\n  \"violet\",\n  \"wicked\",\n  \"wide\",\n  \"wild\",\n  \"willing\",\n  \"winding\",\n  \"windy\",\n  \"zigzag\",\n  \"apprehensive\",\n  \"appropriate\",\n  \"artistic\",\n  \"assured\",\n  \"astonishing\",\n  \"bright\",\n  \"brilliant\",\n  \"bronze\",\n  \"coordinated\",\n  \"courageous\",\n  \"courteous\",\n  \"crafty\",\n  \"crazy\",\n  \"creamy\",\n  \"creative\",\n  \"crisp\",\n  \"distant\",\n  \"distinct\",\n  \"downright\",\n  \"evergreen\",\n  \"everlasting\",\n  \"every\",\n  \"evil\",\n  \"excellent\",\n  \"excitable\",\n  \"exemplary\",\n  \"exhausted\",\n  \"forthright\",\n  \"fortunate\",\n  \"fragrant\",\n  \"frank\",\n  \"free\",\n  \"frequent\",\n  \"fresh\",\n  \"friendly\",\n  \"frightened\",\n  \"frigid\",\n  \"gripping\",\n  \"grounded\",\n  \"honest\",\n  \"honorable\",\n  \"honored\",\n  \"hopeful\",\n  \"hospitable\",\n  \"hot\",\n  \"huge\",\n  \"infatuated\",\n  \"infinite\",\n  \"informal\",\n  \"insistent\",\n  \"instructive\",\n  \"juicy\",\n  \"jumbo\",\n  \"knowing\",\n  \"knowledgeable\",\n  \"longterm\",\n  \"loud\",\n  \"lovable\",\n  \"loving\",\n  \"modern\",\n  \"modest\",\n  \"monumental\",\n  \"normal\",\n  \"notable\",\n  \"outgoing\",\n  \"precious\",\n  \"pretty\",\n  \"prickly\",\n  \"primary\",\n  \"pristine\",\n  \"private\",\n  \"prize\",\n  \"productive\",\n  \"profitable\",\n  \"quiet\",\n  \"quintessential\",\n  \"roasted\",\n  \"robust\",\n  \"square\",\n  \"squiggly\",\n  \"stable\",\n  \"staid\",\n  \"starry\",\n  \"steel\",\n  \"stimulating\",\n  \"striking\",\n  \"striped\",\n  \"strong\",\n  \"studious\",\n  \"stunning\",\n  \"tough\",\n  \"trained\",\n  \"treasured\",\n  \"tremendous\",\n  \"triangular\",\n  \"tricky\",\n  \"unused\",\n  \"unusual\",\n  \"upbeat\",\n  \"virtual\",\n  \"witty\",\n  \"wonderful\",\n  \"wooden\",\n  \"worldly\",\n  \"youthful\",\n  \"attached\",\n  \"attentive\",\n  \"attractive\",\n  \"austere\",\n  \"authentic\",\n  \"automatic\",\n  \"aware\",\n  \"awesome\",\n  \"bubbly\",\n  \"bustling\",\n  \"busy\",\n  \"buttery\",\n  \"cuddly\",\n  \"cultured\",\n  \"curly\",\n  \"curvy\",\n  \"cute\",\n  \"cylindrical\",\n  \"downright\",\n  \"dramatic\",\n  \"excited\",\n  \"exciting\",\n  \"exotic\",\n  \"experienced\",\n  \"expert\",\n  \"frosty\",\n  \"fruitful\",\n  \"full\",\n  \"fumbling\",\n  \"funny\",\n  \"fussy\",\n  \"growing\",\n  \"grown\",\n  \"gummy\",\n  \"humble\",\n  \"humongous\",\n  \"hungry\",\n  \"intelligent\",\n  \"interesting\",\n  \"known\",\n  \"kooky\",\n  \"loyal\",\n  \"lucky\",\n  \"luminous\",\n  \"lustrous\",\n  \"luxurious\",\n  \"multicolored\",\n  \"mysterious\",\n  \"noteworthy\",\n  \"numb\",\n  \"nutritious\",\n  \"outstanding\",\n  \"overjoyed\",\n  \"proper\",\n  \"proud\",\n  \"prudent\",\n  \"punctual\",\n  \"puny\",\n  \"pure\",\n  \"puzzled\",\n  \"puzzling\",\n  \"quirky\",\n  \"stupendous\",\n  \"sturdy\",\n  \"stylish\",\n  \"subdued\",\n  \"subtle\",\n  \"sunny\",\n  \"super\",\n  \"superb\",\n  \"supportive\",\n  \"surprised\",\n  \"sweet\",\n  \"swift\",\n  \"sympathetic\",\n  \"trivial\",\n  \"trusting\",\n  \"trustworthy\",\n  \"trusty\",\n  \"truthful\",\n  \"twin\",\n  \"usable\",\n  \"used\",\n  \"useful\",\n  \"utilized\",\n  \"vital\",\n  \"vivid\",\n  \"worried\",\n  \"worthwhile\",\n  \"worthy\",\n  \"writhing\",\n  \"wry\",\n  \"yummy\",\n  \"chocolate\",\n  \"crimson\",\n  \"cyan\",\n  \"fuchsia\",\n  \"gold\",\n  \"honeydew\",\n  \"lime\",\n  \"linen\",\n  \"magenta\",\n  \"olive\",\n  \"peru\",\n  \"salmon\",\n  \"seashell\",\n  \"sienna\",\n  \"snow\",\n  \"thistle\",\n  \"tomato\",\n  \"transparent\",\n  \"turquoise\",\n  \"violet\"\n];\n\nconst nouns = [\n  \"space\",\n  \"land\",\n  \"world\",\n  \"universe\",\n  \"plane\",\n  \"room\",\n  \"nation\",\n  \"plaza\",\n  \"gathering\",\n  \"meetup\",\n  \"get together\",\n  \"conclave\",\n  \"party\",\n  \"domain\",\n  \"dominion\",\n  \"realm\",\n  \"square\",\n  \"commons\",\n  \"park\",\n  \"cosmos\",\n  \"sphere\",\n  \"terrain\",\n  \"spot\",\n  \"zone\",\n  \"area\",\n  \"tract\",\n  \"turf\",\n  \"place\",\n  \"territory\",\n  \"volume\",\n  \"camp\",\n  \"picnic\",\n  \"outing\",\n  \"vacation\",\n  \"adventure\",\n  \"exploration\",\n  \"outing\",\n  \"walkabout\",\n  \"safari\",\n  \"venture\",\n  \"roundtable\",\n  \"barbecue\",\n  \"celebration\",\n  \"festivity\",\n  \"gala\",\n  \"shindig\",\n  \"social\",\n  \"convention\",\n  \"assembly\",\n  \"congregation\",\n  \"rendezvous\",\n  \"huddle\",\n  \"meet\",\n  \"soiree\"\n];\n\nexport function generateHubName() {\n  const randItem = set => {\n    const s = set[Math.floor(Math.random() * set.length)];\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  };\n\n  return `${randItem(adjectives)} ${randItem(adjectives)} ${randItem(nouns)}`;\n}\n","var isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nexport default deepmerge_1;\n","// from https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\nfunction detectTouchScreen() {\n  let hasTouchScreen = false;\n  if (\"maxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.maxTouchPoints > 0;\n  } else if (\"msMaxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.msMaxTouchPoints > 0;\n  } else {\n    const mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n    if (mQ && mQ.media === \"(pointer:coarse)\") {\n      hasTouchScreen = !!mQ.matches;\n    } else if (\"orientation\" in window) {\n      hasTouchScreen = true; // deprecated, but good fallback\n    } else {\n      // Only as a last resort, fall back to user agent sniffing\n      const UA = navigator.userAgent;\n      hasTouchScreen =\n        /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) || /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA);\n    }\n  }\n  return hasTouchScreen;\n}\n\nlet hackyMobileSafariTestValue = null;\n\n// HACK for https://github.com/mozilla/hubs/issues/1813\n// Touchscreen controls depend on iPad and iPhone detection,\n// which recently regressed. For UA matching \"Macintosh\", enable\n// touchscreen controls if there exists a touchscreen.\n// We cannot always enable touchscreen controls when a touchscreen\n// is present until we fix conflicts between simultaneous mouse\n// and touchscreen interactions.\nexport function hackyMobileSafariTest() {\n  if (hackyMobileSafariTestValue === null) {\n    hackyMobileSafariTestValue = /\\b(Macintosh|iPad|iPhone)\\b/i.test(navigator.userAgent) && detectTouchScreen();\n  }\n\n  return hackyMobileSafariTestValue;\n  // e.g. Match\n  // Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.1 Safari/605.1.15\n  // but not\n  // \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36\"\n}\n","import { hackyMobileSafariTest } from \"./detect-touchscreen\";\n\nconst MOBILE_RE = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\nconst TABLET_RE = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;\n\nexport function isAndroid() {\n  return /Android/.test(window.navigator.userAgent);\n}\n\n// from https://stackoverflow.com/questions/57776001/how-to-detect-ipad-pro-as-ipad-using-javascript\nfunction isIpadOS() {\n  return window.navigator.maxTouchPoints && window.navigator.maxTouchPoints > 2 && /MacIntel/.test(navigator.platform);\n}\n\n// lifted from https://github.com/aframevr/aframe/blob/master/src/utils/device.js to ensure consistency\nexport function isIOS() {\n  return /iPad|iPhone|iPod/.test(window.navigator.platform) || isIpadOS();\n}\n\nfunction isTablet(mockUserAgent) {\n  const userAgent = mockUserAgent || window.navigator.userAgent;\n  return isIpadOS() || /ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(userAgent);\n}\n\nfunction isR7() {\n  return /R7 Build/.test(window.navigator.userAgent);\n}\n\nfunction isOculusBrowser() {\n  return /(OculusBrowser)/i.test(window.navigator.userAgent);\n}\n\nfunction isFirefoxReality() {\n  return /(Mobile VR)/i.test(window.navigator.userAgent);\n}\n\nexport function isMobileVR() {\n  return isOculusBrowser() || isFirefoxReality();\n}\n\nconst isMobile = (function() {\n  let _isMobile = false;\n  (function(a) {\n    // eslint-disable-next-line no-useless-escape\n    if (MOBILE_RE.test(a) || TABLET_RE.test(a.substr(0, 4))) {\n      _isMobile = true;\n    }\n    if (isIOS() || isTablet() || isR7()) {\n      _isMobile = true;\n    }\n    if (hackyMobileSafariTest()) {\n      _isMobile = true;\n    }\n    if (isMobileVR()) {\n      _isMobile = false;\n    }\n  })(window.navigator.userAgent || window.navigator.vendor || window.opera);\n\n  return function() {\n    return _isMobile;\n  };\n})();\n\nexport default isMobile;\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport defaultAvatar from \"../assets/models/DefaultAvatar.glb\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction chooseRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${chooseRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport async function fetchRandomDefaultAvatarId() {\n  const defaultAvatarEndpoint = \"/api/v1/media/search?filter=default&source=avatar_listings\";\n  const defaultAvatars = (await fetchReticulumAuthenticated(defaultAvatarEndpoint)).entries || [];\n  if (defaultAvatars.length === 0) {\n    // If reticulum doesn't return any default avatars, just default to the duck model. This should only happen\n    // when running against a fresh reticulum server, e.g. a local ret instance.\n    return new URL(defaultAvatar, location.href).href;\n  }\n  const avatarIds = defaultAvatars.map(avatar => avatar.id);\n  return chooseRandom(avatarIds);\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\nimport { qsGet } from \"../utils/qs_truthy.js\";\nimport detectMobile, { isAndroid, isMobileVR } from \"../utils/is-mobile\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { fetchRandomDefaultAvatarId, generateRandomName } from \"../utils/identity.js\";\nimport { NO_DEVICE_ID } from \"../utils/media-devices-utils.js\";\nimport { getDefaultTheme } from \"../utils/theme.js\";\n\nconst defaultMaterialQuality = (function() {\n  const MATERIAL_QUALITY_OPTIONS = [\"low\", \"medium\", \"high\"];\n\n  // HACK: AFRAME is not available on all pages, so we catch the ReferenceError.\n  // We could move AFRAME's device utils into a separate package (or into this repo)\n  // if we wanted to use these checks without having to import all of AFRAME.\n  const isMobile = window.AFRAME && (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR());\n  if (isMobile) {\n    const qsMobileDefault = qsGet(\"default_mobile_material_quality\");\n    if (qsMobileDefault && MATERIAL_QUALITY_OPTIONS.indexOf(qsMobileDefault) !== -1) {\n      return qsMobileDefault;\n    }\n    return \"low\";\n  }\n\n  const qsDefault = qsGet(\"default_material_quality\");\n  if (qsDefault && MATERIAL_QUALITY_OPTIONS.indexOf(qsDefault) !== -1) {\n    return qsDefault;\n  }\n\n  return \"high\";\n})();\n\n// WebAudio on Android devices (only non-VR devices?) seems to have\n// a bug and audio can be broken if there are many people in a room.\n// We have reported the problem to the Android devs. We found that\n// using equal power panning mode can mitigate the problem so we\n// use low audio panning quality (= equal power mode) by default\n// on Android as workaround until the root issue is fixed on\n// Android end. See\n//   - https://github.com/mozilla/hubs/issues/5057\n//   - https://bugs.chromium.org/p/chromium/issues/detail?id=1308962\nconst defaultAudioPanningQuality = () => {\n  return isAndroid() && !isMobileVR() ? \"Low\" : \"High\";\n};\n\n//workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1626081 : disable echoCancellation, noiseSuppression, autoGainControl\nconst isFirefoxReality = window.AFRAME?.utils.device.isMobileVR() && navigator.userAgent.match(/Firefox/);\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z-0-9_~ -]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        // personalAvatarId is obsolete, but we need it here for backwards compatibility.\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" },\n        micMuted: { type: \"bool\" }\n      }\n    },\n\n    preferences: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        shouldPromptForRefresh: { type: \"bool\", default: false },\n        // Preferred media will be set dynamically\n        preferredMic: { type: \"string\", default: NO_DEVICE_ID },\n        preferredSpeakers: { type: \"string\", default: NO_DEVICE_ID },\n        preferredCamera: { type: \"string\", default: NO_DEVICE_ID },\n        muteMicOnEntry: { type: \"bool\", default: false },\n        disableLeftRightPanning: { type: \"bool\", default: false },\n        audioNormalization: { type: \"bool\", default: 0.0 },\n        invertTouchscreenCameraMove: { type: \"bool\", default: true },\n        enableOnScreenJoystickLeft: { type: \"bool\", default: detectMobile() },\n        enableOnScreenJoystickRight: { type: \"bool\", default: detectMobile() },\n        enableGyro: { type: \"bool\", default: true },\n        animateWaypointTransitions: { type: \"bool\", default: true },\n        showFPSCounter: { type: \"bool\", default: false },\n        allowMultipleHubsInstances: { type: \"bool\", default: false },\n        disableIdleDetection: { type: \"bool\", default: false },\n        fastRoomSwitching: { type: \"bool\", default: false },\n        lazyLoadSceneMedia: { type: \"bool\", default: false },\n        preferMobileObjectInfoPanel: { type: \"bool\", default: false },\n        // if unset, maxResolution = screen resolution\n        maxResolutionWidth: { type: \"number\", default: undefined },\n        maxResolutionHeight: { type: \"number\", default: undefined },\n        globalVoiceVolume: { type: \"number\", default: 100 },\n        globalMediaVolume: { type: \"number\", default: 100 },\n        globalSFXVolume: { type: \"number\", default: 100 },\n        snapRotationDegrees: { type: \"number\", default: 45 },\n        materialQualitySetting: { type: \"string\", default: defaultMaterialQuality },\n        enableDynamicShadows: { type: \"bool\", default: false },\n        disableSoundEffects: { type: \"bool\", default: false },\n        disableMovement: { type: \"bool\", default: false },\n        disableBackwardsMovement: { type: \"bool\", default: false },\n        disableStrafing: { type: \"bool\", default: false },\n        disableTeleporter: { type: \"bool\", default: false },\n        disableAutoPixelRatio: { type: \"bool\", default: false },\n        movementSpeedModifier: { type: \"number\", default: 1 },\n        disableEchoCancellation: { type: \"bool\", default: isFirefoxReality },\n        disableNoiseSuppression: { type: \"bool\", default: isFirefoxReality },\n        disableAutoGainControl: { type: \"bool\", default: isFirefoxReality },\n        locale: { type: \"string\", default: \"browser\" },\n        showRtcDebugPanel: { type: \"bool\", default: false },\n        showAudioDebugPanel: { type: \"bool\", default: false },\n        enableAudioClipping: { type: \"bool\", default: false },\n        audioClippingThreshold: { type: \"number\", default: 0.015 },\n        audioPanningQuality: { type: \"string\", default: defaultAudioPanningQuality() },\n        theme: { type: \"string\", default: getDefaultTheme()?.name },\n        cursorSize: { type: \"number\", default: 1 },\n        nametagVisibility: { type: \"string\", default: \"showAll\" },\n        nametagVisibilityDistance: { type: \"number\", default: 5 },\n        avatarVoiceLevels: { type: \"object\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    preferences: { $ref: \"#/definitions/preferences\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    this._preferences = {};\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: [],\n      onLoadActions: [],\n      preferences: {}\n    });\n\n    this._shouldResetAvatarOnInit = false;\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this._shouldResetAvatarOnInit = true;\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n\n    this._signOutOnExpiredAuthToken();\n\n    const maybeDispatchThemeChanged = (() => {\n      let previous;\n      return () => {\n        const current = this.state.preferences.theme;\n        if ((previous || current) && previous !== current) {\n          this.dispatchEvent(new CustomEvent(\"themechanged\", { detail: { current, previous } }));\n        }\n        previous = current;\n      };\n    })();\n    this.addEventListener(\"statechanged\", maybeDispatchThemeChanged);\n  }\n\n  _signOutOnExpiredAuthToken = () => {\n    if (!this.state.credentials.token) return;\n\n    const expiry = jwtDecode(this.state.credentials.token).exp * 1000;\n    if (expiry <= Date.now()) {\n      this.update({ credentials: { token: null, email: null } });\n    }\n  };\n\n  initProfile = async () => {\n    if (this._shouldResetAvatarOnInit) {\n      await this.resetToRandomDefaultAvatar();\n    } else {\n      this.update({\n        profile: { avatarId: await fetchRandomDefaultAvatarId(), ...(this.state.profile || {}) }\n      });\n    }\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomDefaultAvatar = async () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), avatarId: await fetchRandomDefaultAvatarId() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      const state = (this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY)));\n      if (!state.preferences) state.preferences = {};\n      this._preferences = { ...state.preferences }; // cache prefs without injected defaults\n      // inject default values\n      for (const [key, props] of Object.entries(SCHEMA.definitions.preferences.properties)) {\n        if (!props.hasOwnProperty(\"default\")) continue;\n        if (!state.preferences.hasOwnProperty(key)) {\n          state.preferences[key] = props.default;\n        } else if (state.preferences[key] === props.default) {\n          delete this._preferences[key];\n        }\n      }\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\n  }\n\n  resetTipActivityFlags() {\n    this.update({\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\n    });\n  }\n\n  bumpEntryCount() {\n    const currentEntryCount = this.state.activity.entryCount || 0;\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\n  }\n\n  // Sets a one-time action to perform the next time the page loads\n  enqueueOnLoadAction(action, args) {\n    this.update({ onLoadActions: [{ action, args }] });\n  }\n\n  executeOnLoadActions(sceneEl) {\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\n      const { action, args } = this.state.onLoadActions[i];\n\n      if (action === \"emit_scene_event\") {\n        sceneEl.emit(args.event, args.detail);\n      }\n    }\n\n    this.clearOnLoadActions();\n  }\n\n  clearOnLoadActions() {\n    this.clearStoredArray(\"onLoadActions\");\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge({ ...this.state, preferences: this._preferences }, newState, mergeOpts);\n    const { valid, errors } = validator.validate(finalState, SCHEMA);\n\n    // Cleanup unsupported properties\n    if (!valid) {\n      errors.forEach(error => {\n        console.error(`Removing invalid preference from store: ${error.message}`);\n        delete error.instance[error.argument];\n      });\n    }\n\n    if (newState.preferences) {\n      // clear preference if equal to default value so that, when client is updated with different defaults,\n      // new defaults will apply without user action\n      for (const [key, value] of Object.entries(finalState.preferences)) {\n        if (\n          SCHEMA.definitions.preferences.properties[key]?.hasOwnProperty(\"default\") &&\n          value === SCHEMA.definitions.preferences.properties[key].default\n        ) {\n          delete finalState.preferences[key];\n        }\n      }\n      this._preferences = finalState.preferences;\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    if (newState.profile !== undefined) {\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\n    }\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n\n  get schema() {\n    return SCHEMA;\n  }\n}\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport configs from \"../utils/configs\";\nimport { sleep } from \"../utils/async-utils\";\n\nimport Store from \"../storage/store\";\n\nexport function hasReticulumServer() {\n  return !!configs.RETICULUM_SERVER;\n}\n\nexport function isLocalClient() {\n  return hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER;\n}\n\nexport function hubUrl(hubId, extraParams, slug) {\n  if (!hubId) {\n    if (isLocalClient()) {\n      hubId = new URLSearchParams(location.search).get(\"hub_id\");\n    } else {\n      hubId = location.pathname.split(\"/\")[1];\n    }\n  }\n\n  let url;\n  if (isLocalClient()) {\n    url = new URL(`/hub.html`, location.href);\n    url.searchParams.set(\"hub_id\", hubId);\n  } else {\n    const maybeSlug = slug ? `/${slug}` : \"\";\n    url = new URL(`/${hubId}${maybeSlug}`, location.href);\n  }\n\n  for (const key in extraParams) {\n    if (extraParams.hasOwnProperty(key)) {\n      url.searchParams.set(key, extraParams[key]);\n    }\n  }\n\n  return url;\n}\n\nconst resolverLink = document.createElement(\"a\");\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport function getReticulumFetchUrl(path, absolute = false, host = null, port = null) {\n  if (host || hasReticulumServer()) {\n    return `https://${host || configs.RETICULUM_SERVER}${port ? `:${port}` : \"\"}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nexport function getUploadsUrl(path, absolute = false, host = null, port = null) {\n  // If the Hubs Cloud stack is configured to use Cloudflare, we need to ignore the configured UPLOADS_HOST\n  // since reticulum will only serve uploads via the Cloudflare worker. BASE_ASSETS_PATH will have been\n  // correctly configured to use the Cloudflare worker, though we only need the hostname,\n  // not the full assets URL.\n  const isUsingCloudflare = configs.BASE_ASSETS_PATH.includes(\"workers.dev\");\n  const uploadsHost = isUsingCloudflare ? new URL(configs.BASE_ASSETS_PATH).hostname : configs.UPLOADS_HOST;\n  return uploadsHost\n    ? `https://${uploadsHost}${port ? `:${port}` : \"\"}${path}`\n    : getReticulumFetchUrl(path, absolute, host, port);\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nlet directReticulumHostAndPort;\n\nasync function refreshDirectReticulumHostAndPort() {\n  const qs = new URLSearchParams(location.search);\n  let host = qs.get(\"phx_host\");\n  const reticulumMeta = await getReticulumMeta();\n  host = host || configs.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n  const port =\n    qs.get(\"phx_port\") ||\n    (hasReticulumServer() ? new URL(`${document.location.protocol}//${configs.RETICULUM_SERVER}`).port : \"443\");\n  directReticulumHostAndPort = { host, port };\n}\n\nexport function getDirectReticulumFetchUrl(path, absolute = false) {\n  if (!directReticulumHostAndPort) {\n    console.warn(\"Cannot call getDirectReticulumFetchUrl before connectToReticulum. Returning non-direct url.\");\n    return getReticulumFetchUrl(path, absolute);\n  }\n\n  const { host, port } = directReticulumHostAndPort;\n  return getReticulumFetchUrl(path, absolute, host, port);\n}\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function connectToReticulum(debug = false, params = null, socketClass = Socket) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    await refreshDirectReticulumHostAndPort();\n    const { host, port } = directReticulumHostAndPort;\n    const protocol =\n      qs.get(\"phx_protocol\") ||\n      configs.RETICULUM_SOCKET_PROTOCOL ||\n      (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n\n    return `${protocol}//${host}${port ? `:${port}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new socketClass(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n  const payload = { hub: { name: name || generateHubName() } };\n\n  if (sceneId) {\n    payload.hub.scene_id = sceneId;\n  }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (isLocalClient()) {\n    url = `/hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\nfunction migrateBindings(oldChannel, newChannel) {\n  const doNotDuplicate = [\"phx_close\", \"phx_error\", \"phx_reply\", \"presence_state\", \"presence_diff\"];\n  const shouldDuplicate = event => {\n    return !event.startsWith(\"chan_reply_\") && !doNotDuplicate.includes(event);\n  };\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    if (shouldDuplicate(item.event)) {\n      newChannel.bindings.push(item);\n    }\n  }\n  newChannel.bindingRef = oldChannel.bindingRef;\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  migrateBindings(oldChannel, channel);\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function migrateToChannel(oldChannel, newChannel) {\n  migrateBindings(oldChannel, newChannel);\n\n  return new Promise((resolve, reject) => {\n    newChannel\n      .join()\n      .receive(\"ok\", data => {\n        oldChannel.leave();\n        oldChannel.bindings = [];\n        resolve(data);\n      })\n      .receive(\"error\", data => {\n        newChannel.leave();\n        reject(data);\n      });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n      }\n    }\n  }\n  return channels;\n}\n\nexport function hasEmbedPresences(presences) {\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.context && m.context.embed) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nexport function denoisePresence({ onJoin, onLeave, onChange }) {\n  return {\n    rawOnJoin: (key, beforeJoin, afterJoin) => {\n      if (beforeJoin === undefined) {\n        onJoin(key, afterJoin.metas[0]);\n      }\n    },\n    rawOnLeave: (key, remaining, removed) => {\n      if (remaining.metas.length === 0) {\n        onLeave(key, removed.metas[0]);\n      } else {\n        onChange(key, removed.metas[removed.metas.length - 1], remaining.metas[remaining.metas.length - 1]);\n      }\n    }\n  };\n}\n\nexport function presenceEventsForHub(events) {\n  const onJoin = (key, meta) => {\n    events.trigger(`hub:join`, { key, meta });\n  };\n  const onLeave = (key, meta) => {\n    events.trigger(`hub:leave`, { key, meta });\n  };\n  const onChange = (key, previous, current) => {\n    events.trigger(`hub:change`, { key, previous, current });\n  };\n  return {\n    onJoin,\n    onLeave,\n    onChange\n  };\n}\n\nexport const tryGetMatchingMeta = async ({ ret_pool, ret_version }, shouldAbandonMigration) => {\n  const backoffMS = 5000;\n  const randomMS = 15000;\n  const maxAttempts = 10;\n  let didMatchMeta = false;\n  let attempt = 0;\n  while (!didMatchMeta && attempt < maxAttempts && !shouldAbandonMigration()) {\n    try {\n      // Add randomness to the first request avoid flooding reticulum.\n      const delayMS = attempt * backoffMS + (attempt === 0 ? Math.random() * randomMS : 0);\n      console.log(\n        `[reconnect] Getting reticulum meta in ${Math.ceil(delayMS / 1000)} seconds.${\n          attempt ? ` (Attempt ${attempt + 1} of ${maxAttempts})` : \"\"\n        }`\n      );\n      await sleep(delayMS);\n      invalidateReticulumMeta();\n      console.log(`[reconnect] Getting reticulum meta.${attempt ? ` (Attempt ${attempt + 1} of ${maxAttempts})` : \"\"}`);\n      const { pool, version } = await getReticulumMeta();\n      didMatchMeta = ret_pool === pool && ret_version === version;\n    } catch {\n      didMatchMeta = false;\n    }\n\n    attempt = attempt + 1;\n  }\n  return didMatchMeta;\n};\n","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function updateMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material = object3D.material.map(fn);\n  } else {\n    object3D.material = fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return [];\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return [fn(object3D.material)];\n  }\n}\n\n// HubsMeshBasicMaterial exists because we need to be able to set the emissiveMap in the avatar preview.\n// It also allows the material to be properly copied/cloned.\nclass HubsMeshBasicMaterial extends THREE.MeshBasicMaterial {\n  static fromMeshStandardMaterial(source) {\n    const material = new HubsMeshBasicMaterial();\n\n    THREE.Material.prototype.copy.call(material, source);\n\n    material.color.copy(source.color);\n\n    material.emissive.copy(source.emissive);\n    material.emissiveIntensity = source.emissiveIntensity;\n    material.emissiveMap = source.emissiveMap;\n\n    material.map = source.map;\n\n    material.lightMap = source.lightMap;\n    // See https://github.com/mrdoob/three.js/pull/23613 for \"* Math.PI\"\n    material.lightMapIntensity = source.lightMapIntensity * Math.PI;\n\n    material.aoMap = source.aoMap;\n    material.aoMapIntensity = source.aoMapIntensity;\n\n    material.alphaMap = source.alphaMap;\n\n    material.wireframe = source.wireframe;\n    material.wireframeLinewidth = source.wireframeLinewidth;\n    material.wireframeLinecap = source.wireframeLinecap;\n    material.wireframeLinejoin = source.wireframeLinejoin;\n\n    return material;\n  }\n\n  constructor({ emissive, emissiveMap, emissiveIntensity, ...rest } = {}) {\n    super(rest);\n    this._emissive = { value: emissive || new THREE.Color() };\n    this._emissiveIntensity = { value: emissiveIntensity === undefined ? 1 : emissiveIntensity };\n    this._emissiveMap = { value: emissiveMap };\n  }\n\n  get emissive() {\n    return this._emissive.value;\n  }\n\n  set emissive(emissive) {\n    this._emissive.value = emissive;\n  }\n\n  get emissiveIntensity() {\n    return this._emissiveIntensity.value;\n  }\n\n  set emissiveIntensity(emissiveIntensity) {\n    this._emissiveIntensity.value = emissiveIntensity;\n  }\n\n  get emissiveMap() {\n    return this._emissiveMap.value;\n  }\n\n  set emissiveMap(emissiveMap) {\n    this._emissiveMap.value = emissiveMap;\n  }\n\n  copy(source) {\n    super.copy(source);\n    this.emissive.copy(source.emissive);\n    this.emissiveIntensity = source.emissiveIntensity;\n    this.emissiveMap = source.emissiveMap;\n    return this;\n  }\n\n  onBeforeCompile = shader => {\n    // This patch to the MeshBasicMaterial adds support for emissive maps.\n    shader.uniforms.emissive = this._emissive;\n    shader.uniforms.emissiveIntensity = this._emissiveIntensity;\n    shader.uniforms.emissiveMap = this._emissiveMap;\n    shader.fragmentShader = shader.fragmentShader.replace(\n      \"#include <lightmap_pars_fragment>\",\n      `#include <lightmap_pars_fragment>\n      uniform vec3 emissive;\n      uniform sampler2D emissiveMap;\n      `\n    );\n    shader.fragmentShader = shader.fragmentShader.replace(\n      \"#include <envmap_fragment>\",\n      `#include <envmap_fragment>\n\n      vec3 totalEmissiveRadiance = emissive;\n      #include <emissivemap_fragment>\n      outgoingLight += totalEmissiveRadiance;\n\n      `\n    );\n  };\n}\n\nclass HubsMeshPhongMaterial extends THREE.MeshPhongMaterial {\n  static fromMeshStandardMaterial(source) {\n    const material = new HubsMeshPhongMaterial();\n\n    THREE.Material.prototype.copy.call(material, source);\n\n    material.color.copy(source.color);\n\n    material.map = source.map;\n\n    material.lightMap = source.lightMap;\n    material.lightMapIntensity = source.lightMapIntensity;\n\n    material.aoMap = source.aoMap;\n    material.aoMapIntensity = source.aoMapIntensity;\n\n    material.emissive.copy(source.emissive);\n    material.emissiveMap = source.emissiveMap;\n    material.emissiveIntensity = source.emissiveIntensity;\n\n    material.normalMapType = source.normalMapType;\n    material.normalMap = source.normalMap;\n    material.normalScale.copy(source.normalScale);\n\n    material.bumpMap = source.bumpMap;\n    material.bumpScale = source.bumpScale;\n\n    material.displacementMap = source.displacementMap;\n    material.displacementScale = source.displacementScale;\n    material.displacementBias = source.displacementBias;\n\n    material.alphaMap = source.alphaMap;\n\n    material.reflectivity = 0.5;\n    material.refractionRatio = source.refractionRatio;\n\n    material.wireframe = source.wireframe;\n    material.wireframeLinewidth = source.wireframeLinewidth;\n    material.wireframeLinecap = source.wireframeLinecap;\n    material.wireframeLinejoin = source.wireframeLinejoin;\n\n    return material;\n  }\n\n  onBeforeCompile = shader => {\n    // This patch to MeshPhongMaterial adds support for tangent space normal maps.\n    shader.vertexShader = shader.vertexShader.replace(\n      \"varying vec3 vNormal;\",\n      `varying vec3 vNormal;\n      #ifdef USE_TANGENT\n        varying vec3 vTangent;\n        varying vec3 vBitangent;\n      #endif\n      `\n    );\n    shader.vertexShader = shader.vertexShader.replace(\n      \"vNormal = normalize( transformedNormal );\",\n      `vNormal = normalize( transformedNormal );\n      \n        #ifdef USE_TANGENT\n      \n          vTangent = normalize( transformedTangent );\n          vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n      \n        #endif\n      `\n    );\n    shader.fragmentShader = shader.fragmentShader.replace(\n      \"#include <lights_phong_pars_fragment>\",\n      `#include <lights_phong_pars_fragment>\n      #ifndef FLAT_SHADED\n\n        #ifdef USE_TANGENT\n          varying vec3 vTangent;\n          varying vec3 vBitangent;\n        #endif\n\n      #endif\n      `\n    );\n  };\n}\n\nexport function convertStandardMaterial(source, quality) {\n  if (!source.isMeshStandardMaterial) {\n    return source;\n  }\n\n  if (quality === \"medium\") {\n    return HubsMeshPhongMaterial.fromMeshStandardMaterial(source);\n  } else if (quality === \"low\") {\n    return HubsMeshBasicMaterial.fromMeshStandardMaterial(source);\n  }\n\n  return source;\n}\n\nexport function disposeTexture(texture) {\n  if (texture.dash) {\n    texture.dash.reset();\n  }\n\n  if (texture.image instanceof HTMLVideoElement) {\n    const video = texture.image;\n    video.pause();\n    video.src = \"\";\n    video.load();\n  }\n\n  if (texture.hls) {\n    texture.hls.stopLoad();\n    texture.hls.detachMedia();\n    texture.hls.destroy();\n    texture.hls = null;\n  }\n\n  texture.dispose();\n}\n","import { isIOS as detectIOS } from \"../utils/is-mobile\";\n\nconst isIOS = detectIOS();\n\n// Disable ImageBitmap for Firefox so far because\n// createImageBitmap() with option fails on Firefox due to the bug.\n// Three.js ImageBitmapLoader passes {colorSpaceConversion: 'none'} option.\n// Without the option, the rendering result can be wrong if image file has ICC profiles.\n// See https://github.com/mrdoob/three.js/pull/21336\nconst HAS_IMAGE_BITMAP =\n  window.createImageBitmap !== undefined && /Firefox/.test(navigator.userAgent) === false && !isIOS;\nexport const TEXTURES_FLIP_Y = !HAS_IMAGE_BITMAP;\n\n// Browsers on iOS devices can crash if huge or many textures are used in a room.\n// Perhaps huge VRAM usage may cause it. We already reported it to the webkit devs.\n// Until the root issue is fixed on iOS end, we resize huge texture images in the\n// low material quality mode as workaround. It isn't a perfect solution but it\n// should mitigate the problem. Also disable image bitmap (See the above)\n// because huge textures resize + image bitmap can still even crash browsers.\n//\n// See\n//   - https://github.com/mozilla/hubs/issues/5295\n//   - https://bugs.webkit.org/show_bug.cgi?id=241478\n\nconst IOS_TEXTURE_MAX_WIDTH = 2048;\nconst IOS_TEXTURE_MAX_HEIGHT = 2048;\n\nfunction resizeIfNeeded(texture) {\n  if (!isIOS || window.APP.store.state.preferences.materialQualitySetting !== \"low\") {\n    return texture;\n  }\n\n  const image = texture.image;\n\n  // Just in case.\n  if (!image || image.width === undefined || image.height === undefined) {\n    return texture;\n  }\n\n  if (image.width <= IOS_TEXTURE_MAX_WIDTH && image.height <= IOS_TEXTURE_MAX_HEIGHT) {\n    return texture;\n  }\n\n  const conversionRatio = Math.min(IOS_TEXTURE_MAX_WIDTH / image.width, IOS_TEXTURE_MAX_HEIGHT / image.height);\n\n  const newWidth = Math.round(image.width * conversionRatio);\n  const newHeight = Math.round(image.height * conversionRatio);\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = newWidth;\n  canvas.height = newHeight;\n  const context = canvas.getContext(\"2d\");\n  context.drawImage(image, 0, 0, newWidth, newHeight);\n\n  texture.image = canvas;\n\n  if (image.close !== undefined) {\n    image.close();\n  }\n\n  texture.format = THREE.RGBAFormat;\n  texture.type = THREE.UnsignedByteType;\n  return texture;\n}\n\nexport default class HubsTextureLoader extends THREE.TextureLoader {\n  constructor(manager) {\n    super(manager);\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const callback = texture => {\n      resizeIfNeeded(texture);\n      if (onLoad) {\n        onLoad(texture);\n      }\n    };\n\n    const texture = HAS_IMAGE_BITMAP\n      ? this._loadImageBitmapTexture(url, callback, onProgress, onError)\n      : super.load(url, callback, onProgress, onError);\n\n    texture.onUpdate = function() {\n      // Delete texture data once it has been uploaded to the GPU\n      texture.image.close && texture.image.close();\n      texture.image = null;\n    };\n\n    return texture;\n  }\n\n  async loadAsync(url, onProgress) {\n    return new Promise((resolve, reject) => {\n      this.load(url, resolve, onProgress, reject);\n    });\n  }\n\n  _loadImageBitmapTexture(url, onLoad, onProgress, onError) {\n    const texture = new THREE.Texture();\n    const loader = new THREE.ImageBitmapLoader(this.manager);\n    loader.setCrossOrigin(this.crossOrigin);\n    loader.setPath(this.path);\n\n    loader.load(\n      url,\n      bitmap => {\n        texture.image = bitmap;\n        texture.needsUpdate = true;\n\n        // We close the image bitmap when it's uploaded to texture.\n        // Closed image bitmap can't be reused so we remove the cache\n        // added in ImageBitmapLoader.\n        // You can remove this line once we entirely disable THREE.Cache.\n        THREE.Cache.remove(this.manager.resolveURL(url));\n\n        if (onLoad !== undefined) {\n          onLoad(texture);\n        }\n      },\n      onProgress,\n      onError\n    );\n\n    texture.flipY = false;\n    return texture;\n  }\n}\n","import { defineComponent, setDefaultSize, setRemovedRecycleThreshold, Types } from \"bitecs\";\n\n// TODO this has to happen before all components are defined. Is there a better spot to be doing this?\nsetDefaultSize(10000);\nsetRemovedRecycleThreshold(0.2);\n\nexport const $isStringType = Symbol(\"isStringType\");\n\nexport const Networked = defineComponent({\n  id: Types.ui32,\n  creator: Types.ui32,\n  owner: Types.ui32,\n\n  lastOwnerTime: Types.ui32\n});\nNetworked.id[$isStringType] = true;\nNetworked.creator[$isStringType] = true;\nNetworked.owner[$isStringType] = true;\n\nexport const Owned = defineComponent();\nexport const NetworkedMediaFrame = defineComponent({\n  capturedNid: Types.ui32,\n  scale: [Types.f32, 3]\n});\nNetworkedMediaFrame.capturedNid[$isStringType] = true;\n\nexport const MediaFrame = defineComponent({\n  capturedNid: Types.ui32,\n  scale: [Types.f32, 3],\n  mediaType: Types.ui8,\n  bounds: [Types.f32, 3],\n  preview: Types.eid,\n  previewingNid: Types.eid\n});\nexport const Text = defineComponent();\nexport const Slice9 = defineComponent({\n  insets: [Types.ui32, 4],\n  size: [Types.f32, 2]\n});\n\nexport const NetworkedTransform = defineComponent({\n  position: [Types.f32, 3],\n  rotation: [Types.f32, 4],\n  scale: [Types.f32, 3]\n});\n\nexport const AEntity = defineComponent();\nexport const Object3DTag = defineComponent();\nexport const GLTFModel = defineComponent();\nexport const CursorRaycastable = defineComponent();\nexport const RemoteHoverTarget = defineComponent();\nexport const NotRemoteHoverTarget = defineComponent();\nexport const Holdable = defineComponent();\nexport const RemoveNetworkedEntityButton = defineComponent();\nexport const Interacted = defineComponent();\n\nexport const HandRight = defineComponent();\nexport const HandLeft = defineComponent();\nexport const RemoteRight = defineComponent();\nexport const RemoteLeft = defineComponent();\nexport const HoveredHandRight = defineComponent();\nexport const HoveredHandLeft = defineComponent();\nexport const HoveredRemoteRight = defineComponent();\nexport const HoveredRemoteLeft = defineComponent();\nexport const HeldHandRight = defineComponent();\nexport const HeldHandLeft = defineComponent();\nexport const HeldRemoteRight = defineComponent();\nexport const HeldRemoteLeft = defineComponent();\nexport const Held = defineComponent();\nexport const OffersRemoteConstraint = defineComponent();\nexport const HandCollisionTarget = defineComponent();\nexport const OffersHandConstraint = defineComponent();\nexport const TogglesHoveredActionSet = defineComponent();\n\nexport const HoverButton = defineComponent({ type: Types.ui8 });\nexport const TextButton = defineComponent({ labelRef: Types.eid });\nexport const HoldableButton = defineComponent();\nexport const SingleActionButton = defineComponent();\n\nexport const Pen = defineComponent();\nexport const HoverMenuChild = defineComponent();\nexport const Static = defineComponent();\nexport const Inspectable = defineComponent();\nexport const PreventAudioBoost = defineComponent();\nexport const IgnoreSpaceBubble = defineComponent();\nexport const Rigidbody = defineComponent({\n  bodyId: Types.ui16,\n  collisionGroup: Types.ui32,\n  collisionMask: Types.ui32,\n  flags: Types.ui8,\n  gravity: Types.f32\n});\nexport const PhysicsShape = defineComponent({ bodyId: Types.ui16, shapeId: Types.ui16, halfExtents: [Types.f32, 3] });\nexport const Pinnable = defineComponent();\nexport const Pinned = defineComponent();\nexport const DestroyAtExtremeDistance = defineComponent();\n\nexport const MediaLoading = defineComponent();\n\nexport const FloatyObject = defineComponent({ flags: Types.ui8, releaseGravity: Types.f32 });\nexport const MakeKinematicOnRelease = defineComponent();\n\nexport const CameraTool = defineComponent({\n  snapTime: Types.f32,\n  state: Types.ui8,\n  captureDurIdx: Types.ui8,\n  trackTarget: Types.eid,\n\n  snapMenuRef: Types.eid,\n  button_next: Types.eid,\n  button_prev: Types.eid,\n  snapRef: Types.eid,\n  cancelRef: Types.eid,\n  recVideoRef: Types.eid,\n  screenRef: Types.eid,\n  selfieScreenRef: Types.eid,\n  cameraRef: Types.eid,\n  countdownLblRef: Types.eid,\n  captureDurLblRef: Types.eid,\n  sndToggleRef: Types.eid\n});\nexport const MyCameraTool = defineComponent();\n","import { showHoverEffect } from \"../utils/permissions-utils\";\n\nconst interactorOneTransform = [];\nconst interactorTwoTransform = [];\n\nexport const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MeshPhongMaterial\"];\n/**\n * Applies effects to a hoverable based on hover state.\n * @namespace interactables\n * @component hoverable-visuals\n */\nAFRAME.registerComponent(\"hoverable-visuals\", {\n  schema: {\n    enableSweepingEffect: { type: \"boolean\", default: true }\n  },\n  init() {\n    // uniforms and boundingSphere are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n    this.geometryRadius = 0;\n\n    this.sweepParams = [0, 0];\n  },\n  remove() {\n    this.uniforms = null;\n    this.boundingBox = null;\n\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n    this.isTouchscreen = isMobile && !isMobileVR;\n  },\n  tick(time) {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const showEffect = showHoverEffect(this.el);\n    const toggling = this.el.sceneEl.systems[\"hubs-systems\"].cursorTogglingSystem;\n\n    let interactorOne, interactorTwo;\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    if (interaction.state.leftHand.hovered === this.el && !interaction.state.leftHand.held) {\n      interactorOne = interaction.options.leftHand.entity.object3D;\n    }\n    if (\n      interaction.state.leftRemote.hovered === this.el &&\n      !interaction.state.leftRemote.held &&\n      !toggling.leftToggledOff\n    ) {\n      interactorOne = interaction.options.leftRemote.entity.object3D;\n    }\n    if (\n      interaction.state.rightRemote.hovered === this.el &&\n      !interaction.state.rightRemote.held &&\n      !toggling.rightToggledOff\n    ) {\n      interactorTwo = interaction.options.rightRemote.entity.object3D;\n    }\n    if (interaction.state.rightHand.hovered === this.el && !interaction.state.rightHand.held) {\n      interactorTwo = interaction.options.rightHand.entity.object3D;\n    }\n\n    if (interactorOne) {\n      interactorOne.matrixWorld.toArray(interactorOneTransform);\n    }\n    if (interactorTwo) {\n      interactorTwo.matrixWorld.toArray(interactorTwoTransform);\n    }\n\n    if (interactorOne || interactorTwo || isFrozen) {\n      const worldY = this.el.object3D.matrixWorld.elements[13];\n      const ms1 = this.el.object3D.matrixWorld.elements[4];\n      const ms2 = this.el.object3D.matrixWorld.elements[5];\n      const ms3 = this.el.object3D.matrixWorld.elements[6];\n      const worldScale = Math.sqrt(ms1 * ms1 + ms2 * ms2 + ms3 * ms3);\n      const scaledRadius = worldScale * this.geometryRadius;\n      this.sweepParams[0] = worldY - scaledRadius;\n      this.sweepParams[1] = worldY + scaledRadius;\n    }\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_EnableSweepingEffect.value = this.data.enableSweepingEffect && showEffect;\n      uniform.hubs_IsFrozen.value = isFrozen;\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorOne.value = !!interactorOne && showEffect && !this.isTouchscreen;\n      uniform.hubs_InteractorOnePos.value[0] = interactorOneTransform[12];\n      uniform.hubs_InteractorOnePos.value[1] = interactorOneTransform[13];\n      uniform.hubs_InteractorOnePos.value[2] = interactorOneTransform[14];\n\n      uniform.hubs_HighlightInteractorTwo.value = !!interactorTwo && showEffect && !this.isTouchscreen;\n      uniform.hubs_InteractorTwoPos.value[0] = interactorTwoTransform[12];\n      uniform.hubs_InteractorTwoPos.value[1] = interactorTwoTransform[13];\n      uniform.hubs_InteractorTwoPos.value[2] = interactorTwoTransform[14];\n\n      if (interactorOne || interactorTwo || isFrozen) {\n        uniform.hubs_Time.value = time;\n      }\n    }\n  }\n});\n","// Brief overview of client authorization can be found in the wiki:\n\nimport { hasComponent } from \"bitecs\";\nimport { HoldableButton } from \"../bit-components\";\n\n// https://github.com/mozilla/hubs/wiki/Hubs-authorization\nexport function showHoverEffect(el) {\n  const isFrozen = el.sceneEl.is(\"frozen\");\n  const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n  const isSpawner = !!el.components[\"super-spawner\"];\n  const isEmojiSpawner = isSpawner && el.components[\"super-spawner\"].data.template === \"#interactable-emoji\";\n  const isEmoji = !!el.components.emoji;\n  const canMove =\n    (isEmoji || isEmojiSpawner\n      ? window.APP.hubChannel.can(\"spawn_emoji\")\n      : window.APP.hubChannel.can(\"spawn_and_move_media\")) &&\n    (!isPinned || window.APP.hubChannel.can(\"pin_objects\"));\n  return (isSpawner || !isPinned || isFrozen) && canMove;\n}\n\nexport function canMove(entity) {\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  const networkedTemplate = entity && entity.components.networked && entity.components.networked.data.template;\n  const isPen = networkedTemplate === \"#interactable-pen\";\n  const spawnerTemplate =\n    entity && entity.components[\"super-spawner\"] && entity.components[\"super-spawner\"].data.template;\n  const isEmojiSpawner = spawnerTemplate === \"#interactable-emoji\";\n  const isEmoji = !!entity.components.emoji;\n  return (\n    hasComponent(APP.world, HoldableButton, entity.eid) ||\n    ((isEmoji || isEmojiSpawner\n      ? window.APP.hubChannel.can(\"spawn_emoji\")\n      : window.APP.hubChannel.can(\"spawn_and_move_media\")) &&\n      (!isPinned || window.APP.hubChannel.can(\"pin_objects\")) &&\n      (!isPen || window.APP.hubChannel.can(\"spawn_drawing\")))\n  );\n}\n\nfunction indexForComponent(component, schema) {\n  const fullComponent = typeof component === \"string\";\n  const componentName = fullComponent ? component : component.component;\n\n  if (fullComponent) {\n    return schema.components.findIndex(schemaComponent => schemaComponent === componentName);\n  } else {\n    return schema.components.findIndex(\n      schemaComponent => schemaComponent.component === componentName && schemaComponent.property === component.property\n    );\n  }\n}\n\nlet nonAuthorizedSchemas = null;\nfunction initializeNonAuthorizedSchemas() {\n  /*\n  Takes the NAF schemas defined in network-schemas.js and produces a data structure of template name to non-authorized\n  component indices:\n  {\n    \"#interactable-media\": [\"4\", \"5\", \"6\"]\n  }\n  */\n  nonAuthorizedSchemas = {};\n  const { schemaDict } = NAF.schemas;\n  for (const template in schemaDict) {\n    if (!schemaDict.hasOwnProperty(template)) continue;\n    const schema = schemaDict[template];\n    nonAuthorizedSchemas[template] = (schema.nonAuthorizedComponents || [])\n      .map(nonAuthorizedComponent => indexForComponent(nonAuthorizedComponent, schema))\n      .map(index => index.toString());\n  }\n}\n\nfunction sanitizeMessageData(template, data) {\n  if (nonAuthorizedSchemas === null) {\n    initializeNonAuthorizedSchemas();\n  }\n  const nonAuthorizedIndices = nonAuthorizedSchemas[template];\n  for (const index in data.components) {\n    if (!data.components.hasOwnProperty(index)) continue;\n    if (!nonAuthorizedIndices.includes(index)) {\n      data.components[index] = null;\n    }\n  }\n  return data;\n}\n\nfunction authorizeEntityManipulation(entityMetadata, sender, senderPermissions) {\n  const { template, creator, isPinned } = entityMetadata;\n  const isCreator = sender === creator;\n\n  if (template.endsWith(\"-waypoint-avatar\") || template.endsWith(\"-media-frame\")) {\n    return true;\n  } else if (template.endsWith(\"-avatar\")) {\n    return isCreator;\n  } else if (template.endsWith(\"-media\")) {\n    return (!isPinned || senderPermissions.pin_objects) && (isCreator || senderPermissions.spawn_and_move_media);\n  } else if (template.endsWith(\"-camera\")) {\n    return isCreator || senderPermissions.spawn_camera;\n  } else if (template.endsWith(\"-pen\") || template.endsWith(\"-drawing\")) {\n    return isCreator || senderPermissions.spawn_drawing;\n  } else if (template.endsWith(\"-emoji\")) {\n    return isCreator || senderPermissions.spawn_emoji;\n  } else {\n    return false;\n  }\n}\n\nfunction getPendingOrExistingEntityMetadata(networkId) {\n  const pendingData = NAF.connection.adapter.getPendingDataForNetworkId(networkId);\n\n  if (pendingData) {\n    if (pendingData.owner) {\n      // If owner is no longer present, give up.\n      const presenceState = window.APP.hubChannel.presence.state[pendingData.owner];\n      if (!presenceState) return;\n    }\n\n    const { template, creator } = pendingData;\n    const schema = NAF.schemas.schemaDict[template];\n    const pinnableComponent = pendingData.components[indexForComponent(\"pinnable\", schema)];\n    const isPinned = pinnableComponent && pinnableComponent.pinned;\n    return { template, creator, isPinned };\n  }\n\n  const entity = NAF.entities.getEntity(networkId);\n  if (!entity) return null;\n\n  const { template, creator } = entity.components.networked.data;\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  return { template, creator, isPinned };\n}\n\nfunction authorizeOrSanitizeMessageData(data, sender, senderPermissions) {\n  const entityMetadata = getPendingOrExistingEntityMetadata(data.networkId);\n  if (!entityMetadata) return false;\n\n  if (authorizeEntityManipulation(entityMetadata, sender, senderPermissions)) {\n    return true;\n  } else {\n    const { template } = entityMetadata;\n    sanitizeMessageData(template, data);\n    return true;\n  }\n}\n\n// If we receive a sync from a persistent object that we don't have an entity for yet, it must be a scene-owned object\n// (since we guarantee that pinned objects are loaded before connecting NAF).\n// Since we need to get metadata (the template id in particular) from the entity, we must stash these messages until\n// the scene has loaded.\n// Components which require this data must call applyPersistentSync after they are initialized\nconst persistentSyncs = {};\nfunction stashPersistentSync(message, entityData) {\n  if (!persistentSyncs[entityData.networkId]) {\n    persistentSyncs[entityData.networkId] = {\n      dataType: \"u\",\n      data: entityData,\n      clientId: message.clientId,\n      from_session_id: message.from_session_id\n    };\n  } else {\n    const currentData = persistentSyncs[entityData.networkId].data;\n    const currentComponents = currentData.components;\n    Object.assign(currentData, entityData);\n    currentData.components = Object.assign(currentComponents, entityData.components);\n  }\n}\n\nconst emptyObject = {};\nexport function authorizeOrSanitizeMessage(message) {\n  const { dataType, from_session_id } = message;\n\n  if (dataType === \"u\" && message.data.isFirstSync && !message.data.persistent) {\n    // The server has already authorized first sync messages that result in an instantiation.\n    return message;\n  }\n\n  const presenceState = window.APP.hubChannel.presence.state[from_session_id];\n\n  if (!presenceState) {\n    // We've received a manipulation message from a user that we don't have presence state for yet.\n    // Since we can't make a judgement about their permissions, we'll have to ignore the message.\n    return emptyObject;\n  }\n\n  const senderPermissions = presenceState.metas[0].permissions;\n\n  if (dataType === \"um\") {\n    let sanitizedAny = false;\n    let stashedAny = false;\n    for (const index in message.data.d) {\n      if (!message.data.d.hasOwnProperty(index)) continue;\n      const entityData = message.data.d[index];\n      if (entityData.persistent && !NAF.entities.getEntity(entityData.networkId)) {\n        stashPersistentSync(message, entityData);\n        message.data.d[index] = null;\n        stashedAny = true;\n      } else {\n        const authorizedOrSanitized = authorizeOrSanitizeMessageData(entityData, from_session_id, senderPermissions);\n        if (!authorizedOrSanitized) {\n          message.data.d[index] = null;\n          sanitizedAny = true;\n        }\n      }\n    }\n\n    if (sanitizedAny || stashedAny) {\n      message.data.d = message.data.d.filter(x => x != null);\n    }\n\n    return message;\n  } else if (dataType === \"u\") {\n    if (message.data.persistent && !NAF.entities.getEntity(message.data.networkId)) {\n      persistentSyncs[message.data.networkId] = message;\n      return emptyObject;\n    } else {\n      const authorizedOrSanitized = authorizeOrSanitizeMessageData(message.data, from_session_id, senderPermissions);\n      if (authorizedOrSanitized) {\n        return message;\n      } else {\n        return emptyObject;\n      }\n    }\n  } else if (dataType === \"r\") {\n    const entityMetadata = getPendingOrExistingEntityMetadata(message.data.networkId);\n    if (!entityMetadata) return emptyObject;\n    if (authorizeEntityManipulation(entityMetadata, from_session_id, senderPermissions)) {\n      return message;\n    } else {\n      return emptyObject;\n    }\n  } else {\n    // Fall through for other data types. Namely, \"drawing-<networkId>\" messages at the moment.\n    return message;\n  }\n}\n\nexport function applyPersistentSync(networkId) {\n  if (!persistentSyncs[networkId]) return;\n  NAF.connection.adapter.handleIncomingNAF(persistentSyncs[networkId]);\n  delete persistentSyncs[networkId];\n}\n","import { hasReticulumServer } from \"./phoenix-utils\";\nimport configs from \"./configs\";\n\nconst nonCorsProxyDomains = (configs.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (configs.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(configs.CORS_PROXY_SERVER.split(\":\")[0]);\n}\nnonCorsProxyDomains.push(document.location.hostname);\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\",\n  basis: \"image/basis\",\n  ktx2: \"image/ktx2\",\n  m3u8: \"application/vnd.apple.mpegurl\",\n  mpd: \"application/dash+xml\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url).replace(/=+$/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  let extension = \"\";\n  try {\n    const pathParts = new URL(url).pathname.split(\".\");\n\n    if (pathParts.length > 1) {\n      const extensionCandidate = pathParts.pop();\n      if (commonKnownContentTypes[extensionCandidate]) {\n        extension = `.${extensionCandidate}`;\n      }\n    }\n  } catch (e) {\n    extension = \".png\";\n  }\n\n  // HACK: the extension is needed to ensure CDN caching on Cloudflare\n  const thumbnailUrl = `https://${configs.THUMBNAIL_SERVER}/thumbnail/${farsparkEncodeUrl(\n    url\n  )}${extension}?w=${width}&h=${height}`;\n\n  try {\n    const urlHostname = new URL(url).hostname;\n\n    if (hasReticulumServer()) {\n      const retHostname = new URL(`https://${configs.RETICULUM_SERVER}`).hostname;\n      if (retHostname === urlHostname) return url;\n    }\n  } catch (e) {\n    return thumbnailUrl;\n  }\n\n  return thumbnailUrl;\n};\n\nexport const isNonCorsProxyDomain = hostname => {\n  return nonCorsProxyDomains.find(domain => hostname.endsWith(domain));\n};\n\nexport const proxiedUrlFor = url => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  // Skip known domains that do not require CORS proxying.\n  try {\n    const parsedUrl = new URL(url);\n    if (isNonCorsProxyDomain(parsedUrl.hostname)) return url;\n  } catch (e) {\n    // Ignore\n  }\n\n  return `https://${configs.CORS_PROXY_SERVER}/${url}`;\n};\n\nexport function getAbsoluteUrl(baseUrl, relativeUrl) {\n  return new URL(relativeUrl, baseUrl);\n}\n\nexport function getAbsoluteHref(baseUrl, relativeUrl) {\n  return getAbsoluteUrl(baseUrl, relativeUrl).href;\n}\n\n// Note these files are configured in webpack.config.js to be handled with file-loader, so this will be a string containing the file paths\nimport basisJsUrl from \"three/examples/js/libs/basis/basis_transcoder.js\";\nimport dracoWrapperJsUrl from \"three/examples/js/libs/draco/gltf/draco_wasm_wrapper.js\";\nimport basisWasmUrl from \"three/examples/js/libs/basis/basis_transcoder.wasm\";\nimport dracoWasmUrl from \"three/examples/js/libs/draco/gltf/draco_decoder.wasm\";\n\nexport const rewriteBasisTranscoderUrls = function (url) {\n  if (url === \"basis_transcoder.js\") {\n    return basisJsUrl;\n  } else if (url === \"basis_transcoder.wasm\") {\n    return basisWasmUrl;\n  }\n  return url;\n};\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  // Intercept loading of basis transcoder with content hashed urls\n  if (url === \"basis_transcoder.js\") {\n    return basisJsUrl;\n  } else if (url === \"basis_transcoder.wasm\") {\n    return basisWasmUrl;\n  } else if (url === \"draco_wasm_wrapper.js\") {\n    return dracoWrapperJsUrl;\n  } else if (url === \"draco_decoder.wasm\") {\n    return dracoWasmUrl;\n  }\n\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return proxiedUrlFor(url);\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (configs.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${configs.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\n\nexport const guessContentType = url => {\n  if (!url) return;\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  if (url.startsWith(\"data:\")) {\n    const matches = dataUrlRegex.exec(url);\n    if (matches.length > 0) {\n      matches[1];\n    }\n  }\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\n\nconst originIsHubsServer = new Map();\nasync function isHubsServer(url) {\n  if (!url) return false;\n  if (!url.startsWith(\"http\")) {\n    url = \"https://\" + url;\n  }\n  const { origin } = new URL(url);\n\n  if (originIsHubsServer.has(origin)) {\n    return originIsHubsServer.get(origin);\n  }\n\n  let isHubsServer;\n  try {\n    isHubsServer = (await fetch(proxiedUrlFor(origin), { method: \"HEAD\" })).headers.has(\"hub-name\");\n  } catch (e) {\n    isHubsServer = false;\n  }\n  originIsHubsServer.set(origin, isHubsServer);\n  return isHubsServer;\n}\n\nconst hubsSceneRegex = /https?:\\/\\/[^/]+\\/scenes\\/[a-zA-Z0-9]{7}(?:\\/|$)/;\nconst hubsAvatarRegex = /https?:\\/\\/[^/]+\\/avatars\\/(?<id>[a-zA-Z0-9]{7})(?:\\/|$)/;\nconst hubsRoomRegex = /(https?:\\/\\/)?[^/]+\\/(?<id>[a-zA-Z0-9]{7})(?:\\/|$)/;\n\nexport const isLocalHubsUrl = async url =>\n  (await isHubsServer(url)) && new URL(url).origin === document.location.origin;\n\nexport const isHubsSceneUrl = async url => (await isHubsServer(url)) && hubsSceneRegex.test(url);\nexport const isLocalHubsSceneUrl = async url => (await isHubsSceneUrl(url)) && (await isLocalHubsUrl(url));\n\nexport const isHubsAvatarUrl = async url => (await isHubsServer(url)) && hubsAvatarRegex.test(url);\nexport const isLocalHubsAvatarUrl = async url => (await isHubsAvatarUrl(url)) && (await isLocalHubsUrl(url));\n\nexport const isHubsRoomUrl = async url =>\n  (await isHubsServer(url)) &&\n  !(await isHubsAvatarUrl(url)) &&\n  !(await isHubsSceneUrl(url)) &&\n  url.match(hubsRoomRegex)?.groups.id;\n\nexport const isHubsDestinationUrl = async url =>\n  (await isHubsServer(url)) && ((await isHubsSceneUrl(url)) || (await isHubsRoomUrl(url)));\n\nexport const idForAvatarUrl = url => {\n  const match = url.match(hubsAvatarRegex);\n  if (match) {\n    return match.groups.id;\n  }\n  return null;\n};\n","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl, getDirectReticulumFetchUrl } from \"./phoenix-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\nimport { updateMaterials } from \"./material-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { validMaterials } from \"../components/hoverable-visuals\";\nimport { proxiedUrlFor, guessContentType } from \"../utils/media-url-utils\";\nimport { isIOS as detectIOS } from \"./is-mobile\";\nimport Linkify from \"linkify-it\";\nimport tlds from \"tlds\";\n\nimport anime from \"animejs\";\n\nexport const MediaType = {\n  MODEL: 1 << 0,\n  IMAGE: 1 << 1,\n  VIDEO: 1 << 2,\n  PDF: 1 << 3\n};\nMediaType.ALL = MediaType.MODEL | MediaType.IMAGE | MediaType.VIDEO | MediaType.PDF;\nMediaType.ALL_2D = MediaType.IMAGE | MediaType.VIDEO | MediaType.PDF;\n\nconst linkify = Linkify();\nlinkify.tlds(tlds);\n\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\nconst getDirectMediaAPIEndpoint = () => getDirectReticulumFetchUrl(\"/api/v1/media\");\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobile();\n\n// Map<String, Promise<Object>\nconst resolveUrlCache = new Map();\nexport const getDefaultResolveQuality = (is360 = false) => {\n  const useLowerQuality = isMobile || isMobileVR;\n  return !is360 ? (useLowerQuality ? \"low\" : \"high\") : useLowerQuality ? \"low_360\" : \"high_360\";\n};\n\nexport const resolveUrl = async (url, quality = null, version = 1, bustCache) => {\n  const key = `${url}_${version}`;\n  if (!bustCache && resolveUrlCache.has(key)) return resolveUrlCache.get(key);\n\n  const resultPromise = fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, quality: quality || getDefaultResolveQuality() }, version })\n  }).then(async response => {\n    if (!response.ok) {\n      const message = `Error resolving url \"${url}\":`;\n      try {\n        const body = await response.text();\n        throw new Error(message + \" \" + body);\n      } catch (e) {\n        throw new Error(message + \" \" + response.statusText);\n      }\n    }\n    return response.json();\n  });\n\n  resolveUrlCache.set(key, resultPromise);\n  return resultPromise;\n};\n\nexport const upload = (file, desiredContentType) => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n\n  if (desiredContentType) {\n    formData.append(\"desired_content_type\", desiredContentType);\n  }\n\n  // To eliminate the extra hop and avoid proxy timeouts, upload files directly\n  // to a reticulum host.\n  return fetch(getDirectMediaAPIEndpoint(), {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nfunction getLatestMediaVersionOfSrc(src) {\n  const els = document.querySelectorAll(\"[media-loader]\");\n  let version = 1;\n\n  for (const el of els) {\n    const loader = el.components[\"media-loader\"];\n\n    if (loader.data && loader.data.src === src) {\n      version = Math.max(version, loader.data.version);\n    }\n  }\n\n  return version;\n}\n\nexport function coerceToUrl(urlOrText) {\n  if (!linkify.test(urlOrText)) return urlOrText;\n\n  // See: https://github.com/Soapbox/linkifyjs/blob/master/src/linkify.js#L52\n  return urlOrText.indexOf(\"://\") >= 0 ? urlOrText : `https://${urlOrText}`;\n}\n\nexport const addMedia = (\n  src,\n  template,\n  contentOrigin,\n  contentSubtype = null,\n  resolve = false,\n  fitToBox = false,\n  animate = true,\n  mediaOptions = {},\n  networked = true,\n  parentEl = null,\n  linkedEl = null\n) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n\n  const nid = NAF.utils.createNetworkId();\n  if (networked) {\n    entity.setAttribute(\"networked\", { template: template, networkId: nid });\n  } else {\n    const templateBody = document\n      .importNode(document.body.querySelector(template).content, true)\n      .firstElementChild.cloneNode(true);\n    const elAttrs = templateBody.attributes;\n\n    // Merge root element attributes with this entity\n    for (let attrIdx = 0; attrIdx < elAttrs.length; attrIdx++) {\n      entity.setAttribute(elAttrs[attrIdx].name, elAttrs[attrIdx].value);\n    }\n\n    // Append all child elements\n    while (templateBody.firstElementChild) {\n      entity.appendChild(templateBody.firstElementChild);\n    }\n  }\n\n  const needsToBeUploaded = src instanceof File;\n\n  // If we're re-pasting an existing src in the scene, we should use the latest version\n  // seen across any other entities. Otherwise, start with version 1.\n  const version = getLatestMediaVersionOfSrc(src);\n\n  entity.setAttribute(\"media-loader\", {\n    fitToBox,\n    resolve,\n    animate,\n    src: typeof src === \"string\" ? coerceToUrl(src) || src : \"\",\n    version,\n    contentSubtype,\n    fileIsOwned: !needsToBeUploaded,\n    linkedEl,\n    mediaOptions\n  });\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  (parentEl || scene).appendChild(entity);\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    // Video camera videos are converted to mp4 for compatibility\n    const desiredContentType = contentSubtype === \"video-camera\" ? \"video/mp4\" : src.type || guessContentType(src.name);\n\n    upload(src, desiredContentType)\n      .then(response => {\n        const srcUrl = new URL(proxiedUrlFor(response.origin));\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType, detail.src);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport const cloneMedia = (sourceEl, template, src = null, networked = true, link = false, parentEl = null) => {\n  if (!src) {\n    ({ src } = sourceEl.components[\"media-loader\"].data);\n  }\n\n  const { contentSubtype, fitToBox, mediaOptions } = sourceEl.components[\"media-loader\"].data;\n\n  return addMedia(\n    src,\n    template,\n    ObjectContentOrigins.URL,\n    contentSubtype,\n    true,\n    fitToBox,\n    false,\n    mediaOptions,\n    networked,\n    parentEl,\n    link ? sourceEl : null\n  );\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const shaderUniforms = [];\n\n  obj.traverse(object => {\n    if (!object.material || object.isTroikaText) return;\n\n    // TODO this does not really belong here\n    object.reflectionProbeMode = \"dynamic\";\n\n    updateMaterials(object, material => {\n      if (material.hubs_InjectedCustomShaderChunks) return material;\n      if (!validMaterials.includes(material.type)) {\n        return material;\n      }\n\n      // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n      // material, so maps cannot be updated at runtime. This breaks UI elements who have\n      // hover/toggle state, so for now just skip these while we figure out a more correct\n      // solution.\n      if (\n        object.el &&\n        (object.el.classList.contains(\"ui\") ||\n          object.el.classList.contains(\"hud\") ||\n          object.el.getAttribute(\"text-button\"))\n      )\n        return material;\n\n      const newMaterial = material.clone();\n      newMaterial.onBeforeCompile = (shader, renderer) => {\n        if (shader.vertexShader.indexOf(\"#include <skinning_vertex>\") == -1) return;\n\n        if (material.onBeforeCompile) {\n          material.onBeforeCompile(shader, renderer);\n        }\n\n        shader.uniforms.hubs_IsFrozen = { value: false };\n        shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n        shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n        shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n        shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n        shader.uniforms.hubs_Time = { value: 0 };\n\n        shader.vertexShader =\n          [\n            \"varying vec3 hubs_WorldPosition;\",\n            \"uniform bool hubs_IsFrozen;\",\n            \"uniform bool hubs_HighlightInteractorOne;\",\n            \"uniform bool hubs_HighlightInteractorTwo;\\n\"\n          ].join(\"\\n\") +\n          shader.vertexShader.replace(\n            \"#include <skinning_vertex>\",\n            `#include <skinning_vertex>\n             if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n              vec4 wt = modelMatrix * vec4(transformed, 1);\n\n              // Used in the fragment shader below.\n              hubs_WorldPosition = wt.xyz;\n            }`\n          );\n\n        shader.fragmentShader =\n          [\n            \"varying vec3 hubs_WorldPosition;\",\n            \"uniform bool hubs_IsFrozen;\",\n            \"uniform bool hubs_EnableSweepingEffect;\",\n            \"uniform vec2 hubs_SweepParams;\",\n            \"uniform bool hubs_HighlightInteractorOne;\",\n            \"uniform vec3 hubs_InteractorOnePos;\",\n            \"uniform bool hubs_HighlightInteractorTwo;\",\n            \"uniform vec3 hubs_InteractorTwoPos;\",\n            \"uniform float hubs_Time;\\n\"\n          ].join(\"\\n\") +\n          shader.fragmentShader.replace(\n            \"#include <output_fragment>\",\n            \"#include <output_fragment>\\n\" + mediaHighlightFrag\n          );\n\n        shaderUniforms.push(shader.uniforms);\n      };\n      newMaterial.needsUpdate = true;\n      newMaterial.hubs_InjectedCustomShaderChunks = true;\n      return newMaterial;\n    });\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n\nconst mediaPos = new THREE.Vector3();\n\nexport function addAndArrangeMedia(el, media, contentSubtype, snapCount, mirrorOrientation = false, distance = 0.75) {\n  const { entity, orientation } = addMedia(media, \"#interactable-media\", undefined, contentSubtype, false);\n\n  const pos = el.object3D.position;\n\n  entity.object3D.position.set(pos.x, pos.y, pos.z);\n  entity.object3D.rotation.copy(el.object3D.rotation);\n\n  if (mirrorOrientation) {\n    entity.object3D.rotateY(Math.PI);\n  }\n\n  // Generate photos in a circle around camera, starting from the bottom.\n  // Prevent z-fighting but place behind viewfinder\n  const idx = (snapCount % 6) + 3;\n\n  mediaPos.set(\n    Math.cos(Math.PI * 2 * (idx / 6.0)) * distance,\n    Math.sin(Math.PI * 2 * (idx / 6.0)) * distance,\n    -0.05 + idx * 0.001\n  );\n\n  el.object3D.localToWorld(mediaPos);\n  entity.object3D.visible = false;\n\n  const handler = () => {\n    entity.object3D.visible = true;\n    entity.setAttribute(\"animation__photo_pos\", {\n      property: \"position\",\n      dur: 800,\n      from: { x: pos.x, y: pos.y, z: pos.z },\n      to: { x: mediaPos.x, y: mediaPos.y, z: mediaPos.z },\n      easing: \"easeOutElastic\"\n    });\n  };\n\n  let eventType = null;\n\n  if (contentSubtype.startsWith(\"photo\")) {\n    entity.addEventListener(\"image-loaded\", handler, { once: true });\n    eventType = \"photo\";\n  } else if (contentSubtype.startsWith(\"video\")) {\n    entity.addEventListener(\"video-loaded\", handler, { once: true });\n    eventType = \"video\";\n  } else {\n    console.error(\"invalid type \" + contentSubtype);\n    return;\n  }\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  entity.addEventListener(\n    \"media_resolved\",\n    () => {\n      el.emit(`${eventType}_taken`, entity.components[\"media-loader\"].data.src);\n    },\n    { once: true }\n  );\n\n  return { entity, orientation };\n}\n\nexport const textureLoader = new HubsTextureLoader().setCrossOrigin(\"anonymous\");\n\nexport async function createImageTexture(url, filter) {\n  let texture;\n\n  if (filter) {\n    const image = new Image();\n    image.crossOrigin = \"anonymous\";\n    const load = new Promise(res => image.addEventListener(\"load\", res, { once: true }));\n    image.src = url;\n    await load;\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = image.width;\n    canvas.height = image.height;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0);\n    await filter(ctx, image.width, image.height);\n\n    texture = new THREE.CanvasTexture(canvas);\n  } else {\n    try {\n      texture = await textureLoader.loadAsync(url);\n    } catch (e) {\n      throw new Error(`'${url}' could not be fetched (Error code: ${e.status}; Response: ${e.statusText})`);\n    }\n  }\n\n  texture.encoding = THREE.sRGBEncoding;\n  texture.anisotropy = 4;\n\n  return texture;\n}\n\nconst isIOS = detectIOS();\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nexport function createVideoOrAudioEl(type) {\n  const el = document.createElement(type);\n  el.setAttribute(\"playsinline\", \"\");\n  el.setAttribute(\"webkit-playsinline\", \"\");\n  // iOS Safari requires the autoplay attribute, or it won't play the video at all.\n  el.autoplay = true;\n  // iOS Safari will not play videos without user interaction. We mute the video so that it can autoplay and then\n  // allow the user to unmute it with an interaction in the unmute-video-button component.\n  el.muted = isIOS;\n  el.preload = \"auto\";\n  el.crossOrigin = \"anonymous\";\n  // Audio should default to zero or it be heard before it is positioning and adjusted\n  el.volume = 0;\n  return el;\n}\n\nexport function addMeshScaleAnimation(mesh, initialScale, onComplete) {\n  const step = (function() {\n    const lastValue = {};\n    return function(anim) {\n      const value = anim.animatables[0].target;\n\n      value.x = Math.max(Number.MIN_VALUE, value.x);\n      value.y = Math.max(Number.MIN_VALUE, value.y);\n      value.z = Math.max(Number.MIN_VALUE, value.z);\n\n      // For animation timeline.\n      if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n        return;\n      }\n\n      lastValue.x = value.x;\n      lastValue.y = value.y;\n      lastValue.z = value.z;\n\n      mesh.scale.set(value.x, value.y, value.z);\n      mesh.matrixNeedsUpdate = true;\n    };\n  })();\n\n  const config = {\n    duration: 400,\n    easing: \"easeOutElastic\",\n    elasticity: 400,\n    loop: 0,\n    round: false,\n    x: mesh.scale.x,\n    y: mesh.scale.y,\n    z: mesh.scale.z,\n    targets: [initialScale],\n    update: anim => step(anim),\n    complete: anim => {\n      step(anim);\n      if (onComplete) onComplete();\n    }\n  };\n\n  mesh.scale.copy(initialScale);\n  mesh.matrixNeedsUpdate = true;\n\n  return anime(config);\n}\n\nexport function closeExistingMediaMirror() {\n  const mirrorTarget = document.querySelector(\"#media-mirror-target\");\n\n  // Remove old mirror target media element\n  if (mirrorTarget.firstChild) {\n    mirrorTarget.firstChild.setAttribute(\"animation__remove\", {\n      property: \"scale\",\n      dur: 200,\n      to: { x: 0.01, y: 0.01, z: 0.01 },\n      easing: \"easeInQuad\"\n    });\n\n    return new Promise(res => {\n      mirrorTarget.firstChild.addEventListener(\"animationcomplete\", () => {\n        mirrorTarget.removeChild(mirrorTarget.firstChild);\n        mirrorTarget.parentEl.object3D.visible = false;\n        res();\n      });\n    });\n  }\n}\n\nexport function hasAudioTracks(el) {\n  if (!el) return false;\n\n  // `audioTracks` is the \"correct\" way to check this but is not implemented by most browsers\n  // The rest of the checks are a bit of a race condition, but when loading videos we wait for\n  // the first frame to load, so audio should exist by then. We special case audio-only by checkin\n  // for a 0 size video. Not great...\n  if (el.audioTracks !== undefined) {\n    return el.audioTracks.length > 0;\n  } else if (el.videoWidth === 0 && el.videoHeight === 0) {\n    return true;\n  } else if (el.mozHasAudio !== undefined) {\n    return el.mozHasAudio;\n  } else if (el.webkitAudioDecodedByteCount !== undefined) {\n    return el.webkitAudioDecodedByteCount > 0;\n  } else {\n    return false;\n  }\n}\n","/* global AFRAME */\nimport { textureLoader } from \"../utils/media-utils\";\n\nimport actionButtonSrc from \"../assets/hud/action_button.9.png\";\nimport buttonSrc from \"../assets/hud/button.9.png\";\nimport nametagSrc from \"../assets/hud/nametag.9.png\";\nimport nametagBorderSrc from \"../assets/hud/nametag-border.9.png\";\n\nconst textures = {\n  \"action-button\": {\n    tex: textureLoader.load(actionButtonSrc),\n    width: 128,\n    height: 128\n  },\n  button: {\n    tex: textureLoader.load(buttonSrc),\n    width: 128,\n    height: 128\n  },\n  nametag: {\n    tex: textureLoader.load(nametagSrc),\n    width: 128,\n    height: 128\n  },\n  \"nametag-border\": {\n    tex: textureLoader.load(nametagBorderSrc),\n    width: 128,\n    height: 128\n  }\n};\n\nfunction parseSide(side) {\n  switch (side) {\n    case \"back\": {\n      return THREE.BackSide;\n    }\n    case \"double\": {\n      return THREE.DoubleSide;\n    }\n    default: {\n      // Including case `front`.\n      return THREE.FrontSide;\n    }\n  }\n}\n\n/**\n * Slice9 component for A-Frame.\n */\nAFRAME.registerComponent(\"slice9\", {\n  schema: {\n    alphaTest: { default: 0.0 },\n    bottom: { default: 0, min: 0 },\n    color: { type: \"color\", default: \"#fff\" },\n    debug: { default: false },\n    height: { default: 1, min: 0 },\n    left: { default: 0, min: 0 },\n    opacity: { default: 1.0, min: 0, max: 1 },\n    padding: { default: 0.1, min: 0.01 },\n    right: { default: 0, min: 0 },\n    side: { default: \"front\", oneOf: [\"front\", \"back\", \"double\"] },\n    src: { oneOf: Object.keys(textures) },\n    top: { default: 0, min: 0 },\n    transparent: { default: true },\n    width: { default: 1, min: 0 },\n    usingCustomMaterial: { default: false },\n    usingAtlas: { default: false },\n    uvAtlasMin: { type: \"vec2\" },\n    uvAtlasMax: { type: \"vec2\" }\n  },\n\n  init: function() {\n    const data = this.data;\n\n    this.textureSrc = null;\n\n    const geometry = (this.geometry = new THREE.PlaneBufferGeometry(data.width, data.height, 3, 3));\n\n    // Create mesh.\n    if (data.usingCustomMaterial) {\n      this.plane = new THREE.Mesh(geometry);\n    } else {\n      const material = new THREE.MeshBasicMaterial({\n        alphaTest: data.alphaTest,\n        color: data.color,\n        opacity: data.opacity,\n        transparent: data.transparent,\n        wireframe: data.debug\n      });\n      this.plane = new THREE.Mesh(geometry, material);\n    }\n    this.el.setObject3D(\"mesh\", this.plane);\n  },\n\n  // TODO use updateSlice9Geometry\n  regenerateMesh: function() {\n    const data = this.data;\n    let height;\n    const pos = this.geometry.attributes.position.array;\n    const uvs = this.geometry.attributes.uv.array;\n    let width;\n\n    if (this.plane.material && !this.plane.material.map) {\n      return;\n    }\n\n    /*\n      0--1------------------------------2--3\n      |  |                              |  |\n      4--5------------------------------6--7\n      |  |                              |  |\n      |  |                              |  |\n      |  |                              |  |\n      8--9-----------------------------10--11\n      |  |                              |  |\n      12-13----------------------------14--15\n    */\n    function setPos(id, x, y) {\n      pos[3 * id] = x;\n      pos[3 * id + 1] = y;\n    }\n\n    function setUV(id, u, v) {\n      if (data.usingAtlas) {\n        u = data.uvAtlasMin.x + u * (data.uvAtlasMax.x - data.uvAtlasMin.x);\n        v = data.uvAtlasMin.y + v * (data.uvAtlasMax.y - data.uvAtlasMin.y);\n      }\n      uvs[2 * id] = u;\n      uvs[2 * id + 1] = v;\n    }\n\n    // Update UVS\n    if (data.usingCustomMaterial) {\n      height = 1;\n      width = 1;\n    } else {\n      height = textures[data.src].height;\n      width = textures[data.src].width;\n    }\n    const uv = {\n      left: data.left / width,\n      right: data.right / width,\n      top: data.top / height,\n      bottom: data.bottom / height\n    };\n\n    setUV(1, uv.left, 1);\n    setUV(2, uv.right, 1);\n\n    setUV(4, 0, uv.bottom);\n    setUV(5, uv.left, uv.bottom);\n    setUV(6, uv.right, uv.bottom);\n    setUV(7, 1, uv.bottom);\n\n    setUV(8, 0, uv.top);\n    setUV(9, uv.left, uv.top);\n    setUV(10, uv.right, uv.top);\n    setUV(11, 1, uv.top);\n\n    setUV(13, uv.left, 0);\n    setUV(14, uv.right, 0);\n\n    if (data.usingAtlas) {\n      setUV(0, 0, 1);\n      setUV(3, 1, 1);\n      setUV(12, 0, 0);\n      setUV(15, 1, 0);\n    }\n\n    // Update vertex positions\n    const w2 = data.width / 2;\n    const h2 = data.height / 2;\n    const left = -w2 + data.padding;\n    const right = w2 - data.padding;\n    const top = h2 - data.padding;\n    const bottom = -h2 + data.padding;\n\n    setPos(0, -w2, h2);\n    setPos(1, left, h2);\n    setPos(2, right, h2);\n    setPos(3, w2, h2);\n\n    setPos(4, -w2, top);\n    setPos(5, left, top);\n    setPos(6, right, top);\n    setPos(7, w2, top);\n\n    setPos(8, -w2, bottom);\n    setPos(9, left, bottom);\n    setPos(10, right, bottom);\n    setPos(11, w2, bottom);\n\n    setPos(13, left, -h2);\n    setPos(14, right, -h2);\n    setPos(12, -w2, -h2);\n    setPos(15, w2, -h2);\n\n    this.geometry.attributes.position.needsUpdate = true;\n    this.geometry.attributes.uv.needsUpdate = true;\n  },\n\n  update: function(oldData) {\n    const data = this.data;\n    const diff = AFRAME.utils.diff(data, oldData);\n\n    // Update material if using built-in material.\n    if (!data.usingCustomMaterial) {\n      this.plane.material.alphaTest = data.alphaTest;\n      this.plane.material.color.setStyle(data.color);\n      this.plane.material.opacity = data.opacity;\n      this.plane.material.transparent = data.transparent;\n      this.plane.material.wireframe = data.debug;\n      this.plane.material.side = parseSide(data.side);\n      this.plane.material.needsUpdate = true;\n      if (\"src\" in diff) {\n        this.updateMap();\n      }\n    }\n\n    if (\n      \"width\" in diff ||\n      \"height\" in diff ||\n      \"padding\" in diff ||\n      \"left\" in diff ||\n      \"top\" in diff ||\n      \"bottom\" in diff ||\n      \"right\" in diff\n    ) {\n      this.regenerateMesh();\n    }\n  },\n\n  setMap(texture) {\n    this.plane.material.map = texture;\n    this.plane.material.needsUpdate = true;\n    this.regenerateMesh();\n  },\n\n  /**\n   * Update `src` if using built-in material.\n   */\n  updateMap: function() {\n    const src = this.data.src;\n\n    if (src) {\n      if (src === this.textureSrc) {\n        return;\n      }\n      // Texture added or changed.\n      this.textureSrc = src;\n      this.setMap(textures[src].tex);\n      return;\n    }\n\n    // Texture removed.\n    if (!this.plane.material.map) {\n      return;\n    }\n\n    this.setMap(null);\n  },\n\n  remove() {\n    this.geometry?.dispose();\n  }\n});\n","\r\nexport default\r\nclass MeshBVHNode {\r\n\r\n\tconstructor() {\r\n\r\n\t\t// internal nodes have boundingData, left, right, and splitAxis\r\n\t\t// leaf nodes have offset and count (referring to primitives in the mesh geometry)\r\n\r\n\t}\r\n\r\n}\r\n","// Returns a Float32Array representing the bounds data for box.\r\nexport function boxToArray( bx ) {\r\n\r\n\tconst arr = new Float32Array( 6 );\r\n\r\n\tarr[ 0 ] = bx.min.x;\r\n\tarr[ 1 ] = bx.min.y;\r\n\tarr[ 2 ] = bx.min.z;\r\n\r\n\tarr[ 3 ] = bx.max.x;\r\n\tarr[ 4 ] = bx.max.y;\r\n\tarr[ 5 ] = bx.max.z;\r\n\r\n\treturn arr;\r\n\r\n}\r\n\r\nexport function arrayToBox( arr, target ) {\r\n\r\n\ttarget.min.x = arr[ 0 ];\r\n\ttarget.min.y = arr[ 1 ];\r\n\ttarget.min.z = arr[ 2 ];\r\n\r\n\ttarget.max.x = arr[ 3 ];\r\n\ttarget.max.y = arr[ 4 ];\r\n\ttarget.max.z = arr[ 5 ];\r\n\r\n\treturn target;\r\n\r\n}\r\n\r\nexport function getLongestEdgeIndex( bounds ) {\r\n\r\n\tlet splitDimIdx = - 1;\r\n\tlet splitDist = - Infinity;\r\n\r\n\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\tconst dist = bounds[ i + 3 ] - bounds[ i ];\r\n\t\tif ( dist > splitDist ) {\r\n\r\n\t\t\tsplitDist = dist;\r\n\t\t\tsplitDimIdx = i;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn splitDimIdx;\r\n\r\n}\r\n","import { Box3, BufferAttribute } from 'three';\r\nimport MeshBVHNode from './MeshBVHNode.js';\r\nimport { arrayToBox, boxToArray, getLongestEdgeIndex } from './Utils/ArrayBoxUtilities.js';\r\nimport { CENTER, AVERAGE, SAH } from './Constants.js';\r\n\r\n// https://en.wikipedia.org/wiki/Machine_epsilon#Values_for_standard_hardware_floating_point_arithmetics\r\nconst FLOAT32_EPSILON = Math.pow( 2, - 24 );\r\nconst xyzFields = [ 'x', 'y', 'z' ];\r\nconst boxTemp = new Box3();\r\n\r\nfunction ensureIndex( geo ) {\r\n\r\n\tif ( ! geo.index ) {\r\n\r\n\t\tconst vertexCount = geo.attributes.position.count;\r\n\t\tconst index = new ( vertexCount > 65535 ? Uint32Array : Uint16Array )( vertexCount );\r\n\t\tgeo.setIndex( new BufferAttribute( index, 1 ) );\r\n\r\n\t\tfor ( let i = 0; i < vertexCount; i ++ ) {\r\n\r\n\t\t\tindex[ i ] = i;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Computes the set of { offset, count } ranges which need independent BVH roots. Each\r\n// region in the geometry index that belongs to a different set of material groups requires\r\n// a separate BVH root, so that triangles indices belonging to one group never get swapped\r\n// with triangle indices belongs to another group. For example, if the groups were like this:\r\n//\r\n// [-------------------------------------------------------------]\r\n// |__________________|\r\n//   g0 = [0, 20]  |______________________||_____________________|\r\n//                      g1 = [16, 40]           g2 = [41, 60]\r\n//\r\n// we would need four BVH roots: [0, 15], [16, 20], [21, 40], [41, 60].\r\nfunction getRootIndexRanges( geo ) {\r\n\r\n\tif ( ! geo.groups || ! geo.groups.length ) {\r\n\r\n\t\treturn [ { offset: 0, count: geo.index.count / 3 } ];\r\n\r\n\t}\r\n\r\n\tconst ranges = [];\r\n\tconst rangeBoundaries = new Set();\r\n\tfor ( const group of geo.groups ) {\r\n\r\n\t\trangeBoundaries.add( group.start );\r\n\t\trangeBoundaries.add( group.start + group.count );\r\n\r\n\t}\r\n\r\n\t// note that if you don't pass in a comparator, it sorts them lexicographically as strings :-(\r\n\tconst sortedBoundaries = Array.from( rangeBoundaries.values() ).sort( ( a, b ) => a - b );\r\n\tfor ( let i = 0; i < sortedBoundaries.length - 1; i ++ ) {\r\n\r\n\t\tconst start = sortedBoundaries[ i ], end = sortedBoundaries[ i + 1 ];\r\n\t\tranges.push( { offset: ( start / 3 ), count: ( end - start ) / 3 } );\r\n\r\n\t}\r\n\r\n\treturn ranges;\r\n\r\n}\r\n\r\n// computes the union of the bounds of all of the given triangles and puts the resulting box in target. If\r\n// centroidTarget is provided then a bounding box is computed for the centroids of the triangles, as well.\r\n// These are computed together to avoid redundant accesses to bounds array.\r\nfunction getBounds( triangleBounds, offset, count, target, centroidTarget = null ) {\r\n\r\n\tlet minx = Infinity;\r\n\tlet miny = Infinity;\r\n\tlet minz = Infinity;\r\n\tlet maxx = - Infinity;\r\n\tlet maxy = - Infinity;\r\n\tlet maxz = - Infinity;\r\n\r\n\tlet cminx = Infinity;\r\n\tlet cminy = Infinity;\r\n\tlet cminz = Infinity;\r\n\tlet cmaxx = - Infinity;\r\n\tlet cmaxy = - Infinity;\r\n\tlet cmaxz = - Infinity;\r\n\r\n\tconst includeCentroid = centroidTarget !== null;\r\n\tfor ( let i = offset * 6, end = ( offset + count ) * 6; i < end; i += 6 ) {\r\n\r\n\t\tconst cx = triangleBounds[ i + 0 ];\r\n\t\tconst hx = triangleBounds[ i + 1 ];\r\n\t\tconst lx = cx - hx;\r\n\t\tconst rx = cx + hx;\r\n\t\tif ( lx < minx ) minx = lx;\r\n\t\tif ( rx > maxx ) maxx = rx;\r\n\t\tif ( includeCentroid && cx < cminx ) cminx = cx;\r\n\t\tif ( includeCentroid && cx > cmaxx ) cmaxx = cx;\r\n\r\n\t\tconst cy = triangleBounds[ i + 2 ];\r\n\t\tconst hy = triangleBounds[ i + 3 ];\r\n\t\tconst ly = cy - hy;\r\n\t\tconst ry = cy + hy;\r\n\t\tif ( ly < miny ) miny = ly;\r\n\t\tif ( ry > maxy ) maxy = ry;\r\n\t\tif ( includeCentroid && cy < cminy ) cminy = cy;\r\n\t\tif ( includeCentroid && cy > cmaxy ) cmaxy = cy;\r\n\r\n\t\tconst cz = triangleBounds[ i + 4 ];\r\n\t\tconst hz = triangleBounds[ i + 5 ];\r\n\t\tconst lz = cz - hz;\r\n\t\tconst rz = cz + hz;\r\n\t\tif ( lz < minz ) minz = lz;\r\n\t\tif ( rz > maxz ) maxz = rz;\r\n\t\tif ( includeCentroid && cz < cminz ) cminz = cz;\r\n\t\tif ( includeCentroid && cz > cmaxz ) cmaxz = cz;\r\n\r\n\t}\r\n\r\n\ttarget[ 0 ] = minx;\r\n\ttarget[ 1 ] = miny;\r\n\ttarget[ 2 ] = minz;\r\n\r\n\ttarget[ 3 ] = maxx;\r\n\ttarget[ 4 ] = maxy;\r\n\ttarget[ 5 ] = maxz;\r\n\r\n\tif ( includeCentroid ) {\r\n\r\n\t\tcentroidTarget[ 0 ] = cminx;\r\n\t\tcentroidTarget[ 1 ] = cminy;\r\n\t\tcentroidTarget[ 2 ] = cminz;\r\n\r\n\t\tcentroidTarget[ 3 ] = cmaxx;\r\n\t\tcentroidTarget[ 4 ] = cmaxy;\r\n\t\tcentroidTarget[ 5 ] = cmaxz;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// A stand alone function for retrieving the centroid bounds.\r\nfunction getCentroidBounds( triangleBounds, offset, count, centroidTarget ) {\r\n\r\n\tlet cminx = Infinity;\r\n\tlet cminy = Infinity;\r\n\tlet cminz = Infinity;\r\n\tlet cmaxx = - Infinity;\r\n\tlet cmaxy = - Infinity;\r\n\tlet cmaxz = - Infinity;\r\n\r\n\tfor ( let i = offset * 6, end = ( offset + count ) * 6; i < end; i += 6 ) {\r\n\r\n\t\tconst cx = triangleBounds[ i + 0 ];\r\n\t\tif ( cx < cminx ) cminx = cx;\r\n\t\tif ( cx > cmaxx ) cmaxx = cx;\r\n\r\n\t\tconst cy = triangleBounds[ i + 2 ];\r\n\t\tif ( cy < cminy ) cminy = cy;\r\n\t\tif ( cy > cmaxy ) cmaxy = cy;\r\n\r\n\t\tconst cz = triangleBounds[ i + 4 ];\r\n\t\tif ( cz < cminz ) cminz = cz;\r\n\t\tif ( cz > cmaxz ) cmaxz = cz;\r\n\r\n\t}\r\n\r\n\tcentroidTarget[ 0 ] = cminx;\r\n\tcentroidTarget[ 1 ] = cminy;\r\n\tcentroidTarget[ 2 ] = cminz;\r\n\r\n\tcentroidTarget[ 3 ] = cmaxx;\r\n\tcentroidTarget[ 4 ] = cmaxy;\r\n\tcentroidTarget[ 5 ] = cmaxz;\r\n\r\n}\r\n\r\n\r\n// reorders `tris` such that for `count` elements after `offset`, elements on the left side of the split\r\n// will be on the left and elements on the right side of the split will be on the right. returns the index\r\n// of the first element on the right side, or offset + count if there are no elements on the right side.\r\nfunction partition( index, triangleBounds, sahPlanes, offset, count, split ) {\r\n\r\n\tlet left = offset;\r\n\tlet right = offset + count - 1;\r\n\tconst pos = split.pos;\r\n\tconst axisOffset = split.axis * 2;\r\n\r\n\t// hoare partitioning, see e.g. https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\r\n\twhile ( true ) {\r\n\r\n\t\twhile ( left <= right && triangleBounds[ left * 6 + axisOffset ] < pos ) {\r\n\r\n\t\t\tleft ++;\r\n\r\n\t\t}\r\n\r\n\t\twhile ( left <= right && triangleBounds[ right * 6 + axisOffset ] >= pos ) {\r\n\r\n\t\t\tright --;\r\n\r\n\t\t}\r\n\r\n\t\tif ( left < right ) {\r\n\r\n\t\t\t// we need to swap all of the information associated with the triangles at index\r\n\t\t\t// left and right; that's the verts in the geometry index, the bounds,\r\n\t\t\t// and perhaps the SAH planes\r\n\r\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\tlet t0 = index[ left * 3 + i ];\r\n\t\t\t\tindex[ left * 3 + i ] = index[ right * 3 + i ];\r\n\t\t\t\tindex[ right * 3 + i ] = t0;\r\n\r\n\t\t\t\tlet t1 = triangleBounds[ left * 6 + i * 2 + 0 ];\r\n\t\t\t\ttriangleBounds[ left * 6 + i * 2 + 0 ] = triangleBounds[ right * 6 + i * 2 + 0 ];\r\n\t\t\t\ttriangleBounds[ right * 6 + i * 2 + 0 ] = t1;\r\n\r\n\t\t\t\tlet t2 = triangleBounds[ left * 6 + i * 2 + 1 ];\r\n\t\t\t\ttriangleBounds[ left * 6 + i * 2 + 1 ] = triangleBounds[ right * 6 + i * 2 + 1 ];\r\n\t\t\t\ttriangleBounds[ right * 6 + i * 2 + 1 ] = t2;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( sahPlanes ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\tlet t = sahPlanes[ i ][ left ];\r\n\t\t\t\t\tsahPlanes[ i ][ left ] = sahPlanes[ i ][ right ];\r\n\t\t\t\t\tsahPlanes[ i ][ right ] = t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tleft ++;\r\n\t\t\tright --;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn left;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getOptimalSplit( nodeBoundingData, centroidBoundingData, triangleBounds, sahPlanes, offset, count, strategy ) {\r\n\r\n\tlet axis = - 1;\r\n\tlet pos = 0;\r\n\r\n\t// Center\r\n\tif ( strategy === CENTER ) {\r\n\r\n\t\taxis = getLongestEdgeIndex( centroidBoundingData );\r\n\t\tif ( axis !== - 1 ) {\r\n\r\n\t\t\tpos = ( centroidBoundingData[ axis ] + centroidBoundingData[ axis + 3 ] ) / 2;\r\n\r\n\t\t}\r\n\r\n\t} else if ( strategy === AVERAGE ) {\r\n\r\n\t\taxis = getLongestEdgeIndex( nodeBoundingData );\r\n\t\tif ( axis !== - 1 ) {\r\n\r\n\t\t\tpos = getAverage( triangleBounds, offset, count, axis );\r\n\r\n\t\t}\r\n\r\n\t} else if ( strategy === SAH ) {\r\n\r\n\t\t// Surface Area Heuristic\r\n\t\t// In order to make this code more terse, the x, y, and z\r\n\t\t// variables of various structures have been stuffed into\r\n\t\t// 0, 1, and 2 array indices so they can be easily computed\r\n\t\t// and accessed within array iteration\r\n\r\n\t\t// Cost values defineed for operations. We're using bounds for traversal, so\r\n\t\t// the cost of traversing one more layer is more than intersecting a triangle.\r\n\t\tconst TRAVERSAL_COST = 3;\r\n\t\tconst INTERSECTION_COST = 1;\r\n\t\tconst bb = arrayToBox( nodeBoundingData, boxTemp );\r\n\r\n\t\t// Define the width, height, and depth of the bounds as a box\r\n\t\tconst dim = [\r\n\t\t\tbb.max.x - bb.min.x,\r\n\t\t\tbb.max.y - bb.min.y,\r\n\t\t\tbb.max.z - bb.min.z\r\n\t\t];\r\n\t\tconst sa = 2 * ( dim[ 0 ] * dim[ 1 ] + dim[ 0 ] * dim[ 2 ] + dim[ 1 ] * dim[ 2 ] );\r\n\r\n\t\t// Get the precalculated planes based for the triangles we're\r\n\t\t// testing here\r\n\t\tconst filteredLists = [[], [], []];\r\n\t\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\t\tfor ( let v = 0; v < 3; v ++ ) {\r\n\r\n\t\t\t\tfilteredLists[ v ].push( sahPlanes[ v ][ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfilteredLists.forEach( planes => planes.sort( ( a, b ) => a.p - b.p ) );\r\n\r\n\t\t// this bounds surface area, left bound SA, left triangles, right bound SA, right triangles\r\n\t\tconst getCost = ( sa, sal, nl, sar, nr ) =>\r\n\t\t\t  TRAVERSAL_COST + INTERSECTION_COST * ( ( sal / sa ) * nl + ( sar / sa ) * nr );\r\n\r\n\t\t// the cost of _not_ splitting into smaller bounds\r\n\t\tconst noSplitCost = INTERSECTION_COST * count;\r\n\r\n\t\taxis = - 1;\r\n\t\tlet bestCost = noSplitCost;\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t// o1 and o2 represent the _other_ two axes in the\r\n\t\t\t// the space. So if we're checking the x (0) dimension,\r\n\t\t\t// then o1 and o2 would be y and z (1 and 2)\r\n\t\t\tconst o1 = ( i + 1 ) % 3;\r\n\t\t\tconst o2 = ( i + 2 ) % 3;\r\n\r\n\t\t\tconst bmin = bb.min[ xyzFields[ i ] ];\r\n\t\t\tconst bmax = bb.max[ xyzFields[ i ] ];\r\n\t\t\tconst planes = filteredLists[ i ];\r\n\r\n\t\t\t// The number of left and right triangles on either side\r\n\t\t\t// given the current split\r\n\t\t\tlet nl = 0;\r\n\t\t\tlet nr = count;\r\n\t\t\tfor ( let p = 0; p < planes.length; p ++ ) {\r\n\r\n\t\t\t\tconst pinfo = planes[ p ];\r\n\r\n\t\t\t\t// As the plane moves, we have to increment or decrement the\r\n\t\t\t\t// number of triangles on either side of the plane\r\n\t\t\t\tnl ++;\r\n\t\t\t\tnr --;\r\n\r\n\t\t\t\t// the distance from the plane to the edge of the broader bounds\r\n\t\t\t\tconst ldim = pinfo.p - bmin;\r\n\t\t\t\tconst rdim = bmax - pinfo.p;\r\n\r\n\t\t\t\t// same for the other two dimensions\r\n\t\t\t\tlet ldimo1 = dim[ o1 ], rdimo1 = dim[ o1 ];\r\n\t\t\t\tlet ldimo2 = dim[ o2 ], rdimo2 = dim[ o2 ];\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t// compute the other bounding planes for the box\r\n\t\t\t\t// if only the current triangles are considered to\r\n\t\t\t\t// be in the box\r\n\t\t\t\t// This is really slow and probably not really worth it\r\n\t\t\t\tconst o1planes = sahPlanes[o1];\r\n\t\t\t\tconst o2planes = sahPlanes[o2];\r\n\t\t\t\tlet lmin = Infinity, lmax = -Infinity;\r\n\t\t\t\tlet rmin = Infinity, rmax = -Infinity;\r\n\t\t\t\tplanes.forEach((p, i) => {\r\n\t\t\t\tconst tri2 = p.tri * 2;\r\n\t\t\t\tconst inf1 = o1planes[tri2 + 0];\r\n\t\t\t\tconst inf2 = o1planes[tri2 + 1];\r\n\t\t\t\tif (i <= nl) {\r\n\t\t\t\tlmin = Math.min(inf1.p, inf2.p, lmin);\r\n\t\t\t\tlmax = Math.max(inf1.p, inf2.p, lmax);\r\n\t\t\t\t}\r\n\t\t\t\tif (i >= nr) {\r\n\t\t\t\trmin = Math.min(inf1.p, inf2.p, rmin);\r\n\t\t\t\trmax = Math.max(inf1.p, inf2.p, rmax);\r\n\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tldimo1 = Math.min(lmax - lmin, ldimo1);\r\n\t\t\t\trdimo1 = Math.min(rmax - rmin, rdimo1);\r\n\r\n\t\t\t\tplanes.forEach((p, i) => {\r\n\t\t\t\tconst tri2 = p.tri * 2;\r\n\t\t\t\tconst inf1 = o2planes[tri2 + 0];\r\n\t\t\t\tconst inf2 = o2planes[tri2 + 1];\r\n\t\t\t\tif (i <= nl) {\r\n\t\t\t\tlmin = Math.min(inf1.p, inf2.p, lmin);\r\n\t\t\t\tlmax = Math.max(inf1.p, inf2.p, lmax);\r\n\t\t\t\t}\r\n\t\t\t\tif (i >= nr) {\r\n\t\t\t\trmin = Math.min(inf1.p, inf2.p, rmin);\r\n\t\t\t\trmax = Math.max(inf1.p, inf2.p, rmax);\r\n\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tldimo2 = Math.min(lmax - lmin, ldimo2);\r\n\t\t\t\trdimo2 = Math.min(rmax - rmin, rdimo2);\r\n\t\t\t\t*/\r\n\r\n\t\t\t\t// surface areas and cost\r\n\t\t\t\tconst sal = 2 * ( ldimo1 * ldimo2 + ldimo1 * ldim + ldimo2 * ldim );\r\n\t\t\t\tconst sar = 2 * ( rdimo1 * rdimo2 + rdimo1 * rdim + rdimo2 * rdim );\r\n\t\t\t\tconst cost = getCost( sa, sal, nl, sar, nr );\r\n\r\n\t\t\t\tif ( cost < bestCost ) {\r\n\r\n\t\t\t\t\taxis = i;\r\n\t\t\t\t\tpos = pinfo.p;\r\n\t\t\t\t\tbestCost = cost;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { axis, pos };\r\n\r\n}\r\n\r\n// returns the average coordinate on the specified axis of the all the provided triangles\r\nfunction getAverage( triangleBounds, offset, count, axis ) {\r\n\r\n\tlet avg = 0;\r\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\tavg += triangleBounds[ i * 6 + axis * 2 ];\r\n\r\n\t}\r\n\r\n\treturn avg / count;\r\n\r\n}\r\n\r\nfunction computeSAHPlanes( triangleBounds ) {\r\n\r\n\tconst triCount = triangleBounds.length / 6;\r\n\tconst sahPlanes = [ new Array( triCount ), new Array( triCount ), new Array( triCount ) ];\r\n\tfor ( let tri = 0; tri < triCount; tri ++ ) {\r\n\r\n\t\tfor ( let el = 0; el < 3; el ++ ) {\r\n\r\n\t\t\tsahPlanes[ el ][ tri ] = { p: triangleBounds[ tri * 6 + el * 2 ], tri };\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn sahPlanes;\r\n\r\n}\r\n\r\n// precomputes the bounding box for each triangle; required for quickly calculating tree splits.\r\n// result is an array of size tris.length * 6 where triangle i maps to a\r\n// [x_center, x_delta, y_center, y_delta, z_center, z_delta] tuple starting at index i * 6,\r\n// representing the center and half-extent in each dimension of triangle i\r\nfunction computeTriangleBounds( geo ) {\r\n\r\n\tconst verts = geo.attributes.position.array;\r\n\tconst index = geo.index.array;\r\n\tconst triCount = index.length / 3;\r\n\tconst triangleBounds = new Float32Array( triCount * 6 );\r\n\r\n\tfor ( let tri = 0; tri < triCount; tri ++ ) {\r\n\r\n\t\tconst tri3 = tri * 3;\r\n\t\tconst tri6 = tri * 6;\r\n\t\tconst ai = index[ tri3 + 0 ] * 3;\r\n\t\tconst bi = index[ tri3 + 1 ] * 3;\r\n\t\tconst ci = index[ tri3 + 2 ] * 3;\r\n\r\n\t\tfor ( let el = 0; el < 3; el ++ ) {\r\n\r\n\t\t\tconst a = verts[ ai + el ];\r\n\t\t\tconst b = verts[ bi + el ];\r\n\t\t\tconst c = verts[ ci + el ];\r\n\r\n\t\t\tlet min = a;\r\n\t\t\tif ( b < min ) min = b;\r\n\t\t\tif ( c < min ) min = c;\r\n\r\n\t\t\tlet max = a;\r\n\t\t\tif ( b > max ) max = b;\r\n\t\t\tif ( c > max ) max = c;\r\n\r\n\t\t\t// Increase the bounds size by float32 epsilon to avoid precision errors when\r\n\t\t\t// converting to 32 bit float. Scale the epsilon by the size of the numbers being\r\n\t\t\t// worked with.\r\n\t\t\tconst halfExtents = ( max - min ) / 2;\r\n\t\t\tconst el2 = el * 2;\r\n\t\t\ttriangleBounds[ tri6 + el2 + 0 ] = min + halfExtents;\r\n\t\t\ttriangleBounds[ tri6 + el2 + 1 ] = halfExtents + ( Math.abs( min ) + halfExtents ) * FLOAT32_EPSILON;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn triangleBounds;\r\n\r\n}\r\n\r\nexport function buildTree( geo, options ) {\r\n\r\n\t// either recursively splits the given node, creating left and right subtrees for it, or makes it a leaf node,\r\n\t// recording the offset and count of its triangles and writing them into the reordered geometry index.\r\n\tfunction splitNode( node, offset, count, centroidBoundingData = null, depth = 0 ) {\r\n\r\n\t\tif ( ! reachedMaxDepth && depth >= maxDepth ) {\r\n\r\n\t\t\treachedMaxDepth = true;\r\n\t\t\tif ( verbose ) {\r\n\r\n\t\t\t\tconsole.warn( `MeshBVH: Max depth of ${ maxDepth } reached when generating BVH. Consider increasing maxDepth.` );\r\n\t\t\t\tconsole.warn( this, geo );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// early out if we've met our capacity\r\n\t\tif ( count <= maxLeafTris || depth >= maxDepth ) {\r\n\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\t\t\treturn node;\r\n\r\n\t\t}\r\n\r\n\t\t// Find where to split the volume\r\n\t\tconst split = getOptimalSplit( node.boundingData, centroidBoundingData, triangleBounds, sahPlanes, offset, count, strategy );\r\n\t\tif ( split.axis === - 1 ) {\r\n\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\t\t\treturn node;\r\n\r\n\t\t}\r\n\r\n\t\tconst splitOffset = partition( indexArray, triangleBounds, sahPlanes, offset, count, split );\r\n\r\n\t\t// create the two new child nodes\r\n\t\tif ( splitOffset === offset || splitOffset === offset + count ) {\r\n\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnode.splitAxis = split.axis;\r\n\r\n\t\t\t// create the left child and compute its bounding box\r\n\t\t\tconst left = new MeshBVHNode();\r\n\t\t\tconst lstart = offset;\r\n\t\t\tconst lcount = splitOffset - offset;\r\n\t\t\tnode.left = left;\r\n\t\t\tleft.boundingData = new Float32Array( 6 );\r\n\r\n\t\t\tif ( lazyGeneration ) {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, lstart, lcount, left.boundingData );\r\n\t\t\t\tleft.continueGeneration = function () {\r\n\r\n\t\t\t\t\tdelete this.continueGeneration;\r\n\t\t\t\t\tgetCentroidBounds( triangleBounds, lstart, lcount, cacheCentroidBoundingData );\r\n\t\t\t\t\tsplitNode( left, lstart, lcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, lstart, lcount, left.boundingData, cacheCentroidBoundingData );\r\n\t\t\t\tsplitNode( left, lstart, lcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// repeat for right\r\n\t\t\tconst right = new MeshBVHNode();\r\n\t\t\tconst rstart = splitOffset;\r\n\t\t\tconst rcount = count - lcount;\r\n\t\t\tnode.right = right;\r\n\t\t\tright.boundingData = new Float32Array( 6 );\r\n\r\n\t\t\tif ( lazyGeneration ) {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, rstart, rcount, right.boundingData );\r\n\t\t\t\tright.continueGeneration = function () {\r\n\r\n\t\t\t\t\tdelete this.continueGeneration;\r\n\t\t\t\t\tgetCentroidBounds( triangleBounds, rstart, rcount, cacheCentroidBoundingData );\r\n\t\t\t\t\tsplitNode( right, rstart, rcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgetBounds( triangleBounds, rstart, rcount, right.boundingData, cacheCentroidBoundingData );\r\n\t\t\t\tsplitNode( right, rstart, rcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn node;\r\n\r\n\t}\r\n\r\n\tensureIndex( geo );\r\n\r\n\tconst cacheCentroidBoundingData = new Float32Array( 6 );\r\n\tconst triangleBounds = computeTriangleBounds( geo );\r\n\tconst sahPlanes = options.strategy === SAH ? computeSAHPlanes( triangleBounds ) : null;\r\n\tconst indexArray = geo.index.array;\r\n\tconst maxDepth = options.maxDepth;\r\n\tconst verbose = options.verbose;\r\n\tconst maxLeafTris = options.maxLeafTris;\r\n\tconst strategy = options.strategy;\r\n\tconst lazyGeneration = options.lazyGeneration;\r\n\tlet reachedMaxDepth = false;\r\n\r\n\tconst roots = [];\r\n\tconst ranges = getRootIndexRanges( geo );\r\n\r\n\tif ( ranges.length === 1 ) {\r\n\r\n\t\tconst root = new MeshBVHNode();\r\n\t\tconst range = ranges[ 0 ];\r\n\r\n\t\tif ( geo.boundingBox != null ) {\r\n\r\n\t\t\troot.boundingData = boxToArray( geo.boundingBox );\r\n\t\t\tgetCentroidBounds( triangleBounds, range.offset, range.count, cacheCentroidBoundingData );\r\n\r\n\t\t} else {\r\n\r\n\t\t\troot.boundingData = new Float32Array( 6 );\r\n\t\t\tgetBounds( triangleBounds, range.offset, range.count, root.boundingData, cacheCentroidBoundingData );\r\n\r\n\t\t}\r\n\r\n\t\tsplitNode( root, range.offset, range.count, cacheCentroidBoundingData );\r\n\t\troots.push( root );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( let range of ranges ) {\r\n\r\n\t\t\tconst root = new MeshBVHNode();\r\n\t\t\troot.boundingData = new Float32Array( 6 );\r\n\t\t\tgetBounds( triangleBounds, range.offset, range.count, root.boundingData, cacheCentroidBoundingData );\r\n\r\n\t\t\tsplitNode( root, range.offset, range.count, cacheCentroidBoundingData );\r\n\t\t\troots.push( root );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// if the geometry doesn't have a bounding box, then let's politely populate it using\r\n\t// the work we did to determine the BVH root bounds\r\n\tif ( geo.boundingBox == null ) {\r\n\r\n\t\tconst rootBox = new Box3();\r\n\t\tgeo.boundingBox = new Box3();\r\n\r\n\t\tfor ( let root of roots ) {\r\n\r\n\t\t\tgeo.boundingBox.union( arrayToBox( root.boundingData, rootBox ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn roots;\r\n\r\n}\r\n","import { Vector3 } from 'three';\r\n\r\nexport class SeparatingAxisBounds {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.min = Infinity;\r\n\t\tthis.max = - Infinity;\r\n\r\n\t}\r\n\r\n\tsetFromPointsField( points, field ) {\r\n\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst p = points[ i ];\r\n\t\t\tconst val = p[ field ];\r\n\t\t\tmin = Math.min( val, min );\r\n\t\t\tmax = Math.max( val, max );\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\r\n\t}\r\n\r\n\tsetFromPoints( axis, points ) {\r\n\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst p = points[ i ];\r\n\t\t\tconst val = axis.dot( p );\r\n\t\t\tmin = Math.min( val, min );\r\n\t\t\tmax = Math.max( val, max );\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\t}\r\n\r\n\tisSeparated( other ) {\r\n\r\n\t\treturn this.min > other.max || other.min > this.max;\r\n\r\n\t}\r\n\r\n}\r\n\r\nSeparatingAxisBounds.prototype.setFromBox = ( function () {\r\n\r\n\tconst p = new Vector3();\r\n\treturn function setFromBox( axis, box ) {\r\n\r\n\t\tconst boxMin = box.min;\r\n\t\tconst boxMax = box.max;\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\r\n\r\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\r\n\r\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\r\n\r\n\t\t\t\t\tp.x = boxMin.x * x + boxMax.x * ( 1 - x );\r\n\t\t\t\t\tp.y = boxMin.y * y + boxMax.y * ( 1 - y );\r\n\t\t\t\t\tp.z = boxMin.z * z + boxMax.z * ( 1 - z );\r\n\r\n\t\t\t\t\tconst val = axis.dot( p );\r\n\t\t\t\t\tmin = Math.min( val, min );\r\n\t\t\t\t\tmax = Math.max( val, max );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nexport const areIntersecting = ( function () {\r\n\r\n\tconst cacheSatBounds = new SeparatingAxisBounds();\r\n\treturn function areIntersecting( shape1, shape2 ) {\r\n\r\n\t\tconst points1 = shape1.points;\r\n\t\tconst satAxes1 = shape1.satAxes;\r\n\t\tconst satBounds1 = shape1.satBounds;\r\n\r\n\t\tconst points2 = shape2.points;\r\n\t\tconst satAxes2 = shape2.satAxes;\r\n\t\tconst satBounds2 = shape2.satBounds;\r\n\r\n\t\t// check axes of the first shape\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds1[ i ];\r\n\t\t\tconst sa = satAxes1[ i ];\r\n\t\t\tcacheSatBounds.setFromPoints( sa, points2 );\r\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\t// check axes of the second shape\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds2[ i ];\r\n\t\t\tconst sa = satAxes2[ i ];\r\n\t\t\tcacheSatBounds.setFromPoints( sa, points1 );\r\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n","import { Vector3, Vector2, Plane, Line3 } from 'three';\nexport const closestPointLineToLine = ( function () {\n\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/Line.cpp#L56\n\tconst dir1 = new Vector3();\n\tconst dir2 = new Vector3();\n\tconst v02 = new Vector3();\n\treturn function closestPointLineToLine( l1, l2, result ) {\n\n\t\tconst v0 = l1.start;\n\t\tconst v10 = dir1;\n\t\tconst v2 = l2.start;\n\t\tconst v32 = dir2;\n\n\t\tv02.subVectors( v0, v2 );\n\t\tdir1.subVectors( l1.end, l2.start );\n\t\tdir2.subVectors( l2.end, l2.start );\n\n\t\t// float d0232 = v02.Dot(v32);\n\t\tconst d0232 = v02.dot( v32 );\n\n\t\t// float d3210 = v32.Dot(v10);\n\t\tconst d3210 = v32.dot( v10 );\n\n\t\t// float d3232 = v32.Dot(v32);\n\t\tconst d3232 = v32.dot( v32 );\n\n\t\t// float d0210 = v02.Dot(v10);\n\t\tconst d0210 = v02.dot( v10 );\n\n\t\t// float d1010 = v10.Dot(v10);\n\t\tconst d1010 = v10.dot( v10 );\n\n\t\t// float denom = d1010*d3232 - d3210*d3210;\n\t\tconst denom = d1010 * d3232 - d3210 * d3210;\n\n\t\tlet d, d2;\n\t\tif ( denom !== 0 ) {\n\n\t\t\td = ( d0232 * d3210 - d0210 * d3232 ) / denom;\n\n\t\t} else {\n\n\t\t\td = 0;\n\n\t\t}\n\n\t\td2 = ( d0232 + d * d3210 ) / d3232;\n\n\t\tresult.x = d;\n\t\tresult.y = d2;\n\n\t};\n\n} )();\n\nexport const closestPointsSegmentToSegment = ( function () {\n\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/LineSegment.cpp#L187\n\tconst paramResult = new Vector2();\n\tconst temp1 = new Vector3();\n\tconst temp2 = new Vector3();\n\treturn function closestPointsSegmentToSegment( l1, l2, target1, target2 ) {\n\n\t\tclosestPointLineToLine( l1, l2, paramResult );\n\n\t\tlet d = paramResult.x;\n\t\tlet d2 = paramResult.y;\n\t\tif ( d >= 0 && d <= 1 && d2 >= 0 && d2 <= 1 ) {\n\n\t\t\tl1.at( d, target1 );\n\t\t\tl2.at( d2, target2 );\n\n\t\t\treturn;\n\n\t\t} else if ( d >= 0 && d <= 1 ) {\n\n\t\t\t// Only d2 is out of bounds.\n\t\t\tif ( d2 < 0 ) {\n\n\t\t\t\tl2.at( 0, target2 );\n\n\t\t\t} else {\n\n\t\t\t\tl2.at( 1, target2 );\n\n\t\t\t}\n\n\t\t\tl1.closestPointToPoint( target2, true, target1 );\n\t\t\treturn;\n\n\t\t} else if ( d2 >= 0 && d2 <= 1 ) {\n\n\t\t\t// Only d is out of bounds.\n\t\t\tif ( d < 0 ) {\n\n\t\t\t\tl1.at( 0, target1 );\n\n\t\t\t} else {\n\n\t\t\t\tl1.at( 1, target1 );\n\n\t\t\t}\n\n\t\t\tl2.closestPointToPoint( target1, true, target2 );\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// Both u and u2 are out of bounds.\n\t\t\tlet p;\n\t\t\tif ( d < 0 ) {\n\n\t\t\t\tp = l1.start;\n\n\t\t\t} else {\n\n\t\t\t\tp = l1.end;\n\n\t\t\t}\n\n\t\t\tlet p2;\n\t\t\tif ( d2 < 0 ) {\n\n\t\t\t\tp2 = l2.start;\n\n\t\t\t} else {\n\n\t\t\t\tp2 = l2.end;\n\n\t\t\t}\n\n\t\t\tconst closestPoint = temp1;\n\t\t\tconst closestPoint2 = temp2;\n\t\t\tl1.closestPointToPoint( p2, true, temp1 );\n\t\t\tl2.closestPointToPoint( p, true, temp2 );\n\n\t\t\tif ( closestPoint.distanceToSquared( p2 ) <= closestPoint2.distanceToSquared( p ) ) {\n\n\t\t\t\ttarget1.copy( closestPoint );\n\t\t\t\ttarget2.copy( p2 );\n\t\t\t\treturn;\n\n\t\t\t} else {\n\n\t\t\t\ttarget1.copy( p );\n\t\t\t\ttarget2.copy( closestPoint2 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n} )();\n\n\nexport const sphereIntersectTriangle = ( function () {\n\n\t// https://stackoverflow.com/questions/34043955/detect-collision-between-sphere-and-triangle-in-three-js\n\tconst closestPointTemp = new Vector3();\n\tconst projectedPointTemp = new Vector3();\n\tconst planeTemp = new Plane();\n\tconst lineTemp = new Line3();\n\treturn function sphereIntersectTriangle( sphere, triangle ) {\n\n\t\tconst { radius, center } = sphere;\n\t\tconst { a, b, c } = triangle;\n\n\t\t// phase 1\n\t\tlineTemp.start = a;\n\t\tlineTemp.end = b;\n\t\tconst closestPoint1 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint1.distanceTo( center ) <= radius ) return true;\n\n\t\tlineTemp.start = a;\n\t\tlineTemp.end = c;\n\t\tconst closestPoint2 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint2.distanceTo( center ) <= radius ) return true;\n\n\t\tlineTemp.start = b;\n\t\tlineTemp.end = c;\n\t\tconst closestPoint3 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint3.distanceTo( center ) <= radius ) return true;\n\n\t\t// phase 2\n\t\tconst plane = triangle.getPlane( planeTemp );\n\t\tconst dp = Math.abs( plane.distanceToPoint( center ) );\n\t\tif ( dp <= radius ) {\n\n\t\t\tconst pp = plane.projectPoint( center, projectedPointTemp );\n\t\t\tconst cp = triangle.containsPoint( pp );\n\t\t\tif ( cp ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n} )();\n","import { Triangle, Vector3, Line3, Sphere } from 'three';\r\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\r\nimport { closestPointsSegmentToSegment, sphereIntersectTriangle } from './MathUtilities.js';\r\n\r\nexport class SeparatingAxisTriangle extends Triangle {\r\n\r\n\tconstructor( ...args ) {\r\n\r\n\t\tsuper( ...args );\r\n\r\n\t\tthis.isSeparatingAxisTriangle = true;\r\n\t\tthis.satAxes = new Array( 4 ).fill().map( () => new Vector3() );\r\n\t\tthis.satBounds = new Array( 4 ).fill().map( () => new SeparatingAxisBounds() );\r\n\t\tthis.points = [ this.a, this.b, this.c ];\r\n\t\tthis.sphere = new Sphere();\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t}\r\n\r\n\tintersectsSphere( sphere ) {\r\n\r\n\t\treturn sphereIntersectTriangle( sphere, this );\r\n\r\n\t}\r\n\r\n}\r\n\r\nSeparatingAxisTriangle.prototype.update = ( function () {\r\n\r\n\tconst arr = new Array( 3 );\r\n\treturn function update() {\r\n\r\n\t\tconst a = this.a;\r\n\t\tconst b = this.b;\r\n\t\tconst c = this.c;\r\n\r\n\t\tarr[ 0 ] = this.a;\r\n\t\tarr[ 1 ] = this.b;\r\n\t\tarr[ 2 ] = this.c;\r\n\r\n\t\tconst satAxes = this.satAxes;\r\n\t\tconst satBounds = this.satBounds;\r\n\r\n\t\tconst axis0 = satAxes[ 0 ];\r\n\t\tconst sab0 = satBounds[ 0 ];\r\n\t\tthis.getNormal( axis0 );\r\n\t\tsab0.setFromPoints( axis0, arr );\r\n\r\n\t\tconst axis1 = satAxes[ 1 ];\r\n\t\tconst sab1 = satBounds[ 1 ];\r\n\t\taxis1.subVectors( a, b );\r\n\t\tsab1.setFromPoints( axis1, arr );\r\n\r\n\t\tconst axis2 = satAxes[ 2 ];\r\n\t\tconst sab2 = satBounds[ 2 ];\r\n\t\taxis2.subVectors( b, c );\r\n\t\tsab2.setFromPoints( axis2, arr );\r\n\r\n\t\tconst axis3 = satAxes[ 3 ];\r\n\t\tconst sab3 = satBounds[ 3 ];\r\n\t\taxis3.subVectors( c, a );\r\n\t\tsab3.setFromPoints( axis3, arr );\r\n\r\n\t\tthis.sphere.setFromPoints( this.points );\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nSeparatingAxisTriangle.prototype.closestPointToSegment = ( function () {\r\n\r\n\tconst point1 = new Vector3();\r\n\tconst point2 = new Vector3();\r\n\tconst edge = new Line3();\r\n\r\n\treturn function distanceToSegment( segment, target1 = null, target2 = null ) {\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tconst { start, end } = segment;\r\n\t\tconst points = this.points;\r\n\t\tlet distSq;\r\n\t\tlet closestDistanceSq = Infinity;\r\n\r\n\t\t// check the triangle edges\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst nexti = ( i + 1 ) % 3;\r\n\t\t\tedge.start.copy( points[ i ] );\r\n\t\t\tedge.end.copy( points[ nexti ] );\r\n\r\n\t\t\tclosestPointsSegmentToSegment( edge, segment, point1, point2 );\r\n\r\n\t\t\tdistSq = point1.distanceToSquared( point2 );\r\n\t\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = distSq;\r\n\t\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// check end points\r\n\t\tthis.closestPointToPoint( start, point1 );\r\n\t\tdistSq = start.distanceToSquared( point1 );\r\n\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\tclosestDistanceSq = distSq;\r\n\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\tif ( target2 ) target2.copy( start );\r\n\r\n\t\t}\r\n\r\n\t\tthis.closestPointToPoint( end, point1 );\r\n\t\tdistSq = end.distanceToSquared( point1 );\r\n\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\tclosestDistanceSq = distSq;\r\n\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\tif ( target2 ) target2.copy( end );\r\n\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( closestDistanceSq );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nSeparatingAxisTriangle.prototype.intersectsTriangle = ( function () {\r\n\r\n\tconst saTri2 = new SeparatingAxisTriangle();\r\n\tconst arr1 = new Array( 3 );\r\n\tconst arr2 = new Array( 3 );\r\n\tconst cachedSatBounds = new SeparatingAxisBounds();\r\n\tconst cachedSatBounds2 = new SeparatingAxisBounds();\r\n\tconst cachedAxis = new Vector3();\r\n\treturn function intersectsTriangle( other ) {\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! other.isSeparatingAxisTriangle ) {\r\n\r\n\t\t\tsaTri2.copy( other );\r\n\t\t\tsaTri2.update();\r\n\t\t\tother = saTri2;\r\n\r\n\t\t}\r\n\r\n\t\tconst satBounds1 = this.satBounds;\r\n\t\tconst satAxes1 = this.satAxes;\r\n\t\tarr2[ 0 ] = other.a;\r\n\t\tarr2[ 1 ] = other.b;\r\n\t\tarr2[ 2 ] = other.c;\r\n\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds1[ i ];\r\n\t\t\tconst sa = satAxes1[ i ];\r\n\t\t\tcachedSatBounds.setFromPoints( sa, arr2 );\r\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\tconst satBounds2 = other.satBounds;\r\n\t\tconst satAxes2 = other.satAxes;\r\n\t\tarr1[ 0 ] = this.a;\r\n\t\tarr1[ 1 ] = this.b;\r\n\t\tarr1[ 2 ] = this.c;\r\n\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds2[ i ];\r\n\t\t\tconst sa = satAxes2[ i ];\r\n\t\t\tcachedSatBounds.setFromPoints( sa, arr1 );\r\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\t// check crossed axes\r\n\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\tconst sa1 = satAxes1[ i ];\r\n\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\r\n\r\n\t\t\t\tconst sa2 = satAxes2[ i2 ];\r\n\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\r\n\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, arr1 );\r\n\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, arr2 );\r\n\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n\r\nSeparatingAxisTriangle.prototype.distanceToPoint = ( function () {\r\n\r\n\tconst target = new Vector3();\r\n\treturn function distanceToPoint( point ) {\r\n\r\n\t\tthis.closestPointToPoint( point, target );\r\n\t\treturn point.distanceTo( target );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n\r\nSeparatingAxisTriangle.prototype.distanceToTriangle = ( function () {\r\n\r\n\tconst point = new Vector3();\r\n\tconst point2 = new Vector3();\r\n\tconst cornerFields = [ 'a', 'b', 'c' ];\r\n\tconst line1 = new Line3();\r\n\tconst line2 = new Line3();\r\n\r\n\treturn function distanceToTriangle( other, target1 = null, target2 = null ) {\r\n\r\n\t\tif ( other.needsUpdate ) {\r\n\r\n\t\t\tother.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.intersectsTriangle( other ) ) {\r\n\r\n\t\t\t// TODO: This will not result in a point that lies on\r\n\t\t\t// the intersection line of the triangles\r\n\t\t\tif ( target1 || target2 ) {\r\n\r\n\t\t\t\tthis.getMidpoint( point );\r\n\t\t\t\tother.closestPointToPoint( point, point2 );\r\n\t\t\t\tthis.closestPointToPoint( point2, point );\r\n\r\n\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t\tlet closestDistanceSq = Infinity;\r\n\r\n\t\t// check all point distances\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tlet dist;\r\n\t\t\tconst field = cornerFields[ i ];\r\n\t\t\tconst otherVec = other[ field ];\r\n\t\t\tthis.closestPointToPoint( otherVec, point );\r\n\r\n\t\t\tdist = otherVec.distanceToSquared( point );\r\n\r\n\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\tif ( target2 ) target2.copy( otherVec );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tconst thisVec = this[ field ];\r\n\t\t\tother.closestPointToPoint( thisVec, point );\r\n\r\n\t\t\tdist = thisVec.distanceToSquared( point );\r\n\r\n\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\tif ( target1 ) target1.copy( thisVec );\r\n\t\t\t\tif ( target2 ) target2.copy( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst f11 = cornerFields[ i ];\r\n\t\t\tconst f12 = cornerFields[ ( i + 1 ) % 3 ];\r\n\t\t\tline1.set( this[ f11 ], this[ f12 ] );\r\n\t\t\tfor ( let i2 = 0; i2 < 3; i2 ++ ) {\r\n\r\n\t\t\t\tconst f21 = cornerFields[ i2 ];\r\n\t\t\t\tconst f22 = cornerFields[ ( i2 + 1 ) % 3 ];\r\n\t\t\t\tline2.set( other[ f21 ], other[ f22 ] );\r\n\r\n\t\t\t\tclosestPointsSegmentToSegment( line1, line2, point, point2 );\r\n\r\n\t\t\t\tconst dist = point.distanceToSquared( point2 );\r\n\t\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( closestDistanceSq );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n","import { Box3, Vector3, Matrix4, Sphere, Line3 } from 'three';\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\nimport { SeparatingAxisTriangle } from './SeparatingAxisTriangle.js';\nimport { closestPointsSegmentToSegment } from './MathUtilities.js';\n\nexport class OrientedBox extends Box3 {\n\n\tconstructor( ...args ) {\n\n\t\tsuper( ...args );\n\n\t\tthis.isOrientedBox = true;\n\t\tthis.matrix = new Matrix4();\n\t\tthis.invMatrix = new Matrix4();\n\t\tthis.points = new Array( 8 ).fill().map( () => new Vector3() );\n\t\tthis.satAxes = new Array( 3 ).fill().map( () => new Vector3() );\n\t\tthis.satBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.alignedSatBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.sphere = new Sphere();\n\n\t}\n\n\tset( min, max, matrix ) {\n\n\t\tsuper.set( min, max );\n\t\tthis.matrix = matrix;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tsuper.copy( other );\n\t\tthis.matrix.copy( other.matrix );\n\n\t}\n\n}\n\nOrientedBox.prototype.update = ( function () {\n\n\treturn function update() {\n\n\t\tconst matrix = this.matrix;\n\t\tconst min = this.min;\n\t\tconst max = this.max;\n\n\t\tconst points = this.points;\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tconst i = ( ( 1 << 0 ) * x ) | ( ( 1 << 1 ) * y ) | ( ( 1 << 2 ) * z );\n\t\t\t\t\tconst v = points[ i ];\n\t\t\t\t\tv.x = x ? max.x : min.x;\n\t\t\t\t\tv.y = y ? max.y : min.y;\n\t\t\t\t\tv.z = z ? max.z : min.z;\n\n\t\t\t\t\tv.applyMatrix4( matrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.sphere.setFromPoints( this.points );\n\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\t\tconst minVec = points[ 0 ];\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst axis = satAxes[ i ];\n\t\t\tconst sb = satBounds[ i ];\n\t\t\tconst index = 1 << i;\n\t\t\tconst pi = points[ index ];\n\n\t\t\taxis.subVectors( minVec, pi );\n\t\t\tsb.setFromPoints( axis, points );\n\n\t\t}\n\n\t\tconst alignedSatBounds = this.alignedSatBounds;\n\t\talignedSatBounds[ 0 ].setFromPointsField( points, 'x' );\n\t\talignedSatBounds[ 1 ].setFromPointsField( points, 'y' );\n\t\talignedSatBounds[ 2 ].setFromPointsField( points, 'z' );\n\n\t\tthis.invMatrix.copy( this.matrix ).invert();\n\n\t};\n\n} )();\n\nOrientedBox.prototype.intersectsBox = ( function () {\n\n\tconst aabbBounds = new SeparatingAxisBounds();\n\treturn function intersectsBox( box ) {\n\n\t\tif ( ! box.intersectsSphere( this.sphere ) ) return false;\n\n\t\tconst min = box.min;\n\t\tconst max = box.max;\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\t\tconst alignedSatBounds = this.alignedSatBounds;\n\n\t\taabbBounds.min = min.x;\n\t\taabbBounds.max = max.x;\n\t\tif ( alignedSatBounds[ 0 ].isSeparated( aabbBounds ) ) return false;\n\n\t\taabbBounds.min = min.y;\n\t\taabbBounds.max = max.y;\n\t\tif ( alignedSatBounds[ 1 ].isSeparated( aabbBounds ) ) return false;\n\n\t\taabbBounds.min = min.z;\n\t\taabbBounds.max = max.z;\n\t\tif ( alignedSatBounds[ 2 ].isSeparated( aabbBounds ) ) return false;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst axis = satAxes[ i ];\n\t\t\tconst sb = satBounds[ i ];\n\t\t\taabbBounds.setFromBox( axis, box );\n\t\t\tif ( sb.isSeparated( aabbBounds ) ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.intersectsTriangle = ( function () {\n\n\tconst saTri = new SeparatingAxisTriangle();\n\tconst pointsArr = new Array( 3 );\n\tconst cachedSatBounds = new SeparatingAxisBounds();\n\tconst cachedSatBounds2 = new SeparatingAxisBounds();\n\tconst cachedAxis = new Vector3();\n\treturn function intersectsTriangle( triangle ) {\n\n\t\tif ( ! triangle.isSeparatingAxisTriangle ) {\n\n\t\t\tsaTri.copy( triangle );\n\t\t\tsaTri.update();\n\t\t\ttriangle = saTri;\n\n\t\t} else if ( triangle.needsUpdate ) {\n\n\t\t\ttriangle.update();\n\n\t\t}\n\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\n\t\tpointsArr[ 0 ] = triangle.a;\n\t\tpointsArr[ 1 ] = triangle.b;\n\t\tpointsArr[ 2 ] = triangle.c;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = satBounds[ i ];\n\t\t\tconst sa = satAxes[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, pointsArr );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t}\n\n\t\tconst triSatBounds = triangle.satBounds;\n\t\tconst triSatAxes = triangle.satAxes;\n\t\tconst points = this.points;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = triSatBounds[ i ];\n\t\t\tconst sa = triSatAxes[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, points );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t}\n\n\t\t// check crossed axes\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sa1 = satAxes[ i ];\n\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\n\n\t\t\t\tconst sa2 = triSatAxes[ i2 ];\n\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\n\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, pointsArr );\n\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, points );\n\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.closestPointToPoint = ( function () {\n\n\treturn function closestPointToPoint( point, target1 ) {\n\n\t\ttarget1\n\t\t\t.copy( point )\n\t\t\t.applyMatrix4( this.invMatrix )\n\t\t\t.clamp( this.min, this.max )\n\t\t\t.applyMatrix4( this.matrix );\n\n\t\treturn target1;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.distanceToPoint = ( function () {\n\n\tconst target = new Vector3();\n\treturn function distanceToPoint( point ) {\n\n\t\tthis.closestPointToPoint( point, target );\n\t\treturn point.distanceTo( target );\n\n\t};\n\n} )();\n\n\nOrientedBox.prototype.distanceToBox = ( function () {\n\n\tconst xyzFields = [ 'x', 'y', 'z' ];\n\tconst segments1 = new Array( 12 ).fill().map( () => new Line3() );\n\tconst segments2 = new Array( 12 ).fill().map( () => new Line3() );\n\n\tconst point1 = new Vector3();\n\tconst point2 = new Vector3();\n\n\treturn function distanceToBox( box, threshold = 0, target1 = null, target2 = null ) {\n\n\t\tif ( this.intersectsBox( box ) ) {\n\n\t\t\tif ( target1 || target2 ) {\n\n\t\t\t\tbox.getCenter( point2 );\n\t\t\t\tthis.closestPointToPoint( point2, point1 );\n\t\t\t\tbox.closestPointToPoint( point1, point2 );\n\n\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t}\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tconst threshold2 = threshold * threshold;\n\t\tconst min = box.min;\n\t\tconst max = box.max;\n\t\tconst points = this.points;\n\n\n\t\t// iterate over every edge and compare distances\n\t\tlet closestDistanceSq = Infinity;\n\n\t\t// check over all these points\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst p = points[ i ];\n\t\t\tpoint2.copy( p ).clamp( min, max );\n\n\t\t\tconst dist = p.distanceToSquared( point2 );\n\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\tif ( target1 ) target1.copy( p );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate and check all line segment distances\n\t\tlet count = 0;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let i1 = 0; i1 <= 1; i1 ++ ) {\n\n\t\t\t\tfor ( let i2 = 0; i2 <= 1; i2 ++ ) {\n\n\t\t\t\t\tconst nextIndex = ( i + 1 ) % 3;\n\t\t\t\t\tconst nextIndex2 = ( i + 2 ) % 3;\n\n\t\t\t\t\t// get obb line segments\n\t\t\t\t\tconst index = i1 << nextIndex | i2 << nextIndex2;\n\t\t\t\t\tconst index2 = 1 << i | i1 << nextIndex | i2 << nextIndex2;\n\t\t\t\t\tconst p1 = points[ index ];\n\t\t\t\t\tconst p2 = points[ index2 ];\n\t\t\t\t\tconst line1 = segments1[ count ];\n\t\t\t\t\tline1.set( p1, p2 );\n\n\n\t\t\t\t\t// get aabb line segments\n\t\t\t\t\tconst f1 = xyzFields[ i ];\n\t\t\t\t\tconst f2 = xyzFields[ nextIndex ];\n\t\t\t\t\tconst f3 = xyzFields[ nextIndex2 ];\n\t\t\t\t\tconst line2 = segments2[ count ];\n\t\t\t\t\tconst start = line2.start;\n\t\t\t\t\tconst end = line2.end;\n\n\t\t\t\t\tstart[ f1 ] = min[ f1 ];\n\t\t\t\t\tstart[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\n\t\t\t\t\tstart[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\n\n\t\t\t\t\tend[ f1 ] = max[ f1 ];\n\t\t\t\t\tend[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\n\t\t\t\t\tend[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\n\n\t\t\t\t\tcount ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// check all the other boxes point\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tpoint2.x = x ? max.x : min.x;\n\t\t\t\t\tpoint2.y = y ? max.y : min.y;\n\t\t\t\t\tpoint2.z = z ? max.z : min.z;\n\n\t\t\t\t\tthis.closestPointToPoint( point2, point1 );\n\t\t\t\t\tconst dist = point2.distanceToSquared( point1 );\n\t\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 12; i ++ ) {\n\n\t\t\tconst l1 = segments1[ i ];\n\t\t\tfor ( let i2 = 0; i2 < 12; i2 ++ ) {\n\n\t\t\t\tconst l2 = segments2[ i2 ];\n\t\t\t\tclosestPointsSegmentToSegment( l1, l2, point1, point2 );\n\t\t\t\tconst dist = point1.distanceToSquared( point2 );\n\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Math.sqrt( closestDistanceSq );\n\n\t};\n\n} )();\n","// sets the vertices of triangle `tri` with the 3 vertices after i\r\nexport function setTriangle( tri, i, index, pos ) {\r\n\r\n\tconst ta = tri.a;\r\n\tconst tb = tri.b;\r\n\tconst tc = tri.c;\r\n\r\n\tlet i3 = index.getX( i );\r\n\tta.x = pos.getX( i3 );\r\n\tta.y = pos.getY( i3 );\r\n\tta.z = pos.getZ( i3 );\r\n\r\n\ti3 = index.getX( i + 1 );\r\n\ttb.x = pos.getX( i3 );\r\n\ttb.y = pos.getY( i3 );\r\n\ttb.z = pos.getZ( i3 );\r\n\r\n\ti3 = index.getX( i + 2 );\r\n\ttc.x = pos.getX( i3 );\r\n\ttc.y = pos.getY( i3 );\r\n\ttc.z = pos.getZ( i3 );\r\n\r\n}\r\n","import { Vector3, Vector2, Triangle, DoubleSide, BackSide } from 'three';\r\n\r\n// Ripped and modified From THREE.js Mesh raycast\r\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L115\r\nvar vA = new Vector3();\r\nvar vB = new Vector3();\r\nvar vC = new Vector3();\r\n\r\nvar uvA = new Vector2();\r\nvar uvB = new Vector2();\r\nvar uvC = new Vector2();\r\n\r\nvar intersectionPoint = new Vector3();\r\nvar intersectionPointWorld = new Vector3();\r\n\r\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\tvar intersect;\r\n\tif ( material.side === BackSide ) {\r\n\r\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t} else {\r\n\r\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\r\n\r\n\t}\r\n\r\n\tif ( intersect === null ) return null;\r\n\r\n\tintersectionPointWorld.copy( point );\r\n\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\treturn {\r\n\t\tdistance: distance,\r\n\t\tpoint: intersectionPointWorld.clone(),\r\n\t\tobject: object\r\n\t};\r\n\r\n}\r\n\r\nfunction checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\r\n\r\n\tvA.fromBufferAttribute( position, a );\r\n\tvB.fromBufferAttribute( position, b );\r\n\tvC.fromBufferAttribute( position, c );\r\n\r\n\tvar intersection = checkIntersection( object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tif ( uv ) {\r\n\r\n\t\t\tuvA.fromBufferAttribute( uv, a );\r\n\t\t\tuvB.fromBufferAttribute( uv, b );\r\n\t\t\tuvC.fromBufferAttribute( uv, c );\r\n\r\n\t\t\tintersection.uv = Triangle.getUV( intersectionPoint, vA, vB, vC, uvA, uvB, uvC, new Vector2( ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst face = {\r\n\t\t\ta: a,\r\n\t\t\tb: b,\r\n\t\t\tc: c,\r\n\t\t\tnormal: new Vector3( ),\r\n\t\t\tmaterialIndex: 0\r\n\t\t};\r\n\r\n\t\tTriangle.getNormal( vA, vB, vC, face.normal );\r\n\r\n\t\tintersection.face = face;\r\n\t\tintersection.faceIndex = a;\r\n\r\n\t}\r\n\r\n\treturn intersection;\r\n\r\n}\r\n\r\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L258\r\nfunction intersectTri( mesh, geo, raycaster, ray, tri, intersections ) {\r\n\r\n\tconst triOffset = tri * 3;\r\n\tconst a = geo.index.getX( triOffset );\r\n\tconst b = geo.index.getX( triOffset + 1 );\r\n\tconst c = geo.index.getX( triOffset + 2 );\r\n\r\n\tconst intersection = checkBufferGeometryIntersection( mesh, raycaster, ray, geo.attributes.position, geo.attributes.uv, a, b, c );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tintersection.faceIndex = tri;\r\n\t\tif ( intersections ) intersections.push( intersection );\r\n\t\treturn intersection;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n}\r\n\r\nexport { intersectTri };\r\n","import { intersectTri } from './ThreeIntersectionUtilities.js';\r\n\r\nexport function intersectTris( mesh, geo, raycaster, ray, offset, count, intersections ) {\r\n\r\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\tintersectTri( mesh, geo, raycaster, ray, i, intersections );\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport function intersectClosestTri( mesh, geo, raycaster, ray, offset, count ) {\r\n\r\n\tlet dist = Infinity;\r\n\tlet res = null;\r\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\tconst intersection = intersectTri( mesh, geo, raycaster, ray, i );\r\n\t\tif ( intersection && intersection.distance < dist ) {\r\n\r\n\t\t\tres = intersection;\r\n\t\t\tdist = intersection.distance;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn res;\r\n\r\n};\r\n","\r\nimport { Box3, Vector3, Mesh, Matrix4 } from 'three';\r\nimport { intersectTris, intersectClosestTri } from './Utils/RayIntersectTriUtlities.js';\r\nimport { arrayToBox } from './Utils/ArrayBoxUtilities.js';\r\nimport { OrientedBox } from './Utils/OrientedBox.js';\r\nimport { setTriangle } from './Utils/TriangleUtils.js';\r\nimport { SeparatingAxisTriangle } from './Utils/SeparatingAxisTriangle.js';\r\nimport { CONTAINED } from './Constants.js';\r\n\r\nconst boundingBox = new Box3();\r\nconst boxIntersection = new Vector3();\r\nconst xyzFields = [ 'x', 'y', 'z' ];\r\n\r\nfunction intersectRay( node, ray, target ) {\r\n\r\n\tarrayToBox( node.boundingData, boundingBox );\r\n\r\n\treturn ray.intersectBox( boundingBox, target );\r\n\r\n}\r\n\r\nexport function raycast( node, mesh, raycaster, ray, intersects ) {\r\n\r\n\tif ( node.continueGeneration ) {\r\n\r\n\t\tnode.continueGeneration();\r\n\r\n\t}\r\n\r\n\tconst isLeaf = ! ! node.count;\r\n\tif ( isLeaf ) {\r\n\r\n\t\tintersectTris( mesh, mesh.geometry, raycaster, ray, node.offset, node.count, intersects );\r\n\r\n\t} else {\r\n\r\n\t\tif ( intersectRay( node.left, ray, boxIntersection ) ) {\r\n\r\n\t\t\traycast( node.left, mesh, raycaster, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t\tif ( intersectRay( node.right, ray, boxIntersection ) ) {\r\n\r\n\t\t\traycast( node.right, mesh, raycaster, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport function raycastFirst( node, mesh, raycaster, ray ) {\r\n\r\n\tif ( node.continueGeneration ) {\r\n\r\n\t\tnode.continueGeneration();\r\n\r\n\t}\r\n\r\n\tconst isLeaf = ! ! node.count;\r\n\tif ( isLeaf ) {\r\n\r\n\t\treturn intersectClosestTri( mesh, mesh.geometry, raycaster, ray, node.offset, node.count );\r\n\r\n\t} else {\r\n\r\n\r\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\r\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\r\n\t\tconst splitAxis = node.splitAxis;\r\n\t\tconst xyzAxis = xyzFields[ splitAxis ];\r\n\t\tconst rayDir = ray.direction[ xyzAxis ];\r\n\t\tconst leftToRight = rayDir >= 0;\r\n\r\n\t\t// c1 is the child to check first\r\n\t\tlet c1, c2;\r\n\t\tif ( leftToRight ) {\r\n\r\n\t\t\tc1 = node.left;\r\n\t\t\tc2 = node.right;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tc1 = node.right;\r\n\t\t\tc2 = node.left;\r\n\r\n\t\t}\r\n\r\n\t\tconst c1Intersection = intersectRay( c1, ray, boxIntersection );\r\n\t\tconst c1Result = c1Intersection ? raycastFirst( c1, mesh, raycaster, ray ) : null;\r\n\r\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\r\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\r\n\t\tif ( c1Result ) {\r\n\r\n\t\t\t// check if the point is within the second bounds\r\n\t\t\tconst point = c1Result.point[ xyzAxis ];\r\n\t\t\tconst isOutside = leftToRight ?\r\n\t\t\t\tpoint <= c2.boundingData[ splitAxis ] :\r\n\t\t\t\tpoint >= c2.boundingData[ splitAxis + 3 ];\r\n\r\n\t\t\tif ( isOutside ) {\r\n\r\n\t\t\t\treturn c1Result;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// either there was no intersection in the first node, or there could still be a closer\r\n\t\t// intersection in the second, so check the second node and then take the better of the two\r\n\t\tconst c2Intersection = intersectRay( c2, ray, boxIntersection );\r\n\t\tconst c2Result = c2Intersection ? raycastFirst( c2, mesh, raycaster, ray ) : null;\r\n\r\n\t\tif ( c1Result && c2Result ) {\r\n\r\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn c1Result || c2Result || null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport const shapecast = ( function () {\r\n\r\n\tconst _triangle = new SeparatingAxisTriangle();\r\n\tconst _cachedBox1 = new Box3();\r\n\tconst _cachedBox2 = new Box3();\r\n\r\n\tfunction iterateOverTriangles(\r\n\t\toffset,\r\n\t\tcount,\r\n\t\tgeometry,\r\n\t\tintersectsTriangleFunc,\r\n\t\tcontained,\r\n\t\tdepth,\r\n\t\ttriangle\r\n\t) {\r\n\r\n\t\tconst index = geometry.index;\r\n\t\tconst pos = geometry.attributes.position;\r\n\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\tsetTriangle( triangle, i, index, pos );\r\n\t\t\ttriangle.needsUpdate = true;\r\n\r\n\t\t\tif ( intersectsTriangleFunc( triangle, i, i + 1, i + 2, contained, depth ) ) {\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\treturn function shapecast(\r\n\t\tnode,\r\n\t\tmesh,\r\n\t\tintersectsBoundsFunc,\r\n\t\tintersectsTriangleFunc = null,\r\n\t\tnodeScoreFunc = null,\r\n\t\tdepth = 0,\r\n\t\ttriangle = _triangle,\r\n\t\tcachedBox1 = _cachedBox1,\r\n\t\tcachedBox2 = _cachedBox2\r\n\t) {\r\n\r\n\t\t// Define these inside the function so it has access to the local variables needed\r\n\t\t// when converting to the buffer equivalents\r\n\t\tfunction getLeftOffset( node ) {\r\n\r\n\t\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t}\r\n\r\n\t\t\twhile ( ! node.count ) {\r\n\r\n\t\t\t\tnode = node.left;\r\n\t\t\t\tif ( /* skip */ node.continueGeneration ) {\r\n\r\n\t\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node.offset;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getRightEndOffset( node ) {\r\n\r\n\t\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t}\r\n\r\n\t\t\twhile ( ! node.count ) {\r\n\r\n\t\t\t\tnode = node.right;\r\n\t\t\t\tif ( /* skip */ node.continueGeneration ) {\r\n\r\n\t\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node.offset + node.count;\r\n\r\n\t\t}\r\n\r\n\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\tnode.continueGeneration();\r\n\r\n\t\t}\r\n\r\n\t\tconst isLeaf = ! ! node.count;\r\n\t\tif ( isLeaf && intersectsTriangleFunc ) {\r\n\r\n\t\t\tconst geometry = mesh.geometry;\r\n\t\t\tconst offset = node.offset;\r\n\t\t\tconst count = node.count;\r\n\t\t\treturn iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, false, depth, triangle );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst left = node.left;\r\n\t\t\tconst right = node.right;\r\n\t\t\tlet c1 = left;\r\n\t\t\tlet c2 = right;\r\n\r\n\t\t\tlet score1, score2;\r\n\t\t\tlet box1, box2;\r\n\t\t\tif ( nodeScoreFunc ) {\r\n\r\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tbox2 = cachedBox2;\r\n\r\n\t\t\t\tarrayToBox( c1.boundingData, box1 );\r\n\t\t\t\tarrayToBox( c2.boundingData, box2 );\r\n\r\n\t\t\t\tscore1 = nodeScoreFunc( box1 );\r\n\t\t\t\tscore2 = nodeScoreFunc( box2 );\r\n\r\n\t\t\t\tif ( score2 < score1 ) {\r\n\r\n\t\t\t\t\tc1 = right;\r\n\t\t\t\t\tc2 = left;\r\n\r\n\t\t\t\t\tconst temp = score1;\r\n\t\t\t\t\tscore1 = score2;\r\n\t\t\t\t\tscore2 = temp;\r\n\r\n\t\t\t\t\tbox1 = box2;\r\n\t\t\t\t\t// box2 is always set before use below\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Check box 1 intersection\r\n\t\t\tif ( ! box1 ) {\r\n\r\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tarrayToBox( c1.boundingData, box1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst isC1Leaf = ! ! c1.count;\r\n\t\t\tconst c1Intersection = intersectsBoundsFunc( box1, isC1Leaf, score1, depth + 1 );\r\n\r\n\t\t\tlet c1StopTraversal;\r\n\t\t\tif ( c1Intersection === CONTAINED ) {\r\n\r\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffset( c1 );\r\n\t\t\t\tconst end = getRightEndOffset( c1 );\r\n\t\t\t\tconst count = end - offset;\r\n\r\n\t\t\t\tc1StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tc1StopTraversal =\r\n\t\t\t\t\tc1Intersection &&\r\n\t\t\t\t\tshapecast(\r\n\t\t\t\t\t\tc1,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( c1StopTraversal ) return true;\r\n\r\n\t\t\t// Check box 2 intersection\r\n\t\t\t// cached box2 will have been overwritten by previous traversal\r\n\t\t\tbox2 = cachedBox2;\r\n\t\t\tarrayToBox( c2.boundingData, box2 );\r\n\r\n\t\t\tconst isC2Leaf = ! ! c2.count;\r\n\t\t\tconst c2Intersection = intersectsBoundsFunc( box2, isC2Leaf, score2, depth + 1 );\r\n\r\n\t\t\tlet c2StopTraversal;\r\n\t\t\tif ( c2Intersection === CONTAINED ) {\r\n\r\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffset( c2 );\r\n\t\t\t\tconst end = getRightEndOffset( c2 );\r\n\t\t\t\tconst count = end - offset;\r\n\r\n\t\t\t\tc2StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tc2StopTraversal =\r\n\t\t\t\t\tc2Intersection &&\r\n\t\t\t\t\tshapecast(\r\n\t\t\t\t\t\tc2,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( c2StopTraversal ) return true;\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nexport const intersectsGeometry = ( function () {\r\n\r\n\tconst triangle = new SeparatingAxisTriangle();\r\n\tconst triangle2 = new SeparatingAxisTriangle();\r\n\tconst cachedMesh = new Mesh();\r\n\tconst invertedMat = new Matrix4();\r\n\r\n\tconst obb = new OrientedBox();\r\n\tconst obb2 = new OrientedBox();\r\n\r\n\treturn function intersectsGeometry( node, mesh, geometry, geometryToBvh, cachedObb = null ) {\r\n\r\n\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\tnode.continueGeneration();\r\n\r\n\t\t}\r\n\r\n\t\tif ( cachedObb === null ) {\r\n\r\n\t\t\tif ( ! geometry.boundingBox ) {\r\n\r\n\t\t\t\tgeometry.computeBoundingBox();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobb.set( geometry.boundingBox.min, geometry.boundingBox.max, geometryToBvh );\r\n\t\t\tobb.update();\r\n\t\t\tcachedObb = obb;\r\n\r\n\t\t}\r\n\r\n\t\tconst isLeaf = ! ! node.count;\r\n\t\tif ( isLeaf ) {\r\n\r\n\t\t\tconst thisGeometry = mesh.geometry;\r\n\t\t\tconst thisIndex = thisGeometry.index;\r\n\t\t\tconst thisPos = thisGeometry.attributes.position;\r\n\r\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst pos = geometry.attributes.position;\r\n\r\n\t\t\tconst offset = node.offset;\r\n\t\t\tconst count = node.count;\r\n\r\n\t\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\r\n\t\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\r\n\t\t\t// here.\r\n\t\t\tinvertedMat.copy( geometryToBvh ).invert();\r\n\r\n\t\t\tif ( geometry.boundsTree ) {\r\n\r\n\t\t\t\tarrayToBox( node.boundingData, obb2 );\r\n\t\t\t\tobb2.matrix.copy( invertedMat );\r\n\t\t\t\tobb2.update();\r\n\r\n\t\t\t\tcachedMesh.geometry = geometry;\r\n\t\t\t\tconst res = geometry.boundsTree.shapecast( cachedMesh, box => obb2.intersectsBox( box ), function ( tri ) {\r\n\r\n\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.update();\r\n\r\n\t\t\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\t\tsetTriangle( triangle2, i, thisIndex, thisPos );\r\n\t\t\t\t\t\ttriangle2.update();\r\n\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tcachedMesh.geometry = null;\r\n\r\n\t\t\t\treturn res;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = offset * 3, l = ( count + offset * 3 ); i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\tsetTriangle( triangle, i, thisIndex, thisPos );\r\n\t\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.update();\r\n\r\n\t\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\r\n\r\n\t\t\t\t\t\tsetTriangle( triangle2, i2, index, pos );\r\n\t\t\t\t\t\ttriangle2.update();\r\n\r\n\t\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst left = node.left;\r\n\t\t\tconst right = node.right;\r\n\r\n\t\t\tarrayToBox( left.boundingData, boundingBox );\r\n\t\t\tconst leftIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometry( left, mesh, geometry, geometryToBvh, cachedObb );\r\n\r\n\t\t\tif ( leftIntersection ) return true;\r\n\r\n\r\n\t\t\tarrayToBox( right.boundingData, boundingBox );\r\n\t\t\tconst rightIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometry( right, mesh, geometry, geometryToBvh, cachedObb );\r\n\r\n\t\t\tif ( rightIntersection ) return true;\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n","// Split strategy constants\r\nexport const CENTER = 0;\r\nexport const AVERAGE = 1;\r\nexport const SAH = 2;\r\n\r\nexport const NOT_INTERSECTED = 0;\r\nexport const INTERSECTED = 1;\r\nexport const CONTAINED = 2;\r\n","\n/**************************************************************************************************\n *\n * This file is generated from castFunctions.js and scripts/generate-cast-function.mjs. Do not edit.\n *\n *************************************************************************************************/\n\nimport { Box3, Vector3, Mesh, Matrix4 } from 'three';\r\nimport { intersectTris, intersectClosestTri } from './Utils/RayIntersectTriUtlities.js';\n\nimport { OrientedBox } from './Utils/OrientedBox.js';\r\nimport { setTriangle } from './Utils/TriangleUtils.js';\r\nimport { SeparatingAxisTriangle } from './Utils/SeparatingAxisTriangle.js';\r\nimport { CONTAINED } from './Constants.js';\n\nconst boundingBox = new Box3();\r\nconst boxIntersection = new Vector3();\r\nconst xyzFields = [ 'x', 'y', 'z' ];\n\nexport function raycastBuffer( stride4Offset, mesh, raycaster, ray, intersects ) {\n\n\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\tif ( isLeaf ) {\n\n\t\tintersectTris( mesh, mesh.geometry, raycaster, ray, /* node offset */ uint32Array[ stride4Offset + 6 ], /* node count */ uint16Array[ stride2Offset + 14 ], intersects );\n\n\t} else {\n\n\t\tif ( intersectRayBuffer( /* node left */ stride4Offset + 8, float32Array, ray, boxIntersection ) ) {\n\n\t\t\traycastBuffer( /* node left */ stride4Offset + 8, mesh, raycaster, ray, intersects );\n\n\t\t}\n\n\t\tif ( intersectRayBuffer( /* node right */ uint32Array[ stride4Offset + 6 ], float32Array, ray, boxIntersection ) ) {\n\n\t\t\traycastBuffer( /* node right */ uint32Array[ stride4Offset + 6 ], mesh, raycaster, ray, intersects );\n\n\t\t}\n\n\t}\n\n}\n\nexport function raycastFirstBuffer( stride4Offset, mesh, raycaster, ray ) {\n\n\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\tif ( isLeaf ) {\n\n\t\treturn intersectClosestTri( mesh, mesh.geometry, raycaster, ray, /* node offset */ uint32Array[ stride4Offset + 6 ], /* node count */ uint16Array[ stride2Offset + 14 ] );\n\n\t} else {\n\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\r\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\r\n\t\tconst splitAxis = /* node splitAxis */ uint32Array[ stride4Offset + 7 ];\r\n\t\tconst xyzAxis = xyzFields[ splitAxis ];\r\n\t\tconst rayDir = ray.direction[ xyzAxis ];\r\n\t\tconst leftToRight = rayDir >= 0;\n\n\t\t// c1 is the child to check first\r\n\t\tlet c1, c2;\r\n\t\tif ( leftToRight ) {\n\n\t\t\tc1 = /* node left */ stride4Offset + 8;\r\n\t\t\tc2 = /* node right */ uint32Array[ stride4Offset + 6 ];\n\n\t\t} else {\n\n\t\t\tc1 = /* node right */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tc2 = /* node left */ stride4Offset + 8;\n\n\t\t}\n\n\t\tconst c1Intersection = intersectRayBuffer( c1, float32Array, ray, boxIntersection );\r\n\t\tconst c1Result = c1Intersection ? raycastFirstBuffer( c1, mesh, raycaster, ray ) : null;\n\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\r\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\r\n\t\tif ( c1Result ) {\n\n\t\t\t// check if the point is within the second bounds\r\n\t\t\tconst point = c1Result.point[ xyzAxis ];\r\n\t\t\tconst isOutside = leftToRight ?\r\n\t\t\t\tpoint <= /* c2 boundingData */ float32Array[ c2 + splitAxis ] :\r\n\t\t\t\tpoint >= /* c2 boundingData */ float32Array[ c2 + splitAxis + 3 ];\n\n\t\t\tif ( isOutside ) {\n\n\t\t\t\treturn c1Result;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// either there was no intersection in the first node, or there could still be a closer\r\n\t\t// intersection in the second, so check the second node and then take the better of the two\r\n\t\tconst c2Intersection = intersectRayBuffer( c2, float32Array, ray, boxIntersection );\r\n\t\tconst c2Result = c2Intersection ? raycastFirstBuffer( c2, mesh, raycaster, ray ) : null;\n\n\t\tif ( c1Result && c2Result ) {\n\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\n\n\t\t} else {\n\n\t\t\treturn c1Result || c2Result || null;\n\n\t\t}\n\n\t}\n\n}\n\nexport const shapecastBuffer = ( function () {\n\n\tconst _triangle = new SeparatingAxisTriangle();\r\n\tconst _cachedBox1 = new Box3();\r\n\tconst _cachedBox2 = new Box3();\n\n\tfunction iterateOverTriangles(\r\n\t\toffset,\r\n\t\tcount,\r\n\t\tgeometry,\r\n\t\tintersectsTriangleFunc,\r\n\t\tcontained,\r\n\t\tdepth,\r\n\t\ttriangle\r\n\t) {\n\n\t\tconst index = geometry.index;\r\n\t\tconst pos = geometry.attributes.position;\r\n\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\n\n\t\t\tsetTriangle( triangle, i, index, pos );\r\n\t\t\ttriangle.needsUpdate = true;\n\n\t\t\tif ( intersectsTriangleFunc( triangle, i, i + 1, i + 2, contained, depth ) ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\treturn function shapecastBuffer( stride4Offset,\r\n\t\tmesh,\r\n\t\tintersectsBoundsFunc,\r\n\t\tintersectsTriangleFunc = null,\r\n\t\tnodeScoreFunc = null,\r\n\t\tdepth = 0,\r\n\t\ttriangle = _triangle,\r\n\t\tcachedBox1 = _cachedBox1,\r\n\t\tcachedBox2 = _cachedBox2\r\n\t) {\n\n\t\t// Define these inside the function so it has access to the local variables needed\r\n\t\t// when converting to the buffer equivalents\r\n\t\tfunction getLeftOffsetBuffer( stride4Offset ) {\n\n\t\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\t\twhile ( /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff ) ) {\n\n\t\t\t\t/* node */ stride4Offset = /* node left */ stride4Offset + 8, stride2Offset = stride4Offset * 2;\n\n\t\t\t}\n\n\t\t\treturn /* node offset */ uint32Array[ stride4Offset + 6 ];\n\n\t\t}\n\n\t\tfunction getRightEndOffsetBuffer( stride4Offset ) {\n\n\t\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\t\twhile ( /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff ) ) {\n\n\t\t\t\t/* node */ stride4Offset = /* node right */ uint32Array[ stride4Offset + 6 ], stride2Offset = stride4Offset * 2;\n\n\t\t\t}\n\n\t\t\treturn /* node offset */ uint32Array[ stride4Offset + 6 ] + /* node count */ uint16Array[ stride2Offset + 14 ];\n\n\t\t}\n\n\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\t\tif ( isLeaf && intersectsTriangleFunc ) {\n\n\t\t\tconst geometry = mesh.geometry;\r\n\t\t\tconst offset = /* node offset */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tconst count = /* node count */ uint16Array[ stride2Offset + 14 ];\r\n\t\t\treturn iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, false, depth, triangle );\n\n\t\t} else {\n\n\t\t\tconst left = /* node left */ stride4Offset + 8;\r\n\t\t\tconst right = /* node right */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tlet c1 = left;\r\n\t\t\tlet c2 = right;\n\n\t\t\tlet score1, score2;\r\n\t\t\tlet box1, box2;\r\n\t\t\tif ( nodeScoreFunc ) {\n\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tbox2 = cachedBox2;\n\n\t\t\t\tarrayToBoxBuffer( /* c1 boundingData */ c1, float32Array, box1 );\r\n\t\t\t\tarrayToBoxBuffer( /* c2 boundingData */ c2, float32Array, box2 );\n\n\t\t\t\tscore1 = nodeScoreFunc( box1 );\r\n\t\t\t\tscore2 = nodeScoreFunc( box2 );\n\n\t\t\t\tif ( score2 < score1 ) {\n\n\t\t\t\t\tc1 = right;\r\n\t\t\t\t\tc2 = left;\n\n\t\t\t\t\tconst temp = score1;\r\n\t\t\t\t\tscore1 = score2;\r\n\t\t\t\t\tscore2 = temp;\n\n\t\t\t\t\tbox1 = box2;\r\n\t\t\t\t\t// box2 is always set before use below\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Check box 1 intersection\r\n\t\t\tif ( ! box1 ) {\n\n\t\t\t\tbox1 = cachedBox1;\r\n\t\t\t\tarrayToBoxBuffer( /* c1 boundingData */ c1, float32Array, box1 );\n\n\t\t\t}\n\n\t\t\tconst isC1Leaf = ! /* c1 count */ ( uint16Array[ c1 + 15 ] !== 0xffff );\r\n\t\t\tconst c1Intersection = intersectsBoundsFunc( box1, isC1Leaf, score1, depth + 1 );\n\n\t\t\tlet c1StopTraversal;\r\n\t\t\tif ( c1Intersection === CONTAINED ) {\n\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffsetBuffer( c1 );\r\n\t\t\t\tconst end = getRightEndOffsetBuffer( c1 );\r\n\t\t\t\tconst count = end - offset;\n\n\t\t\t\tc1StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\n\n\t\t\t} else {\n\n\t\t\t\tc1StopTraversal =\r\n\t\t\t\t\tc1Intersection &&\r\n\t\t\t\t\tshapecastBuffer(\r\n\t\t\t\t\t\tc1,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( c1StopTraversal ) return true;\n\n\t\t\t// Check box 2 intersection\r\n\t\t\t// cached box2 will have been overwritten by previous traversal\r\n\t\t\tbox2 = cachedBox2;\r\n\t\t\tarrayToBoxBuffer( /* c2 boundingData */ c2, float32Array, box2 );\n\n\t\t\tconst isC2Leaf = ! /* c2 count */ ( uint16Array[ c2 + 15 ] !== 0xffff );\r\n\t\t\tconst c2Intersection = intersectsBoundsFunc( box2, isC2Leaf, score2, depth + 1 );\n\n\t\t\tlet c2StopTraversal;\r\n\t\t\tif ( c2Intersection === CONTAINED ) {\n\n\t\t\t\tconst geometry = mesh.geometry;\r\n\t\t\t\tconst offset = getLeftOffsetBuffer( c2 );\r\n\t\t\t\tconst end = getRightEndOffsetBuffer( c2 );\r\n\t\t\t\tconst count = end - offset;\n\n\t\t\t\tc2StopTraversal = iterateOverTriangles( offset, count, geometry, intersectsTriangleFunc, true, depth + 1, triangle );\n\n\t\t\t} else {\n\n\t\t\t\tc2StopTraversal =\r\n\t\t\t\t\tc2Intersection &&\r\n\t\t\t\t\tshapecastBuffer(\r\n\t\t\t\t\t\tc2,\r\n\t\t\t\t\t\tmesh,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsTriangleFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tdepth + 1,\r\n\t\t\t\t\t\ttriangle,\r\n\t\t\t\t\t\tcachedBox1,\r\n\t\t\t\t\t\tcachedBox2\r\n\t\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( c2StopTraversal ) return true;\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n} )();\n\nexport const intersectsGeometryBuffer = ( function () {\n\n\tconst triangle = new SeparatingAxisTriangle();\r\n\tconst triangle2 = new SeparatingAxisTriangle();\r\n\tconst cachedMesh = new Mesh();\r\n\tconst invertedMat = new Matrix4();\n\n\tconst obb = new OrientedBox();\r\n\tconst obb2 = new OrientedBox();\n\n\treturn function intersectsGeometryBuffer( stride4Offset, mesh, geometry, geometryToBvh, cachedObb = null ) {\n\n\t\tlet stride2Offset = stride4Offset * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\n\n\t\tif ( cachedObb === null ) {\n\n\t\t\tif ( ! geometry.boundingBox ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\tobb.set( geometry.boundingBox.min, geometry.boundingBox.max, geometryToBvh );\r\n\t\t\tobb.update();\r\n\t\t\tcachedObb = obb;\n\n\t\t}\n\n\t\tconst isLeaf = ! /* node count */ ( uint16Array[ stride2Offset + 15 ] !== 0xffff );\r\n\t\tif ( isLeaf ) {\n\n\t\t\tconst thisGeometry = mesh.geometry;\r\n\t\t\tconst thisIndex = thisGeometry.index;\r\n\t\t\tconst thisPos = thisGeometry.attributes.position;\n\n\t\t\tconst index = geometry.index;\r\n\t\t\tconst pos = geometry.attributes.position;\n\n\t\t\tconst offset = /* node offset */ uint32Array[ stride4Offset + 6 ];\r\n\t\t\tconst count = /* node count */ uint16Array[ stride2Offset + 14 ];\n\n\t\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\r\n\t\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\r\n\t\t\t// here.\r\n\t\t\tinvertedMat.copy( geometryToBvh ).invert();\n\n\t\t\tif ( geometry.boundsTree ) {\n\n\t\t\t\tarrayToBoxBuffer( /* node boundingData */ stride4Offset, float32Array, obb2 );\r\n\t\t\t\tobb2.matrix.copy( invertedMat );\r\n\t\t\t\tobb2.update();\n\n\t\t\t\tcachedMesh.geometry = geometry;\r\n\t\t\t\tconst res = geometry.boundsTree.shapecast( cachedMesh, box => obb2.intersectsBox( box ), function ( tri ) {\n\n\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri.update();\n\n\t\t\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\n\n\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\t\tsetTriangle( triangle2, i, thisIndex, thisPos );\r\n\t\t\t\t\t\ttriangle2.update();\r\n\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t} );\r\n\t\t\t\tcachedMesh.geometry = null;\n\n\t\t\t\treturn res;\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = offset * 3, l = ( count + offset * 3 ); i < l; i += 3 ) {\n\n\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\tsetTriangle( triangle, i, thisIndex, thisPos );\r\n\t\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.update();\n\n\t\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\n\n\t\t\t\t\t\tsetTriangle( triangle2, i2, index, pos );\r\n\t\t\t\t\t\ttriangle2.update();\n\n\t\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst left = /* node left */ stride4Offset + 8;\r\n\t\t\tconst right = /* node right */ uint32Array[ stride4Offset + 6 ];\n\n\t\t\tarrayToBoxBuffer( /* left boundingData */ left, float32Array, boundingBox );\r\n\t\t\tconst leftIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometryBuffer( left, mesh, geometry, geometryToBvh, cachedObb );\n\n\t\t\tif ( leftIntersection ) return true;\n\n\t\t\tarrayToBoxBuffer( /* right boundingData */ right, float32Array, boundingBox );\r\n\t\t\tconst rightIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometryBuffer( right, mesh, geometry, geometryToBvh, cachedObb );\n\n\t\t\tif ( rightIntersection ) return true;\n\n\t\t\treturn false;\n\n\t\t}\n\n\t};\n\n} )();\n\nfunction intersectRayBuffer( stride4Offset, array, ray, target ) {\n\n\tarrayToBoxBuffer( stride4Offset, array, boundingBox );\n\treturn ray.intersectBox( boundingBox, target );\n\n}\n\nconst bufferStack = [];\nlet _prevBuffer;\nlet _float32Array;\nlet _uint16Array;\nlet _uint32Array;\nexport function setBuffer( buffer ) {\n\n\tif ( _prevBuffer ) {\n\n\t\tbufferStack.push( _prevBuffer );\n\n\t}\n\n\t_prevBuffer = buffer;\n\t_float32Array = new Float32Array( buffer );\n\t_uint16Array = new Uint16Array( buffer );\n\t_uint32Array = new Uint32Array( buffer );\n\n}\n\nexport function clearBuffer() {\n\n\t_prevBuffer = null;\n\t_float32Array = null;\n\t_uint16Array = null;\n\t_uint32Array = null;\n\n\tif ( bufferStack.length ) {\n\n\t\tsetBuffer( bufferStack.pop() );\n\n\t}\n\n}\n\nfunction arrayToBoxBuffer( stride4Offset, array, target ) {\n\n\ttarget.min.x = array[ stride4Offset ];\n\ttarget.min.y = array[ stride4Offset + 1 ];\n\ttarget.min.z = array[ stride4Offset + 2 ];\n\n\ttarget.max.x = array[ stride4Offset + 3 ];\n\ttarget.max.y = array[ stride4Offset + 4 ];\n\ttarget.max.z = array[ stride4Offset + 5 ];\n\n}\n","import { Vector3, BufferAttribute } from 'three';\r\nimport { CENTER } from './Constants.js';\r\nimport { buildTree } from './buildFunctions.js';\r\nimport { OrientedBox } from './Utils/OrientedBox.js';\r\nimport { SeparatingAxisTriangle } from './Utils/SeparatingAxisTriangle.js';\r\nimport { setTriangle } from './Utils/TriangleUtils.js';\r\nimport {\r\n\traycast,\r\n\traycastFirst,\r\n\tshapecast,\r\n\tintersectsGeometry,\r\n} from './castFunctions.js';\r\n\r\nimport {\r\n\traycastBuffer,\r\n\traycastFirstBuffer,\r\n\tshapecastBuffer,\r\n\tintersectsGeometryBuffer,\r\n\tsetBuffer,\r\n\tclearBuffer,\r\n} from './castFunctionsBuffer.js';\r\n\r\n// boundingData  \t\t\t\t: 6 float32\r\n// right / offset \t\t\t\t: 1 uint32\r\n// splitAxis / isLeaf + count \t: 1 uint32 / 2 uint16\r\nconst BYTES_PER_NODE = 6 * 4 + 4 + 4;\r\nconst IS_LEAFNODE_FLAG = 0xFFFF;\r\nconst SKIP_GENERATION = Symbol( 'skip tree generation' );\r\n\r\nconst obb = new OrientedBox();\r\nconst temp = new Vector3();\r\nconst tri2 = new SeparatingAxisTriangle();\r\nconst temp1 = new Vector3();\r\nconst temp2 = new Vector3();\r\n\r\nexport default class MeshBVH {\r\n\r\n\tstatic serialize( bvh, geometry, copyIndexBuffer = true ) {\r\n\r\n\t\tfunction finishTree( node ) {\r\n\r\n\t\t\tif ( node.continueGeneration ) {\r\n\r\n\t\t\t\tnode.continueGeneration();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! node.count ) {\r\n\r\n\t\t\t\tfinishTree( node.left );\r\n\t\t\t\tfinishTree( node.right );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction countNodes( node ) {\r\n\r\n\t\t\tif ( node.count ) {\r\n\r\n\t\t\t\treturn 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn 1 + countNodes( node.left ) + countNodes( node.right );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction populateBuffer( byteOffset, node ) {\r\n\r\n\t\t\tconst stride4Offset = byteOffset / 4;\r\n\t\t\tconst stride2Offset = byteOffset / 2;\r\n\t\t\tconst isLeaf = ! ! node.count;\r\n\t\t\tconst boundingData = node.boundingData;\r\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tfloat32Array[ stride4Offset + i ] = boundingData[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\tconst offset = node.offset;\r\n\t\t\t\tconst count = node.count;\r\n\t\t\t\tuint32Array[ stride4Offset + 6 ] = offset;\r\n\t\t\t\tuint16Array[ stride2Offset + 14 ] = count;\r\n\t\t\t\tuint16Array[ stride2Offset + 15 ] = IS_LEAFNODE_FLAG;\r\n\t\t\t\treturn byteOffset + BYTES_PER_NODE;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst left = node.left;\r\n\t\t\t\tconst right = node.right;\r\n\t\t\t\tconst splitAxis = node.splitAxis;\r\n\r\n\t\t\t\tlet nextUnusedPointer;\r\n\t\t\t\tnextUnusedPointer = populateBuffer( byteOffset + BYTES_PER_NODE, left );\r\n\r\n\t\t\t\tuint32Array[ stride4Offset + 6 ] = nextUnusedPointer / 4;\r\n\t\t\t\tnextUnusedPointer = populateBuffer( nextUnusedPointer, right );\r\n\r\n\t\t\t\tuint32Array[ stride4Offset + 7 ] = splitAxis;\r\n\t\t\t\treturn nextUnusedPointer;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet float32Array;\r\n\t\tlet uint32Array;\r\n\t\tlet uint16Array;\r\n\r\n\t\tconst roots = bvh._roots;\r\n\t\tlet rootData;\r\n\r\n\t\tif ( bvh._isPacked ) {\r\n\r\n\t\t\trootData = roots;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trootData = [];\r\n\t\t\tfor ( let i = 0; i < roots.length; i ++ ) {\r\n\r\n\t\t\t\tconst root = roots[ i ];\r\n\t\t\t\tfinishTree( root );\r\n\t\t\t\tlet nodeCount = countNodes( root );\r\n\r\n\t\t\t\tconst buffer = new ArrayBuffer( BYTES_PER_NODE * nodeCount );\r\n\t\t\t\tfloat32Array = new Float32Array( buffer );\r\n\t\t\t\tuint32Array = new Uint32Array( buffer );\r\n\t\t\t\tuint16Array = new Uint16Array( buffer );\r\n\t\t\t\tpopulateBuffer( 0, root );\r\n\t\t\t\trootData.push( buffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst indexAttribute = geometry.getIndex();\r\n\t\tconst result = {\r\n\t\t\troots: rootData,\r\n\t\t\tindex: copyIndexBuffer ? indexAttribute.array.slice() : indexAttribute.array,\r\n\t\t};\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tstatic deserialize( data, geometry, setIndex = true ) {\r\n\r\n\t\tconst { index, roots } = data;\r\n\t\tconst bvh = new MeshBVH( geometry, { [ SKIP_GENERATION ]: true } );\r\n\t\tbvh._roots = roots;\r\n\t\tbvh._isPacked = true;\r\n\r\n\t\tif ( setIndex ) {\r\n\r\n\t\t\tconst indexAttribute = geometry.getIndex();\r\n\t\t\tif ( indexAttribute === null ) {\r\n\r\n\t\t\t\tconst newIndex = new BufferAttribute( data.index, 1, false );\r\n\t\t\t\tgeometry.setIndex( newIndex );\r\n\r\n\t\t\t} else if ( indexAttribute.array !== index ) {\r\n\r\n\t\t\t\tindexAttribute.array.set( index );\r\n\t\t\t\tindexAttribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn bvh;\r\n\r\n\t}\r\n\r\n\tconstructor( geo, options = {} ) {\r\n\r\n\t\tif ( ! geo.isBufferGeometry ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: Only BufferGeometries are supported.' );\r\n\r\n\t\t} else if ( geo.attributes.position.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: InterleavedBufferAttribute is not supported for the position attribute.' );\r\n\r\n\t\t} else if ( geo.index && geo.index.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.' );\r\n\r\n\t\t}\r\n\r\n\t\t// default options\r\n\t\toptions = Object.assign( {\r\n\r\n\t\t\tstrategy: CENTER,\r\n\t\t\tmaxDepth: 40,\r\n\t\t\tmaxLeafTris: 10,\r\n\t\t\tverbose: true,\r\n\t\t\tlazyGeneration: true,\r\n\r\n\t\t\t// undocumented options\r\n\r\n\t\t\t// whether to the pack the data as a buffer or not. The data\r\n\t\t\t// will not be packed if lazyGeneration is true.\r\n\t\t\tpackData: true,\r\n\r\n\t\t\t// Whether to skip generating the tree. Used for deserialization.\r\n\t\t\t[ SKIP_GENERATION ]: false\r\n\r\n\t\t}, options );\r\n\t\toptions.strategy = Math.max( 0, Math.min( 2, options.strategy ) );\r\n\r\n\t\tthis._isPacked = false;\r\n\t\tthis._roots = null;\r\n\t\tif ( ! options[ SKIP_GENERATION ] ) {\r\n\r\n\t\t\tthis._roots = buildTree( geo, options );\r\n\t\t\tif ( ! options.lazyGeneration && options.packData ) {\r\n\r\n\t\t\t\tthis._roots = MeshBVH.serialize( this, geo, false ).roots;\r\n\t\t\t\tthis._isPacked = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\ttraverse( callback, rootIndex = 0 ) {\r\n\r\n\t\tif ( this._isPacked ) {\r\n\r\n\t\t\tconst buffer = this._roots[ rootIndex ];\r\n\t\t\tconst uint32Array = new Uint32Array( buffer );\r\n\t\t\tconst uint16Array = new Uint16Array( buffer );\r\n\t\t\t_traverseBuffer( 0 );\r\n\r\n\t\t\tfunction _traverseBuffer( stride4Offset, depth = 0 ) {\r\n\r\n\t\t\t\tconst stride2Offset = stride4Offset * 2;\r\n\t\t\t\tconst isLeaf = uint16Array[ stride2Offset + 15 ];\r\n\t\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\t\tconst offset = uint32Array[ stride4Offset + 6 ];\r\n\t\t\t\t\tconst count = uint16Array[ stride2Offset + 14 ];\r\n\t\t\t\t\tcallback( depth, isLeaf, new Float32Array( buffer, stride4Offset * 4, 6 ), offset, count );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst left = stride4Offset + BYTES_PER_NODE / 4;\r\n\t\t\t\t\tconst right = uint32Array[ stride4Offset + 6 ];\r\n\t\t\t\t\tconst splitAxis = uint32Array[ stride4Offset + 7 ];\r\n\t\t\t\t\tconst stopTraversal = callback( depth, isLeaf, new Float32Array( buffer, stride4Offset * 4, 6 ), splitAxis, false );\r\n\r\n\t\t\t\t\tif ( ! stopTraversal ) {\r\n\r\n\t\t\t\t\t\t_traverseBuffer( left, depth + 1 );\r\n\t\t\t\t\t\t_traverseBuffer( right, depth + 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_traverseNode( this._roots[ rootIndex ] );\r\n\r\n\t\t\tfunction _traverseNode( node, depth = 0 ) {\r\n\r\n\t\t\t\tconst isLeaf = ! ! node.count;\r\n\t\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\t\tcallback( depth, isLeaf, node.boundingData, node.offset, node.count );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconst stopTraversal = callback( depth, isLeaf, node.boundingData, node.splitAxis, ! ! node.continueGeneration );\r\n\r\n\t\t\t\t\tif ( ! stopTraversal ) {\r\n\r\n\t\t\t\t\t\tif ( node.left ) _traverseNode( node.left, depth + 1 );\r\n\t\t\t\t\t\tif ( node.right ) _traverseNode( node.right, depth + 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Core Cast Functions */\r\n\traycast( mesh, raycaster, ray, intersects ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\traycastBuffer( 0, mesh, raycaster, ray, intersects );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\traycast( root, mesh, raycaster, ray, intersects );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t}\r\n\r\n\traycastFirst( mesh, raycaster, ray ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tlet closestResult = null;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tlet result;\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\tresult = raycastFirstBuffer( 0, mesh, raycaster, ray );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult = raycastFirst( root, mesh, raycaster, ray );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( result != null && ( closestResult == null || result.distance < closestResult.distance ) ) {\r\n\r\n\t\t\t\tclosestResult = result;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t\treturn closestResult;\r\n\r\n\t}\r\n\r\n\tintersectsGeometry( mesh, geometry, geomToMesh ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tlet result = false;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\tresult = intersectsGeometryBuffer( 0, mesh, geometry, geomToMesh );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult = intersectsGeometry( root, mesh, geometry, geomToMesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( result ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tshapecast( mesh, intersectsBoundsFunc, intersectsTriangleFunc = null, orderNodesFunc = null ) {\r\n\r\n\t\tconst isPacked = this._isPacked;\r\n\t\tlet result = false;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tif ( isPacked ) {\r\n\r\n\t\t\t\tsetBuffer( root );\r\n\t\t\t\tresult = shapecastBuffer( 0, mesh, intersectsBoundsFunc, intersectsTriangleFunc, orderNodesFunc );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult = shapecast( root, mesh, intersectsBoundsFunc, intersectsTriangleFunc, orderNodesFunc );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( result ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisPacked && clearBuffer();\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/* Derived Cast Functions */\r\n\tintersectsBox( mesh, box, boxToMesh ) {\r\n\r\n\t\tobb.set( box.min, box.max, boxToMesh );\r\n\t\tobb.update();\r\n\r\n\t\treturn this.shapecast(\r\n\t\t\tmesh,\r\n\t\t\tbox => obb.intersectsBox( box ),\r\n\t\t\ttri => obb.intersectsTriangle( tri )\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tintersectsSphere( mesh, sphere ) {\r\n\r\n\t\treturn this.shapecast(\r\n\t\t\tmesh,\r\n\t\t\tbox => sphere.intersectsBox( box ),\r\n\t\t\ttri => tri.intersectsSphere( sphere )\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tclosestPointToGeometry( mesh, geom, geometryToBvh, target1 = null, target2 = null, minThreshold = 0, maxThreshold = Infinity ) {\r\n\r\n\t\tif ( ! geom.boundingBox ) {\r\n\r\n\t\t\tgeom.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tobb.set( geom.boundingBox.min, geom.boundingBox.max, geometryToBvh );\r\n\t\tobb.update();\r\n\r\n\t\tconst pos = geom.attributes.position;\r\n\t\tconst index = geom.index;\r\n\r\n\t\tlet tempTarget1 = null;\r\n\t\tlet tempTarget2 = null;\r\n\t\tif ( target1 ) {\r\n\r\n\t\t\ttempTarget1 = temp1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( target2 ) {\r\n\r\n\t\t\ttempTarget2 = temp2;\r\n\r\n\t\t}\r\n\r\n\t\tlet closestDistance = Infinity;\r\n\t\tthis.shapecast(\r\n\t\t\tmesh,\r\n\t\t\t( box, isLeaf, score ) => score < closestDistance && score < maxThreshold,\r\n\t\t\ttri => {\r\n\r\n\t\t\t\tif ( tri.needsUpdate ) {\r\n\r\n\t\t\t\t\ttri.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst sphere1 = tri.sphere;\r\n\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\r\n\r\n\t\t\t\t\tsetTriangle( tri2, i2, index, pos );\r\n\t\t\t\t\ttri2.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri2.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri2.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\ttri2.sphere.setFromPoints( tri2.points );\r\n\r\n\t\t\t\t\tconst sphere2 = tri2.sphere;\r\n\t\t\t\t\tconst sphereDist = sphere2.center.distanceTo( sphere1.center ) - sphere2.radius - sphere1.radius;\r\n\t\t\t\t\tif ( sphereDist > closestDistance ) {\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttri2.update();\r\n\r\n\t\t\t\t\tconst dist = tri.distanceToTriangle( tri2, tempTarget1, tempTarget2 );\r\n\t\t\t\t\tif ( dist < closestDistance ) {\r\n\r\n\t\t\t\t\t\tif ( target1 ) {\r\n\r\n\t\t\t\t\t\t\ttarget1.copy( tempTarget1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( target2 ) {\r\n\r\n\t\t\t\t\t\t\ttarget2.copy( tempTarget2 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tclosestDistance = dist;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\r\n\t\t\t\t\tif ( dist < minThreshold ) {\r\n\r\n\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t},\r\n\t\t\tbox => obb.distanceToBox( box, Math.min( closestDistance, maxThreshold ) )\r\n\r\n\t\t);\r\n\r\n\t\treturn closestDistance;\r\n\r\n\t}\r\n\r\n\tdistanceToGeometry( mesh, geom, matrix, minThreshold, maxThreshold ) {\r\n\r\n\t\treturn this.closestPointToGeometry( mesh, geom, matrix, null, null, minThreshold, maxThreshold );\r\n\r\n\t}\r\n\r\n\tclosestPointToPoint( mesh, point, target, minThreshold = 0, maxThreshold = Infinity ) {\r\n\r\n\t\t// early out if under minThreshold\r\n\t\t// skip checking if over maxThreshold\r\n\t\t// set minThreshold = maxThreshold to quickly check if a point is within a threshold\r\n\t\t// returns Infinity if no value found\r\n\t\tlet closestDistance = Infinity;\r\n\t\tthis.shapecast(\r\n\r\n\t\t\tmesh,\r\n\t\t\t( box, isLeaf, score ) => score < closestDistance && score < maxThreshold,\r\n\t\t\ttri => {\r\n\r\n\t\t\t\ttri.closestPointToPoint( point, temp );\r\n\t\t\t\tconst dist = point.distanceTo( temp );\r\n\t\t\t\tif ( dist < closestDistance ) {\r\n\r\n\t\t\t\t\tif ( target ) {\r\n\r\n\t\t\t\t\t\ttarget.copy( temp );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tclosestDistance = dist;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( dist < minThreshold ) {\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tbox => box.distanceToPoint( point )\r\n\r\n\t\t);\r\n\r\n\t\treturn closestDistance;\r\n\r\n\t}\r\n\r\n\tdistanceToPoint( mesh, point, minThreshold, maxThreshold ) {\r\n\r\n\t\treturn this.closestPointToPoint( mesh, point, null, minThreshold, maxThreshold );\r\n\r\n\t}\r\n\r\n}\r\n","import { LineBasicMaterial, Box3Helper, Box3, Group, LineSegments } from 'three';\r\nimport { arrayToBox } from './Utils/ArrayBoxUtilities.js';\r\n\r\nconst wiremat = new LineBasicMaterial( { color: 0x00FF88, transparent: true, opacity: 0.3 } );\r\nconst boxGeom = new Box3Helper().geometry;\r\nlet boundingBox = new Box3();\r\n\r\nclass MeshBVHRootVisualizer extends Group {\r\n\r\n\tconstructor( mesh, depth = 10, group = 0 ) {\r\n\r\n\t\tsuper( 'MeshBVHRootVisualizer' );\r\n\r\n\t\tthis.depth = depth;\r\n\t\tthis._oldDepth = - 1;\r\n\t\tthis.mesh = mesh;\r\n\t\tthis._boundsTree = null;\r\n\t\tthis._group = group;\r\n\r\n\t\tthis.update();\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tthis._oldDepth = this.depth;\r\n\t\tthis._boundsTree = this.mesh.geometry.boundsTree;\r\n\r\n\t\tlet requiredChildren = 0;\r\n\t\tif ( this._boundsTree ) {\r\n\r\n\t\t\tthis._boundsTree.traverse( ( depth, isLeaf, boundingData, offsetOrSplit, countOrIsUnfinished ) => {\r\n\r\n\t\t\t\tlet isTerminal = isLeaf || countOrIsUnfinished;\r\n\r\n\t\t\t\t// Stop traversal\r\n\t\t\t\tif ( depth >= this.depth ) {\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( depth === this.depth - 1 || isTerminal ) {\r\n\r\n\t\t\t\t\tlet m = requiredChildren < this.children.length ? this.children[ requiredChildren ] : null;\r\n\t\t\t\t\tif ( ! m ) {\r\n\r\n\t\t\t\t\t\tm = new LineSegments( boxGeom, wiremat );\r\n\t\t\t\t\t\tm.raycast = () => [];\r\n\t\t\t\t\t\tthis.add( m );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trequiredChildren ++;\r\n\t\t\t\t\tarrayToBox( boundingData, boundingBox );\r\n\t\t\t\t\tboundingBox.getCenter( m.position );\r\n\t\t\t\t\tm.scale.subVectors( boundingBox.max, boundingBox.min ).multiplyScalar( 0.5 );\r\n\r\n\t\t\t\t\tif ( m.scale.x === 0 ) m.scale.x = Number.EPSILON;\r\n\t\t\t\t\tif ( m.scale.y === 0 ) m.scale.y = Number.EPSILON;\r\n\t\t\t\t\tif ( m.scale.z === 0 ) m.scale.z = Number.EPSILON;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\twhile ( this.children.length > requiredChildren ) this.remove( this.children.pop() );\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass MeshBVHVisualizer extends Group {\r\n\r\n\tconstructor( mesh, depth = 10 ) {\r\n\r\n\t\tsuper( 'MeshBVHVisualizer' );\r\n\r\n\t\tthis.depth = depth;\r\n\t\tthis.mesh = mesh;\r\n\t\tthis._roots = [];\r\n\r\n\t\tthis.update();\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tconst bvh = this.mesh.geometry.boundsTree;\r\n\t\tconst totalRoots = bvh ? bvh._roots.length : 0;\r\n\t\twhile ( this._roots.length > totalRoots ) {\r\n\r\n\t\t\tthis._roots.pop();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < totalRoots; i ++ ) {\r\n\r\n\t\t\tif ( i >= this._roots.length ) {\r\n\r\n\t\t\t\tconst root = new MeshBVHRootVisualizer( this.mesh, this.depth, i );\r\n\t\t\t\tthis.add( root );\r\n\t\t\t\tthis._roots.push( root );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlet root = this._roots[ i ];\r\n\t\t\t\troot.depth = this.depth;\r\n\t\t\t\troot.update();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdateMatrixWorld( ...args ) {\r\n\r\n\t\tthis.position.copy( this.mesh.position );\r\n\t\tthis.rotation.copy( this.mesh.rotation );\r\n\t\tthis.scale.copy( this.mesh.scale );\r\n\r\n\t\tsuper.updateMatrixWorld( ...args );\r\n\r\n\t}\r\n\r\n\tcopy( source ) {\r\n\r\n\t\tthis.depth = source.depth;\r\n\t\tthis.mesh = source.mesh;\r\n\r\n\t}\r\n\r\n\tclone() {\r\n\r\n\t\treturn new MeshBVHVisualizer( this.mesh, this.depth );\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport default MeshBVHVisualizer;\r\n","import { Box3, Vector3 } from 'three';\r\nimport { arrayToBox } from './Utils/ArrayBoxUtilities.js';\r\nconst box1 = new Box3();\r\nconst box2 = new Box3();\r\nconst vec = new Vector3();\r\n\r\nexport class MeshBVHDebug {\r\n\r\n\tconstructor( bvh, geometry ) {\r\n\r\n\t\tthis.bvh = bvh;\r\n\t\tthis.geometry = geometry;\r\n\r\n\t}\r\n\r\n\t// Returns a simple, human readable object that represents the BVH.\r\n\tgetJSONStructure() {\r\n\r\n\t\tconst { bvh } = this;\r\n\t\tconst depthStack = [];\r\n\r\n\t\tbvh.traverse( ( depth, isLeaf, boundingData, offset, count ) => {\r\n\r\n\t\t\tconst info = {\r\n\t\t\t\tbounds: arrayToBox( boundingData, new Box3() ),\r\n\t\t\t};\r\n\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\tinfo.count = count;\r\n\t\t\t\tinfo.offset = offset;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tinfo.left = null;\r\n\t\t\t\tinfo.right = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdepthStack[ depth ] = info;\r\n\r\n\t\t\t// traversal hits the left then right node\r\n\t\t\tconst parent = depthStack[ depth - 1 ];\r\n\t\t\tif ( parent ) {\r\n\r\n\t\t\t\tif ( parent.left === null ) {\r\n\r\n\t\t\t\t\tparent.left = info;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tparent.right = info;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn depthStack[ 0 ];\r\n\r\n\t}\r\n\r\n\tvalidateBounds() {\r\n\r\n\t\tconst { bvh, geometry } = this;\r\n\t\tconst depthStack = [];\r\n\t\tconst index = geometry.index;\r\n\t\tconst position = geometry.getAttribute( 'position' );\r\n\t\tlet passes = true;\r\n\r\n\t\tbvh.traverse( ( depth, isLeaf, boundingData, offset, count ) => {\r\n\r\n\t\t\tconst info = {\r\n\t\t\t\tdepth,\r\n\t\t\t\tisLeaf,\r\n\t\t\t\tboundingData,\r\n\t\t\t\toffset,\r\n\t\t\t\tcount,\r\n\t\t\t};\r\n\t\t\tdepthStack[ depth ] = info;\r\n\r\n\t\t\tarrayToBox( boundingData, box1 );\r\n\t\t\tconst parent = depthStack[ depth - 1 ];\r\n\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\t// check triangles\r\n\t\t\t\tfor ( let i = offset * 3, l = ( offset + count ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\tconst i0 = index.getX( i );\r\n\t\t\t\t\tconst i1 = index.getX( i + 1 );\r\n\t\t\t\t\tconst i2 = index.getX( i + 2 );\r\n\r\n\t\t\t\t\tlet isContained;\r\n\r\n\t\t\t\t\tvec.fromBufferAttribute( position, i0 );\r\n\t\t\t\t\tisContained = box1.containsPoint( vec );\r\n\r\n\t\t\t\t\tvec.fromBufferAttribute( position, i1 );\r\n\t\t\t\t\tisContained = isContained && box1.containsPoint( vec );\r\n\r\n\t\t\t\t\tvec.fromBufferAttribute( position, i2 );\r\n\t\t\t\t\tisContained = isContained && box1.containsPoint( vec );\r\n\r\n\t\t\t\t\tconsole.assert( isContained, 'Leaf bounds does not fully contain triangle.' );\r\n\t\t\t\t\tpasses = passes && isContained;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( parent ) {\r\n\r\n\t\t\t\t// check if my bounds fit in my parents\r\n\t\t\t\tarrayToBox( boundingData, box2 );\r\n\r\n\t\t\t\tconst isContained = box2.containsBox( box1 );\r\n\t\t\t\tconsole.assert( isContained, 'Parent bounds does not fully contain child.' );\r\n\t\t\t\tpasses = passes && isContained;\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn passes;\r\n\r\n\t}\r\n\r\n}\r\n","import { Ray, Matrix4, Mesh } from 'three';\r\nimport MeshBVH from './MeshBVH.js';\r\nimport Visualizer from './MeshBVHVisualizer.js';\r\nimport { CENTER, AVERAGE, SAH, NOT_INTERSECTED, INTERSECTED, CONTAINED } from './Constants.js';\r\nimport { getBVHExtremes, estimateMemoryInBytes } from './Utils/Debug.js';\r\nimport { MeshBVHDebug } from './MeshBVHDebug.js';\r\n\r\nconst ray = new Ray();\r\nconst tmpInverseMatrix = new Matrix4();\r\nconst origMeshRaycastFunc = Mesh.prototype.raycast;\r\n\r\nfunction acceleratedRaycast( raycaster, intersects ) {\r\n\r\n\tif ( this.geometry.boundsTree ) {\r\n\r\n\t\tif ( this.material === undefined ) return;\r\n\r\n\t\ttmpInverseMatrix.copy( this.matrixWorld ).invert();\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( tmpInverseMatrix );\r\n\r\n\t\tif ( raycaster.firstHitOnly === true ) {\r\n\r\n\t\t\tconst res = this.geometry.boundsTree.raycastFirst( this, raycaster, ray );\r\n\t\t\tif ( res ) intersects.push( res );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.geometry.boundsTree.raycast( this, raycaster, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\torigMeshRaycastFunc.call( this, raycaster, intersects );\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction computeBoundsTree( options ) {\r\n\r\n\tthis.boundsTree = new MeshBVH( this, options );\r\n\treturn this.boundsTree;\r\n\r\n}\r\n\r\nfunction disposeBoundsTree() {\r\n\r\n\tthis.boundsTree = null;\r\n\r\n}\r\n\r\nexport {\r\n\tMeshBVH, Visualizer, Visualizer as MeshBVHVisualizer, MeshBVHDebug,\r\n\tacceleratedRaycast, computeBoundsTree, disposeBoundsTree,\r\n\tCENTER, AVERAGE, SAH, NOT_INTERSECTED, INTERSECTED, CONTAINED,\r\n\testimateMemoryInBytes, getBVHExtremes\r\n};\r\n","// NOTE when changing be sure to check hardcoded mask values in hub.html\nexport const Layers = {\n  // These 3 layers are hardcoded in THREE\n  CAMERA_LAYER_DEFAULT: 0,\n  CAMERA_LAYER_XR_LEFT_EYE: 1,\n  CAMERA_LAYER_XR_RIGHT_EYE: 2,\n\n  CAMERA_LAYER_REFLECTION: 3,\n  CAMERA_LAYER_INSPECT: 4,\n  CAMERA_LAYER_VIDEO_TEXTURE_TARGET: 5,\n\n  CAMERA_LAYER_THIRD_PERSON_ONLY: 6,\n  CAMERA_LAYER_FIRST_PERSON_ONLY: 7,\n  CAMERA_LAYER_UI: 8\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    mask: { default: Layers.CAMERA_LAYER_DEFAULT },\n    recursive: { default: false }\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"object3dset\", this.update);\n  },\n  update() {\n    const obj = this.el.object3D;\n    if (this.data.recursive) {\n      obj.traverse(o => (o.layers.mask = this.data.mask));\n    } else {\n      obj.layers.mask = this.data.mask;\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"object3dset\", this.update);\n  }\n});\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  src.updateMatrices();\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  if (mtrl.aoMap) mtrl.aoMap.dispose();\n  if (mtrl.metalnessMap) mtrl.metalnessMap.dispose();\n  if (mtrl.roughnessMap) mtrl.roughnessMap.dispose();\n  if (mtrl.emissiveMap) mtrl.emissiveMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    if (Array.isArray(node.material)) {\n      node.material.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n\nconst IDENTITY = new THREE.Matrix4().identity();\nconst tempMatrix4 = new THREE.Matrix4();\nconst EPSILON = 0.00000000001;\nexport function setMatrixWorld(object3D, m) {\n  if (!object3D.matrixIsModified) {\n    object3D.applyMatrix4(IDENTITY); // hack around our matrix optimizations\n  }\n  tempMatrix4.copy(object3D.matrixWorld);\n  object3D.matrixWorld.copy(m);\n  if (object3D.parent) {\n    object3D.parent.updateMatrices();\n    object3D.matrix\n      .copy(object3D.parent.matrixWorld)\n      .invert()\n      .multiply(m);\n  } else {\n    object3D.matrix.copy(m);\n  }\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\n  if (tempMatrix4.near(object3D.matrixWorld, EPSILON)) {\n    object3D.matrixWorld.copy(tempMatrix4);\n  } else {\n    object3D.childrenNeedMatrixWorldUpdate = true;\n  }\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\n// Supports the following PropertyBinding path formats:\n// uuid.propertyName\n// uuid.propertyName[propertyIndex]\n// uuid.objectName[objectIndex].propertyName[propertyIndex]\n// Does not support property bindings that use object3D names or parent nodes\nfunction cloneKeyframeTrack(sourceKeyframeTrack, cloneUUIDLookup) {\n  const { nodeName: uuid, objectName, objectIndex, propertyName, propertyIndex } = THREE.PropertyBinding.parseTrackName(\n    sourceKeyframeTrack.name\n  );\n\n  let path = \"\";\n\n  if (uuid !== undefined) {\n    const clonedUUID = cloneUUIDLookup.get(uuid);\n\n    if (clonedUUID === undefined) {\n      console.warn(`Could not find KeyframeTrack target with uuid: \"${uuid}\"`);\n    }\n\n    path += clonedUUID;\n  }\n\n  if (objectName !== undefined) {\n    path += \".\" + objectName;\n  }\n\n  if (objectIndex !== undefined) {\n    path += \"[\" + objectIndex + \"]\";\n  }\n\n  if (propertyName !== undefined) {\n    path += \".\" + propertyName;\n  }\n\n  if (propertyIndex !== undefined) {\n    path += \"[\" + propertyIndex + \"]\";\n  }\n\n  const clonedKeyframeTrack = sourceKeyframeTrack.clone();\n  clonedKeyframeTrack.name = path;\n\n  return clonedKeyframeTrack;\n}\n\nfunction cloneAnimationClip(sourceAnimationClip, cloneUUIDLookup) {\n  const clonedTracks = sourceAnimationClip.tracks.map(keyframeTrack =>\n    cloneKeyframeTrack(keyframeTrack, cloneUUIDLookup)\n  );\n  return new THREE.AnimationClip(sourceAnimationClip.name, sourceAnimationClip.duration, clonedTracks);\n}\n\nexport function cloneObject3D(source, preserveUUIDs) {\n  const cloneLookup = new Map();\n  const cloneUUIDLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, (sourceNode, clonedNode) => {\n    cloneLookup.set(sourceNode, clonedNode);\n  });\n\n  source.traverse(sourceNode => {\n    const clonedNode = cloneLookup.get(sourceNode);\n\n    if (preserveUUIDs) {\n      clonedNode.uuid = sourceNode.uuid;\n    }\n\n    cloneUUIDLookup.set(sourceNode.uuid, clonedNode.uuid);\n  });\n\n  source.traverse(sourceNode => {\n    const clonedNode = cloneLookup.get(sourceNode);\n\n    if (!clonedNode) {\n      return;\n    }\n\n    if (sourceNode.animations) {\n      clonedNode.animations = sourceNode.animations.map(animationClip =>\n        cloneAnimationClip(animationClip, cloneUUIDLookup)\n      );\n    }\n\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n\n    if ((clonedNode.isDirectionalLight || clonedNode.isSpotLight) && sourceNode.target) {\n      clonedNode.target = cloneLookup.get(sourceNode.target);\n    }\n\n    if (!sourceNode.isSkinnedMesh) return;\n\n    const sourceBones = sourceNode.skeleton.bones;\n\n    clonedNode.skeleton = sourceNode.skeleton.clone();\n\n    clonedNode.skeleton.bones = sourceBones.map(sourceBone => {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedNode.bind(clonedNode.skeleton, sourceNode.bindMatrix);\n  });\n\n  return clone;\n}\n\nexport function findNode(root, pred) {\n  let nodes = [root];\n  while (nodes.length) {\n    const node = nodes.shift();\n    if (pred(node)) return node;\n    if (node.children) nodes = nodes.concat(node.children);\n  }\n  return null;\n}\n\nexport const interpolateAffine = (function() {\n  const mat4 = new THREE.Matrix4();\n  const end = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  const start = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  const interpolated = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  return function(startMat4, endMat4, progress, outMat4) {\n    start.quaternion.setFromRotationMatrix(mat4.extractRotation(startMat4));\n    end.quaternion.setFromRotationMatrix(mat4.extractRotation(endMat4));\n    interpolated.quaternion.slerpQuaternions(start.quaternion, end.quaternion, progress);\n    interpolated.position.lerpVectors(\n      start.position.setFromMatrixColumn(startMat4, 3),\n      end.position.setFromMatrixColumn(endMat4, 3),\n      progress\n    );\n    interpolated.scale.lerpVectors(\n      start.scale.setFromMatrixScale(startMat4),\n      end.scale.setFromMatrixScale(endMat4),\n      progress\n    );\n    return outMat4.compose(\n      interpolated.position,\n      interpolated.quaternion,\n      interpolated.scale\n    );\n  };\n})();\n\nexport const squareDistanceBetween = (function() {\n  const posA = new THREE.Vector3();\n  const posB = new THREE.Vector3();\n  return function(objA, objB) {\n    objA.updateMatrices();\n    objB.updateMatrices();\n    posA.setFromMatrixColumn(objA.matrixWorld, 3);\n    posB.setFromMatrixColumn(objB.matrixWorld, 3);\n    return posA.distanceToSquared(posB);\n  };\n})();\n\nexport function isAlmostUniformVector3(v, epsilonHalf = 0.005) {\n  return Math.abs(v.x - v.y) < epsilonHalf && Math.abs(v.x - v.z) < epsilonHalf;\n}\nexport function almostEqual(a, b, epsilon = 0.01) {\n  return Math.abs(a - b) < epsilon;\n}\n\nexport const affixToWorldUp = (function() {\n  const inRotationMat4 = new THREE.Matrix4();\n  const inForward = new THREE.Vector3();\n  const outForward = new THREE.Vector3();\n  const outSide = new THREE.Vector3();\n  const worldUp = new THREE.Vector3(); // Could be called \"outUp\"\n  const v = new THREE.Vector3();\n  const inMat4Copy = new THREE.Matrix4();\n  return function affixToWorldUp(inMat4, outMat4) {\n    inRotationMat4.identity().extractRotation(inMat4Copy.copy(inMat4));\n    inForward.setFromMatrixColumn(inRotationMat4, 2).multiplyScalar(-1);\n    outForward\n      .copy(inForward)\n      .sub(v.copy(inForward).projectOnVector(worldUp.set(0, 1, 0)))\n      .normalize();\n    outSide.crossVectors(outForward, worldUp);\n    outMat4.makeBasis(outSide, worldUp, outForward.multiplyScalar(-1));\n    outMat4.scale(v.setFromMatrixScale(inMat4Copy));\n    outMat4.setPosition(v.setFromMatrixColumn(inMat4Copy, 3));\n    return outMat4;\n  };\n})();\n\nexport const calculateCameraTransformForWaypoint = (function() {\n  const upAffixedCameraTransform = new THREE.Matrix4();\n  const upAffixedWaypointTransform = new THREE.Matrix4();\n  const detachFromWorldUp = new THREE.Matrix4();\n  return function calculateCameraTransformForWaypoint(cameraTransform, waypointTransform, outMat4) {\n    affixToWorldUp(cameraTransform, upAffixedCameraTransform);\n    detachFromWorldUp\n      .copy(upAffixedCameraTransform)\n      .invert()\n      .multiply(cameraTransform);\n    affixToWorldUp(waypointTransform, upAffixedWaypointTransform);\n    outMat4.copy(upAffixedWaypointTransform).multiply(detachFromWorldUp);\n  };\n})();\n\nexport const calculateViewingDistance = (function() {\n  return function calculateViewingDistance(fov, aspect, box, center, vrMode) {\n    const halfYExtents = Math.max(Math.abs(box.max.y - center.y), Math.abs(center.y - box.min.y));\n    const halfXExtents = Math.max(Math.abs(box.max.x - center.x), Math.abs(center.x - box.min.x));\n    const halfVertFOV = THREE.MathUtils.degToRad(fov / 2);\n    const halfHorFOV = Math.atan(Math.tan(halfVertFOV) * aspect) * (vrMode ? 0.5 : 1);\n    const margin = 1.05;\n    const length1 = Math.abs((halfYExtents * margin) / Math.tan(halfVertFOV));\n    const length2 = Math.abs((halfXExtents * margin) / Math.tan(halfHorFOV));\n    const length3 = Math.abs(box.max.z - center.z) + Math.max(length1, length2);\n    const length = vrMode ? Math.max(0.25, length3) : length3;\n    return length || 1.25;\n  };\n})();\n\nexport const rotateInPlaceAroundWorldUp = (function() {\n  const inMat4Copy = new THREE.Matrix4();\n  const startRotation = new THREE.Matrix4();\n  const endRotation = new THREE.Matrix4();\n  const v = new THREE.Vector3();\n  return function rotateInPlaceAroundWorldUp(inMat4, theta, outMat4) {\n    inMat4Copy.copy(inMat4);\n    return outMat4\n      .copy(endRotation.makeRotationY(theta).multiply(startRotation.extractRotation(inMat4Copy)))\n      .scale(v.setFromMatrixScale(inMat4Copy))\n      .setPosition(v.setFromMatrixPosition(inMat4Copy));\n  };\n})();\n\nexport const childMatch = (function() {\n  const inverseParentWorld = new THREE.Matrix4();\n  const childRelativeToParent = new THREE.Matrix4();\n  const childInverse = new THREE.Matrix4();\n  const newParentMatrix = new THREE.Matrix4();\n  // transform the parent such that its child matches the target\n  return function childMatch(parent, child, target) {\n    parent.updateMatrices();\n    inverseParentWorld.copy(parent.matrixWorld).invert();\n    child.updateMatrices();\n    childRelativeToParent.multiplyMatrices(inverseParentWorld, child.matrixWorld);\n    childInverse.copy(childRelativeToParent).invert();\n    newParentMatrix.multiplyMatrices(target, childInverse);\n    setMatrixWorld(parent, newParentMatrix);\n  };\n})();\n\nexport function createPlaneBufferGeometry(width, height, widthSegments, heightSegments, flipY = true) {\n  const geometry = new THREE.PlaneBufferGeometry(width, height, widthSegments, heightSegments);\n  // Three.js seems to assume texture flipY is true for all its built in geometry\n  // but we turn this off on our texture loader since createImageBitmap in Firefox\n  // does not support flipping. Then we flip the uv for flipY = false texture.\n  if (flipY === false) {\n    const uv = geometry.getAttribute(\"uv\");\n    for (let i = 0; i < uv.count; i++) {\n      uv.setY(i, 1.0 - uv.getY(i));\n    }\n  }\n  return geometry;\n}\n\nimport { Layers } from \"../components/layers\";\n\n// This code is from three-vrm. We will likely be using that in the future and this inlined code can go away\nfunction excludeTriangles(triangles, bws, skinIndex, exclude) {\n  let count = 0;\n  if (bws != null && bws.length > 0) {\n    for (let i = 0; i < triangles.length; i += 3) {\n      const a = triangles[i];\n      const b = triangles[i + 1];\n      const c = triangles[i + 2];\n      const bw0 = bws[a];\n      const skin0 = skinIndex[a];\n\n      if (bw0[0] > 0 && exclude.includes(skin0[0])) continue;\n      if (bw0[1] > 0 && exclude.includes(skin0[1])) continue;\n      if (bw0[2] > 0 && exclude.includes(skin0[2])) continue;\n      if (bw0[3] > 0 && exclude.includes(skin0[3])) continue;\n\n      const bw1 = bws[b];\n      const skin1 = skinIndex[b];\n      if (bw1[0] > 0 && exclude.includes(skin1[0])) continue;\n      if (bw1[1] > 0 && exclude.includes(skin1[1])) continue;\n      if (bw1[2] > 0 && exclude.includes(skin1[2])) continue;\n      if (bw1[3] > 0 && exclude.includes(skin1[3])) continue;\n\n      const bw2 = bws[c];\n      const skin2 = skinIndex[c];\n      if (bw2[0] > 0 && exclude.includes(skin2[0])) continue;\n      if (bw2[1] > 0 && exclude.includes(skin2[1])) continue;\n      if (bw2[2] > 0 && exclude.includes(skin2[2])) continue;\n      if (bw2[3] > 0 && exclude.includes(skin2[3])) continue;\n\n      triangles[count++] = a;\n      triangles[count++] = b;\n      triangles[count++] = c;\n    }\n  }\n  return count;\n}\n\nfunction createErasedMesh(src, erasingBonesIndex) {\n  const dst = new THREE.SkinnedMesh(src.geometry.clone(), src.material);\n  dst.name = `${src.name}(headless)`;\n  dst.frustumCulled = src.frustumCulled;\n  dst.layers.set(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n\n  const geometry = dst.geometry;\n\n  const skinIndexAttr = geometry.getAttribute(\"skinIndex\").array;\n  const skinIndex = [];\n  for (let i = 0; i < skinIndexAttr.length; i += 4) {\n    skinIndex.push([skinIndexAttr[i], skinIndexAttr[i + 1], skinIndexAttr[i + 2], skinIndexAttr[i + 3]]);\n  }\n\n  const skinWeightAttr = geometry.getAttribute(\"skinWeight\").array;\n  const skinWeight = [];\n  for (let i = 0; i < skinWeightAttr.length; i += 4) {\n    skinWeight.push([skinWeightAttr[i], skinWeightAttr[i + 1], skinWeightAttr[i + 2], skinWeightAttr[i + 3]]);\n  }\n\n  const index = geometry.getIndex();\n  if (!index) {\n    throw new Error(\"The geometry doesn't have an index buffer\");\n  }\n  const oldTriangles = Array.from(index.array);\n\n  const count = excludeTriangles(oldTriangles, skinWeight, skinIndex, erasingBonesIndex);\n  const newTriangle = [];\n  for (let i = 0; i < count; i++) {\n    newTriangle[i] = oldTriangles[i];\n  }\n  geometry.setIndex(newTriangle);\n\n  if (src.onBeforeRender) {\n    dst.onBeforeRender = src.onBeforeRender;\n  }\n\n  dst.bind(new THREE.Skeleton(src.skeleton.bones, src.skeleton.boneInverses), new THREE.Matrix4());\n\n  return dst;\n}\n\nfunction isEraseTarget(bone) {\n  return bone.name === \"Head\" || (bone.parent && isEraseTarget(bone.parent));\n}\n\nexport function createHeadlessModelForSkinnedMesh(mesh) {\n  const eraseBoneIndexes = [];\n  mesh.skeleton.bones.forEach((bone, index) => {\n    if (isEraseTarget(bone)) eraseBoneIndexes.push(index);\n  });\n\n  if (!eraseBoneIndexes.length) {\n    mesh.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n    mesh.layers.enable(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n    return;\n  }\n\n  mesh.layers.set(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n\n  return createErasedMesh(mesh, eraseBoneIndexes);\n}\n\nexport function createModelForSkinnedMesh(mesh) {\n  return createErasedMesh(mesh, []);\n}\n\nexport const isFacingCamera = (function() {\n  const objWorldDir = new THREE.Vector3();\n  const objWorld = new THREE.Vector3();\n  const camWorld = new THREE.Vector3();\n  return function isFacingCamera(obj) {\n    const playerCamera = AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.viewingCamera;\n    playerCamera.getWorldPosition(camWorld);\n    obj.getWorldPosition(objWorld);\n    obj.getWorldDirection(objWorldDir);\n    return objWorldDir.dot(objWorld.sub(camWorld)) < 0;\n  };\n})();\n","import nextTick from \"../utils/next-tick\";\nimport { updateMaterials, mapMaterials, convertStandardMaterial } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nimport { disposeNode, cloneObject3D } from \"../utils/three-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { KTX2Loader } from \"three/examples/jsm/loaders/KTX2Loader\";\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader\";\nimport { BasisTextureLoader } from \"three/examples/jsm/loaders/BasisTextureLoader\";\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\n\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nclass GLTFCache {\n  cache = new Map();\n\n  set(src, gltf) {\n    this.cache.set(src, {\n      gltf,\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached gltf ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    if (cacheItem.count <= 0) {\n      cacheItem.gltf.scene.traverse(disposeNode);\n      this.cache.delete(src);\n    }\n  }\n}\nexport const gltfCache = new GLTFCache();\nconst inflightGltfs = new Map();\n\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    console.warn(`Inflator failed. \"${componentName}\" component does not exist.`);\n    return;\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n\n      if (\n        geo.attributes.position.isInterleavedBufferAttribute ||\n        (geo.index && geo.index.isInterleavedBufferAttribute)\n      ) {\n        console.warn(\"Skipping generaton of MeshBVH for interleaved geoemtry as it is not supported\");\n        return;\n      }\n\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.scene.animations,\n    scene: cloneObject3D(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\nfunction getHubsComponentsFromMaterial(node) {\n  const material = node.material;\n\n  if (!material) {\n    return null;\n  }\n\n  return getHubsComponents(material);\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function (indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n  const materialComponents = getHubsComponentsFromMaterial(node);\n\n  const nodeHasBehavior = !!entityComponents || !!materialComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that templates can be attached to the correct AFrame entity.\n  el.object3D.name = node.name;\n\n  // Set the uuid of the `THREE.Group` to match the uuid of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.uuid = node.uuid;\n  node.uuid = THREE.MathUtils.generateUUID();\n\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  if (node.morphTargetInfluences) {\n    node.parent.morphTargetInfluences = node.morphTargetInfluences;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nasync function inflateComponents(inflatedEntity, indexToEntityMap) {\n  let isFirstInflation = true;\n  const objectInflations = [];\n\n  inflatedEntity.object3D.traverse(async object3D => {\n    const objectInflation = {};\n    objectInflation.promise = new Promise(resolve => (objectInflation.resolve = resolve));\n    objectInflations.push(objectInflation);\n\n    if (!isFirstInflation) {\n      await objectInflations.shift().promise;\n    }\n    isFirstInflation = false;\n\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    function resolveNodeRefs(componentData) {\n      for (const propName in componentData) {\n        const value = componentData[propName];\n        const type = value?.__mhc_link_type;\n        if (type === \"node\" && value.index !== undefined) {\n          if (indexToEntityMap[value.index]) {\n            componentData[propName] = indexToEntityMap[value.index].object3D;\n          } else {\n            console.warn(\"inflateComponents: invalid node reference\", propName);\n            componentData[propName] = null;\n          }\n        }\n      }\n      return componentData;\n    }\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          await inflator(\n            el,\n            componentName,\n            resolveNodeRefs(entityComponents[prop]),\n            entityComponents,\n            indexToEntityMap\n          );\n        }\n      }\n    }\n\n    const materialComponents = getHubsComponentsFromMaterial(object3D);\n\n    if (materialComponents && el) {\n      for (const prop in materialComponents) {\n        if (materialComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          await inflator(\n            el,\n            componentName,\n            resolveNodeRefs(materialComponents[prop]),\n            materialComponents,\n            indexToEntityMap\n          );\n        }\n      }\n    }\n\n    objectInflation.resolve();\n  });\n\n  await objectInflations.shift().promise;\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction getHubsComponentsExtension(node) {\n  if (node.extensions && node.extensions.MOZ_hubs_components) {\n    return node.extensions.MOZ_hubs_components;\n  } else if (node.extensions && node.extensions.HUBS_components) {\n    return node.extensions.HUBS_components;\n  } else if (node.extras && node.extras.gltfExtensions && node.extras.gltfExtensions.MOZ_hubs_components) {\n    return node.extras.gltfExtensions.MOZ_hubs_components;\n  }\n}\n\n// Versions are documented here: https://github.com/mozilla/hubs/wiki/MOZ_hubs_components-Changelog\n// Make sure to update the wiki and Spoke when bumping a version\nfunction runMigration(version, json) {\n  if (version < 2) {\n    //old heightfields will be on the same node as the nav-mesh, delete those\n    const oldHeightfieldNode = json.nodes.find(node => {\n      const components = getHubsComponentsExtension(node);\n      return components && components.heightfield && components[\"nav-mesh\"];\n    });\n    if (oldHeightfieldNode) {\n      if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.MOZ_hubs_components) {\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\n      } else if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.HUBS_components) {\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\n      } else if (\n        oldHeightfieldNode.extras &&\n        oldHeightfieldNode.extras.gltfExtensions &&\n        oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components\n      ) {\n        delete oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components;\n      }\n    }\n  }\n\n  if (version < 4) {\n    // Lights prior to version 4 should treat range === 0 as if it has zero decay\n    if (json.nodes) {\n      for (const node of json.nodes) {\n        const components = getHubsComponentsExtension(node);\n\n        if (!components) {\n          continue;\n        }\n\n        const light = components[\"spot-light\"] || components[\"point-light\"];\n\n        if (light && light.range === 0) {\n          light.decay = 0;\n        }\n      }\n    }\n  }\n}\n\nlet ktxLoader;\nlet dracoLoader;\n\nclass GLTFHubsPlugin {\n  constructor(parser, jsonPreprocessor) {\n    this.parser = parser;\n    this.jsonPreprocessor = jsonPreprocessor;\n\n    // We override glTF parser textureLoader with our HubsTextureLoader for\n    // 1. Clean up the texture image related resources after it is uploaded to WebGL texture\n    // 2. Use ImageBitmapLoader if it is available. The latest official Three.js (r128) glTF loader\n    //    attempts to use ImageBitmapLoader if it is avaiable except for Firefox.\n    //    But we want to use ImageBitmapLoader even for Firefox so we need this overriding hack.\n    // But overriding the textureLoader is hacky and it can cause future potential problems\n    // especially in upstraming Three.js. So ideally we should replace this hack\n    // with the one using more proper APIs like plugin system at some point.\n    // Note: Be careful when replacing our Three.js fork with the official upstraming one that\n    //       the latest ImageBitmapLoader passes the second argument to createImageBitmap()\n    //       but currently createImageBitmap() on Firefox fails if the second argument is defined.\n    //       https://bugzilla.mozilla.org/show_bug.cgi?id=1367251\n    //       and this is the reason why the official glTF loader doesn't use ImageBitmapLoader\n    //       for Firefox. We will need a workaround for that.\n    parser.textureLoader = new HubsTextureLoader(parser.options.manager);\n  }\n\n  beforeRoot() {\n    const parser = this.parser;\n    const jsonPreprocessor = this.jsonPreprocessor;\n\n    //\n    if (jsonPreprocessor) {\n      parser.json = jsonPreprocessor(parser.json);\n    }\n\n    // Ideally Hubs components stuffs should be handled in MozHubsComponents plugin?\n    let version = 0;\n    if (\n      parser.json.extensions &&\n      parser.json.extensions.MOZ_hubs_components &&\n      parser.json.extensions.MOZ_hubs_components.hasOwnProperty(\"version\")\n    ) {\n      version = parser.json.extensions.MOZ_hubs_components.version;\n    }\n    runMigration(version, parser.json);\n\n    // Note: Here may be rewritten with the one with parser.associations\n    const nodes = parser.json.nodes;\n    if (nodes) {\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n\n        if (!node.extras) {\n          node.extras = {};\n        }\n\n        node.extras.gltfIndex = i;\n      }\n    }\n  }\n\n  afterRoot(gltf) {\n    gltf.scene.traverse(object => {\n      // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n      // @TODO: Should this be fixed in the gltf loader?\n      object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n      const materialQuality = window.APP.store.state.preferences.materialQualitySetting;\n      updateMaterials(object, material => convertStandardMaterial(material, materialQuality));\n    });\n\n    // Replace animation target node name with the node uuid.\n    // I assume track name is 'nodename.property'.\n    if (gltf.animations) {\n      for (const animation of gltf.animations) {\n        for (const track of animation.tracks) {\n          const parsedPath = THREE.PropertyBinding.parseTrackName(track.name);\n          for (const scene of gltf.scenes) {\n            const node = THREE.PropertyBinding.findNode(scene, parsedPath.nodeName);\n            if (node) {\n              track.name = track.name.replace(/^[^.]*\\./, node.uuid + \".\");\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    //\n    gltf.scene.animations = gltf.animations;\n  }\n}\n\nclass GLTFHubsComponentsExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = \"MOZ_hubs_components\";\n  }\n\n  afterRoot({ scenes, parser }) {\n    const deps = [];\n\n    const resolveComponents = (gltfRootType, obj) => {\n      const idx = parser.associations.get(obj)?.[gltfRootType];\n      if (idx === undefined) return;\n      const ext = parser.json[gltfRootType][idx].extensions?.[this.name];\n      if (!ext) return;\n\n      // TODO putting this into userData is a bit silly, we should just inflate here, but entities need to be inflated first...\n      obj.userData.gltfExtensions = Object.assign(obj.userData.gltfExtensions || {}, {\n        MOZ_hubs_components: ext\n      });\n\n      for (const componentName in ext) {\n        const props = ext[componentName];\n        for (const propName in props) {\n          const value = props[propName];\n          const type = value?.__mhc_link_type;\n          if (type && value.index !== undefined) {\n            deps.push(\n              parser.getDependency(type, value.index).then(loadedDep => {\n                // TODO similar to above, this logic being spread out in multiple places is not great...\n                // Node refences are assumed to always be in the scene graph. These referneces are late-resolved in inflateComponents\n                // otherwise they will need to be updated when cloning (which happens as part of caching).\n                if (type === \"node\") return;\n\n                if (type === \"texture\" && !parser.json.textures[value.index].extensions?.MOZ_texture_rgbe) {\n                  // For now assume all non HDR textures linked in hubs components are sRGB.\n                  // We can allow this to be overriden later if needed\n                  loadedDep.encoding = THREE.sRGBEncoding;\n                }\n\n                props[propName] = loadedDep;\n\n                return loadedDep;\n              })\n            );\n          }\n        }\n      }\n    };\n\n    for (let i = 0; i < scenes.length; i++) {\n      // TODO this should be done by GLTLoader\n      parser.associations.set(scenes[i], { scenes: i });\n      scenes[i].traverse(obj => {\n        resolveComponents(\"scenes\", obj);\n        resolveComponents(\"nodes\", obj);\n        mapMaterials(obj, resolveComponents.bind(this, \"materials\"));\n      });\n    }\n\n    return Promise.all(deps);\n  }\n}\n\nclass GLTFHubsLightMapExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = \"MOZ_lightmap\";\n  }\n\n  // @TODO: Ideally we should use extendMaterialParams hook.\n  //        But the current official glTF loader doesn't fire extendMaterialParams\n  //        hook for unlit and specular-glossiness materials.\n  //        So using loadMaterial hook as workaround so far.\n  //        Cons is loadMaterial hook is fired as _invokeOne so\n  //        if other plugins defining loadMaterial is registered\n  //        there is a chance that this light map extension handler isn't called.\n  //        The glTF loader should be updated to remove the limitation.\n  loadMaterial(materialIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const materialDef = json.materials[materialIndex];\n\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\n      return null;\n    }\n\n    const extensionDef = materialDef.extensions[this.name];\n\n    const pending = [];\n\n    pending.push(parser.loadMaterial(materialIndex));\n    pending.push(parser.getDependency(\"texture\", extensionDef.index));\n\n    return Promise.all(pending).then(results => {\n      const material = results[0];\n      const lightMap = results[1];\n      material.lightMap = lightMap;\n      material.lightMapIntensity = extensionDef.intensity !== undefined ? extensionDef.intensity : 1;\n\n      // See https://github.com/mrdoob/three.js/pull/23613\n      if (material.isMeshBasicMaterial) {\n        material.lightMapIntensity *= Math.PI;\n      }\n\n      return material;\n    });\n  }\n}\n\nclass GLTFHubsTextureBasisExtension {\n  constructor(parser) {\n    this.parser = parser;\n    this.name = \"MOZ_HUBS_texture_basis\";\n    this.basisLoader = null;\n  }\n\n  loadTexture(textureIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n      return null;\n    }\n\n    if (this.basisLoader === null) {\n      this.basisLoader = new BasisTextureLoader(parser.options.manager).detectSupport(AFRAME.scenes[0].renderer);\n    }\n\n    if (!this.basisLoader) {\n      // @TODO: Display warning (only if the extension is in extensionsRequired)?\n      return null;\n    }\n\n    console.warn(`The ${this.name} extension is deprecated, you should use KHR_texture_basisu instead.`);\n\n    const extensionDef = textureDef.extensions[this.name];\n    const source = extensionDef.source;\n\n    return parser.loadTextureImage(textureIndex, source, this.basisLoader);\n  }\n}\n\nclass GLTFMozTextureRGBE {\n  constructor(parser, loader) {\n    this.parser = parser;\n    this.loader = loader;\n    this.name = \"MOZ_texture_rgbe\";\n  }\n\n  loadTexture(textureIndex) {\n    const parser = this.parser;\n    const json = parser.json;\n    const textureDef = json.textures[textureIndex];\n\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\n      return null;\n    }\n\n    const extensionDef = textureDef.extensions[this.name];\n    const source = extensionDef.source;\n    return parser.loadTextureImage(textureIndex, source, this.loader).then(t => {\n      // TODO pretty severe artifacting when using mipmaps, disable for now\n      if (t.minFilter == THREE.NearestMipmapNearestFilter || t.minFilter == THREE.NearestMipmapLinearFilter) {\n        t.minFilter = THREE.NearestFilter;\n      } else if (t.minFilter == THREE.LinearMipmapNearestFilter || t.minFilter == THREE.LinearMipmapLinearFilter) {\n        t.minFilter = THREE.LinearFilter;\n      }\n      return t;\n    });\n  }\n}\n\nexport async function loadGLTF(src, contentType, onProgress, jsonPreprocessor) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType && (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\"))) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new GLTFLoader(loadingManager);\n  gltfLoader\n    .register(parser => new GLTFHubsComponentsExtension(parser))\n    .register(parser => new GLTFHubsPlugin(parser, jsonPreprocessor))\n    .register(parser => new GLTFHubsLightMapExtension(parser))\n    .register(parser => new GLTFHubsTextureBasisExtension(parser))\n    .register(parser => new GLTFMozTextureRGBE(parser, new RGBELoader().setDataType(THREE.HalfFloatType)));\n\n  // TODO some models are loaded before the renderer exists. This is likely things like the camera tool and loading cube.\n  // They don't currently use KTX textures but if they did this would be an issue. Fixing this is hard but is part of\n  // \"taking control of the render loop\" which is something we want to tackle for many reasons.\n  if (!ktxLoader && AFRAME && AFRAME.scenes && AFRAME.scenes[0]) {\n    ktxLoader = new KTX2Loader(loadingManager).detectSupport(AFRAME.scenes[0].renderer);\n  }\n  if (!dracoLoader && AFRAME && AFRAME.scenes && AFRAME.scenes[0]) {\n    dracoLoader = new DRACOLoader(loadingManager);\n  }\n\n  if (ktxLoader) {\n    gltfLoader.setKTX2Loader(ktxLoader);\n  }\n  if (dracoLoader) {\n    gltfLoader.setDRACOLoader(dracoLoader);\n  }\n\n  return new Promise((resolve, reject) => {\n    gltfLoader.load(gltfUrl, resolve, onProgress, reject);\n  }).finally(() => {\n    if (fileMap) {\n      // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n      Object.keys(fileMap).forEach(URL.revokeObjectURL);\n    }\n  });\n}\n\nexport async function loadModel(src, contentType = null, useCache = false, jsonPreprocessor = null) {\n  console.log(`Loading model ${src}`);\n  if (useCache) {\n    if (gltfCache.has(src)) {\n      gltfCache.retain(src);\n      return cloneGltf(gltfCache.get(src).gltf);\n    } else {\n      if (inflightGltfs.has(src)) {\n        const gltf = await inflightGltfs.get(src);\n        gltfCache.retain(src);\n        return cloneGltf(gltf);\n      } else {\n        const promise = loadGLTF(src, contentType, null, jsonPreprocessor);\n        inflightGltfs.set(src, promise);\n        const gltf = await promise;\n        inflightGltfs.delete(src);\n        gltfCache.set(src, gltf);\n        return cloneGltf(gltf);\n      }\n    }\n  } else {\n    return loadGLTF(src, contentType, null, jsonPreprocessor);\n  }\n}\n\nfunction resolveAsset(src) {\n  // If the src attribute is a selector, get the url from the asset item.\n  if (src && src.charAt(0) === \"#\") {\n    const assetEl = document.getElementById(src.substring(1));\n    if (assetEl) {\n      return assetEl.getAttribute(\"src\");\n    }\n  }\n  return src;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * allowed components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    // This can be set externally if a consumer wants to do some node preprocssing.\n    this.jsonPreprocessor = null;\n\n    this.loadTemplates();\n  },\n\n  play() {\n    this.el.components[\"listed-media\"] && this.el.sceneEl.emit(\"listed_media_changed\");\n  },\n\n  update() {\n    this.applySrc(resolveAsset(this.data.src), this.data.contentType);\n  },\n\n  remove() {\n    if (this.data.useCache) {\n      const src = resolveAsset(this.data.src);\n      if (src) {\n        gltfCache.release(src);\n      }\n    }\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      if (src === this.lastSrc) return;\n\n      const lastSrc = this.lastSrc;\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await loadModel(src, contentType, this.data.useCache, this.jsonPreprocessor);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene;\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(this.model.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        object3DToSet.visible = false;\n\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        await inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      if (lastSrc && this.data.useCache) {\n        gltfCache.release(lastSrc);\n      }\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      object3DToSet.visible = true;\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: object3DToSet });\n    } catch (e) {\n      gltfCache.release(src);\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer, args = {}) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage(Object.assign(args, { id, payload: data }), transfer);\n    return promise;\n  };\n}\n","\nimport worker from \"!!../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"!function(){\\\"use strict\\\";var e,t,i=(e=function(e,t){var i=\\\"undefined\\\"!=typeof Uint8Array&&\\\"undefined\\\"!=typeof Uint16Array&&\\\"undefined\\\"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if(\\\"object\\\"!=typeof i)throw new TypeError(i+\\\"must be non-object\\\");for(var a in i)n(i,a)&&(e[a]=i[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,i,n,a){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+n),a);else for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){var t,i,n,a,r,o;for(n=0,t=0,i=e.length;t<i;t++)n+=e[t].length;for(o=new Uint8Array(n),a=0,t=0,i=e.length;t<i;t++)r=e[t],o.set(r,a),a+=r.length;return o}},r={arraySet:function(e,t,i,n,a){for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,r))},t.setTyped(i)},e(t={exports:{}},t.exports),t.exports);i.assign,i.shrinkBuf,i.setTyped,i.Buf8,i.Buf16,i.Buf32;var n=function(e,t,i,n){for(var a=65535&e|0,r=e>>>16&65535|0,o=0;0!==i;){i-=o=i>2e3?2e3:i;do{r=r+(a=a+t[n++]|0)|0}while(--o);a%=65521,r%=65521}return a|r<<16|0},a=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}(),r=function(e,t,i,n){var r=a,o=n+i;e^=-1;for(var s=n;s<o;s++)e=e>>>8^r[255&(e^t[s])];return-1^e},o=function(e,t){var i,n,a,r,o,s,f,l,d,c,h,u,w,b,p,m,k,_,v,g,y,x,B,E,S;i=e.state,n=e.next_in,E=e.input,a=n+(e.avail_in-5),r=e.next_out,S=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),f=i.dmax,l=i.wsize,d=i.whave,c=i.wnext,h=i.window,u=i.hold,w=i.bits,b=i.lencode,p=i.distcode,m=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{w<15&&(u+=E[n++]<<w,w+=8,u+=E[n++]<<w,w+=8),_=b[u&m];t:for(;;){if(u>>>=v=_>>>24,w-=v,0==(v=_>>>16&255))S[r++]=65535&_;else{if(!(16&v)){if(0==(64&v)){_=b[(65535&_)+(u&(1<<v)-1)];continue t}if(32&v){i.mode=12;break e}e.msg=\\\"invalid literal/length code\\\",i.mode=30;break e}g=65535&_,(v&=15)&&(w<v&&(u+=E[n++]<<w,w+=8),g+=u&(1<<v)-1,u>>>=v,w-=v),w<15&&(u+=E[n++]<<w,w+=8,u+=E[n++]<<w,w+=8),_=p[u&k];i:for(;;){if(u>>>=v=_>>>24,w-=v,!(16&(v=_>>>16&255))){if(0==(64&v)){_=p[(65535&_)+(u&(1<<v)-1)];continue i}e.msg=\\\"invalid distance code\\\",i.mode=30;break e}if(y=65535&_,w<(v&=15)&&(u+=E[n++]<<w,(w+=8)<v&&(u+=E[n++]<<w,w+=8)),(y+=u&(1<<v)-1)>f){e.msg=\\\"invalid distance too far back\\\",i.mode=30;break e}if(u>>>=v,w-=v,y>(v=r-o)){if((v=y-v)>d&&i.sane){e.msg=\\\"invalid distance too far back\\\",i.mode=30;break e}if(x=0,B=h,0===c){if(x+=l-v,v<g){g-=v;do{S[r++]=h[x++]}while(--v);x=r-y,B=S}}else if(c<v){if(x+=l+c-v,(v-=c)<g){g-=v;do{S[r++]=h[x++]}while(--v);if(x=0,c<g){g-=v=c;do{S[r++]=h[x++]}while(--v);x=r-y,B=S}}}else if(x+=c-v,v<g){g-=v;do{S[r++]=h[x++]}while(--v);x=r-y,B=S}for(;g>2;)S[r++]=B[x++],S[r++]=B[x++],S[r++]=B[x++],g-=3;g&&(S[r++]=B[x++],g>1&&(S[r++]=B[x++]))}else{x=r-y;do{S[r++]=S[x++],S[r++]=S[x++],S[r++]=S[x++],g-=3}while(g>2);g&&(S[r++]=S[x++],g>1&&(S[r++]=S[x++]))}break}}break}}while(n<a&&r<s);n-=g=w>>3,u&=(1<<(w-=g<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=r<s?s-r+257:257-(r-s),i.hold=u,i.bits=w},s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],c=function(e,t,n,a,r,o,c,h){var u,w,b,p,m,k,_,v,g,y=h.bits,x=0,B=0,E=0,S=0,R=0,A=0,Z=0,T=0,O=0,U=0,L=null,C=0,N=new i.Buf16(16),D=new i.Buf16(16),I=null,F=0;for(x=0;x<=15;x++)N[x]=0;for(B=0;B<a;B++)N[t[n+B]]++;for(R=y,S=15;S>=1&&0===N[S];S--);if(R>S&&(R=S),0===S)return r[o++]=20971520,r[o++]=20971520,h.bits=1,0;for(E=1;E<S&&0===N[E];E++);for(R<E&&(R=E),T=1,x=1;x<=15;x++)if(T<<=1,(T-=N[x])<0)return-1;if(T>0&&(0===e||1!==S))return-1;for(D[1]=0,x=1;x<15;x++)D[x+1]=D[x]+N[x];for(B=0;B<a;B++)0!==t[n+B]&&(c[D[t[n+B]]++]=B);if(0===e?(L=I=c,k=19):1===e?(L=s,C-=257,I=f,F-=257,k=256):(L=l,I=d,k=-1),U=0,B=0,x=E,m=o,A=R,Z=0,b=-1,p=(O=1<<R)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){_=x-Z,c[B]<k?(v=0,g=c[B]):c[B]>k?(v=I[F+c[B]],g=L[C+c[B]]):(v=96,g=0),u=1<<x-Z,E=w=1<<A;do{r[m+(U>>Z)+(w-=u)]=_<<24|v<<16|g|0}while(0!==w);for(u=1<<x-1;U&u;)u>>=1;if(0!==u?(U&=u-1,U+=u):U=0,B++,0==--N[x]){if(x===S)break;x=t[n+c[B]]}if(x>R&&(U&p)!==b){for(0===Z&&(Z=R),m+=E,T=1<<(A=x-Z);A+Z<S&&!((T-=N[A+Z])<=0);)A++,T<<=1;if(O+=1<<A,1===e&&O>852||2===e&&O>592)return 1;r[b=U&p]=R<<24|A<<16|m-o|0}}return 0!==U&&(r[m+U]=x-Z<<24|64<<16|0),h.bits=R,0},h=0,u=-2,w=1,b=12,p=30,m=852,k=592;function _(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\\\"\\\",t.wrap&&(e.adler=1&t.wrap),t.mode=w,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(m),t.distcode=t.distdyn=new i.Buf32(k),t.sane=1,t.back=-1,h):u}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,g(e)):u}function x(e,t){var i,n;return e&&e.state?(n=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?u:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,y(e))):u}function B(e,t){var i,n;return e?(n=new v,e.state=n,n.window=null,(i=x(e,t))!==h&&(e.state=null),i):u}var E,S,R=!0;function A(e){if(R){var t;for(E=new i.Buf32(512),S=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c(1,e.lens,0,288,E,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c(2,e.lens,0,32,S,0,e.work,{bits:5}),R=!1}e.lencode=E,e.lenbits=9,e.distcode=S,e.distbits=5}function Z(e,t,n,a){var r,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),a>=o.wsize?(i.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>a&&(r=a),i.arraySet(o.window,t,n-a,r,o.wnext),(a-=r)?(i.arraySet(o.window,t,n-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}var T={inflateReset:y,inflateReset2:x,inflateResetKeep:g,inflateInit:function(e){return B(e,15)},inflateInit2:B,inflate:function(e,t){var a,s,f,l,d,m,k,v,g,y,x,B,E,S,R,T,O,U,L,C,N,D,I,F,H=0,z=new i.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;(a=e.state).mode===b&&(a.mode=13),d=e.next_out,f=e.output,k=e.avail_out,l=e.next_in,s=e.input,m=e.avail_in,v=a.hold,g=a.bits,y=m,x=k,D=h;e:for(;;)switch(a.mode){case w:if(0===a.wrap){a.mode=13;break}for(;g<16;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(2&a.wrap&&35615===v){a.check=0,z[0]=255&v,z[1]=v>>>8&255,a.check=r(a.check,z,2,0),v=0,g=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg=\\\"incorrect header check\\\",a.mode=p;break}if(8!=(15&v)){e.msg=\\\"unknown compression method\\\",a.mode=p;break}if(g-=4,N=8+(15&(v>>>=4)),0===a.wbits)a.wbits=N;else if(N>a.wbits){e.msg=\\\"invalid window size\\\",a.mode=p;break}a.dmax=1<<N,e.adler=a.check=1,a.mode=512&v?10:b,v=0,g=0;break;case 2:for(;g<16;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(a.flags=v,8!=(255&a.flags)){e.msg=\\\"unknown compression method\\\",a.mode=p;break}if(57344&a.flags){e.msg=\\\"unknown header flags set\\\",a.mode=p;break}a.head&&(a.head.text=v>>8&1),512&a.flags&&(z[0]=255&v,z[1]=v>>>8&255,a.check=r(a.check,z,2,0)),v=0,g=0,a.mode=3;case 3:for(;g<32;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.head&&(a.head.time=v),512&a.flags&&(z[0]=255&v,z[1]=v>>>8&255,z[2]=v>>>16&255,z[3]=v>>>24&255,a.check=r(a.check,z,4,0)),v=0,g=0,a.mode=4;case 4:for(;g<16;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.head&&(a.head.xflags=255&v,a.head.os=v>>8),512&a.flags&&(z[0]=255&v,z[1]=v>>>8&255,a.check=r(a.check,z,2,0)),v=0,g=0,a.mode=5;case 5:if(1024&a.flags){for(;g<16;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.length=v,a.head&&(a.head.extra_len=v),512&a.flags&&(z[0]=255&v,z[1]=v>>>8&255,a.check=r(a.check,z,2,0)),v=0,g=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&((B=a.length)>m&&(B=m),B&&(a.head&&(N=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),i.arraySet(a.head.extra,s,l,B,N)),512&a.flags&&(a.check=r(a.check,s,B,l)),m-=B,l+=B,a.length-=B),a.length))break e;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===m)break e;B=0;do{N=s[l+B++],a.head&&N&&a.length<65536&&(a.head.name+=String.fromCharCode(N))}while(N&&B<m);if(512&a.flags&&(a.check=r(a.check,s,B,l)),m-=B,l+=B,N)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===m)break e;B=0;do{N=s[l+B++],a.head&&N&&a.length<65536&&(a.head.comment+=String.fromCharCode(N))}while(N&&B<m);if(512&a.flags&&(a.check=r(a.check,s,B,l)),m-=B,l+=B,N)break e}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;g<16;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(v!==(65535&a.check)){e.msg=\\\"header crc mismatch\\\",a.mode=p;break}v=0,g=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=b;break;case 10:for(;g<32;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}e.adler=a.check=_(v),v=0,g=0,a.mode=11;case 11:if(0===a.havedict)return e.next_out=d,e.avail_out=k,e.next_in=l,e.avail_in=m,a.hold=v,a.bits=g,2;e.adler=a.check=1,a.mode=b;case b:if(5===t||6===t)break e;case 13:if(a.last){v>>>=7&g,g-=7&g,a.mode=27;break}for(;g<3;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}switch(a.last=1&v,g-=1,3&(v>>>=1)){case 0:a.mode=14;break;case 1:if(A(a),a.mode=20,6===t){v>>>=2,g-=2;break e}break;case 2:a.mode=17;break;case 3:e.msg=\\\"invalid block type\\\",a.mode=p}v>>>=2,g-=2;break;case 14:for(v>>>=7&g,g-=7&g;g<32;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if((65535&v)!=(v>>>16^65535)){e.msg=\\\"invalid stored block lengths\\\",a.mode=p;break}if(a.length=65535&v,v=0,g=0,a.mode=15,6===t)break e;case 15:a.mode=16;case 16:if(B=a.length){if(B>m&&(B=m),B>k&&(B=k),0===B)break e;i.arraySet(f,s,l,B,d),m-=B,l+=B,k-=B,d+=B,a.length-=B;break}a.mode=b;break;case 17:for(;g<14;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(a.nlen=257+(31&v),v>>>=5,g-=5,a.ndist=1+(31&v),v>>>=5,g-=5,a.ncode=4+(15&v),v>>>=4,g-=4,a.nlen>286||a.ndist>30){e.msg=\\\"too many length or distance symbols\\\",a.mode=p;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;g<3;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.lens[j[a.have++]]=7&v,v>>>=3,g-=3}for(;a.have<19;)a.lens[j[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,I={bits:a.lenbits},D=c(0,a.lens,0,19,a.lencode,0,a.work,I),a.lenbits=I.bits,D){e.msg=\\\"invalid code lengths set\\\",a.mode=p;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;T=(H=a.lencode[v&(1<<a.lenbits)-1])>>>16&255,O=65535&H,!((R=H>>>24)<=g);){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(O<16)v>>>=R,g-=R,a.lens[a.have++]=O;else{if(16===O){for(F=R+2;g<F;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(v>>>=R,g-=R,0===a.have){e.msg=\\\"invalid bit length repeat\\\",a.mode=p;break}N=a.lens[a.have-1],B=3+(3&v),v>>>=2,g-=2}else if(17===O){for(F=R+3;g<F;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}g-=R,N=0,B=3+(7&(v>>>=R)),v>>>=3,g-=3}else{for(F=R+7;g<F;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}g-=R,N=0,B=11+(127&(v>>>=R)),v>>>=7,g-=7}if(a.have+B>a.nlen+a.ndist){e.msg=\\\"invalid bit length repeat\\\",a.mode=p;break}for(;B--;)a.lens[a.have++]=N}}if(a.mode===p)break;if(0===a.lens[256]){e.msg=\\\"invalid code -- missing end-of-block\\\",a.mode=p;break}if(a.lenbits=9,I={bits:a.lenbits},D=c(1,a.lens,0,a.nlen,a.lencode,0,a.work,I),a.lenbits=I.bits,D){e.msg=\\\"invalid literal/lengths set\\\",a.mode=p;break}if(a.distbits=6,a.distcode=a.distdyn,I={bits:a.distbits},D=c(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,I),a.distbits=I.bits,D){e.msg=\\\"invalid distances set\\\",a.mode=p;break}if(a.mode=20,6===t)break e;case 20:a.mode=21;case 21:if(m>=6&&k>=258){e.next_out=d,e.avail_out=k,e.next_in=l,e.avail_in=m,a.hold=v,a.bits=g,o(e,x),d=e.next_out,f=e.output,k=e.avail_out,l=e.next_in,s=e.input,m=e.avail_in,v=a.hold,g=a.bits,a.mode===b&&(a.back=-1);break}for(a.back=0;T=(H=a.lencode[v&(1<<a.lenbits)-1])>>>16&255,O=65535&H,!((R=H>>>24)<=g);){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(T&&0==(240&T)){for(U=R,L=T,C=O;T=(H=a.lencode[C+((v&(1<<U+L)-1)>>U)])>>>16&255,O=65535&H,!(U+(R=H>>>24)<=g);){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}v>>>=U,g-=U,a.back+=U}if(v>>>=R,g-=R,a.back+=R,a.length=O,0===T){a.mode=26;break}if(32&T){a.back=-1,a.mode=b;break}if(64&T){e.msg=\\\"invalid literal/length code\\\",a.mode=p;break}a.extra=15&T,a.mode=22;case 22:if(a.extra){for(F=a.extra;g<F;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.length+=v&(1<<a.extra)-1,v>>>=a.extra,g-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;T=(H=a.distcode[v&(1<<a.distbits)-1])>>>16&255,O=65535&H,!((R=H>>>24)<=g);){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(0==(240&T)){for(U=R,L=T,C=O;T=(H=a.distcode[C+((v&(1<<U+L)-1)>>U)])>>>16&255,O=65535&H,!(U+(R=H>>>24)<=g);){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}v>>>=U,g-=U,a.back+=U}if(v>>>=R,g-=R,a.back+=R,64&T){e.msg=\\\"invalid distance code\\\",a.mode=p;break}a.offset=O,a.extra=15&T,a.mode=24;case 24:if(a.extra){for(F=a.extra;g<F;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}a.offset+=v&(1<<a.extra)-1,v>>>=a.extra,g-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg=\\\"invalid distance too far back\\\",a.mode=p;break}a.mode=25;case 25:if(0===k)break e;if(B=x-k,a.offset>B){if((B=a.offset-B)>a.whave&&a.sane){e.msg=\\\"invalid distance too far back\\\",a.mode=p;break}B>a.wnext?(B-=a.wnext,E=a.wsize-B):E=a.wnext-B,B>a.length&&(B=a.length),S=a.window}else S=f,E=d-a.offset,B=a.length;B>k&&(B=k),k-=B,a.length-=B;do{f[d++]=S[E++]}while(--B);0===a.length&&(a.mode=21);break;case 26:if(0===k)break e;f[d++]=a.length,k--,a.mode=21;break;case 27:if(a.wrap){for(;g<32;){if(0===m)break e;m--,v|=s[l++]<<g,g+=8}if(x-=k,e.total_out+=x,a.total+=x,x&&(e.adler=a.check=a.flags?r(a.check,f,x,d-x):n(a.check,f,x,d-x)),x=k,(a.flags?v:_(v))!==a.check){e.msg=\\\"incorrect data check\\\",a.mode=p;break}v=0,g=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;g<32;){if(0===m)break e;m--,v+=s[l++]<<g,g+=8}if(v!==(4294967295&a.total)){e.msg=\\\"incorrect length check\\\",a.mode=p;break}v=0,g=0}a.mode=29;case 29:D=1;break e;case p:D=-3;break e;case 31:return-4;default:return u}return e.next_out=d,e.avail_out=k,e.next_in=l,e.avail_in=m,a.hold=v,a.bits=g,(a.wsize||x!==e.avail_out&&a.mode<p&&(a.mode<27||4!==t))&&Z(e,e.output,e.next_out,x-e.avail_out)?(a.mode=31,-4):(y-=e.avail_in,x-=e.avail_out,e.total_in+=y,e.total_out+=x,a.total+=x,a.wrap&&x&&(e.adler=a.check=a.flags?r(a.check,f,x,e.next_out-x):n(a.check,f,x,e.next_out-x)),e.data_type=a.bits+(a.last?64:0)+(a.mode===b?128:0)+(20===a.mode||15===a.mode?256:0),(0===y&&0===x||4===t)&&D===h&&(D=-5),D)},inflateEnd:function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,h},inflateGetHeader:function(e,t){var i;return e&&e.state?0==(2&(i=e.state).wrap)?u:(i.head=t,t.done=!1,h):u},inflateSetDictionary:function(e,t){var i,a=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?u:11===i.mode&&n(1,t,a,0)!==i.check?-3:Z(e,t,a,a)?(i.mode=31,-4):(i.havedict=1,h):u},inflateInfo:\\\"pako inflate (from Nodeca project)\\\"},O=!0,U=!0;try{String.fromCharCode.apply(null,[0])}catch(e){O=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){U=!1}for(var L=new i.Buf8(256),C=0;C<256;C++)L[C]=C>=252?6:C>=248?5:C>=240?4:C>=224?3:C>=192?2:1;L[254]=L[254]=1;var N=function(e){var t,n,a,r,o,s=e.length,f=0;for(r=0;r<s;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(a=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(a-56320),r++),f+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(f),o=0,r=0;o<f;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(a=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(a-56320),r++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},D=function(e,t){var n,a,r,o,s=t||e.length,f=new Array(2*s);for(a=0,n=0;n<s;)if((r=e[n++])<128)f[a++]=r;else if((o=L[r])>4)f[a++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&n<s;)r=r<<6|63&e[n++],o--;o>1?f[a++]=65533:r<65536?f[a++]=r:(r-=65536,f[a++]=55296|r>>10&1023,f[a++]=56320|1023&r)}return function(e,t){if(t<65537&&(e.subarray&&U||!e.subarray&&O))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n=\\\"\\\",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}(f,a)},I=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+L[e[i]]>t?i:t},F={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},H={2:\\\"need dictionary\\\",1:\\\"stream end\\\",0:\\\"\\\",\\\"-1\\\":\\\"file error\\\",\\\"-2\\\":\\\"stream error\\\",\\\"-3\\\":\\\"data error\\\",\\\"-4\\\":\\\"insufficient memory\\\",\\\"-5\\\":\\\"buffer error\\\",\\\"-6\\\":\\\"incompatible version\\\"},z=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\\\"\\\",this.state=null,this.data_type=2,this.adler=0},j=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\\\"\\\",this.comment=\\\"\\\",this.hcrc=0,this.done=!1},M=Object.prototype.toString;function K(e){if(!(this instanceof K))return new K(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:\\\"\\\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\\\"\\\",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var n=T.inflateInit2(this.strm,t.windowBits);if(n!==F.Z_OK)throw new Error(H[n]);this.header=new j,T.inflateGetHeader(this.strm,this.header)}function P(e,t){var i=new K(t);if(i.push(e,!0),i.err)throw i.msg||H[i.err];return i.result}K.prototype.push=function(e,t){var n,a,r,o,s,f,l=this.strm,d=this.options.chunkSize,c=this.options.dictionary,h=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?F.Z_FINISH:F.Z_NO_FLUSH,\\\"string\\\"==typeof e?l.input=function(e){for(var t=new i.Buf8(e.length),n=0,a=t.length;n<a;n++)t[n]=e.charCodeAt(n);return t}(e):\\\"[object ArrayBuffer]\\\"===M.call(e)?l.input=new Uint8Array(e):l.input=e,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new i.Buf8(d),l.next_out=0,l.avail_out=d),(n=T.inflate(l,F.Z_NO_FLUSH))===F.Z_NEED_DICT&&c&&(f=\\\"string\\\"==typeof c?N(c):\\\"[object ArrayBuffer]\\\"===M.call(c)?new Uint8Array(c):c,n=T.inflateSetDictionary(this.strm,f)),n===F.Z_BUF_ERROR&&!0===h&&(n=F.Z_OK,h=!1),n!==F.Z_STREAM_END&&n!==F.Z_OK)return this.onEnd(n),this.ended=!0,!1;l.next_out&&(0!==l.avail_out&&n!==F.Z_STREAM_END&&(0!==l.avail_in||a!==F.Z_FINISH&&a!==F.Z_SYNC_FLUSH)||(\\\"string\\\"===this.options.to?(r=I(l.output,l.next_out),o=l.next_out-r,s=D(l.output,r),l.next_out=o,l.avail_out=d-o,o&&i.arraySet(l.output,l.output,r,o,0),this.onData(s)):this.onData(i.shrinkBuf(l.output,l.next_out)))),0===l.avail_in&&0===l.avail_out&&(h=!0)}while((l.avail_in>0||0===l.avail_out)&&n!==F.Z_STREAM_END);return n===F.Z_STREAM_END&&(a=F.Z_FINISH),a===F.Z_FINISH?(n=T.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===F.Z_OK):a!==F.Z_SYNC_FLUSH||(this.onEnd(F.Z_OK),l.avail_out=0,!0)},K.prototype.onData=function(e){this.chunks.push(e)},K.prototype.onEnd=function(e){e===F.Z_OK&&(\\\"string\\\"===this.options.to?this.result=this.chunks.join(\\\"\\\"):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var J={Inflate:K,inflate:P,inflateRaw:function(e,t){return(t=t||{}).raw=!0,P(e,t)},ungzip:P},Y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e),this.dataView=new DataView(t),this.position=0}return e.prototype.skip=function(e){this.position+=e},e.prototype.readBytes=function(e){var t=4===e?\\\"getUint32\\\":2===e?\\\"getUint16\\\":\\\"getUint8\\\",i=this.position;return this.position+=e,this.dataView[t](i,!0)},e}(),G=function(e){for(var t=new Y(e),i={};;){var n=t.readBytes(4);if(67324752!==n){if(33639248!==n)break;V(t)}else{var a=$(t);i[a.name]={buffer:a.buffer}}}return i},$=function(e){var t=0,i=void 0;e.skip(4);var n=e.readBytes(2);e.skip(8);var a=e.readBytes(4);e.skip(4);var r=e.readBytes(2),o=e.readBytes(2),s=[],f=new Uint8Array(a);for(t=0;t<r;t++)s.push(String.fromCharCode(e.readBytes(1)));for(e.skip(o),t=0;t<a;t++)f[t]=e.readBytes(1);switch(n){case 0:i=f;break;case 8:i=new Uint8Array(J.inflate(f,{raw:!0}));break;default:console.log(s.join(\\\"\\\")+\\\": unsupported compression type\\\"),i=f}return{name:s.join(\\\"\\\"),buffer:i}},V=function(e){e.skip(24);var t=e.readBytes(2),i=e.readBytes(2),n=e.readBytes(2);e.skip(12),e.skip(t),e.skip(i),e.skip(n)},X=\\\"function\\\"==typeof Promise?Promise:function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e);var i=function(){};return t((function(){i()})),{then:function(e){i=e}}},q=0,W=void 0,Q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}(this,e),this._id=q,this._listeners={},this.url=t,this.files=null,q++}return e.unzip=function(t){return new X((function(i){var n=new e,a=new FileReader;a.onload=function(e){var t=e.target.result;n.files=G(t),i(n)},t instanceof Blob&&a.readAsArrayBuffer(t)}))},e.prototype.load=function(){var e=this;return new X((function(t){var i=Date.now(),n=new XMLHttpRequest;n.open(\\\"GET\\\",e.url,!0),n.responseType=\\\"arraybuffer\\\",n.onprogress=function(t){e.dispatch({type:\\\"progress\\\",loaded:t.loaded,total:t.total,elapsedTime:Date.now()-i})},n.onload=function(){e.files=G(n.response),e.dispatch({type:\\\"load\\\",elapsedTime:Date.now()-i}),t()},n.send()}))},e.prototype.extractAsBlobUrl=function(e,t){if(this.files[e].url)return this.files[e].url;var i=new Blob([this.files[e].buffer],{type:t});return this.files[e].url=URL.createObjectURL(i),this.files[e].url},e.prototype.extractAsText=function(e){var t=this.files[e].buffer;if(\\\"undefined\\\"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var i=\\\"\\\",n=0,a=t.length;n<a;n++)i+=String.fromCharCode(t[n]);return decodeURIComponent(escape(i))},e.prototype.extractAsJSON=function(e){return JSON.parse(this.extractAsText(e))},e.prototype.loadThreeJSON=function(e){var t=this,i=this.extractAsJSON(e),n=e.replace(/\\\\/.+\\\\.json$/,\\\"/\\\"),a=\\\"__ziploader_\\\"+this._id+\\\"__\\\",r=new RegExp(a);return-1!==!W.Loader.Handlers.handlers.indexOf(r)&&W.Loader.Handlers.add(r,{load:function(e){return t.loadThreeTexture(e.replace(r,\\\"\\\"))}}),W.JSONLoader.prototype.parse(i,a+n)},e.prototype.loadThreeTexture=function(e){var t=new W.Texture,i=/\\\\.jpg$/.test(e)?\\\"image/jpeg\\\":/\\\\.png$/.test(e)?\\\"image/png\\\":/\\\\.gif$/.test(e)?\\\"image/gif\\\":void 0,n=new Blob([this.files[e].buffer],{type:i});return t.image=new Image,t.image.addEventListener(\\\"load\\\",(function e(){t.needsUpdate=!0,t.image.removeEventListener(\\\"load\\\",e),URL.revokeObjectURL(t.image.src)})),t.image.src=URL.createObjectURL(n),t},e.prototype.on=function(e,t){this._listeners[e]||(this._listeners[e]=[]),-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t)},e.prototype.off=function(e,t){var i=this._listeners[e];if(i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}},e.prototype.dispatch=function(e){var t=this._listeners[e.type];if(t){e.target=this;for(var i=t.length,n=0;n<i;n++)t[n].call(this,e)}},e.prototype.clear=function(e){if(e)return URL.revokeObjectURL(this.files[e].url),void delete this.files[e];for(var t in this.files)URL.revokeObjectURL(this.files[t].url);if(delete this.files,W){var i=\\\"__ziploader_\\\"+this._id+\\\"__\\\";W.Loader.Handlers.handlers.some((function(e,t){if(e instanceof RegExp&&e.source===i)return W.Loader.Handlers.handlers.splice(t,2),!0}))}},e.install=function(e){e.THREE&&(W=e.THREE)},e}();function ee(e,t,i,n,a,r,o){try{var s=e[r](o),f=s.value}catch(e){return void i(e)}s.done?t(f):Promise.resolve(f).then(n,a)}function te(e){return function(){var t=this,i=arguments;return new Promise((function(n,a){var r=e.apply(t,i);function o(e){ee(r,n,a,o,s,\\\"next\\\",e)}function s(e){ee(r,n,a,o,s,\\\"throw\\\",e)}o(void 0)}))}}function ie(){return(ie=te((function*(e){const t=new Q(e);return t.load().then((()=>{const e={},i=i=>(e[i]=e[i]||t.extractAsBlobUrl(i),e[i]),n=JSON.parse(t.extractAsText(\\\"scene.gltf\\\"));return n.buffers&&n.buffers.forEach((e=>e.uri=i(e.uri))),n.images&&n.images.forEach((e=>e.uri=i(e.uri))),e[\\\"scene.gtlf\\\"]=URL.createObjectURL(new Blob([JSON.stringify(n,null,2)],{type:\\\"text/plain\\\"})),e}))}))).apply(this,arguments)}self.onmessage=function(){var e=te((function*(e){try{const t=yield function(e){return ie.apply(this,arguments)}(e.data.payload);self.postMessage({id:e.data.id,result:t})}catch(t){self.postMessage({id:e.data.id,err:t.message})}}));return function(t){return e.apply(this,arguments)}}()}();\\n\", \"Worker\", undefined, undefined);\n}\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\n/**\n * Loops the given clip using this entity's animation mixer\n * @component loop-animation\n */\nAFRAME.registerComponent(\"loop-animation\", {\n  schema: {\n    paused: { type: \"boolean\", default: false },\n    /* DEPRECATED: Use activeClipIndex instead since animation names are not unique */\n    clip: { type: \"string\", default: \"\" },\n    activeClipIndex: { type: \"int\", default: 0 },\n    activeClipIndices: { type: \"array\" }\n  },\n\n  init() {\n    this.mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n    this.currentActions = [];\n\n    if (!this.mixerEl) {\n      console.warn(\"loop-animation component could not find an animation-mixer in its ancestors.\");\n      return;\n    }\n  },\n\n  update(oldData) {\n    if (this.mixerEl) {\n      if (oldData.clip !== this.data.clip || oldData.activeClipIndex !== this.data.activeClipIndex) {\n        this.updateClip();\n      }\n\n      if (oldData.paused !== this.data.paused) {\n        for (let i = 0; i < this.currentActions.length; i++) {\n          this.currentActions[i].paused = this.data.paused;\n        }\n      }\n    }\n  },\n\n  updateClip() {\n    const { mixer, animations } = this.mixerEl.components[\"animation-mixer\"];\n    const { clip: clipName, activeClipIndex } = this.data;\n    const { activeClipIndices } = this.data;\n\n    if (animations.length === 0) {\n      return;\n    }\n\n    let clips = [];\n    if (activeClipIndices && activeClipIndices.length > 0) {\n      // Support for Spoke->Hubs activeClipIndices struct\n      clips = activeClipIndices.map(index => animations[index]);\n    } else {\n      // Support for old Spoke->Hubs { clipName, activeClipIndex } struct. Still used for Blender imports.\n      if (clipName !== \"\") {\n        const clipNames = clipName.split(\",\");\n        for (let i = 0; i < clipNames.length; i++) {\n          const n = clipNames[i];\n          const a = animations.find(({ name }) => name === n);\n          if (a) {\n            clips.push(a);\n          } else {\n            console.warn(`Could not find animation named '${n}' in ${this.el.className}`);\n          }\n        }\n      } else {\n        clips = [animations[activeClipIndex]];\n      }\n    }\n\n    if (!(clips && clips.length)) return;\n\n    this.currentActions.length = 0;\n\n    for (let i = 0; i < clips.length; i++) {\n      const action = mixer.clipAction(clips[i], this.el.object3D);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.currentActions.push(action);\n    }\n  },\n\n  destroy() {\n    for (let i = 0; i < this.currentActions.length; i++) {\n      this.currentActions[i].enabled = false;\n      this.currentActions[i].stop();\n    }\n    this.currentActions.length = 0;\n  }\n});\n","const textureToData = new Map();\nconst registeredTextures = [];\n\nexport class UVScrollSystem {\n  tick(dt) {\n    for (let i = 0; i < registeredTextures.length; i++) {\n      const map = registeredTextures[i];\n      const { offset, instances } = textureToData.get(map);\n      const { component } = instances[0];\n\n      offset.addScaledVector(component.data.speed, dt / 1000);\n\n      offset.x = offset.x % 1.0;\n      offset.y = offset.y % 1.0;\n\n      const increment = component.data.increment;\n      map.offset.x = increment.x ? offset.x - (offset.x % increment.x) : offset.x;\n      map.offset.y = increment.y ? offset.y - (offset.y % increment.y) : offset.y;\n    }\n  }\n}\n\n/**\n * Animate the UV offset of a mesh's material\n * @component uv-scroll\n */\nAFRAME.registerComponent(\"uv-scroll\", {\n  schema: {\n    speed: { type: \"vec2\", default: { x: 0, y: 0 } },\n    increment: { type: \"vec2\", default: { x: 0, y: 0 } }\n  },\n  play() {\n    const mesh = this.el.getObject3D(\"mesh\") || this.el.getObject3D(\"skinnedmesh\");\n    const material = mesh && mesh.material;\n    if (material) {\n      // We store mesh here instead of the material directly because we end up swapping out the material in injectCustomShaderChunks.\n      // We need material in the first place because of MobileStandardMaterial\n      const instance = { component: this, mesh };\n\n      this.instance = instance;\n      this.map = material.map || material.emissiveMap;\n\n      if (this.map && !textureToData.has(this.map)) {\n        textureToData.set(this.map, {\n          offset: new THREE.Vector2(),\n          instances: [instance]\n        });\n        registeredTextures.push(this.map);\n      } else if (!this.map) {\n        console.warn(\"Ignoring uv-scroll added to mesh with no scrollable texture.\");\n      } else {\n        console.warn(\n          \"Multiple uv-scroll instances added to objects sharing a texture, only the speed/increment from the first one will have any effect\"\n        );\n        textureToData.get(this.map).instances.push(instance);\n      }\n    }\n  },\n\n  pause() {\n    if (this.map) {\n      const instances = textureToData.get(this.map).instances;\n      instances.splice(instances.indexOf(this.instance), 1);\n      // If this was the last uv-scroll component for a given texture\n      if (!instances.length) {\n        textureToData.delete(this.map);\n        registeredTextures.splice(registeredTextures.indexOf(this.map), 1);\n      }\n    }\n  }\n});\n","function isVisibleUpToRoot(node, root) {\n  let child = node;\n  while (child) {\n    if (child === root) return true;\n    if (!child.visible) return false;\n    child = child.parent;\n  }\n  console.error(`Root ${root} is not an ancestor of node ${node}`);\n  return false;\n}\n\n// HACK Troika Text GlyphGeometry doesn't play nicely with this code. Also it's infinitely thin.\n// We don't particularly care about it's bounds, but its important that they are non zero since\n// other code checks for that case. Fudge it for now with a very small static box.\nconst FAKE_TROIKA_BOUNDS = new THREE.Box3(\n  new THREE.Vector3(-0.001, -0.001, -0.001),\n  new THREE.Vector3(0.001, 0.001, 0.001)\n);\n\n// TODO This whole function is suspect for manually computing bounding boxes when geometry already has code for this\nexport const computeLocalBoundingBox = (function() {\n  const vertex = new THREE.Vector3();\n  const rootInverse = new THREE.Matrix4();\n  const toRootSpace = new THREE.Matrix4();\n  return function computeLocalBoundingBox(root, box, excludeInvisible) {\n    box.makeEmpty();\n    root.updateMatrices();\n    rootInverse.copy(root.matrixWorld).invert();\n    root.traverse(node => {\n      if (excludeInvisible && !isVisibleUpToRoot(node, root)) {\n        return;\n      }\n      node.updateMatrices();\n      toRootSpace.multiplyMatrices(rootInverse, node.matrixWorld);\n      if (node.geometry) {\n        if (node.isTroikaText) {\n          box.union(FAKE_TROIKA_BOUNDS);\n        } else if (node.geometry.isGeometry) {\n          for (let i = 0; i < node.geometry.vertices; i++) {\n            vertex.copy(node.geometry.vertices[i]).applyMatrix4(toRootSpace);\n            if (isNaN(vertex.x)) continue;\n            box.expandByPoint(vertex);\n          }\n        } else if (node.geometry.isBufferGeometry && node.geometry.attributes.position) {\n          const array = node.geometry.attributes.position.array;\n          const itemSize = node.geometry.attributes.position.itemSize;\n          for (let i = 0; i < node.geometry.attributes.position.count; i++) {\n            if (itemSize === 2) {\n              vertex.set(array[2 * i], array[2 * i + 1], 0);\n            } else if (itemSize === 3) {\n              vertex.fromBufferAttribute(node.geometry.attributes.position, i);\n            } else {\n              return;\n            }\n            vertex.applyMatrix4(toRootSpace);\n            if (isNaN(vertex.x)) continue;\n            box.expandByPoint(vertex);\n          }\n        }\n      }\n    });\n  };\n})();\n\n// Computes an AABB that surrounds the object in question and all of its children.\n// Note that if the children have rotations, this probably won't return the tightest\n// possible AABB -- we could return a tighter one if we examined all of the vertices\n// of the geometry for ourselves, but we don't care enough for what we're using this\n// for to do so much work.\nexport const computeObjectAABB = (function() {\n  const bounds = new THREE.Box3();\n  return function computeObjectAABB(root, target, excludeInvisible) {\n    target.makeEmpty();\n    root.updateMatrices();\n    root.traverse(node => {\n      if (excludeInvisible && !isVisibleUpToRoot(node, root)) {\n        return;\n      }\n      node.updateMatrices();\n      const geometry = node.geometry;\n      if (geometry != null) {\n        if (geometry.boundingBox == null) {\n          geometry.computeBoundingBox();\n        }\n        target.union(bounds.copy(geometry.boundingBox).applyMatrix4(node.matrixWorld));\n      }\n    });\n    return target;\n  };\n})();\n\nconst rotation = new THREE.Euler();\nexport function getBox(entity, boxRoot, worldSpace) {\n  const box = new THREE.Box3();\n\n  rotation.copy(entity.object3D.rotation);\n  entity.object3D.rotation.set(0, 0, 0);\n\n  entity.object3D.updateMatrices(true, true);\n  boxRoot.updateMatrices(true, true);\n  boxRoot.updateMatrixWorld(true);\n\n  computeObjectAABB(boxRoot, box, false);\n\n  if (!box.isEmpty()) {\n    if (!worldSpace) {\n      entity.object3D.worldToLocal(box.min);\n      entity.object3D.worldToLocal(box.max);\n    }\n    entity.object3D.rotation.copy(rotation);\n    entity.object3D.matrixNeedsUpdate = true;\n  }\n\n  boxRoot.matrixWorldNeedsUpdate = true;\n  boxRoot.updateMatrices();\n\n  return box;\n}\n\nexport function getScaleCoefficient(length, box) {\n  if (box.isEmpty()) return 1.0;\n\n  const { max, min } = box;\n  const dX = Math.abs(max.x - min.x);\n  const dY = Math.abs(max.y - min.y);\n  const dZ = Math.abs(max.z - min.z);\n  const lengthOfLongestComponent = Math.max(dX, dY, dZ);\n  return length / lengthOfLongestComponent;\n}\n","// TODO: Reintroduce audio normalization\n// import { AudioNormalizer } from \"../utils/audio-normalizer\";\n\nexport const DISTANCE_MODEL_OPTIONS = [\"linear\", \"inverse\", \"exponential\"];\n\nexport const SourceType = Object.freeze({\n  MEDIA_VIDEO: 0,\n  AVATAR_AUDIO_SOURCE: 1,\n  SFX: 2,\n  AUDIO_TARGET: 3,\n  AUDIO_ZONE: 4\n});\n\nexport const AudioType = {\n  Stereo: \"stereo\",\n  PannerNode: \"pannernode\"\n};\n\nexport const DistanceModelType = {\n  Linear: \"linear\",\n  Inverse: \"inverse\",\n  Exponential: \"exponential\"\n};\n\nexport const PanningModelType = Object.freeze({\n  HRTF: \"HRTF\",\n  EqualPower: \"equalpower\"\n});\n\nexport const AvatarAudioDefaults = Object.freeze({\n  audioType: AudioType.PannerNode,\n  distanceModel: DistanceModelType.Inverse,\n  panningModel: PanningModelType.HRTF,\n  rolloffFactor: 5,\n  refDistance: 5,\n  maxDistance: 10000,\n  coneInnerAngle: 180,\n  coneOuterAngle: 360,\n  coneOuterGain: 0.9,\n  gain: 1.0\n});\n\nexport const MediaAudioDefaults = Object.freeze({\n  audioType: AudioType.PannerNode,\n  distanceModel: DistanceModelType.Inverse,\n  panningModel: PanningModelType.HRTF,\n  rolloffFactor: 5,\n  refDistance: 5,\n  maxDistance: 10000,\n  coneInnerAngle: 360,\n  coneOuterAngle: 0,\n  coneOuterGain: 0.9,\n  gain: 0.5\n});\n\nexport const TargetAudioDefaults = Object.freeze({\n  audioType: AudioType.PannerNode,\n  distanceModel: DistanceModelType.Inverse,\n  panningModel: PanningModelType.HRTF,\n  rolloffFactor: 5,\n  refDistance: 8,\n  maxDistance: 10000,\n  coneInnerAngle: 170,\n  coneOuterAngle: 300,\n  coneOuterGain: 0.3,\n  gain: 1.0\n});\n\nexport const GAIN_TIME_CONST = 0.2;\n","import {\n  AudioType,\n  SourceType,\n  PanningModelType,\n  MediaAudioDefaults,\n  AvatarAudioDefaults,\n  TargetAudioDefaults\n} from \"./components/audio-params\";\n\nconst defaultSettingsForSourceType = Object.freeze(\n  new Map([\n    [SourceType.MEDIA_VIDEO, MediaAudioDefaults],\n    [SourceType.AVATAR_AUDIO_SOURCE, AvatarAudioDefaults],\n    [SourceType.AUDIO_TARGET, TargetAudioDefaults]\n  ])\n);\n\nfunction applySettings(audio, settings) {\n  if (audio.panner) {\n    audio.setDistanceModel(settings.distanceModel);\n    audio.setRolloffFactor(settings.rolloffFactor);\n    audio.setRefDistance(settings.refDistance);\n    audio.setMaxDistance(settings.maxDistance);\n    audio.panner.panningModel = settings.panningModel;\n    audio.panner.coneInnerAngle = settings.coneInnerAngle;\n    audio.panner.coneOuterAngle = settings.coneOuterAngle;\n    audio.panner.coneOuterGain = settings.coneOuterGain;\n  }\n  audio.gain.gain.setTargetAtTime(settings.gain, audio.context.currentTime, 0.1);\n}\n\nexport function getOverriddenPanningModelType() {\n  switch (APP.store.state.preferences.audioPanningQuality) {\n    case \"High\":\n      return PanningModelType.HRTF;\n    case \"Low\":\n      return PanningModelType.EqualPower;\n    default:\n      return null;\n  }\n}\n\nexport function getCurrentAudioSettings(el) {\n  const sourceType = APP.sourceType.get(el);\n  const defaults = defaultSettingsForSourceType.get(sourceType);\n  const sceneOverrides = APP.sceneAudioDefaults.get(sourceType);\n  const audioOverrides = APP.audioOverrides.get(el);\n  const audioDebugPanelOverrides = APP.audioDebugPanelOverrides.get(sourceType);\n  const zoneSettings = APP.zoneOverrides.get(el);\n  const preferencesOverrides = {};\n\n  const overriddenPanningModelType = getOverriddenPanningModelType();\n\n  if (overriddenPanningModelType !== null) {\n    preferencesOverrides.panningModel = overriddenPanningModelType;\n  }\n\n  if (APP.store.state.preferences.disableLeftRightPanning) {\n    preferencesOverrides.audioType = AudioType.Stereo;\n  }\n\n  const settings = Object.assign(\n    {},\n    defaults,\n    sceneOverrides,\n    audioOverrides,\n    audioDebugPanelOverrides,\n    zoneSettings,\n    preferencesOverrides\n  );\n\n  if (APP.clippingState.has(el) || APP.mutedState.has(el)) {\n    settings.gain = 0;\n  } else if (APP.gainMultipliers.has(el)) {\n    settings.gain = settings.gain * APP.gainMultipliers.get(el);\n  }\n\n  if (APP.supplementaryAttenuation.has(el)) {\n    settings.gain = settings.gain * APP.supplementaryAttenuation.get(el);\n  }\n\n  return settings;\n}\n\nexport function getCurrentAudioSettingsForSourceType(sourceType) {\n  const defaults = defaultSettingsForSourceType.get(sourceType);\n  const sceneOverrides = APP.sceneAudioDefaults.get(sourceType);\n  const audioDebugPanelOverrides = APP.audioDebugPanelOverrides.get(sourceType);\n  return Object.assign({}, defaults, sceneOverrides, audioDebugPanelOverrides);\n}\n\nexport function updateAudioSettings(el, audio) {\n  // Follow these rules and you'll have a good time:\n  // - If a THREE.Audio or THREE.PositionalAudio is created, call this function.\n  // - If audio settings change, call this function.\n  const settings = getCurrentAudioSettings(el);\n  if (\n    (audio.panner === undefined && settings.audioType === AudioType.PannerNode) ||\n    (audio.panner !== undefined && settings.audioType === AudioType.Stereo)\n  ) {\n    el.emit(\"audio_type_changed\");\n  }\n  applySettings(audio, settings);\n}\n\nexport function shouldAddSupplementaryAttenuation(el, audio) {\n  // Never add supplemental attenuation to audios that have a panner node;\n  // The panner node adds its own attenuation.\n  if (audio.panner) return false;\n\n  // This function must distinguish between Audios that are \"incidentally\"\n  // not PositionalAudios from Audios that are \"purposefully\" not PositionalAudios:\n  // - An audio is \"incidentally\" non-positional if it only non-positional\n  //     because the disableLeftRightPanning pref is set to true, or\n  //     because panner nodes are broken on a particular platform, or\n  //     because of something else like that.\n  // - An audio is \"purposefully\" non-positional if it was authored to be\n  //     a \"background sound\" or otherwise made that way \"on purpose\".\n  //\n  // Authoring tools like Spoke create components where \"audioType : stereo\"\n  // is used to indicate that audio should play in the background without\n  // left/right panning and without distance-based attenuation.\n  //\n  // Those components also include properties like distanceModel, rolloffFactor, etc,\n  // but these properties were assumed to be ignored by the client.\n  // Thus we cannot simply apply the attenuation values we would get if we calculated\n  // attenuation with the provided distanceModel, rolloffFactor, etc.\n  //\n  // Instead, we determine what the audioType would be if it were not for the\n  // \"incidental\" factors. In particular, we check if the audioType would have\n  // been PannerNode if we ignored the overrides due to disableLeftRightPanning and platform\n  // problems (e.g. Safari).\n  //\n  // If the audioType would have been PannerNode, then we should apply \"fake\",\n  // \"supplementary\" attenuation. Otherwise, the audio is purposefully a\n  // \"background sound\" and we should not apply supplementary attenuation.\n  const sourceType = APP.sourceType.get(el);\n  const defaults = defaultSettingsForSourceType.get(sourceType);\n  const sceneOverrides = APP.sceneAudioDefaults.get(sourceType);\n  const audioDebugPanelOverrides = APP.audioDebugPanelOverrides.get(sourceType);\n  const audioOverrides = APP.audioOverrides.get(el);\n  const zoneSettings = APP.zoneOverrides.get(el);\n  const settings = Object.assign({}, defaults, sceneOverrides, audioDebugPanelOverrides, audioOverrides, zoneSettings);\n  return settings.audioType === AudioType.PannerNode;\n}\n","/* global fetch THREE */\nimport URL_TICK from \"../assets/sfx/tick.mp3\";\nimport URL_TELEPORT_LOOP from \"../assets/sfx/teleport-loop.mp3\";\nimport URL_QUICK_TURN from \"../assets/sfx/quickTurn.mp3\";\nimport URL_TAP_MELLOW from \"../assets/sfx/tap_mellow.mp3\";\nimport URL_PEN_SPAWN from \"../assets/sfx/PenSpawn.mp3\";\nimport URL_PEN_DRAW from \"../assets/sfx/PenDraw1.mp3\";\nimport URL_CAMERA_SNAPSHOT from \"../assets/sfx/PicSnapHey.mp3\";\nimport URL_WELCOME from \"../assets/sfx/welcome.mp3\";\nimport URL_QUACK from \"../assets/sfx/quack.mp3\";\nimport URL_SPECIAL_QUACK from \"../assets/sfx/specialquack.mp3\";\nimport URL_POP from \"../assets/sfx/pop.mp3\";\nimport URL_FREEZE from \"../assets/sfx/Eb_blip.mp3\";\nimport URL_TACK from \"../assets/sfx/tack.mp3\";\nimport URL_MEDIA_LOADED from \"../assets/sfx/A_bendUp.mp3\";\nimport URL_MEDIA_LOADING from \"../assets/sfx/suspense.mp3\";\nimport URL_SPAWN_EMOJI from \"../assets/sfx/emoji.mp3\";\nimport URL_SPEAKER_TONE from \"../assets/sfx/tone.mp3\";\nimport { setMatrixWorld } from \"../utils/three-utils\";\nimport { SourceType } from \"../components/audio-params\";\nimport { getOverriddenPanningModelType } from \"../update-audio-settings\";\n\nlet soundEnum = 0;\nexport const SOUND_HOVER_OR_GRAB = soundEnum++;\nexport const SOUND_THAW = soundEnum++;\nexport const SOUND_PEN_STOP_DRAW = soundEnum++;\nexport const SOUND_PEN_UNDO_DRAW = soundEnum++;\nexport const SOUND_PEN_CHANGE_COLOR = soundEnum++;\nexport const SOUND_TOGGLE_MIC = soundEnum++;\nexport const SOUND_TELEPORT_START = soundEnum++;\nexport const SOUND_TELEPORT_END = soundEnum++;\nexport const SOUND_WAYPOINT_START = soundEnum++;\nexport const SOUND_WAYPOINT_END = soundEnum++;\nexport const SOUND_SNAP_ROTATE = soundEnum++;\nexport const SOUND_SPAWN_PEN = soundEnum++;\nexport const SOUND_PEN_START_DRAW = soundEnum++;\nexport const SOUND_CAMERA_TOOL_TOOK_SNAPSHOT = soundEnum++;\nexport const SOUND_ENTER_SCENE = soundEnum++;\nexport const SOUND_QUACK = soundEnum++;\nexport const SOUND_SPECIAL_QUACK = soundEnum++;\nexport const SOUND_CHAT_MESSAGE = soundEnum++;\nexport const SOUND_FREEZE = soundEnum++;\nexport const SOUND_PIN = soundEnum++;\nexport const SOUND_MEDIA_LOADING = soundEnum++;\nexport const SOUND_MEDIA_LOADED = soundEnum++;\nexport const SOUND_CAMERA_TOOL_COUNTDOWN = soundEnum++;\nexport const SOUND_PREFERENCE_MENU_HOVER = soundEnum++;\nexport const SOUND_SPAWN_EMOJI = soundEnum++;\nexport const SOUND_SPEAKER_TONE = soundEnum++;\n\n// Safari doesn't support the promise form of decodeAudioData, so we polyfill it.\nfunction decodeAudioData(audioContext, arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    audioContext.decodeAudioData(arrayBuffer, resolve, reject);\n  });\n}\n\nexport class SoundEffectsSystem {\n  constructor(scene) {\n    this.pendingAudioSourceNodes = [];\n    this.pendingPositionalAudios = [];\n    this.positionalAudiosStationary = [];\n    this.positionalAudiosFollowingObject3Ds = [];\n\n    this.audioContext = THREE.AudioContext.getContext();\n    this.scene = scene;\n\n    const soundsAndUrls = [\n      [SOUND_HOVER_OR_GRAB, URL_TICK],\n      [SOUND_THAW, URL_TICK],\n      [SOUND_PEN_STOP_DRAW, URL_TICK],\n      [SOUND_PEN_UNDO_DRAW, URL_TICK],\n      [SOUND_PEN_CHANGE_COLOR, URL_TICK],\n      [SOUND_TOGGLE_MIC, URL_TICK],\n      [SOUND_CAMERA_TOOL_COUNTDOWN, URL_TICK],\n      [SOUND_TELEPORT_START, URL_TELEPORT_LOOP],\n      [SOUND_TELEPORT_END, URL_QUICK_TURN],\n      [SOUND_WAYPOINT_START, URL_QUICK_TURN],\n      [SOUND_WAYPOINT_END, URL_TICK],\n      [SOUND_SNAP_ROTATE, URL_TAP_MELLOW],\n      [SOUND_SPAWN_PEN, URL_PEN_SPAWN],\n      [SOUND_PEN_START_DRAW, URL_PEN_DRAW],\n      [SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, URL_CAMERA_SNAPSHOT],\n      [SOUND_ENTER_SCENE, URL_WELCOME],\n      [SOUND_QUACK, URL_QUACK],\n      [SOUND_SPECIAL_QUACK, URL_SPECIAL_QUACK],\n      [SOUND_CHAT_MESSAGE, URL_POP],\n      [SOUND_FREEZE, URL_FREEZE],\n      [SOUND_PIN, URL_TACK],\n      [SOUND_MEDIA_LOADING, URL_MEDIA_LOADING],\n      [SOUND_MEDIA_LOADED, URL_MEDIA_LOADED],\n      [SOUND_PREFERENCE_MENU_HOVER, URL_FREEZE],\n      [SOUND_SPAWN_EMOJI, URL_SPAWN_EMOJI],\n      [SOUND_SPEAKER_TONE, URL_SPEAKER_TONE]\n    ];\n    const loading = new Map();\n    const load = url => {\n      let audioBufferPromise = loading.get(url);\n      if (!audioBufferPromise) {\n        audioBufferPromise = fetch(url)\n          .then(r => r.arrayBuffer())\n          .then(arrayBuffer => decodeAudioData(this.audioContext, arrayBuffer));\n        loading.set(url, audioBufferPromise);\n      }\n      return audioBufferPromise;\n    };\n    this.sounds = new Map();\n    soundsAndUrls.map(([sound, url]) => {\n      load(url).then(audioBuffer => {\n        this.sounds.set(sound, audioBuffer);\n      });\n    });\n\n    this.isDisabled = window.APP.store.state.preferences.disableSoundEffects;\n    window.APP.store.addEventListener(\"statechanged\", () => {\n      const shouldBeDisabled = window.APP.store.state.preferences.disableSoundEffects;\n      if (shouldBeDisabled && !this.isDisabled) {\n        this.stopAllPositionalAudios();\n        // TODO: Technically we should stop any other sounds that have been started,\n        // but we do not hold references to these and they're short-lived so I didn't bother.\n      }\n      this.isDisabled = shouldBeDisabled;\n    });\n  }\n\n  enqueueSound(sound, loop) {\n    if (this.isDisabled) return null;\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n    // The nodes are very inexpensive to create, according to\n    // https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode\n    const source = this.audioContext.createBufferSource();\n    source.buffer = audioBuffer;\n    this.scene.systems[\"hubs-systems\"].audioSystem.addAudio({ sourceType: SourceType.SFX, node: source });\n    source.loop = loop;\n    this.pendingAudioSourceNodes.push(source);\n    return source;\n  }\n\n  enqueuePositionalSound(sound, loop) {\n    if (this.isDisabled) return null;\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const disablePositionalAudio = window.APP.store.state.preferences.disableLeftRightPanning;\n    const positionalAudio = disablePositionalAudio\n      ? new THREE.Audio(this.scene.audioListener)\n      : new THREE.PositionalAudio(this.scene.audioListener);\n    positionalAudio.setBuffer(audioBuffer);\n    positionalAudio.loop = loop;\n    if (!disablePositionalAudio) {\n      const overriddenPanningModelType = getOverriddenPanningModelType();\n      if (overriddenPanningModelType !== null) {\n        positionalAudio.panner.panningModel = overriddenPanningModelType;\n      }\n    }\n    this.pendingPositionalAudios.push(positionalAudio);\n    this.scene.systems[\"hubs-systems\"].audioSystem.addAudio({\n      sourceType: SourceType.SFX,\n      node: positionalAudio\n    });\n    return positionalAudio;\n  }\n\n  playPositionalSoundAt(sound, position, loop) {\n    const positionalAudio = this.enqueuePositionalSound(sound, loop);\n    if (!positionalAudio) return null;\n    positionalAudio.position.copy(position);\n    positionalAudio.matrixWorldNeedsUpdate = true;\n    this.positionalAudiosStationary.push(positionalAudio);\n  }\n\n  playPositionalSoundFollowing(sound, object3D, loop) {\n    const positionalAudio = this.enqueuePositionalSound(sound, loop);\n    if (!positionalAudio) return null;\n    this.positionalAudiosFollowingObject3Ds.push({ positionalAudio, object3D });\n    return positionalAudio;\n  }\n\n  playSoundOneShot(sound) {\n    return this.enqueueSound(sound, false);\n  }\n\n  playSoundLooped(sound) {\n    return this.enqueueSound(sound, true);\n  }\n\n  playSoundLoopedWithGain(sound) {\n    if (this.isDisabled) return null;\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const source = this.audioContext.createBufferSource();\n    const gain = this.audioContext.createGain();\n    source.buffer = audioBuffer;\n    source.connect(gain);\n    this.scene.systems[\"hubs-systems\"].audioSystem.addAudio({ sourceType: SourceType.SFX, node: gain });\n    source.loop = true;\n    this.pendingAudioSourceNodes.push(source);\n    return { gain, source };\n  }\n\n  stopSoundNode(node) {\n    const index = this.pendingAudioSourceNodes.indexOf(node);\n    if (index !== -1) {\n      this.pendingAudioSourceNodes.splice(index, 1);\n    } else {\n      node.stop();\n      this.scene.systems[\"hubs-systems\"].audioSystem.removeAudio({ node });\n    }\n  }\n\n  stopPositionalAudio(inPositionalAudio) {\n    const pendingIndex = this.pendingPositionalAudios.indexOf(inPositionalAudio);\n    if (pendingIndex !== -1) {\n      this.pendingPositionalAudios.splice(pendingIndex, 1);\n    } else {\n      if (inPositionalAudio.isPlaying) {\n        inPositionalAudio.stop();\n      }\n      if (inPositionalAudio.parent) {\n        inPositionalAudio.removeFromParent();\n      }\n    }\n    this.positionalAudiosStationary = this.positionalAudiosStationary.filter(\n      positionalAudio => positionalAudio !== inPositionalAudio\n    );\n    this.positionalAudiosFollowingObject3Ds = this.positionalAudiosFollowingObject3Ds.filter(\n      ({ positionalAudio }) => positionalAudio !== inPositionalAudio\n    );\n    this.scene.systems[\"hubs-systems\"].audioSystem.removeAudio({ node: inPositionalAudio });\n  }\n\n  stopAllPositionalAudios() {\n    for (let i = this.positionalAudiosStationary.length - 1; i >= 0; i--) {\n      const positionalAudio = this.positionalAudiosStationary[i];\n      this.stopPositionalAudio(positionalAudio);\n    }\n\n    for (let i = this.positionalAudiosFollowingObject3Ds.length - 1; i >= 0; i--) {\n      const positionalAudioAndObject3D = this.positionalAudiosFollowingObject3Ds[i];\n      const positionalAudio = positionalAudioAndObject3D.positionalAudio;\n      this.stopPositionalAudio(positionalAudio);\n    }\n  }\n\n  tick() {\n    if (this.isDisabled) {\n      return;\n    }\n\n    for (let i = 0; i < this.pendingAudioSourceNodes.length; i++) {\n      this.pendingAudioSourceNodes[i].start();\n    }\n    this.pendingAudioSourceNodes.length = 0;\n\n    for (let i = 0; i < this.pendingPositionalAudios.length; i++) {\n      const pendingPositionalAudio = this.pendingPositionalAudios[i];\n      this.scene.object3D.add(pendingPositionalAudio);\n      pendingPositionalAudio.play();\n    }\n    this.pendingPositionalAudios.length = 0;\n\n    for (let i = this.positionalAudiosStationary.length - 1; i >= 0; i--) {\n      const positionalAudio = this.positionalAudiosStationary[i];\n      if (!positionalAudio.isPlaying) {\n        this.stopPositionalAudio(positionalAudio);\n      }\n    }\n\n    for (let i = this.positionalAudiosFollowingObject3Ds.length - 1; i >= 0; i--) {\n      const positionalAudioAndObject3D = this.positionalAudiosFollowingObject3Ds[i];\n      const positionalAudio = positionalAudioAndObject3D.positionalAudio;\n      const object3D = positionalAudioAndObject3D.object3D;\n      if (!positionalAudio.isPlaying || !object3D.parent) {\n        this.stopPositionalAudio(positionalAudio);\n      } else {\n        object3D.updateMatrices();\n        setMatrixWorld(positionalAudio, object3D.matrixWorld);\n      }\n    }\n  }\n}\n","import { computeObjectAABB, getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport {\n  resolveUrl,\n  getDefaultResolveQuality,\n  injectCustomShaderChunks,\n  addMeshScaleAnimation,\n  closeExistingMediaMirror\n} from \"../utils/media-utils\";\nimport {\n  isNonCorsProxyDomain,\n  guessContentType,\n  proxiedUrlFor,\n  isHubsRoomUrl,\n  isLocalHubsSceneUrl,\n  isLocalHubsAvatarUrl\n} from \"../utils/media-url-utils\";\nimport { addAnimationComponents } from \"../utils/animation\";\n\nimport loadingObjectSrc from \"../assets/models/LoadingObject_Atom.glb\";\nimport { SOUND_MEDIA_LOADING, SOUND_MEDIA_LOADED } from \"../systems/sound-effects-system\";\nimport { loadModel } from \"./gltf-model-plus\";\nimport { cloneObject3D, setMatrixWorld } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nimport { SHAPE } from \"three-ammo/constants\";\nimport { addComponent, entityExists, removeComponent } from \"bitecs\";\nimport { MediaLoading } from \"../bit-components\";\n\nlet loadingObject;\n\nwaitForDOMContentLoaded().then(() => {\n  loadModel(loadingObjectSrc).then(gltf => {\n    loadingObject = gltf;\n  });\n});\n\nconst fetchContentType = url => {\n  return fetch(url, { method: \"HEAD\" }).then(r => r.headers.get(\"content-type\"));\n};\n\nAFRAME.registerComponent(\"media-loader\", {\n  schema: {\n    playSoundEffect: { default: true },\n    fileId: { type: \"string\" },\n    fileIsOwned: { type: \"boolean\" },\n    src: { type: \"string\" },\n    version: { type: \"number\", default: 1 }, // Used to force a re-resolution\n    fitToBox: { default: false },\n    moveTheParentNotTheMesh: { default: false },\n    resolve: { default: false },\n    contentType: { default: null },\n    contentSubtype: { default: null },\n    animate: { default: true },\n    linkedEl: { default: null }, // This is the element of which this is a linked derivative. See linked-media.js\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.onError = this.onError.bind(this);\n    this.showLoader = this.showLoader.bind(this);\n    this.clearLoadingTimeout = this.clearLoadingTimeout.bind(this);\n    this.onMediaLoaded = this.onMediaLoaded.bind(this);\n    this.handleLinkedElRemoved = this.handleLinkedElRemoved.bind(this);\n    this.refresh = this.refresh.bind(this);\n    this.animating = false;\n\n    try {\n      NAF.utils\n        .getNetworkedEntity(this.el)\n        .then(networkedEl => {\n          this.networkedEl = networkedEl;\n        })\n        .catch(() => {}); //ignore exception, entity might not be networked\n    } catch (e) {\n      // NAF may not exist on scene landing page\n    }\n  },\n\n  updateScale: (function() {\n    const center = new THREE.Vector3();\n    const originalMeshMatrix = new THREE.Matrix4();\n    const desiredObjectMatrix = new THREE.Matrix4();\n    const position = new THREE.Vector3();\n    const quaternion = new THREE.Quaternion();\n    const scale = new THREE.Vector3();\n    const box = new THREE.Box3();\n    return function(fitToBox, moveTheParentNotTheMesh) {\n      this.el.object3D.updateMatrices();\n      const mesh = this.el.getObject3D(\"mesh\");\n      mesh.updateMatrices();\n      if (moveTheParentNotTheMesh) {\n        if (fitToBox) {\n          console.warn(\n            \"Unexpected combination of inputs. Can fit the mesh to a box OR move the parent to the mesh, but did not expect to do both.\",\n            this.el\n          );\n        }\n        // Keep the mesh exactly where it is, but move the parent transform such that it aligns with the center of the mesh's bounding box.\n        originalMeshMatrix.copy(mesh.matrixWorld);\n        computeObjectAABB(mesh, box);\n        center.addVectors(box.min, box.max).multiplyScalar(0.5);\n        this.el.object3D.matrixWorld.decompose(position, quaternion, scale);\n        desiredObjectMatrix.compose(\n          center,\n          quaternion,\n          scale\n        );\n        setMatrixWorld(this.el.object3D, desiredObjectMatrix);\n        mesh.updateMatrices();\n        setMatrixWorld(mesh, originalMeshMatrix);\n      } else {\n        // Move the mesh such that the center of its bounding box is in the same position as the parent matrix position\n        const box = getBox(this.el, mesh);\n        const scaleCoefficient = fitToBox ? getScaleCoefficient(0.5, box) : 1;\n        const { min, max } = box;\n        center.addVectors(min, max).multiplyScalar(0.5 * scaleCoefficient);\n        mesh.scale.multiplyScalar(scaleCoefficient);\n        mesh.position.sub(center);\n        mesh.matrixNeedsUpdate = true;\n      }\n    };\n  })(),\n\n  removeShape(id) {\n    if (this.el.getAttribute(\"shape-helper__\" + id)) {\n      this.el.removeAttribute(\"shape-helper__\" + id);\n    }\n  },\n\n  tick(t, dt) {\n    if (this.loaderMixer) {\n      this.loaderMixer.update(dt / 1000);\n    }\n  },\n\n  handleLinkedElRemoved(e) {\n    if (e.detail.name === \"media-loader\") {\n      this.data.linkedEl.removeEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n\n      // this should be revisited if we ever use media linking for something other than media mirroring UX --\n      // right now it is assumed if there is a linkedEl, this is the currently active mirrored media\n      closeExistingMediaMirror();\n    }\n  },\n\n  remove() {\n    if (this.data.linkedEl) {\n      this.data.linkedEl.removeEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n    }\n\n    const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n    if (this.loadingSoundEffect) {\n      sfx.stopPositionalAudio(this.loadingSoundEffect);\n      this.loadingSoundEffect = null;\n    }\n    if (this.loadedSoundEffect) {\n      sfx.stopPositionalAudio(this.loadedSoundEffect);\n      this.loadedSoundEffect = null;\n    }\n  },\n\n  onError() {\n    this.el.removeAttribute(\"gltf-model-plus\");\n    this.el.removeAttribute(\"media-pager\");\n    this.el.removeAttribute(\"media-video\");\n    this.el.removeAttribute(\"audio-zone-source\");\n    this.el.removeAttribute(\"media-pdf\");\n    this.el.setAttribute(\"media-image\", { src: \"error\" });\n    this.clearLoadingTimeout();\n  },\n\n  showLoader() {\n    if (this.el.object3DMap.mesh) {\n      this.clearLoadingTimeout();\n      return;\n    }\n    const useFancyLoader = !!loadingObject;\n\n    const mesh = useFancyLoader\n      ? cloneObject3D(loadingObject.scene)\n      : new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial());\n    this.el.setObject3D(\"mesh\", mesh);\n\n    this.updateScale(true, false);\n\n    if (useFancyLoader) {\n      this.loaderMixer = new THREE.AnimationMixer(mesh);\n\n      this.loadingClip = this.loaderMixer.clipAction(mesh.animations[0]);\n      this.loadingScaleClip = this.loaderMixer.clipAction(\n        new THREE.AnimationClip(null, 1000, [\n          new THREE.VectorKeyframeTrack(\".scale\", [0, 0.2], [0, 0, 0, mesh.scale.x, mesh.scale.y, mesh.scale.z])\n        ])\n      );\n      setTimeout(() => {\n        if (!this.loaderMixer) return; // Animation/loader was stopped early\n        this.el.setAttribute(\"shape-helper__loader\", { type: SHAPE.BOX });\n      }, 200);\n\n      this.loadingClip.play();\n      this.loadingScaleClip.play();\n    }\n\n    if (\n      this.el.sceneEl.is(\"entered\") &&\n      (!this.networkedEl || NAF.utils.isMine(this.networkedEl)) &&\n      this.data.playSoundEffect\n    ) {\n      this.loadingSoundEffect = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n        SOUND_MEDIA_LOADING,\n        this.el.object3D,\n        true\n      );\n    }\n\n    delete this.showLoaderTimeout;\n  },\n\n  clearLoadingTimeout() {\n    clearTimeout(this.showLoaderTimeout);\n    if (this.loadingSoundEffect) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopPositionalAudio(this.loadingSoundEffect);\n      this.loadingSoundEffect = null;\n    }\n    if (this.loaderMixer) {\n      this.loadingClip.stop();\n      this.loadingScaleClip.stop();\n      delete this.loaderMixer;\n      delete this.loadingScaleClip;\n      delete this.loadingClip;\n    }\n    delete this.showLoaderTimeout;\n    this.removeShape(\"loader\");\n  },\n\n  updateHoverableVisuals: (function() {\n    const boundingBox = new THREE.Box3();\n    const boundingSphere = new THREE.Sphere();\n    return function() {\n      const hoverableVisuals = this.el.components[\"hoverable-visuals\"];\n\n      if (hoverableVisuals) {\n        if (!this.injectedCustomShaderChunks) {\n          this.injectedCustomShaderChunks = true;\n          hoverableVisuals.uniforms = injectCustomShaderChunks(this.el.object3D);\n        }\n\n        boundingBox.setFromObject(this.el.object3DMap.mesh);\n        boundingBox.getBoundingSphere(boundingSphere);\n        hoverableVisuals.geometryRadius = boundingSphere.radius / this.el.object3D.scale.y;\n      }\n    };\n  })(),\n\n  onMediaLoaded(physicsShape = null, shouldUpdateScale) {\n    const el = this.el;\n    this.clearLoadingTimeout();\n\n    if (this.el.sceneEl.is(\"entered\") && this.data.playSoundEffect) {\n      this.loadedSoundEffect = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n        SOUND_MEDIA_LOADED,\n        this.el.object3D,\n        false\n      );\n    }\n\n    const finish = () => {\n      this.animating = false;\n\n      if (physicsShape) {\n        el.setAttribute(\"shape-helper\", {\n          type: physicsShape,\n          minHalfExtent: 0.04\n        });\n      }\n\n      this.updateHoverableVisuals();\n\n      if (this.data.linkedEl) {\n        this.el.sceneEl.systems[\"linked-media\"].registerLinkage(this.data.linkedEl, this.el);\n        this.data.linkedEl.addEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n      }\n\n      // TODO this does duplicate work in some cases, but finish() is the only consistent place to do it\n      this.contentBounds = getBox(this.el, this.el.getObject3D(\"mesh\")).getSize(new THREE.Vector3());\n\n      el.emit(\"media-loaded\");\n      if (el.eid && entityExists(APP.world, el.eid)) {\n        removeComponent(APP.world, MediaLoading, el.eid);\n      }\n    };\n\n    if (this.data.animate) {\n      if (!this.animating) {\n        this.animating = true;\n        if (shouldUpdateScale) this.updateScale(this.data.fitToBox, this.data.moveTheParentNotTheMesh);\n        const mesh = this.el.getObject3D(\"mesh\");\n        const scale = { x: 0.001, y: 0.001, z: 0.001 };\n        scale.x = mesh.scale.x < scale.x ? mesh.scale.x * 0.001 : scale.x;\n        scale.y = mesh.scale.y < scale.y ? mesh.scale.x * 0.001 : scale.y;\n        scale.z = mesh.scale.z < scale.z ? mesh.scale.x * 0.001 : scale.z;\n        addMeshScaleAnimation(mesh, scale, finish);\n      }\n    } else {\n      if (shouldUpdateScale) this.updateScale(this.data.fitToBox, this.data.moveTheParentNotTheMesh);\n      finish();\n    }\n  },\n\n  refresh() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n\n    // When we refresh, we bump the version to the current timestamp.\n    //\n    // The only use-case for refresh right now is re-fetching screenshots.\n    this.el.setAttribute(\"media-loader\", { version: Math.floor(Date.now() / 1000) });\n  },\n\n  async update(oldData, forceLocalRefresh) {\n    const { version, contentSubtype } = this.data;\n    let src = this.data.src;\n    if (!src) return;\n\n    const srcChanged = oldData.src !== src;\n    const versionChanged = !!(oldData.version && oldData.version !== version);\n\n    if (versionChanged) {\n      this.el.emit(\"media_refreshing\");\n\n      // Don't animate if its a refresh.\n      this.data.animate = false;\n\n      // Play the sound effect on a refresh only if we are the owner\n      this.data.playSoundEffect = NAF.utils.isMine(this.networkedEl);\n    }\n\n    if (forceLocalRefresh) {\n      this.el.removeAttribute(\"gltf-model-plus\");\n      this.el.removeAttribute(\"media-pager\");\n      this.el.removeAttribute(\"media-video\");\n      this.el.removeAttribute(\"audio-zone-source\");\n      this.el.removeAttribute(\"media-pdf\");\n      this.el.removeAttribute(\"media-image\");\n    }\n\n    try {\n      if ((forceLocalRefresh || srcChanged) && !this.showLoaderTimeout) {\n        this.showLoaderTimeout = setTimeout(this.showLoader, 100);\n        addComponent(APP.world, MediaLoading, this.el.eid);\n      }\n\n      //check if url is an anchor hash e.g. #Spawn_Point_1\n      if (src.charAt(0) === \"#\") {\n        src = this.data.src = `${window.location.origin}${window.location.pathname}${window.location.search}${src}`;\n      }\n\n      let canonicalUrl = src;\n      let canonicalAudioUrl = null; // set non-null only if audio track is separated from video track (eg. 360 video)\n      let accessibleUrl = src;\n      let contentType = this.data.contentType;\n      let thumbnail;\n\n      const parsedUrl = new URL(src);\n\n      // We want to resolve and proxy some hubs urls, like rooms and scene links,\n      // but want to avoid proxying assets in order for this to work in dev environments\n      const isLocalModelAsset =\n        isNonCorsProxyDomain(parsedUrl.hostname) && (guessContentType(src) || \"\").startsWith(\"model/gltf\");\n\n      if (this.data.resolve && !src.startsWith(\"data:\") && !src.startsWith(\"hubs:\") && !isLocalModelAsset) {\n        const is360 = !!(this.data.mediaOptions.projection && this.data.mediaOptions.projection.startsWith(\"360\"));\n        const quality = getDefaultResolveQuality(is360);\n        const result = await resolveUrl(src, quality, version, forceLocalRefresh);\n        canonicalUrl = result.origin;\n\n        // handle protocol relative urls\n        if (canonicalUrl.startsWith(\"//\")) {\n          canonicalUrl = location.protocol + canonicalUrl;\n        }\n\n        canonicalAudioUrl = result.origin_audio;\n        if (canonicalAudioUrl && canonicalAudioUrl.startsWith(\"//\")) {\n          canonicalAudioUrl = location.protocol + canonicalAudioUrl;\n        }\n\n        contentType = (result.meta && result.meta.expected_content_type) || contentType;\n        thumbnail = result.meta && result.meta.thumbnail && proxiedUrlFor(result.meta.thumbnail);\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl);\n\n      // if the component creator didn't know the content type, we didn't get it from reticulum, and\n      // we don't think we can infer it from the extension, we need to make a HEAD request to find it out\n      contentType = contentType || guessContentType(canonicalUrl) || (await fetchContentType(accessibleUrl));\n\n      // TODO we should probably just never return \"application/octet-stream\" as expectedContentType, since its not really useful\n      if (contentType === \"application/octet-stream\") {\n        contentType = guessContentType(canonicalUrl) || contentType;\n      }\n\n      // Some servers treat m3u8 playlists as \"audio/x-mpegurl\", we always want to treat them as HLS videos\n      if (contentType === \"audio/x-mpegurl\" || contentType === \"audio/mpegurl\") {\n        contentType = \"application/vnd.apple.mpegurl\";\n      }\n\n      // We don't want to emit media_resolved for index updates.\n      if (forceLocalRefresh || srcChanged) {\n        this.el.emit(\"media_resolved\", { src, raw: accessibleUrl, contentType });\n      } else {\n        this.el.emit(\"media_refreshed\", { src, raw: accessibleUrl, contentType });\n      }\n\n      if (\n        contentType.startsWith(\"video/\") ||\n        contentType.startsWith(\"audio/\") ||\n        contentType.startsWith(\"application/dash\") ||\n        AFRAME.utils.material.isHLS(canonicalUrl, contentType)\n      ) {\n        let linkedVideoTexture, linkedAudioSource, linkedMediaElementAudioSource;\n        if (this.data.linkedEl) {\n          const linkedMediaVideo = this.data.linkedEl.components[\"media-video\"];\n\n          linkedVideoTexture = linkedMediaVideo.videoTexture;\n          linkedAudioSource = linkedMediaVideo.audioSource;\n          linkedMediaElementAudioSource = linkedMediaVideo.mediaElementAudioSource;\n        }\n\n        const qsTime = parseInt(parsedUrl.searchParams.get(\"t\"));\n        const hashTime = parseInt(new URLSearchParams(parsedUrl.hash.substring(1)).get(\"t\"));\n        const startTime = hashTime || qsTime || 0;\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"video-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\n          \"media-video\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            audioSrc: canonicalAudioUrl ? proxiedUrlFor(canonicalAudioUrl) : null,\n            time: startTime,\n            contentType,\n            linkedVideoTexture,\n            linkedAudioSource,\n            linkedMediaElementAudioSource\n          })\n        );\n        this.el.setAttribute(\"audio-zone-source\", {});\n        if (this.el.components[\"position-at-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-border__freeze\", { isFlat: true });\n        }\n        if (this.el.components[\"position-at-border__freeze-unprivileged\"]) {\n          this.el.setAttribute(\"position-at-border__freeze-unprivileged\", { isFlat: true });\n        }\n      } else if (contentType.startsWith(\"image/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"audio-zone-source\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n\n            if (contentSubtype === \"photo-camera\") {\n              this.el.setAttribute(\"hover-menu__photo\", {\n                template: \"#photo-hover-menu\",\n                isFlat: true\n              });\n            } else if (this.data.mediaOptions.href) {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", isFlat: true });\n            }\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            version,\n            contentType\n          })\n        );\n\n        if (this.el.components[\"position-at-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-border__freeze\", { isFlat: true });\n        }\n        if (this.el.components[\"position-at-border__freeze-unprivileged\"]) {\n          this.el.setAttribute(\"position-at-border__freeze-unprivileged\", { isFlat: true });\n        }\n      } else if (contentType.startsWith(\"application/pdf\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"audio-zone-source\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.setAttribute(\n          \"media-pdf\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType\n          })\n        );\n        this.el.setAttribute(\"media-pager\", {});\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"pdf-loaded\",\n          () => {\n            this.clearLoadingTimeout();\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n\n        if (this.el.components[\"position-at-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-border__freeze\", { isFlat: true });\n        }\n        if (this.el.components[\"position-at-border__freeze-unprivileged\"]) {\n          this.el.setAttribute(\"position-at-border__freeze-unprivileged\", { isFlat: true });\n        }\n      } else if (\n        contentType.includes(\"application/octet-stream\") ||\n        contentType.includes(\"x-zip-compressed\") ||\n        contentType.startsWith(\"model/gltf\")\n      ) {\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"audio-zone-source\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"model-loaded\",\n          () => {\n            this.onMediaLoaded(SHAPE.HULL, true);\n            addAnimationComponents(this.el);\n          },\n          { once: true }\n        );\n        this.el.addEventListener(\"model-error\", this.onError, { once: true });\n        if (this.data.mediaOptions.hasOwnProperty(\"applyGravity\")) {\n          this.el.setAttribute(\"floaty-object\", {\n            modifyGravityOnRelease: !this.data.mediaOptions.applyGravity\n          });\n        }\n        this.el.setAttribute(\n          \"gltf-model-plus\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType: contentType,\n            inflate: true,\n            modelToWorldScale: this.data.fitToBox ? 0.0001 : 1.0\n          })\n        );\n      } else if (contentType.startsWith(\"text/html\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"audio-zone-source\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          async () => {\n            const mayChangeScene = this.el.sceneEl.systems.permissions.can(\"update_hub\");\n\n            if (await isLocalHubsAvatarUrl(src)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#avatar-link-hover-menu\",\n                isFlat: true\n              });\n            } else if ((await isHubsRoomUrl(src)) || ((await isLocalHubsSceneUrl(src)) && mayChangeScene)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#hubs-destination-hover-menu\",\n                isFlat: true\n              });\n            } else {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", isFlat: true });\n            }\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: thumbnail,\n            version,\n            contentType: guessContentType(thumbnail) || \"image/png\"\n          })\n        );\n        if (this.el.components[\"position-at-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-border__freeze\", { isFlat: true });\n        }\n        if (this.el.components[\"position-at-border__freeze-unprivileged\"]) {\n          this.el.setAttribute(\"position-at-border__freeze-unprivileged\", { isFlat: true });\n        }\n      } else {\n        throw new Error(`Unsupported content type: ${contentType}`);\n      }\n    } catch (e) {\n      if (this.el.components[\"position-at-border__freeze\"]) {\n        this.el.setAttribute(\"position-at-border__freeze\", { isFlat: true });\n      }\n      if (this.el.components[\"position-at-border__freeze-unprivileged\"]) {\n        this.el.setAttribute(\"position-at-border__freeze-unprivileged\", { isFlat: true });\n      }\n      console.error(\"Error adding media\", e);\n      this.onError();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-pager\", {\n  schema: {\n    index: { default: 0 },\n    maxIndex: { default: 0 }\n  },\n\n  init() {\n    this.onNext = this.onNext.bind(this);\n    this.onPrev = this.onPrev.bind(this);\n    this.onSnap = this.onSnap.bind(this);\n    this.update = this.update.bind(this);\n\n    this.el.setAttribute(\"hover-menu__pager\", { template: \"#pager-hover-menu\", isFlat: true });\n    this.el.components[\"hover-menu__pager\"].getHoverMenu().then(menu => {\n      // If we got removed while waiting, do nothing.\n      if (!this.el.parentNode) return;\n\n      this.hoverMenu = menu;\n      this.nextButton = this.el.querySelector(\".next-button [text-button]\");\n      this.prevButton = this.el.querySelector(\".prev-button [text-button]\");\n      this.snapButton = this.el.querySelector(\".snap-button [text-button]\");\n      this.pageLabel = this.el.querySelector(\".page-label\");\n\n      this.nextButton.object3D.addEventListener(\"interact\", this.onNext);\n      this.prevButton.object3D.addEventListener(\"interact\", this.onPrev);\n      this.snapButton.object3D.addEventListener(\"interact\", this.onSnap);\n\n      this.update();\n      this.el.emit(\"pager-loaded\");\n    });\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkedEl.addEventListener(\"pinned\", this.update);\n        this.networkedEl.addEventListener(\"unpinned\", this.update);\n        window.APP.hubChannel.addEventListener(\"permissions_updated\", this.update);\n      })\n      .catch(() => {}); //ignore exception, entity might not be networked\n\n    this.el.addEventListener(\"pdf-loaded\", this.update);\n  },\n\n  async update(oldData) {\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      if (oldData && typeof oldData.index === \"number\" && oldData.index !== this.data.index) {\n        this.el.emit(\"owned-pager-page-changed\");\n      }\n    }\n\n    if (this.pageLabel) {\n      this.pageLabel.setAttribute(\"text\", \"value\", `${this.data.index + 1}/${this.data.maxIndex + 1}`);\n    }\n\n    if (this.prevButton && this.nextButton) {\n      const pinnableElement = this.el.components[\"media-loader\"].data.linkedEl || this.el;\n      const isPinned = pinnableElement.components.pinnable && pinnableElement.components.pinnable.data.pinned;\n      this.prevButton.object3D.visible = this.nextButton.object3D.visible =\n        !isPinned || window.APP.hubChannel.can(\"pin_objects\");\n    }\n  },\n\n  onNext() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    const newIndex = Math.min(this.data.index + 1, this.data.maxIndex);\n    this.el.setAttribute(\"media-pdf\", \"index\", newIndex);\n    this.el.setAttribute(\"media-pager\", \"index\", newIndex);\n  },\n\n  onPrev() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    const newIndex = Math.max(this.data.index - 1, 0);\n    this.el.setAttribute(\"media-pdf\", \"index\", newIndex);\n    this.el.setAttribute(\"media-pager\", \"index\", newIndex);\n  },\n\n  onSnap() {\n    this.el.emit(\"pager-snap-clicked\");\n  },\n\n  remove() {\n    if (this.networkedEl) {\n      this.networkedEl.removeEventListener(\"pinned\", this.update);\n      this.networkedEl.removeEventListener(\"unpinned\", this.update);\n    }\n\n    this.nextButton.object3D.removeEventListener(\"interact\", this.onNext);\n    this.prevButton.object3D.removeEventListener(\"interact\", this.onPrev);\n    this.snapButton.object3D.removeEventListener(\"interact\", this.onSnap);\n\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.update);\n\n    this.el.removeEventListener(\"pdf-loaded\", this.update);\n  }\n});\n","export function addAnimationComponents(modelEl) {\n  if (!modelEl.components[\"animation-mixer\"]) {\n    return;\n  }\n\n  if (!modelEl.querySelector(\"[loop-animation]\")) {\n    modelEl.setAttribute(\"loop-animation\", \"\");\n  }\n}\n","import { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"quack\", {\n  schema: {\n    quackPercentage: { default: 1 },\n    specialQuackPercentage: { default: 0.01 }\n  },\n\n  init: function() {\n    this.wasInteracting = false;\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n      this.networkedEntity = networkedEntity;\n    });\n  },\n\n  tick: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const isInteracting = interaction.isHeld(this.networkedEntity || this.el);\n\n    if (isInteracting && !this.wasInteracting) {\n      this.quack();\n    }\n\n    this.wasInteracting = isInteracting;\n  },\n\n  quack: function() {\n    const rand = Math.random();\n    if (rand < this.data.specialQuackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n    } else if (rand < this.data.quackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n    }\n  }\n});\n","export const paths = {};\npaths.noop = \"/noop\";\npaths.actions = {};\npaths.actions.log = \"/actions/log\";\npaths.actions.toggleScreenShare = \"/actions/toggleScreenShare\";\npaths.actions.snapRotateLeft = \"/actions/snapRotateLeft\";\npaths.actions.snapRotateRight = \"/actions/snapRotateRight\";\npaths.actions.angularVelocity = \"/actions/angularVelocity\";\npaths.actions.logDebugFrame = \"/actions/logDebugFrame\";\npaths.actions.logInteractionState = \"/actions/logInteractionState\";\npaths.actions.debugUserInput = {};\npaths.actions.debugUserInput.describeCurrentMasks = \"/actions/debugUserInput/describeCurrentMasks\";\npaths.actions.cameraDelta = \"/actions/cameraDelta\";\npaths.actions.lobbyCameraDelta = \"/actions/lobbyCameraDelta\";\npaths.actions.characterAcceleration = \"/actions/characterAcceleration\";\npaths.actions.dCharSpeed = \"/actions/dCharSpeed\";\npaths.actions.boost = \"/actions/boost\";\npaths.actions.startGazeTeleport = \"/actions/startTeleport\";\npaths.actions.stopGazeTeleport = \"/actions/stopTeleport\";\npaths.actions.spawnPen = \"/actions/spawnPen\";\npaths.actions.ensureFrozen = \"/actions/ensureFrozen\";\npaths.actions.toggleFreeze = \"/actions/toggleFreeze\";\npaths.actions.thaw = \"/actions/thaw\";\npaths.actions.muteMic = \"/actions/muteMic\";\npaths.actions.toggleFly = \"/actions/toggleFly\";\npaths.actions.toggleUI = \"/actions/toggleUI\";\npaths.actions.waypointDeltaDistance = \"/actions/waypointDeltaDistance\";\npaths.actions.focusChat = \"/actions/focusChat\";\npaths.actions.focusChatCommand = \"/actions/focusChatCommand\";\npaths.actions.toggleCamera = \"/actions/toggleCamera\";\npaths.actions.takeSnapshot = \"/actions/takeSnapshot\";\npaths.actions.mediaExit = \"/actions/mediaExit\";\npaths.actions.mediaSearch1 = \"/actions/mediaSearch1\";\npaths.actions.mediaSearch2 = \"/actions/mediaSearch2\";\npaths.actions.mediaSearch3 = \"/actions/mediaSearch3\";\npaths.actions.mediaSearch4 = \"/actions/mediaSearch4\";\npaths.actions.mediaSearch5 = \"/actions/mediaSearch5\";\npaths.actions.mediaSearch6 = \"/actions/mediaSearch6\";\npaths.actions.mediaSearch7 = \"/actions/mediaSearch7\";\npaths.actions.mediaSearch8 = \"/actions/mediaSearch8\";\npaths.actions.transformModifier = \"/actions/transformModifier\";\npaths.actions.rayObjectRotation = \"/actions/rayObjectRotation\";\npaths.actions.cursor = {};\npaths.actions.cursor.right = {};\npaths.actions.cursor.right.pose = \"/actions/cursor/right/Pose\";\npaths.actions.cursor.right.hideLine = \"/actions/cursor/right/HideLine\";\npaths.actions.cursor.right.grab = \"/actions/cursor/right/Grab\";\npaths.actions.cursor.right.drop = \"/actions/cursor/right/Drop\";\npaths.actions.cursor.right.modDelta = \"/actions/cursor/right/ModDelta\";\npaths.actions.cursor.right.startDrawing = \"/actions/cursor/right/StartDrawing\";\npaths.actions.cursor.right.stopDrawing = \"/actions/cursor/right/StopDrawing\";\npaths.actions.cursor.right.undoDrawing = \"/actions/cursor/right/UndoDrawing\";\npaths.actions.cursor.right.penNextColor = \"/actions/cursor/right/PenNextColor\";\npaths.actions.cursor.right.penPrevColor = \"/actions/cursor/right/PenPrevColor\";\npaths.actions.cursor.right.scalePenTip = \"/actions/cursor/right/ScalePenTip\";\npaths.actions.cursor.right.scaleGrabbedGrabbable = \"/actions/cursor/right/ScaleGrabbedGrabbable\";\npaths.actions.cursor.right.mediaVolumeMod = \"/actions/cursor/right//mediaVolumeMod\";\npaths.actions.cursor.right.takeSnapshot = \"/actions/cursor/right/TakeSnapshot\";\npaths.actions.cursor.right.wake = \"/actions/cursor/right/wake\";\npaths.actions.cursor.left = {};\npaths.actions.cursor.left.pose = \"/actions/cursor/left/Pose\";\npaths.actions.cursor.left.hideLine = \"/actions/cursor/left/HideLine\";\npaths.actions.cursor.left.grab = \"/actions/cursor/left/Grab\";\npaths.actions.cursor.left.drop = \"/actions/cursor/left/Drop\";\npaths.actions.cursor.left.modDelta = \"/actions/cursor/left/ModDelta\";\npaths.actions.cursor.left.startDrawing = \"/actions/cursor/left/StartDrawing\";\npaths.actions.cursor.left.stopDrawing = \"/actions/cursor/left/StopDrawing\";\npaths.actions.cursor.left.undoDrawing = \"/actions/cursor/left/UndoDrawing\";\npaths.actions.cursor.left.penNextColor = \"/actions/cursor/left/PenNextColor\";\npaths.actions.cursor.left.penPrevColor = \"/actions/cursor/left/PenPrevColor\";\npaths.actions.cursor.left.scalePenTip = \"/actions/cursor/left/ScalePenTip\";\npaths.actions.cursor.left.scaleGrabbedGrabbable = \"/actions/cursor/left/ScaleGrabbedGrabbable\";\npaths.actions.cursor.left.mediaVolumeMod = \"/actions/cursor/left//mediaVolumeMod\";\npaths.actions.cursor.left.takeSnapshot = \"/actions/cursor/left/TakeSnapshot\";\npaths.actions.cursor.left.wake = \"/actions/cursor/left/wake\";\npaths.actions.pen = {};\npaths.actions.pen.remove = \"/actions/pen/remove\";\npaths.actions.rightHand = {};\npaths.actions.rightHand.matrix = \"/actions/rightHand/matrix\";\npaths.actions.rightHand.pose = \"/actions/rightHandPose\";\npaths.actions.rightHand.grab = \"/actions/rightHandGrab\";\npaths.actions.rightHand.drop = \"/actions/rightHandDrop\";\npaths.actions.rightHand.modDelta = \"/actions/rightHandModDelta\";\npaths.actions.rightHand.startDrawing = \"/actions/rightHandStartDrawing\";\npaths.actions.rightHand.stopDrawing = \"/actions/rightHandStopDrawing\";\npaths.actions.rightHand.undoDrawing = \"/actions/rightHandUndoDrawing\";\npaths.actions.rightHand.switchDrawMode = \"/actions/rightHandSwitchDrawMode\";\npaths.actions.rightHand.penNextColor = \"/actions/rightHandPenNextColor\";\npaths.actions.rightHand.penPrevColor = \"/actions/rightHandPenPrevColor\";\npaths.actions.rightHand.scalePenTip = \"/actions/rightHandScalePenTip\";\npaths.actions.rightHand.startTeleport = \"/actions/rightHand/startTeleport\";\npaths.actions.rightHand.stopTeleport = \"/actions/rightHand/stopTeleport\";\npaths.actions.rightHand.takeSnapshot = \"/actions/rightHandTakeSnapshot\";\npaths.actions.rightHand.thumb = \"/actions/rightHand/thumbDown\";\npaths.actions.rightHand.index = \"/actions/rightHand/indexDown\";\npaths.actions.rightHand.middleRingPinky = \"/actions/rightHand/middleRingPinkyDown\";\npaths.actions.leftHand = {};\npaths.actions.leftHand.matrix = \"/actions/leftHand/matrix\";\npaths.actions.leftHand.pose = \"/actions/leftHandPose\";\npaths.actions.leftHand.grab = \"/actions/leftHandGrab\";\npaths.actions.leftHand.drop = \"/actions/leftHandDrop\";\npaths.actions.leftHand.modDelta = \"/actions/leftHandModDelta\";\npaths.actions.leftHand.startDrawing = \"/actions/leftHandStartDrawing\";\npaths.actions.leftHand.stopDrawing = \"/actions/leftHandStopDrawing\";\npaths.actions.leftHand.undoDrawing = \"/actions/leftHandUndoDrawing\";\npaths.actions.leftHand.switchDrawMode = \"/actions/leftHandSwitchDrawMode\";\npaths.actions.leftHand.penNextColor = \"/actions/leftHandPenNextColor\";\npaths.actions.leftHand.penPrevColor = \"/actions/leftHandPenPrevColor\";\npaths.actions.leftHand.scalePenTip = \"/actions/leftHandScalePenTip\";\npaths.actions.leftHand.startTeleport = \"/actions/leftHand/startTeleport\";\npaths.actions.leftHand.stopTeleport = \"/actions/leftHand/stopTeleport\";\npaths.actions.leftHand.takeSnapshot = \"/actions/leftHandTakeSnapshot\";\npaths.actions.leftHand.thumb = \"/actions/leftHand/thumbDown\";\npaths.actions.leftHand.index = \"/actions/leftHand/indexDown\";\npaths.actions.leftHand.middleRingPinky = \"/actions/leftHand/middleRingPinkyDown\";\npaths.actions.camera = {};\npaths.actions.camera.exitMirror = \"/actions/cameraExitMirror\";\npaths.actions.startInspecting = \"/actions/startInspecting\";\npaths.actions.startInspectingSelf = \"/actions/startInspectingSelf\";\npaths.actions.stopInspecting = \"/actions/stopInspecting\";\npaths.actions.inspectZoom = \"/actions/inspectZoom\";\npaths.actions.inspectPanY = \"/actions/inspectPanY\";\npaths.actions.resetInspectView = \"/actions/resetInspectView\";\npaths.actions.nextCameraMode = \"/actions/nextCameraMode\";\npaths.actions.spawnEmoji0 = \"/actions/spawnEmoji0\";\npaths.actions.spawnEmoji1 = \"/actions/spawnEmoji1\";\npaths.actions.spawnEmoji2 = \"/actions/spawnEmoji2\";\npaths.actions.spawnEmoji3 = \"/actions/spawnEmoji3\";\npaths.actions.spawnEmoji4 = \"/actions/spawnEmoji4\";\npaths.actions.spawnEmoji5 = \"/actions/spawnEmoji5\";\npaths.actions.spawnEmoji6 = \"/actions/spawnEmoji6\";\npaths.haptics = {};\npaths.haptics.actuators = {};\npaths.haptics.actuators.left = \"/haptics/actuators/left\";\npaths.haptics.actuators.right = \"/haptics/actuators/right\";\n\npaths.device = {};\npaths.device.mouse = {};\npaths.device.mouse.coords = \"/device/mouse/coords\";\npaths.device.mouse.movementXY = \"/device/mouse/movementXY\";\npaths.device.mouse.buttonLeft = \"/device/mouse/buttonLeft\";\npaths.device.mouse.buttonRight = \"/device/mouse/buttonRight\";\npaths.device.mouse.buttonMiddle = \"/device/mouse/buttonMiddle\";\npaths.device.mouse.wheel = \"/device/mouse/wheel\";\npaths.device.smartMouse = {};\npaths.device.smartMouse.cursorPose = \"/device/smartMouse/cursorPose\";\npaths.device.smartMouse.cameraDelta = \"/device/smartMouse/cameraDelta\";\npaths.device.smartMouse.shouldMoveCamera = \"/device/smartMouse/shouldMoveCamera\";\npaths.device.touchscreen = {};\npaths.device.touchscreen.cursorPose = \"/device/touchscreen/cursorPose\";\npaths.device.touchscreen.touchCameraDelta = \"/device/touchscreen/touchCameraDelta\";\npaths.device.touchscreen.gyroCameraDelta = \"/device/touchscreen/gyroCameraDelta\";\npaths.device.touchscreen.cameraDelta = \"/device/touchscreen/cameraDelta\";\npaths.device.touchscreen.pinch = {};\npaths.device.touchscreen.pinch.delta = \"/device/touchscreen/pinch/delta\";\npaths.device.touchscreen.pinch.initialDistance = \"/device/touchscreen/pinch/initialDistance\";\npaths.device.touchscreen.pinch.currentDistance = \"/device/touchscreen/pinch/currentDistance\";\npaths.device.touchscreen.isTouching = \"/device/touchscreen/isTouching\";\npaths.device.touchscreen.isTouchingGrabbable = \"/device/touchscreen/isTouchingGrabbable\";\npaths.device.touchscreen.tap1 = \"/device/touchscreen/tap1\";\npaths.device.touchscreen.tap2 = \"/device/touchscreen/tap2\";\npaths.device.touchscreen.tap3 = \"/device/touchscreen/tap3\";\npaths.device.touchscreen.tap4 = \"/device/touchscreen/tap4\";\npaths.device.touchscreen.tap5 = \"/device/touchscreen/tap5\";\npaths.device.touchscreen.anything = \"/device/touchscreen/anything\";\npaths.device.gyro = {};\npaths.device.gyro.averageDeltaX = \"/device/gyro/averageDeltaX\";\npaths.device.gyro.averageDeltaY = \"/device/gyro/averageDeltaY\";\npaths.device.hud = {};\npaths.device.hud.penButton = \"/device/hud/penButton\";\n\npaths.device.keyboard = {\n  map: new Map(),\n  key: function(k) {\n    let path = this.map.get(k);\n    if (path) {\n      return path;\n    }\n    path = `/device/keyboard/${k === \" \" ? \"space\" : k.toLowerCase()}`;\n    this.map.set(k, path);\n    return path;\n  }\n};\n\npaths.device.gamepad = gamepadIndex => ({\n  button: buttonIndex => ({\n    pressed: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/pressed`,\n    touched: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/touched`,\n    value: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/value`\n  }),\n  axis: axisIndex => `/device/gamepad/${gamepadIndex}/axis/${axisIndex}`\n});\n\nconst xbox = \"/device/xbox/\";\npaths.device.xbox = {\n  v: name => `/vars/xbox/${name}`,\n  button: buttonName => ({\n    pressed: `${xbox}button/${buttonName}/pressed`,\n    touched: `${xbox}button/${buttonName}/touched`,\n    value: `${xbox}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${xbox}axis/${axisName}`;\n  },\n  axesSum: `${xbox}axis/sum`\n};\n\npaths.device.oculusgo = {\n  // TODO remove these in favor of the direct accessors\n  button: buttonName => ({\n    pressed: `/device/oculusgo/button/${buttonName}/pressed`,\n    touched: `/device/oculusgo/button/${buttonName}/touched`,\n    value: `/device/oculusgo/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/oculusgo/axis/${axisName}`;\n  },\n  //\n  trigger: {\n    pressed: \"/device/oculusgo/button/trigger/pressed\",\n    touched: \"/device/oculusgo/button/trigger/touched\",\n    value: \"/device/oculusgo/button/trigger/value\"\n  },\n  touchpad: {\n    pressed: \"/device/oculusgo/button/touchpad/pressed\",\n    touched: \"/device/oculusgo/button/touchpad/touched\",\n    value: \"/device/oculusgo/button/touchpad/value\",\n    axisX: \"/device/oculusgo/axis/touchpadX\",\n    axisY: \"/device/oculusgo/axis/touchpadY\"\n  },\n  pose: \"/device/oculusgo/pose\",\n  matrix: \"/device/oculusgo/matrix\",\n  v: name => {\n    return `/vars/oculusgo/${name}`;\n  }\n};\n\nconst gearVRController = \"/device/gearVRController/\";\npaths.device.gearVRController = {\n  button: buttonName => ({\n    pressed: `${gearVRController}button/${buttonName}/pressed`,\n    touched: `${gearVRController}button/${buttonName}/touched`,\n    value: `${gearVRController}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${gearVRController}axis/${axisName}`;\n  },\n  pose: `${gearVRController}pose`,\n  matrix: `${gearVRController}matrix`,\n  v: name => {\n    return `/vars/gearVRController/${name}`;\n  }\n};\n\nconst daydream = \"/device/daydream/\";\npaths.device.daydream = {\n  button: buttonName => ({\n    pressed: `${daydream}button/${buttonName}/pressed`,\n    touched: `${daydream}button/${buttonName}/touched`,\n    value: `${daydream}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${daydream}axis/${axisName}`;\n  },\n  pose: `${daydream}pose`,\n  matrix: `${daydream}matrix`\n};\n\nconst rightOculusTouch = \"/device/rightOculusTouch/\";\npaths.device.rightOculusTouch = {\n  button: buttonName => ({\n    pressed: `${rightOculusTouch}button/${buttonName}/pressed`,\n    touched: `${rightOculusTouch}button/${buttonName}/touched`,\n    value: `${rightOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${rightOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${rightOculusTouch}axis/sum`,\n  pose: `${rightOculusTouch}pose`,\n  matrix: `${rightOculusTouch}matrix`\n};\n\nconst leftOculusTouch = \"/device/leftOculusTouch/\";\npaths.device.leftOculusTouch = {\n  button: buttonName => ({\n    pressed: `${leftOculusTouch}button/${buttonName}/pressed`,\n    touched: `${leftOculusTouch}button/${buttonName}/touched`,\n    value: `${leftOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${leftOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${leftOculusTouch}axis/sum`,\n  pose: `${leftOculusTouch}pose`,\n  matrix: `${leftOculusTouch}matrix`\n};\n\npaths.device.vive = {};\npaths.device.vive.left = {\n  button: buttonName => ({\n    pressed: `/device/vive/left/button/${buttonName}/pressed`,\n    touched: `/device/vive/left/button/${buttonName}/touched`,\n    value: `/device/vive/left/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/left/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/left/axis/sum\",\n  pose: `/device/vive/left/pose`,\n  matrix: `/device/vive/left/matrix`\n};\npaths.device.vive.right = {\n  button: buttonName => ({\n    pressed: `/device/vive/right/button/${buttonName}/pressed`,\n    touched: `/device/vive/right/button/${buttonName}/touched`,\n    value: `/device/vive/right/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/right/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/right/axis/sum\",\n  pose: `/device/vive/right/pose`,\n  matrix: `/device/vive/right/matrix`\n};\n\nfunction button(device, side, name) {\n  return {\n    pressed: `${device}${side}/button/${name}/pressed`,\n    touched: `${device}${side}/button/${name}/touched`,\n    value: `${device}${side}/button/${name}/value`\n  };\n}\n\nfunction axes(device, side, name) {\n  return {\n    axisX: `${device}${side}/axis/${name}X`,\n    axisY: `${device}${side}/axis/${name}Y`\n  };\n}\n\nfunction wmrController(side) {\n  const wmr = \"/device/wmr/\";\n  return {\n    touchpad: {\n      ...button(wmr, side, \"touchpad\"),\n      ...axes(wmr, side, \"touchpad\")\n    },\n    trigger: button(wmr, side, \"trigger\"),\n    grip: button(wmr, side, \"grip\"),\n    menu: button(wmr, side, \"menu\"),\n    joystick: axes(wmr, side, \"joystick\"),\n    pose: `${wmr}${side}/pose`,\n    matrix: `${wmr}${side}/matrix`\n  };\n}\npaths.device.wmr = {};\npaths.device.wmr.v = name => `/vars/wmr/${name}`;\npaths.device.wmr.k = name => `/vars/wmr/keyboard/${name}`;\npaths.device.wmr.left = wmrController(\"left\");\npaths.device.wmr.right = wmrController(\"right\");\n\nconst webxr = \"/device/webxr/\";\npaths.device.webxr = {};\npaths.device.webxr.right = {\n  button: {\n    trigger: button(webxr, \"right\", \"trigger\"),\n    grip: button(webxr, \"right\", \"grip\"),\n    touchpad: button(webxr, \"right\", \"touchpad\"),\n    a: button(webxr, \"right\", \"a\"),\n    b: button(webxr, \"right\", \"b\"),\n    thumbStick: button(webxr, \"right\", \"thumbStick\")\n  },\n  axis: {\n    touchpadX: `${webxr}right/axis/touchpadX`,\n    touchpadY: `${webxr}right/axis/touchpadY`,\n    joyX: `${webxr}right/axis/joyX`,\n    joyY: `${webxr}right/axis/joyY`\n  },\n  pose: `${webxr}right/pose`,\n  matrix: `${webxr}right/matrix`\n};\npaths.device.webxr.left = {\n  button: {\n    trigger: button(webxr, \"left\", \"trigger\"),\n    grip: button(webxr, \"left\", \"grip\"),\n    touchpad: button(webxr, \"left\", \"touchpad\"),\n    a: button(webxr, \"left\", \"a\"),\n    b: button(webxr, \"left\", \"b\"),\n    thumbStick: button(webxr, \"left\", \"thumbStick\")\n  },\n  axis: {\n    touchpadX: `${webxr}left/axis/touchpadX`,\n    touchpadY: `${webxr}left/axis/touchpadY`,\n    joyX: `${webxr}left/axis/joyX`,\n    joyY: `${webxr}left/axis/joyY`\n  },\n  pose: `${webxr}left/pose`,\n  matrix: `${webxr}left/matrix`\n};\n","import { addComponent, hasComponent } from \"bitecs\";\nimport {\n  Holdable,\n  OffersRemoteConstraint,\n  HandCollisionTarget,\n  OffersHandConstraint,\n  TogglesHoveredActionSet,\n  SingleActionButton,\n  HoldableButton,\n  Pen,\n  HoverMenuChild,\n  Static,\n  Inspectable,\n  PreventAudioBoost,\n  IgnoreSpaceBubble\n} from \"../bit-components\";\n\nconst tag2ecs = {\n  isHoldable: Holdable,\n  offersRemoteConstraint: OffersRemoteConstraint,\n  isHandCollisionTarget: HandCollisionTarget,\n  offersHandConstraint: OffersHandConstraint,\n  togglesHoveredActionSet: TogglesHoveredActionSet,\n  singleActionButton: SingleActionButton,\n  holdableButton: HoldableButton,\n  isPen: Pen,\n  isHoverMenuChild: HoverMenuChild,\n  isStatic: Static,\n  inspectable: Inspectable,\n  preventAudioBoost: PreventAudioBoost,\n  ignoreSpaceBubble: IgnoreSpaceBubble\n};\n\n// TODO usages of this should be replaced with direct hasComponent calls\n// but this also has additional logic to check for non existant object\nexport function isTagged(elOrObject3D, tag) {\n  return elOrObject3D && hasComponent(APP.world, tag2ecs[tag], elOrObject3D.eid);\n}\n\nAFRAME.registerComponent(\"tags\", {\n  schema: {\n    isHandCollisionTarget: { default: false },\n    isHoldable: { default: false },\n    offersHandConstraint: { default: false },\n    offersRemoteConstraint: { default: false },\n    togglesHoveredActionSet: { default: false },\n    singleActionButton: { default: false },\n    holdableButton: { default: false },\n    isPen: { default: false },\n    isHoverMenuChild: { default: false },\n    isStatic: { default: false },\n    inspectable: { default: false },\n    preventAudioBoost: { default: false },\n    ignoreSpaceBubble: { default: false }\n  },\n  update() {\n    if (this.didUpdateOnce) {\n      console.warn(\"Do not edit tags with .setAttribute\");\n    }\n    this.didUpdateOnce = true;\n    Object.entries(this.data).forEach(([tagName, isSet]) => {\n      if (isSet) addComponent(APP.world, tag2ecs[tagName], this.el.eid);\n    });\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { childMatch, setMatrixWorld, calculateViewingDistance } from \"../utils/three-utils\";\nimport { paths } from \"./userinput/paths\";\nimport { getBox } from \"../utils/auto-box-collider\";\nimport qsTruthy from \"../utils/qs_truthy\";\nimport { isTagged } from \"../components/tags\";\nimport { qsGet } from \"../utils/qs_truthy\";\nconst customFOV = qsGet(\"fov\");\nconst enableThirdPersonMode = qsTruthy(\"thirdPerson\");\nimport { Layers } from \"../components/layers\";\n\nfunction getInspectableInHierarchy(el) {\n  let inspectable = el;\n  while (inspectable) {\n    if (isTagged(inspectable, \"inspectable\")) {\n      return inspectable.object3D;\n    }\n    inspectable = inspectable.parentNode;\n  }\n  console.warn(\"could not find inspectable in hierarchy\");\n  return el.object3D;\n}\n\nfunction pivotFor(el) {\n  const selector =\n    el.components[\"inspect-pivot-child-selector\"] && el.components[\"inspect-pivot-child-selector\"].data.selector;\n  if (!selector) {\n    return el.object3D;\n  }\n\n  const child = el.querySelector(selector);\n  if (!child) {\n    console.error(`Failed to find pivot for selector: ${selector}`, el);\n    return el.object3D;\n  }\n  return child.object3D;\n}\n\nexport function getInspectableAndPivot(el) {\n  const inspectable = getInspectableInHierarchy(el);\n  const pivot = pivotFor(inspectable.el);\n  return { inspectable, pivot };\n}\n\nconst decompose = (function() {\n  const scale = new THREE.Vector3();\n  return function decompose(m, p, q) {\n    m.decompose(p, q, scale); //ignore scale, like we're dealing with a motor\n  };\n})();\n\nconst IDENTITY = new THREE.Matrix4().identity();\nconst orbit = (function() {\n  const owq = new THREE.Quaternion();\n  const owp = new THREE.Vector3();\n  const cwq = new THREE.Quaternion();\n  const cwp = new THREE.Vector3();\n  const rwq = new THREE.Quaternion();\n  const UP = new THREE.Vector3();\n  const RIGHT = new THREE.Vector3();\n  const dPos = new THREE.Vector3();\n  const targetPos = new THREE.Vector3();\n  const targetQuat = new THREE.Quaternion();\n  const targetScale = new THREE.Vector3(1, 1, 1);\n  const targetMatrix = new THREE.Matrix4();\n  const dhQ = new THREE.Quaternion();\n  const dvQ = new THREE.Quaternion();\n  return function orbit(pivot, rig, camera, dh, dv, dz, dt, panY) {\n    pivot.updateMatrices();\n    decompose(pivot.matrixWorld, owp, owq);\n\n    camera.updateMatrices();\n    decompose(camera.matrixWorld, cwp, cwq);\n\n    rig.getWorldQuaternion(rwq);\n\n    dhQ.setFromAxisAngle(UP.set(0, 1, 0).applyQuaternion(owq), 0.1 * dh * dt);\n    targetQuat.copy(cwq).premultiply(dhQ);\n    dPos.subVectors(cwp, owp);\n    const zoom = 1 - dz * dt;\n    const newLength = dPos.length() * zoom;\n    // TODO: These limits should be calculated based on the calculated view distance.\n    if (newLength > 0.1 && newLength < 100) {\n      dPos.multiplyScalar(zoom);\n    }\n\n    dvQ.setFromAxisAngle(RIGHT.set(1, 0, 0).applyQuaternion(targetQuat), 0.1 * dv * dt);\n    targetQuat.premultiply(dvQ);\n    targetPos.addVectors(owp, dPos.applyQuaternion(dhQ).applyQuaternion(dvQ)).add(\n      UP.set(0, 1, 0)\n        .multiplyScalar(panY * newLength)\n        .applyQuaternion(targetQuat)\n    );\n\n    targetMatrix.compose(\n      targetPos,\n      targetQuat,\n      targetScale\n    );\n\n    childMatch(rig, camera, targetMatrix);\n  };\n})();\n\nconst moveRigSoCameraLooksAtPivot = (function() {\n  const owq = new THREE.Quaternion();\n  const owp = new THREE.Vector3();\n  const cwq = new THREE.Quaternion();\n  const cwp = new THREE.Vector3();\n  const oForw = new THREE.Vector3();\n  const center = new THREE.Vector3();\n  const defaultBoxMax = new THREE.Vector3(0.3, 0.3, 0.3);\n  const target = new THREE.Object3D();\n  return function moveRigSoCameraLooksAtPivot(rig, camera, inspectable, pivot, distanceMod) {\n    if (!target.parent) {\n      // add dummy object to the scene, if this is the first time we call this function\n      AFRAME.scenes[0].object3D.add(target);\n      target.applyMatrix4(IDENTITY); // make sure target gets updated at least once for our matrix optimizations\n    }\n\n    pivot.updateMatrices();\n    decompose(pivot.matrixWorld, owp, owq);\n    decompose(camera.matrixWorld, cwp, cwq);\n    rig.getWorldQuaternion(cwq);\n\n    const box = getBox(inspectable.el, inspectable.el.getObject3D(\"mesh\") || inspectable, true);\n    if (box.min.x === Infinity) {\n      // fix edgecase where inspectable object has no mesh / dimensions\n      box.min.subVectors(owp, defaultBoxMax);\n      box.max.addVectors(owp, defaultBoxMax);\n    }\n    box.getCenter(center);\n    const vrMode = inspectable.el.sceneEl.is(\"vr-mode\");\n    const dist =\n      calculateViewingDistance(\n        inspectable.el.sceneEl.camera.fov,\n        inspectable.el.sceneEl.camera.aspect,\n        box,\n        center,\n        vrMode\n      ) * distanceMod;\n    target.position.addVectors(\n      owp,\n      oForw\n        .set(0, 0, 1) //TODO: Suspicious that this is called oForw but (0,0,1) is backwards\n        .multiplyScalar(dist)\n        .applyQuaternion(owq)\n    );\n    target.quaternion.copy(owq);\n    target.matrixNeedsUpdate = true;\n    target.updateMatrices();\n    childMatch(rig, camera, target.matrixWorld);\n  };\n})();\n\nexport const CAMERA_MODE_FIRST_PERSON = 0;\nexport const CAMERA_MODE_THIRD_PERSON_NEAR = 1;\nexport const CAMERA_MODE_THIRD_PERSON_FAR = 2;\nexport const CAMERA_MODE_INSPECT = 3;\nexport const CAMERA_MODE_SCENE_PREVIEW = 4;\nexport const CAMERA_MODE_THIRD_PERSON_VIEW = 5;\n\nconst NEXT_MODES = {\n  [CAMERA_MODE_FIRST_PERSON]: CAMERA_MODE_THIRD_PERSON_NEAR,\n  [CAMERA_MODE_THIRD_PERSON_NEAR]: CAMERA_MODE_THIRD_PERSON_FAR,\n  [CAMERA_MODE_THIRD_PERSON_FAR]: CAMERA_MODE_FIRST_PERSON\n};\n\nconst ensureLightsAreSeenByCamera = function(o) {\n  if (o.isLight) {\n    o.layers.enable(Layers.CAMERA_LAYER_INSPECT);\n  }\n};\n\nconst firstPersonOnlyLayer = new THREE.Layers();\nfirstPersonOnlyLayer.set(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\nconst enableInspectLayer = function(o) {\n  // Ignore first person only meshes\n  if (o.layers.test(firstPersonOnlyLayer)) return;\n  o.layers.enable(Layers.CAMERA_LAYER_INSPECT);\n};\nconst disableInspectLayer = function(o) {\n  // Ignore first person only meshes\n  if (o.layers.test(firstPersonOnlyLayer)) return;\n  o.layers.disable(Layers.CAMERA_LAYER_INSPECT);\n};\n\nfunction getAudio(o) {\n  let audio;\n  o.traverse(c => {\n    if (!audio && c.type === \"Audio\") {\n      audio = c;\n    }\n  });\n  return audio;\n}\n\nconst FALLOFF = 0.9;\nexport class CameraSystem {\n  constructor(camera, renderer) {\n    this.viewingCamera = camera;\n    this.lightsEnabled = localStorage.getItem(\"show-background-while-inspecting\") === \"true\";\n    this.verticalDelta = 0;\n    this.horizontalDelta = 0;\n    this.inspectZoom = 0;\n    this.mode = CAMERA_MODE_SCENE_PREVIEW;\n    this.snapshot = { audioTransform: new THREE.Matrix4(), matrixWorld: new THREE.Matrix4() };\n    this.audioSourceTargetTransform = new THREE.Matrix4();\n\n    if (customFOV) {\n      this.viewingCamera.fov = customFOV;\n    }\n    this.viewingCamera.layers.enable(Layers.CAMERA_LAYER_VIDEO_TEXTURE_TARGET);\n    this.viewingCamera.layers.enable(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n    this.viewingCamera.layers.enable(Layers.CAMERA_LAYER_UI);\n\n    // xr.updateCamera gets called every render to copy the active cameras properties to the XR cameras. We also want to copy layers.\n    // TODO this logic should either be moved into THREE or removed when we ditch aframe camera system\n    const xrManager = renderer.xr;\n    const updateXRCamera = xrManager.updateCamera;\n    xrManager.updateCamera = function(camera) {\n      updateXRCamera(camera);\n      const xrCamera = xrManager.getCamera();\n      xrCamera.layers.mask = camera.layers.mask;\n      if (xrCamera.cameras.length) {\n        xrCamera.cameras[0].layers.set(Layers.CAMERA_LAYER_XR_LEFT_EYE);\n        xrCamera.cameras[0].layers.mask |= camera.layers.mask;\n        xrCamera.cameras[1].layers.set(Layers.CAMERA_LAYER_XR_RIGHT_EYE);\n        xrCamera.cameras[1].layers.mask |= camera.layers.mask;\n      }\n    };\n\n    waitForDOMContentLoaded().then(() => {\n      this.avatarPOV = document.getElementById(\"avatar-pov-node\");\n      this.avatarRig = document.getElementById(\"avatar-rig\");\n      this.viewingRig = document.getElementById(\"viewing-rig\");\n\n      const bg = new THREE.Mesh(\n        new THREE.BoxGeometry(100, 100, 100),\n        new THREE.MeshBasicMaterial({ color: 0x020202, side: THREE.BackSide })\n      );\n      bg.layers.set(Layers.CAMERA_LAYER_INSPECT);\n      this.viewingRig.object3D.add(bg);\n    });\n  }\n\n  nextMode() {\n    if (this.mode === CAMERA_MODE_INSPECT) {\n      this.uninspect();\n      return;\n    }\n\n    if (!enableThirdPersonMode) return;\n    if (this.mode === CAMERA_MODE_SCENE_PREVIEW) return;\n\n    this.mode = NEXT_MODES[this.mode] || 0;\n  }\n\n  inspect(el, distanceMod, fireChangeEvent = true) {\n    const { inspectable, pivot } = getInspectableAndPivot(el);\n\n    this.verticalDelta = 0;\n    this.horizontalDelta = 0;\n    this.inspectZoom = 0;\n    if (this.mode === CAMERA_MODE_INSPECT) {\n      return;\n    }\n    const scene = AFRAME.scenes[0];\n    scene.object3D.traverse(ensureLightsAreSeenByCamera);\n    scene.classList.add(\"hand-cursor\");\n    scene.classList.remove(\"no-cursor\");\n    this.snapshot.mode = this.mode;\n    this.mode = CAMERA_MODE_INSPECT;\n    this.inspectable = inspectable;\n    this.pivot = pivot;\n\n    const camera = scene.is(\"vr-mode\") ? scene.renderer.xr.getCamera() : scene.camera;\n    this.snapshot.mask = camera.layers.mask;\n    if (!this.lightsEnabled) {\n      this.hideEverythingButThisObject(inspectable);\n    } else {\n      camera.layers.disable(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n      camera.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n    }\n\n    this.viewingCamera.updateMatrices();\n    this.snapshot.matrixWorld.copy(this.viewingRig.object3D.matrixWorld);\n\n    this.snapshot.audio = !(inspectable.el && isTagged(inspectable.el, \"preventAudioBoost\")) && getAudio(inspectable);\n    if (this.snapshot.audio) {\n      this.snapshot.audio.updateMatrices();\n      this.snapshot.audioTransform.copy(this.snapshot.audio.matrixWorld);\n      scene.audioListener.updateMatrices();\n      this.audioSourceTargetTransform.makeTranslation(0, 0, -0.25).premultiply(scene.audioListener.matrixWorld);\n      setMatrixWorld(this.snapshot.audio, this.audioSourceTargetTransform);\n    }\n\n    this.ensureListenerIsParentedCorrectly(scene);\n\n    moveRigSoCameraLooksAtPivot(\n      this.viewingRig.object3D,\n      this.viewingCamera,\n      this.inspectable,\n      this.pivot,\n      distanceMod || 1\n    );\n\n    if (fireChangeEvent) {\n      scene.emit(\"inspect-target-changed\");\n    }\n  }\n\n  uninspect(fireChangeEvent = true) {\n    if (this.mode !== CAMERA_MODE_INSPECT) return;\n    const scene = AFRAME.scenes[0];\n    if (scene.is(\"entered\")) {\n      scene.classList.remove(\"hand-cursor\");\n      scene.classList.add(\"no-cursor\");\n    }\n    this.showEverythingAsNormal();\n    this.inspectable = null;\n    this.pivot = null;\n    if (this.snapshot.audio) {\n      setMatrixWorld(this.snapshot.audio, this.snapshot.audioTransform);\n      this.snapshot.audio = null;\n    }\n\n    this.mode = this.snapshot.mode;\n    if (this.snapshot.mode === CAMERA_MODE_SCENE_PREVIEW) {\n      setMatrixWorld(this.viewingRig.object3D, this.snapshot.matrixWorld);\n    }\n    this.snapshot.mode = null;\n    this.tick(AFRAME.scenes[0]);\n\n    if (fireChangeEvent) {\n      scene.emit(\"inspect-target-changed\");\n    }\n  }\n\n  toggleLights() {\n    this.lightsEnabled = !this.lightsEnabled;\n    localStorage.setItem(\"show-background-while-inspecting\", this.lightsEnabled.toString());\n\n    if (this.mode === CAMERA_MODE_INSPECT && this.inspectable) {\n      if (this.lightsEnabled) {\n        this.showEverythingAsNormal();\n        const scene = AFRAME.scenes[0];\n        const camera = scene.is(\"vr-mode\") ? scene.renderer.xr.getCamera() : scene.camera;\n        camera.layers.disable(Layers.CAMERA_LAYER_FIRST_PERSON_ONLY);\n        camera.layers.enable(Layers.CAMERA_LAYER_THIRD_PERSON_ONLY);\n      } else {\n        this.hideEverythingButThisObject(this.inspectable);\n      }\n    }\n\n    AFRAME.scenes[0].emit(\"inspect-lights-changed\");\n  }\n\n  ensureListenerIsParentedCorrectly(scene) {\n    if (scene.audioListener && this.avatarPOV) {\n      if (this.mode === CAMERA_MODE_INSPECT && scene.audioListener.parent !== this.avatarPOV.object3D) {\n        this.avatarPOV.object3D.add(scene.audioListener);\n      } else if (\n        (this.mode === CAMERA_MODE_FIRST_PERSON ||\n          this.mode === CAMERA_MODE_THIRD_PERSON_NEAR ||\n          this.mode === CAMERA_MODE_THIRD_PERSON_FAR) &&\n        scene.audioListener.parent !== this.viewingCamera\n      ) {\n        this.viewingCamera.add(scene.audioListener);\n      }\n    }\n  }\n\n  hideEverythingButThisObject(o) {\n    this.notHiddenObject = o;\n    o.traverse(enableInspectLayer);\n\n    const scene = AFRAME.scenes[0];\n    const camera = scene.is(\"vr-mode\") ? scene.renderer.xr.getCamera() : scene.camera;\n    camera.layers.set(Layers.CAMERA_LAYER_INSPECT);\n  }\n\n  showEverythingAsNormal() {\n    if (this.notHiddenObject) {\n      this.notHiddenObject.traverse(disableInspectLayer);\n      this.notHiddenObject = null;\n    }\n    const scene = AFRAME.scenes[0];\n    const camera = scene.is(\"vr-mode\") ? scene.renderer.xr.getCamera() : scene.camera;\n    camera.layers.mask = this.snapshot.mask;\n  }\n\n  tick = (function() {\n    const translation = new THREE.Matrix4();\n    let uiRoot;\n    return function tick(scene, dt) {\n      this.viewingCamera.matrixNeedsUpdate = true;\n      this.viewingCamera.updateMatrix();\n      this.viewingCamera.updateMatrixWorld();\n\n      const entered = scene.is(\"entered\");\n      uiRoot = uiRoot || document.getElementById(\"ui-root\");\n      const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n      if (isGhost && this.mode !== CAMERA_MODE_FIRST_PERSON && this.mode !== CAMERA_MODE_INSPECT) {\n        this.mode = CAMERA_MODE_FIRST_PERSON;\n        const position = new THREE.Vector3();\n        const quat = new THREE.Quaternion();\n        const scale = new THREE.Vector3();\n        this.viewingRig.object3D.updateMatrices();\n        this.viewingRig.object3D.matrixWorld.decompose(position, quat, scale);\n        position.setFromMatrixPosition(this.viewingCamera.matrixWorld);\n        position.y = position.y - 1.6;\n        setMatrixWorld(\n          this.avatarRig.object3D,\n          new THREE.Matrix4().compose(\n            position,\n            quat,\n            scale\n          )\n        );\n        scene.systems[\"hubs-systems\"].characterController.fly = true;\n        this.avatarPOV.object3D.updateMatrices();\n        setMatrixWorld(this.avatarPOV.object3D, this.viewingCamera.matrixWorld);\n      }\n      if (!this.enteredScene && entered) {\n        this.enteredScene = true;\n        this.mode = CAMERA_MODE_FIRST_PERSON;\n      }\n      this.avatarPOVRotator = this.avatarPOVRotator || this.avatarPOV.components[\"pitch-yaw-rotator\"];\n      this.viewingCameraRotator = this.viewingCameraRotator || this.viewingCamera.el.components[\"pitch-yaw-rotator\"];\n      this.avatarPOVRotator.on = true;\n      this.viewingCameraRotator.on = true;\n\n      this.userinput = this.userinput || scene.systems.userinput;\n      this.interaction = this.interaction || scene.systems.interaction;\n\n      if (this.userinput.get(paths.actions.startInspecting) && this.mode !== CAMERA_MODE_INSPECT) {\n        const hoverEl = this.interaction.state.rightRemote.hovered || this.interaction.state.leftRemote.hovered;\n\n        if (hoverEl) {\n          this.inspect(hoverEl, 1.5);\n        }\n      } else if (this.mode === CAMERA_MODE_INSPECT && this.userinput.get(paths.actions.stopInspecting)) {\n        scene.emit(\"uninspect\");\n        this.uninspect();\n      }\n\n      if (this.userinput.get(paths.actions.nextCameraMode)) {\n        this.nextMode();\n      }\n\n      this.ensureListenerIsParentedCorrectly(scene);\n\n      if (this.mode === CAMERA_MODE_FIRST_PERSON) {\n        this.viewingCameraRotator.on = false;\n        this.avatarRig.object3D.updateMatrices();\n        setMatrixWorld(this.viewingRig.object3D, this.avatarRig.object3D.matrixWorld);\n        if (scene.is(\"vr-mode\")) {\n          this.viewingCamera.updateMatrices();\n          setMatrixWorld(this.avatarPOV.object3D, this.viewingCamera.matrixWorld);\n        } else {\n          this.avatarPOV.object3D.updateMatrices();\n          setMatrixWorld(this.viewingCamera, this.avatarPOV.object3D.matrixWorld);\n        }\n      } else if (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR || this.mode === CAMERA_MODE_THIRD_PERSON_FAR) {\n        if (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR) {\n          translation.makeTranslation(0, 1, 3);\n        } else {\n          translation.makeTranslation(0, 2, 8);\n        }\n        this.avatarRig.object3D.updateMatrices();\n        this.viewingRig.object3D.matrixWorld.copy(this.avatarRig.object3D.matrixWorld).multiply(translation);\n        setMatrixWorld(this.viewingRig.object3D, this.viewingRig.object3D.matrixWorld);\n        this.avatarPOV.object3D.quaternion.copy(this.viewingCamera.quaternion);\n        this.avatarPOV.object3D.matrixNeedsUpdate = true;\n      } else if (this.mode === CAMERA_MODE_INSPECT) {\n        this.avatarPOVRotator.on = false;\n        this.viewingCameraRotator.on = false;\n        const cameraDelta = this.userinput.get(\n          scene.is(\"entered\") ? paths.actions.cameraDelta : paths.actions.lobbyCameraDelta\n        );\n\n        if (cameraDelta) {\n          // TODO: Move device specific tinkering to action sets\n          const horizontalDelta = (AFRAME.utils.device.isMobile() ? -0.6 : 1) * cameraDelta[0] || 0;\n          const verticalDelta = (AFRAME.utils.device.isMobile() ? -1.2 : 1) * cameraDelta[1] || 0;\n          this.horizontalDelta = (this.horizontalDelta + horizontalDelta) / 2;\n          this.verticalDelta = (this.verticalDelta + verticalDelta) / 2;\n        } else if (Math.abs(this.verticalDelta) > 0.0001 || Math.abs(this.horizontalDelta) > 0.0001) {\n          this.verticalDelta = FALLOFF * this.verticalDelta;\n          this.horizontalDelta = FALLOFF * this.horizontalDelta;\n        }\n\n        const inspectZoom = this.userinput.get(paths.actions.inspectZoom) * 0.001;\n        if (inspectZoom) {\n          this.inspectZoom = inspectZoom + (5 * this.inspectZoom) / 6;\n        } else if (Math.abs(this.inspectZoom) > 0.0001) {\n          this.inspectZoom = FALLOFF * this.inspectZoom;\n        }\n        const panY = this.userinput.get(paths.actions.inspectPanY) || 0;\n        if (this.userinput.get(paths.actions.resetInspectView)) {\n          moveRigSoCameraLooksAtPivot(this.viewingRig.object3D, this.viewingCamera, this.inspectable, this.pivot, 1);\n        }\n        if (this.snapshot.audio) {\n          setMatrixWorld(this.snapshot.audio, this.audioSourceTargetTransform);\n        }\n\n        if (\n          Math.abs(this.verticalDelta) > 0.001 ||\n          Math.abs(this.horizontalDelta) > 0.001 ||\n          Math.abs(this.inspectZoom) > 0.001 ||\n          Math.abs(panY) > 0.0001\n        ) {\n          orbit(\n            this.pivot,\n            this.viewingRig.object3D,\n            this.viewingCamera,\n            this.horizontalDelta,\n            this.verticalDelta,\n            this.inspectZoom,\n            dt,\n            panY\n          );\n        }\n      } else if (this.mode === CAMERA_MODE_THIRD_PERSON_VIEW) {\n        this.viewingCameraRotator.on = false;\n        translation.makeTranslation(0, 0, 1);\n        this.avatarRig.object3D.updateMatrices();\n        setMatrixWorld(this.viewingRig.object3D, this.avatarRig.object3D.matrixWorld);\n        if (scene.is(\"vr-mode\")) {\n          this.viewingCamera.updateMatrices();\n          setMatrixWorld(this.avatarPOV.object3D, this.viewingCamera.matrixWorld);\n        } else {\n          this.avatarPOV.object3D.updateMatrices();\n          setMatrixWorld(this.viewingCamera, this.avatarPOV.object3D.matrixWorld.multiply(translation));\n        }\n\n        this.avatarRig.object3D.updateMatrices();\n        this.viewingRig.object3D.matrixWorld.copy(this.avatarRig.object3D.matrixWorld);\n        setMatrixWorld(this.viewingRig.object3D, this.viewingRig.object3D.matrixWorld);\n        this.avatarPOV.object3D.quaternion.copy(this.viewingCamera.quaternion);\n        this.avatarPOV.object3D.matrixNeedsUpdate = true;\n      }\n    };\n  })();\n}\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\nimport { CAMERA_MODE_SCENE_PREVIEW } from \"../systems/camera-system\";\n\nfunction getStreamerCamera() {\n  const streamer = getCurrentStreamer();\n  if (streamer) {\n    return streamer.el.querySelector(\".camera\").object3D;\n  }\n  return null;\n}\n\nfunction lerp(start, end, t) {\n  return (1 - t) * start + t * end;\n}\n\nconst newRot = new THREE.Quaternion();\n\n/**\n * Nicely pans the camera for previewing a scene. There's some weirdness with this right now\n * since it ends up panning in a direction dependent upon the start camera orientation,\n * but it's good enough for now.\n */\nAFRAME.registerComponent(\"scene-preview-camera\", {\n  schema: {\n    duration: { default: 90, type: \"number\" },\n    positionOnly: { default: false, type: \"boolean\" }\n  },\n\n  init: function() {\n    const systems = AFRAME.scenes[0].systems[\"hubs-systems\"] || AFRAME.scenes[0].systems[\"scene-systems\"];\n\n    if (systems) {\n      systems.scenePreviewCameraSystem.register(this.el);\n    }\n\n    this.startPoint = this.el.object3D.position.clone();\n    this.startRotation = this.el.object3D.quaternion.clone();\n\n    this.targetPoint = this.el.object3D.position.clone();\n    this.targetPoint.y = Math.max(this.targetPoint.y - 1.5, 1);\n    this.targetPoint.add(new THREE.Vector3(2, 0, -2));\n\n    const targetRotDelta = new THREE.Euler(-0.15, 0.0, 0.15);\n    this.targetRotation = new THREE.Quaternion();\n    this.targetRotation.setFromEuler(targetRotDelta);\n    this.targetRotation.premultiply(this.startRotation);\n\n    this.startTime = performance.now();\n    this.backwards = false;\n    this.ranOnePass = false;\n  },\n\n  tick2: function() {\n    const hubsSystems = this.el.sceneEl.systems[\"hubs-systems\"];\n\n    let streamerCamera;\n    if (hubsSystems) {\n      hubsSystems.cameraSystem.mode = CAMERA_MODE_SCENE_PREVIEW;\n      streamerCamera = getStreamerCamera();\n    }\n\n    if (streamerCamera) {\n      setMatrixWorld(this.el.object3D, streamerCamera.matrixWorld);\n      // Move camera forward just a bit so that we don't see the avatar's eye cylinders.\n      this.el.object3D.translateZ(-0.1);\n      this.el.object3D.matrixNeedsUpdate = true;\n    } else {\n      let t = (performance.now() - this.startTime) / (1000.0 * this.data.duration);\n      t = Math.min(1.0, Math.max(0.0, t));\n\n      if (!this.ranOnePass) {\n        t = t * (2 - t);\n      } else {\n        t = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n      }\n\n      const from = this.backwards ? this.targetPoint : this.startPoint;\n      const to = this.backwards ? this.startPoint : this.targetPoint;\n      const fromRot = this.backwards ? this.targetRotation : this.startRotation;\n      const toRot = this.backwards ? this.startRotation : this.targetRotation;\n\n      newRot.slerpQuaternions(fromRot, toRot, t);\n\n      this.el.object3D.position.set(lerp(from.x, to.x, t), lerp(from.y, to.y, t), lerp(from.z, to.z, t));\n\n      if (!this.data.positionOnly) {\n        this.el.object3D.rotation.setFromQuaternion(newRot);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      if (t >= 0.9999) {\n        this.ranOnePass = true;\n        this.backwards = !this.backwards;\n        this.startTime = performance.now();\n      }\n    }\n  },\n\n  remove: function() {\n    const systems = AFRAME.scenes[0]?.systems[\"hubs-systems\"] || AFRAME.scenes[0]?.systems[\"scene-systems\"];\n\n    if (systems) {\n      systems.scenePreviewCameraSystem.unregister(this.el);\n    }\n  }\n});\n","import { LightProbeGenerator } from \"three/examples/jsm/lights/LightProbeGenerator\";\n\nconst {\n  AmbientLight,\n  BackSide,\n  BoxBufferGeometry,\n  CubeCamera,\n  LinearFilter,\n  Mesh,\n  Object3D,\n  PMREMGenerator,\n  RGBAFormat,\n  Scene,\n  ShaderMaterial,\n  sRGBEncoding,\n  UniformsLib,\n  UniformsUtils,\n  Vector3,\n  WebGLCubeRenderTarget\n} = THREE;\n\n/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nconst vertexShader = `\n#include <common>\n#include <fog_pars_vertex>\n\nuniform vec3 sunPosition;\nuniform float rayleigh;\nuniform float turbidity;\nuniform float mieCoefficient;\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float e = 2.71828182845904523536028747135266249775724709369995957;\nconst float pi = 3.141592653589793238462643383279502884197169;\n\n// wavelength of used primaries, according to preetham\nconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\nconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n// mie stuff\n// K coefficient for the primaries\nconst float v = 4.0;\nconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\nconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n// earth shadow hack\n// cutoffAngle = pi / 1.95;\nconst float cutoffAngle = 1.6110731556870734;\nconst float steepness = 1.5;\nconst float EE = 1000.0;\n\nfloat sunIntensity( float zenithAngleCos ) {\n  zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n  return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n}\n\nvec3 totalMie( float T ) {\n  float c = ( 0.2 * T ) * 10E-18;\n  return 0.434 * c * MieConst;\n}\n\nvoid main() {\n  #include <begin_vertex>\n\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n\n  #include <project_vertex>\n\n  vSunDirection = normalize( sunPosition );\n\n  vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n  vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n  float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n  // extinction (absorbtion + out scattering)\n  // rayleigh coefficients\n  vBetaR = totalRayleigh * rayleighCoefficient;\n\n  // mie coefficients\n  vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n  #include <fog_vertex>\n}\n`;\n\nconst fragmentShader = `\n#include <common>\n#include <fog_pars_fragment>\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nuniform float luminance;\nuniform float mieDirectionalG;\n\nconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float pi = 3.141592653589793238462643383279502884197169;\n\nconst float n = 1.0003; // refractive index of air\nconst float N = 2.545E25; // number of molecules per unit volume for air at\n// 288.15K and 1013mb (sea level -45 celsius)\n\n// optical length at zenith for molecules\nconst float rayleighZenithLength = 8.4E3;\nconst float mieZenithLength = 1.25E3;\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n// 66 arc seconds -> degrees, and the cosine of that\nconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n// 3.0 / ( 16.0 * pi )\nconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n// 1.0 / ( 4.0 * pi )\nconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\nfloat rayleighPhase( float cosTheta ) {\n  return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n}\n\nfloat hgPhase( float cosTheta, float g ) {\n  float g2 = pow( g, 2.0 );\n  float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n  return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n}\n\n// Filmic ToneMapping http://filmicgames.com/archives/75\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nconst float whiteScale = 1.0748724675633854; // 1.0 / Uncharted2Tonemap(1000.0)\n\nvec3 Uncharted2Tonemap( vec3 x ) {\n  return ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\n}\n\nvoid main() {\n  // optical length\n  // cutoff angle at 90 to avoid singularity in next formula.\n  float zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\n  float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n  float sR = rayleighZenithLength * inverse;\n  float sM = mieZenithLength * inverse;\n\n  // combined extinction factor\n  vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n  // in scattering\n  float cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\n\n  float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n  vec3 betaRTheta = vBetaR * rPhase;\n\n  float mPhase = hgPhase( cosTheta, mieDirectionalG );\n  vec3 betaMTheta = vBetaM * mPhase;\n\n  vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n  // nightsky\n  vec3 direction = normalize( vWorldPosition - cameraPos );\n  float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\n  float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\n  vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n  vec3 L0 = vec3( 0.1 ) * Fex;\n\n  // composition + solar disc\n  float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n  L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n  vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n  vec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\n  vec3 color = curr * whiteScale;\n\n  vec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n  gl_FragColor = vec4( retColor, 1.0 );\n\n  #include <fog_fragment>\n}\n`;\n\nexport default class Sky extends Object3D {\n  static shader = {\n    uniforms: UniformsUtils.merge([\n      UniformsLib.fog,\n      {\n        luminance: { value: 1 },\n        turbidity: { value: 10 },\n        rayleigh: { value: 2 },\n        mieCoefficient: { value: 0.005 },\n        mieDirectionalG: { value: 0.8 },\n        sunPosition: { value: new Vector3() }\n      }\n    ]),\n    vertexShader,\n    fragmentShader\n  };\n\n  static _geometry = new BoxBufferGeometry(1, 1, 1);\n\n  constructor() {\n    super();\n\n    const material = new ShaderMaterial({\n      fragmentShader: Sky.shader.fragmentShader,\n      vertexShader: Sky.shader.vertexShader,\n      uniforms: UniformsUtils.clone(Sky.shader.uniforms),\n      side: BackSide,\n      fog: true\n    });\n\n    this.sky = new Mesh(Sky._geometry, material);\n    this.sky.name = \"Sky\";\n    this.add(this.sky);\n\n    this._inclination = 0;\n    this._azimuth = 0.15;\n    this._distance = 8000;\n    this.updateSunPosition();\n  }\n\n  get turbidity() {\n    return this.sky.material.uniforms.turbidity.value;\n  }\n\n  set turbidity(value) {\n    this.sky.material.uniforms.turbidity.value = value;\n  }\n\n  get rayleigh() {\n    return this.sky.material.uniforms.rayleigh.value;\n  }\n\n  set rayleigh(value) {\n    this.sky.material.uniforms.rayleigh.value = value;\n  }\n\n  get luminance() {\n    return this.sky.material.uniforms.luminance.value;\n  }\n\n  set luminance(value) {\n    this.sky.material.uniforms.luminance.value = value;\n  }\n\n  get mieCoefficient() {\n    return this.sky.material.uniforms.mieCoefficient.value;\n  }\n\n  set mieCoefficient(value) {\n    this.sky.material.uniforms.mieCoefficient.value = value;\n  }\n\n  get mieDirectionalG() {\n    return this.sky.material.uniforms.mieDirectionalG.value;\n  }\n\n  set mieDirectionalG(value) {\n    this.sky.material.uniforms.mieDirectionalG.value = value;\n  }\n\n  get inclination() {\n    return this._inclination;\n  }\n\n  set inclination(value) {\n    this._inclination = value;\n    this.updateSunPosition();\n  }\n\n  get azimuth() {\n    return this._azimuth;\n  }\n\n  set azimuth(value) {\n    this._azimuth = value;\n    this.updateSunPosition();\n  }\n\n  get distance() {\n    return this._distance;\n  }\n\n  set distance(value) {\n    this._distance = value;\n    this.updateSunPosition();\n  }\n\n  updateSunPosition() {\n    const theta = Math.PI * (this._inclination - 0.5);\n    const phi = 2 * Math.PI * (this._azimuth - 0.5);\n\n    const distance = Math.min(1000, this._distance);\n\n    const x = distance * Math.cos(phi);\n    const y = distance * Math.sin(phi) * Math.sin(theta);\n    const z = distance * Math.sin(phi) * Math.cos(theta);\n\n    this.sky.material.uniforms.sunPosition.value.set(x, y, z).normalize();\n    this.sky.scale.set(distance, distance, distance);\n  }\n\n  generateEnvironmentMap(renderer) {\n    const skyScene = new Scene();\n    const cubeCamera = new CubeCamera(1, 100000, new WebGLCubeRenderTarget(512));\n    skyScene.add(cubeCamera);\n    skyScene.add(this.sky);\n    cubeCamera.update(renderer, skyScene);\n    this.add(this.sky);\n    const vrEnabled = renderer.xr.enabled;\n    renderer.xr.enabled = false;\n    const pmremGenerator = new PMREMGenerator(renderer);\n    const envMap = pmremGenerator.fromCubemap(cubeCamera.renderTarget.texture).texture;\n    renderer.xr.enabled = vrEnabled;\n    pmremGenerator.dispose();\n    cubeCamera.renderTarget.dispose();\n    return envMap;\n  }\n\n  generateLightProbe(renderer) {\n    const skyScene = new Scene();\n    skyScene.add(this.sky);\n\n    const cubeCamera = new CubeCamera(\n      1,\n      100000,\n      new WebGLCubeRenderTarget(512, {\n        format: RGBAFormat,\n        magFilter: LinearFilter,\n        minFilter: LinearFilter,\n        encoding: sRGBEncoding\n      })\n    );\n    skyScene.add(cubeCamera);\n    skyScene.add(this.sky);\n    cubeCamera.update(renderer, skyScene);\n    this.add(this.sky);\n    const lightProbe = LightProbeGenerator.fromCubeRenderTarget(renderer, cubeCamera.renderTarget);\n    cubeCamera.renderTarget.dispose();\n    return lightProbe;\n  }\n\n  copy(source, recursive = true) {\n    if (recursive) {\n      this.remove(this.sky);\n    }\n\n    super.copy(source, recursive);\n\n    if (recursive) {\n      const skyIndex = source.children.indexOf(source.sky);\n\n      if (skyIndex !== -1) {\n        this.sky = this.children[skyIndex];\n      }\n    }\n\n    this.turbidity = source.turbidity;\n    this.rayleigh = source.rayleigh;\n    this.luminance = source.luminance;\n    this.mieCoefficient = source.mieCoefficient;\n    this.mieDirectionalG = source.mieDirectionalG;\n    this.inclination = source.inclination;\n    this.azimuth = source.azimuth;\n    this.distance = source.distance;\n\n    return this;\n  }\n}\n\nAFRAME.registerComponent(\"skybox\", {\n  schema: {\n    turbidity: { type: \"number\", default: 10 },\n    rayleigh: { type: \"number\", default: 2 },\n    luminance: { type: \"number\", default: 1 },\n    mieCoefficient: { type: \"number\", default: 0.005 },\n    mieDirectionalG: { type: \"number\", default: 0.8 },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0.15 },\n    distance: { type: \"number\", default: 8000 }\n  },\n\n  init() {\n    this.sky = new Sky();\n    this.el.setObject3D(\"mesh\", this.sky);\n  },\n\n  update(oldData) {\n    if (this.data.turbidity !== oldData.turbidity) {\n      this.sky.turbidity = this.data.turbidity;\n    }\n\n    if (this.data.rayleigh !== oldData.rayleigh) {\n      this.sky.rayleigh = this.data.rayleigh;\n    }\n\n    if (this.data.luminance !== oldData.luminance) {\n      this.sky.luminance = this.data.luminance;\n    }\n\n    if (this.data.mieCoefficient !== oldData.mieCoefficient) {\n      this.sky.mieCoefficient = this.data.mieCoefficient;\n    }\n\n    if (this.data.mieDirectionalG !== oldData.mieDirectionalG) {\n      this.sky.mieDirectionalG = this.data.mieDirectionalG;\n    }\n\n    if (this.data.inclination !== oldData.inclination) {\n      this.sky.inclination = this.data.inclination;\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    if (this.data.azimuth !== oldData.azimuth) {\n      this.sky.azimuth = this.data.azimuth;\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    if (this.data.distance !== oldData.distance) {\n      const distance = this.data.distance;\n\n      // HACK Remove this if condition and always set the scale based on distance when the existing environments\n      // have their sky scales set to 1.\n      this.sky.distance = this.el.object3D.scale.x === 1 ? distance : 1;\n      this.sky.matrixNeedsUpdate = true;\n    }\n\n    // TODO Remove or rework medium quality mode\n    if (window.APP.store.state.preferences.materialQualitySetting === \"medium\") {\n      // This extra ambient light is here to normalize lighting with the MeshStandardMaterial.\n      // Without it, objects are significantly darker in brighter environments.\n      // It's kept to a low value to not wash out objects in very dark environments.\n      // This is a hack, but the results are much better than they are without it.\n      this.el.setObject3D(\"ambient-light\", new AmbientLight(0xffffff, 0.3));\n      this.el.setObject3D(\"light-probe\", this.sky.generateLightProbe(this.el.sceneEl.renderer));\n    }\n\n    // TODO if we care about dynamic skybox changes we should also update the enviornment map here\n    //\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\n/**\n * Used on a avatar-rig to move the avatar to a random spawn point on entry.\n * @namespace avatar\n * @component spawn-controller\n */\nAFRAME.registerComponent(\"spawn-controller\", {\n  schema: {\n    target: { type: \"selector\" },\n    camera: { type: \"selector\", default: \"#avatar-pov-node\" },\n    playerHeight: { default: 1.6 },\n    loadedEvent: { type: \"string\" }\n  },\n  init() {\n    this.moveToSpawnPoint = this.moveToSpawnPoint.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      this.data.target.addEventListener(this.data.loadedEvent, this.moveToSpawnPoint);\n    });\n  },\n  moveToSpawnPoint() {\n    const spawnPoints = document.querySelectorAll(\"[spawn-point]\");\n\n    if (spawnPoints.length === 0) {\n      // Keep default position\n      return;\n    }\n\n    const camera = this.data.camera;\n    const spawnPointIndex = Math.round((spawnPoints.length - 1) * Math.random());\n    const spawnPoint = spawnPoints[spawnPointIndex];\n\n    getLastWorldPosition(spawnPoint.object3D, this.el.object3D.position);\n    this.el.object3D.rotation.copy(spawnPoint.object3D.rotation);\n\n    if (this.el.sceneEl.is(\"vr-mode\")) {\n      // Rotate the avatar rig such that the vr-camera faces forward.\n      this.el.object3D.rotation.y -= this.data.camera.object3D.rotation.y;\n    } else {\n      // Reset the camera transform in 2D mode.\n      camera.object3D.position.set(0, this.data.playerHeight, 0);\n      camera.object3D.rotation.set(0, 0, 0);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    // Camera faces -Z direction. Flip rotation on Y axis to face the correct direction.\n    this.el.object3D.rotation.y += Math.PI;\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n\n/**\n * Marks an entity as a potential spawn point.\n * @namespace environment\n * @component spawn-point\n */\nAFRAME.registerComponent(\"spawn-point\", {\n  init() {\n    this.el.object3D.visible = false;\n  }\n});\n","const COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nimport {\n  enterQuery,\n  addComponent,\n  removeComponent,\n  defineComponent,\n  defineQuery,\n  exitQuery,\n  hasComponent,\n  Not,\n  entityExists\n} from \"bitecs\";\nimport { FloatyObject, Held, Owned, Rigidbody, MakeKinematicOnRelease } from \"../bit-components\";\n\nexport const MakeStaticWhenAtRest = defineComponent();\n\nconst makeStaticAtRestQuery = defineQuery([FloatyObject, Rigidbody, Not(Held), MakeStaticWhenAtRest]);\nfunction makeStaticAtRest(world) {\n  const physicsSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].physicsSystem;\n  makeStaticAtRestQuery(world).forEach(eid => {\n    const isMine = hasComponent(world, Owned, eid);\n    if (!isMine) {\n      removeComponent(world, MakeStaticWhenAtRest, eid);\n      return;\n    }\n\n    const bodyId = Rigidbody.bodyId[eid];\n    const bodyData = physicsSystem.bodyUuidToData.get(bodyId);\n    const isAtRest =\n      physicsSystem.bodyInitialized(bodyId) &&\n      physicsSystem.getLinearVelocity(bodyId) < bodyData.options.linearSleepingThreshold &&\n      physicsSystem.getAngularVelocity(bodyId) < bodyData.options.angularSleepingThreshold;\n\n    if (isAtRest) {\n      Object.assign(bodyData.options, {\n        type: \"kinematic\"\n      });\n      physicsSystem.updateBody(bodyId, bodyData.options);\n      removeComponent(world, MakeStaticWhenAtRest, eid);\n    }\n  });\n}\n\nconst makeKinematicOnReleaseExitQuery = exitQuery(defineQuery([Rigidbody, Held, MakeKinematicOnRelease]));\nfunction makeKinematicOnRelease(world) {\n  const physicsSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].physicsSystem;\n  makeKinematicOnReleaseExitQuery(world).forEach(eid => {\n    if (!entityExists(world, eid) || !hasComponent(world, Owned, eid)) return;\n    physicsSystem.updateBodyOptions(Rigidbody.bodyId[eid], { type: \"kinematic\" });\n  });\n}\n\nexport const FLOATY_OBJECT_FLAGS = {\n  MODIFY_GRAVITY_ON_RELEASE: 1 << 0,\n  REDUCE_ANGULAR_FLOAT: 1 << 1,\n  UNTHROWABLE: 1 << 2\n};\n\nconst enteredFloatyObjectsQuery = enterQuery(defineQuery([FloatyObject, Rigidbody]));\nconst heldFloatyObjectsQuery = defineQuery([FloatyObject, Rigidbody, Held]);\nconst exitedHeldFloatyObjectsQuery = exitQuery(heldFloatyObjectsQuery);\nconst enterHeldFloatyObjectsQuery = enterQuery(heldFloatyObjectsQuery);\nexport const floatyObjectSystem = world => {\n  const physicsSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].physicsSystem;\n\n  enteredFloatyObjectsQuery(world).forEach(eid => {\n    physicsSystem.updateBodyOptions(Rigidbody.bodyId[eid], {\n      type: \"kinematic\",\n      gravity: { x: 0, y: 0, z: 0 }\n    });\n  });\n\n  enterHeldFloatyObjectsQuery(world).forEach(eid => {\n    physicsSystem.updateBodyOptions(Rigidbody.bodyId[eid], {\n      gravity: { x: 0, y: 0, z: 0 },\n      type: \"dynamic\",\n      collisionFilterMask: COLLISION_LAYERS.HANDS | COLLISION_LAYERS.MEDIA_FRAMES\n    });\n  });\n\n  exitedHeldFloatyObjectsQuery(world).forEach(eid => {\n    if (!entityExists(world, eid) || !(hasComponent(world, FloatyObject, eid) && hasComponent(world, Rigidbody, eid)))\n      return;\n\n    const bodyId = Rigidbody.bodyId[eid];\n    const bodyData = physicsSystem.bodyUuidToData.get(bodyId);\n    if (FloatyObject.flags[eid] & FLOATY_OBJECT_FLAGS.MODIFY_GRAVITY_ON_RELEASE) {\n      if (bodyData.linearVelocity < 1.85) {\n        physicsSystem.updateBodyOptions(bodyId, {\n          gravity: { x: 0, y: 0, z: 0 },\n          angularDamping: FloatyObject.flags[eid] & FLOATY_OBJECT_FLAGS.REDUCE_ANGULAR_FLOAT ? 0.89 : 0.5,\n          linearDamping: 0.95,\n          linearSleepingThreshold: 0.1,\n          angularSleepingThreshold: 0.1,\n          collisionFilterMask: COLLISION_LAYERS.HANDS | COLLISION_LAYERS.MEDIA_FRAMES\n        });\n        addComponent(world, MakeStaticWhenAtRest, eid);\n      } else {\n        physicsSystem.updateBodyOptions(bodyId, {\n          gravity: { x: 0, y: FloatyObject.releaseGravity[eid], z: 0 },\n          angularDamping: 0.01,\n          linearDamping: 0.01,\n          linearSleepingThreshold: 1.6,\n          angularSleepingThreshold: 2.5,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n        });\n        removeComponent(world, MakeStaticWhenAtRest, eid);\n      }\n    } else {\n      physicsSystem.updateBodyOptions(bodyId, {\n        collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE,\n        gravity: { x: 0, y: -9.8, z: 0 }\n      });\n    }\n  });\n\n  makeStaticAtRest(world);\n  makeKinematicOnRelease(world);\n};\n","import { addComponent } from \"bitecs\";\nimport { FloatyObject } from \"../bit-components\";\nimport { FLOATY_OBJECT_FLAGS } from \"../systems/floaty-object-system\";\n/* global AFRAME */\n\nAFRAME.registerComponent(\"floaty-object\", {\n  schema: {\n    // On release, modify the gravity based upon gravitySpeedLimit. If less than this, let the object float\n    // otherwise apply releaseGravity.\n    modifyGravityOnRelease: { default: false },\n\n    // Gravity to apply if object is thrown at a speed greated than speed limit.\n    releaseGravity: { default: -2 },\n\n    // If true, the degree to which angular rotation is allowed when floating is reduced (useful for 2d media)\n    reduceAngularFloat: { default: false },\n\n    // If true, the object will behave the same regardless of how fast it was moving when released\n    unthrowable: { default: false }\n  },\n\n  init() {\n    addComponent(APP.world, FloatyObject, this.el.object3D.eid);\n  },\n\n  update() {\n    FloatyObject.flags[this.el.eid] =\n      (this.data.modifyGravityOnRelease && FLOATY_OBJECT_FLAGS.MODIFY_GRAVITY_ON_RELEASE) |\n      (this.data.reduceAngularFloat && FLOATY_OBJECT_FLAGS.REDUCE_ANGULAR_FLOAT) |\n      (this.data.unthrowable && FLOATY_OBJECT_FLAGS.UNTHROWABLE);\n    FloatyObject.releaseGravity[this.el.eid] = this.data.releaseGravity;\n  }\n});\n","/* global require AFRAME THREE setTimeout clearTimeout */\nimport { addMedia } from \"../utils/media-utils\";\nimport { waitForEvent } from \"../utils/async-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\nimport { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport { addComponent } from \"bitecs\";\nimport { Held, HeldRemoteLeft, HeldRemoteRight } from \"../bit-components\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nfunction setNonNullVec3Components(target, values) {\n  target.set(\n    values.x === null ? target.x : values.x,\n    values.y === null ? target.y : values.y,\n    values.z === null ? target.z : values.z\n  );\n}\n\n/**\n * Spawns networked objects when grabbed or when a specified event is fired.\n * @namespace network\n * @component super-spawner\n */\nAFRAME.registerComponent(\"super-spawner\", {\n  schema: {\n    /**\n     * Source of the media asset the spawner will spawn when grabbed. This can be a gltf, video, or image, or a url that the reticiulm media API can resolve to a gltf, video, or image.\n     */\n    src: { default: \"\" },\n\n    /**\n     * Whether to use the Reticulum media resolution API to interpret the src URL (e.g. find a video URL for Youtube videos.)\n     */\n    resolve: { default: false },\n\n    /**\n     * The template to use for this object\n     */\n    template: { default: \"\" },\n\n    /**\n     * Spawn the object with a custom scale, rather than copying that of the spawner.\n     */\n    spawnScale: { type: \"vec3\", default: { x: NaN, y: NaN, z: NaN } },\n\n    /**\n     * The spawner will become invisible and ungrabbable for this ammount of time after being grabbed. This can prevent rapidly spawning objects.\n     */\n    spawnCooldown: { default: 1 },\n\n    /**\n     * Optional event to listen for to spawn an object on the preferred superHand\n     */\n    spawnEvent: { type: \"string\" },\n\n    /**\n     * If true, will spawn the object at the cursor and animate it into the hand.\n     */\n    animateFromCursor: { type: \"boolean\" },\n\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.cooldownTimeout = null;\n    this.handPosition = new THREE.Vector3();\n\n    this.onSpawnEvent = this.onSpawnEvent.bind(this);\n\n    this.sceneEl = this.el.sceneEl;\n\n    this.tempSpawnHandPosition = new THREE.Vector3();\n\n    this.handleMediaLoaded = this.handleMediaLoaded.bind(this);\n\n    this.spawnedMediaScale = null;\n  },\n\n  play() {\n    this.el.addEventListener(\"media-loaded\", this.handleMediaLoaded);\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.addEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n  },\n\n  pause() {\n    this.el.removeEventListener(\"media-loaded\", this.handleMediaLoaded);\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.removeEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n    if (this.cooldownTimeout) {\n      clearTimeout(this.cooldownTimeout);\n      this.cooldownTimeout = null;\n      this.el.setAttribute(\"visible\", true);\n      this.el.classList.add(\"interactable\");\n    }\n  },\n\n  handleMediaLoaded(e) {\n    const spawnedEntity = e.target;\n    this.spawnedMediaScale = spawnedEntity.object3D.scale.clone();\n    setNonNullVec3Components(this.spawnedMediaScale, this.data.spawnScale);\n\n    const boxSize =\n      spawnedEntity.components[\"media-image\"] ||\n      spawnedEntity.components[\"media-video\"] ||\n      spawnedEntity.components[\"media-pdf\"]\n        ? 1\n        : 0.5;\n\n    const scaleCoefficient = getScaleCoefficient(boxSize, getBox(spawnedEntity, spawnedEntity.object3D));\n    this.spawnedMediaScale.divideScalar(scaleCoefficient);\n  },\n\n  async onSpawnEvent(e) {\n    if (this.cooldownTimeout || !this.el.sceneEl.is(\"entered\")) {\n      return;\n    }\n\n    const spawnedEntity = addMedia(\n      this.data.src,\n      this.data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      this.data.resolve,\n      false,\n      {\n        x: this.data.spawnScale.x === null ? 1 : this.data.spawnScale.x,\n        y: this.data.spawnScale.y === null ? 1 : this.data.spawnScale.y,\n        z: this.data.spawnScale.z === null ? 1 : this.data.spawnScale.z\n      },\n      this.data.mediaOptions\n    ).entity;\n\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    const cursor = (e.detail && e.detail.object3D) || interaction.options.rightRemote.entity.object3D;\n\n    const left = cursor.el.id.indexOf(\"right\") === -1;\n    const hand = left ? interaction.options.leftHand.entity.object3D : interaction.options.rightHand.entity.object3D;\n    cursor.getWorldPosition(spawnedEntity.object3D.position);\n    cursor.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    this.el.emit(\"spawned-entity-created\", { target: spawnedEntity });\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const willAnimateFromCursor =\n      this.data.animateFromCursor &&\n      (userinput.get(paths.actions.rightHand.matrix) || userinput.get(paths.actions.leftHand.matrix));\n    this.activateCooldown();\n    await waitForEvent(\"model-loaded\", spawnedEntity);\n\n    cursor.getWorldPosition(spawnedEntity.object3D.position);\n    cursor.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    if (willAnimateFromCursor) {\n      hand.getWorldPosition(this.handPosition);\n      spawnedEntity.setAttribute(\"animation__spawn-at-cursor\", {\n        property: \"position\",\n        delay: 500,\n        dur: 1500,\n        from: {\n          x: spawnedEntity.object3D.position.x,\n          y: spawnedEntity.object3D.position.y,\n          z: spawnedEntity.object3D.position.z\n        },\n        to: { x: this.handPosition.x, y: this.handPosition.y, z: this.handPosition.z },\n        easing: \"easeInOutBack\"\n      });\n    } else {\n      addComponent(APP.world, Held, spawnedEntity.eid);\n      if (left) {\n        addComponent(APP.world, HeldRemoteLeft, spawnedEntity.eid);\n      } else {\n        addComponent(APP.world, HeldRemoteRight, spawnedEntity.eid);\n      }\n    }\n\n    // We skip this in the scene preview because\n    //   1. hubs-systems is not initialized in the scene preview\n    //   2. physics is not needed in the scene preview\n    if (this.el.sceneEl.systems[\"hubs-systems\"]) {\n      this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem.resetDynamicBody(\n        spawnedEntity.components[\"body-helper\"].uuid\n      );\n    }\n\n    spawnedEntity.addEventListener(\n      \"media-loaded\",\n      () => {\n        this.el.emit(\"spawned-entity-loaded\", { target: spawnedEntity });\n      },\n      { once: true }\n    );\n  },\n\n  activateCooldown() {\n    if (this.data.spawnCooldown > 0) {\n      const [sx, sy, sz] = [this.el.object3D.scale.x, this.el.object3D.scale.y, this.el.object3D.scale.z];\n\n      this.el.setAttribute(\"visible\", false);\n      this.el.object3D.scale.set(0.001, 0.001, 0.001);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.el.classList.remove(\"interactable\");\n      this.el.setAttribute(\"body-helper\", { collisionFilterMask: COLLISION_LAYERS.NONE });\n      this.cooldownTimeout = setTimeout(() => {\n        this.el.setAttribute(\"visible\", true);\n        this.el.classList.add(\"interactable\");\n        this.el.setAttribute(\"body-helper\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER });\n        this.el.removeAttribute(\"animation__spawner-cooldown\");\n        this.el.setAttribute(\"animation__spawner-cooldown\", {\n          property: \"scale\",\n          delay: 50,\n          dur: 350,\n          from: { x: 0.001, y: 0.001, z: 0.001 },\n          to: { x: sx, y: sy, z: sz },\n          easing: \"easeOutElastic\"\n        });\n\n        setTimeout(() => {\n          this.cooldownTimeout = null;\n        }, 400);\n      }, this.data.spawnCooldown * 1000);\n    }\n  }\n});\n","import { Layers } from \"./layers\";\nimport \"../vendor/Water\";\nimport waterNormalMap from \"../assets/waternormals.jpg\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\n\n/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction MobileWater(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: `\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    `,\n\n    fragmentShader: `\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk[\"common\"]}\n      ${THREE.ShaderChunk[\"packing\"]}\n      ${THREE.ShaderChunk[\"bsdfs\"]}\n      ${THREE.ShaderChunk[\"lights_pars_begin\"]}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: false,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n}\n\nMobileWater.prototype = Object.create(THREE.Mesh.prototype);\nMobileWater.prototype.constructor = THREE.Water;\n\nasync function loadWaterNormals(url) {\n  const texture = await new Promise((resolve, reject) => new HubsTextureLoader().load(url, resolve, undefined, reject));\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n  texture.needsUpdate = true;\n  return texture;\n}\n\nAFRAME.registerComponent(\"water\", {\n  schema: {\n    waterColor: { type: \"color\", default: \"#001e0f\" },\n    distortionScale: { type: \"number\", default: 3.7 },\n    sunColor: { type: \"color\", default: \"#ffffff\" },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 1 },\n    speed: { type: \"number\", default: 0.1 },\n    forceMobile: { type: \"boolean\", default: false }\n  },\n  init() {\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    const waterGeometry = waterMesh.geometry;\n\n    // Render THREE.Water shader instead of THREE.Mesh\n    waterMesh.visible = false;\n\n    loadWaterNormals(waterNormalMap).then(waterNormals => {\n      const waterConfig = {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: waterNormals,\n        sunDirection: this.data.sunDirection,\n        sunColor: new THREE.Color(this.data.sunColor),\n        waterColor: new THREE.Color(this.data.waterColor),\n        distortionScale: this.data.distortionScale,\n        fog: false\n      };\n\n      if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR() || this.data.forceMobile) {\n        this.water = new MobileWater(waterGeometry, waterConfig);\n      } else {\n        this.water = new THREE.Water(waterGeometry, waterConfig);\n        this.water.mirrorCamera.layers.set(Layers.CAMERA_LAYER_REFLECTION);\n      }\n\n      this.el.setObject3D(\"water\", this.water);\n    });\n  },\n\n  update(oldData) {\n    if (this.data.forceMobile !== oldData.forceMobile) {\n      this.el.removeObject3D(\"water\");\n      this.init();\n      return;\n    }\n\n    if (!this.water) {\n      return;\n    }\n\n    const uniforms = this.water.material.uniforms;\n\n    if (this.data.waterColor !== oldData.waterColor) {\n      uniforms.waterColor.value.setStyle(this.data.waterColor);\n    }\n\n    if (this.data.distortionScale !== oldData.distortionScale) {\n      uniforms.distortionScale.value = this.data.distortionScale;\n    }\n\n    if (this.data.sunColor !== oldData.sunColor) {\n      uniforms.sunColor.value.setStyle(this.data.sunColor);\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunDirection.value.set(x, y, z);\n    }\n  },\n\n  tick(time) {\n    if (this.water) {\n      this.water.material.uniforms.time.value = (time / 1000) * this.data.speed;\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"water\");\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    waterMesh.visible = true;\n  }\n});\n","import { SimplexNoise } from \"three/examples/jsm/math/SimplexNoise\";\nimport waterNormalsUrl from \"../assets/waternormals.jpg\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\n\nconst { Mesh, PlaneBufferGeometry, MeshStandardMaterial, MeshPhongMaterial, Vector2, RepeatWrapping } = THREE;\n\n/**\n * SimpleWater\n * Keep in sync with Spoke's SimpleWater class\n */\n\n/**\n * Adapted dynamic geometry code from: https://github.com/ditzel/UnityOceanWavesAndShip\n */\n\nclass Octave {\n  constructor(speed = new Vector2(1, 1), scale = new Vector2(1, 1), height = 0.0025, alternate = true) {\n    this.speed = speed;\n    this.scale = scale;\n    this.height = height;\n    this.alternate = alternate;\n  }\n}\nexport default class SimpleWater extends Mesh {\n  constructor(normalMap, resolution = 24, lowQuality = false) {\n    const geometry = new PlaneBufferGeometry(10, 10, resolution, resolution);\n    geometry.rotateX(-Math.PI / 2);\n\n    const waterUniforms = {\n      ripplesSpeed: { value: 0.25 },\n      ripplesScale: { value: 1 },\n      time: { value: 0 }\n    };\n\n    const materialClass = lowQuality ? MeshPhongMaterial : MeshStandardMaterial;\n\n    normalMap.wrapS = normalMap.wrapT = RepeatWrapping;\n\n    const material = new materialClass({ color: 0x0054df, normalMap, roughness: 0.5, metalness: 0.5 });\n    material.name = \"SimpleWaterMaterial\";\n\n    material.onBeforeCompile = shader => {\n      Object.assign(shader.uniforms, waterUniforms);\n\n      shader.vertexShader = shader.vertexShader.replace(\n        \"#include <fog_pars_vertex>\",\n        `\n        #include <fog_pars_vertex>\n        varying vec3 vWPosition;\n      `\n      );\n\n      shader.vertexShader = shader.vertexShader.replace(\n        \"#include <fog_vertex>\",\n        `\n        #include <fog_vertex>\n        vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;\n      `\n      );\n\n      // getNoise function from https://github.com/mrdoob/three.js/blob/dev/examples/jsm/objects/Water.js\n      shader.fragmentShader = shader.fragmentShader.replace(\n        \"#include <normalmap_pars_fragment>\",\n        `\n        #include <normalmap_pars_fragment>\n\n        uniform float time;\n        uniform float ripplesSpeed;\n        uniform float ripplesScale;\n      \n        varying vec3 vWPosition;\n      \n        vec4 getNoise(vec2 uv){\n          float timeOffset = time * ripplesSpeed;\n          uv = (uv - 0.5) * (1.0 / ripplesScale);\n          vec2 uv0 = (uv/103.0)+vec2(timeOffset/17.0, timeOffset/29.0);\n          vec2 uv1 = uv/107.0-vec2(timeOffset/-19.0, timeOffset/31.0);\n          vec2 uv2 = uv/vec2(897.0, 983.0)+vec2(timeOffset/101.0, timeOffset/97.0);\n          vec2 uv3 = uv/vec2(991.0, 877.0)-vec2(timeOffset/109.0, timeOffset/-113.0);\n          vec4 noise = (texture2D(normalMap, uv0)) +\n                       (texture2D(normalMap, uv1)) +\n                       (texture2D(normalMap, uv2)) +\n                       (texture2D(normalMap, uv3));\n          return noise / 4.0;\n        }\n      `\n      );\n\n      // https://github.com/mrdoob/three.js/blob/dev/src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl.js#L20\n      shader.fragmentShader = shader.fragmentShader.replace(\n        \"#include <normal_fragment_maps>\",\n        `\n          // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n          vec3 eye_pos = -vViewPosition;\n          vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n          vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n          vec2 st0 = dFdx( vUv.st );\n          vec2 st1 = dFdy( vUv.st );\n\n          float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n          vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n          vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n          vec3 N = normalize( normal );\n          mat3 tsn = mat3( S, T, N );\n\n          vec3 mapN = getNoise(vWPosition.xz).xyz * 2.0 - 1.0;\n\n          mapN.xy *= normalScale;\n          mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n          normal = normalize( tsn * mapN );\n        `\n      );\n    };\n\n    super(geometry, material);\n\n    this.lowQuality = lowQuality;\n    this.waterUniforms = waterUniforms;\n\n    if (lowQuality) {\n      this.material.specular.set(0xffffff);\n    } else {\n      this.receiveShadow = true;\n    }\n\n    this.geometry.attributes.position.dynamic = true;\n\n    this.resolution = resolution;\n    this.octaves = [\n      new Octave(new Vector2(0.5, 0.5), new Vector2(1, 1), 0.01, true),\n      new Octave(new Vector2(0.05, 6), new Vector2(1, 20), 0.1, false)\n    ];\n\n    this.simplex = new SimplexNoise();\n  }\n\n  get opacity() {\n    return this.material.opacity;\n  }\n\n  set opacity(value) {\n    this.material.opacity = value;\n\n    if (value !== 1) {\n      this.material.transparent = true;\n    }\n  }\n\n  get color() {\n    return this.material.color;\n  }\n\n  get tideHeight() {\n    return this.octaves[0].height;\n  }\n\n  get tideScale() {\n    return this.octaves[0].scale;\n  }\n\n  get tideSpeed() {\n    return this.octaves[0].speed;\n  }\n\n  set tideHeight(value) {\n    this.octaves[0].height = value;\n  }\n\n  get waveHeight() {\n    return this.octaves[1].height;\n  }\n\n  set waveHeight(value) {\n    this.octaves[1].height = value;\n  }\n\n  get waveScale() {\n    return this.octaves[1].scale;\n  }\n\n  get waveSpeed() {\n    return this.octaves[1].speed;\n  }\n\n  set ripplesSpeed(value) {\n    this.waterUniforms.ripplesSpeed.value = value;\n  }\n\n  get ripplesSpeed() {\n    return this.waterUniforms.ripplesSpeed.value;\n  }\n\n  set ripplesScale(value) {\n    this.waterUniforms.ripplesScale.value = value;\n  }\n\n  get ripplesScale() {\n    return this.waterUniforms.ripplesScale.value;\n  }\n\n  update(time) {\n    const positionAttribute = this.geometry.attributes.position;\n\n    for (let x = 0; x <= this.resolution; x++) {\n      for (let z = 0; z <= this.resolution; z++) {\n        let y = 0;\n\n        for (let o = 0; o < this.octaves.length; o++) {\n          const octave = this.octaves[o];\n\n          if (octave.alternate) {\n            const noise = this.simplex.noise(\n              (x * octave.scale.x) / this.resolution,\n              (z * octave.scale.y) / this.resolution\n            );\n            y += Math.cos(noise + octave.speed.length() * time) * octave.height;\n          } else {\n            const noise =\n              this.simplex.noise(\n                (x * octave.scale.x + time * octave.speed.x) / this.resolution,\n                (z * octave.scale.y + time * octave.speed.y) / this.resolution\n              ) - 0.5;\n            y += noise * octave.height;\n          }\n        }\n\n        positionAttribute.setY(x * (this.resolution + 1) + z, y);\n      }\n    }\n\n    this.geometry.computeVertexNormals();\n    positionAttribute.needsUpdate = true;\n    this.waterUniforms.time.value = time;\n  }\n\n  clone(recursive) {\n    return new SimpleWater(this.material.normalMap, this.resolution, this.lowQuality).copy(this, recursive);\n  }\n\n  copy(source, recursive = true) {\n    super.copy(source, recursive);\n\n    this.opacity = source.opacity;\n    this.color.copy(source.color);\n    this.tideHeight = source.tideHeight;\n    this.tideScale.copy(source.tideScale);\n    this.tideSpeed.copy(source.tideSpeed);\n    this.waveHeight = source.waveHeight;\n    this.waveScale.copy(source.waveScale);\n    this.waveSpeed.copy(source.waveSpeed);\n    this.ripplesSpeed = source.ripplesSpeed;\n    this.ripplesScale = source.ripplesScale;\n\n    return this;\n  }\n}\n\nfunction vec2Equals(a, b) {\n  return a && b && a.x === b.x && a.y === b.y;\n}\n\nlet waterNormalMap = null;\n\nAFRAME.registerComponent(\"simple-water\", {\n  schema: {\n    opacity: { type: \"number\", default: 1 },\n    color: { type: \"color\" },\n    tideHeight: { type: \"number\", default: 0.01 },\n    tideScale: { type: \"vec2\", default: { x: 1, y: 1 } },\n    tideSpeed: { type: \"vec2\", default: { x: 0.5, y: 0.5 } },\n    waveHeight: { type: \"number\", default: 0.1 },\n    waveScale: { type: \"vec2\", default: { x: 1, y: 20 } },\n    waveSpeed: { type: \"vec2\", default: { x: 0.05, y: 6 } },\n    ripplesScale: { type: \"number\", default: 1 },\n    ripplesSpeed: { type: \"number\", default: 0.25 }\n  },\n\n  init() {\n    if (!waterNormalMap) {\n      waterNormalMap = new HubsTextureLoader().load(waterNormalsUrl);\n    }\n\n    const usePhongShader = window.APP.store.state.preferences.materialQualitySetting !== \"high\";\n    this.water = new SimpleWater(waterNormalMap, undefined, usePhongShader);\n    this.el.setObject3D(\"mesh\", this.water);\n  },\n\n  update(oldData) {\n    if (this.data.opacity !== oldData.opacity) {\n      this.water.opacity = this.data.opacity;\n    }\n\n    if (this.data.color !== oldData.color) {\n      this.water.color.set(this.data.color);\n    }\n\n    if (this.data.tideHeight !== oldData.tideHeight) {\n      this.water.tideHeight = this.data.tideHeight;\n    }\n\n    if (!vec2Equals(this.data.tideScale, oldData.tideScale)) {\n      this.water.tideScale.copy(this.data.tideScale);\n    }\n\n    if (!vec2Equals(this.data.tideSpeed, oldData.tideSpeed)) {\n      this.water.tideSpeed.copy(this.data.tideSpeed);\n    }\n\n    if (this.data.waveHeight !== oldData.waveHeight) {\n      this.water.waveHeight = this.data.waveHeight;\n    }\n\n    if (!vec2Equals(this.data.waveScale, oldData.waveScale)) {\n      this.water.waveScale.copy(this.data.waveScale);\n    }\n\n    if (!vec2Equals(this.data.waveSpeed, oldData.waveSpeed)) {\n      this.water.waveSpeed.copy(this.data.waveSpeed);\n    }\n\n    if (this.data.ripplesScale !== oldData.ripplesScale) {\n      this.water.ripplesScale = this.data.ripplesScale;\n    }\n\n    if (this.data.ripplesSpeed !== oldData.ripplesSpeed) {\n      this.water.ripplesSpeed = this.data.ripplesSpeed;\n    }\n  },\n\n  tick(time) {\n    this.water.update(time / 1000);\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","// Extracted from Tween.js\n// https://github.com/tweenjs/tween.js/blob/master/src/Tween.js#L473\n// https://github.com/tweenjs/tween.js/blob/master/LICENSE\n// Originally based on Robert Penner's Easing Functions\n// http://robertpenner.com/easing/\n// http://robertpenner.com/easing_terms_of_use.html\nexport function linear(k) {\n    return k;\n}\nexport function quadraticIn(k) {\n    return k * k;\n}\nexport function quadraticOut(k) {\n    return k * (2 - k);\n}\nexport function quadraticInOut(k) {\n    if ((k *= 2) < 1) {\n        return 0.5 * k * k;\n    }\n    return -0.5 * (--k * (k - 2) - 1);\n}\nexport function cubicIn(k) {\n    return k * k * k;\n}\nexport function cubicOut(k) {\n    return --k * k * k + 1;\n}\nexport function cubicInOut(k) {\n    if ((k *= 2) < 1) {\n        return 0.5 * k * k * k;\n    }\n    return 0.5 * ((k -= 2) * k * k + 2);\n}\nexport function quarticIn(k) {\n    return k * k * k * k;\n}\nexport function quarticOut(k) {\n    return 1 - --k * k * k * k;\n}\nexport function quarticInOut(k) {\n    if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k;\n    }\n    return -0.5 * ((k -= 2) * k * k * k - 2);\n}\nexport function quinticIn(k) {\n    return k * k * k * k * k;\n}\nexport function quinticOut(k) {\n    return --k * k * k * k * k + 1;\n}\nexport function quinticInOut(k) {\n    if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k;\n    }\n    return 0.5 * ((k -= 2) * k * k * k * k + 2);\n}\nexport function sinusoidalIn(k) {\n    return 1 - Math.cos((k * Math.PI) / 2);\n}\nexport function sinusoidalOut(k) {\n    return Math.sin((k * Math.PI) / 2);\n}\nexport function sinusoidalInOut(k) {\n    return 0.5 * (1 - Math.cos(Math.PI * k));\n}\nexport function exponentialIn(k) {\n    return k === 0 ? 0 : Math.pow(1024, k - 1);\n}\nexport function exponentialOut(k) {\n    return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n}\nexport function exponentialInOut(k) {\n    if (k === 0) {\n        return 0;\n    }\n    if (k === 1) {\n        return 1;\n    }\n    if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1);\n    }\n    return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n}\nexport function circularIn(k) {\n    return 1 - Math.sqrt(1 - k * k);\n}\nexport function circularOut(k) {\n    return Math.sqrt(1 - --k * k);\n}\nexport function circularInOut(k) {\n    if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1);\n    }\n    return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n}\nexport function elasticIn(k) {\n    if (k === 0) {\n        return 0;\n    }\n    if (k === 1) {\n        return 1;\n    }\n    return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n}\nexport function elasticOut(k) {\n    if (k === 0) {\n        return 0;\n    }\n    if (k === 1) {\n        return 1;\n    }\n    return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n}\nexport function elasticInOut(k) {\n    if (k === 0) {\n        return 0;\n    }\n    if (k === 1) {\n        return 1;\n    }\n    k *= 2;\n    if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n    }\n    return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n}\nexport function backIn(k) {\n    const s = 1.70158;\n    return k * k * ((s + 1) * k - s);\n}\nexport function backOut(k) {\n    const s = 1.70158;\n    return --k * k * ((s + 1) * k + s) + 1;\n}\nexport function backInOut(k) {\n    const s = 1.70158 * 1.525;\n    if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s));\n    }\n    return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n}\nexport function bounceIn(k) {\n    return 1 - bounceOut(1 - k);\n}\nexport function bounceOut(k) {\n    if (k < 1 / 2.75) {\n        return 7.5625 * k * k;\n    }\n    else if (k < 2 / 2.75) {\n        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n    }\n    else if (k < 2.5 / 2.75) {\n        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n    }\n    else {\n        return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n    }\n}\nexport function bounceInOut(k) {\n    if (k < 0.5) {\n        return bounceIn(k * 2) * 0.5;\n    }\n    return bounceOut(k * 2 - 1) * 0.5 + 0.5;\n}\n","import { Mesh, InstancedBufferGeometry, PlaneBufferGeometry, ShaderMaterial, Vector3, Color, InstancedBufferAttribute, MathUtils, AddEquation, Matrix4, UniformsUtils, UniformsLib, DynamicDrawUsage } from \"three\";\nimport * as EasingFunctions from \"@mozillareality/easing-functions\";\nexport function lerp(start, end, value) {\n    return (end - start) * value + start;\n}\nexport function clamp(min, max, value) {\n    if (value < min) {\n        value = min;\n    }\n    if (value > max) {\n        value = max;\n    }\n    return value;\n}\nfunction flipV(geometry) {\n    // Three.js seems to assume texture flipY is true for all its built in geometry\n    // but we turn this off on our texture loader since createImageBitmap in Firefox\n    // does not support flipping. Then we flip the v of uv for flipY = false texture.\n    // @TODO: There is a similar function in Hubs client core. Should we reuse it?\n    const uv = geometry.getAttribute(\"uv\");\n    for (let i = 0; i < uv.count; i++) {\n        uv.setY(i, 1.0 - uv.getY(i));\n    }\n    return geometry;\n}\nconst vertexShader = `\n  #include <common>\n\n  attribute vec4 particlePosition;\n  attribute vec4 particleColor;\n  attribute float particleAngle;\n\n  varying vec4 vColor;\n  varying vec2 vUV;\n\n  uniform mat4 emitterMatrix;\n\n  #include <fog_pars_vertex>\n\n  void main() {\n    vUV = uv;\n    vColor = particleColor;\n\n    float particleScale = particlePosition.w;\n    vec4 mvPosition = viewMatrix * emitterMatrix * vec4(particlePosition.xyz, 1.0);\n    \n    vec3 rotatedPosition = position;\n    rotatedPosition.x = cos( particleAngle ) * position.x - sin( particleAngle ) * position.y;\n    rotatedPosition.y = sin( particleAngle ) * position.x + cos( particleAngle ) * position.y;\n\n    mvPosition.xyz += rotatedPosition * particleScale;\n\n    gl_Position = projectionMatrix * mvPosition;\n\n    #include <fog_vertex>\n  }\n`;\nconst fragmentShader = `\n  #include <common>\n  #include <fog_pars_fragment>\n\n  uniform sampler2D map;\n\n  varying vec2 vUV;\n  varying vec4 vColor;\n\n  void main() {\n    gl_FragColor = texture2D(map,  vUV) * vColor;\n    #include <fog_fragment>\n  }\n`;\nexport class ParticleEmitter extends Mesh {\n    constructor(texture) {\n        const planeGeometry = new PlaneBufferGeometry(1, 1, 1, 1);\n        if (texture && !texture.flipY) {\n            flipV(planeGeometry);\n        }\n        const geometry = new InstancedBufferGeometry();\n        geometry.index = planeGeometry.index;\n        geometry.attributes = planeGeometry.attributes;\n        const material = new ShaderMaterial({\n            uniforms: UniformsUtils.merge([{\n                    map: { value: texture },\n                    emitterMatrix: { value: new Matrix4() }\n                }, UniformsLib.fog]),\n            vertexShader,\n            fragmentShader,\n            transparent: true,\n            depthWrite: false,\n            // TODO: Resolve the root issue. fog property seems to have\n            // been removed from Three.js ShaderMaterial at some point.\n            // @ts-ignore\n            fog: true,\n            blendEquation: AddEquation\n        });\n        super(geometry, material);\n        this.frustumCulled = false;\n        this.initialPositions = [];\n        this.startSize = 0.25;\n        this.endSize = 0.25;\n        this.sizeRandomness = 0;\n        this.startVelocity = new Vector3(0, 0, 0.5);\n        this.endVelocity = new Vector3(0, 0, 0.5);\n        this.angularVelocity = 0;\n        this.particleCount = 100;\n        this.lifetime = 5;\n        this.lifetimes = [];\n        this.lifetimeRandomness = 5;\n        this.particleSizeRandomness = [];\n        this.ageRandomness = 10;\n        this.initialAges = [];\n        this.ages = [];\n        this.colors = [];\n        this.endColor = new Color();\n        this.middleColor = new Color();\n        this.startColor = new Color();\n        this.startOpacity = 1;\n        this.middleOpacity = 1;\n        this.endOpacity = 1;\n        this.colorCurve = \"linear\";\n        this.velocityCurve = \"linear\";\n        this.sizeCurve = \"linear\";\n        this.worldScale = new Vector3();\n        this.inverseWorldScale = new Vector3();\n        this.updateParticles();\n    }\n    updateParticles() {\n        const texture = this.material.uniforms.map.value;\n        const planeGeometry = new PlaneBufferGeometry(1, 1, 1, 1);\n        if (texture && !texture.flipY) {\n            flipV(planeGeometry);\n        }\n        const tempGeo = new InstancedBufferGeometry();\n        tempGeo.index = planeGeometry.index;\n        tempGeo.attributes = planeGeometry.attributes;\n        const positions = [];\n        const colors = [];\n        const lifetimes = [];\n        const ages = [];\n        const initialAges = [];\n        const initialPositions = [];\n        const particleSizeRandomness = [];\n        const angles = [];\n        this.getWorldScale(this.worldScale);\n        for (let i = 0; i < this.particleCount; i++) {\n            initialAges[i] = Math.random() * this.ageRandomness - this.ageRandomness;\n            lifetimes[i] = this.lifetime + Math.random() * 2 * this.lifetimeRandomness;\n            ages[i] = initialAges[i];\n            initialPositions[i * 3] = Math.random() * 2 - 1; // X\n            initialPositions[i * 3 + 1] = Math.random() * 2 - 1; // Y\n            initialPositions[i * 3 + 2] = 0; // Z\n            particleSizeRandomness[i] = Math.random() * this.sizeRandomness;\n            positions.push(initialPositions[i * 3] * this.worldScale.x);\n            positions.push(initialPositions[i * 3 + 1] * this.worldScale.y);\n            positions.push(initialPositions[i * 3 + 2]);\n            positions.push(this.startSize + particleSizeRandomness[i]);\n            angles.push(0);\n            colors.push(this.startColor.r, this.startColor.g, this.startColor.b, 0);\n        }\n        tempGeo.setAttribute(\"particlePosition\", new InstancedBufferAttribute(new Float32Array(positions), 4).setUsage(DynamicDrawUsage));\n        tempGeo.setAttribute(\"particleColor\", new InstancedBufferAttribute(new Float32Array(colors), 4).setUsage(DynamicDrawUsage));\n        tempGeo.setAttribute(\"particleAngle\", new InstancedBufferAttribute(new Float32Array(angles), 1).setUsage(DynamicDrawUsage));\n        this.geometry = tempGeo;\n        this.initialPositions = initialPositions;\n        this.particleSizeRandomness = particleSizeRandomness;\n        this.ages = ages;\n        this.initialAges = initialAges;\n        this.lifetimes = lifetimes;\n        this.colors = colors;\n    }\n    update(dt) {\n        const geometry = this.geometry;\n        const particlePosition = geometry.attributes.particlePosition.array;\n        const particleColor = geometry.attributes.particleColor.array;\n        const particleAngle = geometry.attributes.particleAngle.array;\n        this.getWorldScale(this.worldScale);\n        this.inverseWorldScale.set(1 / this.worldScale.x, 1 / this.worldScale.y, 1 / this.worldScale.z);\n        const material = this.material;\n        const emitterMatrix = material.uniforms.emitterMatrix.value;\n        emitterMatrix.copy(this.matrixWorld);\n        emitterMatrix.scale(this.inverseWorldScale);\n        for (let i = 0; i < this.particleCount; i++) {\n            const prevAge = this.ages[i];\n            const curAge = (this.ages[i] += dt);\n            // Particle is dead\n            if (curAge < 0) {\n                continue;\n            }\n            // // Particle became alive\n            if (curAge > 0 && prevAge <= 0) {\n                particleColor[i * 4 + 3] = this.startOpacity;\n                particlePosition[i * 4] = this.initialPositions[i * 3] * this.worldScale.x;\n                particlePosition[i * 4 + 1] = this.initialPositions[i * 3 + 1] * this.worldScale.y;\n                particlePosition[i * 4 + 2] = 0;\n                particlePosition[i * 4 + 3] = this.startSize + this.particleSizeRandomness[i];\n                particleColor[i * 4] = this.startColor.r;\n                particleColor[i * 4 + 1] = this.startColor.g;\n                particleColor[i * 4 + 2] = this.startColor.b;\n                continue;\n            }\n            // Particle died\n            if (curAge > this.lifetimes[i]) {\n                this.ages[i] = this.initialAges[i];\n                particleColor[i * 4 + 3] = 0; // Set opacity to zero\n                continue;\n            }\n            const normalizedAge = clamp(0, 1, this.ages[i] / this.lifetimes[i]);\n            const _EasingFunctions = EasingFunctions;\n            if (!_EasingFunctions[this.velocityCurve]) {\n                console.warn(`Unknown velocity curve type ${this.velocityCurve} in particle emitter. Falling back to linear.`);\n                this.velocityCurve = \"linear\";\n            }\n            if (!_EasingFunctions[this.sizeCurve]) {\n                console.warn(`Unknown size curve type ${this.sizeCurve} in particle emitter. Falling back to linear.`);\n                this.sizeCurve = \"linear\";\n            }\n            if (!_EasingFunctions[this.colorCurve]) {\n                console.warn(`Unknown color curve type ${this.colorCurve} in particle emitter. Falling back to linear.`);\n                this.colorCurve = \"linear\";\n            }\n            const velFactor = _EasingFunctions[this.velocityCurve](normalizedAge);\n            const sizeFactor = _EasingFunctions[this.sizeCurve](normalizedAge);\n            const colorFactor = _EasingFunctions[this.colorCurve](normalizedAge);\n            particlePosition[i * 4] += lerp(this.startVelocity.x, this.endVelocity.x, velFactor) * dt;\n            particlePosition[i * 4 + 1] += lerp(this.startVelocity.y, this.endVelocity.y, velFactor) * dt;\n            particlePosition[i * 4 + 2] += lerp(this.startVelocity.z, this.endVelocity.z, velFactor) * dt;\n            particlePosition[i * 4 + 3] = lerp(this.startSize + this.particleSizeRandomness[i], this.endSize + this.particleSizeRandomness[i], sizeFactor);\n            particleAngle[i] += this.angularVelocity * MathUtils.DEG2RAD * dt;\n            if (colorFactor <= 0.5) {\n                const colorFactor1 = colorFactor / 0.5;\n                particleColor[i * 4] = lerp(this.startColor.r, this.middleColor.r, colorFactor1);\n                particleColor[i * 4 + 1] = lerp(this.startColor.g, this.middleColor.g, colorFactor1);\n                particleColor[i * 4 + 2] = lerp(this.startColor.b, this.middleColor.b, colorFactor1);\n                particleColor[i * 4 + 3] = lerp(this.startOpacity, this.middleOpacity, colorFactor1);\n            }\n            else if (colorFactor > 0.5) {\n                const colorFactor2 = (colorFactor - 0.5) / 0.5;\n                particleColor[i * 4] = lerp(this.middleColor.r, this.endColor.r, colorFactor2);\n                particleColor[i * 4 + 1] = lerp(this.middleColor.g, this.endColor.g, colorFactor2);\n                particleColor[i * 4 + 2] = lerp(this.middleColor.b, this.endColor.b, colorFactor2);\n                particleColor[i * 4 + 3] = lerp(this.middleOpacity, this.endOpacity, colorFactor2);\n            }\n        }\n        geometry.attributes.particlePosition.needsUpdate = true;\n        geometry.attributes.particleColor.needsUpdate = true;\n        geometry.attributes.particleAngle.needsUpdate = true;\n    }\n    copy(source, recursive = true) {\n        super.copy(source, recursive);\n        const material = this.material;\n        const sourceMaterial = source.material;\n        material.uniforms.map.value = sourceMaterial.uniforms.map.value;\n        this.startColor.copy(source.startColor);\n        this.middleColor.copy(source.middleColor);\n        this.endColor.copy(source.endColor);\n        this.startOpacity = source.startOpacity;\n        this.middleOpacity = source.middleOpacity;\n        this.endOpacity = source.endOpacity;\n        this.colorCurve = source.colorCurve;\n        this.sizeCurve = source.sizeCurve;\n        this.startSize = source.startSize;\n        this.endSize = source.endSize;\n        this.sizeRandomness = source.sizeRandomness;\n        this.ageRandomness = source.ageRandomness;\n        this.lifetime = source.lifetime;\n        this.lifetimeRandomness = source.lifetimeRandomness;\n        this.particleCount = source.particleCount;\n        this.startVelocity.copy(source.startVelocity);\n        this.endVelocity.copy(source.endVelocity);\n        this.velocityCurve = source.velocityCurve;\n        this.angularVelocity = source.angularVelocity;\n        return this;\n    }\n}\n","import { ParticleEmitter } from \"lib-hubs/packages/three-particle-emitter/lib/esm/index\";\nimport { textureLoader } from \"../utils/media-utils\";\nimport { resolveUrl } from \"../utils/media-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport defaultSrcImage from \"../assets/images/warning_icon.png\";\n\nconst defaultSrcUrl = new URL(defaultSrcImage, window.location.href).href;\n\nAFRAME.registerComponent(\"particle-emitter\", {\n  schema: {\n    resolve: { type: \"boolean\", default: true },\n    src: { type: \"string\", default: defaultSrcUrl },\n    startColor: { type: \"color\" },\n    middleColor: { type: \"color\" },\n    endColor: { type: \"color\" },\n    startOpacity: { type: \"number\", default: 1 },\n    middleOpacity: { type: \"number\", default: 1 },\n    endOpacity: { type: \"number\", default: 1 },\n    colorCurve: { type: \"string\", default: \"linear\" },\n    sizeCurve: { type: \"string\", default: \"linear\" },\n    startSize: { type: \"number\", default: 1 },\n    endSize: { type: \"number\", default: 1 },\n    sizeRandomness: { type: \"number\" },\n    ageRandomness: { type: \"number\" },\n    lifetime: { type: \"number\", default: 1 },\n    lifetimeRandomness: { type: \"number\" },\n    particleCount: { type: \"number\", default: 10 },\n    startVelocity: { type: \"vec3\", default: { x: 0, y: 0, z: 1 } },\n    endVelocity: { type: \"vec3\", default: { x: 0, y: 0, z: 1 } },\n    velocityCurve: { type: \"string\", default: \"linear\" },\n    angularVelocity: { type: \"number\" }\n  },\n\n  init() {\n    this.particleEmitter = new ParticleEmitter(null);\n    this.particleEmitter.visible = false;\n    this.el.setObject3D(\"particle-emitter\", this.particleEmitter);\n    this.updateParticles = false;\n    if (this.data.src === defaultSrcUrl) {\n      this.data.resolve = false;\n    }\n  },\n\n  async setTexture(src, resolve) {\n    let accessibleUrl = src;\n\n    if (resolve) {\n      const result = await resolveUrl(src);\n      let canonicalUrl = result.origin;\n\n      // handle protocol relative urls\n      if (canonicalUrl.startsWith(\"//\")) {\n        canonicalUrl = location.protocol + canonicalUrl;\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl);\n    }\n\n    const texture = await textureLoader.loadAsync(accessibleUrl);\n\n    // Guard against src changing while request was in flight\n    if (this.data.src !== src) {\n      return;\n    }\n\n    this.particleEmitter.material.uniforms.map.value = texture;\n    this.particleEmitter.visible = true;\n    this.updateParticles = true;\n  },\n\n  update(prevData) {\n    const data = this.data;\n    const particleEmitter = this.particleEmitter;\n\n    if (prevData.src !== data.src) {\n      this.setTexture(data.src, data.resolve).catch(console.error);\n    }\n\n    if (\n      prevData.startColor !== data.startColor ||\n      prevData.startSize !== data.startSize ||\n      prevData.sizeRandomness !== data.sizeRandomness ||\n      prevData.ageRandomness !== data.ageRandomness ||\n      prevData.lifetime !== data.lifetime ||\n      prevData.lifetimeRandomness !== data.lifetimeRandomness ||\n      prevData.particleCount !== data.particleCount\n    ) {\n      this.updateParticles = true;\n    }\n\n    particleEmitter.startColor.set(data.startColor);\n    particleEmitter.middleColor.set(data.middleColor);\n    particleEmitter.endColor.set(data.endColor);\n    particleEmitter.startOpacity = data.startOpacity;\n    particleEmitter.middleOpacity = data.middleOpacity;\n    particleEmitter.endOpacity = data.endOpacity;\n    particleEmitter.colorCurve = data.colorCurve;\n    particleEmitter.sizeCurve = data.sizeCurve;\n    particleEmitter.startSize = data.startSize;\n    particleEmitter.endSize = data.endSize;\n    particleEmitter.sizeRandomness = data.sizeRandomness;\n    particleEmitter.ageRandomness = data.ageRandomness;\n    particleEmitter.lifetime = data.lifetime;\n    particleEmitter.lifetimeRandomness = data.lifetimeRandomness;\n    particleEmitter.particleCount = data.particleCount;\n    particleEmitter.startVelocity.copy(data.startVelocity);\n    particleEmitter.endVelocity.copy(data.endVelocity);\n    particleEmitter.velocityCurve = data.velocityCurve;\n    particleEmitter.angularVelocity = data.angularVelocity;\n  },\n\n  tick(time, dt) {\n    if (this.updateParticles) {\n      this.particleEmitter.updateParticles();\n      this.updateParticles = false;\n    }\n\n    if (this.particleEmitter.visible) {\n      this.particleEmitter.update(dt / 1000);\n    }\n  }\n});\n","/**\n * Lightweight thenable implementation that is entirely self-contained within a single\n * function with no external dependencies so it can be easily shipped across to a WorkerModule.\n *\n * This implementation conforms fully to the Promises/A+ spec so it can safely interoperate\n * with other thenable implementations. https://github.com/promises-aplus/promises-spec\n *\n * *However*, it is _not_ a full implementation of ES2015 Promises, e.g. it does not\n * have the same constructor signature and does not expose a `catch` method or the static\n * `resolve`/`reject`/`all`/`race` initializer methods. If you need to hand a Thenable\n * instance off to consuming code that may expect a true Promise, you'll want to wrap it\n * in a native-or-polyfilled Promise first.\n *\n * (Why yet another Promises/A+ implementation? Great question. We needed a polyfill-like\n * thing that was (a) wrapped in a single function for easy serialization across to a Worker,\n * and (b) was as small as possible -- at ~900B minified (~500B gzipped) this is the smallest\n * implementation I've found. And also, exercises like this are challenging and fun.)\n */\nfunction BespokeThenable() {\n  var state = 0; // 0=pending, 1=fulfilled, -1=rejected\n  var queue = [];\n  var value;\n  var scheduled = 0;\n  var completeCalled = 0;\n\n  function then(onResolve, onReject) {\n    var nextThenable = BespokeThenable();\n\n    function handleNext() {\n      var cb = state > 0 ? onResolve : onReject;\n      if (isFn(cb)) {\n        try {\n          var result = cb(value);\n          if (result === nextThenable) {\n            recursiveError();\n          }\n          var resultThen = getThenableThen(result);\n          if (resultThen) {\n            resultThen.call(result, nextThenable.resolve, nextThenable.reject);\n          } else {\n            nextThenable.resolve(result);\n          }\n        } catch (err) {\n          nextThenable.reject(err);\n        }\n      } else {\n        nextThenable[state > 0 ? 'resolve' : 'reject'](value);\n      }\n    }\n\n    queue.push(handleNext);\n    if (state) {\n      scheduleQueueFlush();\n    }\n    return nextThenable\n  }\n\n  var resolve = oneTime(function (val) {\n    if (!completeCalled) {\n      complete(1, val);\n    }\n  });\n\n  var reject = oneTime(function (reason) {\n    if (!completeCalled) {\n      complete(-1, reason);\n    }\n  });\n\n  function complete(st, val) {\n    completeCalled++;\n    var ignoreThrow = 0;\n    try {\n      if (val === thenableObj) {\n        recursiveError();\n      }\n      var valThen = st > 0 && getThenableThen(val);\n      if (valThen) {\n        valThen.call(val, oneTime(function (v) {\n          ignoreThrow++;\n          complete(1, v);\n        }), oneTime(function (v) {\n          ignoreThrow++;\n          complete(-1, v);\n        }));\n      } else {\n        state = st;\n        value = val;\n        scheduleQueueFlush();\n      }\n    } catch(e) {\n      if (!state && !ignoreThrow) {\n        complete(-1, e);\n      }\n    }\n  }\n\n  function scheduleQueueFlush() {\n    if (!scheduled) {\n      setTimeout(flushQueue, 0); //TODO setImmediate or postMessage approach if available?\n      scheduled = 1;\n    }\n  }\n\n  function flushQueue() {\n    var q = queue;\n    scheduled = 0;\n    queue = [];\n    q.forEach(callIt);\n  }\n\n  function callIt(fn) {\n    fn();\n  }\n\n  function getThenableThen(val) {\n    var valThen = val && (isFn(val) || typeof val === 'object') && val.then;\n    return isFn(valThen) && valThen\n  }\n\n  function oneTime(fn) {\n    var called = 0;\n    return function() {\n      var args = [], len = arguments.length;\n      while ( len-- ) args[ len ] = arguments[ len ];\n\n      if (!called++) {\n        fn.apply(this, args);\n      }\n    }\n  }\n\n  function recursiveError() {\n    throw new TypeError('Chaining cycle detected')\n  }\n\n  var isFn = function (v) { return typeof v === 'function'; };\n\n  var thenableObj = {\n    then: then,\n    resolve: resolve,\n    reject: reject\n  };\n  return thenableObj\n}\n\n\n/**\n * Thenable implementation that uses a native Promise under the covers. This implementation\n * is preferred if Promise is available, for better performance and dev tools integration.\n * @constructor\n */\nfunction NativePromiseThenable() {\n  var resolve, reject;\n  var promise = new Promise(function (res, rej) {\n    resolve = res;\n    reject = rej;\n  });\n  return {\n    then: promise.then.bind(promise),\n    resolve: resolve,\n    reject: reject\n  }\n}\n\n/**\n * Promise.all() impl:\n */\nBespokeThenable.all = NativePromiseThenable.all = function(items) {\n  var resultCount = 0;\n  var results = [];\n  var out = DefaultThenable();\n  if (items.length === 0) {\n    out.resolve([]);\n  } else {\n    items.forEach(function (item, i) {\n      var itemThenable = DefaultThenable();\n      itemThenable.resolve(item);\n      itemThenable.then(function (res) {\n        resultCount++;\n        results[i] = res;\n        if (resultCount === items.length) {\n          out.resolve(results);\n        }\n      }, out.reject);\n    });\n  }\n  return out\n};\n\n\n/**\n * Choose the best Thenable implementation and export it as the default.\n */\nvar DefaultThenable = typeof Promise === 'function' ? NativePromiseThenable : BespokeThenable;\n\n/**\n * Main content for the worker that handles the loading and execution of\n * modules within it.\n */\nfunction workerBootstrap() {\n  var modules = Object.create(null);\n\n  // Handle messages for registering a module\n  function registerModule(ref, callback) {\n    var id = ref.id;\n    var name = ref.name;\n    var dependencies = ref.dependencies; if ( dependencies === void 0 ) dependencies = [];\n    var init = ref.init; if ( init === void 0 ) init = function(){};\n    var getTransferables = ref.getTransferables; if ( getTransferables === void 0 ) getTransferables = null;\n\n    // Only register once\n    if (modules[id]) { return }\n\n    try {\n      // If any dependencies are modules, ensure they're registered and grab their value\n      dependencies = dependencies.map(function (dep) {\n        if (dep && dep.isWorkerModule) {\n          registerModule(dep, function (depResult) {\n            if (depResult instanceof Error) { throw depResult }\n          });\n          dep = modules[dep.id].value;\n        }\n        return dep\n      });\n\n      // Rehydrate functions\n      init = rehydrate((\"<\" + name + \">.init\"), init);\n      if (getTransferables) {\n        getTransferables = rehydrate((\"<\" + name + \">.getTransferables\"), getTransferables);\n      }\n\n      // Initialize the module and store its value\n      var value = null;\n      if (typeof init === 'function') {\n        value = init.apply(void 0, dependencies);\n      } else {\n        console.error('worker module init function failed to rehydrate');\n      }\n      modules[id] = {\n        id: id,\n        value: value,\n        getTransferables: getTransferables\n      };\n      callback(value);\n    } catch(err) {\n      if (!(err && err.noLog)) {\n        console.error(err);\n      }\n      callback(err);\n    }\n  }\n\n  // Handle messages for calling a registered module's result function\n  function callModule(ref, callback) {\n    var ref$1;\n\n    var id = ref.id;\n    var args = ref.args;\n    if (!modules[id] || typeof modules[id].value !== 'function') {\n      callback(new Error((\"Worker module \" + id + \": not found or its 'init' did not return a function\")));\n    }\n    try {\n      var result = (ref$1 = modules[id]).value.apply(ref$1, args);\n      if (result && typeof result.then === 'function') {\n        result.then(handleResult, function (rej) { return callback(rej instanceof Error ? rej : new Error('' + rej)); });\n      } else {\n        handleResult(result);\n      }\n    } catch(err) {\n      callback(err);\n    }\n    function handleResult(result) {\n      try {\n        var tx = modules[id].getTransferables && modules[id].getTransferables(result);\n        if (!tx || !Array.isArray(tx) || !tx.length) {\n          tx = undefined; //postMessage is very picky about not passing null or empty transferables\n        }\n        callback(result, tx);\n      } catch(err) {\n        console.error(err);\n        callback(err);\n      }\n    }\n  }\n\n  function rehydrate(name, str) {\n    var result = void 0;\n    self.troikaDefine = function (r) { return result = r; };\n    var url = URL.createObjectURL(\n      new Blob(\n        [(\"/** \" + (name.replace(/\\*/g, '')) + \" **/\\n\\ntroikaDefine(\\n\" + str + \"\\n)\")],\n        {type: 'application/javascript'}\n      )\n    );\n    try {\n      importScripts(url);\n    } catch(err) {\n      console.error(err);\n    }\n    URL.revokeObjectURL(url);\n    delete self.troikaDefine;\n    return result\n  }\n\n  // Handler for all messages within the worker\n  self.addEventListener('message', function (e) {\n    var ref = e.data;\n    var messageId = ref.messageId;\n    var action = ref.action;\n    var data = ref.data;\n    try {\n      // Module registration\n      if (action === 'registerModule') {\n        registerModule(data, function (result) {\n          if (result instanceof Error) {\n            postMessage({\n              messageId: messageId,\n              success: false,\n              error: result.message\n            });\n          } else {\n            postMessage({\n              messageId: messageId,\n              success: true,\n              result: {isCallable: typeof result === 'function'}\n            });\n          }\n        });\n      }\n      // Invocation\n      if (action === 'callModule') {\n        callModule(data, function (result, transferables) {\n          if (result instanceof Error) {\n            postMessage({\n              messageId: messageId,\n              success: false,\n              error: result.message\n            });\n          } else {\n            postMessage({\n              messageId: messageId,\n              success: true,\n              result: result\n            }, transferables || undefined);\n          }\n        });\n      }\n    } catch(err) {\n      postMessage({\n        messageId: messageId,\n        success: false,\n        error: err.stack\n      });\n    }\n  });\n}\n\n/**\n * Fallback for `defineWorkerModule` that behaves identically but runs in the main\n * thread, for when the execution environment doesn't support web workers or they\n * are disallowed due to e.g. CSP security restrictions.\n */\nfunction defineMainThreadModule(options) {\n  var moduleFunc = function() {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    return moduleFunc._getInitResult().then(function (initResult) {\n      if (typeof initResult === 'function') {\n        return initResult.apply(void 0, args)\n      } else {\n        throw new Error('Worker module function was called but `init` did not return a callable function')\n      }\n    })\n  };\n  moduleFunc._getInitResult = function() {\n    // We can ignore getTransferables in main thread. TODO workerId?\n    var dependencies = options.dependencies;\n    var init = options.init;\n\n    // Resolve dependencies\n    dependencies = Array.isArray(dependencies) ? dependencies.map(function (dep) { return dep && dep._getInitResult ? dep._getInitResult() : dep; }\n    ) : [];\n\n    // Invoke init with the resolved dependencies\n    var initThenable = DefaultThenable.all(dependencies).then(function (deps) {\n      return init.apply(null, deps)\n    });\n\n    // Cache the resolved promise for subsequent calls\n    moduleFunc._getInitResult = function () { return initThenable; };\n\n    return initThenable\n  };\n  return moduleFunc\n}\n\nvar supportsWorkers = function () {\n  var supported = false;\n\n  // Only attempt worker initialization in browsers; elsewhere it would just be\n  // noise e.g. loading into a Node environment for SSR.\n  if (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\n    try {\n      // TODO additional checks for things like importScripts within the worker?\n      //  Would need to be an async check.\n      var worker = new Worker(\n        URL.createObjectURL(new Blob([''], { type: 'application/javascript' }))\n      );\n      worker.terminate();\n      supported = true;\n    } catch (err) {\n      if (typeof process !== 'undefined' && process.env.NODE_ENV === 'test') ; else {\n        console.log(\n          (\"Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: [\" + (err.message) + \"]\")\n        );\n      }\n    }\n  }\n\n  // Cached result\n  supportsWorkers = function () { return supported; };\n  return supported\n};\n\nvar _workerModuleId = 0;\nvar _messageId = 0;\nvar _allowInitAsString = false;\nvar workers = Object.create(null);\nvar registeredModules = Object.create(null); //workerId -> Set<unregisterFn>\nvar openRequests = Object.create(null);\n\n\n/**\n * Define a module of code that will be executed with a web worker. This provides a simple\n * interface for moving chunks of logic off the main thread, and managing their dependencies\n * among one another.\n *\n * @param {object} options\n * @param {function} options.init\n * @param {array} [options.dependencies]\n * @param {function} [options.getTransferables]\n * @param {string} [options.name]\n * @param {string} [options.workerId]\n * @return {function(...[*]): {then}}\n */\nfunction defineWorkerModule(options) {\n  if ((!options || typeof options.init !== 'function') && !_allowInitAsString) {\n    throw new Error('requires `options.init` function')\n  }\n  var dependencies = options.dependencies;\n  var init = options.init;\n  var getTransferables = options.getTransferables;\n  var workerId = options.workerId;\n\n  if (!supportsWorkers()) {\n    return defineMainThreadModule(options)\n  }\n\n  if (workerId == null) {\n    workerId = '#default';\n  }\n  var id = \"workerModule\" + (++_workerModuleId);\n  var name = options.name || id;\n  var registrationThenable = null;\n\n  dependencies = dependencies && dependencies.map(function (dep) {\n    // Wrap raw functions as worker modules with no dependencies\n    if (typeof dep === 'function' && !dep.workerModuleData) {\n      _allowInitAsString = true;\n      dep = defineWorkerModule({\n        workerId: workerId,\n        name: (\"<\" + name + \"> function dependency: \" + (dep.name)),\n        init: (\"function(){return (\\n\" + (stringifyFunction(dep)) + \"\\n)}\")\n      });\n      _allowInitAsString = false;\n    }\n    // Grab postable data for worker modules\n    if (dep && dep.workerModuleData) {\n      dep = dep.workerModuleData;\n    }\n    return dep\n  });\n\n  function moduleFunc() {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    // Register this module if needed\n    if (!registrationThenable) {\n      registrationThenable = callWorker(workerId,'registerModule', moduleFunc.workerModuleData);\n      var unregister = function () {\n        registrationThenable = null;\n        registeredModules[workerId].delete(unregister);\n      }\n      ;(registeredModules[workerId] || (registeredModules[workerId] = new Set())).add(unregister);\n    }\n\n    // Invoke the module, returning a thenable\n    return registrationThenable.then(function (ref) {\n      var isCallable = ref.isCallable;\n\n      if (isCallable) {\n        return callWorker(workerId,'callModule', {id: id, args: args})\n      } else {\n        throw new Error('Worker module function was called but `init` did not return a callable function')\n      }\n    })\n  }\n  moduleFunc.workerModuleData = {\n    isWorkerModule: true,\n    id: id,\n    name: name,\n    dependencies: dependencies,\n    init: stringifyFunction(init),\n    getTransferables: getTransferables && stringifyFunction(getTransferables)\n  };\n  return moduleFunc\n}\n\n/**\n * Terminate an active Worker by a workerId that was passed to defineWorkerModule.\n * This only terminates the Worker itself; the worker module will remain available\n * and if you call it again its Worker will be respawned.\n * @param {string} workerId\n */\nfunction terminateWorker(workerId) {\n  // Unregister all modules that were registered in that worker\n  if (registeredModules[workerId]) {\n    registeredModules[workerId].forEach(function (unregister) {\n      unregister();\n    });\n  }\n  // Terminate the Worker object\n  if (workers[workerId]) {\n    workers[workerId].terminate();\n    delete workers[workerId];\n  }\n}\n\n/**\n * Stringifies a function into a form that can be deserialized in the worker\n * @param fn\n */\nfunction stringifyFunction(fn) {\n  var str = fn.toString();\n  // If it was defined in object method/property format, it needs to be modified\n  if (!/^function/.test(str) && /^\\w+\\s*\\(/.test(str)) {\n    str = 'function ' + str;\n  }\n  return str\n}\n\n\nfunction getWorker(workerId) {\n  var worker = workers[workerId];\n  if (!worker) {\n    // Bootstrap the worker's content\n    var bootstrap = stringifyFunction(workerBootstrap);\n\n    // Create the worker from the bootstrap function content\n    worker = workers[workerId] = new Worker(\n      URL.createObjectURL(\n        new Blob(\n          [(\"/** Worker Module Bootstrap: \" + (workerId.replace(/\\*/g, '')) + \" **/\\n\\n;(\" + bootstrap + \")()\")],\n          {type: 'application/javascript'}\n        )\n      )\n    );\n\n    // Single handler for response messages from the worker\n    worker.onmessage = function (e) {\n      var response = e.data;\n      var msgId = response.messageId;\n      var callback = openRequests[msgId];\n      if (!callback) {\n        throw new Error('WorkerModule response with empty or unknown messageId')\n      }\n      delete openRequests[msgId];\n      callback(response);\n    };\n  }\n  return worker\n}\n\n// Issue a call to the worker with a callback to handle the response\nfunction callWorker(workerId, action, data) {\n  var thenable = DefaultThenable();\n  var messageId = ++_messageId;\n  openRequests[messageId] = function (response) {\n    if (response.success) {\n      thenable.resolve(response.result);\n    } else {\n      thenable.reject(new Error((\"Error in worker \" + action + \" call: \" + (response.error))));\n    }\n  };\n  getWorker(workerId).postMessage({\n    messageId: messageId,\n    action: action,\n    data: data\n  });\n  return thenable\n}\n\n/**\n * Just the {@link Thenable} function wrapped as a worker module. If another worker\n * module needs Thenable as a dependency, it's better to pass this module rather than\n * the raw function in its `dependencies` array so it only gets registered once.\n */\nvar ThenableWorkerModule = /*#__PURE__*/defineWorkerModule({\n  name: 'Thenable',\n  dependencies: [DefaultThenable],\n  init: function(Thenable) {\n    return Thenable\n  }\n});\n\nexport { DefaultThenable as Thenable, ThenableWorkerModule, defineWorkerModule, stringifyFunction, terminateWorker };\n","import { updateAudioSettings } from \"../update-audio-settings\";\n\nAFRAME.registerComponent(\"audio-zone-source\", {\n  init() {\n    this.originalAudioParamsData = null;\n    this.el.sceneEl.systems[\"hubs-systems\"]?.audioZonesSystem.registerSource(this);\n  },\n\n  remove() {\n    APP.zoneOverrides.delete(this.el);\n    this.el.sceneEl.systems[\"hubs-systems\"]?.audioZonesSystem.unregisterSource(this);\n  },\n\n  getPosition: (() => {\n    const sourcePos = new THREE.Vector3();\n    return function () {\n      const audio = APP.audios.get(this.el);\n      if (audio) {\n        audio.getWorldPosition(sourcePos);\n      } else {\n        sourcePos.set(0, 0, 0);\n      }\n      return sourcePos;\n    };\n  })(),\n\n  apply(params) {\n    APP.zoneOverrides.set(this.el, params);\n    const audio = APP.audios.get(this.el);\n    if (audio) {\n      updateAudioSettings(this.el, audio);\n    }\n  },\n\n  restore() {\n    APP.zoneOverrides.delete(this.el);\n    const audio = APP.audios.get(this.el);\n    if (audio) {\n      updateAudioSettings(this.el, audio);\n    }\n  }\n});\n","import { ShaderChunk, UniformsUtils, MeshDepthMaterial, RGBADepthPacking, MeshDistanceMaterial, ShaderLib, Matrix4, Vector3, Mesh, CylinderBufferGeometry, Vector2, MeshStandardMaterial, DoubleSide } from 'three';\n\n/**\n * Regular expression for matching the `void main() {` opener line in GLSL.\n * @type {RegExp}\n */\nconst voidMainRegExp = /\\bvoid\\s+main\\s*\\(\\s*\\)\\s*{/g;\n\n/**\n * Recursively expands all `#include <xyz>` statements within string of shader code.\n * Copied from three's WebGLProgram#parseIncludes for external use.\n *\n * @param {string} source - The GLSL source code to evaluate\n * @return {string} The GLSL code with all includes expanded\n */\nfunction expandShaderIncludes( source ) {\n  const pattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n  function replace(match, include) {\n    let chunk = ShaderChunk[include];\n    return chunk ? expandShaderIncludes(chunk) : match\n  }\n  return source.replace( pattern, replace )\n}\n\n/*\n * This is a direct copy of MathUtils.generateUUID from Three.js, to preserve compatibility with three\n * versions before 0.113.0 as it was changed from Math to MathUtils in that version.\n * https://github.com/mrdoob/three.js/blob/dd8b5aa3b270c17096b90945cd2d6d1b13aaec53/src/math/MathUtils.js#L16\n */\n\nconst _lut = [];\n\nfor (let i = 0; i < 256; i++) {\n  _lut[i] = (i < 16 ? '0' : '') + (i).toString(16);\n}\n\nfunction generateUUID() {\n\n  // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n  const d0 = Math.random() * 0xffffffff | 0;\n  const d1 = Math.random() * 0xffffffff | 0;\n  const d2 = Math.random() * 0xffffffff | 0;\n  const d3 = Math.random() * 0xffffffff | 0;\n  const uuid = _lut[d0 & 0xff] + _lut[d0 >> 8 & 0xff] + _lut[d0 >> 16 & 0xff] + _lut[d0 >> 24 & 0xff] + '-' +\n    _lut[d1 & 0xff] + _lut[d1 >> 8 & 0xff] + '-' + _lut[d1 >> 16 & 0x0f | 0x40] + _lut[d1 >> 24 & 0xff] + '-' +\n    _lut[d2 & 0x3f | 0x80] + _lut[d2 >> 8 & 0xff] + '-' + _lut[d2 >> 16 & 0xff] + _lut[d2 >> 24 & 0xff] +\n    _lut[d3 & 0xff] + _lut[d3 >> 8 & 0xff] + _lut[d3 >> 16 & 0xff] + _lut[d3 >> 24 & 0xff];\n\n  // .toUpperCase() here flattens concatenated strings to save heap memory space.\n  return uuid.toUpperCase()\n\n}\n\n// Local assign polyfill to avoid importing troika-core\nconst assign = Object.assign || function(/*target, ...sources*/) {\n  let target = arguments[0];\n  for (let i = 1, len = arguments.length; i < len; i++) {\n    let source = arguments[i];\n    if (source) {\n      for (let prop in source) {\n        if (source.hasOwnProperty(prop)) {\n          target[prop] = source[prop];\n        }\n      }\n    }\n  }\n  return target\n};\n\n\nconst epoch = Date.now();\nconst CONSTRUCTOR_CACHE = new WeakMap();\nconst SHADER_UPGRADE_CACHE = new Map();\n\n// Material ids must be integers, but we can't access the increment from Three's `Material` module,\n// so let's choose a sufficiently large starting value that should theoretically never collide.\nlet materialInstanceId = 1e10;\n\n/**\n * A utility for creating a custom shader material derived from another material's\n * shaders. This allows you to inject custom shader logic and transforms into the\n * builtin ThreeJS materials without having to recreate them from scratch.\n *\n * @param {THREE.Material} baseMaterial - the original material to derive from\n *\n * @param {Object} options - How the base material should be modified.\n * @param {Object} options.defines - Custom `defines` for the material\n * @param {Object} options.extensions - Custom `extensions` for the material, e.g. `{derivatives: true}`\n * @param {Object} options.uniforms - Custom `uniforms` for use in the modified shader. These can\n *        be accessed and manipulated via the resulting material's `uniforms` property, just like\n *        in a ShaderMaterial. You do not need to repeat the base material's own uniforms here.\n * @param {String} options.timeUniform - If specified, a uniform of this name will be injected into\n *        both shaders, and it will automatically be updated on each render frame with a number of\n *        elapsed milliseconds. The \"zero\" epoch time is not significant so don't rely on this as a\n *        true calendar time.\n * @param {String} options.vertexDefs - Custom GLSL code to inject into the vertex shader's top-level\n *        definitions, above the `void main()` function.\n * @param {String} options.vertexMainIntro - Custom GLSL code to inject at the top of the vertex\n *        shader's `void main` function.\n * @param {String} options.vertexMainOutro - Custom GLSL code to inject at the end of the vertex\n *        shader's `void main` function.\n * @param {String} options.vertexTransform - Custom GLSL code to manipulate the `position`, `normal`,\n *        and/or `uv` vertex attributes. This code will be wrapped within a standalone function with\n *        those attributes exposed by their normal names as read/write values.\n * @param {String} options.fragmentDefs - Custom GLSL code to inject into the fragment shader's top-level\n *        definitions, above the `void main()` function.\n * @param {String} options.fragmentMainIntro - Custom GLSL code to inject at the top of the fragment\n *        shader's `void main` function.\n * @param {String} options.fragmentMainOutro - Custom GLSL code to inject at the end of the fragment\n *        shader's `void main` function. You can manipulate `gl_FragColor` here but keep in mind it goes\n *        after any of ThreeJS's color postprocessing shader chunks (tonemapping, fog, etc.), so if you\n *        want those to apply to your changes use `fragmentColorTransform` instead.\n * @param {String} options.fragmentColorTransform - Custom GLSL code to manipulate the `gl_FragColor`\n *        output value. Will be injected near the end of the `void main` function, but before any\n *        of ThreeJS's color postprocessing shader chunks (tonemapping, fog, etc.), and before the\n *        `fragmentMainOutro`.\n * @param {function<{vertexShader,fragmentShader}>:{vertexShader,fragmentShader}} options.customRewriter - A function\n *        for performing custom rewrites of the full shader code. Useful if you need to do something\n *        special that's not covered by the other builtin options. This function will be executed before\n *        any other transforms are applied.\n * @param {boolean} options.chained - Set to `true` to prototype-chain the derived material to the base\n *        material, rather than the default behavior of copying it. This allows the derived material to\n *        automatically pick up changes made to the base material and its properties. This can be useful\n *        where the derived material is hidden from the user as an implementation detail, allowing them\n *        to work with the original material like normal. But it can result in unexpected behavior if not\n *        handled carefully.\n *\n * @return {THREE.Material}\n *\n * The returned material will also have two new methods, `getDepthMaterial()` and `getDistanceMaterial()`,\n * which can be called to get a variant of the derived material for use in shadow casting. If the\n * target mesh is expected to cast shadows, then you can assign these to the mesh's `customDepthMaterial`\n * (for directional and spot lights) and/or `customDistanceMaterial` (for point lights) properties to\n * allow the cast shadow to honor your derived shader's vertex transforms and discarded fragments. These\n * will also set a custom `#define IS_DEPTH_MATERIAL` or `#define IS_DISTANCE_MATERIAL` that you can look\n * for in your derived shaders with `#ifdef` to customize their behavior for the depth or distance\n * scenarios, e.g. skipping antialiasing or expensive shader logic.\n */\nfunction createDerivedMaterial(baseMaterial, options) {\n  // Generate a key that is unique to the content of these `options`. We'll use this\n  // throughout for caching and for generating the upgraded shader code. This increases\n  // the likelihood that the resulting shaders will line up across multiple calls so\n  // their GL programs can be shared and cached.\n  const optionsKey = getKeyForOptions(options);\n\n  // First check to see if we've already derived from this baseMaterial using this\n  // unique set of options, and if so reuse the constructor to avoid some allocations.\n  let ctorsByDerivation = CONSTRUCTOR_CACHE.get(baseMaterial);\n  if (!ctorsByDerivation) {\n    CONSTRUCTOR_CACHE.set(baseMaterial, (ctorsByDerivation = Object.create(null)));\n  }\n  if (ctorsByDerivation[optionsKey]) {\n    return new ctorsByDerivation[optionsKey]()\n  }\n\n  const privateBeforeCompileProp = `_onBeforeCompile${optionsKey}`;\n\n  // Private onBeforeCompile handler that injects the modified shaders and uniforms when\n  // the renderer switches to this material's program\n  const onBeforeCompile = function (shaderInfo) {\n    baseMaterial.onBeforeCompile.call(this, shaderInfo);\n\n    // Upgrade the shaders, caching the result by incoming source code\n    const cacheKey = this.customProgramCacheKey() + '|' + shaderInfo.vertexShader + '|' + shaderInfo.fragmentShader;\n    let upgradedShaders = SHADER_UPGRADE_CACHE[cacheKey];\n    if (!upgradedShaders) {\n      const upgraded = upgradeShaders(shaderInfo, options, optionsKey);\n      upgradedShaders = SHADER_UPGRADE_CACHE[cacheKey] = upgraded;\n    }\n\n    // Inject upgraded shaders and uniforms into the program\n    shaderInfo.vertexShader = upgradedShaders.vertexShader;\n    shaderInfo.fragmentShader = upgradedShaders.fragmentShader;\n    assign(shaderInfo.uniforms, this.uniforms);\n\n    // Inject auto-updating time uniform if requested\n    if (options.timeUniform) {\n      shaderInfo.uniforms[options.timeUniform] = {\n        get value() {return Date.now() - epoch}\n      };\n    }\n\n    // Users can still add their own handlers on top of ours\n    if (this[privateBeforeCompileProp]) {\n      this[privateBeforeCompileProp](shaderInfo);\n    }\n  };\n\n  const DerivedMaterial = function DerivedMaterial() {\n    return derive(options.chained ? baseMaterial : baseMaterial.clone())\n  };\n\n  const derive = function(base) {\n    // Prototype chain to the base material\n    const derived = Object.create(base, descriptor);\n\n    // Store the baseMaterial for reference; this is always the original even when cloning\n    Object.defineProperty(derived, 'baseMaterial', { value: baseMaterial });\n\n    // Needs its own ids\n    Object.defineProperty(derived, 'id', { value: materialInstanceId++ });\n    derived.uuid = generateUUID();\n\n    // Merge uniforms, defines, and extensions\n    derived.uniforms = assign({}, base.uniforms, options.uniforms);\n    derived.defines = assign({}, base.defines, options.defines);\n    derived.defines[`TROIKA_DERIVED_MATERIAL_${optionsKey}`] = ''; //force a program change from the base material\n    derived.extensions = assign({}, base.extensions, options.extensions);\n\n    // Don't inherit EventDispatcher listeners\n    derived._listeners = undefined;\n\n    return derived\n  };\n\n  const descriptor = {\n    constructor: {value: DerivedMaterial},\n    isDerivedMaterial: {value: true},\n\n    customProgramCacheKey: {\n      writable: true,\n      configurable: true,\n      value: function () {\n        return baseMaterial.customProgramCacheKey() + '|' + optionsKey\n      }\n    },\n\n    onBeforeCompile: {\n      get() {\n        return onBeforeCompile\n      },\n      set(fn) {\n        this[privateBeforeCompileProp] = fn;\n      }\n    },\n\n    copy: {\n      writable: true,\n      configurable: true,\n      value: function (source) {\n        baseMaterial.copy.call(this, source);\n        if (!baseMaterial.isShaderMaterial && !baseMaterial.isDerivedMaterial) {\n          assign(this.extensions, source.extensions);\n          assign(this.defines, source.defines);\n          assign(this.uniforms, UniformsUtils.clone(source.uniforms));\n        }\n        return this\n      }\n    },\n\n    clone: {\n      writable: true,\n      configurable: true,\n      value: function () {\n        const newBase = new baseMaterial.constructor();\n        return derive(newBase).copy(this)\n      }\n    },\n\n    /**\n     * Utility to get a MeshDepthMaterial that will honor this derived material's vertex\n     * transformations and discarded fragments.\n     */\n    getDepthMaterial: {\n      writable: true,\n      configurable: true,\n      value: function() {\n        let depthMaterial = this._depthMaterial;\n        if (!depthMaterial) {\n          depthMaterial = this._depthMaterial = createDerivedMaterial(\n            baseMaterial.isDerivedMaterial\n              ? baseMaterial.getDepthMaterial()\n              : new MeshDepthMaterial({ depthPacking: RGBADepthPacking }),\n            options\n          );\n          depthMaterial.defines.IS_DEPTH_MATERIAL = '';\n          depthMaterial.uniforms = this.uniforms; //automatically recieve same uniform values\n        }\n        return depthMaterial\n      }\n    },\n\n    /**\n     * Utility to get a MeshDistanceMaterial that will honor this derived material's vertex\n     * transformations and discarded fragments.\n     */\n    getDistanceMaterial: {\n      writable: true,\n      configurable: true,\n      value: function() {\n        let distanceMaterial = this._distanceMaterial;\n        if (!distanceMaterial) {\n          distanceMaterial = this._distanceMaterial = createDerivedMaterial(\n            baseMaterial.isDerivedMaterial\n              ? baseMaterial.getDistanceMaterial()\n              : new MeshDistanceMaterial(),\n            options\n          );\n          distanceMaterial.defines.IS_DISTANCE_MATERIAL = '';\n          distanceMaterial.uniforms = this.uniforms; //automatically recieve same uniform values\n        }\n        return distanceMaterial\n      }\n    },\n\n    dispose: {\n      writable: true,\n      configurable: true,\n      value() {\n        const {_depthMaterial, _distanceMaterial} = this;\n        if (_depthMaterial) _depthMaterial.dispose();\n        if (_distanceMaterial) _distanceMaterial.dispose();\n        baseMaterial.dispose.call(this);\n      }\n    }\n  };\n\n  ctorsByDerivation[optionsKey] = DerivedMaterial;\n  return new DerivedMaterial()\n}\n\n\nfunction upgradeShaders({vertexShader, fragmentShader}, options, key) {\n  let {\n    vertexDefs,\n    vertexMainIntro,\n    vertexMainOutro,\n    vertexTransform,\n    fragmentDefs,\n    fragmentMainIntro,\n    fragmentMainOutro,\n    fragmentColorTransform,\n    customRewriter,\n    timeUniform\n  } = options;\n\n  vertexDefs = vertexDefs || '';\n  vertexMainIntro = vertexMainIntro || '';\n  vertexMainOutro = vertexMainOutro || '';\n  fragmentDefs = fragmentDefs || '';\n  fragmentMainIntro = fragmentMainIntro || '';\n  fragmentMainOutro = fragmentMainOutro || '';\n\n  // Expand includes if needed\n  if (vertexTransform || customRewriter) {\n    vertexShader = expandShaderIncludes(vertexShader);\n  }\n  if (fragmentColorTransform || customRewriter) {\n    // We need to be able to find postprocessing chunks after include expansion in order to\n    // put them after the fragmentColorTransform, so mark them with comments first. Even if\n    // this particular derivation doesn't have a fragmentColorTransform, other derivations may,\n    // so we still mark them.\n    fragmentShader = fragmentShader.replace(\n      /^[ \\t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,\n      '\\n//!BEGIN_POST_CHUNK $1\\n$&\\n//!END_POST_CHUNK\\n'\n    );\n    fragmentShader = expandShaderIncludes(fragmentShader);\n  }\n\n  // Apply custom rewriter function\n  if (customRewriter) {\n    let res = customRewriter({vertexShader, fragmentShader});\n    vertexShader = res.vertexShader;\n    fragmentShader = res.fragmentShader;\n  }\n\n  // The fragmentColorTransform needs to go before any postprocessing chunks, so extract\n  // those and re-insert them into the outro in the correct place:\n  if (fragmentColorTransform) {\n    let postChunks = [];\n    fragmentShader = fragmentShader.replace(\n      /^\\/\\/!BEGIN_POST_CHUNK[^]+?^\\/\\/!END_POST_CHUNK/gm, // [^]+? = non-greedy match of any chars including newlines\n      match => {\n        postChunks.push(match);\n        return ''\n      }\n    );\n    fragmentMainOutro = `${fragmentColorTransform}\\n${postChunks.join('\\n')}\\n${fragmentMainOutro}`;\n  }\n\n  // Inject auto-updating time uniform if requested\n  if (timeUniform) {\n    const code = `\\nuniform float ${timeUniform};\\n`;\n    vertexDefs = code + vertexDefs;\n    fragmentDefs = code + fragmentDefs;\n  }\n\n  // Inject a function for the vertexTransform and rename all usages of position/normal/uv\n  if (vertexTransform) {\n    // Hoist these defs to the very top so they work in other function defs\n    vertexShader = `vec3 troika_position_${key};\nvec3 troika_normal_${key};\nvec2 troika_uv_${key};\n${vertexShader}\n`;\n    vertexDefs = `${vertexDefs}\nvoid troikaVertexTransform${key}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${vertexTransform}\n}\n`;\n    vertexMainIntro = `\ntroika_position_${key} = vec3(position);\ntroika_normal_${key} = vec3(normal);\ntroika_uv_${key} = vec2(uv);\ntroikaVertexTransform${key}(troika_position_${key}, troika_normal_${key}, troika_uv_${key});\n${vertexMainIntro}\n`;\n    vertexShader = vertexShader.replace(/\\b(position|normal|uv)\\b/g, (match, match1, index, fullStr) => {\n      return /\\battribute\\s+vec[23]\\s+$/.test(fullStr.substr(0, index)) ? match1 : `troika_${match1}_${key}`\n    });\n  }\n\n  // Inject defs and intro/outro snippets\n  vertexShader = injectIntoShaderCode(vertexShader, key, vertexDefs, vertexMainIntro, vertexMainOutro);\n  fragmentShader = injectIntoShaderCode(fragmentShader, key, fragmentDefs, fragmentMainIntro, fragmentMainOutro);\n\n  return {\n    vertexShader,\n    fragmentShader\n  }\n}\n\nfunction injectIntoShaderCode(shaderCode, id, defs, intro, outro) {\n  if (intro || outro || defs) {\n    shaderCode = shaderCode.replace(voidMainRegExp, `\n${defs}\nvoid troikaOrigMain${id}() {`\n    );\n    shaderCode += `\nvoid main() {\n  ${intro}\n  troikaOrigMain${id}();\n  ${outro}\n}`;\n  }\n  return shaderCode\n}\n\n\nfunction optionsJsonReplacer(key, value) {\n  return key === 'uniforms' ? undefined : typeof value === 'function' ? value.toString() : value\n}\n\nlet _idCtr = 0;\nconst optionsHashesToIds = new Map();\nfunction getKeyForOptions(options) {\n  const optionsHash = JSON.stringify(options, optionsJsonReplacer);\n  let id = optionsHashesToIds.get(optionsHash);\n  if (id == null) {\n    optionsHashesToIds.set(optionsHash, (id = ++_idCtr));\n  }\n  return id\n}\n\n// Copied from threejs WebGLPrograms.js so we can resolve builtin materials to their shaders\n// TODO how can we keep this from getting stale?\nconst MATERIAL_TYPES_TO_SHADERS = {\n  MeshDepthMaterial: 'depth',\n  MeshDistanceMaterial: 'distanceRGBA',\n  MeshNormalMaterial: 'normal',\n  MeshBasicMaterial: 'basic',\n  MeshLambertMaterial: 'lambert',\n  MeshPhongMaterial: 'phong',\n  MeshToonMaterial: 'toon',\n  MeshStandardMaterial: 'physical',\n  MeshPhysicalMaterial: 'physical',\n  MeshMatcapMaterial: 'matcap',\n  LineBasicMaterial: 'basic',\n  LineDashedMaterial: 'dashed',\n  PointsMaterial: 'points',\n  ShadowMaterial: 'shadow',\n  SpriteMaterial: 'sprite'\n};\n\n/**\n * Given a Three.js `Material` instance, find the shaders/uniforms that will be\n * used to render that material.\n *\n * @param material - the Material instance\n * @return {object} - the material's shader info: `{uniforms:{}, fragmentShader:'', vertexShader:''}`\n */\nfunction getShadersForMaterial(material) {\n  let builtinType = MATERIAL_TYPES_TO_SHADERS[material.type];\n  return builtinType ? ShaderLib[builtinType] : material //TODO fallback for unknown type?\n}\n\n/**\n * Find all uniforms and their types within a shader code string.\n *\n * @param {string} shader - The shader code to parse\n * @return {object} mapping of uniform names to their glsl type\n */\nfunction getShaderUniformTypes(shader) {\n  let uniformRE = /\\buniform\\s+(int|float|vec[234])\\s+([A-Za-z_][\\w]*)/g;\n  let uniforms = Object.create(null);\n  let match;\n  while ((match = uniformRE.exec(shader)) !== null) {\n    uniforms[match[2]] = match[1];\n  }\n  return uniforms\n}\n\n/**\n * Helper for smoothing out the `m.getInverse(x)` --> `m.copy(x).invert()` conversion\n * that happened in ThreeJS r123.\n * @param {Matrix4} srcMatrix\n * @param {Matrix4} [tgtMatrix]\n */\nfunction invertMatrix4(srcMatrix, tgtMatrix = new Matrix4()) {\n  if (typeof tgtMatrix.invert === 'function') {\n    tgtMatrix.copy(srcMatrix).invert();\n  } else {\n    tgtMatrix.getInverse(srcMatrix);\n  }\n  return tgtMatrix\n}\n\n/*\nInput geometry is a cylinder with r=1, height in y dimension from 0 to 1,\ndivided into a reasonable number of height segments.\n*/\n\nconst vertexDefs = `\nuniform vec3 pointA;\nuniform vec3 controlA;\nuniform vec3 controlB;\nuniform vec3 pointB;\nuniform float radius;\nvarying float bezierT;\n\nvec3 cubicBezier(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\n  float t2 = 1.0 - t;\n  float b0 = t2 * t2 * t2;\n  float b1 = 3.0 * t * t2 * t2;\n  float b2 = 3.0 * t * t * t2;\n  float b3 = t * t * t;\n  return b0 * p1 + b1 * c1 + b2 * c2 + b3 * p2;\n}\n\nvec3 cubicBezierDerivative(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\n  float t2 = 1.0 - t;\n  return -3.0 * p1 * t2 * t2 +\n    c1 * (3.0 * t2 * t2 - 6.0 * t2 * t) +\n    c2 * (6.0 * t2 * t - 3.0 * t * t) +\n    3.0 * p2 * t * t;\n}\n`;\n\nconst vertexTransform = `\nfloat t = position.y;\nbezierT = t;\nvec3 bezierCenterPos = cubicBezier(pointA, controlA, controlB, pointB, t);\nvec3 bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t));\n\n// Make \"sideways\" always perpendicular to the camera ray; this ensures that any twists\n// in the cylinder occur where you won't see them: \nvec3 viewDirection = normalMatrix * vec3(0.0, 0.0, 1.0);\nif (bezierDir == viewDirection) {\n  bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t == 1.0 ? t - 0.0001 : t + 0.0001));\n}\nvec3 sideways = normalize(cross(bezierDir, viewDirection));\nvec3 upish = normalize(cross(sideways, bezierDir));\n\n// Build a matrix for transforming this disc in the cylinder:\nmat4 discTx;\ndiscTx[0].xyz = sideways * radius;\ndiscTx[1].xyz = bezierDir * radius;\ndiscTx[2].xyz = upish * radius;\ndiscTx[3].xyz = bezierCenterPos;\ndiscTx[3][3] = 1.0;\n\n// Apply transform, ignoring original y\nposition = (discTx * vec4(position.x, 0.0, position.z, 1.0)).xyz;\nnormal = normalize(mat3(discTx) * normal);\n`;\n\nconst fragmentDefs = `\nuniform vec3 dashing;\nvarying float bezierT;\n`;\n\nconst fragmentMainIntro = `\nif (dashing.x + dashing.y > 0.0) {\n  float dashFrac = mod(bezierT - dashing.z, dashing.x + dashing.y);\n  if (dashFrac > dashing.x) {\n    discard;\n  }\n}\n`;\n\n// Debugging: separate color for each of the 6 sides:\n// const fragmentColorTransform = `\n// float sideNum = floor(vUV.x * 6.0);\n// vec3 mixColor = sideNum < 1.0 ? vec3(1.0, 0.0, 0.0) :\n//   sideNum < 2.0 ? vec3(0.0, 1.0, 1.0) :\n//   sideNum < 3.0 ? vec3(1.0, 1.0, 0.0) :\n//   sideNum < 4.0 ? vec3(0.0, 0.0, 1.0) :\n//   sideNum < 5.0 ? vec3(0.0, 1.0, 0.0) :\n//   vec3(1.0, 0.0, 1.0);\n// gl_FragColor.xyz = mix(gl_FragColor.xyz, mixColor, 0.5);\n// `\n\n\n\nfunction createBezierMeshMaterial(baseMaterial) {\n  return createDerivedMaterial(\n    baseMaterial,\n    {\n      chained: true,\n      uniforms: {\n        pointA: {value: new Vector3()},\n        controlA: {value: new Vector3()},\n        controlB: {value: new Vector3()},\n        pointB: {value: new Vector3()},\n        radius: {value: 0.01},\n        dashing: {value: new Vector3()} //on, off, offset\n      },\n      vertexDefs,\n      vertexTransform,\n      fragmentDefs,\n      fragmentMainIntro\n    }\n  )\n}\n\nlet geometry = null;\n\nconst defaultBaseMaterial = /*#__PURE__*/new MeshStandardMaterial({color: 0xffffff, side: DoubleSide});\n\n\n/**\n * A ThreeJS `Mesh` that bends a tube shape along a 3D cubic bezier path. The bending is done\n * by deforming a straight cylindrical geometry in the vertex shader based on a set of four\n * control point uniforms. It patches the necessary GLSL into the mesh's assigned `material`\n * automatically.\n *\n * The cubiz bezier path is determined by its four `Vector3` properties:\n * - `pointA`\n * - `controlA`\n * - `controlB`\n * - `pointB`\n *\n * The tube's radius is controlled by its `radius` property, which defaults to `0.01`.\n *\n * You can also give the tube a dashed appearance with two properties:\n *\n * - `dashArray` - an array of two numbers, defining the length of \"on\" and \"off\" parts of\n *   the dash. Each is a 0-1 ratio of the entire path's length. (Actually this is the `t` length\n *   used as input to the cubic bezier function, not its visible length.)\n * - `dashOffset` - offset of where the dash starts. You can animate this to make the dashes move.\n *\n * Note that the dashes will appear like a hollow tube, not solid. This will be more apparent on\n * thicker tubes.\n *\n * TODO: proper geometry bounding sphere and raycasting\n * TODO: allow control of the geometry's segment counts\n */\nclass BezierMesh extends Mesh {\n  static getGeometry() {\n    return geometry || (geometry =\n      new CylinderBufferGeometry(1, 1, 1, 6, 64).translate(0, 0.5, 0)\n    )\n  }\n\n  constructor() {\n    super(\n      BezierMesh.getGeometry(),\n      defaultBaseMaterial\n    );\n\n    this.pointA = new Vector3();\n    this.controlA = new Vector3();\n    this.controlB = new Vector3();\n    this.pointB = new Vector3();\n    this.radius = 0.01;\n    this.dashArray = new Vector2();\n    this.dashOffset = 0;\n\n    // TODO - disabling frustum culling until I figure out how to customize the\n    //  geometry's bounding sphere that gets used\n    this.frustumCulled = false;\n  }\n\n  // Handler for automatically wrapping the base material with our upgrades. We do the wrapping\n  // lazily on _read_ rather than write to avoid unnecessary wrapping on transient values.\n  get material() {\n    let derivedMaterial = this._derivedMaterial;\n    const baseMaterial = this._baseMaterial || this._defaultMaterial || (this._defaultMaterial = defaultBaseMaterial.clone());\n    if (!derivedMaterial || derivedMaterial.baseMaterial !== baseMaterial) {\n      derivedMaterial = this._derivedMaterial = createBezierMeshMaterial(baseMaterial);\n      // dispose the derived material when its base material is disposed:\n      baseMaterial.addEventListener('dispose', function onDispose() {\n        baseMaterial.removeEventListener('dispose', onDispose);\n        derivedMaterial.dispose();\n      });\n    }\n    return derivedMaterial\n  }\n  set material(baseMaterial) {\n    this._baseMaterial = baseMaterial;\n  }\n\n  // Create and update material for shadows upon request:\n  get customDepthMaterial() {\n    return this.material.getDepthMaterial()\n  }\n  get customDistanceMaterial() {\n    return this.material.getDistanceMaterial()\n  }\n\n  onBeforeRender(shaderInfo) {\n    const {uniforms} = this.material;\n    const {pointA, controlA, controlB, pointB, radius, dashArray, dashOffset} = this;\n    uniforms.pointA.value.copy(pointA);\n    uniforms.controlA.value.copy(controlA);\n    uniforms.controlB.value.copy(controlB);\n    uniforms.pointB.value.copy(pointB);\n    uniforms.radius.value = radius;\n    uniforms.dashing.value.set(dashArray.x, dashArray.y, dashOffset || 0);\n  }\n\n  raycast(raycaster, intersects) {\n    // TODO - just fail for now\n  }\n}\n\nexport { BezierMesh, createDerivedMaterial, expandShaderIncludes, getShaderUniformTypes, getShadersForMaterial, invertMatrix4, voidMainRegExp };\n","import { DataTexture, RGBAFormat, LinearFilter, Color, InstancedBufferGeometry, Sphere, Box3, BackSide, DoubleSide, InstancedBufferAttribute, PlaneBufferGeometry, BufferGeometry, Float32BufferAttribute, Vector2, Vector4, Matrix3, MeshBasicMaterial, Matrix4, Vector3, Mesh, FrontSide } from 'three';\nimport { defineWorkerModule, Thenable, terminateWorker, ThenableWorkerModule } from 'troika-worker-utils';\nimport bidiFactory from 'bidi-js';\nimport { createDerivedMaterial, voidMainRegExp } from 'troika-three-utils';\n\n/**\n * @typedef {object} SDFGeneratorResult\n * @property {Uint8Array} textureData\n * @property {number} timing\n */\n\n/**\n * Initializes and returns a function to generate an SDF texture for a given glyph.\n * @param {function} createGlyphSegmentsIndex - factory for a GlyphSegmentsIndex implementation.\n * @return {function(Object): SDFGeneratorResult}\n */\nfunction createSDFGenerator(createGlyphSegmentsIndex) {\n\n  /**\n   * How many straight line segments to use when approximating a glyph's quadratic/cubic bezier curves.\n   */\n  const CURVE_POINTS = 16;\n\n  /**\n   * Find the point on a quadratic bezier curve at t where t is in the range [0, 1]\n   */\n  function pointOnQuadraticBezier(x0, y0, x1, y1, x2, y2, t) {\n    const t2 = 1 - t;\n    return {\n      x: t2 * t2 * x0 + 2 * t2 * t * x1 + t * t * x2,\n      y: t2 * t2 * y0 + 2 * t2 * t * y1 + t * t * y2\n    }\n  }\n\n  /**\n   * Find the point on a cubic bezier curve at t where t is in the range [0, 1]\n   */\n  function pointOnCubicBezier(x0, y0, x1, y1, x2, y2, x3, y3, t) {\n    const t2 = 1 - t;\n    return {\n      x: t2 * t2 * t2 * x0 + 3 * t2 * t2 * t * x1 + 3 * t2 * t * t * x2 + t * t * t * x3,\n      y: t2 * t2 * t2 * y0 + 3 * t2 * t2 * t * y1 + 3 * t2 * t * t * y2 + t * t * t * y3\n    }\n  }\n\n  function now() {\n    return (self.performance || Date).now()\n  }\n\n  /**\n   * Generate an SDF texture segment for a single glyph.\n   * @param {number} sdfWidth - width of the SDF texture in pixels\n   * @param {number} sdfHeight - height of the SDF texture in pixels\n   * @param {string} path - an SVG path string describing the glyph; should only contain commands: M/L/Q/C/Z.\n   * @param {number[]} viewBox - [minX, minY, maxX, maxY] in font units aligning with the texture's edges\n   * @param {number} maxDistance - the maximum distance from the glyph path in font units that will be encoded\n   * @param {number} [sdfExponent] - specifies an exponent for encoding the SDF's distance values; higher exponents\n   *        will give greater precision nearer the glyph's path.\n   * @return {SDFGeneratorResult}\n   */\n  function generateSDF(sdfWidth, sdfHeight, path, viewBox, maxDistance, sdfExponent = 1) {\n    const start = now();\n    const textureData = new Uint8Array(sdfWidth * sdfHeight);\n\n    const viewBoxWidth = viewBox[2] - viewBox[0];\n    const viewBoxHeight = viewBox[3] - viewBox[1];\n\n    // Decompose all paths into straight line segments and add them to an index\n    const lineSegmentsIndex = createGlyphSegmentsIndex(viewBox);\n    const segmentRE = /([MLQCZ])([^MLQCZ]*)/g;\n    let match, firstX, firstY, prevX, prevY;\n    while (match = segmentRE.exec(path)) {\n      const args = match[2].replace(/^\\s*|\\s*$/g, '').split(/[,\\s]+/).map(v => parseFloat(v));\n      switch (match[1]) {\n        case 'M':\n          prevX = firstX = args[0];\n          prevY = firstY = args[1];\n          break\n        case 'L':\n          if (args[0] !== prevX || args[1] !== prevY) { //yup, some fonts have zero-length line commands\n            lineSegmentsIndex.addLineSegment(prevX, prevY, (prevX = args[0]), (prevY = args[1]));\n          }\n          break\n        case 'Q': {\n          let prevPoint = {x: prevX, y: prevY};\n          for (let i = 1; i < CURVE_POINTS; i++) {\n            let nextPoint = pointOnQuadraticBezier(\n              prevX, prevY,\n              args[0], args[1],\n              args[2], args[3],\n              i / (CURVE_POINTS - 1)\n            );\n            lineSegmentsIndex.addLineSegment(prevPoint.x, prevPoint.y, nextPoint.x, nextPoint.y);\n            prevPoint = nextPoint;\n          }\n          prevX = args[2];\n          prevY = args[3];\n          break\n        }\n        case 'C': {\n          let prevPoint = {x: prevX, y: prevY};\n          for (let i = 1; i < CURVE_POINTS; i++) {\n            let nextPoint = pointOnCubicBezier(\n              prevX, prevY,\n              args[0], args[1],\n              args[2], args[3],\n              args[4], args[5],\n              i / (CURVE_POINTS - 1)\n            );\n            lineSegmentsIndex.addLineSegment(prevPoint.x, prevPoint.y, nextPoint.x, nextPoint.y);\n            prevPoint = nextPoint;\n          }\n          prevX = args[4];\n          prevY = args[5];\n          break\n        }\n        case 'Z':\n          if (prevX !== firstX || prevY !== firstY) {\n            lineSegmentsIndex.addLineSegment(prevX, prevY, firstX, firstY);\n          }\n          break\n      }\n    }\n\n    // For each target SDF texel, find the distance from its center to its nearest line segment,\n    // map that distance to an alpha value, and write that alpha to the texel\n    for (let sdfX = 0; sdfX < sdfWidth; sdfX++) {\n      for (let sdfY = 0; sdfY < sdfHeight; sdfY++) {\n        const signedDist = lineSegmentsIndex.findNearestSignedDistance(\n          viewBox[0] + viewBoxWidth * (sdfX + 0.5) / sdfWidth,\n          viewBox[1] + viewBoxHeight * (sdfY + 0.5) / sdfHeight,\n          maxDistance\n        );\n\n        // Use an exponential scale to ensure the texels very near the glyph path have adequate\n        // precision, while allowing the distance field to cover the entire texture, given that\n        // there are only 8 bits available. Formula visualized: https://www.desmos.com/calculator/uiaq5aqiam\n        let alpha = Math.pow((1 - Math.abs(signedDist) / maxDistance), sdfExponent) / 2;\n        if (signedDist < 0) {\n          alpha = 1 - alpha;\n        }\n\n        alpha = Math.max(0, Math.min(255, Math.round(alpha * 255))); //clamp\n        textureData[sdfY * sdfWidth + sdfX] = alpha;\n      }\n    }\n\n    return {\n      textureData,\n      timing: now() - start\n    }\n  }\n\n  return generateSDF\n}\n\n/**\n * Factory function that creates a self-contained environment for processing text typesetting requests.\n *\n * It is important that this function has no closure dependencies, so that it can be easily injected\n * into the source for a Worker without requiring a build step or complex dependency loading. All its\n * dependencies must be passed in at initialization.\n *\n * @param {function} fontParser - a function that accepts an ArrayBuffer of the font data and returns\n * a standardized structure giving access to the font and its glyphs:\n *   {\n *     unitsPerEm: number,\n *     ascender: number,\n *     descender: number,\n *     forEachGlyph(string, fontSize, letterSpacing, callback) {\n *       //invokes callback for each glyph to render, passing it an object:\n *       callback({\n *         index: number,\n *         advanceWidth: number,\n *         xMin: number,\n *         yMin: number,\n *         xMax: number,\n *         yMax: number,\n *         pathCommandCount: number,\n *         forEachPathCommand(callback) {\n *           //invokes callback for each path command, with args:\n *           callback(\n *             type: 'M|L|C|Q|Z',\n *             ...args //0 to 6 args depending on the type\n *           )\n *         }\n *       })\n *     }\n *   }\n * @param {object} bidi - the bidi.js implementation object\n * @param {Object} config\n * @return {Object}\n */\nfunction createTypesetter(fontParser, bidi, config) {\n\n  const {\n    defaultFontURL\n  } = config;\n\n  /**\n   * Holds parsed font objects by url\n   */\n  const fonts = Object.create(null);\n\n  const INF = Infinity;\n\n  // Set of Unicode Default_Ignorable_Code_Point characters, these will not produce visible glyphs\n  const DEFAULT_IGNORABLE_CHARS = /[\\u00AD\\u034F\\u061C\\u115F-\\u1160\\u17B4-\\u17B5\\u180B-\\u180E\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u3164\\uFE00-\\uFE0F\\uFEFF\\uFFA0\\uFFF0-\\uFFF8]/;\n\n  // Incomplete set of characters that allow line breaking after them\n  // In the future we may consider a full Unicode line breaking algorithm impl: https://www.unicode.org/reports/tr14\n  const BREAK_AFTER_CHARS = /[\\s\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]/;\n\n  /**\n   * Load a given font url\n   */\n  function doLoadFont(url, callback) {\n    function tryLoad() {\n      const onError = err => {\n        console.error(`Failure loading font ${url}${url === defaultFontURL ? '' : '; trying fallback'}`, err);\n        if (url !== defaultFontURL) {\n          url = defaultFontURL;\n          tryLoad();\n        }\n      };\n      try {\n        const request = new XMLHttpRequest();\n        request.open('get', url, true);\n        request.responseType = 'arraybuffer';\n        request.onload = function () {\n          if (request.status >= 400) {\n            onError(new Error(request.statusText));\n          }\n          else if (request.status > 0) {\n            try {\n              const fontObj = fontParser(request.response);\n              callback(fontObj);\n            } catch (e) {\n              onError(e);\n            }\n          }\n        };\n        request.onerror = onError;\n        request.send();\n      } catch(err) {\n        onError(err);\n      }\n    }\n    tryLoad();\n  }\n\n\n  /**\n   * Load a given font url if needed, invoking a callback when it's loaded. If already\n   * loaded, the callback will be called synchronously.\n   */\n  function loadFont(fontUrl, callback) {\n    if (!fontUrl) fontUrl = defaultFontURL;\n    let font = fonts[fontUrl];\n    if (font) {\n      // if currently loading font, add to callbacks, otherwise execute immediately\n      if (font.pending) {\n        font.pending.push(callback);\n      } else {\n        callback(font);\n      }\n    } else {\n      fonts[fontUrl] = {pending: [callback]};\n      doLoadFont(fontUrl, fontObj => {\n        let callbacks = fonts[fontUrl].pending;\n        fonts[fontUrl] = fontObj;\n        callbacks.forEach(cb => cb(fontObj));\n      });\n    }\n  }\n\n\n  /**\n   * Main entry point.\n   * Process a text string with given font and formatting parameters, and return all info\n   * necessary to render all its glyphs.\n   */\n  function typeset(\n    {\n      text='',\n      font=defaultFontURL,\n      sdfGlyphSize=64,\n      fontSize=1,\n      letterSpacing=0,\n      lineHeight='normal',\n      maxWidth=INF,\n      direction,\n      textAlign='left',\n      textIndent=0,\n      whiteSpace='normal',\n      overflowWrap='normal',\n      anchorX = 0,\n      anchorY = 0,\n      includeCaretPositions=false,\n      chunkedBoundsSize=8192,\n      colorRanges=null\n    },\n    callback,\n    metricsOnly=false\n  ) {\n    const mainStart = now();\n    const timings = {fontLoad: 0, typesetting: 0};\n\n    // Ensure newlines are normalized\n    if (text.indexOf('\\r') > -1) {\n      console.info('Typesetter: got text with \\\\r chars; normalizing to \\\\n');\n      text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    }\n\n    // Ensure we've got numbers not strings\n    fontSize = +fontSize;\n    letterSpacing = +letterSpacing;\n    maxWidth = +maxWidth;\n    lineHeight = lineHeight || 'normal';\n    textIndent = +textIndent;\n\n    loadFont(font, fontObj => {\n      const hasMaxWidth = isFinite(maxWidth);\n      let glyphIds = null;\n      let glyphPositions = null;\n      let glyphData = null;\n      let glyphColors = null;\n      let caretPositions = null;\n      let visibleBounds = null;\n      let chunkedBounds = null;\n      let maxLineWidth = 0;\n      let renderableGlyphCount = 0;\n      let canWrap = whiteSpace !== 'nowrap';\n      const {ascender, descender, unitsPerEm} = fontObj;\n      timings.fontLoad = now() - mainStart;\n      const typesetStart = now();\n\n      // Find conversion between native font units and fontSize units; this will already be done\n      // for the gx/gy values below but everything else we'll need to convert\n      const fontSizeMult = fontSize / unitsPerEm;\n\n      // Determine appropriate value for 'normal' line height based on the font's actual metrics\n      // TODO this does not guarantee individual glyphs won't exceed the line height, e.g. Roboto; should we use yMin/Max instead?\n      if (lineHeight === 'normal') {\n        lineHeight = (ascender - descender) / unitsPerEm;\n      }\n\n      // Determine line height and leading adjustments\n      lineHeight = lineHeight * fontSize;\n      const halfLeading = (lineHeight - (ascender - descender) * fontSizeMult) / 2;\n      const topBaseline = -(ascender * fontSizeMult + halfLeading);\n      const caretHeight = Math.min(lineHeight, (ascender - descender) * fontSizeMult);\n      const caretBottomOffset = (ascender + descender) / 2 * fontSizeMult - caretHeight / 2;\n\n      // Distribute glyphs into lines based on wrapping\n      let lineXOffset = textIndent;\n      let currentLine = new TextLine();\n      const lines = [currentLine];\n\n      fontObj.forEachGlyph(text, fontSize, letterSpacing, (glyphObj, glyphX, charIndex) => {\n        const char = text.charAt(charIndex);\n        const glyphWidth = glyphObj.advanceWidth * fontSizeMult;\n        const curLineCount = currentLine.count;\n        let nextLine;\n\n        // Calc isWhitespace and isEmpty once per glyphObj\n        if (!('isEmpty' in glyphObj)) {\n          glyphObj.isWhitespace = !!char && /\\s/.test(char);\n          glyphObj.canBreakAfter = !!char && BREAK_AFTER_CHARS.test(char);\n          glyphObj.isEmpty = glyphObj.xMin === glyphObj.xMax || glyphObj.yMin === glyphObj.yMax || DEFAULT_IGNORABLE_CHARS.test(char);\n        }\n        if (!glyphObj.isWhitespace && !glyphObj.isEmpty) {\n          renderableGlyphCount++;\n        }\n\n        // If a non-whitespace character overflows the max width, we need to soft-wrap\n        if (canWrap && hasMaxWidth && !glyphObj.isWhitespace && glyphX + glyphWidth + lineXOffset > maxWidth && curLineCount) {\n          // If it's the first char after a whitespace, start a new line\n          if (currentLine.glyphAt(curLineCount - 1).glyphObj.canBreakAfter) {\n            nextLine = new TextLine();\n            lineXOffset = -glyphX;\n          } else {\n            // Back up looking for a whitespace character to wrap at\n            for (let i = curLineCount; i--;) {\n              // If we got the start of the line there's no soft break point; make hard break if overflowWrap='break-word'\n              if (i === 0 && overflowWrap === 'break-word') {\n                nextLine = new TextLine();\n                lineXOffset = -glyphX;\n                break\n              }\n              // Found a soft break point; move all chars since it to a new line\n              else if (currentLine.glyphAt(i).glyphObj.canBreakAfter) {\n                nextLine = currentLine.splitAt(i + 1);\n                const adjustX = nextLine.glyphAt(0).x;\n                lineXOffset -= adjustX;\n                for (let j = nextLine.count; j--;) {\n                  nextLine.glyphAt(j).x -= adjustX;\n                }\n                break\n              }\n            }\n          }\n          if (nextLine) {\n            currentLine.isSoftWrapped = true;\n            currentLine = nextLine;\n            lines.push(currentLine);\n            maxLineWidth = maxWidth; //after soft wrapping use maxWidth as calculated width\n          }\n        }\n\n        let fly = currentLine.glyphAt(currentLine.count);\n        fly.glyphObj = glyphObj;\n        fly.x = glyphX + lineXOffset;\n        fly.width = glyphWidth;\n        fly.charIndex = charIndex;\n\n        // Handle hard line breaks\n        if (char === '\\n') {\n          currentLine = new TextLine();\n          lines.push(currentLine);\n          lineXOffset = -(glyphX + glyphWidth + (letterSpacing * fontSize)) + textIndent;\n        }\n      });\n\n      // Calculate width of each line (excluding trailing whitespace) and maximum block width\n      lines.forEach(line => {\n        for (let i = line.count; i--;) {\n          let {glyphObj, x, width} = line.glyphAt(i);\n          if (!glyphObj.isWhitespace) {\n            line.width = x + width;\n            if (line.width > maxLineWidth) {\n              maxLineWidth = line.width;\n            }\n            return\n          }\n        }\n      });\n\n      // Find overall position adjustments for anchoring\n      let anchorXOffset = 0;\n      let anchorYOffset = 0;\n      if (anchorX) {\n        if (typeof anchorX === 'number') {\n          anchorXOffset = -anchorX;\n        }\n        else if (typeof anchorX === 'string') {\n          anchorXOffset = -maxLineWidth * (\n            anchorX === 'left' ? 0 :\n            anchorX === 'center' ? 0.5 :\n            anchorX === 'right' ? 1 :\n            parsePercent(anchorX)\n          );\n        }\n      }\n      if (anchorY) {\n        if (typeof anchorY === 'number') {\n          anchorYOffset = -anchorY;\n        }\n        else if (typeof anchorY === 'string') {\n          let height = lines.length * lineHeight;\n          anchorYOffset = anchorY === 'top' ? 0 :\n            anchorY === 'top-baseline' ? -topBaseline :\n            anchorY === 'middle' ? height / 2 :\n            anchorY === 'bottom' ? height :\n            anchorY === 'bottom-baseline' ? height - halfLeading + descender * fontSizeMult :\n            parsePercent(anchorY) * height;\n        }\n      }\n\n      if (!metricsOnly) {\n        // Resolve bidi levels\n        const bidiLevelsResult = bidi.getEmbeddingLevels(text, direction);\n\n        // Process each line, applying alignment offsets, adding each glyph to the atlas, and\n        // collecting all renderable glyphs into a single collection.\n        glyphIds = new Uint16Array(renderableGlyphCount);\n        glyphPositions = new Float32Array(renderableGlyphCount * 2);\n        glyphData = {};\n        visibleBounds = [INF, INF, -INF, -INF];\n        chunkedBounds = [];\n        let lineYOffset = topBaseline;\n        if (includeCaretPositions) {\n          caretPositions = new Float32Array(text.length * 3);\n        }\n        if (colorRanges) {\n          glyphColors = new Uint8Array(renderableGlyphCount * 3);\n        }\n        let renderableGlyphIndex = 0;\n        let prevCharIndex = -1;\n        let colorCharIndex = -1;\n        let chunk;\n        let currentColor;\n        lines.forEach((line, lineIndex) => {\n          let {count:lineGlyphCount, width:lineWidth} = line;\n\n          // Ignore empty lines\n          if (lineGlyphCount > 0) {\n            // Count trailing whitespaces, we want to ignore these for certain things\n            let trailingWhitespaceCount = 0;\n            for (let i = lineGlyphCount; i-- && line.glyphAt(i).glyphObj.isWhitespace;) {\n              trailingWhitespaceCount++;\n            }\n\n            // Apply horizontal alignment adjustments\n            let lineXOffset = 0;\n            let justifyAdjust = 0;\n            if (textAlign === 'center') {\n              lineXOffset = (maxLineWidth - lineWidth) / 2;\n            } else if (textAlign === 'right') {\n              lineXOffset = maxLineWidth - lineWidth;\n            } else if (textAlign === 'justify' && line.isSoftWrapped) {\n              // count non-trailing whitespace characters, and we'll adjust the offsets per character in the next loop\n              let whitespaceCount = 0;\n              for (let i = lineGlyphCount - trailingWhitespaceCount; i--;) {\n                if (line.glyphAt(i).glyphObj.isWhitespace) {\n                  whitespaceCount++;\n                }\n              }\n              justifyAdjust = (maxLineWidth - lineWidth) / whitespaceCount;\n            }\n            if (justifyAdjust || lineXOffset) {\n              let justifyOffset = 0;\n              for (let i = 0; i < lineGlyphCount; i++) {\n                let glyphInfo = line.glyphAt(i);\n                const glyphObj = glyphInfo.glyphObj;\n                glyphInfo.x += lineXOffset + justifyOffset;\n                // Expand non-trailing whitespaces for justify alignment\n                if (justifyAdjust !== 0 && glyphObj.isWhitespace && i < lineGlyphCount - trailingWhitespaceCount) {\n                  justifyOffset += justifyAdjust;\n                  glyphInfo.width += justifyAdjust;\n                }\n              }\n            }\n\n            // Perform bidi range flipping\n            const flips = bidi.getReorderSegments(\n              text, bidiLevelsResult, line.glyphAt(0).charIndex, line.glyphAt(line.count - 1).charIndex\n            );\n            for (let fi = 0; fi < flips.length; fi++) {\n              const [start, end] = flips[fi];\n              // Map start/end string indices to indices in the line\n              let left = Infinity, right = -Infinity;\n              for (let i = 0; i < lineGlyphCount; i++) {\n                if (line.glyphAt(i).charIndex >= start) { // gte to handle removed characters\n                  let startInLine = i, endInLine = i;\n                  for (; endInLine < lineGlyphCount; endInLine++) {\n                    let info = line.glyphAt(endInLine);\n                    if (info.charIndex > end) {\n                      break\n                    }\n                    if (endInLine < lineGlyphCount - trailingWhitespaceCount) { //don't include trailing ws in flip width\n                      left = Math.min(left, info.x);\n                      right = Math.max(right, info.x + info.width);\n                    }\n                  }\n                  for (let j = startInLine; j < endInLine; j++) {\n                    const glyphInfo = line.glyphAt(j);\n                    glyphInfo.x = right - (glyphInfo.x + glyphInfo.width - left);\n                  }\n                  break\n                }\n              }\n            }\n\n            // Assemble final data arrays\n            let glyphObj;\n            const setGlyphObj = g => glyphObj = g;\n            for (let i = 0; i < lineGlyphCount; i++) {\n              let glyphInfo = line.glyphAt(i);\n              glyphObj = glyphInfo.glyphObj;\n              const glyphId = glyphObj.index;\n\n              // Replace mirrored characters in rtl\n              const rtl = bidiLevelsResult.levels[glyphInfo.charIndex] & 1; //odd level means rtl\n              if (rtl) {\n                const mirrored = bidi.getMirroredCharacter(text[glyphInfo.charIndex]);\n                if (mirrored) {\n                  fontObj.forEachGlyph(mirrored, 0, 0, setGlyphObj);\n                }\n              }\n\n              // Add caret positions\n              if (includeCaretPositions) {\n                const {charIndex} = glyphInfo;\n                const caretLeft = glyphInfo.x + anchorXOffset;\n                const caretRight = glyphInfo.x + glyphInfo.width + anchorXOffset;\n                caretPositions[charIndex * 3] = rtl ? caretRight : caretLeft; //start edge x\n                caretPositions[charIndex * 3 + 1] = rtl ? caretLeft : caretRight; //end edge x\n                caretPositions[charIndex * 3 + 2] = lineYOffset + caretBottomOffset + anchorYOffset; //common bottom y\n\n                // If we skipped any chars from the previous glyph (due to ligature subs), fill in caret\n                // positions for those missing char indices; currently this uses a best-guess by dividing\n                // the ligature's width evenly. In the future we may try to use the font's LigatureCaretList\n                // table to get better interior caret positions.\n                const ligCount = charIndex - prevCharIndex;\n                if (ligCount > 1) {\n                  fillLigatureCaretPositions(caretPositions, prevCharIndex, ligCount);\n                }\n                prevCharIndex = charIndex;\n              }\n\n              // Track current color range\n              if (colorRanges) {\n                const {charIndex} = glyphInfo;\n                while(charIndex > colorCharIndex) {\n                  colorCharIndex++;\n                  if (colorRanges.hasOwnProperty(colorCharIndex)) {\n                    currentColor = colorRanges[colorCharIndex];\n                  }\n                }\n              }\n\n              // Get atlas data for renderable glyphs\n              if (!glyphObj.isWhitespace && !glyphObj.isEmpty) {\n                const idx = renderableGlyphIndex++;\n\n                // Add this glyph's path data\n                if (!glyphData[glyphId]) {\n                  glyphData[glyphId] = {\n                    path: glyphObj.path,\n                    pathBounds: [glyphObj.xMin, glyphObj.yMin, glyphObj.xMax, glyphObj.yMax]\n                  };\n                }\n\n                // Determine final glyph position and add to glyphPositions array\n                const glyphX = glyphInfo.x + anchorXOffset;\n                const glyphY = lineYOffset + anchorYOffset;\n                glyphPositions[idx * 2] = glyphX;\n                glyphPositions[idx * 2 + 1] = glyphY;\n\n                // Track total visible bounds\n                const visX0 = glyphX + glyphObj.xMin * fontSizeMult;\n                const visY0 = glyphY + glyphObj.yMin * fontSizeMult;\n                const visX1 = glyphX + glyphObj.xMax * fontSizeMult;\n                const visY1 = glyphY + glyphObj.yMax * fontSizeMult;\n                if (visX0 < visibleBounds[0]) visibleBounds[0] = visX0;\n                if (visY0 < visibleBounds[1]) visibleBounds[1] = visY0;\n                if (visX1 > visibleBounds[2]) visibleBounds[2] = visX1;\n                if (visY1 > visibleBounds[3]) visibleBounds[3] = visY1;\n\n                // Track bounding rects for each chunk of N glyphs\n                if (idx % chunkedBoundsSize === 0) {\n                  chunk = {start: idx, end: idx, rect: [INF, INF, -INF, -INF]};\n                  chunkedBounds.push(chunk);\n                }\n                chunk.end++;\n                const chunkRect = chunk.rect;\n                if (visX0 < chunkRect[0]) chunkRect[0] = visX0;\n                if (visY0 < chunkRect[1]) chunkRect[1] = visY0;\n                if (visX1 > chunkRect[2]) chunkRect[2] = visX1;\n                if (visY1 > chunkRect[3]) chunkRect[3] = visY1;\n\n                // Add to glyph ids array\n                glyphIds[idx] = glyphId;\n\n                // Add colors\n                if (colorRanges) {\n                  const start = idx * 3;\n                  glyphColors[start] = currentColor >> 16 & 255;\n                  glyphColors[start + 1] = currentColor >> 8 & 255;\n                  glyphColors[start + 2] = currentColor & 255;\n                }\n              }\n            }\n          }\n\n          // Increment y offset for next line\n          lineYOffset -= lineHeight;\n        });\n\n        // Fill in remaining caret positions in case the final character was a ligature\n        if (caretPositions) {\n          const ligCount = text.length - prevCharIndex;\n          if (ligCount > 1) {\n            fillLigatureCaretPositions(caretPositions, prevCharIndex, ligCount);\n          }\n        }\n      }\n\n      // Timing stats\n      timings.typesetting = now() - typesetStart;\n\n      callback({\n        glyphIds, //font indices for each glyph\n        glyphPositions, //x,y of each glyph's origin in layout\n        glyphData, //dict holding data about each glyph appearing in the text\n        caretPositions, //startX,endX,bottomY caret positions for each char\n        caretHeight, //height of cursor from bottom to top\n        glyphColors, //color for each glyph, if color ranges supplied\n        chunkedBounds, //total rects per (n=chunkedBoundsSize) consecutive glyphs\n        fontSize, //calculated em height\n        unitsPerEm, //font units per em\n        ascender: ascender * fontSizeMult, //font ascender\n        descender: descender * fontSizeMult, //font descender\n        lineHeight, //computed line height\n        topBaseline, //y coordinate of the top line's baseline\n        blockBounds: [ //bounds for the whole block of text, including vertical padding for lineHeight\n          anchorXOffset,\n          anchorYOffset - lines.length * lineHeight,\n          anchorXOffset + maxLineWidth,\n          anchorYOffset\n        ],\n        visibleBounds, //total bounds of visible text paths, may be larger or smaller than totalBounds\n        timings\n      });\n    });\n  }\n\n\n  /**\n   * For a given text string and font parameters, determine the resulting block dimensions\n   * after wrapping for the given maxWidth.\n   * @param args\n   * @param callback\n   */\n  function measure(args, callback) {\n    typeset(args, (result) => {\n      const [x0, y0, x1, y1] = result.blockBounds;\n      callback({\n        width: x1 - x0,\n        height: y1 - y0\n      });\n    }, {metricsOnly: true});\n  }\n\n  function parsePercent(str) {\n    let match = str.match(/^([\\d.]+)%$/);\n    let pct = match ? parseFloat(match[1]) : NaN;\n    return isNaN(pct) ? 0 : pct / 100\n  }\n\n  function fillLigatureCaretPositions(caretPositions, ligStartIndex, ligCount) {\n    const ligStartX = caretPositions[ligStartIndex * 3];\n    const ligEndX = caretPositions[ligStartIndex * 3 + 1];\n    const ligY = caretPositions[ligStartIndex * 3 + 2];\n    const guessedAdvanceX = (ligEndX - ligStartX) / ligCount;\n    for (let i = 0; i < ligCount; i++) {\n      const startIndex = (ligStartIndex + i) * 3;\n      caretPositions[startIndex] = ligStartX + guessedAdvanceX * i;\n      caretPositions[startIndex + 1] = ligStartX + guessedAdvanceX * (i + 1);\n      caretPositions[startIndex + 2] = ligY;\n    }\n  }\n\n  function now() {\n    return (self.performance || Date).now()\n  }\n\n  // Array-backed structure for a single line's glyphs data\n  function TextLine() {\n    this.data = [];\n  }\n  const textLineProps = ['glyphObj', 'x', 'width', 'charIndex'];\n  TextLine.prototype = {\n    width: 0,\n    isSoftWrapped: false,\n    get count() {\n      return Math.ceil(this.data.length / textLineProps.length)\n    },\n    glyphAt(i) {\n      let fly = TextLine.flyweight;\n      fly.data = this.data;\n      fly.index = i;\n      return fly\n    },\n    splitAt(i) {\n      let newLine = new TextLine();\n      newLine.data = this.data.splice(i * textLineProps.length);\n      return newLine\n    }\n  };\n  TextLine.flyweight = textLineProps.reduce((obj, prop, i, all) => {\n    Object.defineProperty(obj, prop, {\n      get() {\n        return this.data[this.index * textLineProps.length + i]\n      },\n      set(val) {\n        this.data[this.index * textLineProps.length + i] = val;\n      }\n    });\n    return obj\n  }, {data: null, index: 0});\n\n\n  return {\n    typeset,\n    measure,\n    loadFont\n  }\n}\n\n/**\n * Index for performing fast spatial searches of a glyph's line segments.\n * @return {{addLineSegment:function, findNearestSignedDistance:function}}\n */\nfunction createGlyphSegmentsIndex(bounds) {\n  let needsSort = false;\n  const segments = [];\n\n  function sortSegments() {\n    if (needsSort) {\n      // sort by maxX, this will let us short-circuit some loops below\n      segments.sort(function(a, b) {\n        return a.maxX - b.maxX\n      });\n      needsSort = false;\n    }\n  }\n\n  /**\n   * Add a line segment to the index.\n   * @param x0\n   * @param y0\n   * @param x1\n   * @param y1\n   */\n  function addLineSegment(x0, y0, x1, y1) {\n    const segment = {\n      x0, y0, x1, y1,\n      minX: Math.min(x0, x1),\n      minY: Math.min(y0, y1),\n      maxX: Math.max(x0, x1),\n      maxY: Math.max(y0, y1)\n    };\n    segments.push(segment);\n    needsSort = true;\n  }\n\n  /**\n   * For a given x/y, search the index for the closest line segment and return\n   * its signed distance. Negative = inside, positive = outside, zero = on edge\n   * @param x\n   * @param y\n   * @returns {number}\n   */\n  function findNearestSignedDistance(x, y) {\n    sortSegments();\n    let closestDistSq = Infinity;\n    let closestDist = Infinity;\n\n    for (let i = segments.length; i--;) {\n      const seg = segments[i];\n      if (seg.maxX + closestDist <= x) break //sorting by maxX means no more can be closer, so we can short-circuit\n      if (x + closestDist > seg.minX && y - closestDist < seg.maxY && y + closestDist > seg.minY) {\n        const distSq = absSquareDistanceToLineSegment(x, y, seg.x0, seg.y0, seg.x1, seg.y1);\n        if (distSq < closestDistSq) {\n          closestDistSq = distSq;\n          closestDist = Math.sqrt(closestDistSq);\n        }\n      }\n    }\n\n    // Flip to negative distance if inside the poly\n    if (isPointInPoly(x, y)) {\n      closestDist = -closestDist;\n    }\n    return closestDist\n  }\n\n  // Determine whether the given point lies inside or outside the glyph. Uses a simple\n  // ray casting algorithm using a ray pointing east from the point.\n  function isPointInPoly(x, y) {\n    sortSegments();\n    let inside = false;\n    for (let i = segments.length; i--;) {\n      const seg = segments[i];\n      if (seg.maxX <= x) break //sorting by maxX means no more can cross, so we can short-circuit\n      if (seg.minY < y && seg.maxY > y) {\n        const intersects = ((seg.y0 > y) !== (seg.y1 > y)) && (x < (seg.x1 - seg.x0) * (y - seg.y0) / (seg.y1 - seg.y0) + seg.x0);\n        if (intersects) {\n          inside = !inside;\n        }\n      }\n    }\n    return inside\n  }\n\n  // Find the absolute distance from a point to a line segment at closest approach\n  function absSquareDistanceToLineSegment(x, y, lineX0, lineY0, lineX1, lineY1) {\n    const ldx = lineX1 - lineX0;\n    const ldy = lineY1 - lineY0;\n    const lengthSq = ldx * ldx + ldy * ldy;\n    const t = lengthSq ? Math.max(0, Math.min(1, ((x - lineX0) * ldx + (y - lineY0) * ldy) / lengthSq)) : 0;\n    const dx = x - (lineX0 + t * ldx);\n    const dy = y - (lineY0 + t * ldy);\n    return dx * dx + dy * dy\n  }\n\n  return {\n    addLineSegment,\n    findNearestSignedDistance\n  }\n}\n\n/*!\nCustom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.\nOriginal MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE\n*/\nfunction typrFactory(){return \"undefined\"==typeof window&&(self.window=self),function(r){var e={parse:function(r){var t=e._bin,a=new Uint8Array(r);if(\"ttcf\"==t.readASCII(a,0,4)){var n=4;t.readUshort(a,n),n+=2,t.readUshort(a,n),n+=2;var o=t.readUint(a,n);n+=4;for(var s=[],i=0;i<o;i++){var h=t.readUint(a,n);n+=4,s.push(e._readFont(a,h));}return s}return [e._readFont(a,0)]},_readFont:function(r,t){var a=e._bin,n=t;a.readFixed(r,t),t+=4;var o=a.readUshort(r,t);t+=2,a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2;for(var s=[\"cmap\",\"head\",\"hhea\",\"maxp\",\"hmtx\",\"name\",\"OS/2\",\"post\",\"loca\",\"glyf\",\"kern\",\"CFF \",\"GPOS\",\"GSUB\",\"SVG \"],i={_data:r,_offset:n},h={},f=0;f<o;f++){var d=a.readASCII(r,t,4);t+=4,a.readUint(r,t),t+=4;var l=a.readUint(r,t);t+=4;var u=a.readUint(r,t);t+=4,h[d]={offset:l,length:u};}for(f=0;f<s.length;f++){var v=s[f];h[v]&&(i[v.trim()]=e[v.trim()].parse(r,h[v].offset,h[v].length,i));}return i},_tabOffset:function(r,t,a){for(var n=e._bin,o=n.readUshort(r,a+4),s=a+12,i=0;i<o;i++){var h=n.readASCII(r,s,4);s+=4,n.readUint(r,s),s+=4;var f=n.readUint(r,s);if(s+=4,n.readUint(r,s),s+=4,h==t)return f}return 0}};e._bin={readFixed:function(r,e){return (r[e]<<8|r[e+1])+(r[e+2]<<8|r[e+3])/65540},readF2dot14:function(r,t){return e._bin.readShort(r,t)/16384},readInt:function(r,t){return e._bin._view(r).getInt32(t)},readInt8:function(r,t){return e._bin._view(r).getInt8(t)},readShort:function(r,t){return e._bin._view(r).getInt16(t)},readUshort:function(r,t){return e._bin._view(r).getUint16(t)},readUshorts:function(r,t,a){for(var n=[],o=0;o<a;o++)n.push(e._bin.readUshort(r,t+2*o));return n},readUint:function(r,t){return e._bin._view(r).getUint32(t)},readUint64:function(r,t){return 4294967296*e._bin.readUint(r,t)+e._bin.readUint(r,t+4)},readASCII:function(r,e,t){for(var a=\"\",n=0;n<t;n++)a+=String.fromCharCode(r[e+n]);return a},readUnicode:function(r,e,t){for(var a=\"\",n=0;n<t;n++){var o=r[e++]<<8|r[e++];a+=String.fromCharCode(o);}return a},_tdec:\"undefined\"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,t,a){var n=e._bin._tdec;return n&&0==t&&a==r.length?n.decode(r):e._bin.readASCII(r,t,a)},readBytes:function(r,e,t){for(var a=[],n=0;n<t;n++)a.push(r[e+n]);return a},readASCIIArray:function(r,e,t){for(var a=[],n=0;n<t;n++)a.push(String.fromCharCode(r[e+n]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,t,a,n,o){var s=e._bin,i={},h=t;s.readFixed(r,t),t+=4;var f=s.readUshort(r,t);t+=2;var d=s.readUshort(r,t);t+=2;var l=s.readUshort(r,t);return t+=2,i.scriptList=e._lctf.readScriptList(r,h+f),i.featureList=e._lctf.readFeatureList(r,h+d),i.lookupList=e._lctf.readLookupList(r,h+l,o),i},e._lctf.readLookupList=function(r,t,a){var n=e._bin,o=t,s=[],i=n.readUshort(r,t);t+=2;for(var h=0;h<i;h++){var f=n.readUshort(r,t);t+=2;var d=e._lctf.readLookupTable(r,o+f,a);s.push(d);}return s},e._lctf.readLookupTable=function(r,t,a){var n=e._bin,o=t,s={tabs:[]};s.ltype=n.readUshort(r,t),t+=2,s.flag=n.readUshort(r,t),t+=2;var i=n.readUshort(r,t);t+=2;for(var h=s.ltype,f=0;f<i;f++){var d=n.readUshort(r,t);t+=2;var l=a(r,h,o+d,s);s.tabs.push(l);}return s},e._lctf.numOfOnes=function(r){for(var e=0,t=0;t<32;t++)0!=(r>>>t&1)&&e++;return e},e._lctf.readClassDef=function(r,t){var a=e._bin,n=[],o=a.readUshort(r,t);if(t+=2,1==o){var s=a.readUshort(r,t);t+=2;var i=a.readUshort(r,t);t+=2;for(var h=0;h<i;h++)n.push(s+h),n.push(s+h),n.push(a.readUshort(r,t)),t+=2;}if(2==o){var f=a.readUshort(r,t);t+=2;for(h=0;h<f;h++)n.push(a.readUshort(r,t)),t+=2,n.push(a.readUshort(r,t)),t+=2,n.push(a.readUshort(r,t)),t+=2;}return n},e._lctf.getInterval=function(r,e){for(var t=0;t<r.length;t+=3){var a=r[t],n=r[t+1];if(r[t+2],a<=e&&e<=n)return t}return -1},e._lctf.readCoverage=function(r,t){var a=e._bin,n={};n.fmt=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);return t+=2,1==n.fmt&&(n.tab=a.readUshorts(r,t,o)),2==n.fmt&&(n.tab=a.readUshorts(r,t,3*o)),n},e._lctf.coverageIndex=function(r,t){var a=r.tab;if(1==r.fmt)return a.indexOf(t);if(2==r.fmt){var n=e._lctf.getInterval(a,t);if(-1!=n)return a[n+2]+(t-a[n])}return -1},e._lctf.readFeatureList=function(r,t){var a=e._bin,n=t,o=[],s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readASCII(r,t,4);t+=4;var f=a.readUshort(r,t);t+=2;var d=e._lctf.readFeatureTable(r,n+f);d.tag=h.trim(),o.push(d);}return o},e._lctf.readFeatureTable=function(r,t){var a=e._bin,n=t,o={},s=a.readUshort(r,t);t+=2,s>0&&(o.featureParams=n+s);var i=a.readUshort(r,t);t+=2,o.tab=[];for(var h=0;h<i;h++)o.tab.push(a.readUshort(r,t+2*h));return o},e._lctf.readScriptList=function(r,t){var a=e._bin,n=t,o={},s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readASCII(r,t,4);t+=4;var f=a.readUshort(r,t);t+=2,o[h.trim()]=e._lctf.readScriptTable(r,n+f);}return o},e._lctf.readScriptTable=function(r,t){var a=e._bin,n=t,o={},s=a.readUshort(r,t);t+=2,o.default=e._lctf.readLangSysTable(r,n+s);var i=a.readUshort(r,t);t+=2;for(var h=0;h<i;h++){var f=a.readASCII(r,t,4);t+=4;var d=a.readUshort(r,t);t+=2,o[f.trim()]=e._lctf.readLangSysTable(r,n+d);}return o},e._lctf.readLangSysTable=function(r,t){var a=e._bin,n={};a.readUshort(r,t),t+=2,n.reqFeature=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);return t+=2,n.features=a.readUshorts(r,t,o),n},e.CFF={},e.CFF.parse=function(r,t,a){var n=e._bin;(r=new Uint8Array(r.buffer,t,a))[t=0],r[++t],r[++t],r[++t],t++;var o=[];t=e.CFF.readIndex(r,t,o);for(var s=[],i=0;i<o.length-1;i++)s.push(n.readASCII(r,t+o[i],o[i+1]-o[i]));t+=o[o.length-1];var h=[];t=e.CFF.readIndex(r,t,h);var f=[];for(i=0;i<h.length-1;i++)f.push(e.CFF.readDict(r,t+h[i],t+h[i+1]));t+=h[h.length-1];var d=f[0],l=[];t=e.CFF.readIndex(r,t,l);var u=[];for(i=0;i<l.length-1;i++)u.push(n.readASCII(r,t+l[i],l[i+1]-l[i]));if(t+=l[l.length-1],e.CFF.readSubrs(r,t,d),d.CharStrings){t=d.CharStrings;l=[];t=e.CFF.readIndex(r,t,l);var v=[];for(i=0;i<l.length-1;i++)v.push(n.readBytes(r,t+l[i],l[i+1]-l[i]));d.CharStrings=v;}if(d.ROS){t=d.FDArray;var c=[];t=e.CFF.readIndex(r,t,c),d.FDArray=[];for(i=0;i<c.length-1;i++){var p=e.CFF.readDict(r,t+c[i],t+c[i+1]);e.CFF._readFDict(r,p,u),d.FDArray.push(p);}t+=c[c.length-1],t=d.FDSelect,d.FDSelect=[];var U=r[t];if(t++,3!=U)throw U;var g=n.readUshort(r,t);t+=2;for(i=0;i<g+1;i++)d.FDSelect.push(n.readUshort(r,t),r[t+2]),t+=3;}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(r,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(r,d.charset,d.CharStrings.length)),e.CFF._readFDict(r,d,u),d},e.CFF._readFDict=function(r,t,a){var n;for(var o in t.Private&&(n=t.Private[1],t.Private=e.CFF.readDict(r,n,n+t.Private[0]),t.Private.Subrs&&e.CFF.readSubrs(r,n+t.Private.Subrs,t.Private)),t)-1!=[\"FamilyName\",\"FontName\",\"FullName\",\"Notice\",\"version\",\"Copyright\"].indexOf(o)&&(t[o]=a[t[o]-426+35]);},e.CFF.readSubrs=function(r,t,a){var n=e._bin,o=[];t=e.CFF.readIndex(r,t,o);var s,i=o.length;s=i<1240?107:i<33900?1131:32768,a.Bias=s,a.Subrs=[];for(var h=0;h<o.length-1;h++)a.Subrs.push(n.readBytes(r,t+o[h],o[h+1]-o[h]));},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,e){for(var t=0;t<r.charset.length;t++)if(r.charset[t]==e)return t;return -1},e.CFF.glyphBySE=function(r,t){return t<0||t>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[t])},e.CFF.readEncoding=function(r,t,a){e._bin;var n=[\".notdef\"],o=r[t];if(t++,0!=o)throw \"error: unknown encoding format: \"+o;var s=r[t];t++;for(var i=0;i<s;i++)n.push(r[t+i]);return n},e.CFF.readCharset=function(r,t,a){var n=e._bin,o=[\".notdef\"],s=r[t];if(t++,0==s)for(var i=0;i<a;i++){var h=n.readUshort(r,t);t+=2,o.push(h);}else {if(1!=s&&2!=s)throw \"error: format: \"+s;for(;o.length<a;){h=n.readUshort(r,t);t+=2;var f=0;1==s?(f=r[t],t++):(f=n.readUshort(r,t),t+=2);for(i=0;i<=f;i++)o.push(h),h++;}}return o},e.CFF.readIndex=function(r,t,a){var n=e._bin,o=n.readUshort(r,t)+1,s=r[t+=2];if(t++,1==s)for(var i=0;i<o;i++)a.push(r[t+i]);else if(2==s)for(i=0;i<o;i++)a.push(n.readUshort(r,t+2*i));else if(3==s)for(i=0;i<o;i++)a.push(16777215&n.readUint(r,t+3*i-1));else if(1!=o)throw \"unsupported offset size: \"+s+\", count: \"+o;return (t+=o*s)-1},e.CFF.getCharString=function(r,t,a){var n=e._bin,o=r[t],s=r[t+1];r[t+2],r[t+3],r[t+4];var i=1,h=null,f=null;o<=20&&(h=o,i=1),12==o&&(h=100*o+s,i=2),21<=o&&o<=27&&(h=o,i=1),28==o&&(f=n.readShort(r,t+1),i=3),29<=o&&o<=31&&(h=o,i=1),32<=o&&o<=246&&(f=o-139,i=1),247<=o&&o<=250&&(f=256*(o-247)+s+108,i=2),251<=o&&o<=254&&(f=256*-(o-251)-s-108,i=2),255==o&&(f=n.readInt(r,t+1)/65535,i=5),a.val=null!=f?f:\"o\"+h,a.size=i;},e.CFF.readCharString=function(r,t,a){for(var n=t+a,o=e._bin,s=[];t<n;){var i=r[t],h=r[t+1];r[t+2],r[t+3],r[t+4];var f=1,d=null,l=null;i<=20&&(d=i,f=1),12==i&&(d=100*i+h,f=2),19!=i&&20!=i||(d=i,f=2),21<=i&&i<=27&&(d=i,f=1),28==i&&(l=o.readShort(r,t+1),f=3),29<=i&&i<=31&&(d=i,f=1),32<=i&&i<=246&&(l=i-139,f=1),247<=i&&i<=250&&(l=256*(i-247)+h+108,f=2),251<=i&&i<=254&&(l=256*-(i-251)-h-108,f=2),255==i&&(l=o.readInt(r,t+1)/65535,f=5),s.push(null!=l?l:\"o\"+d),t+=f;}return s},e.CFF.readDict=function(r,t,a){for(var n=e._bin,o={},s=[];t<a;){var i=r[t],h=r[t+1];r[t+2],r[t+3],r[t+4];var f=1,d=null,l=null;if(28==i&&(l=n.readShort(r,t+1),f=3),29==i&&(l=n.readInt(r,t+1),f=5),32<=i&&i<=246&&(l=i-139,f=1),247<=i&&i<=250&&(l=256*(i-247)+h+108,f=2),251<=i&&i<=254&&(l=256*-(i-251)-h-108,f=2),255==i)throw l=n.readInt(r,t+1)/65535,f=5,\"unknown number\";if(30==i){var u=[];for(f=1;;){var v=r[t+f];f++;var c=v>>4,p=15&v;if(15!=c&&u.push(c),15!=p&&u.push(p),15==p)break}for(var U=\"\",g=[0,1,2,3,4,5,6,7,8,9,\".\",\"e\",\"e-\",\"reserved\",\"-\",\"endOfNumber\"],S=0;S<u.length;S++)U+=g[u[S]];l=parseFloat(U);}if(i<=21)if(d=[\"version\",\"Notice\",\"FullName\",\"FamilyName\",\"Weight\",\"FontBBox\",\"BlueValues\",\"OtherBlues\",\"FamilyBlues\",\"FamilyOtherBlues\",\"StdHW\",\"StdVW\",\"escape\",\"UniqueID\",\"XUID\",\"charset\",\"Encoding\",\"CharStrings\",\"Private\",\"Subrs\",\"defaultWidthX\",\"nominalWidthX\"][i],f=1,12==i)d=[\"Copyright\",\"isFixedPitch\",\"ItalicAngle\",\"UnderlinePosition\",\"UnderlineThickness\",\"PaintType\",\"CharstringType\",\"FontMatrix\",\"StrokeWidth\",\"BlueScale\",\"BlueShift\",\"BlueFuzz\",\"StemSnapH\",\"StemSnapV\",\"ForceBold\",0,0,\"LanguageGroup\",\"ExpansionFactor\",\"initialRandomSeed\",\"SyntheticBase\",\"PostScript\",\"BaseFontName\",\"BaseFontBlend\",0,0,0,0,0,0,\"ROS\",\"CIDFontVersion\",\"CIDFontRevision\",\"CIDFontType\",\"CIDCount\",\"UIDBase\",\"FDArray\",\"FDSelect\",\"FontName\"][h],f=2;null!=d?(o[d]=1==s.length?s[0]:s,s=[]):s.push(l),t+=f;}return o},e.cmap={},e.cmap.parse=function(r,t,a){r=new Uint8Array(r.buffer,t,a),t=0;var n=e._bin,o={};n.readUshort(r,t),t+=2;var s=n.readUshort(r,t);t+=2;var i=[];o.tables=[];for(var h=0;h<s;h++){var f=n.readUshort(r,t);t+=2;var d=n.readUshort(r,t);t+=2;var l=n.readUint(r,t);t+=4;var u=\"p\"+f+\"e\"+d,v=i.indexOf(l);if(-1==v){var c;v=o.tables.length,i.push(l);var p=n.readUshort(r,l);0==p?c=e.cmap.parse0(r,l):4==p?c=e.cmap.parse4(r,l):6==p?c=e.cmap.parse6(r,l):12==p?c=e.cmap.parse12(r,l):console.debug(\"unknown format: \"+p,f,d,l),o.tables.push(c);}if(null!=o[u])throw \"multiple tables for one platform+encoding\";o[u]=v;}return o},e.cmap.parse0=function(r,t){var a=e._bin,n={};n.format=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);t+=2,a.readUshort(r,t),t+=2,n.map=[];for(var s=0;s<o-6;s++)n.map.push(r[t+s]);return n},e.cmap.parse4=function(r,t){var a=e._bin,n=t,o={};o.format=a.readUshort(r,t),t+=2;var s=a.readUshort(r,t);t+=2,a.readUshort(r,t),t+=2;var i=a.readUshort(r,t);t+=2;var h=i/2;o.searchRange=a.readUshort(r,t),t+=2,o.entrySelector=a.readUshort(r,t),t+=2,o.rangeShift=a.readUshort(r,t),t+=2,o.endCount=a.readUshorts(r,t,h),t+=2*h,t+=2,o.startCount=a.readUshorts(r,t,h),t+=2*h,o.idDelta=[];for(var f=0;f<h;f++)o.idDelta.push(a.readShort(r,t)),t+=2;for(o.idRangeOffset=a.readUshorts(r,t,h),t+=2*h,o.glyphIdArray=[];t<n+s;)o.glyphIdArray.push(a.readUshort(r,t)),t+=2;return o},e.cmap.parse6=function(r,t){var a=e._bin,n={};n.format=a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2,a.readUshort(r,t),t+=2,n.firstCode=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);t+=2,n.glyphIdArray=[];for(var s=0;s<o;s++)n.glyphIdArray.push(a.readUshort(r,t)),t+=2;return n},e.cmap.parse12=function(r,t){var a=e._bin,n={};n.format=a.readUshort(r,t),t+=2,t+=2,a.readUint(r,t),t+=4,a.readUint(r,t),t+=4;var o=a.readUint(r,t);t+=4,n.groups=[];for(var s=0;s<o;s++){var i=t+12*s,h=a.readUint(r,i+0),f=a.readUint(r,i+4),d=a.readUint(r,i+8);n.groups.push([h,f,d]);}return n},e.glyf={},e.glyf.parse=function(r,e,t,a){for(var n=[],o=0;o<a.maxp.numGlyphs;o++)n.push(null);return n},e.glyf._parseGlyf=function(r,t){var a=e._bin,n=r._data,o=e._tabOffset(n,\"glyf\",r._offset)+r.loca[t];if(r.loca[t]==r.loca[t+1])return null;var s={};if(s.noc=a.readShort(n,o),o+=2,s.xMin=a.readShort(n,o),o+=2,s.yMin=a.readShort(n,o),o+=2,s.xMax=a.readShort(n,o),o+=2,s.yMax=a.readShort(n,o),o+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var i=0;i<s.noc;i++)s.endPts.push(a.readUshort(n,o)),o+=2;var h=a.readUshort(n,o);if(o+=2,n.length-o<h)return null;s.instructions=a.readBytes(n,o,h),o+=h;var f=s.endPts[s.noc-1]+1;s.flags=[];for(i=0;i<f;i++){var d=n[o];if(o++,s.flags.push(d),0!=(8&d)){var l=n[o];o++;for(var u=0;u<l;u++)s.flags.push(d),i++;}}s.xs=[];for(i=0;i<f;i++){var v=0!=(2&s.flags[i]),c=0!=(16&s.flags[i]);v?(s.xs.push(c?n[o]:-n[o]),o++):c?s.xs.push(0):(s.xs.push(a.readShort(n,o)),o+=2);}s.ys=[];for(i=0;i<f;i++){v=0!=(4&s.flags[i]),c=0!=(32&s.flags[i]);v?(s.ys.push(c?n[o]:-n[o]),o++):c?s.ys.push(0):(s.ys.push(a.readShort(n,o)),o+=2);}var p=0,U=0;for(i=0;i<f;i++)p+=s.xs[i],U+=s.ys[i],s.xs[i]=p,s.ys[i]=U;}else {var g;s.parts=[];do{g=a.readUshort(n,o),o+=2;var S={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(S),S.glyphIndex=a.readUshort(n,o),o+=2,1&g){var m=a.readShort(n,o);o+=2;var b=a.readShort(n,o);o+=2;}else {m=a.readInt8(n,o);o++;b=a.readInt8(n,o);o++;}2&g?(S.m.tx=m,S.m.ty=b):(S.p1=m,S.p2=b),8&g?(S.m.a=S.m.d=a.readF2dot14(n,o),o+=2):64&g?(S.m.a=a.readF2dot14(n,o),o+=2,S.m.d=a.readF2dot14(n,o),o+=2):128&g&&(S.m.a=a.readF2dot14(n,o),o+=2,S.m.b=a.readF2dot14(n,o),o+=2,S.m.c=a.readF2dot14(n,o),o+=2,S.m.d=a.readF2dot14(n,o),o+=2);}while(32&g);if(256&g){var y=a.readUshort(n,o);o+=2,s.instr=[];for(i=0;i<y;i++)s.instr.push(n[o]),o++;}}return s},e.GPOS={},e.GPOS.parse=function(r,t,a,n){return e._lctf.parse(r,t,a,n,e.GPOS.subt)},e.GPOS.subt=function(r,t,a,n){var o=e._bin,s=a,i={};if(i.fmt=o.readUshort(r,a),a+=2,1==t||2==t||3==t||7==t||8==t&&i.fmt<=2){var h=o.readUshort(r,a);a+=2,i.coverage=e._lctf.readCoverage(r,h+s);}if(1==t&&1==i.fmt){var f=o.readUshort(r,a);a+=2;var d=e._lctf.numOfOnes(f);0!=f&&(i.pos=e.GPOS.readValueRecord(r,a,f));}else if(2==t&&i.fmt>=1&&i.fmt<=2){f=o.readUshort(r,a);a+=2;var l=o.readUshort(r,a);a+=2;d=e._lctf.numOfOnes(f);var u=e._lctf.numOfOnes(l);if(1==i.fmt){i.pairsets=[];var v=o.readUshort(r,a);a+=2;for(var c=0;c<v;c++){var p=s+o.readUshort(r,a);a+=2;var U=o.readUshort(r,p);p+=2;for(var g=[],S=0;S<U;S++){var m=o.readUshort(r,p);p+=2,0!=f&&(x=e.GPOS.readValueRecord(r,p,f),p+=2*d),0!=l&&(P=e.GPOS.readValueRecord(r,p,l),p+=2*u),g.push({gid2:m,val1:x,val2:P});}i.pairsets.push(g);}}if(2==i.fmt){var b=o.readUshort(r,a);a+=2;var y=o.readUshort(r,a);a+=2;var F=o.readUshort(r,a);a+=2;var _=o.readUshort(r,a);a+=2,i.classDef1=e._lctf.readClassDef(r,s+b),i.classDef2=e._lctf.readClassDef(r,s+y),i.matrix=[];for(c=0;c<F;c++){var C=[];for(S=0;S<_;S++){var x=null,P=null;0!=f&&(x=e.GPOS.readValueRecord(r,a,f),a+=2*d),0!=l&&(P=e.GPOS.readValueRecord(r,a,l),a+=2*u),C.push({val1:x,val2:P});}i.matrix.push(C);}}}else {if(9==t&&1==i.fmt){var I=o.readUshort(r,a);a+=2;var w=o.readUint(r,a);if(a+=4,9==n.ltype)n.ltype=I;else if(n.ltype!=I)throw \"invalid extension substitution\";return e.GPOS.subt(r,n.ltype,s+w)}console.debug(\"unsupported GPOS table LookupType\",t,\"format\",i.fmt);}return i},e.GPOS.readValueRecord=function(r,t,a){var n=e._bin,o=[];return o.push(1&a?n.readShort(r,t):0),t+=1&a?2:0,o.push(2&a?n.readShort(r,t):0),t+=2&a?2:0,o.push(4&a?n.readShort(r,t):0),t+=4&a?2:0,o.push(8&a?n.readShort(r,t):0),t+=8&a?2:0,o},e.GSUB={},e.GSUB.parse=function(r,t,a,n){return e._lctf.parse(r,t,a,n,e.GSUB.subt)},e.GSUB.subt=function(r,t,a,n){var o=e._bin,s=a,i={};if(i.fmt=o.readUshort(r,a),a+=2,1!=t&&4!=t&&5!=t&&6!=t)return null;if(1==t||4==t||5==t&&i.fmt<=2||6==t&&i.fmt<=2){var h=o.readUshort(r,a);a+=2,i.coverage=e._lctf.readCoverage(r,s+h);}if(1==t&&i.fmt>=1&&i.fmt<=2){if(1==i.fmt)i.delta=o.readShort(r,a),a+=2;else if(2==i.fmt){var f=o.readUshort(r,a);a+=2,i.newg=o.readUshorts(r,a,f),a+=2*i.newg.length;}}else if(4==t){i.vals=[];f=o.readUshort(r,a);a+=2;for(var d=0;d<f;d++){var l=o.readUshort(r,a);a+=2,i.vals.push(e.GSUB.readLigatureSet(r,s+l));}}else if(5==t&&2==i.fmt){if(2==i.fmt){var u=o.readUshort(r,a);a+=2,i.cDef=e._lctf.readClassDef(r,s+u),i.scset=[];var v=o.readUshort(r,a);a+=2;for(d=0;d<v;d++){var c=o.readUshort(r,a);a+=2,i.scset.push(0==c?null:e.GSUB.readSubClassSet(r,s+c));}}}else if(6==t&&3==i.fmt){if(3==i.fmt){for(d=0;d<3;d++){f=o.readUshort(r,a);a+=2;for(var p=[],U=0;U<f;U++)p.push(e._lctf.readCoverage(r,s+o.readUshort(r,a+2*U)));a+=2*f,0==d&&(i.backCvg=p),1==d&&(i.inptCvg=p),2==d&&(i.ahedCvg=p);}f=o.readUshort(r,a);a+=2,i.lookupRec=e.GSUB.readSubstLookupRecords(r,a,f);}}else {if(7==t&&1==i.fmt){var g=o.readUshort(r,a);a+=2;var S=o.readUint(r,a);if(a+=4,9==n.ltype)n.ltype=g;else if(n.ltype!=g)throw \"invalid extension substitution\";return e.GSUB.subt(r,n.ltype,s+S)}console.debug(\"unsupported GSUB table LookupType\",t,\"format\",i.fmt);}return i},e.GSUB.readSubClassSet=function(r,t){var a=e._bin.readUshort,n=t,o=[],s=a(r,t);t+=2;for(var i=0;i<s;i++){var h=a(r,t);t+=2,o.push(e.GSUB.readSubClassRule(r,n+h));}return o},e.GSUB.readSubClassRule=function(r,t){var a=e._bin.readUshort,n={},o=a(r,t),s=a(r,t+=2);t+=2,n.input=[];for(var i=0;i<o-1;i++)n.input.push(a(r,t)),t+=2;return n.substLookupRecords=e.GSUB.readSubstLookupRecords(r,t,s),n},e.GSUB.readSubstLookupRecords=function(r,t,a){for(var n=e._bin.readUshort,o=[],s=0;s<a;s++)o.push(n(r,t),n(r,t+2)),t+=4;return o},e.GSUB.readChainSubClassSet=function(r,t){var a=e._bin,n=t,o=[],s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readUshort(r,t);t+=2,o.push(e.GSUB.readChainSubClassRule(r,n+h));}return o},e.GSUB.readChainSubClassRule=function(r,t){for(var a=e._bin,n={},o=[\"backtrack\",\"input\",\"lookahead\"],s=0;s<o.length;s++){var i=a.readUshort(r,t);t+=2,1==s&&i--,n[o[s]]=a.readUshorts(r,t,i),t+=2*n[o[s]].length;}i=a.readUshort(r,t);return t+=2,n.subst=a.readUshorts(r,t,2*i),t+=2*n.subst.length,n},e.GSUB.readLigatureSet=function(r,t){var a=e._bin,n=t,o=[],s=a.readUshort(r,t);t+=2;for(var i=0;i<s;i++){var h=a.readUshort(r,t);t+=2,o.push(e.GSUB.readLigature(r,n+h));}return o},e.GSUB.readLigature=function(r,t){var a=e._bin,n={chain:[]};n.nglyph=a.readUshort(r,t),t+=2;var o=a.readUshort(r,t);t+=2;for(var s=0;s<o-1;s++)n.chain.push(a.readUshort(r,t)),t+=2;return n},e.head={},e.head.parse=function(r,t,a){var n=e._bin,o={};return n.readFixed(r,t),t+=4,o.fontRevision=n.readFixed(r,t),t+=4,n.readUint(r,t),t+=4,n.readUint(r,t),t+=4,o.flags=n.readUshort(r,t),t+=2,o.unitsPerEm=n.readUshort(r,t),t+=2,o.created=n.readUint64(r,t),t+=8,o.modified=n.readUint64(r,t),t+=8,o.xMin=n.readShort(r,t),t+=2,o.yMin=n.readShort(r,t),t+=2,o.xMax=n.readShort(r,t),t+=2,o.yMax=n.readShort(r,t),t+=2,o.macStyle=n.readUshort(r,t),t+=2,o.lowestRecPPEM=n.readUshort(r,t),t+=2,o.fontDirectionHint=n.readShort(r,t),t+=2,o.indexToLocFormat=n.readShort(r,t),t+=2,o.glyphDataFormat=n.readShort(r,t),t+=2,o},e.hhea={},e.hhea.parse=function(r,t,a){var n=e._bin,o={};return n.readFixed(r,t),t+=4,o.ascender=n.readShort(r,t),t+=2,o.descender=n.readShort(r,t),t+=2,o.lineGap=n.readShort(r,t),t+=2,o.advanceWidthMax=n.readUshort(r,t),t+=2,o.minLeftSideBearing=n.readShort(r,t),t+=2,o.minRightSideBearing=n.readShort(r,t),t+=2,o.xMaxExtent=n.readShort(r,t),t+=2,o.caretSlopeRise=n.readShort(r,t),t+=2,o.caretSlopeRun=n.readShort(r,t),t+=2,o.caretOffset=n.readShort(r,t),t+=2,t+=8,o.metricDataFormat=n.readShort(r,t),t+=2,o.numberOfHMetrics=n.readUshort(r,t),t+=2,o},e.hmtx={},e.hmtx.parse=function(r,t,a,n){for(var o=e._bin,s={aWidth:[],lsBearing:[]},i=0,h=0,f=0;f<n.maxp.numGlyphs;f++)f<n.hhea.numberOfHMetrics&&(i=o.readUshort(r,t),t+=2,h=o.readShort(r,t),t+=2),s.aWidth.push(i),s.lsBearing.push(h);return s},e.kern={},e.kern.parse=function(r,t,a,n){var o=e._bin,s=o.readUshort(r,t);if(t+=2,1==s)return e.kern.parseV1(r,t-2,a,n);var i=o.readUshort(r,t);t+=2;for(var h={glyph1:[],rval:[]},f=0;f<i;f++){t+=2;a=o.readUshort(r,t);t+=2;var d=o.readUshort(r,t);t+=2;var l=d>>>8;if(0!=(l&=15))throw \"unknown kern table format: \"+l;t=e.kern.readFormat0(r,t,h);}return h},e.kern.parseV1=function(r,t,a,n){var o=e._bin;o.readFixed(r,t),t+=4;var s=o.readUint(r,t);t+=4;for(var i={glyph1:[],rval:[]},h=0;h<s;h++){o.readUint(r,t),t+=4;var f=o.readUshort(r,t);t+=2,o.readUshort(r,t),t+=2;var d=f>>>8;if(0!=(d&=15))throw \"unknown kern table format: \"+d;t=e.kern.readFormat0(r,t,i);}return i},e.kern.readFormat0=function(r,t,a){var n=e._bin,o=-1,s=n.readUshort(r,t);t+=2,n.readUshort(r,t),t+=2,n.readUshort(r,t),t+=2,n.readUshort(r,t),t+=2;for(var i=0;i<s;i++){var h=n.readUshort(r,t);t+=2;var f=n.readUshort(r,t);t+=2;var d=n.readShort(r,t);t+=2,h!=o&&(a.glyph1.push(h),a.rval.push({glyph2:[],vals:[]}));var l=a.rval[a.rval.length-1];l.glyph2.push(f),l.vals.push(d),o=h;}return t},e.loca={},e.loca.parse=function(r,t,a,n){var o=e._bin,s=[],i=n.head.indexToLocFormat,h=n.maxp.numGlyphs+1;if(0==i)for(var f=0;f<h;f++)s.push(o.readUshort(r,t+(f<<1))<<1);if(1==i)for(f=0;f<h;f++)s.push(o.readUint(r,t+(f<<2)));return s},e.maxp={},e.maxp.parse=function(r,t,a){var n=e._bin,o={},s=n.readUint(r,t);return t+=4,o.numGlyphs=n.readUshort(r,t),t+=2,65536==s&&(o.maxPoints=n.readUshort(r,t),t+=2,o.maxContours=n.readUshort(r,t),t+=2,o.maxCompositePoints=n.readUshort(r,t),t+=2,o.maxCompositeContours=n.readUshort(r,t),t+=2,o.maxZones=n.readUshort(r,t),t+=2,o.maxTwilightPoints=n.readUshort(r,t),t+=2,o.maxStorage=n.readUshort(r,t),t+=2,o.maxFunctionDefs=n.readUshort(r,t),t+=2,o.maxInstructionDefs=n.readUshort(r,t),t+=2,o.maxStackElements=n.readUshort(r,t),t+=2,o.maxSizeOfInstructions=n.readUshort(r,t),t+=2,o.maxComponentElements=n.readUshort(r,t),t+=2,o.maxComponentDepth=n.readUshort(r,t),t+=2),o},e.name={},e.name.parse=function(r,t,a){var n=e._bin,o={};n.readUshort(r,t),t+=2;var s=n.readUshort(r,t);t+=2,n.readUshort(r,t);for(var i,h=[\"copyright\",\"fontFamily\",\"fontSubfamily\",\"ID\",\"fullName\",\"version\",\"postScriptName\",\"trademark\",\"manufacturer\",\"designer\",\"description\",\"urlVendor\",\"urlDesigner\",\"licence\",\"licenceURL\",\"---\",\"typoFamilyName\",\"typoSubfamilyName\",\"compatibleFull\",\"sampleText\",\"postScriptCID\",\"wwsFamilyName\",\"wwsSubfamilyName\",\"lightPalette\",\"darkPalette\"],f=t+=2,d=0;d<s;d++){var l=n.readUshort(r,t);t+=2;var u=n.readUshort(r,t);t+=2;var v=n.readUshort(r,t);t+=2;var c=n.readUshort(r,t);t+=2;var p=n.readUshort(r,t);t+=2;var U=n.readUshort(r,t);t+=2;var g,S=h[c],m=f+12*s+U;if(0==l)g=n.readUnicode(r,m,p/2);else if(3==l&&0==u)g=n.readUnicode(r,m,p/2);else if(0==u)g=n.readASCII(r,m,p);else if(1==u)g=n.readUnicode(r,m,p/2);else if(3==u)g=n.readUnicode(r,m,p/2);else {if(1!=l)throw \"unknown encoding \"+u+\", platformID: \"+l;g=n.readASCII(r,m,p),console.debug(\"reading unknown MAC encoding \"+u+\" as ASCII\");}var b=\"p\"+l+\",\"+v.toString(16);null==o[b]&&(o[b]={}),o[b][void 0!==S?S:c]=g,o[b]._lang=v;}for(var y in o)if(null!=o[y].postScriptName&&1033==o[y]._lang)return o[y];for(var y in o)if(null!=o[y].postScriptName&&0==o[y]._lang)return o[y];for(var y in o)if(null!=o[y].postScriptName&&3084==o[y]._lang)return o[y];for(var y in o)if(null!=o[y].postScriptName)return o[y];for(var y in o){i=y;break}return console.debug(\"returning name table with languageID \"+o[i]._lang),o[i]},e[\"OS/2\"]={},e[\"OS/2\"].parse=function(r,t,a){var n=e._bin.readUshort(r,t);t+=2;var o={};if(0==n)e[\"OS/2\"].version0(r,t,o);else if(1==n)e[\"OS/2\"].version1(r,t,o);else if(2==n||3==n||4==n)e[\"OS/2\"].version2(r,t,o);else {if(5!=n)throw \"unknown OS/2 table version: \"+n;e[\"OS/2\"].version5(r,t,o);}return o},e[\"OS/2\"].version0=function(r,t,a){var n=e._bin;return a.xAvgCharWidth=n.readShort(r,t),t+=2,a.usWeightClass=n.readUshort(r,t),t+=2,a.usWidthClass=n.readUshort(r,t),t+=2,a.fsType=n.readUshort(r,t),t+=2,a.ySubscriptXSize=n.readShort(r,t),t+=2,a.ySubscriptYSize=n.readShort(r,t),t+=2,a.ySubscriptXOffset=n.readShort(r,t),t+=2,a.ySubscriptYOffset=n.readShort(r,t),t+=2,a.ySuperscriptXSize=n.readShort(r,t),t+=2,a.ySuperscriptYSize=n.readShort(r,t),t+=2,a.ySuperscriptXOffset=n.readShort(r,t),t+=2,a.ySuperscriptYOffset=n.readShort(r,t),t+=2,a.yStrikeoutSize=n.readShort(r,t),t+=2,a.yStrikeoutPosition=n.readShort(r,t),t+=2,a.sFamilyClass=n.readShort(r,t),t+=2,a.panose=n.readBytes(r,t,10),t+=10,a.ulUnicodeRange1=n.readUint(r,t),t+=4,a.ulUnicodeRange2=n.readUint(r,t),t+=4,a.ulUnicodeRange3=n.readUint(r,t),t+=4,a.ulUnicodeRange4=n.readUint(r,t),t+=4,a.achVendID=[n.readInt8(r,t),n.readInt8(r,t+1),n.readInt8(r,t+2),n.readInt8(r,t+3)],t+=4,a.fsSelection=n.readUshort(r,t),t+=2,a.usFirstCharIndex=n.readUshort(r,t),t+=2,a.usLastCharIndex=n.readUshort(r,t),t+=2,a.sTypoAscender=n.readShort(r,t),t+=2,a.sTypoDescender=n.readShort(r,t),t+=2,a.sTypoLineGap=n.readShort(r,t),t+=2,a.usWinAscent=n.readUshort(r,t),t+=2,a.usWinDescent=n.readUshort(r,t),t+=2},e[\"OS/2\"].version1=function(r,t,a){var n=e._bin;return t=e[\"OS/2\"].version0(r,t,a),a.ulCodePageRange1=n.readUint(r,t),t+=4,a.ulCodePageRange2=n.readUint(r,t),t+=4},e[\"OS/2\"].version2=function(r,t,a){var n=e._bin;return t=e[\"OS/2\"].version1(r,t,a),a.sxHeight=n.readShort(r,t),t+=2,a.sCapHeight=n.readShort(r,t),t+=2,a.usDefault=n.readUshort(r,t),t+=2,a.usBreak=n.readUshort(r,t),t+=2,a.usMaxContext=n.readUshort(r,t),t+=2},e[\"OS/2\"].version5=function(r,t,a){var n=e._bin;return t=e[\"OS/2\"].version2(r,t,a),a.usLowerOpticalPointSize=n.readUshort(r,t),t+=2,a.usUpperOpticalPointSize=n.readUshort(r,t),t+=2},e.post={},e.post.parse=function(r,t,a){var n=e._bin,o={};return o.version=n.readFixed(r,t),t+=4,o.italicAngle=n.readFixed(r,t),t+=4,o.underlinePosition=n.readShort(r,t),t+=2,o.underlineThickness=n.readShort(r,t),t+=2,o},null==e&&(e={}),null==e.U&&(e.U={}),e.U.codeToGlyph=function(r,e){var t=r.cmap,a=-1;if(null!=t.p0e4?a=t.p0e4:null!=t.p3e1?a=t.p3e1:null!=t.p1e0?a=t.p1e0:null!=t.p0e3&&(a=t.p0e3),-1==a)throw \"no familiar platform and encoding!\";var n=t.tables[a];if(0==n.format)return e>=n.map.length?0:n.map[e];if(4==n.format){for(var o=-1,s=0;s<n.endCount.length;s++)if(e<=n.endCount[s]){o=s;break}if(-1==o)return 0;if(n.startCount[o]>e)return 0;return 65535&(0!=n.idRangeOffset[o]?n.glyphIdArray[e-n.startCount[o]+(n.idRangeOffset[o]>>1)-(n.idRangeOffset.length-o)]:e+n.idDelta[o])}if(12==n.format){if(e>n.groups[n.groups.length-1][1])return 0;for(s=0;s<n.groups.length;s++){var i=n.groups[s];if(i[0]<=e&&e<=i[1])return i[2]+(e-i[0])}return 0}throw \"unknown cmap table format \"+n.format},e.U.glyphToPath=function(r,t){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[t]){var n=r.SVG.entries[t];return null==n?a:(\"string\"==typeof n&&(n=e.SVG.toPath(n),r.SVG.entries[t]=n),n)}if(r.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},s=r.CFF,i=r.CFF.Private;if(s.ROS){for(var h=0;s.FDSelect[h+2]<=t;)h+=2;i=s.FDArray[s.FDSelect[h+1]].Private;}e.U._drawCFF(r.CFF.CharStrings[t],o,s,i,a);}else r.glyf&&e.U._drawGlyf(t,r,a);return a},e.U._drawGlyf=function(r,t,a){var n=t.glyf[r];null==n&&(n=t.glyf[r]=e.glyf._parseGlyf(t,r)),null!=n&&(n.noc>-1?e.U._simpleGlyph(n,a):e.U._compoGlyph(n,t,a));},e.U._simpleGlyph=function(r,t){for(var a=0;a<r.noc;a++){for(var n=0==a?0:r.endPts[a-1]+1,o=r.endPts[a],s=n;s<=o;s++){var i=s==n?o:s-1,h=s==o?n:s+1,f=1&r.flags[s],d=1&r.flags[i],l=1&r.flags[h],u=r.xs[s],v=r.ys[s];if(s==n)if(f){if(!d){e.U.P.moveTo(t,u,v);continue}e.U.P.moveTo(t,r.xs[i],r.ys[i]);}else d?e.U.P.moveTo(t,r.xs[i],r.ys[i]):e.U.P.moveTo(t,(r.xs[i]+u)/2,(r.ys[i]+v)/2);f?d&&e.U.P.lineTo(t,u,v):l?e.U.P.qcurveTo(t,u,v,r.xs[h],r.ys[h]):e.U.P.qcurveTo(t,u,v,(u+r.xs[h])/2,(v+r.ys[h])/2);}e.U.P.closePath(t);}},e.U._compoGlyph=function(r,t,a){for(var n=0;n<r.parts.length;n++){var o={cmds:[],crds:[]},s=r.parts[n];e.U._drawGlyf(s.glyphIndex,t,o);for(var i=s.m,h=0;h<o.crds.length;h+=2){var f=o.crds[h],d=o.crds[h+1];a.crds.push(f*i.a+d*i.b+i.tx),a.crds.push(f*i.c+d*i.d+i.ty);}for(h=0;h<o.cmds.length;h++)a.cmds.push(o.cmds[h]);}},e.U._getGlyphClass=function(r,t){var a=e._lctf.getInterval(t,r);return -1==a?0:t[a+2]},e.U.getPairAdjustment=function(r,t,a){var n=0;if(r.GPOS)for(var o=r.GPOS,s=o.lookupList,i=o.featureList,h=[],f=0;f<i.length;f++){var d=i[f];if(\"kern\"==d.tag)for(var l=0;l<d.tab.length;l++)if(!h[d.tab[l]]){h[d.tab[l]]=!0;for(var u=s[d.tab[l]],v=0;v<u.tabs.length;v++)if(null!=u.tabs[v]){var c,p=u.tabs[v];if(!p.coverage||-1!=(c=e._lctf.coverageIndex(p.coverage,t)))if(1==u.ltype);else if(2==u.ltype){var U;if(1==p.fmt){var g=p.pairsets[c];for(f=0;f<g.length;f++)g[f].gid2==a&&(U=g[f]);}else if(2==p.fmt){var S=e.U._getGlyphClass(t,p.classDef1),m=e.U._getGlyphClass(a,p.classDef2);U=p.matrix[S][m];}U&&U.val1&&U.val1[2]&&(n+=U.val1[2]),U&&U.val2&&U.val2[0]&&(n+=U.val2[0]);}}}}if(r.kern){var b=r.kern.glyph1.indexOf(t);if(-1!=b){var y=r.kern.rval[b].glyph2.indexOf(a);-1!=y&&(n+=r.kern.rval[b].vals[y]);}}return n},e.U._applySubs=function(r,t,a,n){for(var o=r.length-t-1,s=0;s<a.tabs.length;s++)if(null!=a.tabs[s]){var i,h=a.tabs[s];if(!h.coverage||-1!=(i=e._lctf.coverageIndex(h.coverage,r[t])))if(1==a.ltype)r[t],1==h.fmt?r[t]=r[t]+h.delta:r[t]=h.newg[i];else if(4==a.ltype)for(var f=h.vals[i],d=0;d<f.length;d++){var l=f[d],u=l.chain.length;if(!(u>o)){for(var v=!0,c=0,p=0;p<u;p++){for(;-1==r[t+c+(1+p)];)c++;l.chain[p]!=r[t+c+(1+p)]&&(v=!1);}if(v){r[t]=l.nglyph;for(p=0;p<u+c;p++)r[t+p+1]=-1;break}}}else if(5==a.ltype&&2==h.fmt)for(var U=e._lctf.getInterval(h.cDef,r[t]),g=h.cDef[U+2],S=h.scset[g],m=0;m<S.length;m++){var b=S[m],y=b.input;if(!(y.length>o)){for(v=!0,p=0;p<y.length;p++){var F=e._lctf.getInterval(h.cDef,r[t+1+p]);if(-1==U&&h.cDef[F+2]!=y[p]){v=!1;break}}if(v){var _=b.substLookupRecords;for(d=0;d<_.length;d+=2)_[d],_[d+1];}}}else if(6==a.ltype&&3==h.fmt){if(!e.U._glsCovered(r,h.backCvg,t-h.backCvg.length))continue;if(!e.U._glsCovered(r,h.inptCvg,t))continue;if(!e.U._glsCovered(r,h.ahedCvg,t+h.inptCvg.length))continue;var C=h.lookupRec;for(m=0;m<C.length;m+=2){U=C[m];var x=n[C[m+1]];e.U._applySubs(r,t+U,x,n);}}}},e.U._glsCovered=function(r,t,a){for(var n=0;n<t.length;n++){if(-1==e._lctf.coverageIndex(t[n],r[a+n]))return !1}return !0},e.U.glyphsToPath=function(r,t,a){for(var n={cmds:[],crds:[]},o=0,s=0;s<t.length;s++){var i=t[s];if(-1!=i){for(var h=s<t.length-1&&-1!=t[s+1]?t[s+1]:0,f=e.U.glyphToPath(r,i),d=0;d<f.crds.length;d+=2)n.crds.push(f.crds[d]+o),n.crds.push(f.crds[d+1]);a&&n.cmds.push(a);for(d=0;d<f.cmds.length;d++)n.cmds.push(f.cmds[d]);a&&n.cmds.push(\"X\"),o+=r.hmtx.aWidth[i],s<t.length-1&&(o+=e.U.getPairAdjustment(r,i,h));}}return n},e.U.P={},e.U.P.moveTo=function(r,e,t){r.cmds.push(\"M\"),r.crds.push(e,t);},e.U.P.lineTo=function(r,e,t){r.cmds.push(\"L\"),r.crds.push(e,t);},e.U.P.curveTo=function(r,e,t,a,n,o,s){r.cmds.push(\"C\"),r.crds.push(e,t,a,n,o,s);},e.U.P.qcurveTo=function(r,e,t,a,n){r.cmds.push(\"Q\"),r.crds.push(e,t,a,n);},e.U.P.closePath=function(r){r.cmds.push(\"Z\");},e.U._drawCFF=function(r,t,a,n,o){for(var s=t.stack,i=t.nStems,h=t.haveWidth,f=t.width,d=t.open,l=0,u=t.x,v=t.y,c=0,p=0,U=0,g=0,S=0,m=0,b=0,y=0,F=0,_=0,C={val:0,size:0};l<r.length;){e.CFF.getCharString(r,l,C);var x=C.val;if(l+=C.size,\"o1\"==x||\"o18\"==x)s.length%2!=0&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0;else if(\"o3\"==x||\"o23\"==x){s.length%2!=0&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0;}else if(\"o4\"==x)s.length>1&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),d&&e.U.P.closePath(o),v+=s.pop(),e.U.P.moveTo(o,u,v),d=!0;else if(\"o5\"==x)for(;s.length>0;)u+=s.shift(),v+=s.shift(),e.U.P.lineTo(o,u,v);else if(\"o6\"==x||\"o7\"==x)for(var P=s.length,I=\"o6\"==x,w=0;w<P;w++){var O=s.shift();I?u+=O:v+=O,I=!I,e.U.P.lineTo(o,u,v);}else if(\"o8\"==x||\"o24\"==x){P=s.length;for(var T=0;T+6<=P;)c=u+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),u=U+s.shift(),v=g+s.shift(),e.U.P.curveTo(o,c,p,U,g,u,v),T+=6;\"o24\"==x&&(u+=s.shift(),v+=s.shift(),e.U.P.lineTo(o,u,v));}else {if(\"o11\"==x)break;if(\"o1234\"==x||\"o1235\"==x||\"o1236\"==x||\"o1237\"==x)\"o1234\"==x&&(p=v,U=(c=u+s.shift())+s.shift(),_=g=p+s.shift(),m=g,y=v,u=(b=(S=(F=U+s.shift())+s.shift())+s.shift())+s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,u,v)),\"o1235\"==x&&(c=u+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),F=U+s.shift(),_=g+s.shift(),S=F+s.shift(),m=_+s.shift(),b=S+s.shift(),y=m+s.shift(),u=b+s.shift(),v=y+s.shift(),s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,u,v)),\"o1236\"==x&&(c=u+s.shift(),p=v+s.shift(),U=c+s.shift(),_=g=p+s.shift(),m=g,b=(S=(F=U+s.shift())+s.shift())+s.shift(),y=m+s.shift(),u=b+s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,u,v)),\"o1237\"==x&&(c=u+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),F=U+s.shift(),_=g+s.shift(),S=F+s.shift(),m=_+s.shift(),b=S+s.shift(),y=m+s.shift(),Math.abs(b-u)>Math.abs(y-v)?u=b+s.shift():v=y+s.shift(),e.U.P.curveTo(o,c,p,U,g,F,_),e.U.P.curveTo(o,S,m,b,y,u,v));else if(\"o14\"==x){if(s.length>0&&!h&&(f=s.shift()+a.nominalWidthX,h=!0),4==s.length){var k=s.shift(),G=s.shift(),D=s.shift(),B=s.shift(),L=e.CFF.glyphBySE(a,D),R=e.CFF.glyphBySE(a,B);e.U._drawCFF(a.CharStrings[L],t,a,n,o),t.x=k,t.y=G,e.U._drawCFF(a.CharStrings[R],t,a,n,o);}d&&(e.U.P.closePath(o),d=!1);}else if(\"o19\"==x||\"o20\"==x){s.length%2!=0&&!h&&(f=s.shift()+n.nominalWidthX),i+=s.length>>1,s.length=0,h=!0,l+=i+7>>3;}else if(\"o21\"==x)s.length>2&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),v+=s.pop(),u+=s.pop(),d&&e.U.P.closePath(o),e.U.P.moveTo(o,u,v),d=!0;else if(\"o22\"==x)s.length>1&&!h&&(f=s.shift()+n.nominalWidthX,h=!0),u+=s.pop(),d&&e.U.P.closePath(o),e.U.P.moveTo(o,u,v),d=!0;else if(\"o25\"==x){for(;s.length>6;)u+=s.shift(),v+=s.shift(),e.U.P.lineTo(o,u,v);c=u+s.shift(),p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),u=U+s.shift(),v=g+s.shift(),e.U.P.curveTo(o,c,p,U,g,u,v);}else if(\"o26\"==x)for(s.length%2&&(u+=s.shift());s.length>0;)c=u,p=v+s.shift(),u=U=c+s.shift(),v=(g=p+s.shift())+s.shift(),e.U.P.curveTo(o,c,p,U,g,u,v);else if(\"o27\"==x)for(s.length%2&&(v+=s.shift());s.length>0;)p=v,U=(c=u+s.shift())+s.shift(),g=p+s.shift(),u=U+s.shift(),v=g,e.U.P.curveTo(o,c,p,U,g,u,v);else if(\"o10\"==x||\"o29\"==x){var A=\"o10\"==x?n:a;if(0==s.length)console.debug(\"error: empty stack\");else {var W=s.pop(),M=A.Subrs[W+A.Bias];t.x=u,t.y=v,t.nStems=i,t.haveWidth=h,t.width=f,t.open=d,e.U._drawCFF(M,t,a,n,o),u=t.x,v=t.y,i=t.nStems,h=t.haveWidth,f=t.width,d=t.open;}}else if(\"o30\"==x||\"o31\"==x){var V=s.length,N=(T=0,\"o31\"==x);for(T+=V-(P=-3&V);T<P;)N?(p=v,U=(c=u+s.shift())+s.shift(),v=(g=p+s.shift())+s.shift(),P-T==5?(u=U+s.shift(),T++):u=U,N=!1):(c=u,p=v+s.shift(),U=c+s.shift(),g=p+s.shift(),u=U+s.shift(),P-T==5?(v=g+s.shift(),T++):v=g,N=!0),e.U.P.curveTo(o,c,p,U,g,u,v),T+=4;}else {if(\"o\"==(x+\"\").charAt(0))throw console.debug(\"Unknown operation: \"+x,r),x;s.push(x);}}}t.x=u,t.y=v,t.nStems=i,t.haveWidth=h,t.width=f,t.open=d;};var t=e,a={Typr:t};return r.Typr=t,r.default=a,Object.defineProperty(r,\"__esModule\",{value:!0}),r}({}).Typr}\n\n/*!\nCustom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate\n(https://github.com/101arrowz/fflate) for use in Troika text rendering. \nOriginal licenses apply: \n- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)\n- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)\n*/\nfunction woff2otfFactory(){return function(r){var e=Uint8Array,n=Uint16Array,t=Uint32Array,a=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(r,e){for(var a=new n(31),i=0;i<31;++i)a[i]=e+=1<<r[i-1];var o=new t(a[30]);for(i=1;i<30;++i)for(var f=a[i];f<a[i+1];++f)o[f]=f-a[i]<<5|i;return [a,o]},u=f(a,2),v=u[0],s=u[1];v[28]=258,s[258]=28;for(var l=f(i,0)[0],c=new n(32768),g=0;g<32768;++g){var h=(43690&g)>>>1|(21845&g)<<1;h=(61680&(h=(52428&h)>>>2|(13107&h)<<2))>>>4|(3855&h)<<4,c[g]=((65280&h)>>>8|(255&h)<<8)>>>1;}var w=function(r,e,t){for(var a=r.length,i=0,o=new n(e);i<a;++i)++o[r[i]-1];var f,u=new n(e);for(i=0;i<e;++i)u[i]=u[i-1]+o[i-1]<<1;if(t){f=new n(1<<e);var v=15-e;for(i=0;i<a;++i)if(r[i])for(var s=i<<4|r[i],l=e-r[i],g=u[r[i]-1]++<<l,h=g|(1<<l)-1;g<=h;++g)f[c[g]>>>v]=s;}else for(f=new n(a),i=0;i<a;++i)r[i]&&(f[i]=c[u[r[i]-1]++]>>>15-r[i]);return f},d=new e(288);for(g=0;g<144;++g)d[g]=8;for(g=144;g<256;++g)d[g]=9;for(g=256;g<280;++g)d[g]=7;for(g=280;g<288;++g)d[g]=8;var m=new e(32);for(g=0;g<32;++g)m[g]=5;var b=w(d,9,1),p=w(m,5,1),y=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},L=function(r,e,n){var t=e/8|0;return (r[t]|r[t+1]<<8)>>(7&e)&n},U=function(r,e){var n=e/8|0;return (r[n]|r[n+1]<<8|r[n+2]<<16)>>(7&e)},k=[\"unexpected EOF\",\"invalid block type\",\"invalid length/literal\",\"invalid distance\",\"stream finished\",\"no stream handler\",,\"no callback\",\"invalid UTF-8 data\",\"extra field too long\",\"date not in range 1980-2099\",\"filename too long\",\"stream finishing\",\"invalid zip data\"],T=function(r,e,n){var t=new Error(e||k[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,T),!n)throw t;return t},O=function(r,f,u){var s=r.length;if(!s||u&&!u.l&&s<5)return f||new e(0);var c=!f||u,g=!u||u.i;u||(u={}),f||(f=new e(3*s));var h,d=function(r){var n=f.length;if(r>n){var t=new e(Math.max(2*n,r));t.set(f),f=t;}},m=u.f||0,k=u.p||0,O=u.b||0,A=u.l,x=u.d,E=u.m,D=u.n,M=8*s;do{if(!A){u.f=m=L(r,k,1);var S=L(r,k+1,3);if(k+=3,!S){var V=r[(I=((h=k)/8|0)+(7&h&&1)+4)-4]|r[I-3]<<8,_=I+V;if(_>s){g&&T(0);break}c&&d(O+V),f.set(r.subarray(I,_),O),u.b=O+=V,u.p=k=8*_;continue}if(1==S)A=b,x=p,E=9,D=5;else if(2==S){var j=L(r,k,31)+257,z=L(r,k+10,15)+4,C=j+L(r,k+5,31)+1;k+=14;for(var F=new e(C),P=new e(19),q=0;q<z;++q)P[o[q]]=L(r,k+3*q,7);k+=3*z;var B=y(P),G=(1<<B)-1,H=w(P,B,1);for(q=0;q<C;){var I,J=H[L(r,k,G)];if(k+=15&J,(I=J>>>4)<16)F[q++]=I;else {var K=0,N=0;for(16==I?(N=3+L(r,k,3),k+=2,K=F[q-1]):17==I?(N=3+L(r,k,7),k+=3):18==I&&(N=11+L(r,k,127),k+=7);N--;)F[q++]=K;}}var Q=F.subarray(0,j),R=F.subarray(j);E=y(Q),D=y(R),A=w(Q,E,1),x=w(R,D,1);}else T(1);if(k>M){g&&T(0);break}}c&&d(O+131072);for(var W=(1<<E)-1,X=(1<<D)-1,Y=k;;Y=k){var Z=(K=A[U(r,k)&W])>>>4;if((k+=15&K)>M){g&&T(0);break}if(K||T(2),Z<256)f[O++]=Z;else {if(256==Z){Y=k,A=null;break}var $=Z-254;if(Z>264){var rr=a[q=Z-257];$=L(r,k,(1<<rr)-1)+v[q],k+=rr;}var er=x[U(r,k)&X],nr=er>>>4;er||T(3),k+=15&er;R=l[nr];if(nr>3){rr=i[nr];R+=U(r,k)&(1<<rr)-1,k+=rr;}if(k>M){g&&T(0);break}c&&d(O+131072);for(var tr=O+$;O<tr;O+=4)f[O]=f[O-R],f[O+1]=f[O+1-R],f[O+2]=f[O+2-R],f[O+3]=f[O+3-R];O=tr;}}u.l=A,u.p=Y,u.b=O,A&&(m=1,u.m=E,u.d=x,u.n=D);}while(!m);return O==f.length?f:function(r,a,i){(null==a||a<0)&&(a=0),(null==i||i>r.length)&&(i=r.length);var o=new(r instanceof n?n:r instanceof t?t:e)(i-a);return o.set(r.subarray(a,i)),o}(f,0,O)},A=new e(0);var x=\"undefined\"!=typeof TextDecoder&&new TextDecoder;try{x.decode(A,{stream:!0}),1;}catch(r){}return r.convert_streams=function(r){var e=new DataView(r),n=0;function t(){var r=e.getUint16(n);return n+=2,r}function a(){var r=e.getUint32(n);return n+=4,r}function i(r){m.setUint16(b,r),b+=2;}function o(r){m.setUint32(b,r),b+=4;}for(var f={signature:a(),flavor:a(),length:a(),numTables:t(),reserved:t(),totalSfntSize:a(),majorVersion:t(),minorVersion:t(),metaOffset:a(),metaLength:a(),metaOrigLength:a(),privOffset:a(),privLength:a()},u=0;Math.pow(2,u)<=f.numTables;)u++;u--;for(var v=16*Math.pow(2,u),s=16*f.numTables-v,l=12,c=[],g=0;g<f.numTables;g++)c.push({tag:a(),offset:a(),compLength:a(),origLength:a(),origChecksum:a()}),l+=16;var h,w=new Uint8Array(12+16*c.length+c.reduce((function(r,e){return r+e.origLength+4}),0)),d=w.buffer,m=new DataView(d),b=0;return o(f.flavor),i(f.numTables),i(v),i(u),i(s),c.forEach((function(r){o(r.tag),o(r.origChecksum),o(l),o(r.origLength),r.outOffset=l,(l+=r.origLength)%4!=0&&(l+=4-l%4);})),c.forEach((function(e){var n,t=r.slice(e.offset,e.offset+e.compLength);if(e.compLength!=e.origLength){var a=new Uint8Array(e.origLength);n=new Uint8Array(t,2),O(n,a);}else a=new Uint8Array(t);w.set(a,e.outOffset);var i=0;(l=e.outOffset+e.origLength)%4!=0&&(i=4-l%4),w.set(new Uint8Array(i).buffer,e.outOffset+e.origLength),h=l+i;})),d.slice(0,h)},Object.defineProperty(r,\"__esModule\",{value:!0}),r}({}).convert_streams}\n\n/**\n * An adapter that allows Typr.js to be used as if it were (a subset of) the OpenType.js API.\n * Also adds support for WOFF files (not WOFF2).\n */\n\nfunction parserFactory(Typr, woff2otf) {\n  const cmdArgLengths = {\n    M: 2,\n    L: 2,\n    Q: 4,\n    C: 6,\n    Z: 0\n  };\n\n  // {joinType: \"skip+step,...\"}\n  const joiningTypeRawData = {\"C\":\"18g,ca,368,1kz\",\"D\":\"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v\",\"R\":\"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6\",\"L\":\"x9u,jff,a,fd,jv\",\"T\":\"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n\"};\n\n  const JT_LEFT = 1, //indicates that a character joins with the subsequent character, but does not join with the preceding character.\n    JT_RIGHT = 2, //indicates that a character joins with the preceding character, but does not join with the subsequent character.\n    JT_DUAL = 4, //indicates that a character joins with the preceding character and joins with the subsequent character.\n    JT_TRANSPARENT = 8, //indicates that the character does not join with adjacent characters and that the character must be skipped over when the shaping engine is evaluating the joining positions in a sequence of characters. When a JT_TRANSPARENT character is encountered in a sequence, the JOINING_TYPE of the preceding character passes through. Diacritical marks are frequently assigned this value.\n    JT_JOIN_CAUSING = 16, //indicates that the character forces the use of joining forms with the preceding and subsequent characters. Kashidas and the Zero Width Joiner (U+200D) are both JOIN_CAUSING characters.\n    JT_NON_JOINING = 32; //indicates that a character does not join with the preceding or with the subsequent character.,\n\n  let joiningTypeMap;\n  function getCharJoiningType(ch) {\n    if (!joiningTypeMap) {\n      const m = {\n        R: JT_RIGHT,\n        L: JT_LEFT,\n        D: JT_DUAL,\n        C: JT_JOIN_CAUSING,\n        U: JT_NON_JOINING,\n        T: JT_TRANSPARENT\n      };\n      joiningTypeMap = new Map();\n      for (let type in joiningTypeRawData) {\n        let lastCode = 0;\n        joiningTypeRawData[type].split(',').forEach(range => {\n          let [skip, step] = range.split('+');\n          skip = parseInt(skip,36);\n          step = step ? parseInt(step, 36) : 0;\n          joiningTypeMap.set(lastCode += skip, m[type]);\n          for (let i = step; i--;) {\n            joiningTypeMap.set(++lastCode, m[type]);\n          }\n        });\n      }\n    }\n    return joiningTypeMap.get(ch) || JT_NON_JOINING\n  }\n\n  const ISOL = 1, INIT = 2, FINA = 3, MEDI = 4;\n  const formsToFeatures = [null, 'isol', 'init', 'fina', 'medi'];\n\n  function detectJoiningForms(str) {\n    // This implements the algorithm described here:\n    // https://github.com/n8willis/opentype-shaping-documents/blob/master/opentype-shaping-arabic-general.md\n    const joiningForms = new Uint8Array(str.length);\n    let prevJoiningType = JT_NON_JOINING;\n    let prevForm = ISOL;\n    let prevIndex = -1;\n    for (let i = 0; i < str.length; i++) {\n      const code = str.codePointAt(i);\n      let joiningType = getCharJoiningType(code) | 0;\n      let form = ISOL;\n      if (joiningType & JT_TRANSPARENT) {\n        continue\n      }\n      if (prevJoiningType & (JT_LEFT | JT_DUAL | JT_JOIN_CAUSING)) {\n        if (joiningType & (JT_RIGHT | JT_DUAL | JT_JOIN_CAUSING)) {\n          form = FINA;\n          // isol->init, fina->medi\n          if (prevForm === ISOL || prevForm === FINA) {\n            joiningForms[prevIndex]++;\n          }\n        }\n        else if (joiningType & (JT_LEFT | JT_NON_JOINING)) {\n          // medi->fina, init->isol\n          if (prevForm === INIT || prevForm === MEDI) {\n            joiningForms[prevIndex]--;\n          }\n        }\n      }\n      else if (prevJoiningType & (JT_RIGHT | JT_NON_JOINING)) {\n        // medi->fina, init->isol\n        if (prevForm === INIT || prevForm === MEDI) {\n          joiningForms[prevIndex]--;\n        }\n      }\n      prevForm = joiningForms[i] = form;\n      prevJoiningType = joiningType;\n      prevIndex = i;\n      if (code > 0xffff) i++;\n    }\n    // console.log(str.split('').map(ch => ch.codePointAt(0).toString(16)))\n    // console.log(str.split('').map(ch => getCharJoiningType(ch.codePointAt(0))))\n    // console.log(Array.from(joiningForms).map(f => formsToFeatures[f] || 'none'))\n    return joiningForms\n  }\n\n  function stringToGlyphs (font, str) {\n    const glyphIds = [];\n    for (let i = 0; i < str.length; i++) {\n      const cc = str.codePointAt(i);\n      if (cc > 0xffff) i++;\n      glyphIds.push(Typr.U.codeToGlyph(font, cc));\n    }\n\n    const gsub = font['GSUB'];\n    if (gsub) {\n      const {lookupList, featureList} = gsub;\n      let joiningForms;\n      const supportedFeatures = /^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/;\n      const usedLookups = [];\n      featureList.forEach(feature => {\n        if (supportedFeatures.test(feature.tag)) {\n          for (let ti = 0; ti < feature.tab.length; ti++) {\n            if (usedLookups[feature.tab[ti]]) continue\n            usedLookups[feature.tab[ti]] = true;\n            const tab = lookupList[feature.tab[ti]];\n            const isJoiningFeature = /^(isol|init|fina|medi)$/.test(feature.tag);\n            if (isJoiningFeature && !joiningForms) { //lazy\n              joiningForms = detectJoiningForms(str);\n            }\n            for (let ci = 0; ci < glyphIds.length; ci++) {\n              if (!joiningForms || !isJoiningFeature || formsToFeatures[joiningForms[ci]] === feature.tag) {\n                Typr.U._applySubs(glyphIds, ci, tab, lookupList);\n              }\n            }\n          }\n        }\n      });\n    }\n\n    return glyphIds\n  }\n\n\n  function wrapFontObj(typrFont) {\n    const glyphMap = Object.create(null);\n\n    const fontObj = {\n      unitsPerEm: typrFont.head.unitsPerEm,\n      ascender: typrFont.hhea.ascender,\n      descender: typrFont.hhea.descender,\n      forEachGlyph(text, fontSize, letterSpacing, callback) {\n        let glyphX = 0;\n        const fontScale = 1 / fontObj.unitsPerEm * fontSize;\n\n        const glyphIndices = stringToGlyphs(typrFont, text);\n        let charIndex = 0;\n        let prevGlyphIndex = -1;\n        glyphIndices.forEach((glyphIndex, i) => {\n          // Typr returns a glyph index per string codepoint, with -1s in place of those that\n          // were omitted due to ligature substitution. So we can track original index in the\n          // string via simple increment, and skip everything else when seeing a -1.\n          if (glyphIndex !== -1) {\n            let glyphObj = glyphMap[glyphIndex];\n            if (!glyphObj) {\n              const {cmds, crds} = Typr.U.glyphToPath(typrFont, glyphIndex);\n\n              // Build path string\n              let path = '';\n              let crdsIdx = 0;\n              for (let i = 0, len = cmds.length; i < len; i++) {\n                const numArgs = cmdArgLengths[cmds[i]];\n                path += cmds[i];\n                for (let j = 1; j <= numArgs; j++) {\n                  path += (j > 1 ? ',' : '') + crds[crdsIdx++];\n                }\n              }\n\n              // Find extents - Glyf gives this in metadata but not CFF, and Typr doesn't\n              // normalize the two, so it's simplest just to iterate ourselves.\n              let xMin, yMin, xMax, yMax;\n              if (crds.length) {\n                xMin = yMin = Infinity;\n                xMax = yMax = -Infinity;\n                for (let i = 0, len = crds.length; i < len; i += 2) {\n                  let x = crds[i];\n                  let y = crds[i + 1];\n                  if (x < xMin) xMin = x;\n                  if (y < yMin) yMin = y;\n                  if (x > xMax) xMax = x;\n                  if (y > yMax) yMax = y;\n                }\n              } else {\n                xMin = xMax = yMin = yMax = 0;\n              }\n\n              glyphObj = glyphMap[glyphIndex] = {\n                index: glyphIndex,\n                advanceWidth: typrFont.hmtx.aWidth[glyphIndex],\n                xMin,\n                yMin,\n                xMax,\n                yMax,\n                path,\n                pathCommandCount: cmds.length,\n                // forEachPathCommand(callback) {\n                //   let argsIndex = 0\n                //   const argsArray = []\n                //   for (let i = 0, len = cmds.length; i < len; i++) {\n                //     const numArgs = cmdArgLengths[cmds[i]]\n                //     argsArray.length = 1 + numArgs\n                //     argsArray[0] = cmds[i]\n                //     for (let j = 1; j <= numArgs; j++) {\n                //       argsArray[j] = crds[argsIndex++]\n                //     }\n                //     callback.apply(null, argsArray)\n                //   }\n                // }\n              };\n            }\n\n            // Kerning\n            if (prevGlyphIndex !== -1) {\n              glyphX += Typr.U.getPairAdjustment(typrFont, prevGlyphIndex, glyphIndex) * fontScale;\n            }\n\n            callback.call(null, glyphObj, glyphX, charIndex);\n\n            if (glyphObj.advanceWidth) {\n              glyphX += glyphObj.advanceWidth * fontScale;\n            }\n            if (letterSpacing) {\n              glyphX += letterSpacing * fontSize;\n            }\n\n            prevGlyphIndex = glyphIndex;\n          }\n          charIndex += (text.codePointAt(charIndex) > 0xffff ? 2 : 1);\n        });\n        return glyphX\n      }\n    };\n\n    return fontObj\n  }\n\n  return function parse(buffer) {\n    // Look to see if we have a WOFF file and convert it if so:\n    const peek = new Uint8Array(buffer, 0, 4);\n    const tag = Typr._bin.readASCII(peek, 0, 4);\n    if (tag === 'wOFF') {\n      buffer = woff2otf(buffer);\n    } else if (tag === 'wOF2') {\n      throw new Error('woff2 fonts not supported')\n    }\n    return wrapFontObj(Typr.parse(buffer)[0])\n  }\n}\n\n\nconst workerModule = /*#__PURE__*/defineWorkerModule({\n  name: 'Typr Font Parser',\n  dependencies: [typrFactory, woff2otfFactory, parserFactory],\n  init(typrFactory, woff2otfFactory, parserFactory) {\n    const Typr = typrFactory();\n    const woff2otf = woff2otfFactory();\n    return parserFactory(Typr, woff2otf)\n  }\n});\n\n// import fontParser from './worker/FontParser_OpenType.js'\n\n\nconst CONFIG = {\n  defaultFontURL: 'https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff', //Roboto Regular\n  sdfGlyphSize: 64,\n  sdfMargin: 1 / 16,\n  sdfExponent: 9,\n  textureWidth: 2048\n};\nconst tempColor = /*#__PURE__*/new Color();\nlet hasRequested = false;\n\nfunction now() {\n  return (self.performance || Date).now()\n}\n\n/**\n * Customizes the text builder configuration. This must be called prior to the first font processing\n * request, and applies to all fonts.\n *\n * @param {String} config.defaultFontURL - The URL of the default font to use for text processing\n *                 requests, in case none is specified or the specifiede font fails to load or parse.\n *                 Defaults to \"Roboto Regular\" from Google Fonts.\n * @param {Number} config.sdfGlyphSize - The default size of each glyph's SDF (signed distance field)\n *                 texture used for rendering. Must be a power-of-two number, and applies to all fonts,\n *                 but note that this can also be overridden per call to `getTextRenderInfo()`.\n *                 Larger sizes can improve the quality of glyph rendering by increasing the sharpness\n *                 of corners and preventing loss of very thin lines, at the expense of memory. Defaults\n *                 to 64 which is generally a good balance of size and quality.\n * @param {Number} config.sdfExponent - The exponent used when encoding the SDF values. A higher exponent\n *                 shifts the encoded 8-bit values to achieve higher precision/accuracy at texels nearer\n *                 the glyph's path, with lower precision further away. Defaults to 9.\n * @param {Number} config.sdfMargin - How much space to reserve in the SDF as margin outside the glyph's\n *                 path, as a percentage of the SDF width. A larger margin increases the quality of\n *                 extruded glyph outlines, but decreases the precision available for the glyph itself.\n *                 Defaults to 1/16th of the glyph size.\n * @param {Number} config.textureWidth - The width of the SDF texture; must be a power of 2. Defaults to\n *                 2048 which is a safe maximum texture dimension according to the stats at\n *                 https://webglstats.com/webgl/parameter/MAX_TEXTURE_SIZE and should allow for a\n *                 reasonably large number of glyphs (default glyph size of 64^2 and safe texture size of\n *                 2048^2, times 4 channels, allows for 4096 glyphs.) This can be increased if you need to\n *                 increase the glyph size and/or have an extraordinary number of glyphs.\n */\nfunction configureTextBuilder(config) {\n  if (hasRequested) {\n    console.warn('configureTextBuilder called after first font request; will be ignored.');\n  } else {\n    assign(CONFIG, config);\n  }\n}\n\n/**\n * Repository for all font SDF atlas textures and their glyph mappings. There is a separate atlas for\n * each sdfGlyphSize. Each atlas has a single Texture that holds all glyphs for all fonts.\n *\n *   {\n *     [sdfGlyphSize]: {\n *       glyphCount: number,\n *       sdfTexture: Texture,\n *       fonts: Map<fontURL, {\n *         glyphs: Map<glyphID, {path, atlasIndex, sdfViewBox}>\n *       }>\n *     }\n *   }\n */\nconst atlases = Object.create(null);\n\n/**\n * @typedef {object} TroikaTextRenderInfo - Format of the result from `getTextRenderInfo`.\n * @property {object} parameters - The normalized input arguments to the render call.\n * @property {DataTexture} sdfTexture - The SDF atlas texture.\n * @property {number} sdfGlyphSize - The size of each glyph's SDF; see `configureTextBuilder`.\n * @property {number} sdfExponent - The exponent used in encoding the SDF's values; see `configureTextBuilder`.\n * @property {Float32Array} glyphBounds - List of [minX, minY, maxX, maxY] quad bounds for each glyph.\n * @property {Float32Array} glyphAtlasIndices - List holding each glyph's index in the SDF atlas.\n * @property {Uint8Array} [glyphColors] - List holding each glyph's [r, g, b] color, if `colorRanges` was supplied.\n * @property {Float32Array} [caretPositions] - A list of caret positions for all characters in the string; each is\n *           three elements: the starting X, the ending X, and the bottom Y for the caret.\n * @property {number} [caretHeight] - An appropriate height for all selection carets.\n * @property {number} ascender - The font's ascender metric.\n * @property {number} descender - The font's descender metric.\n * @property {number} lineHeight - The final computed lineHeight measurement.\n * @property {number} topBaseline - The y position of the top line's baseline.\n * @property {Array<number>} blockBounds - The total [minX, minY, maxX, maxY] rect of the whole text block;\n *           this can include extra vertical space beyond the visible glyphs due to lineHeight, and is\n *           equivalent to the dimensions of a block-level text element in CSS.\n * @property {Array<number>} visibleBounds - The total [minX, minY, maxX, maxY] rect of the whole text block;\n *           unlike `blockBounds` this is tightly wrapped to the visible glyph paths.\n * @property {Array<number>} totalBounds - DEPRECATED; use blockBounds instead.\n * @property {Array<number>} totalBlockSize - DEPRECATED; use blockBounds instead\n * @property {Array<object>} chunkedBounds - List of bounding rects for each consecutive set of N glyphs,\n *           in the format `{start:N, end:N, rect:[minX, minY, maxX, maxY]}`.\n * @property {object} timings - Timing info for various parts of the rendering logic including SDF\n *           generation, typesetting, etc.\n * @frozen\n */\n\n/**\n * @callback getTextRenderInfo~callback\n * @param {TroikaTextRenderInfo} textRenderInfo\n */\n\n/**\n * Main entry point for requesting the data needed to render a text string with given font parameters.\n * This is an asynchronous call, performing most of the logic in a web worker thread.\n * @param {object} args\n * @param {getTextRenderInfo~callback} callback\n */\nfunction getTextRenderInfo(args, callback) {\n  hasRequested = true;\n  args = assign({}, args);\n  const totalStart = now();\n\n  // Apply default font here to avoid a 'null' atlas, and convert relative\n  // URLs to absolute so they can be resolved in the worker\n  args.font = toAbsoluteURL(args.font || CONFIG.defaultFontURL);\n\n  // Normalize text to a string\n  args.text = '' + args.text;\n\n  args.sdfGlyphSize = args.sdfGlyphSize || CONFIG.sdfGlyphSize;\n\n  // Normalize colors\n  if (args.colorRanges != null) {\n    let colors = {};\n    for (let key in args.colorRanges) {\n      if (args.colorRanges.hasOwnProperty(key)) {\n        let val = args.colorRanges[key];\n        if (typeof val !== 'number') {\n          val = tempColor.set(val).getHex();\n        }\n        colors[key] = val;\n      }\n    }\n    args.colorRanges = colors;\n  }\n\n  Object.freeze(args);\n\n  // Init the atlas if needed\n  const {textureWidth, sdfExponent} = CONFIG;\n  const {sdfGlyphSize} = args;\n  let atlas = atlases[sdfGlyphSize];\n  if (!atlas) {\n    atlas = atlases[sdfGlyphSize] = {\n      glyphCount: 0,\n      sdfTexture: new DataTexture(\n        new Uint8Array(sdfGlyphSize * textureWidth * 4),\n        textureWidth,\n        sdfGlyphSize,\n        RGBAFormat,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        LinearFilter,\n        LinearFilter\n      ),\n      glyphsByFont: new Map()\n    };\n  }\n\n  let fontGlyphs = atlas.glyphsByFont.get(args.font);\n  if (!fontGlyphs) {\n    atlas.glyphsByFont.set(args.font, fontGlyphs = new Map());\n  }\n\n  // Issue request to the typesetting engine in the worker\n  typesetInWorker(args).then(result => {\n    const {glyphIds, glyphPositions, fontSize, unitsPerEm, timings} = result;\n    const neededSDFs = [];\n    const glyphBounds = new Float32Array(glyphIds.length * 4);\n    const fontSizeMult = fontSize / unitsPerEm;\n    let boundsIdx = 0;\n    let positionsIdx = 0;\n    const quadsStart = now();\n    glyphIds.forEach((glyphId, i) => {\n      let glyphInfo = fontGlyphs.get(glyphId);\n\n      // If this is a glyphId not seen before, add it to the atlas\n      if (!glyphInfo) {\n        const {path, pathBounds} = result.glyphData[glyphId];\n\n        // Margin around path edges in SDF, based on a percentage of the glyph's max dimension.\n        // Note we add an extra 0.5 px over the configured value because the outer 0.5 doesn't contain\n        // useful interpolated values and will be ignored anyway.\n        const fontUnitsMargin = Math.max(pathBounds[2] - pathBounds[0], pathBounds[3] - pathBounds[1])\n          / sdfGlyphSize * (CONFIG.sdfMargin * sdfGlyphSize + 0.5);\n\n        const atlasIndex = atlas.glyphCount++;\n        const sdfViewBox = [\n          pathBounds[0] - fontUnitsMargin,\n          pathBounds[1] - fontUnitsMargin,\n          pathBounds[2] + fontUnitsMargin,\n          pathBounds[3] + fontUnitsMargin,\n        ];\n        fontGlyphs.set(glyphId, (glyphInfo = { path, atlasIndex, sdfViewBox }));\n\n        // Collect those that need SDF generation\n        neededSDFs.push(glyphInfo);\n      }\n\n      // Calculate bounds for renderable quads\n      // TODO can we get this back off the main thread?\n      const {sdfViewBox} = glyphInfo;\n      const posX = glyphPositions[positionsIdx++];\n      const posY = glyphPositions[positionsIdx++];\n      glyphBounds[boundsIdx++] = posX + sdfViewBox[0] * fontSizeMult;\n      glyphBounds[boundsIdx++] = posY + sdfViewBox[1] * fontSizeMult;\n      glyphBounds[boundsIdx++] = posX + sdfViewBox[2] * fontSizeMult;\n      glyphBounds[boundsIdx++] = posY + sdfViewBox[3] * fontSizeMult;\n\n      // Convert glyphId to SDF index for the shader\n      glyphIds[i] = glyphInfo.atlasIndex;\n    });\n    timings.quads = (timings.quads || 0) + (now() - quadsStart);\n\n    const sdfStart = now();\n    timings.sdf = {};\n\n    Thenable.all(neededSDFs.map(({path, atlasIndex, sdfViewBox}) => {\n      const maxDist = Math.max(sdfViewBox[2] - sdfViewBox[0], sdfViewBox[3] - sdfViewBox[1]);\n      return generateSDFInWorker(sdfGlyphSize, sdfGlyphSize, path, sdfViewBox, maxDist, CONFIG.sdfExponent)\n        .then(({textureData, timing}) => {\n          timings.sdf[atlasIndex] = timing;\n          return { atlasIndex, textureData, timing }\n        })\n    })).then(sdfResults => {\n      // If we have new SDFs, copy them into the atlas texture at the specified indices\n      if (sdfResults.length) {\n        sdfResults.forEach(({ atlasIndex, textureData }) => {\n          const texImg = atlas.sdfTexture.image;\n\n          // Grow the texture by power of 2 if needed\n          while (texImg.data.length < (atlasIndex + 1) * sdfGlyphSize * sdfGlyphSize) {\n            const biggerArray = new Uint8Array(texImg.data.length * 2);\n            biggerArray.set(texImg.data);\n            texImg.data = biggerArray;\n            texImg.height *= 2;\n            // As of Three r136 textures cannot be resized; dispose so it gets reallocated on the GPU at the new size\n            atlas.sdfTexture.dispose();\n          }\n\n          // Insert the new glyph's data into the full texture image at the correct offsets\n          // Glyphs are packed sequentially into the R,G,B,A channels of a square, advancing\n          // to the next square every 4 glyphs.\n          const squareIndex = Math.floor(atlasIndex / 4);\n          const cols = texImg.width / sdfGlyphSize;\n          const baseStartIndex = Math.floor(squareIndex / cols) * texImg.width * sdfGlyphSize * 4 //full rows\n            + (squareIndex % cols) * sdfGlyphSize * 4 //partial row\n            + (atlasIndex % 4); //color channel\n          for (let y = 0; y < sdfGlyphSize; y++) {\n            const srcStartIndex = y * sdfGlyphSize;\n            const rowStartIndex = baseStartIndex + (y * texImg.width * 4);\n            for (let x = 0; x < sdfGlyphSize; x++) {\n              texImg.data[rowStartIndex + x * 4] = textureData[srcStartIndex + x];\n            }\n          }\n        });\n        atlas.sdfTexture.needsUpdate = true;\n      }\n      timings.sdfTotal = now() - sdfStart;\n      timings.total = now() - totalStart;\n\n      // Invoke callback with the text layout arrays and updated texture\n      callback(Object.freeze({\n        parameters: args,\n        sdfTexture: atlas.sdfTexture,\n        sdfGlyphSize,\n        sdfExponent,\n        glyphBounds,\n        glyphAtlasIndices: glyphIds,\n        glyphColors: result.glyphColors,\n        caretPositions: result.caretPositions,\n        caretHeight: result.caretHeight,\n        chunkedBounds: result.chunkedBounds,\n        ascender: result.ascender,\n        descender: result.descender,\n        lineHeight: result.lineHeight,\n        topBaseline: result.topBaseline,\n        blockBounds: result.blockBounds,\n        visibleBounds: result.visibleBounds,\n        timings: result.timings,\n        get totalBounds() {\n          console.log('totalBounds deprecated, use blockBounds instead');\n          return result.blockBounds\n        },\n        get totalBlockSize() {\n          console.log('totalBlockSize deprecated, use blockBounds instead');\n          const [x0, y0, x1, y1] = result.blockBounds;\n          return [x1 - x0, y1 - y0]\n        }\n      }));\n    });\n  });\n}\n\n\n/**\n * Preload a given font and optionally pre-generate glyph SDFs for one or more character sequences.\n * This can be useful to avoid long pauses when first showing text in a scene, by preloading the\n * needed fonts and glyphs up front along with other assets.\n *\n * @param {object} options\n * @param {string} options.font - URL of the font file to preload. If not given, the default font will\n *        be loaded.\n * @param {string|string[]} options.characters - One or more character sequences for which to pre-\n *        generate glyph SDFs. Note that this will honor ligature substitution, so you may need\n *        to specify ligature sequences in addition to their individual characters to get all\n *        possible glyphs, e.g. `[\"t\", \"h\", \"th\"]` to get the \"t\" and \"h\" glyphs plus the \"th\" ligature.\n * @param {number} options.sdfGlyphSize - The size at which to prerender the SDF textures for the\n *        specified `characters`.\n * @param {function} callback - A function that will be called when the preloading is complete.\n */\nfunction preloadFont({font, characters, sdfGlyphSize}, callback) {\n  let text = Array.isArray(characters) ? characters.join('\\n') : '' + characters;\n  getTextRenderInfo({ font, sdfGlyphSize, text }, callback);\n}\n\n\n// Local assign impl so we don't have to import troika-core\nfunction assign(toObj, fromObj) {\n  for (let key in fromObj) {\n    if (fromObj.hasOwnProperty(key)) {\n      toObj[key] = fromObj[key];\n    }\n  }\n  return toObj\n}\n\n// Utility for making URLs absolute\nlet linkEl;\nfunction toAbsoluteURL(path) {\n  if (!linkEl) {\n    linkEl = typeof document === 'undefined' ? {} : document.createElement('a');\n  }\n  linkEl.href = path;\n  return linkEl.href\n}\n\n\nconst typesetterWorkerModule = /*#__PURE__*/defineWorkerModule({\n  name: 'Typesetter',\n  dependencies: [\n    CONFIG,\n    workerModule,\n    createTypesetter,\n    bidiFactory\n  ],\n  init(config, fontParser, createTypesetter, bidiFactory) {\n    const {defaultFontURL} = config;\n    return createTypesetter(fontParser, bidiFactory(), { defaultFontURL })\n  }\n});\n\n/**\n * SDF generator function wrapper that fans out requests to a number of worker\n * threads for parallelism\n */\nconst generateSDFInWorker = /*#__PURE__*/function() {\n  const threadCount = 4; //how many workers to spawn\n  const idleTimeout = 2000; //workers will be terminated after being idle this many milliseconds\n  const threads = {};\n  let callNum = 0;\n  return function(...args) {\n    const workerId = 'TroikaTextSDFGenerator_' + ((callNum++) % threadCount);\n    let thread = threads[workerId];\n    if (!thread) {\n      thread = threads[workerId] = {\n        workerModule: defineWorkerModule({\n          name: workerId,\n          workerId,\n          dependencies: [\n            CONFIG,\n            createGlyphSegmentsIndex,\n            createSDFGenerator\n          ],\n          init(config, createGlyphSegmentsIndex, createSDFGenerator) {\n            const {sdfExponent, sdfMargin} = config;\n            return createSDFGenerator(createGlyphSegmentsIndex, { sdfExponent, sdfMargin })\n          },\n          getTransferables(result) {\n            return [result.textureData.buffer]\n          }\n        }),\n        requests: 0,\n        idleTimer: null\n      };\n    }\n\n    thread.requests++;\n    clearTimeout(thread.idleTimer);\n    return thread.workerModule(...args)\n      .then(result => {\n        if (--thread.requests === 0) {\n          thread.idleTimer = setTimeout(() => { terminateWorker(workerId); }, idleTimeout);\n        }\n        return result\n      })\n  }\n}();\n\nconst typesetInWorker = /*#__PURE__*/defineWorkerModule({\n  name: 'Typesetter',\n  dependencies: [\n    typesetterWorkerModule,\n    ThenableWorkerModule\n  ],\n  init(typesetter, Thenable) {\n    return function(args) {\n      const thenable = new Thenable();\n      typesetter.typeset(args, thenable.resolve);\n      return thenable\n    }\n  },\n  getTransferables(result) {\n    // Mark array buffers as transferable to avoid cloning during postMessage\n    const transferables = [\n      result.glyphPositions.buffer,\n      result.glyphIds.buffer\n    ];\n    if (result.caretPositions) {\n      transferables.push(result.caretPositions.buffer);\n    }\n    if (result.glyphColors) {\n      transferables.push(result.glyphColors.buffer);\n    }\n    return transferables\n  }\n});\n\nfunction dumpSDFTextures() {\n  Object.keys(atlases).forEach(font => {\n    const atlas = atlases[font];\n    const canvas = document.createElement('canvas');\n    const {width, height, data} = atlas.sdfTexture.image;\n    canvas.width = width;\n    canvas.height = height;\n    const imgData = new ImageData(new Uint8ClampedArray(data), width, height);\n    const ctx = canvas.getContext('2d');\n    ctx.putImageData(imgData, 0, 0);\n    console.log(font, atlas, canvas.toDataURL());\n    console.log(\"%c.\", `\n      background: url(${canvas.toDataURL()});\n      background-size: ${width}px ${height}px;\n      color: transparent;\n      font-size: 0;\n      line-height: ${height}px;\n      padding-left: ${width}px;\n    `);\n  });\n}\n\nconst GlyphsGeometry = /*#__PURE__*/(() => {\n\n  const templateGeometries = {};\n  function getTemplateGeometry(detail) {\n    let geom = templateGeometries[detail];\n    if (!geom) {\n      // Geometry is two planes back-to-back, which will always be rendered FrontSide only but\n      // appear as DoubleSide by default. FrontSide/BackSide are emulated using drawRange.\n      // We do it this way to avoid the performance hit of two draw calls for DoubleSide materials\n      // introduced by Three.js in r130 - see https://github.com/mrdoob/three.js/pull/21967\n      const front = new PlaneBufferGeometry(1, 1, detail, detail);\n      const back = front.clone();\n      const frontAttrs = front.attributes;\n      const backAttrs = back.attributes;\n      const combined = new BufferGeometry();\n      const vertCount = frontAttrs.uv.count;\n      for (let i = 0; i < vertCount; i++) {\n        backAttrs.position.array[i * 3] *= -1; // flip position x\n        backAttrs.normal.array[i * 3 + 2] *= -1; // flip normal z\n      }\n['position', 'normal', 'uv'].forEach(name => {\n        combined.setAttribute(name, new Float32BufferAttribute(\n          [...frontAttrs[name].array, ...backAttrs[name].array],\n          frontAttrs[name].itemSize)\n        );\n      });\n      combined.setIndex([...front.index.array, ...back.index.array.map(n => n + vertCount)]);\n      combined.translate(0.5, 0.5, 0);\n      geom = templateGeometries[detail] = combined;\n    }\n    return geom\n  }\n\n  const glyphBoundsAttrName = 'aTroikaGlyphBounds';\n  const glyphIndexAttrName = 'aTroikaGlyphIndex';\n  const glyphColorAttrName = 'aTroikaGlyphColor';\n\n  /**\n  @class GlyphsGeometry\n\n  A specialized Geometry for rendering a set of text glyphs. Uses InstancedBufferGeometry to\n  render the glyphs using GPU instancing of a single quad, rather than constructing a whole\n  geometry with vertices, for much smaller attribute arraybuffers according to this math:\n\n    Where N = number of glyphs...\n\n    Instanced:\n    - position: 4 * 3\n    - index: 2 * 3\n    - normal: 4 * 3\n    - uv: 4 * 2\n    - glyph x/y bounds: N * 4\n    - glyph indices: N * 1\n    = 5N + 38\n\n    Non-instanced:\n    - position: N * 4 * 3\n    - index: N * 2 * 3\n    - normal: N * 4 * 3\n    - uv: N * 4 * 2\n    - glyph indices: N * 1\n    = 39N\n\n  A downside of this is the rare-but-possible lack of the instanced arrays extension,\n  which we could potentially work around with a fallback non-instanced implementation.\n\n  */\n  class GlyphsGeometry extends InstancedBufferGeometry {\n    constructor() {\n      super();\n\n      this.detail = 1;\n      this.curveRadius = 0;\n\n      // Define groups for rendering text outline as a separate pass; these will only\n      // be used when the `material` getter returns an array, i.e. outlineWidth > 0.\n      this.groups = [\n        {start: 0, count: Infinity, materialIndex: 0},\n        {start: 0, count: Infinity, materialIndex: 1}\n      ];\n\n      // Preallocate empty bounding objects\n      this.boundingSphere = new Sphere();\n      this.boundingBox = new Box3();\n    }\n\n    computeBoundingSphere () {\n      // No-op; we'll sync the boundingSphere proactively when needed.\n    }\n\n    computeBoundingBox() {\n      // No-op; we'll sync the boundingBox proactively when needed.\n    }\n\n    // Since our base geometry contains triangles for both front and back sides, we can emulate\n    // the \"side\" by restricting the draw range.\n    setSide(side) {\n      const verts = this.getIndex().count;\n      this.setDrawRange(side === BackSide ? verts / 2 : 0, side === DoubleSide ? verts : verts / 2);\n    }\n\n    set detail(detail) {\n      if (detail !== this._detail) {\n        this._detail = detail;\n        if (typeof detail !== 'number' || detail < 1) {\n          detail = 1;\n        }\n        let tpl = getTemplateGeometry(detail)\n        ;['position', 'normal', 'uv'].forEach(attr => {\n          this.attributes[attr] = tpl.attributes[attr].clone();\n        });\n        this.setIndex(tpl.getIndex().clone());\n      }\n    }\n    get detail() {\n      return this._detail\n    }\n\n    set curveRadius(r) {\n      if (r !== this._curveRadius) {\n        this._curveRadius = r;\n        this._updateBounds();\n      }\n    }\n    get curveRadius() {\n      return this._curveRadius\n    }\n\n    /**\n     * Update the geometry for a new set of glyphs.\n     * @param {Float32Array} glyphBounds - An array holding the planar bounds for all glyphs\n     *        to be rendered, 4 entries for each glyph: x1,x2,y1,y1\n     * @param {Float32Array} glyphAtlasIndices - An array holding the index of each glyph within\n     *        the SDF atlas texture.\n     * @param {Array} blockBounds - An array holding the [minX, minY, maxX, maxY] across all glyphs\n     * @param {Array} [chunkedBounds] - An array of objects describing bounds for each chunk of N\n     *        consecutive glyphs: `{start:N, end:N, rect:[minX, minY, maxX, maxY]}`. This can be\n     *        used with `applyClipRect` to choose an optimized `instanceCount`.\n     * @param {Uint8Array} [glyphColors] - An array holding r,g,b values for each glyph.\n     */\n    updateGlyphs(glyphBounds, glyphAtlasIndices, blockBounds, chunkedBounds, glyphColors) {\n      // Update the instance attributes\n      updateBufferAttr(this, glyphBoundsAttrName, glyphBounds, 4);\n      updateBufferAttr(this, glyphIndexAttrName, glyphAtlasIndices, 1);\n      updateBufferAttr(this, glyphColorAttrName, glyphColors, 3);\n      this._blockBounds = blockBounds;\n      this._chunkedBounds = chunkedBounds;\n      setInstanceCount(this, glyphAtlasIndices.length);\n      this._updateBounds();\n    }\n\n    _updateBounds() {\n      const bounds = this._blockBounds;\n      if (bounds) {\n        const { curveRadius, boundingBox: bbox } = this;\n        if (curveRadius) {\n          const { PI, floor, min, max, sin, cos } = Math;\n          const halfPi = PI / 2;\n          const twoPi = PI * 2;\n          const absR = Math.abs(curveRadius);\n          const leftAngle = bounds[0] / absR;\n          const rightAngle = bounds[2] / absR;\n          const minX = floor((leftAngle + halfPi) / twoPi) !== floor((rightAngle + halfPi) / twoPi)\n            ? -absR : min(sin(leftAngle) * absR, sin(rightAngle) * absR);\n          const maxX = floor((leftAngle - halfPi) / twoPi) !== floor((rightAngle - halfPi) / twoPi)\n            ? absR : max(sin(leftAngle) * absR, sin(rightAngle) * absR);\n          const maxZ = floor((leftAngle + PI) / twoPi) !== floor((rightAngle + PI) / twoPi)\n            ? absR * 2 : max(absR - cos(leftAngle) * absR, absR - cos(rightAngle) * absR);\n          bbox.min.set(minX, bounds[1], curveRadius < 0 ? -maxZ : 0);\n          bbox.max.set(maxX, bounds[3], curveRadius < 0 ? 0 : maxZ);\n        } else {\n          bbox.min.set(bounds[0], bounds[1], 0);\n          bbox.max.set(bounds[2], bounds[3], 0);\n        }\n        bbox.getBoundingSphere(this.boundingSphere);\n      }\n    }\n\n    /**\n     * Given a clipping rect, and the chunkedBounds from the last updateGlyphs call, choose the lowest\n     * `instanceCount` that will show all glyphs within the clipped view. This is an optimization\n     * for long blocks of text that are clipped, to skip vertex shader evaluation for glyphs that would\n     * be clipped anyway.\n     *\n     * Note that since `drawElementsInstanced[ANGLE]` only accepts an instance count and not a starting\n     * offset, this optimization becomes less effective as the clipRect moves closer to the end of the\n     * text block. We could fix that by switching from instancing to a full geometry with a drawRange,\n     * but at the expense of much larger attribute buffers (see classdoc above.)\n     *\n     * @param {Vector4} clipRect\n     */\n    applyClipRect(clipRect) {\n      let count = this.getAttribute(glyphIndexAttrName).count;\n      let chunks = this._chunkedBounds;\n      if (chunks) {\n        for (let i = chunks.length; i--;) {\n          count = chunks[i].end;\n          let rect = chunks[i].rect;\n          // note: both rects are l-b-r-t\n          if (rect[1] < clipRect.w && rect[3] > clipRect.y && rect[0] < clipRect.z && rect[2] > clipRect.x) {\n            break\n          }\n        }\n      }\n      setInstanceCount(this, count);\n    }\n  }\n\n  // Compat for pre r109:\n  if (!GlyphsGeometry.prototype.setAttribute) {\n    GlyphsGeometry.prototype.setAttribute = function(name, attribute) {\n      this.attributes[ name ] = attribute;\n      return this\n    };\n  }\n\n\n  function updateBufferAttr(geom, attrName, newArray, itemSize) {\n    const attr = geom.getAttribute(attrName);\n    if (newArray) {\n      // If length isn't changing, just update the attribute's array data\n      if (attr && attr.array.length === newArray.length) {\n        attr.array.set(newArray);\n        attr.needsUpdate = true;\n      } else {\n        geom.setAttribute(attrName, new InstancedBufferAttribute(newArray, itemSize));\n        // If the new attribute has a different size, we also have to (as of r117) manually clear the\n        // internal cached max instance count. See https://github.com/mrdoob/three.js/issues/19706\n        // It's unclear if this is a threejs bug or a truly unsupported scenario; discussion in\n        // that ticket is ambiguous as to whether replacing a BufferAttribute with one of a\n        // different size is supported, but https://github.com/mrdoob/three.js/pull/17418 strongly\n        // implies it should be supported. It's possible we need to\n        delete geom._maxInstanceCount; //for r117+, could be fragile\n        geom.dispose(); //for r118+, more robust feeling, but more heavy-handed than I'd like\n      }\n    } else if (attr) {\n      geom.deleteAttribute(attrName);\n    }\n  }\n\n  // Handle maxInstancedCount -> instanceCount rename that happened in three r117\n  function setInstanceCount(geom, count) {\n    geom[geom.hasOwnProperty('instanceCount') ? 'instanceCount' : 'maxInstancedCount'] = count;\n  }\n\n  return GlyphsGeometry\n})();\n\n// language=GLSL\nconst VERTEX_DEFS = `\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n`;\n\n// language=GLSL prefix=\"void main() {\" suffix=\"}\"\nconst VERTEX_TRANSFORM = `\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n${''/* NOTE: it seems important to calculate the glyph's bounding texture UVs here in the\n  vertex shader, rather than in the fragment shader, as the latter gives strange artifacts\n  on some glyphs (those in the leftmost texture column) on some systems. The exact reason\n  isn't understood but doing this here, then mix()-ing in the fragment shader, seems to work. */}\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n`;\n\n// language=GLSL\nconst FRAGMENT_DEFS = `\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of encoding in SDFGenerator.js\n  ${''/* TODO - there's some slight inaccuracy here when dealing with interpolated alpha values; those\n    are linearly interpolated where the encoding is exponential. Look into improving this by rounding\n    to nearest 2 whole texels, decoding those exponential values, and linearly interpolating the result.\n  */}\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  ${''/*\n    When the standard derivatives extension is available, we choose an antialiasing alpha threshold based\n    on the potential change in the SDF's alpha from this fragment to its neighbor. This strategy maximizes \n    readability and edge crispness at all sizes and screen resolutions.\n  */}\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  ${''/* \n  // TODO more refined extrapolated distance by adjusting for angle of gradient at edge...\n  // This has potential but currently gives very jagged extensions, maybe due to precision issues?\n  float uvStep = 1.0 / uTroikaSDFGlyphSize;\n  vec2 neighbor1UV = clampedGlyphUV + (\n    vTroikaGlyphUV.x != clampedGlyphUV.x ? vec2(0.0, uvStep * sign(0.5 - vTroikaGlyphUV.y)) :\n    vTroikaGlyphUV.y != clampedGlyphUV.y ? vec2(uvStep * sign(0.5 - vTroikaGlyphUV.x), 0.0) :\n    vec2(0.0)\n  );\n  vec2 neighbor2UV = clampedGlyphUV + (\n    vTroikaGlyphUV.x != clampedGlyphUV.x ? vec2(0.0, uvStep * -sign(0.5 - vTroikaGlyphUV.y)) :\n    vTroikaGlyphUV.y != clampedGlyphUV.y ? vec2(uvStep * -sign(0.5 - vTroikaGlyphUV.x), 0.0) :\n    vec2(0.0)\n  );\n  float neighbor1Distance = troikaGlyphUvToDistance(neighbor1UV);\n  float neighbor2Distance = troikaGlyphUvToDistance(neighbor2UV);\n  float distToUnclamped = length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n  float distToNeighbor = length((clampedGlyphUV - neighbor1UV) * vTroikaGlyphDimensions);\n  float gradientAngle1 = min(asin(abs(neighbor1Distance - distance) / distToNeighbor), PI / 2.0);\n  float gradientAngle2 = min(asin(abs(neighbor2Distance - distance) / distToNeighbor), PI / 2.0);\n  distance += (cos(gradientAngle1) + cos(gradientAngle2)) / 2.0 * distToUnclamped;\n  */}\n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n`;\n\n// language=GLSL prefix=\"void main() {\" suffix=\"}\"\nconst FRAGMENT_TRANSFORM = `\nfloat aaDist = troikaGetAADist();\nfloat distance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(distance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  distance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n`;\n\n\n/**\n * Create a material for rendering text, derived from a baseMaterial\n */\nfunction createTextDerivedMaterial(baseMaterial) {\n  const textMaterial = createDerivedMaterial(baseMaterial, {\n    chained: true,\n    extensions: {\n      derivatives: true\n    },\n    uniforms: {\n      uTroikaSDFTexture: {value: null},\n      uTroikaSDFTextureSize: {value: new Vector2()},\n      uTroikaSDFGlyphSize: {value: 0},\n      uTroikaSDFExponent: {value: 0},\n      uTroikaTotalBounds: {value: new Vector4(0,0,0,0)},\n      uTroikaClipRect: {value: new Vector4(0,0,0,0)},\n      uTroikaDistanceOffset: {value: 0},\n      uTroikaOutlineOpacity: {value: 0},\n      uTroikaFillOpacity: {value: 1},\n      uTroikaPositionOffset: {value: new Vector2()},\n      uTroikaCurveRadius: {value: 0},\n      uTroikaBlurRadius: {value: 0},\n      uTroikaStrokeWidth: {value: 0},\n      uTroikaStrokeColor: {value: new Color()},\n      uTroikaStrokeOpacity: {value: 1},\n      uTroikaOrient: {value: new Matrix3()},\n      uTroikaUseGlyphColors: {value: true},\n      uTroikaSDFDebug: {value: false}\n    },\n    vertexDefs: VERTEX_DEFS,\n    vertexTransform: VERTEX_TRANSFORM,\n    fragmentDefs: FRAGMENT_DEFS,\n    fragmentColorTransform: FRAGMENT_TRANSFORM,\n    customRewriter({vertexShader, fragmentShader}) {\n      let uDiffuseRE = /\\buniform\\s+vec3\\s+diffuse\\b/;\n      if (uDiffuseRE.test(fragmentShader)) {\n        // Replace all instances of `diffuse` with our varying\n        fragmentShader = fragmentShader\n          .replace(uDiffuseRE, 'varying vec3 vTroikaGlyphColor')\n          .replace(/\\bdiffuse\\b/g, 'vTroikaGlyphColor');\n        // Make sure the vertex shader declares the uniform so we can grab it as a fallback\n        if (!uDiffuseRE.test(vertexShader)) {\n          vertexShader = vertexShader.replace(\n            voidMainRegExp,\n            'uniform vec3 diffuse;\\n$&\\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\\n'\n          );\n        }\n      }\n      return { vertexShader, fragmentShader }\n    }\n  });\n\n  // Force transparency - TODO is this reasonable?\n  textMaterial.transparent = true;\n\n  Object.defineProperties(textMaterial, {\n    isTroikaTextMaterial: {value: true},\n\n    // WebGLShadowMap reverses the side of the shadow material by default, which fails\n    // for planes, so here we force the `shadowSide` to always match the main side.\n    shadowSide: {\n      get() {\n        return this.side\n      },\n      set() {\n        //no-op\n      }\n    }\n  });\n\n  return textMaterial\n}\n\nconst Text = /*#__PURE__*/(() => {\n\n  const defaultMaterial = new MeshBasicMaterial({\n    color: 0xffffff,\n    side: DoubleSide,\n    transparent: true\n  });\n  const defaultStrokeColor = 0x808080;\n\n  const tempMat4 = new Matrix4();\n  const tempVec3a = new Vector3();\n  const tempVec3b = new Vector3();\n  const tempArray = [];\n  const origin = new Vector3();\n  const defaultOrient = '+x+y';\n\n  function first(o) {\n    return Array.isArray(o) ? o[0] : o\n  }\n\n  let getFlatRaycastMesh = () => {\n    const mesh = new Mesh(\n      new PlaneBufferGeometry(1, 1),\n      defaultMaterial\n    );\n    getFlatRaycastMesh = () => mesh;\n    return mesh\n  };\n  let getCurvedRaycastMesh = () => {\n    const mesh = new Mesh(\n      new PlaneBufferGeometry(1, 1, 32, 1),\n      defaultMaterial\n    );\n    getCurvedRaycastMesh = () => mesh;\n    return mesh\n  };\n\n  const syncStartEvent = {type: 'syncstart'};\n  const syncCompleteEvent = {type: 'synccomplete'};\n\n  const SYNCABLE_PROPS = [\n    'font',\n    'fontSize',\n    'letterSpacing',\n    'lineHeight',\n    'maxWidth',\n    'overflowWrap',\n    'text',\n    'direction',\n    'textAlign',\n    'textIndent',\n    'whiteSpace',\n    'anchorX',\n    'anchorY',\n    'colorRanges',\n    'sdfGlyphSize'\n  ];\n\n  const COPYABLE_PROPS = SYNCABLE_PROPS.concat(\n    'material',\n    'color',\n    'depthOffset',\n    'clipRect',\n    'curveRadius',\n    'orientation',\n    'glyphGeometryDetail'\n  );\n\n\n\n  /**\n   * @class Text\n   *\n   * A ThreeJS Mesh that renders a string of text on a plane in 3D space using signed distance\n   * fields (SDF).\n   */\n  class Text extends Mesh {\n    constructor() {\n      const geometry = new GlyphsGeometry();\n      super(geometry, null);\n\n      // === Text layout properties: === //\n\n      /**\n       * @member {string} text\n       * The string of text to be rendered.\n       */\n      this.text = '';\n\n      /**\n       * @deprecated Use `anchorX` and `anchorY` instead\n       * @member {Array<number>} anchor\n       * Defines where in the text block should correspond to the mesh's local position, as a set\n       * of horizontal and vertical percentages from 0 to 1. A value of `[0, 0]` (the default)\n       * anchors at the top-left, `[1, 1]` at the bottom-right, and `[0.5, 0.5]` centers the\n       * block at the mesh's position.\n       */\n      //this.anchor = null\n\n      /**\n       * @member {number|string} anchorX\n       * Defines the horizontal position in the text block that should line up with the local origin.\n       * Can be specified as a numeric x position in local units, a string percentage of the total\n       * text block width e.g. `'25%'`, or one of the following keyword strings: 'left', 'center',\n       * or 'right'.\n       */\n      this.anchorX = 0;\n\n      /**\n       * @member {number|string} anchorX\n       * Defines the vertical position in the text block that should line up with the local origin.\n       * Can be specified as a numeric y position in local units (note: down is negative y), a string\n       * percentage of the total text block height e.g. `'25%'`, or one of the following keyword strings:\n       * 'top', 'top-baseline', 'middle', 'bottom-baseline', or 'bottom'.\n       */\n      this.anchorY = 0;\n\n      /**\n       * @member {number} curveRadius\n       * Defines a cylindrical radius along which the text's plane will be curved. Positive numbers put\n       * the cylinder's centerline (oriented vertically) that distance in front of the text, for a concave\n       * curvature, while negative numbers put it behind the text for a convex curvature. The centerline\n       * will be aligned with the text's local origin; you can use `anchorX` to offset it.\n       *\n       * Since each glyph is by default rendered with a simple quad, each glyph remains a flat plane\n       * internally. You can use `glyphGeometryDetail` to add more vertices for curvature inside glyphs.\n       */\n      this.curveRadius = 0;\n\n      /**\n       * @member {string} direction\n       * Sets the base direction for the text. The default value of \"auto\" will choose a direction based\n       * on the text's content according to the bidi spec. A value of \"ltr\" or \"rtl\" will force the direction.\n       */\n      this.direction = 'auto';\n\n      /**\n       * @member {string} font\n       * URL of a custom font to be used. Font files can be any of the formats supported by\n       * OpenType (see https://github.com/opentypejs/opentype.js).\n       * Defaults to the Roboto font loaded from Google Fonts.\n       */\n      this.font = null; //will use default from TextBuilder\n\n      /**\n       * @member {number} fontSize\n       * The size at which to render the font in local units; corresponds to the em-box height\n       * of the chosen `font`.\n       */\n      this.fontSize = 0.1;\n\n      /**\n       * @member {number} letterSpacing\n       * Sets a uniform adjustment to spacing between letters after kerning is applied. Positive\n       * numbers increase spacing and negative numbers decrease it.\n       */\n      this.letterSpacing = 0;\n\n      /**\n       * @member {number|string} lineHeight\n       * Sets the height of each line of text, as a multiple of the `fontSize`. Defaults to 'normal'\n       * which chooses a reasonable height based on the chosen font's ascender/descender metrics.\n       */\n      this.lineHeight = 'normal';\n\n      /**\n       * @member {number} maxWidth\n       * The maximum width of the text block, above which text may start wrapping according to the\n       * `whiteSpace` and `overflowWrap` properties.\n       */\n      this.maxWidth = Infinity;\n\n      /**\n       * @member {string} overflowWrap\n       * Defines how text wraps if the `whiteSpace` property is `normal`. Can be either `'normal'`\n       * to break at whitespace characters, or `'break-word'` to allow breaking within words.\n       * Defaults to `'normal'`.\n       */\n      this.overflowWrap = 'normal';\n\n      /**\n       * @member {string} textAlign\n       * The horizontal alignment of each line of text within the overall text bounding box.\n       */\n      this.textAlign = 'left';\n\n      /**\n       * @member {number} textIndent\n       * Indentation for the first character of a line; see CSS `text-indent`.\n       */\n      this.textIndent = 0;\n\n      /**\n       * @member {string} whiteSpace\n       * Defines whether text should wrap when a line reaches the `maxWidth`. Can\n       * be either `'normal'` (the default), to allow wrapping according to the `overflowWrap` property,\n       * or `'nowrap'` to prevent wrapping. Note that `'normal'` here honors newline characters to\n       * manually break lines, making it behave more like `'pre-wrap'` does in CSS.\n       */\n      this.whiteSpace = 'normal';\n\n\n      // === Presentation properties: === //\n\n      /**\n       * @member {THREE.Material} material\n       * Defines a _base_ material to be used when rendering the text. This material will be\n       * automatically replaced with a material derived from it, that adds shader code to\n       * decrease the alpha for each fragment (pixel) outside the text glyphs, with antialiasing.\n       * By default it will derive from a simple white MeshBasicMaterial, but you can use any\n       * of the other mesh materials to gain other features like lighting, texture maps, etc.\n       *\n       * Also see the `color` shortcut property.\n       */\n      this.material = null;\n\n      /**\n       * @member {string|number|THREE.Color} color\n       * This is a shortcut for setting the `color` of the text's material. You can use this\n       * if you don't want to specify a whole custom `material`. Also, if you do use a custom\n       * `material`, this color will only be used for this particuar Text instance, even if\n       * that same material instance is shared across multiple Text objects.\n       */\n      this.color = null;\n\n      /**\n       * @member {object|null} colorRanges\n       * WARNING: This API is experimental and may change.\n       * This allows more fine-grained control of colors for individual or ranges of characters,\n       * taking precedence over the material's `color`. Its format is an Object whose keys each\n       * define a starting character index for a range, and whose values are the color for each\n       * range. The color value can be a numeric hex color value, a `THREE.Color` object, or\n       * any of the strings accepted by `THREE.Color`.\n       */\n      this.colorRanges = null;\n\n      /**\n       * @member {number|string} outlineWidth\n       * WARNING: This API is experimental and may change.\n       * The width of an outline/halo to be drawn around each text glyph using the `outlineColor` and `outlineOpacity`.\n       * Can be specified as either an absolute number in local units, or as a percentage string e.g.\n       * `\"12%\"` which is treated as a percentage of the `fontSize`. Defaults to `0`, which means\n       * no outline will be drawn unless an `outlineOffsetX/Y` or `outlineBlur` is set.\n       */\n      this.outlineWidth = 0;\n\n      /**\n       * @member {string|number|THREE.Color} outlineColor\n       * WARNING: This API is experimental and may change.\n       * The color of the text outline, if `outlineWidth`/`outlineBlur`/`outlineOffsetX/Y` are set.\n       * Defaults to black.\n       */\n      this.outlineColor = 0x000000;\n\n      /**\n       * @member {number} outlineOpacity\n       * WARNING: This API is experimental and may change.\n       * The opacity of the outline, if `outlineWidth`/`outlineBlur`/`outlineOffsetX/Y` are set.\n       * Defaults to `1`.\n       */\n      this.outlineOpacity = 1;\n\n      /**\n       * @member {number|string} outlineBlur\n       * WARNING: This API is experimental and may change.\n       * A blur radius applied to the outer edge of the text's outline. If the `outlineWidth` is\n       * zero, the blur will be applied at the glyph edge, like CSS's `text-shadow` blur radius.\n       * Can be specified as either an absolute number in local units, or as a percentage string e.g.\n       * `\"12%\"` which is treated as a percentage of the `fontSize`. Defaults to `0`.\n       */\n      this.outlineBlur = 0;\n\n      /**\n       * @member {number|string} outlineOffsetX\n       * WARNING: This API is experimental and may change.\n       * A horizontal offset for the text outline.\n       * Can be specified as either an absolute number in local units, or as a percentage string e.g. `\"12%\"`\n       * which is treated as a percentage of the `fontSize`. Defaults to `0`.\n       */\n      this.outlineOffsetX = 0;\n\n      /**\n       * @member {number|string} outlineOffsetY\n       * WARNING: This API is experimental and may change.\n       * A vertical offset for the text outline.\n       * Can be specified as either an absolute number in local units, or as a percentage string e.g. `\"12%\"`\n       * which is treated as a percentage of the `fontSize`. Defaults to `0`.\n       */\n      this.outlineOffsetY = 0;\n\n      /**\n       * @member {number|string} strokeWidth\n       * WARNING: This API is experimental and may change.\n       * The width of an inner stroke drawn inside each text glyph using the `strokeColor` and `strokeOpacity`.\n       * Can be specified as either an absolute number in local units, or as a percentage string e.g. `\"12%\"`\n       * which is treated as a percentage of the `fontSize`. Defaults to `0`.\n       */\n      this.strokeWidth = 0;\n\n      /**\n       * @member {string|number|THREE.Color} strokeColor\n       * WARNING: This API is experimental and may change.\n       * The color of the text stroke, if `strokeWidth` is greater than zero. Defaults to gray.\n       */\n      this.strokeColor = defaultStrokeColor;\n\n      /**\n       * @member {number} strokeOpacity\n       * WARNING: This API is experimental and may change.\n       * The opacity of the stroke, if `strokeWidth` is greater than zero. Defaults to `1`.\n       */\n      this.strokeOpacity = 1;\n\n      /**\n       * @member {number} fillOpacity\n       * WARNING: This API is experimental and may change.\n       * The opacity of the glyph's fill from 0 to 1. This behaves like the material's `opacity` but allows\n       * giving the fill a different opacity than the `strokeOpacity`. A fillOpacity of `0` makes the\n       * interior of the glyph invisible, leaving just the `strokeWidth`. Defaults to `1`.\n       */\n      this.fillOpacity = 1;\n\n      /**\n       * @member {number} depthOffset\n       * This is a shortcut for setting the material's `polygonOffset` and related properties,\n       * which can be useful in preventing z-fighting when this text is laid on top of another\n       * plane in the scene. Positive numbers are further from the camera, negatives closer.\n       */\n      this.depthOffset = 0;\n\n      /**\n       * @member {Array<number>} clipRect\n       * If specified, defines a `[minX, minY, maxX, maxY]` of a rectangle outside of which all\n       * pixels will be discarded. This can be used for example to clip overflowing text when\n       * `whiteSpace='nowrap'`.\n       */\n      this.clipRect = null;\n\n      /**\n       * @member {string} orientation\n       * Defines the axis plane on which the text should be laid out when the mesh has no extra\n       * rotation transform. It is specified as a string with two axes: the horizontal axis with\n       * positive pointing right, and the vertical axis with positive pointing up. By default this\n       * is '+x+y', meaning the text sits on the xy plane with the text's top toward positive y\n       * and facing positive z. A value of '+x-z' would place it on the xz plane with the text's\n       * top toward negative z and facing positive y.\n       */\n      this.orientation = defaultOrient;\n\n      /**\n       * @member {number} glyphGeometryDetail\n       * Controls number of vertical/horizontal segments that make up each glyph's rectangular\n       * plane. Defaults to 1. This can be increased to provide more geometrical detail for custom\n       * vertex shader effects, for example.\n       */\n      this.glyphGeometryDetail = 1;\n\n      /**\n       * @member {number|null} sdfGlyphSize\n       * The size of each glyph's SDF (signed distance field) used for rendering. This must be a\n       * power-of-two number. Defaults to 64 which is generally a good balance of size and quality\n       * for most fonts. Larger sizes can improve the quality of glyph rendering by increasing\n       * the sharpness of corners and preventing loss of very thin lines, at the expense of\n       * increased memory footprint and longer SDF generation time.\n       */\n      this.sdfGlyphSize = null;\n\n      this.debugSDF = false;\n    }\n\n    /**\n     * Updates the text rendering according to the current text-related configuration properties.\n     * This is an async process, so you can pass in a callback function to be executed when it\n     * finishes.\n     * @param {function} [callback]\n     */\n    sync(callback) {\n      if (this._needsSync) {\n        this._needsSync = false;\n\n        // If there's another sync still in progress, queue\n        if (this._isSyncing) {\n          (this._queuedSyncs || (this._queuedSyncs = [])).push(callback);\n        } else {\n          this._isSyncing = true;\n          this.dispatchEvent(syncStartEvent);\n\n          getTextRenderInfo({\n            text: this.text,\n            font: this.font,\n            fontSize: this.fontSize || 0.1,\n            letterSpacing: this.letterSpacing || 0,\n            lineHeight: this.lineHeight || 'normal',\n            maxWidth: this.maxWidth,\n            direction: this.direction || 'auto',\n            textAlign: this.textAlign,\n            textIndent: this.textIndent,\n            whiteSpace: this.whiteSpace,\n            overflowWrap: this.overflowWrap,\n            anchorX: this.anchorX,\n            anchorY: this.anchorY,\n            colorRanges: this.colorRanges,\n            includeCaretPositions: true, //TODO parameterize\n            sdfGlyphSize: this.sdfGlyphSize\n          }, textRenderInfo => {\n            this._isSyncing = false;\n\n            // Save result for later use in onBeforeRender\n            this._textRenderInfo = textRenderInfo;\n\n            // Update the geometry attributes\n            this.geometry.updateGlyphs(\n              textRenderInfo.glyphBounds,\n              textRenderInfo.glyphAtlasIndices,\n              textRenderInfo.blockBounds,\n              textRenderInfo.chunkedBounds,\n              textRenderInfo.glyphColors\n            );\n\n            // If we had extra sync requests queued up, kick it off\n            const queued = this._queuedSyncs;\n            if (queued) {\n              this._queuedSyncs = null;\n              this._needsSync = true;\n              this.sync(() => {\n                queued.forEach(fn => fn && fn());\n              });\n            }\n\n            this.dispatchEvent(syncCompleteEvent);\n            if (callback) {\n              callback();\n            }\n          });\n        }\n      }\n    }\n\n    /**\n     * Initiate a sync if needed - note it won't complete until next frame at the\n     * earliest so if possible it's a good idea to call sync() manually as soon as\n     * all the properties have been set.\n     * @override\n     */\n    onBeforeRender(renderer, scene, camera, geometry, material, group) {\n      this.sync();\n\n      // This may not always be a text material, e.g. if there's a scene.overrideMaterial present\n      if (material.isTroikaTextMaterial) {\n        this._prepareForRender(material);\n      }\n\n      // We need to force the material to FrontSide to avoid the double-draw-call performance hit\n      // introduced in Three.js r130: https://github.com/mrdoob/three.js/pull/21967 - The sidedness\n      // is instead applied via drawRange in the GlyphsGeometry.\n      material._hadOwnSide = material.hasOwnProperty('side');\n      this.geometry.setSide(material._actualSide = material.side);\n      material.side = FrontSide;\n    }\n\n    onAfterRender(renderer, scene, camera, geometry, material, group) {\n      // Restore original material side\n      if (material._hadOwnSide) {\n        material.side = material._actualSide;\n      } else {\n        delete material.side; // back to inheriting from base material\n      }\n    }\n\n    /**\n     * Shortcut to dispose the geometry specific to this instance.\n     * Note: we don't also dispose the derived material here because if anything else is\n     * sharing the same base material it will result in a pause next frame as the program\n     * is recompiled. Instead users can dispose the base material manually, like normal,\n     * and we'll also dispose the derived material at that time.\n     */\n    dispose() {\n      this.geometry.dispose();\n    }\n\n    /**\n     * @property {TroikaTextRenderInfo|null} textRenderInfo\n     * @readonly\n     * The current processed rendering data for this TextMesh, returned by the TextBuilder after\n     * a `sync()` call. This will be `null` initially, and may be stale for a short period until\n     * the asynchrous `sync()` process completes.\n     */\n    get textRenderInfo() {\n      return this._textRenderInfo || null\n    }\n\n    // Handler for automatically wrapping the base material with our upgrades. We do the wrapping\n    // lazily on _read_ rather than write to avoid unnecessary wrapping on transient values.\n    get material() {\n      let derivedMaterial = this._derivedMaterial;\n      const baseMaterial = this._baseMaterial || this._defaultMaterial || (this._defaultMaterial = defaultMaterial.clone());\n      if (!derivedMaterial || derivedMaterial.baseMaterial !== baseMaterial) {\n        derivedMaterial = this._derivedMaterial = createTextDerivedMaterial(baseMaterial);\n        // dispose the derived material when its base material is disposed:\n        baseMaterial.addEventListener('dispose', function onDispose() {\n          baseMaterial.removeEventListener('dispose', onDispose);\n          derivedMaterial.dispose();\n        });\n      }\n      // If text outline is configured, render it as a preliminary draw using Three's multi-material\n      // feature (see GlyphsGeometry which sets up `groups` for this purpose) Doing it with multi\n      // materials ensures the layers are always rendered consecutively in a consistent order.\n      // Each layer will trigger onBeforeRender with the appropriate material.\n      if (this.outlineWidth || this.outlineBlur || this.outlineOffsetX || this.outlineOffsetY) {\n        let outlineMaterial = derivedMaterial._outlineMtl;\n        if (!outlineMaterial) {\n          outlineMaterial = derivedMaterial._outlineMtl = Object.create(derivedMaterial, {\n            id: {value: derivedMaterial.id + 0.1}\n          });\n          outlineMaterial.isTextOutlineMaterial = true;\n          outlineMaterial.depthWrite = false;\n          outlineMaterial.map = null; //???\n          derivedMaterial.addEventListener('dispose', function onDispose() {\n            derivedMaterial.removeEventListener('dispose', onDispose);\n            outlineMaterial.dispose();\n          });\n        }\n        return [\n          outlineMaterial,\n          derivedMaterial\n        ]\n      } else {\n        return derivedMaterial\n      }\n    }\n    set material(baseMaterial) {\n      if (baseMaterial && baseMaterial.isTroikaTextMaterial) { //prevent double-derivation\n        this._derivedMaterial = baseMaterial;\n        this._baseMaterial = baseMaterial.baseMaterial;\n      } else {\n        this._baseMaterial = baseMaterial;\n      }\n    }\n\n    get glyphGeometryDetail() {\n      return this.geometry.detail\n    }\n    set glyphGeometryDetail(detail) {\n      this.geometry.detail = detail;\n    }\n\n    get curveRadius() {\n      return this.geometry.curveRadius\n    }\n    set curveRadius(r) {\n      this.geometry.curveRadius = r;\n    }\n\n    // Create and update material for shadows upon request:\n    get customDepthMaterial() {\n      return first(this.material).getDepthMaterial()\n    }\n    get customDistanceMaterial() {\n      return first(this.material).getDistanceMaterial()\n    }\n\n    _prepareForRender(material) {\n      const isOutline = material.isTextOutlineMaterial;\n      const uniforms = material.uniforms;\n      const textInfo = this.textRenderInfo;\n      if (textInfo) {\n        const {sdfTexture, blockBounds} = textInfo;\n        uniforms.uTroikaSDFTexture.value = sdfTexture;\n        uniforms.uTroikaSDFTextureSize.value.set(sdfTexture.image.width, sdfTexture.image.height);\n        uniforms.uTroikaSDFGlyphSize.value = textInfo.sdfGlyphSize;\n        uniforms.uTroikaSDFExponent.value = textInfo.sdfExponent;\n        uniforms.uTroikaTotalBounds.value.fromArray(blockBounds);\n        uniforms.uTroikaUseGlyphColors.value = !isOutline && !!textInfo.glyphColors;\n\n        let distanceOffset = 0;\n        let blurRadius = 0;\n        let strokeWidth = 0;\n        let fillOpacity;\n        let strokeOpacity;\n        let strokeColor;\n        let offsetX = 0;\n        let offsetY = 0;\n\n        if (isOutline) {\n          let {outlineWidth, outlineOffsetX, outlineOffsetY, outlineBlur, outlineOpacity} = this;\n          distanceOffset = this._parsePercent(outlineWidth) || 0;\n          blurRadius = Math.max(0, this._parsePercent(outlineBlur) || 0);\n          fillOpacity = outlineOpacity;\n          offsetX = this._parsePercent(outlineOffsetX) || 0;\n          offsetY = this._parsePercent(outlineOffsetY) || 0;\n        } else {\n          strokeWidth = Math.max(0, this._parsePercent(this.strokeWidth) || 0);\n          if (strokeWidth) {\n            strokeColor = this.strokeColor;\n            uniforms.uTroikaStrokeColor.value.set(strokeColor == null ? defaultStrokeColor : strokeColor);\n            strokeOpacity = this.strokeOpacity;\n            if (strokeOpacity == null) strokeOpacity = 1;\n          }\n          fillOpacity = this.fillOpacity;\n        }\n\n        uniforms.uTroikaDistanceOffset.value = distanceOffset;\n        uniforms.uTroikaPositionOffset.value.set(offsetX, offsetY);\n        uniforms.uTroikaBlurRadius.value = blurRadius;\n        uniforms.uTroikaStrokeWidth.value = strokeWidth;\n        uniforms.uTroikaStrokeOpacity.value = strokeOpacity;\n        uniforms.uTroikaFillOpacity.value = fillOpacity == null ? 1 : fillOpacity;\n        uniforms.uTroikaCurveRadius.value = this.curveRadius || 0;\n\n        let clipRect = this.clipRect;\n        if (clipRect && Array.isArray(clipRect) && clipRect.length === 4) {\n          uniforms.uTroikaClipRect.value.fromArray(clipRect);\n        } else {\n          // no clipping - choose a finite rect that shouldn't ever be reached by overflowing glyphs or outlines\n          const pad = (this.fontSize || 0.1) * 100;\n          uniforms.uTroikaClipRect.value.set(\n            blockBounds[0] - pad,\n            blockBounds[1] - pad,\n            blockBounds[2] + pad,\n            blockBounds[3] + pad\n          );\n        }\n        this.geometry.applyClipRect(uniforms.uTroikaClipRect.value);\n      }\n      uniforms.uTroikaSDFDebug.value = !!this.debugSDF;\n      material.polygonOffset = !!this.depthOffset;\n      material.polygonOffsetFactor = material.polygonOffsetUnits = this.depthOffset || 0;\n\n      // Shortcut for setting material color via `color` prop on the mesh; this is\n      // applied only to the derived material to avoid mutating a shared base material.\n      const color = isOutline ? (this.outlineColor || 0) : this.color;\n\n      if (color == null) {\n        delete material.color; //inherit from base\n      } else {\n        const colorObj = material.hasOwnProperty('color') ? material.color : (material.color = new Color());\n        if (color !== colorObj._input || typeof color === 'object') {\n          colorObj.set(colorObj._input = color);\n        }\n      }\n\n      // base orientation\n      let orient = this.orientation || defaultOrient;\n      if (orient !== material._orientation) {\n        let rotMat = uniforms.uTroikaOrient.value;\n        orient = orient.replace(/[^-+xyz]/g, '');\n        let match = orient !== defaultOrient && orient.match(/^([-+])([xyz])([-+])([xyz])$/);\n        if (match) {\n          let [, hSign, hAxis, vSign, vAxis] = match;\n          tempVec3a.set(0, 0, 0)[hAxis] = hSign === '-' ? 1 : -1;\n          tempVec3b.set(0, 0, 0)[vAxis] = vSign === '-' ? -1 : 1;\n          tempMat4.lookAt(origin, tempVec3a.cross(tempVec3b), tempVec3b);\n          rotMat.setFromMatrix4(tempMat4);\n        } else {\n          rotMat.identity();\n        }\n        material._orientation = orient;\n      }\n    }\n\n    _parsePercent(value) {\n      if (typeof value === 'string') {\n        let match = value.match(/^(-?[\\d.]+)%$/);\n        let pct = match ? parseFloat(match[1]) : NaN;\n        value = (isNaN(pct) ? 0 : pct / 100) * this.fontSize;\n      }\n      return value\n    }\n\n    /**\n     * Translate a point in local space to an x/y in the text plane.\n     */\n    localPositionToTextCoords(position, target = new Vector2()) {\n      target.copy(position); //simple non-curved case is 1:1\n      const r = this.curveRadius;\n      if (r) { //flatten the curve\n        target.x = Math.atan2(position.x, Math.abs(r) - Math.abs(position.z)) * Math.abs(r);\n      }\n      return target\n    }\n\n    /**\n     * Translate a point in world space to an x/y in the text plane.\n     */\n    worldPositionToTextCoords(position, target = new Vector2()) {\n      tempVec3a.copy(position);\n      return this.localPositionToTextCoords(this.worldToLocal(tempVec3a), target)\n    }\n\n    /**\n     * @override Custom raycasting to test against the whole text block's max rectangular bounds\n     * TODO is there any reason to make this more granular, like within individual line or glyph rects?\n     */\n    raycast(raycaster, intersects) {\n      const {textRenderInfo, curveRadius} = this;\n      if (textRenderInfo) {\n        const bounds = textRenderInfo.blockBounds;\n        const raycastMesh = curveRadius ? getCurvedRaycastMesh() : getFlatRaycastMesh();\n        const geom = raycastMesh.geometry;\n        const {position, uv} = geom.attributes;\n        for (let i = 0; i < uv.count; i++) {\n          let x = bounds[0] + (uv.getX(i) * (bounds[2] - bounds[0]));\n          const y = bounds[1] + (uv.getY(i) * (bounds[3] - bounds[1]));\n          let z = 0;\n          if (curveRadius) {\n            z = curveRadius - Math.cos(x / curveRadius) * curveRadius;\n            x = Math.sin(x / curveRadius) * curveRadius;\n          }\n          position.setXYZ(i, x, y, z);\n        }\n        geom.boundingSphere = this.geometry.boundingSphere;\n        geom.boundingBox = this.geometry.boundingBox;\n        raycastMesh.matrixWorld = this.matrixWorld;\n        raycastMesh.material.side = this.material.side;\n        tempArray.length = 0;\n        raycastMesh.raycast(raycaster, tempArray);\n        for (let i = 0; i < tempArray.length; i++) {\n          tempArray[i].object = this;\n          intersects.push(tempArray[i]);\n        }\n      }\n    }\n\n    copy(source) {\n      // Prevent copying the geometry reference so we don't end up sharing attributes between instances\n      const geom = this.geometry;\n      super.copy(source);\n      this.geometry = geom;\n\n      COPYABLE_PROPS.forEach(prop => {\n        this[prop] = source[prop];\n      });\n      return this\n    }\n\n    clone() {\n      return new this.constructor().copy(this)\n    }\n  }\n\n\n  // Create setters for properties that affect text layout:\n  SYNCABLE_PROPS.forEach(prop => {\n    const privateKey = '_private_' + prop;\n    Object.defineProperty(Text.prototype, prop, {\n      get() {\n        return this[privateKey]\n      },\n      set(value) {\n        if (value !== this[privateKey]) {\n          this[privateKey] = value;\n          this._needsSync = true;\n        }\n      }\n    });\n  });\n\n\n  // Deprecation handler for `anchor` array:\n  let deprMsgShown = false;\n  Object.defineProperty(Text.prototype, 'anchor', {\n    get() {\n      return this._deprecated_anchor\n    },\n    set(val) {\n      this._deprecated_anchor = val;\n      if (!deprMsgShown) {\n        console.warn('TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead.');\n        deprMsgShown = true;\n      }\n      if (Array.isArray(val)) {\n        this.anchorX = `${(+val[0] || 0) * 100}%`;\n        this.anchorY = `${(+val[1] || 0) * 100}%`;\n      } else {\n        this.anchorX = this.anchorY = 0;\n      }\n    }\n  });\n\n  return Text\n})();\n\n//=== Utility functions for dealing with carets and selection ranges ===//\n\n/**\n * @typedef {object} TextCaret\n * @property {number} x - x position of the caret\n * @property {number} y - y position of the caret's bottom\n * @property {number} height - height of the caret\n * @property {number} charIndex - the index in the original input string of this caret's target\n *   character; the caret will be for the position _before_ that character.\n */\n\n/**\n * Given a local x/y coordinate in the text block plane, find the nearest caret position.\n * @param {TroikaTextRenderInfo} textRenderInfo - a result object from TextBuilder#getTextRenderInfo\n * @param {number} x\n * @param {number} y\n * @return {TextCaret | null}\n */\nfunction getCaretAtPoint(textRenderInfo, x, y) {\n  let closestCaret = null;\n  const {caretHeight} = textRenderInfo;\n  const caretsByRow = groupCaretsByRow(textRenderInfo);\n\n  // Find nearest row by y first\n  let closestRowY = Infinity;\n  caretsByRow.forEach((carets, rowY) => {\n    if (Math.abs(y - (rowY + caretHeight / 2)) < Math.abs(y - (closestRowY + caretHeight / 2))) {\n      closestRowY = rowY;\n    }\n  });\n\n  // Then find closest caret by x within that row\n  caretsByRow.get(closestRowY).forEach(caret => {\n    if (!closestCaret || Math.abs(x - caret.x) < Math.abs(x - closestCaret.x)) {\n      closestCaret = caret;\n    }\n  });\n  return closestCaret\n}\n\n\nconst _rectsCache = new WeakMap();\n\n/**\n * Given start and end character indexes, return a list of rectangles covering all the\n * characters within that selection.\n * @param {TroikaTextRenderInfo} textRenderInfo\n * @param {number} start - index of the first char in the selection\n * @param {number} end - index of the first char after the selection\n * @return {Array<{left, top, right, bottom}> | null}\n */\nfunction getSelectionRects(textRenderInfo, start, end) {\n  let rects;\n  if (textRenderInfo) {\n    // Check cache - textRenderInfo is frozen so it's safe to cache based on it\n    let prevResult = _rectsCache.get(textRenderInfo);\n    if (prevResult && prevResult.start === start && prevResult.end === end) {\n      return prevResult.rects\n    }\n\n    const {caretPositions, caretHeight} = textRenderInfo;\n\n    // Normalize\n    if (end < start) {\n      const s = start;\n      start = end;\n      end = s;\n    }\n    start = Math.max(start, 0);\n    end = Math.min(end, caretPositions.length + 1);\n\n    // Build list of rects, expanding the current rect for all characters in a run and starting\n    // a new rect whenever reaching a new line or a new bidi direction\n    rects = [];\n    let currentRect = null;\n    for (let i = start; i < end; i++) {\n      const x1 = caretPositions[i * 3];\n      const x2 = caretPositions[i * 3 + 1];\n      const left = Math.min(x1, x2);\n      const right = Math.max(x1, x2);\n      const bottom = caretPositions[i * 3 + 2];\n      if (!currentRect || bottom !== currentRect.bottom || left > currentRect.right || right < currentRect.left) {\n        currentRect = {\n          left: Infinity,\n          right: -Infinity,\n          bottom: bottom,\n          top: bottom + caretHeight\n        };\n        rects.push(currentRect);\n      }\n      currentRect.left = Math.min(left, currentRect.left);\n      currentRect.right = Math.max(right, currentRect.right);\n    }\n\n    // Merge any overlapping rects, e.g. those formed by adjacent bidi runs\n    rects.sort((a, b) => b.bottom - a.bottom || a.left - b.left);\n    for (let i = rects.length - 1; i-- > 0;) {\n      const rectA = rects[i];\n      const rectB = rects[i + 1];\n      if (rectA.bottom === rectB.bottom && rectA.left <= rectB.right && rectA.right >= rectB.left) {\n        rectB.left = Math.min(rectB.left, rectA.left);\n        rectB.right = Math.max(rectB.right, rectA.right);\n        rects.splice(i, 1);\n      }\n    }\n\n    _rectsCache.set(textRenderInfo, {start, end, rects});\n  }\n  return rects\n}\n\nconst _caretsByRowCache = new WeakMap();\n\nfunction groupCaretsByRow(textRenderInfo) {\n  // textRenderInfo is frozen so it's safe to cache based on it\n  let caretsByRow = _caretsByRowCache.get(textRenderInfo);\n  if (!caretsByRow) {\n    const {caretPositions, caretHeight} = textRenderInfo;\n    caretsByRow = new Map();\n    for (let i = 0; i < caretPositions.length; i += 3) {\n      const rowY = caretPositions[i + 2];\n      let rowCarets = caretsByRow.get(rowY);\n      if (!rowCarets) {\n        caretsByRow.set(rowY, rowCarets = []);\n      }\n      rowCarets.push({\n        x: caretPositions[i],\n        y: rowY,\n        height: caretHeight,\n        charIndex: i / 3\n      });\n      // Add one more caret after the final char\n      if (i + 3 >= caretPositions.length) {\n        rowCarets.push({\n          x: caretPositions[i + 1],\n          y: rowY,\n          height: caretHeight,\n          charIndex: i / 3 + 1\n        });\n      }\n    }\n  }\n  _caretsByRowCache.set(textRenderInfo, caretsByRow);\n  return caretsByRow\n}\n\nexport { GlyphsGeometry, Text, configureTextBuilder, createTextDerivedMaterial, dumpSDFTextures, getCaretAtPoint, getSelectionRects, preloadFont, typesetterWorkerModule };\n","function bidiFactory() {\nvar bidi = (function (exports) {\n\n  // Bidi character types data, auto generated\n  var DATA = {\n    \"R\": \"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73\",\n    \"EN\": \"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9\",\n    \"ES\": \"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2\",\n    \"ET\": \"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj\",\n    \"AN\": \"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u\",\n    \"CS\": \"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b\",\n    \"B\": \"a,3,f+2,2v,690\",\n    \"S\": \"9,2,k\",\n    \"WS\": \"c,k,4f4,1vk+a,u,1j,335\",\n    \"ON\": \"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i\",\n    \"BN\": \"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1\",\n    \"NSM\": \"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n\",\n    \"AL\": \"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d\",\n    \"LRO\": \"6ct\",\n    \"RLO\": \"6cu\",\n    \"LRE\": \"6cq\",\n    \"RLE\": \"6cr\",\n    \"PDF\": \"6cs\",\n    \"LRI\": \"6ee\",\n    \"RLI\": \"6ef\",\n    \"FSI\": \"6eg\",\n    \"PDI\": \"6eh\"\n  };\n\n  var TYPES = {};\n  var TYPES_TO_NAMES = {};\n  TYPES.L = 1; //L is the default\n  TYPES_TO_NAMES[1] = 'L';\n  Object.keys(DATA).forEach(function (type, i) {\n    TYPES[type] = 1 << (i + 1);\n    TYPES_TO_NAMES[TYPES[type]] = type;\n  });\n  Object.freeze(TYPES);\n\n  var ISOLATE_INIT_TYPES = TYPES.LRI | TYPES.RLI | TYPES.FSI;\n  var STRONG_TYPES = TYPES.L | TYPES.R | TYPES.AL;\n  var NEUTRAL_ISOLATE_TYPES = TYPES.B | TYPES.S | TYPES.WS | TYPES.ON | TYPES.FSI | TYPES.LRI | TYPES.RLI | TYPES.PDI;\n  var BN_LIKE_TYPES = TYPES.BN | TYPES.RLE | TYPES.LRE | TYPES.RLO | TYPES.LRO | TYPES.PDF;\n  var TRAILING_TYPES = TYPES.S | TYPES.WS | TYPES.B | ISOLATE_INIT_TYPES | TYPES.PDI | BN_LIKE_TYPES;\n\n  var map = null;\n\n  function parseData () {\n    if (!map) {\n      //const start = performance.now()\n      map = new Map();\n      var loop = function ( type ) {\n        if (DATA.hasOwnProperty(type)) {\n          var lastCode = 0;\n          DATA[type].split(',').forEach(function (range) {\n            var ref = range.split('+');\n            var skip = ref[0];\n            var step = ref[1];\n            skip = parseInt(skip, 36);\n            step = step ? parseInt(step, 36) : 0;\n            map.set(lastCode += skip, TYPES[type]);\n            for (var i = 0; i < step; i++) {\n              map.set(++lastCode, TYPES[type]);\n            }\n          });\n        }\n      };\n\n      for (var type in DATA) loop( type );\n      //console.log(`char types parsed in ${performance.now() - start}ms`)\n    }\n  }\n\n  /**\n   * @param {string} char\n   * @return {number}\n   */\n  function getBidiCharType (char) {\n    parseData();\n    return map.get(char.codePointAt(0)) || TYPES.L\n  }\n\n  function getBidiCharTypeName(char) {\n    return TYPES_TO_NAMES[getBidiCharType(char)]\n  }\n\n  // Bidi bracket pairs data, auto generated\n  var data$1 = {\n    \"pairs\": \"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1\",\n    \"canonical\": \"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye\"\n  };\n\n  /**\n   * Parses an string that holds encoded codepoint mappings, e.g. for bracket pairs or\n   * mirroring characters, as encoded by scripts/generateBidiData.js. Returns an object\n   * holding the `map`, and optionally a `reverseMap` if `includeReverse:true`.\n   * @param {string} encodedString\n   * @param {boolean} includeReverse - true if you want reverseMap in the output\n   * @return {{map: Map<number, number>, reverseMap?: Map<number, number>}}\n   */\n  function parseCharacterMap (encodedString, includeReverse) {\n    var radix = 36;\n    var lastCode = 0;\n    var map = new Map();\n    var reverseMap = includeReverse && new Map();\n    var prevPair;\n    encodedString.split(',').forEach(function visit(entry) {\n      if (entry.indexOf('+') !== -1) {\n        for (var i = +entry; i--;) {\n          visit(prevPair);\n        }\n      } else {\n        prevPair = entry;\n        var ref = entry.split('>');\n        var a = ref[0];\n        var b = ref[1];\n        a = String.fromCodePoint(lastCode += parseInt(a, radix));\n        b = String.fromCodePoint(lastCode += parseInt(b, radix));\n        map.set(a, b);\n        includeReverse && reverseMap.set(b, a);\n      }\n    });\n    return { map: map, reverseMap: reverseMap }\n  }\n\n  var openToClose, closeToOpen, canonical;\n\n  function parse$1 () {\n    if (!openToClose) {\n      //const start = performance.now()\n      var ref = parseCharacterMap(data$1.pairs, true);\n      var map = ref.map;\n      var reverseMap = ref.reverseMap;\n      openToClose = map;\n      closeToOpen = reverseMap;\n      canonical = parseCharacterMap(data$1.canonical, false).map;\n      //console.log(`brackets parsed in ${performance.now() - start}ms`)\n    }\n  }\n\n  function openingToClosingBracket (char) {\n    parse$1();\n    return openToClose.get(char) || null\n  }\n\n  function closingToOpeningBracket (char) {\n    parse$1();\n    return closeToOpen.get(char) || null\n  }\n\n  function getCanonicalBracket (char) {\n    parse$1();\n    return canonical.get(char) || null\n  }\n\n  // Local type aliases\n  var TYPE_L = TYPES.L;\n  var TYPE_R = TYPES.R;\n  var TYPE_EN = TYPES.EN;\n  var TYPE_ES = TYPES.ES;\n  var TYPE_ET = TYPES.ET;\n  var TYPE_AN = TYPES.AN;\n  var TYPE_CS = TYPES.CS;\n  var TYPE_B = TYPES.B;\n  var TYPE_S = TYPES.S;\n  var TYPE_ON = TYPES.ON;\n  var TYPE_BN = TYPES.BN;\n  var TYPE_NSM = TYPES.NSM;\n  var TYPE_AL = TYPES.AL;\n  var TYPE_LRO = TYPES.LRO;\n  var TYPE_RLO = TYPES.RLO;\n  var TYPE_LRE = TYPES.LRE;\n  var TYPE_RLE = TYPES.RLE;\n  var TYPE_PDF = TYPES.PDF;\n  var TYPE_LRI = TYPES.LRI;\n  var TYPE_RLI = TYPES.RLI;\n  var TYPE_FSI = TYPES.FSI;\n  var TYPE_PDI = TYPES.PDI;\n\n  /**\n   * @typedef {object} GetEmbeddingLevelsResult\n   * @property {{start, end, level}[]} paragraphs\n   * @property {Uint8Array} levels\n   */\n\n  /**\n   * This function applies the Bidirectional Algorithm to a string, returning the resolved embedding levels\n   * in a single Uint8Array plus a list of objects holding each paragraph's start and end indices and resolved\n   * base embedding level.\n   *\n   * @param {string} string - The input string\n   * @param {\"ltr\"|\"rtl\"|\"auto\"} [baseDirection] - Use \"ltr\" or \"rtl\" to force a base paragraph direction,\n   *        otherwise a direction will be chosen automatically from each paragraph's contents.\n   * @return {GetEmbeddingLevelsResult}\n   */\n  function getEmbeddingLevels (string, baseDirection) {\n    var MAX_DEPTH = 125;\n\n    // Start by mapping all characters to their unicode type, as a bitmask integer\n    var charTypes = new Uint32Array(string.length);\n    for (var i = 0; i < string.length; i++) {\n      charTypes[i] = getBidiCharType(string[i]);\n    }\n\n    var charTypeCounts = new Map(); //will be cleared at start of each paragraph\n    function changeCharType(i, type) {\n      var oldType = charTypes[i];\n      charTypes[i] = type;\n      charTypeCounts.set(oldType, charTypeCounts.get(oldType) - 1);\n      if (oldType & NEUTRAL_ISOLATE_TYPES) {\n        charTypeCounts.set(NEUTRAL_ISOLATE_TYPES, charTypeCounts.get(NEUTRAL_ISOLATE_TYPES) - 1);\n      }\n      charTypeCounts.set(type, (charTypeCounts.get(type) || 0) + 1);\n      if (type & NEUTRAL_ISOLATE_TYPES) {\n        charTypeCounts.set(NEUTRAL_ISOLATE_TYPES, (charTypeCounts.get(NEUTRAL_ISOLATE_TYPES) || 0) + 1);\n      }\n    }\n\n    var embedLevels = new Uint8Array(string.length);\n    var isolationPairs = new Map(); //init->pdi and pdi->init\n\n    // === 3.3.1 The Paragraph Level ===\n    // 3.3.1 P1: Split the text into paragraphs\n    var paragraphs = []; // [{start, end, level}, ...]\n    var paragraph = null;\n    for (var i$1 = 0; i$1 < string.length; i$1++) {\n      if (!paragraph) {\n        paragraphs.push(paragraph = {\n          start: i$1,\n          end: string.length - 1,\n          // 3.3.1 P2-P3: Determine the paragraph level\n          level: baseDirection === 'rtl' ? 1 : baseDirection === 'ltr' ? 0 : determineAutoEmbedLevel(i$1, false)\n        });\n      }\n      if (charTypes[i$1] & TYPE_B) {\n        paragraph.end = i$1;\n        paragraph = null;\n      }\n    }\n\n    var FORMATTING_TYPES = TYPE_RLE | TYPE_LRE | TYPE_RLO | TYPE_LRO | ISOLATE_INIT_TYPES | TYPE_PDI | TYPE_PDF | TYPE_B;\n    var nextEven = function (n) { return n + ((n & 1) ? 1 : 2); };\n    var nextOdd = function (n) { return n + ((n & 1) ? 2 : 1); };\n\n    // Everything from here on will operate per paragraph.\n    for (var paraIdx = 0; paraIdx < paragraphs.length; paraIdx++) {\n      paragraph = paragraphs[paraIdx];\n      var statusStack = [{\n        _level: paragraph.level,\n        _override: 0, //0=neutral, 1=L, 2=R\n        _isolate: 0 //bool\n      }];\n      var stackTop = (void 0);\n      var overflowIsolateCount = 0;\n      var overflowEmbeddingCount = 0;\n      var validIsolateCount = 0;\n      charTypeCounts.clear();\n\n      // === 3.3.2 Explicit Levels and Directions ===\n      for (var i$2 = paragraph.start; i$2 <= paragraph.end; i$2++) {\n        var charType = charTypes[i$2];\n        stackTop = statusStack[statusStack.length - 1];\n\n        // Set initial counts\n        charTypeCounts.set(charType, (charTypeCounts.get(charType) || 0) + 1);\n        if (charType & NEUTRAL_ISOLATE_TYPES) {\n          charTypeCounts.set(NEUTRAL_ISOLATE_TYPES, (charTypeCounts.get(NEUTRAL_ISOLATE_TYPES) || 0) + 1);\n        }\n\n        // Explicit Embeddings: 3.3.2 X2 - X3\n        if (charType & FORMATTING_TYPES) { //prefilter all formatters\n          if (charType & (TYPE_RLE | TYPE_LRE)) {\n            embedLevels[i$2] = stackTop._level; // 5.2\n            var level = (charType === TYPE_RLE ? nextOdd : nextEven)(stackTop._level);\n            if (level <= MAX_DEPTH && !overflowIsolateCount && !overflowEmbeddingCount) {\n              statusStack.push({\n                _level: level,\n                _override: 0,\n                _isolate: 0\n              });\n            } else if (!overflowIsolateCount) {\n              overflowEmbeddingCount++;\n            }\n          }\n\n          // Explicit Overrides: 3.3.2 X4 - X5\n          else if (charType & (TYPE_RLO | TYPE_LRO)) {\n            embedLevels[i$2] = stackTop._level; // 5.2\n            var level$1 = (charType === TYPE_RLO ? nextOdd : nextEven)(stackTop._level);\n            if (level$1 <= MAX_DEPTH && !overflowIsolateCount && !overflowEmbeddingCount) {\n              statusStack.push({\n                _level: level$1,\n                _override: (charType & TYPE_RLO) ? TYPE_R : TYPE_L,\n                _isolate: 0\n              });\n            } else if (!overflowIsolateCount) {\n              overflowEmbeddingCount++;\n            }\n          }\n\n          // Isolates: 3.3.2 X5a - X5c\n          else if (charType & ISOLATE_INIT_TYPES) {\n            // X5c - FSI becomes either RLI or LRI\n            if (charType & TYPE_FSI) {\n              charType = determineAutoEmbedLevel(i$2 + 1, true) === 1 ? TYPE_RLI : TYPE_LRI;\n            }\n\n            embedLevels[i$2] = stackTop._level;\n            if (stackTop._override) {\n              changeCharType(i$2, stackTop._override);\n            }\n            var level$2 = (charType === TYPE_RLI ? nextOdd : nextEven)(stackTop._level);\n            if (level$2 <= MAX_DEPTH && overflowIsolateCount === 0 && overflowEmbeddingCount === 0) {\n              validIsolateCount++;\n              statusStack.push({\n                _level: level$2,\n                _override: 0,\n                _isolate: 1,\n                _isolInitIndex: i$2\n              });\n            } else {\n              overflowIsolateCount++;\n            }\n          }\n\n          // Terminating Isolates: 3.3.2 X6a\n          else if (charType & TYPE_PDI) {\n            if (overflowIsolateCount > 0) {\n              overflowIsolateCount--;\n            } else if (validIsolateCount > 0) {\n              overflowEmbeddingCount = 0;\n              while (!statusStack[statusStack.length - 1]._isolate) {\n                statusStack.pop();\n              }\n              // Add to isolation pairs bidirectional mapping:\n              var isolInitIndex = statusStack[statusStack.length - 1]._isolInitIndex;\n              if (isolInitIndex != null) {\n                isolationPairs.set(isolInitIndex, i$2);\n                isolationPairs.set(i$2, isolInitIndex);\n              }\n              statusStack.pop();\n              validIsolateCount--;\n            }\n            stackTop = statusStack[statusStack.length - 1];\n            embedLevels[i$2] = stackTop._level;\n            if (stackTop._override) {\n              changeCharType(i$2, stackTop._override);\n            }\n          }\n\n\n          // Terminating Embeddings and Overrides: 3.3.2 X7\n          else if (charType & TYPE_PDF) {\n            if (overflowIsolateCount === 0) {\n              if (overflowEmbeddingCount > 0) {\n                overflowEmbeddingCount--;\n              } else if (!stackTop._isolate && statusStack.length > 1) {\n                statusStack.pop();\n                stackTop = statusStack[statusStack.length - 1];\n              }\n            }\n            embedLevels[i$2] = stackTop._level; // 5.2\n          }\n\n          // End of Paragraph: 3.3.2 X8\n          else if (charType & TYPE_B) {\n            embedLevels[i$2] = paragraph.level;\n          }\n        }\n\n        // Non-formatting characters: 3.3.2 X6\n        else {\n          embedLevels[i$2] = stackTop._level;\n          // NOTE: This exclusion of BN seems to go against what section 5.2 says, but is required for test passage\n          if (stackTop._override && charType !== TYPE_BN) {\n            changeCharType(i$2, stackTop._override);\n          }\n        }\n      }\n\n      // === 3.3.3 Preparations for Implicit Processing ===\n\n      // Remove all RLE, LRE, RLO, LRO, PDF, and BN characters: 3.3.3 X9\n      // Note: Due to section 5.2, we won't remove them, but we'll use the BN_LIKE_TYPES bitset to\n      // easily ignore them all from here on out.\n\n      // 3.3.3 X10\n      // Compute the set of isolating run sequences as specified by BD13\n      var levelRuns = [];\n      var currentRun = null;\n      for (var i$3 = paragraph.start; i$3 <= paragraph.end; i$3++) {\n        var charType$1 = charTypes[i$3];\n        if (!(charType$1 & BN_LIKE_TYPES)) {\n          var lvl = embedLevels[i$3];\n          var isIsolInit = charType$1 & ISOLATE_INIT_TYPES;\n          var isPDI = charType$1 === TYPE_PDI;\n          if (currentRun && lvl === currentRun._level) {\n            currentRun._end = i$3;\n            currentRun._endsWithIsolInit = isIsolInit;\n          } else {\n            levelRuns.push(currentRun = {\n              _start: i$3,\n              _end: i$3,\n              _level: lvl,\n              _startsWithPDI: isPDI,\n              _endsWithIsolInit: isIsolInit\n            });\n          }\n        }\n      }\n      var isolatingRunSeqs = []; // [{seqIndices: [], sosType: L|R, eosType: L|R}]\n      for (var runIdx = 0; runIdx < levelRuns.length; runIdx++) {\n        var run = levelRuns[runIdx];\n        if (!run._startsWithPDI || (run._startsWithPDI && !isolationPairs.has(run._start))) {\n          var seqRuns = [currentRun = run];\n          for (var pdiIndex = (void 0); currentRun && currentRun._endsWithIsolInit && (pdiIndex = isolationPairs.get(currentRun._end)) != null;) {\n            for (var i$4 = runIdx + 1; i$4 < levelRuns.length; i$4++) {\n              if (levelRuns[i$4]._start === pdiIndex) {\n                seqRuns.push(currentRun = levelRuns[i$4]);\n                break\n              }\n            }\n          }\n          // build flat list of indices across all runs:\n          var seqIndices = [];\n          for (var i$5 = 0; i$5 < seqRuns.length; i$5++) {\n            var run$1 = seqRuns[i$5];\n            for (var j = run$1._start; j <= run$1._end; j++) {\n              seqIndices.push(j);\n            }\n          }\n          // determine the sos/eos types:\n          var firstLevel = embedLevels[seqIndices[0]];\n          var prevLevel = paragraph.level;\n          for (var i$6 = seqIndices[0] - 1; i$6 >= 0; i$6--) {\n            if (!(charTypes[i$6] & BN_LIKE_TYPES)) { //5.2\n              prevLevel = embedLevels[i$6];\n              break\n            }\n          }\n          var lastIndex = seqIndices[seqIndices.length - 1];\n          var lastLevel = embedLevels[lastIndex];\n          var nextLevel = paragraph.level;\n          if (!(charTypes[lastIndex] & ISOLATE_INIT_TYPES)) {\n            for (var i$7 = lastIndex + 1; i$7 <= paragraph.end; i$7++) {\n              if (!(charTypes[i$7] & BN_LIKE_TYPES)) { //5.2\n                nextLevel = embedLevels[i$7];\n                break\n              }\n            }\n          }\n          isolatingRunSeqs.push({\n            _seqIndices: seqIndices,\n            _sosType: Math.max(prevLevel, firstLevel) % 2 ? TYPE_R : TYPE_L,\n            _eosType: Math.max(nextLevel, lastLevel) % 2 ? TYPE_R : TYPE_L\n          });\n        }\n      }\n\n      // The next steps are done per isolating run sequence\n      for (var seqIdx = 0; seqIdx < isolatingRunSeqs.length; seqIdx++) {\n        var ref = isolatingRunSeqs[seqIdx];\n        var seqIndices$1 = ref._seqIndices;\n        var sosType = ref._sosType;\n        var eosType = ref._eosType;\n\n        // === 3.3.4 Resolving Weak Types ===\n\n        // W1 + 5.2. Search backward from each NSM to the first character in the isolating run sequence whose\n        // bidirectional type is not BN, and set the NSM to ON if it is an isolate initiator or PDI, and to its\n        // type otherwise. If the NSM is the first non-BN character, change the NSM to the type of sos.\n        if (charTypeCounts.get(TYPE_NSM)) {\n          for (var si = 0; si < seqIndices$1.length; si++) {\n            var i$8 = seqIndices$1[si];\n            if (charTypes[i$8] & TYPE_NSM) {\n              var prevType = sosType;\n              for (var sj = si - 1; sj >= 0; sj--) {\n                if (!(charTypes[seqIndices$1[sj]] & BN_LIKE_TYPES)) { //5.2 scan back to first non-BN\n                  prevType = charTypes[seqIndices$1[sj]];\n                  break\n                }\n              }\n              changeCharType(i$8, (prevType & (ISOLATE_INIT_TYPES | TYPE_PDI)) ? TYPE_ON : prevType);\n            }\n          }\n        }\n\n        // W2. Search backward from each instance of a European number until the first strong type (R, L, AL, or sos)\n        // is found. If an AL is found, change the type of the European number to Arabic number.\n        if (charTypeCounts.get(TYPE_EN)) {\n          for (var si$1 = 0; si$1 < seqIndices$1.length; si$1++) {\n            var i$9 = seqIndices$1[si$1];\n            if (charTypes[i$9] & TYPE_EN) {\n              for (var sj$1 = si$1 - 1; sj$1 >= -1; sj$1--) {\n                var prevCharType = sj$1 === -1 ? sosType : charTypes[seqIndices$1[sj$1]];\n                if (prevCharType & STRONG_TYPES) {\n                  if (prevCharType === TYPE_AL) {\n                    changeCharType(i$9, TYPE_AN);\n                  }\n                  break\n                }\n              }\n            }\n          }\n        }\n\n        // W3. Change all ALs to R\n        if (charTypeCounts.get(TYPE_AL)) {\n          for (var si$2 = 0; si$2 < seqIndices$1.length; si$2++) {\n            var i$10 = seqIndices$1[si$2];\n            if (charTypes[i$10] & TYPE_AL) {\n              changeCharType(i$10, TYPE_R);\n            }\n          }\n        }\n\n        // W4. A single European separator between two European numbers changes to a European number. A single common\n        // separator between two numbers of the same type changes to that type.\n        if (charTypeCounts.get(TYPE_ES) || charTypeCounts.get(TYPE_CS)) {\n          for (var si$3 = 1; si$3 < seqIndices$1.length - 1; si$3++) {\n            var i$11 = seqIndices$1[si$3];\n            if (charTypes[i$11] & (TYPE_ES | TYPE_CS)) {\n              var prevType$1 = 0, nextType = 0;\n              for (var sj$2 = si$3 - 1; sj$2 >= 0; sj$2--) {\n                prevType$1 = charTypes[seqIndices$1[sj$2]];\n                if (!(prevType$1 & BN_LIKE_TYPES)) { //5.2\n                  break\n                }\n              }\n              for (var sj$3 = si$3 + 1; sj$3 < seqIndices$1.length; sj$3++) {\n                nextType = charTypes[seqIndices$1[sj$3]];\n                if (!(nextType & BN_LIKE_TYPES)) { //5.2\n                  break\n                }\n              }\n              if (prevType$1 === nextType && (charTypes[i$11] === TYPE_ES ? prevType$1 === TYPE_EN : (prevType$1 & (TYPE_EN | TYPE_AN)))) {\n                changeCharType(i$11, prevType$1);\n              }\n            }\n          }\n        }\n\n        // W5. A sequence of European terminators adjacent to European numbers changes to all European numbers.\n        if (charTypeCounts.get(TYPE_EN)) {\n          for (var si$4 = 0; si$4 < seqIndices$1.length; si$4++) {\n            var i$12 = seqIndices$1[si$4];\n            if (charTypes[i$12] & TYPE_EN) {\n              for (var sj$4 = si$4 - 1; sj$4 >= 0 && (charTypes[seqIndices$1[sj$4]] & (TYPE_ET | BN_LIKE_TYPES)); sj$4--) {\n                changeCharType(seqIndices$1[sj$4], TYPE_EN);\n              }\n              for (var sj$5 = si$4 + 1; sj$5 < seqIndices$1.length && (charTypes[seqIndices$1[sj$5]] & (TYPE_ET | BN_LIKE_TYPES)); sj$5++) {\n                changeCharType(seqIndices$1[sj$5], TYPE_EN);\n              }\n            }\n          }\n        }\n\n        // W6. Otherwise, separators and terminators change to Other Neutral.\n        if (charTypeCounts.get(TYPE_ET) || charTypeCounts.get(TYPE_ES) || charTypeCounts.get(TYPE_CS)) {\n          for (var si$5 = 0; si$5 < seqIndices$1.length; si$5++) {\n            var i$13 = seqIndices$1[si$5];\n            if (charTypes[i$13] & (TYPE_ET | TYPE_ES | TYPE_CS)) {\n              changeCharType(i$13, TYPE_ON);\n              // 5.2 transform adjacent BNs too:\n              for (var sj$6 = si$5 - 1; sj$6 >= 0 && (charTypes[seqIndices$1[sj$6]] & BN_LIKE_TYPES); sj$6--) {\n                changeCharType(seqIndices$1[sj$6], TYPE_ON);\n              }\n              for (var sj$7 = si$5 + 1; sj$7 < seqIndices$1.length && (charTypes[seqIndices$1[sj$7]] & BN_LIKE_TYPES); sj$7++) {\n                changeCharType(seqIndices$1[sj$7], TYPE_ON);\n              }\n            }\n          }\n        }\n\n        // W7. Search backward from each instance of a European number until the first strong type (R, L, or sos)\n        // is found. If an L is found, then change the type of the European number to L.\n        // NOTE: implemented in single forward pass for efficiency\n        if (charTypeCounts.get(TYPE_EN)) {\n          for (var si$6 = 0, prevStrongType = sosType; si$6 < seqIndices$1.length; si$6++) {\n            var i$14 = seqIndices$1[si$6];\n            var type = charTypes[i$14];\n            if (type & TYPE_EN) {\n              if (prevStrongType === TYPE_L) {\n                changeCharType(i$14, TYPE_L);\n              }\n            } else if (type & STRONG_TYPES) {\n              prevStrongType = type;\n            }\n          }\n        }\n\n        // === 3.3.5 Resolving Neutral and Isolate Formatting Types ===\n\n        if (charTypeCounts.get(NEUTRAL_ISOLATE_TYPES)) {\n          // N0. Process bracket pairs in an isolating run sequence sequentially in the logical order of the text\n          // positions of the opening paired brackets using the logic given below. Within this scope, bidirectional\n          // types EN and AN are treated as R.\n          var R_TYPES_FOR_N_STEPS = (TYPE_R | TYPE_EN | TYPE_AN);\n          var STRONG_TYPES_FOR_N_STEPS = R_TYPES_FOR_N_STEPS | TYPE_L;\n\n          // * Identify the bracket pairs in the current isolating run sequence according to BD16.\n          var bracketPairs = [];\n          {\n            var openerStack = [];\n            for (var si$7 = 0; si$7 < seqIndices$1.length; si$7++) {\n              // NOTE: for any potential bracket character we also test that it still carries a NI\n              // type, as that may have been changed earlier. This doesn't seem to be explicitly\n              // called out in the spec, but is required for passage of certain tests.\n              if (charTypes[seqIndices$1[si$7]] & NEUTRAL_ISOLATE_TYPES) {\n                var char = string[seqIndices$1[si$7]];\n                var oppositeBracket = (void 0);\n                // Opening bracket\n                if (openingToClosingBracket(char) !== null) {\n                  if (openerStack.length < 63) {\n                    openerStack.push({ char: char, seqIndex: si$7 });\n                  } else {\n                    break\n                  }\n                }\n                // Closing bracket\n                else if ((oppositeBracket = closingToOpeningBracket(char)) !== null) {\n                  for (var stackIdx = openerStack.length - 1; stackIdx >= 0; stackIdx--) {\n                    var stackChar = openerStack[stackIdx].char;\n                    if (stackChar === oppositeBracket ||\n                      stackChar === closingToOpeningBracket(getCanonicalBracket(char)) ||\n                      openingToClosingBracket(getCanonicalBracket(stackChar)) === char\n                    ) {\n                      bracketPairs.push([openerStack[stackIdx].seqIndex, si$7]);\n                      openerStack.length = stackIdx; //pop the matching bracket and all following\n                      break\n                    }\n                  }\n                }\n              }\n            }\n            bracketPairs.sort(function (a, b) { return a[0] - b[0]; });\n          }\n          // * For each bracket-pair element in the list of pairs of text positions\n          for (var pairIdx = 0; pairIdx < bracketPairs.length; pairIdx++) {\n            var ref$1 = bracketPairs[pairIdx];\n            var openSeqIdx = ref$1[0];\n            var closeSeqIdx = ref$1[1];\n            // a. Inspect the bidirectional types of the characters enclosed within the bracket pair.\n            // b. If any strong type (either L or R) matching the embedding direction is found, set the type for both\n            // brackets in the pair to match the embedding direction.\n            var foundStrongType = false;\n            var useStrongType = 0;\n            for (var si$8 = openSeqIdx + 1; si$8 < closeSeqIdx; si$8++) {\n              var i$15 = seqIndices$1[si$8];\n              if (charTypes[i$15] & STRONG_TYPES_FOR_N_STEPS) {\n                foundStrongType = true;\n                var lr = (charTypes[i$15] & R_TYPES_FOR_N_STEPS) ? TYPE_R : TYPE_L;\n                if (lr === getEmbedDirection(i$15)) {\n                  useStrongType = lr;\n                  break\n                }\n              }\n            }\n            // c. Otherwise, if there is a strong type it must be opposite the embedding direction. Therefore, test\n            // for an established context with a preceding strong type by checking backwards before the opening paired\n            // bracket until the first strong type (L, R, or sos) is found.\n            //    1. If the preceding strong type is also opposite the embedding direction, context is established, so\n            //    set the type for both brackets in the pair to that direction.\n            //    2. Otherwise set the type for both brackets in the pair to the embedding direction.\n            if (foundStrongType && !useStrongType) {\n              useStrongType = sosType;\n              for (var si$9 = openSeqIdx - 1; si$9 >= 0; si$9--) {\n                var i$16 = seqIndices$1[si$9];\n                if (charTypes[i$16] & STRONG_TYPES_FOR_N_STEPS) {\n                  var lr$1 = (charTypes[i$16] & R_TYPES_FOR_N_STEPS) ? TYPE_R : TYPE_L;\n                  if (lr$1 !== getEmbedDirection(i$16)) {\n                    useStrongType = lr$1;\n                  } else {\n                    useStrongType = getEmbedDirection(i$16);\n                  }\n                  break\n                }\n              }\n            }\n            if (useStrongType) {\n              charTypes[seqIndices$1[openSeqIdx]] = charTypes[seqIndices$1[closeSeqIdx]] = useStrongType;\n              // * Any number of characters that had original bidirectional character type NSM prior to the application\n              // of W1 that immediately follow a paired bracket which changed to L or R under N0 should change to match\n              // the type of their preceding bracket.\n              if (useStrongType !== getEmbedDirection(seqIndices$1[openSeqIdx])) {\n                for (var si$10 = openSeqIdx + 1; si$10 < seqIndices$1.length; si$10++) {\n                  if (!(charTypes[seqIndices$1[si$10]] & BN_LIKE_TYPES)) {\n                    if (getBidiCharType(string[seqIndices$1[si$10]]) & TYPE_NSM) {\n                      charTypes[seqIndices$1[si$10]] = useStrongType;\n                    }\n                    break\n                  }\n                }\n              }\n              if (useStrongType !== getEmbedDirection(seqIndices$1[closeSeqIdx])) {\n                for (var si$11 = closeSeqIdx + 1; si$11 < seqIndices$1.length; si$11++) {\n                  if (!(charTypes[seqIndices$1[si$11]] & BN_LIKE_TYPES)) {\n                    if (getBidiCharType(string[seqIndices$1[si$11]]) & TYPE_NSM) {\n                      charTypes[seqIndices$1[si$11]] = useStrongType;\n                    }\n                    break\n                  }\n                }\n              }\n            }\n          }\n\n          // N1. A sequence of NIs takes the direction of the surrounding strong text if the text on both sides has the\n          // same direction.\n          // N2. Any remaining NIs take the embedding direction.\n          for (var si$12 = 0; si$12 < seqIndices$1.length; si$12++) {\n            if (charTypes[seqIndices$1[si$12]] & NEUTRAL_ISOLATE_TYPES) {\n              var niRunStart = si$12, niRunEnd = si$12;\n              var prevType$2 = sosType; //si === 0 ? sosType : (charTypes[seqIndices[si - 1]] & R_TYPES_FOR_N_STEPS) ? TYPE_R : TYPE_L\n              for (var si2 = si$12 - 1; si2 >= 0; si2--) {\n                if (charTypes[seqIndices$1[si2]] & BN_LIKE_TYPES) {\n                  niRunStart = si2; //5.2 treat BNs adjacent to NIs as NIs\n                } else {\n                  prevType$2 = (charTypes[seqIndices$1[si2]] & R_TYPES_FOR_N_STEPS) ? TYPE_R : TYPE_L;\n                  break\n                }\n              }\n              var nextType$1 = eosType;\n              for (var si2$1 = si$12 + 1; si2$1 < seqIndices$1.length; si2$1++) {\n                if (charTypes[seqIndices$1[si2$1]] & (NEUTRAL_ISOLATE_TYPES | BN_LIKE_TYPES)) {\n                  niRunEnd = si2$1;\n                } else {\n                  nextType$1 = (charTypes[seqIndices$1[si2$1]] & R_TYPES_FOR_N_STEPS) ? TYPE_R : TYPE_L;\n                  break\n                }\n              }\n              for (var sj$8 = niRunStart; sj$8 <= niRunEnd; sj$8++) {\n                charTypes[seqIndices$1[sj$8]] = prevType$2 === nextType$1 ? prevType$2 : getEmbedDirection(seqIndices$1[sj$8]);\n              }\n              si$12 = niRunEnd;\n            }\n          }\n        }\n      }\n\n      // === 3.3.6 Resolving Implicit Levels ===\n\n      for (var i$17 = paragraph.start; i$17 <= paragraph.end; i$17++) {\n        var level$3 = embedLevels[i$17];\n        var type$1 = charTypes[i$17];\n        // I2. For all characters with an odd (right-to-left) embedding level, those of type L, EN or AN go up one level.\n        if (level$3 & 1) {\n          if (type$1 & (TYPE_L | TYPE_EN | TYPE_AN)) {\n            embedLevels[i$17]++;\n          }\n        }\n          // I1. For all characters with an even (left-to-right) embedding level, those of type R go up one level\n        // and those of type AN or EN go up two levels.\n        else {\n          if (type$1 & TYPE_R) {\n            embedLevels[i$17]++;\n          } else if (type$1 & (TYPE_AN | TYPE_EN)) {\n            embedLevels[i$17] += 2;\n          }\n        }\n\n        // 5.2: Resolve any LRE, RLE, LRO, RLO, PDF, or BN to the level of the preceding character if there is one,\n        // and otherwise to the base level.\n        if (type$1 & BN_LIKE_TYPES) {\n          embedLevels[i$17] = i$17 === 0 ? paragraph.level : embedLevels[i$17 - 1];\n        }\n\n        // 3.4 L1.1-4: Reset the embedding level of segment/paragraph separators, and any sequence of whitespace or\n        // isolate formatting characters preceding them or the end of the paragraph, to the paragraph level.\n        // NOTE: this will also need to be applied to each individual line ending after line wrapping occurs.\n        if (i$17 === paragraph.end || getBidiCharType(string[i$17]) & (TYPE_S | TYPE_B)) {\n          for (var j$1 = i$17; j$1 >= 0 && (getBidiCharType(string[j$1]) & TRAILING_TYPES); j$1--) {\n            embedLevels[j$1] = paragraph.level;\n          }\n        }\n      }\n    }\n\n    // DONE! The resolved levels can then be used, after line wrapping, to flip runs of characters\n    // according to section 3.4 Reordering Resolved Levels\n    return {\n      levels: embedLevels,\n      paragraphs: paragraphs\n    }\n\n    function determineAutoEmbedLevel (start, isFSI) {\n      // 3.3.1 P2 - P3\n      for (var i = start; i < string.length; i++) {\n        var charType = charTypes[i];\n        if (charType & (TYPE_R | TYPE_AL)) {\n          return 1\n        }\n        if ((charType & (TYPE_B | TYPE_L)) || (isFSI && charType === TYPE_PDI)) {\n          return 0\n        }\n        if (charType & ISOLATE_INIT_TYPES) {\n          var pdi = indexOfMatchingPDI(i);\n          i = pdi === -1 ? string.length : pdi;\n        }\n      }\n      return 0\n    }\n\n    function indexOfMatchingPDI (isolateStart) {\n      // 3.1.2 BD9\n      var isolationLevel = 1;\n      for (var i = isolateStart + 1; i < string.length; i++) {\n        var charType = charTypes[i];\n        if (charType & TYPE_B) {\n          break\n        }\n        if (charType & TYPE_PDI) {\n          if (--isolationLevel === 0) {\n            return i\n          }\n        } else if (charType & ISOLATE_INIT_TYPES) {\n          isolationLevel++;\n        }\n      }\n      return -1\n    }\n\n    function getEmbedDirection (i) {\n      return (embedLevels[i] & 1) ? TYPE_R : TYPE_L\n    }\n\n  }\n\n  // Bidi mirrored chars data, auto generated\n  var data = \"14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1\";\n\n  var mirrorMap;\n\n  function parse () {\n    if (!mirrorMap) {\n      //const start = performance.now()\n      var ref = parseCharacterMap(data, true);\n      var map = ref.map;\n      var reverseMap = ref.reverseMap;\n      // Combine both maps into one\n      reverseMap.forEach(function (value, key) {\n        map.set(key, value);\n      });\n      mirrorMap = map;\n      //console.log(`mirrored chars parsed in ${performance.now() - start}ms`)\n    }\n  }\n\n  function getMirroredCharacter (char) {\n    parse();\n    return mirrorMap.get(char) || null\n  }\n\n  /**\n   * Given a string and its resolved embedding levels, build a map of indices to replacement chars\n   * for any characters in right-to-left segments that have defined mirrored characters.\n   * @param string\n   * @param embeddingLevels\n   * @param [start]\n   * @param [end]\n   * @return {Map<number, string>}\n   */\n  function getMirroredCharactersMap(string, embeddingLevels, start, end) {\n    var strLen = string.length;\n    start = Math.max(0, start == null ? 0 : +start);\n    end = Math.min(strLen - 1, end == null ? strLen - 1 : +end);\n\n    var map = new Map();\n    for (var i = start; i <= end; i++) {\n      if (embeddingLevels[i] & 1) { //only odd (rtl) levels\n        var mirror = getMirroredCharacter(string[i]);\n        if (mirror !== null) {\n          map.set(i, mirror);\n        }\n      }\n    }\n    return map\n  }\n\n  /**\n   * Given a start and end denoting a single line within a string, and a set of precalculated\n   * bidi embedding levels, produce a list of segments whose ordering should be flipped, in sequence.\n   * @param {string} string - the full input string\n   * @param {GetEmbeddingLevelsResult} embeddingLevelsResult - the result object from getEmbeddingLevels\n   * @param {number} [start] - first character in a subset of the full string\n   * @param {number} [end] - last character in a subset of the full string\n   * @return {number[][]} - the list of start/end segments that should be flipped, in order.\n   */\n  function getReorderSegments(string, embeddingLevelsResult, start, end) {\n    var strLen = string.length;\n    start = Math.max(0, start == null ? 0 : +start);\n    end = Math.min(strLen - 1, end == null ? strLen - 1 : +end);\n\n    var segments = [];\n    embeddingLevelsResult.paragraphs.forEach(function (paragraph) {\n      var lineStart = Math.max(start, paragraph.start);\n      var lineEnd = Math.min(end, paragraph.end);\n      if (lineStart < lineEnd) {\n        // Local slice for mutation\n        var lineLevels = embeddingLevelsResult.levels.slice(lineStart, lineEnd + 1);\n\n        // 3.4 L1.4: Reset any sequence of whitespace characters and/or isolate formatting characters at the\n        // end of the line to the paragraph level.\n        for (var i = lineEnd; i >= lineStart && (getBidiCharType(string[i]) & TRAILING_TYPES); i--) {\n          lineLevels[i] = paragraph.level;\n        }\n\n        // L2. From the highest level found in the text to the lowest odd level on each line, including intermediate levels\n        // not actually present in the text, reverse any contiguous sequence of characters that are at that level or higher.\n        var maxLevel = paragraph.level;\n        var minOddLevel = Infinity;\n        for (var i$1 = 0; i$1 < lineLevels.length; i$1++) {\n          var level = lineLevels[i$1];\n          if (level > maxLevel) { maxLevel = level; }\n          if (level < minOddLevel) { minOddLevel = level | 1; }\n        }\n        for (var lvl = maxLevel; lvl >= minOddLevel; lvl--) {\n          for (var i$2 = 0; i$2 < lineLevels.length; i$2++) {\n            if (lineLevels[i$2] >= lvl) {\n              var segStart = i$2;\n              while (i$2 + 1 < lineLevels.length && lineLevels[i$2 + 1] >= lvl) {\n                i$2++;\n              }\n              if (i$2 > segStart) {\n                segments.push([segStart + start, i$2 + start]);\n              }\n            }\n          }\n        }\n      }\n    });\n    return segments\n  }\n\n  /**\n   * @param {string} string\n   * @param {GetEmbeddingLevelsResult} embedLevelsResult\n   * @param {number} [start]\n   * @param {number} [end]\n   * @return {string} the new string with bidi segments reordered\n   */\n  function getReorderedString(string, embedLevelsResult, start, end) {\n    var indices = getReorderedIndices(string, embedLevelsResult, start, end);\n    var chars = [].concat( string );\n    indices.forEach(function (charIndex, i) {\n      chars[i] = (\n        (embedLevelsResult.levels[charIndex] & 1) ? getMirroredCharacter(string[charIndex]) : null\n      ) || string[charIndex];\n    });\n    return chars.join('')\n  }\n\n  /**\n   * @param {string} string\n   * @param {GetEmbeddingLevelsResult} embedLevelsResult\n   * @param {number} [start]\n   * @param {number} [end]\n   * @return {number[]} an array with character indices in their new bidi order\n   */\n  function getReorderedIndices(string, embedLevelsResult, start, end) {\n    var segments = getReorderSegments(string, embedLevelsResult, start, end);\n    // Fill an array with indices\n    var indices = [];\n    for (var i = 0; i < string.length; i++) {\n      indices[i] = i;\n    }\n    // Reverse each segment in order\n    segments.forEach(function (ref) {\n      var start = ref[0];\n      var end = ref[1];\n\n      var slice = indices.slice(start, end + 1);\n      for (var i = slice.length; i--;) {\n        indices[end - i] = slice[i];\n      }\n    });\n    return indices\n  }\n\n  exports.closingToOpeningBracket = closingToOpeningBracket;\n  exports.getBidiCharType = getBidiCharType;\n  exports.getBidiCharTypeName = getBidiCharTypeName;\n  exports.getCanonicalBracket = getCanonicalBracket;\n  exports.getEmbeddingLevels = getEmbeddingLevels;\n  exports.getMirroredCharacter = getMirroredCharacter;\n  exports.getMirroredCharactersMap = getMirroredCharactersMap;\n  exports.getReorderSegments = getReorderSegments;\n  exports.getReorderedIndices = getReorderedIndices;\n  exports.getReorderedString = getReorderedString;\n  exports.openingToClosingBracket = openingToClosingBracket;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n}({}));\nreturn bidi}\n\nexport default bidiFactory;\n","// This is based largely on: @lojjic https://github.com/lojjic/aframe-troika-text/blob/master/src/aframe-troika-text-component.js\n// but has been made functional and restyled for Mozilla Hubs (hubs.mozilla.com)\n// by @jamesckane at Paradowski Creative (paradowski.com)\n\nimport { Text } from \"troika-three-text\";\n\n// Mark this type of object so we can filter in from our shader patching\nText.prototype.isTroikaText = true;\n\nconst THREE_SIDES = {\n  front: THREE.FrontSide,\n  back: THREE.BackSide,\n  double: THREE.DoubleSide\n};\n\nfunction numberOrPercent(defaultValue) {\n  return {\n    default: defaultValue,\n    parse: function(value) {\n      if (typeof value === \"string\" && value.indexOf(\"%\") > 0) {\n        return value;\n      }\n      value = +value;\n      return isNaN(value) ? 0 : value;\n    },\n    stringify: function(value) {\n      return \"\" + value;\n    }\n  };\n}\n\nAFRAME.registerComponent(\"text\", {\n  schema: {\n    textAlign: { type: \"string\", default: \"left\", oneOf: [\"left\", \"right\", \"center\", \"justify\"] },\n    anchorX: { default: \"center\", oneOf: [\"left\", \"right\", \"center\"] },\n    anchorY: { default: \"middle\", oneOf: [\"top\", \"top-baseline\", \"middle\", \"bottom-baseline\", \"bottom\"] },\n    clipRect: {\n      type: \"string\",\n      default: \"\",\n      parse: function(value) {\n        if (value) {\n          value = value.split(/[\\s,]+/).reduce(function(out, val) {\n            val = +val;\n            if (!isNaN(val)) {\n              out.push(val);\n            }\n            return out;\n          }, []);\n        }\n        return value && value.length === 4 ? value : null;\n      },\n      stringify: function(value) {\n        return value ? value.join(\" \") : \"\";\n      }\n    },\n    color: { type: \"color\", default: \"#FFF\" },\n    curveRadius: { type: \"number\", default: 0 },\n    depthOffset: { type: \"number\", default: 0 },\n    direction: { type: \"string\", default: \"auto\", oneOf: [\"auto\", \"ltr\", \"rtl\"] },\n    fillOpacity: { type: \"number\", default: 1 },\n    // {type:\"string\"},\n    // This is different from the Troika preoperty name, Using \"fontUrl\" to prevent conflict with previous \"font\" property and to allow us to make named fonts later\n    fontUrl: { \n      type: \"string\",\n      default : \"https://cdn.jsdelivr.net/gh/spoqa/spoqa-han-sans@latest/Subset/SpoqaHanSansNeo/SpoqaHanSansNeo-Regular.woff\"\n    },\n    // This default value differs from the Troika default of 0.1, it most closely matches the size of our previous text component.\n    fontSize: { type: \"number\", default: 0.075 },\n    letterSpacing: { type: \"number\", default: 0 },\n    lineHeight: { type: \"number\" },\n    maxWidth: { type: \"number\", default: Infinity },\n    outlineBlur: numberOrPercent(0),\n    outlineColor: { type: \"color\", default: \"#000\" },\n    outlineOffsetX: numberOrPercent(0),\n    outlineOffsetY: numberOrPercent(0),\n    outlineOpacity: { type: \"number\", default: 1 },\n    outlineWidth: numberOrPercent(0),\n    overflowWrap: { type: \"string\", default: \"normal\", oneOf: [\"normal\", \"break-word\"] },\n    strokeColor: { type: \"color\", default: \"grey\" },\n    strokeOpacity: { type: \"number\", default: 1 },\n    strokeWidth: numberOrPercent(0),\n    // Note this is different than the Troika property name, Using \"value\" instead of \"text\" here to prevent code changes.\n    value: { type: \"string\", default: \"\" },\n    textIndent: { type: \"number\", default: 0 },\n    whiteSpace: { default: \"normal\", oneOf: [\"normal\", \"nowrap\"] },\n    opacity: { type: \"number\", default: 1.0 },\n    side: { default: \"front\", oneOf: [\"front\", \"back\", \"double\"] }\n  },\n\n  /**\n   * Called once when component is attached for initial setup.\n   */\n  init: function() {\n    this.troikaTextMesh = new Text();\n    this.troikaTextMesh.material.toneMapped = false;\n    this.el.setObject3D(\"text\", this.troikaTextMesh);\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function() {\n    const data = this.data;\n    const mesh = this.troikaTextMesh;\n\n    // Update the text mesh\n    mesh.text = data.value || \"\";\n    mesh.textAlign = data.textAlign;\n    mesh.anchorX = data.anchorX;\n    mesh.anchorY = data.anchorY;\n    mesh.color = data.color;\n    mesh.material.side = THREE_SIDES[data.side];\n    mesh.material.opacity = data.opacity;\n    mesh.curveRadius = data.curveRadius;\n    mesh.depthOffset = data.depthOffset || 0;\n    mesh.direction = data.direction;\n    mesh.fillOpacity = data.fillOpacity;\n    mesh.font = data.fontUrl;\n    mesh.fontSize = data.fontSize;\n    mesh.letterSpacing = data.letterSpacing || 0;\n    mesh.clipRect = data.clipRect;\n    mesh.lineHeight = data.lineHeight || \"normal\";\n    mesh.outlineBlur = data.outlineBlur;\n    mesh.outlineColor = data.outlineColor;\n    mesh.outlineOffsetX = data.outlineOffsetX;\n    mesh.outlineOffsetY = data.outlineOffsetY;\n    mesh.outlineOpacity = data.outlineOpacity;\n    mesh.outlineWidth = data.outlineWidth;\n    mesh.overflowWrap = data.overflowWrap;\n    mesh.strokeColor = data.strokeColor;\n    mesh.strokeOpacity = data.strokeOpacity;\n    mesh.strokeWidth = data.strokeWidth;\n    mesh.textIndent = data.textIndent;\n    mesh.whiteSpace = data.whiteSpace;\n    mesh.maxWidth = data.maxWidth;\n    mesh.sync(() => {\n      this.el.emit(\"text-updated\", this);\n    });\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function() {\n    // Free memory\n    this.troikaTextMesh.dispose();\n  },\n\n  getSize: (function() {\n    const size = new THREE.Vector3();\n    return function(outSize) {\n      this.troikaTextMesh.geometry.boundingBox.getSize(size);\n      outSize.set(\n        size.x * this.troikaTextMesh.scale.x,\n        size.y * this.troikaTextMesh.scale.y,\n        size.z * this.troikaTextMesh.scale.z\n      );\n    };\n  })()\n});\n","const { Pathfinding } = require(\"three-pathfinding\");\nimport qsTruthy from \"../utils/qs_truthy\";\n\nAFRAME.registerSystem(\"nav\", {\n  init: function() {\n    this.pathfinder = new Pathfinding();\n    this.mesh = null;\n    this.el.addEventListener(\"reset_scene\", this.removeNavMeshData.bind(this));\n    this.el.addEventListener(\"leaving_loading_environment\", this.removeNavMeshData.bind(this));\n  },\n\n  loadMesh: function(mesh, zone) {\n    if (this.mesh) {\n      console.error(\"tried to load multiple nav meshes\");\n      this.removeNavMeshData();\n    }\n    const geometry = mesh.geometry.clone();\n    mesh.updateMatrices();\n    geometry.applyMatrix4(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.mesh = mesh;\n\n    const teleporters = document.querySelectorAll(\"[teleporter]\");\n    for (let i = 0; i < teleporters.length; i++) {\n      teleporters[i].components[\"teleporter\"].queryCollisionEntities();\n    }\n\n    this.el.sceneEl.emit(\"nav-mesh-loaded\");\n\n    if (qsTruthy(\"debugNavmesh\")) {\n      this.helperMesh = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial({ wireframe: true }));\n      this.el.sceneEl.object3D.add(this.helperMesh);\n    }\n  },\n\n  removeNavMeshData() {\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      // If it's using the debug view material, restore the original material so it can be disposed.\n      if (this.mesh._hubs_audio_debug_prev_material) {\n        this.mesh.material = this.mesh._hubs_audio_debug_prev_material;\n        this.mesh._hubs_audio_debug_prev_material = null;\n      }\n    }\n    if (this.helperMesh) {\n      this.helperMesh.material?.dispose();\n      this.helperMesh.geometry?.dispose();\n      this.helperMesh.removeFromParent();\n      this.helperMesh = null;\n    }\n    this.mesh = null;\n    this.pathfinder.zones = {};\n  }\n});\n","import configs from \"../utils/configs\";\n\nexport default function IfFeature(props) {\n  return (configs.feature(props.name) && props.children) || null;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"ui\":\"scene-ui__ui__f9XIF\",\"scenePreviewButton\":\"scene-ui__scenePreviewButton__q9_aD\",\"no-default-button-style\":\"scene-ui__no-default-button-style__wNR3c\",\"noDefaultButtonStyle\":\"scene-ui__no-default-button-style__wNR3c\",\"grid\":\"scene-ui__grid__td7iK\",\"mainPanel\":\"scene-ui__mainPanel__ZFpVM\",\"logoTagline\":\"scene-ui__logoTagline__Di9G0\",\"logo\":\"scene-ui__logo__tBYTi\",\"info\":\"scene-ui__info__JtVLr\",\"name\":\"scene-ui__name__rgFbt\",\"attribution\":\"scene-ui__attribution__b9QYZ\",\"screenshot\":\"scene-ui__screenshot__pET8e\",\"screenshotHidden\":\"scene-ui__screenshotHidden___ovbI\",\"scenePreviewButtonWrapper\":\"scene-ui__scenePreviewButtonWrapper__dLufi\",\"unavailable\":\"scene-ui__unavailable__KdB4n\"};","var _path;\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nconst SvgTwitter = _ref => {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 18,\n    viewBox: \"0 0 20 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.953 4.855c.012.19.012.38.012.571C17.965 11.266 13.837 18 6.29 18v-.003C4.06 18 1.877 17.312 0 16.015c.324.042.65.063.977.064 1.847.002 3.642-.666 5.096-1.895-1.756-.036-3.296-1.27-3.834-3.07a3.807 3.807 0 0 0 1.853-.075C2.178 10.622.8 8.81.8 6.707v-.056c.57.342 1.21.532 1.863.553-1.803-1.298-2.36-3.88-1.27-5.9C3.476 4.063 6.55 5.742 9.849 5.92c-.33-1.534.121-3.143 1.187-4.222C12.69.025 15.288.111 16.842 1.89A7.887 7.887 0 0 0 19.448.817C19.14 1.84 18.5 2.709 17.644 3.26A7.71 7.71 0 0 0 20 2.565a8.723 8.723 0 0 1-2.047 2.29Z\",\n    fill: \"#fff\"\n  })));\n};\n\nexport { SvgTwitter as ReactComponent };","var _path;\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nconst SvgCodeBranch = _ref => {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20 5.625C20 3.898 18.135 2.5 15.833 2.5c-2.302 0-4.166 1.398-4.166 3.125 0 1.422 1.265 2.621 2.995 3-.032.629-.22 1.113-.574 1.441-.801.75-2.567.875-4.437 1.004-1.469.102-2.99.211-4.234.66V6.105c1.692-.398 2.916-1.582 2.916-2.98C8.333 1.398 6.47 0 4.167 0 1.865 0 0 1.398 0 3.125c0 1.398 1.224 2.582 2.917 2.98v7.786C1.224 14.293 0 15.477 0 16.875 0 18.602 1.865 20 4.167 20c2.302 0 4.166-1.398 4.166-3.125 0-1.328-1.104-2.465-2.666-2.914.161-.203.406-.383.776-.524.843-.32 2.104-.406 3.442-.5 2.198-.152 4.688-.328 6.157-1.695.729-.68 1.099-1.555 1.125-2.652C18.812 8.168 20 7 20 5.625ZM4.167 2.5c.458 0 .833.281.833.625s-.375.625-.833.625c-.459 0-.834-.281-.834-.625s.375-.625.834-.625Zm0 15c-.459 0-.834-.281-.834-.625s.375-.625.834-.625c.458 0 .833.281.833.625s-.375.625-.833.625ZM15.833 5c.459 0 .834.281.834.625s-.375.625-.834.625c-.458 0-.833-.281-.833-.625S15.375 5 15.833 5Z\",\n    fill: \"#fff\"\n  })));\n};\n\nexport { SvgCodeBranch as ReactComponent };","var _path, _path2;\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nconst SvgPen = _ref => {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.024 18.125H1.875v-2.148L13.99 3.832 16.17 6.01 4.024 18.125Z\",\n    fill: \"currentColor\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.63 5.547 14.453 3.37l1.237-1.197c.19-.193.484-.298.755-.298a1.011 1.011 0 0 1 .72.298l.664.664a1.01 1.01 0 0 1 .296.718c0 .273-.106.564-.298.756L16.63 5.547Z\",\n    fill: \"currentColor\"\n  })));\n};\n\nexport { SvgPen as ReactComponent };","var _path, _path2, _path3;\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nconst SvgHmcLogo = _ref => {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 666.667,\n    height: 266.667,\n    viewBox: \"0 0 500 200\",\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M283.6 96.7c-4.3 17.5-8 32.6-8.2 33.5-.5 1.6.3 1.8 7.5 1.8 4.5 0 8.1-.2 8.1-.5 0-1.3 6.1-29 6.5-29.4.7-.6.2-1.3 9.6 14.7 7.4 12.6 8.5 14.1 9.7 12.5.7-.9 4.4-7.5 8.3-14.5 3.9-7 7.4-12.8 7.8-12.8.4 0 2.3 6.6 4.2 14.7l3.5 14.8 8.1.3 8 .3-8.1-33c-4.4-18.2-8.4-33.1-8.7-33.1-.3 0-5.7 8.4-11.9 18.6-6.3 10.2-11.7 18.7-12 18.9-.3.2-5.9-8.4-12.5-19.1-6.5-10.7-11.9-19.4-12-19.4-.1 0-3.7 14.3-7.9 31.7z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M364 71v6h17c9.4 0 17 .2 17 .5 0 .2-8.1 12.4-18 26.9-9.9 14.5-18 26.7-18 27 0 .3 14.2.6 31.5.6H425v-12h-18c-12.1 0-18-.4-18-1.1 0-.6 1.1-2.5 2.3-4.2 1.3-1.8 9.4-13.7 18-26.5L425 65h-61v6z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M261 75.5c0 .8-.4 1.5-1 1.5-.5 0-1.2 1.1-1.6 2.5-.3 1.4-1 2.5-1.4 2.5-1.8 0-1.7 4.6.2 8.3 2.9 5.7 2.2 14.9-1.4 20.5-3.3 4.9-11.4 9.2-17.3 9.2-6 0-14-4.3-17.3-9.3-2.3-3.5-2.7-5.1-2.7-11.4 0-4-.1-7.3-.2-7.3s-1.4 3.9-2.9 8.7c-1.5 4.9-3.7 10.9-4.9 13.5l-2.3 4.7 4.5 4.5c4.9 5 12.7 9.2 18.9 10.2 4.1.6 4.2.5 4.9-2.5.9-4 2.5-4 2.5 0 0 3.1 0 3.2 4.4 2.7 9.9-1.1 21.9-9.5 26.4-18.5 5-9.8 5.2-20.5.6-30.4-3.6-7.6-9.4-13.5-9.4-9.4z\"\n  })));\n};\n\nexport { SvgHmcLogo as ReactComponent };","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport configs from \"../../utils/configs\";\nimport { ReactComponent as HmcLogo } from \"../icons/HmcLogo.svg\";\nimport { isHmc } from \"../../utils/isHmc\";\nimport { useLogo } from \"../styles/theme\";\n\nexport function AppLogo({ className, forceConfigurableLogo }) {\n  const logo = useLogo();\n  if (isHmc() && !forceConfigurableLogo) {\n    return <HmcLogo className=\"hmc-logo\" />;\n  } else {\n    return <img className={className} alt={configs.translation(\"app-name\")} src={logo} />;\n  }\n}\n\nAppLogo.propTypes = {\n  className: PropTypes.string,\n  forceConfigurableLogo: PropTypes.bool\n};\n","import configs from \"./configs\";\n\nexport function isHmc() {\n  // We use show_cloud as a proxy for whether we are running on HMC versus Hubs Cloud,\n  // since show_cloud is an internal config that is typically only enabled on HMC.\n  return configs.feature(\"show_cloud\");\n}\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof global !== 'undefined' && global.Math === Math) {\r\n        return global;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\nexport default index;\n","// What this screen-orientation-utils does are\n// 1. Hide the screen orientation API difference across browsers\n//    ScreenOrientation API should be used but Safari doesn't support it yet.\n//    Instead deprecated window.orientation and orientationchange event\n//    need to be used on Safari for now.\n// 2. Manage maxResolution preferences values based on the screen orientation\n\nimport { isIOS as detectIOS } from \"./is-mobile\";\n\nconst isIOS = detectIOS();\n\nexport const addOrientationChangeListener = (callback, useCapture = false) => {\n  if (typeof ScreenOrientation !== \"undefined\") {\n    screen.orientation.addEventListener(\"change\", callback, useCapture);\n  } else {\n    window.addEventListener(\"orientationchange\", callback, useCapture);\n  }\n};\n\nexport const removeOrientationChangeListener = (callback, useCapture = false) => {\n  if (typeof ScreenOrientation !== \"undefined\") {\n    screen.orientation.removeEventListener(\"change\", callback, useCapture);\n  } else {\n    window.removeEventListener(\"orientationchange\", callback, useCapture);\n  }\n};\n\nconst getAngle = () => {\n  return typeof ScreenOrientation !== \"undefined\" ? screen.orientation.angle : window.orientation;\n};\n\nconst isNaturalOrientation = () => {\n  return getAngle() % 180 === 0;\n};\n\n// Return the screen width in CSS pixels based on the current screen orientation\nconst getScreenWidth = () => {\n  // Is seems screen.width value is based on the natural screen orientation on iOS\n  // while it is based on the current screen orientation on Android (and other devices?).\n  if (isIOS) {\n    return isNaturalOrientation() ? screen.width : screen.height;\n  }\n  return screen.width;\n};\n\n// Return the screen height in CSS pixels based on the current screen orientation\nconst getScreenHeight = () => {\n  // Is seems screen.height value is based on the natural screen orientation on iOS\n  // while it is based on the current screen orientation on Android (and other devices?).\n  if (isIOS) {\n    return isNaturalOrientation() ? screen.height : screen.width;\n  }\n  return screen.height;\n};\n\n// Physical pixels screen resolution width\n// (screen.width * window.devicePixelRatio) seems to be too huge and\n// can cause bad performance impact. So use CSS pixels screen width\n// (screen.width) by default for now.\nconst getDefaultMaxResolutionWidth = () => {\n  return getScreenWidth();\n};\n\n// See the comment above\nconst getDefaultMaxResolutionHeight = () => {\n  return getScreenHeight();\n};\n\n// Return the screen resolution width in physical pixels based on the current screen orientation\nexport const getScreenResolutionWidth = () => {\n  return getScreenWidth() * window.devicePixelRatio;\n};\n\n// Return the screen resolution height in physical pixels based on the current screen orientation\nexport const getScreenResolutionHeight = () => {\n  return getScreenHeight() * window.devicePixelRatio;\n};\n\n// Take width and height based on the current screen orientation and\n// store them based on natural orientation.\n// Width and height paremeters must be in physical pixels.\nexport const setMaxResolution = (store, width, height) => {\n  store.update({\n    preferences: {\n      maxResolutionWidth: isNaturalOrientation() ? width : height,\n      maxResolutionHeight: isNaturalOrientation() ? height : width\n    }\n  });\n};\n\n// Return max resolution width in physical pixels\n// based on the current screen orientation\nexport const getMaxResolutionWidth = store => {\n  const preferences = store.state.preferences;\n  const width = isNaturalOrientation() ? preferences.maxResolutionWidth : preferences.maxResolutionHeight;\n  return width !== undefined ? width : getDefaultMaxResolutionWidth();\n};\n\n// Return max resolution height in physical pixels\n// based on the current screen orientation\nexport const getMaxResolutionHeight = store => {\n  const preferences = store.state.preferences;\n  const height = isNaturalOrientation() ? preferences.maxResolutionHeight : preferences.maxResolutionWidth;\n  return height !== undefined ? height : getDefaultMaxResolutionHeight();\n};\n","import React, { Component, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage, injectIntl } from \"react-intl\";\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport styles from \"../assets/stylesheets/scene-ui.scss\";\nimport { createAndRedirectToNewHub, getReticulumFetchUrl } from \"../utils/phoenix-utils\";\nimport { ReactComponent as Twitter } from \"./icons/Twitter.svg\";\nimport { ReactComponent as CodeBranch } from \"./icons/CodeBranch.svg\";\nimport { ReactComponent as Pen } from \"./icons/Pen.svg\";\nimport { AppLogo } from \"./misc/AppLogo\";\n\nimport { useResizeViewport } from \"./room/useResizeViewport\";\nfunction ResizeHookWrapper({ store, scene }) {\n  const viewportRef = useRef(document.body);\n  useResizeViewport(viewportRef, store, scene);\n  return <></>;\n}\n\nclass SceneUI extends Component {\n  static propTypes = {\n    intl: PropTypes.object,\n    scene: PropTypes.object,\n    store: PropTypes.object,\n    sceneLoaded: PropTypes.bool,\n    sceneId: PropTypes.string,\n    sceneName: PropTypes.string,\n    sceneDescription: PropTypes.string,\n    sceneAttributions: PropTypes.object,\n    sceneScreenshotURL: PropTypes.string,\n    sceneProjectId: PropTypes.string,\n    sceneAllowRemixing: PropTypes.bool,\n    showCreateRoom: PropTypes.bool,\n    unavailable: PropTypes.bool,\n    isOwner: PropTypes.bool,\n    parentScene: PropTypes.object\n  };\n\n  state = {\n    showScreenshot: false\n  };\n\n  constructor(props) {\n    super(props);\n\n    // Show screenshot if scene isn't loaded in 5 seconds\n    setTimeout(() => {\n      if (!this.props.sceneLoaded) {\n        this.setState({ showScreenshot: true });\n      }\n    }, 5000);\n  }\n\n  componentDidMount() {\n    this.props.scene.addEventListener(\"loaded\", this.onSceneLoaded);\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"loaded\", this.onSceneLoaded);\n  }\n\n  createRoom = () => {\n    createAndRedirectToNewHub(undefined, this.props.sceneId);\n  };\n\n  render() {\n    if (this.props.unavailable) {\n      return (\n        <div className={styles.ui}>\n          <div className={styles.unavailable}>\n            <div>\n              <FormattedMessage id=\"scene-page.unavailable\" defaultMessage=\"This scene is no longer available.\" />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    const { sceneAllowRemixing, isOwner, sceneProjectId, parentScene, sceneId, intl } = this.props;\n    const sceneUrl = [location.protocol, \"//\", location.host, location.pathname].join(\"\");\n    const tweetText = intl.formatMessage(\n      {\n        id: \"scene-page.default-tweet\",\n        defaultMessage: \"{sceneName} in {shareHashtag}\"\n      },\n      {\n        sceneName: this.props.sceneName,\n        shareHashtag: configs.translation(\"share-hashtag\")\n      }\n    );\n    const tweetLink = `https://twitter.com/share?url=${encodeURIComponent(sceneUrl)}&text=${encodeURIComponent(\n      tweetText\n    )}`;\n\n    const unknown = intl.formatMessage({ id: \"scene-page.unknown\", defaultMessage: \"unknown\" });\n\n    let attributions;\n\n    const toAttributionSpan = ({ title, name, url, author, remix }) => {\n      let source = \"\";\n\n      if (!author && !url) {\n        return null;\n      }\n\n      const _name = name || title || unknown;\n      const _author = author || unknown;\n\n      source = url && url.includes(\"sketchfab.com\") ? \"Sketchfab\" : \"\";\n\n      if (remix) {\n        <span className=\"remix\">\n          <FormattedMessage\n            id=\"scene-page.remix-attribution\"\n            defaultMessage=\"(Remixed from <a>{name} by {author}</a>)\"\n            values={{\n              name: _name,\n              author: _author,\n              a: chunks =>\n                url ? (\n                  <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n                    {chunks}\n                  </a>\n                ) : (\n                  <>{chunks}</>\n                )\n            }}\n          />\n        </span>;\n      } else if (source) {\n        return (\n          <span key={url}>\n            <FormattedMessage\n              id=\"scene-page.attribution-with-source\"\n              defaultMessage=\"<a>{name} by {author} on {source}</a>\"\n              values={{\n                name: _name,\n                author: _author,\n                source,\n                a: chunks =>\n                  url ? (\n                    <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n                      {chunks}\n                    </a>\n                  ) : (\n                    <>{chunks}</>\n                  )\n              }}\n            />\n          </span>\n        );\n      } else {\n        return (\n          <span key={`${_name} ${_author}`}>\n            <FormattedMessage\n              id=\"scene-page.attribution\"\n              defaultMessage=\"<a>{name} by {author}</a>\"\n              values={{\n                name: _name,\n                author: _author,\n                a: chunks =>\n                  url ? (\n                    <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n                      {chunks}\n                    </a>\n                  ) : (\n                    <>{chunks}</>\n                  )\n              }}\n            />\n          </span>\n        );\n      }\n    };\n\n    if (this.props.sceneAttributions) {\n      if (!this.props.sceneAttributions.extras) {\n        attributions = (\n          <span>\n            <span>\n              {this.props.sceneAttributions.creator ? (\n                <FormattedMessage\n                  id=\"scene-page.scene-attribution\"\n                  defaultMessage=\"by {creator}\"\n                  values={{ creator: this.props.sceneAttributions.creator || unknown }}\n                />\n              ) : (\n                \"\"\n              )}\n            </span>\n            {parentScene &&\n              parentScene.attributions &&\n              parentScene.attributions.creator &&\n              toAttributionSpan({\n                name: parentScene.name,\n                url: parentScene.url,\n                author: parentScene.attributions.creator,\n                remix: true\n              })}\n            <br />\n            <div className={styles.attribution}>\n              {this.props.sceneAttributions.content && this.props.sceneAttributions.content.map(toAttributionSpan)}\n            </div>\n          </span>\n        );\n      } else {\n        // Legacy\n        attributions = <span>{this.props.sceneAttributions.extras}</span>;\n      }\n    }\n    return (\n      <div className={styles.ui}>\n        <div\n          className={classNames({\n            [styles.screenshot]: true,\n            [styles.screenshotHidden]: this.props.sceneLoaded\n          })}\n        >\n          {this.state.showScreenshot && <img src={this.props.sceneScreenshotURL} />}\n        </div>\n        <div className={styles.grid}>\n          <div className={styles.mainPanel}>\n            <a href=\"/\" className={styles.logo}>\n              <AppLogo />\n            </a>\n            <div className={styles.logoTagline}>{configs.translation(\"app-tagline\")}</div>\n            <div className={styles.scenePreviewButtonWrapper}>\n              {this.props.showCreateRoom && (\n                <button className={styles.scenePreviewButton} onClick={this.createRoom}>\n                  <FormattedMessage id=\"scene-page.create-button\" defaultMessage=\"Create a room with this scene\" />\n                </button>\n              )}\n              <IfFeature name=\"enable_spoke\">\n                {isOwner && sceneProjectId ? (\n                  <a\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    href={getReticulumFetchUrl(`/spoke/projects/${sceneProjectId}`)}\n                    className={styles.scenePreviewButton}\n                  >\n                    <Pen />\n                    <FormattedMessage\n                      id=\"scene-page.edit-button\"\n                      defaultMessage=\"Edit in {editorName}\"\n                      values={{ editorName: configs.translation(\"editor-name\") }}\n                    />\n                  </a>\n                ) : (\n                  sceneAllowRemixing && (\n                    <a\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      href={getReticulumFetchUrl(`/spoke/projects/new?sceneId=${sceneId}`)}\n                      className={styles.scenePreviewButton}\n                    >\n                      <CodeBranch />\n                      <FormattedMessage\n                        id=\"scene-page.remix-button\"\n                        defaultMessage=\"Remix in {editorName}\"\n                        values={{ editorName: configs.translation(\"editor-name\") }}\n                      />\n                    </a>\n                  )\n                )}\n              </IfFeature>\n              <a href={tweetLink} rel=\"noopener noreferrer\" target=\"_blank\" className={styles.scenePreviewButton}>\n                <Twitter />\n                <div>\n                  <FormattedMessage id=\"scene-page.tweet-button\" defaultMessage=\"Share on Twitter\" />\n                </div>\n              </a>\n            </div>\n          </div>\n          <div className={styles.info}>\n            <div className={styles.name}>{this.props.sceneName}</div>\n            <div className={styles.attribution}>{attributions}</div>\n          </div>\n        </div>\n        <ResizeHookWrapper store={this.props.store} scene={this.props.scene} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(SceneUI);\n","import { useState, useEffect } from \"react\";\n// ResizeObserver not currently supported in Firefox Android\nimport ResizeObserver from \"resize-observer-polyfill\";\nimport {\n  addOrientationChangeListener,\n  removeOrientationChangeListener,\n  getMaxResolutionWidth,\n  getMaxResolutionHeight\n} from \"../../utils/screen-orientation-utils\";\n\nfunction calculateRendererSize(canvasRect, maxResolution, isVR) {\n  if (isVR) {\n    return canvasRect;\n  }\n\n  // canvasRect values are CSS pixels based while\n  // maxResolution values are physical pixels based (CSS pixels * pixel ratio).\n  // Convert maxResolution values to CSS pixels based.\n  const pixelRatio = window.devicePixelRatio;\n  const maxWidth = maxResolution.width / pixelRatio;\n  const maxHeight = maxResolution.height / pixelRatio;\n\n  if (canvasRect.width <= maxWidth && canvasRect.height <= maxHeight) {\n    return canvasRect;\n  }\n\n  const conversionRatio = Math.min(maxWidth / canvasRect.width, maxHeight / canvasRect.height);\n\n  return {\n    width: Math.round(canvasRect.width * conversionRatio),\n    height: Math.round(canvasRect.height * conversionRatio)\n  };\n}\n\nexport function useResizeViewport(viewportRef, store, scene) {\n  const [maxResolution, setMaxResolution] = useState({\n    width: getMaxResolutionWidth(store),\n    height: getMaxResolutionHeight(store)\n  });\n\n  useEffect(\n    () => {\n      function onStoreChanged() {\n        setMaxResolution({\n          width: getMaxResolutionWidth(store),\n          height: getMaxResolutionHeight(store)\n        });\n      }\n\n      onStoreChanged();\n\n      store.addEventListener(\"statechanged\", onStoreChanged);\n\n      return () => {\n        store.removeEventListener(\"statechanged\", onStoreChanged);\n      };\n    },\n    [store]\n  );\n\n  useEffect(\n    () => {\n      const observer = new ResizeObserver(entries => {\n        const isPresenting = scene.renderer.xr.isPresenting;\n        const isVRPresenting = scene.renderer.xr.enabled && isPresenting;\n\n        // Do not update renderer, if a camera or a canvas have not been injected.\n        // In VR mode, three handles canvas resize based on the dimensions returned by\n        // the getEyeParameters function of the WebVR API. These dimensions are independent of\n        // the window size, therefore should not be overwritten with the window's width and\n        // height, // except when in fullscreen mode.\n        if (!scene.camera || !scene.canvas || (scene.is(\"vr-mode\") && (scene.isMobile || isVRPresenting))) {\n          return;\n        }\n\n        const canvasRect = entries[0].contentRect;\n\n        const rendererSize = calculateRendererSize(canvasRect, maxResolution, isVRPresenting);\n\n        const canvas = scene.canvas;\n        canvas.style.width = canvasRect.width + \"px\";\n        canvas.style.height = canvasRect.height + \"px\";\n\n        scene.renderer.setSize(rendererSize.width, rendererSize.height, false);\n\n        scene.camera.aspect = rendererSize.width / rendererSize.height;\n        scene.camera.updateProjectionMatrix();\n\n        // Resizing the canvas clears it, so render immediately after resize to prevent flicker.\n        scene.renderer.render(scene.object3D, scene.camera);\n\n        scene.emit(\"rendererresize\", null, false);\n      });\n\n      observer.observe(viewportRef.current);\n\n      return () => {\n        observer.disconnect();\n      };\n    },\n    [viewportRef, scene, maxResolution]\n  );\n\n  useEffect(\n    () => {\n      function onOrientationChange() {\n        setMaxResolution({\n          width: getMaxResolutionWidth(store),\n          height: getMaxResolutionHeight(store)\n        });\n      }\n\n      addOrientationChangeListener(onOrientationChange);\n\n      return () => {\n        removeOrientationChangeListener(onOrientationChange);\n      };\n    },\n    [store]\n  );\n}\n","import { isIOS as detectIOS } from \"./is-mobile\";\nconst isIOS = detectIOS();\n\n// TODO should we be using touch-action CSS for this?\nexport function disableiOSZoom() {\n  if (!isIOS) return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","import { CAMERA_MODE_INSPECT } from \"./camera-system.js\";\nimport { setMatrixWorld } from \"../utils/three-utils\";\n\nlet viewingCamera;\nlet uiRoot;\nexport class ScenePreviewCameraSystem {\n  constructor() {\n    this.entities = [];\n  }\n\n  register(el) {\n    this.entities.push(el);\n  }\n\n  unregister(el) {\n    this.entities.splice(this.entities.indexOf(el), 1);\n  }\n\n  tick() {\n    viewingCamera = viewingCamera || document.getElementById(\"viewing-camera\");\n    uiRoot = uiRoot || document.getElementById(\"ui-root\");\n    const entered = viewingCamera && viewingCamera.sceneEl.is(\"entered\");\n    const isGhost = !entered && uiRoot && uiRoot.firstChild && uiRoot.firstChild.classList.contains(\"isGhost\");\n    for (let i = 0; i < this.entities.length; i++) {\n      const el = this.entities[i];\n      const hubsSystems = AFRAME.scenes[0].systems[\"hubs-systems\"];\n      if (el && (!hubsSystems || (hubsSystems.cameraSystem.mode !== CAMERA_MODE_INSPECT && !isGhost && !entered))) {\n        el.components[\"scene-preview-camera\"].tick2();\n        if (hubsSystems && viewingCamera) {\n          el.object3D.updateMatrices();\n          setMatrixWorld(viewingCamera.object3DMap.camera, el.object3D.matrixWorld);\n        }\n      }\n    }\n  }\n}\n","import { updateMaterials } from \"../utils/material-utils.js\";\n\nconst frustumBox = new THREE.Box3();\nconst inverseShadowCameraMatrixWorld = new THREE.Matrix4();\nconst tempBox = new THREE.Box3();\nconst FRUSTUM_PADDING = 1;\nconst NEAR_CLIPPING_PLANE = -500;\nconst FAR_CLIPPING_PLANE = 500;\nconst verts = [\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3()\n];\n\nfunction computeShadowCameraBoundingBox(object3D, boundingBox = new THREE.Box3()) {\n  boundingBox.makeEmpty();\n\n  object3D.updateMatrixWorld();\n\n  // Grow the extents of boundingBox for every geometry in the scene that has castShadow set to true.\n  object3D.traverse(node => {\n    const geometry = node.geometry;\n\n    if (geometry && node.castShadow) {\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      tempBox.copy(geometry.boundingBox);\n\n      // Apply matrix transforming bounding box from model space to world space\n      tempBox.applyMatrix4(node.matrixWorld);\n\n      boundingBox.union(tempBox);\n    }\n  });\n\n  tempBox.makeEmpty();\n\n  return boundingBox;\n}\n\nfunction resizeShadowCameraFrustum(light, boundingBox) {\n  // Reset bounding box\n  frustumBox.makeEmpty();\n\n  // Transform the resulting bounding box from world space to light space.\n  // Construct a new bounding box in light space that contains the corners of the bounding box in world space.\n  const min = boundingBox.min;\n  const max = boundingBox.max;\n\n  verts[0].set(min.x, min.y, min.z);\n  verts[1].set(min.x, min.y, max.z);\n  verts[2].set(min.x, max.y, min.z);\n  verts[3].set(min.x, max.y, max.z);\n  verts[4].set(max.x, min.y, min.z);\n  verts[5].set(max.x, min.y, max.z);\n  verts[6].set(max.x, max.y, min.z);\n  verts[7].set(max.x, max.y, max.z);\n\n  light.updateMatrices();\n  light.target.updateMatrices();\n  light.shadow.updateMatrices(light);\n  inverseShadowCameraMatrixWorld.copy(light.shadow.camera.matrixWorld).invert();\n\n  for (let i = 0; i < verts.length; i++) {\n    verts[i].applyMatrix4(inverseShadowCameraMatrixWorld);\n    frustumBox.expandByPoint(verts[i]);\n  }\n\n  // Update the camera frustum to fit the resulting bounding box.\n  // Everything in the frustum that has castShadow set to true will cast a shadow.\n  // Everything in the frustum that has receiveShadow set to true will receive a shadow.\n  // FRUSTUM_PADDING is added to avoid clipping the edges of shadows.\n  // TODO: Determine why shadows flicker when light is moved fast. The light's matrixWorld is probably being updated a frame behind.\n  const camera = light.shadow.camera;\n  camera.left = frustumBox.min.x - FRUSTUM_PADDING;\n  camera.right = frustumBox.max.x + FRUSTUM_PADDING;\n  camera.bottom = frustumBox.min.y - FRUSTUM_PADDING;\n  camera.top = frustumBox.max.y + FRUSTUM_PADDING;\n  camera.near = frustumBox.min.z + NEAR_CLIPPING_PLANE;\n  camera.far = frustumBox.max.z + FAR_CLIPPING_PLANE;\n  camera.updateProjectionMatrix();\n}\n\nexport class ShadowSystem {\n  constructor(sceneEl) {\n    this.sceneEl = sceneEl;\n    this.shadowCameraBoundingBox = new THREE.Box3();\n    this.previousShadowsEnabled = this.realtimeShadowsEnabled = null;\n\n    // Defaults previously in hub.html\n    sceneEl.renderer.shadowMap.enabled = false;\n    sceneEl.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n    sceneEl.renderer.shadowMap.autoUpdate = true;\n\n    window.APP.store.addEventListener(\"statechanged\", this.updatePrefs.bind(this));\n    this.updatePrefs();\n  }\n\n  updatePrefs() {\n    this.realtimeShadowsEnabled =\n      window.APP.store.state.preferences.enableDynamicShadows === true &&\n      window.APP.store.materialQualitySetting !== \"low\";\n    if (this.previousShadowsEnabled !== this.realtimeShadowsEnabled) {\n      this.sceneEl.renderer.shadowMap.enabled = this.realtimeShadowsEnabled;\n\n      // If scene has already rendered, materials which can receive shadows must be updated.\n      if (this.sceneEl.hasLoaded) {\n        this.sceneEl.object3D.traverse(node => {\n          if (node.receiveShadow && node.material) {\n            updateMaterials(node, material => {\n              material.needsUpdate = true;\n              return material;\n            });\n          }\n        });\n      }\n    }\n    this.previousShadowsEnabled = this.realtimeShadowsEnabled;\n  }\n\n  tick() {\n    if (!this.realtimeShadowsEnabled) {\n      return;\n    }\n    computeShadowCameraBoundingBox(this.sceneEl.object3D, this.shadowCameraBoundingBox);\n    this.sceneEl.object3D.traverse(object3D => {\n      if (object3D.isDirectionalLight) {\n        resizeShadowCameraFrustum(object3D, this.shadowCameraBoundingBox);\n      }\n    });\n  }\n}\n","import { ScenePreviewCameraSystem } from \"./scene-preview-camera-system\";\nimport { ShadowSystem } from \"./shadow-system\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { AnimationMixerSystem } from \"../components/animation-mixer\";\n\nAFRAME.registerSystem(\"scene-systems\", {\n  init() {\n    waitForDOMContentLoaded().then(() => {\n      this.DOMContentDidLoad = true;\n    });\n    this.scenePreviewCameraSystem = new ScenePreviewCameraSystem();\n    this.animationMixerSystem = new AnimationMixerSystem();\n    this.shadowSystem = new ShadowSystem(this.el);\n  },\n\n  tick(t, dt) {\n    if (!this.DOMContentDidLoad) return;\n    this.animationMixerSystem.tick(dt);\n    this.scenePreviewCameraSystem.tick();\n    this.shadowSystem.tick();\n  }\n});\n","export function getSanitizedComponentMapping(inputComponent, inputProperty, publicComponents) {\n  const publicComponent = publicComponents[inputComponent];\n\n  if (!publicComponent) {\n    throw new Error(`Component \"${inputComponent}\" is not public.`);\n  }\n\n  const publicProperty = publicComponent.publicProperties[inputProperty];\n\n  if (!publicProperty) {\n    throw new Error(`Component \"${inputComponent}\"'s property \"${inputProperty}\" is not public.`);\n  }\n\n  return {\n    mappedComponent: publicComponent.mappedComponent,\n    mappedProperty: publicProperty.mappedProperty,\n    getMappedValue: publicProperty.getMappedValue\n  };\n}\n","import { defineQuery, enterQuery, entityExists, exitQuery, hasComponent, Not } from \"bitecs\";\nimport { Object3DTag, Rigidbody, PhysicsShape, AEntity } from \"../bit-components\";\nimport { ACTIVATION_STATE, FIT, SHAPE } from \"three-ammo/constants\";\n// import { holdableButtonSystem } from \"./holdable-button-system\";\n\nconst rigidbodyQuery = defineQuery([Rigidbody, Object3DTag, Not(AEntity)]);\nconst rigidbodyEnteredQuery = enterQuery(rigidbodyQuery);\nconst rigidbodyExitedQuery = exitQuery(rigidbodyQuery);\nconst shapeExitQuery = exitQuery(defineQuery([PhysicsShape]));\n\nexport const RIGIDBODY_FLAGS = {\n  DISABLE_COLLISIONS: 1 << 0\n};\n\nexport const physicsCompatSystem = world => {\n  const physicsSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].physicsSystem;\n\n  const eids = rigidbodyEnteredQuery(world);\n  for (let i = 0; i < eids.length; i++) {\n    const eid = eids[i];\n\n    const obj = world.eid2obj.get(eid);\n\n    // TODO these are all hardcoded values, RigidBody should actually have (some of?) these properties\n    const bodyId = physicsSystem.addBody(obj, {\n      mass: 1,\n      gravity: { x: 0, y: Rigidbody.gravity[eid], z: 0 },\n      linearDamping: 0.01,\n      angularDamping: 0.01,\n      linearSleepingThreshold: 1.6,\n      angularSleepingThreshold: 2.5,\n      angularFactor: { x: 1, y: 1, z: 1 },\n      activationState: ACTIVATION_STATE.ACTIVE_TAG,\n      emitCollisionEvents: false,\n      scaleAutoUpdate: false,\n      type: \"kinematic\",\n      disableCollision: Rigidbody.flags[eid] & RIGIDBODY_FLAGS.DISABLE_COLLISIONS,\n      collisionFilterGroup: Rigidbody.collisionGroup[eid],\n      collisionFilterMask: Rigidbody.collisionMask[eid]\n    });\n    Rigidbody.bodyId[eid] = bodyId;\n\n    // TODO same deal for these, hardcoded, also we may want to support nested shapes\n    if (hasComponent(world, PhysicsShape, eid)) {\n      const halfExtents = PhysicsShape.halfExtents[eid];\n      PhysicsShape.bodyId[eid] = bodyId;\n      const shapeId = physicsSystem.addShapes(bodyId, obj, {\n        type: SHAPE.BOX,\n        fit: FIT.MANUAL,\n        halfExtents: { x: halfExtents[0], y: halfExtents[1], z: halfExtents[2] },\n        margin: 0.01,\n        offset: { x: 0, y: 0, z: 0 },\n        orientation: { x: 0, y: 0, z: 0, w: 1 }\n      });\n      PhysicsShape.shapeId[eid] = shapeId;\n    }\n  }\n\n  {\n    const eids = shapeExitQuery(world);\n    for (let i = 0; i < eids.length; i++) {\n      const eid = eids[i];\n      physicsSystem.removeShapes(PhysicsShape.bodyId[eid], PhysicsShape.shapeId[eid]);\n    }\n  }\n\n  {\n    const eids = rigidbodyExitedQuery(world);\n    for (let i = 0; i < eids.length; i++) {\n      const eid = eids[i];\n      if (entityExists(world, eid) && hasComponent(world, PhysicsShape, eid)) {\n        physicsSystem.removeShapes(PhysicsShape.bodyId[eid], PhysicsShape.shapeId[eid]);\n        // The PhysicsShape is still on this entity!\n      }\n      physicsSystem.removeBody(Rigidbody.bodyId[eid]);\n    }\n  }\n\n  return world;\n};\n","import { addObject3DComponent } from \"../utils/jsx-entity\";\nimport { NetworkedMediaFrame, MediaFrame, Rigidbody, PhysicsShape, Networked } from \"../bit-components\";\nimport { addComponent, hasComponent } from \"bitecs\";\nimport { MediaType } from \"../utils/media-utils\";\nimport { COLLISION_LAYERS } from \"../constants\";\nimport { RIGIDBODY_FLAGS } from \"../systems/bit-physics\";\nimport { Layers } from \"../components/layers\";\n\nconst DEFAULTS = {\n  bounds: { x: 1, y: 1, z: 1 },\n  mediaType: \"all\"\n};\nexport function inflateMediaFrame(world, eid, componentProps) {\n  componentProps = Object.assign({}, DEFAULTS, componentProps);\n  const guide = new THREE.Mesh(\n    new THREE.BoxBufferGeometry(componentProps.bounds.x, componentProps.bounds.y, componentProps.bounds.z),\n    new THREE.ShaderMaterial({\n      uniforms: {\n        color: { value: new THREE.Color(0x2f80ed) }\n      },\n      vertexShader: `\n            varying vec2 vUv;\n            void main()\n            {\n              gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n              vUv = uv;\n            }\n          `,\n      fragmentShader: `\n            // adapted from https://www.shadertoy.com/view/Mlt3z8\n            float bayerDither2x2( vec2 v ) {\n              return mod( 3.0 * v.y + 2.0 * v.x, 4.0 );\n            }\n            float bayerDither4x4( vec2 v ) {\n              vec2 P1 = mod( v, 2.0 );\n              vec2 P2 = mod( floor( 0.5  * v ), 2.0 );\n              return 4.0 * bayerDither2x2( P1 ) + bayerDither2x2( P2 );\n            }\n\n            varying vec2 vUv;\n            uniform vec3 color;\n            void main() {\n              float alpha = max(step(0.45, abs(vUv.x - 0.5)), step(0.45, abs(vUv.y - 0.5))) - 0.5;\n              if( ( bayerDither4x4( floor( mod( gl_FragCoord.xy, 4.0 ) ) ) ) / 16.0 >= alpha ) discard;\n              gl_FragColor = vec4(color, 1.0);\n            }\n          `,\n      side: THREE.DoubleSide\n    })\n  );\n  guide.layers.set(Layers.CAMERA_LAYER_UI);\n  // TODO: This is a hack around the physics system addBody call requiring its body to have parent\n  guide.parent = new THREE.Group();\n  addObject3DComponent(world, eid, guide);\n  addComponent(world, MediaFrame, eid, true);\n  addComponent(world, NetworkedMediaFrame, eid, true);\n\n  if (!hasComponent(world, Networked, eid)) addComponent(world, Networked, eid);\n\n  MediaFrame.mediaType[eid] = {\n    all: MediaType.ALL,\n    \"all-2d\": MediaType.ALL_2D,\n    model: MediaType.MODEL,\n    image: MediaType.IMAGE,\n    video: MediaType.VIDEO,\n    pdf: MediaType.PDF\n  }[componentProps.mediaType];\n  MediaFrame.bounds[eid].set([componentProps.bounds.x, componentProps.bounds.y, componentProps.bounds.z]);\n\n  addComponent(world, Rigidbody, eid);\n  Rigidbody.collisionGroup[eid] = COLLISION_LAYERS.MEDIA_FRAMES;\n  Rigidbody.collisionMask[eid] = COLLISION_LAYERS.INTERACTABLES;\n  Rigidbody.flags[eid] = RIGIDBODY_FLAGS.DISABLE_COLLISIONS;\n  addComponent(world, PhysicsShape, eid);\n  PhysicsShape.halfExtents[eid].set([\n    componentProps.bounds.x / 2,\n    componentProps.bounds.y / 2,\n    componentProps.bounds.z / 2\n  ]);\n}\n","import { addComponent } from \"bitecs\";\nimport { Text as TroikaText } from \"troika-three-text\";\nimport { Text } from \"../bit-components\";\nimport { addObject3DComponent } from \"../utils/jsx-entity\";\n\nconst THREE_SIDES = {\n  front: THREE.FrontSide,\n  back: THREE.BackSide,\n  double: THREE.DoubleSide\n};\n\nconst DEFAULTS = {\n  textAlign: \"center\",\n  anchorX: \"center\",\n  anchorY: \"middle\"\n};\n\nexport function inflateText(world, eid, componentProps) {\n  componentProps = Object.assign({}, DEFAULTS, componentProps);\n  addComponent(world, Text, eid);\n  const text = new TroikaText();\n  Object.entries(componentProps).forEach(([name, value]) => {\n    switch (name) {\n      case \"value\":\n        text.text = value;\n        break;\n      case \"side\":\n        text.material.side = THREE_SIDES[value];\n        break;\n      case \"opacity\":\n        text.material.side = value;\n        break;\n      case \"fontUrl\":\n        text.font = value;\n        break;\n      default:\n        text[name] = value;\n    }\n  });\n  text.sync();\n  addObject3DComponent(world, eid, text);\n}\n","import { addComponent, addEntity, hasComponent } from \"bitecs\";\nimport { preloadFont } from \"troika-three-text\";\nimport {\n  CameraTool,\n  CursorRaycastable,\n  DestroyAtExtremeDistance,\n  FloatyObject,\n  HandCollisionTarget,\n  Holdable,\n  HoldableButton,\n  HoverButton,\n  MakeKinematicOnRelease,\n  Networked,\n  NetworkedTransform,\n  Object3DTag,\n  OffersHandConstraint,\n  OffersRemoteConstraint,\n  PhysicsShape,\n  RemoteHoverTarget,\n  Rigidbody,\n  SingleActionButton,\n  TextButton\n} from \"../bit-components\";\nimport { inflateMediaFrame } from \"../inflators/media-frame\";\nimport { inflateModel } from \"../inflators/model\";\nimport { inflateSlice9 } from \"../inflators/slice9\";\nimport { inflateText } from \"../inflators/text\";\n\n// TODO we should do this in a more explicit spot for \"preloading\" during the loading screen\npreloadFont({ characters: \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_<()>[]|0123456789\" }, function() {});\n\nfunction isValidChild(child) {\n  if (child === undefined) {\n    console.warn(\"found undefined node\");\n    return false;\n  } else if (typeof child === \"string\") {\n    console.warn(\"found text node\", child);\n    return false;\n  }\n\n  return true;\n}\n\nconst reservedAttrs = [\"position\", \"rotation\", \"scale\", \"visible\", \"name\", \"layers\"];\n\nclass Ref {\n  constructor() {\n    this.current = null;\n  }\n}\nexport function createRef() {\n  return new Ref();\n}\nfunction resolveRef(world, ref) {\n  if (ref.current === null) {\n    ref.current = addEntity(world);\n  }\n  return ref.current;\n}\n\nexport function createElementEntity(tag, attrs, ...children) {\n  attrs = attrs || {};\n  if (typeof tag === \"function\") {\n    return tag(attrs, children);\n  } else if (tag === \"entity\") {\n    const outputAttrs = {};\n    const components = [];\n    let ref = null;\n\n    for (const attr in attrs) {\n      if (reservedAttrs.includes(attr)) {\n        outputAttrs[attr] = attrs[attr];\n      } else if (attr === \"ref\") {\n        ref = attrs[attr];\n      } else {\n        // if jsx transformed the attr into attr: true, change it to attr: {}.\n        components[attr] = attrs[attr] === true ? {} : attrs[attr];\n      }\n    }\n\n    return {\n      attrs: outputAttrs,\n      components,\n      children: children.flat().filter(isValidChild),\n      ref\n    };\n  } else {\n    throw new Error(\"invalid tag\", tag);\n  }\n}\n\nexport function addObject3DComponent(world, eid, obj) {\n  if (hasComponent(APP.world, Object3DTag, eid)) {\n    throw new Error(\"Tried to an object3D tag to an entity that already has one\");\n  }\n  addComponent(APP.world, Object3DTag, eid);\n  world.eid2obj.set(eid, obj);\n  obj.eid = eid;\n  return eid;\n}\n\n// TODO HACK gettting internal bitecs symbol, should expose an API to check a properties type\nconst $isEidType = Object.getOwnPropertySymbols(CameraTool.screenRef).find(s => s.description === \"isEidType\");\nconsole.log($isEidType);\n\nconst createDefaultInflator = (Component, defaults = {}) => {\n  return (world, eid, componentProps) => {\n    componentProps = Object.assign({}, defaults, componentProps);\n    addComponent(world, Component, eid, true);\n    Object.keys(componentProps).forEach(propName => {\n      const prop = Component[propName];\n      if (!prop) {\n        console.error(`${propName} is not a valid property of`, Component);\n        return;\n      }\n      const value = componentProps[propName];\n      prop[eid] = prop[$isEidType] ? resolveRef(world, value) : value;\n    });\n  };\n};\n\nconst inflators = {\n  \"cursor-raycastable\": createDefaultInflator(CursorRaycastable),\n  \"remote-hover-target\": createDefaultInflator(RemoteHoverTarget),\n  \"hand-collision-target\": createDefaultInflator(HandCollisionTarget),\n  \"offers-remote-constraint\": createDefaultInflator(OffersRemoteConstraint),\n  \"offers-hand-constraint\": createDefaultInflator(OffersHandConstraint),\n  \"single-action-button\": createDefaultInflator(SingleActionButton),\n  \"holdable-button\": createDefaultInflator(HoldableButton),\n  \"text-button\": createDefaultInflator(TextButton),\n  \"hover-button\": createDefaultInflator(HoverButton),\n  holdable: createDefaultInflator(Holdable),\n  rigidbody: createDefaultInflator(Rigidbody),\n  \"physics-shape\": createDefaultInflator(PhysicsShape),\n  \"floaty-object\": createDefaultInflator(FloatyObject),\n  \"make-kinematic-on-release\": createDefaultInflator(MakeKinematicOnRelease),\n  \"destroy-at-extreme-distance\": createDefaultInflator(DestroyAtExtremeDistance),\n  \"networked-transform\": createDefaultInflator(NetworkedTransform),\n  networked: createDefaultInflator(Networked),\n  \"camera-tool\": createDefaultInflator(CameraTool, { captureDurIdx: 1 }),\n\n  // inflators that create Object3Ds\n  \"media-frame\": inflateMediaFrame,\n  object3D: addObject3DComponent,\n  slice9: inflateSlice9,\n  text: inflateText,\n  model: inflateModel\n};\n\nexport function renderAsEntity(world, entityDef) {\n  const eid = entityDef.ref ? resolveRef(world, entityDef.ref) : addEntity(world);\n\n  Object.keys(entityDef.components).forEach(name => {\n    if (!inflators[name]) {\n      throw new Error(`Failed to inflate unknown component called ${name}`);\n    }\n\n    inflators[name](world, eid, entityDef.components[name]);\n  });\n\n  let obj = world.eid2obj.get(eid);\n  if (!obj) {\n    obj = new THREE.Group();\n    addObject3DComponent(world, eid, obj);\n  }\n\n  if (entityDef.attrs.position) {\n    obj.position.fromArray(entityDef.attrs.position);\n  }\n  if (entityDef.attrs.rotation) {\n    obj.rotation.fromArray(entityDef.attrs.rotation);\n  }\n  if (entityDef.attrs.scale) {\n    obj.scale.fromArray(entityDef.attrs.scale);\n  }\n  if (entityDef.attrs.name) {\n    obj.name = entityDef.attrs.name;\n  }\n  if (entityDef.attrs.layers !== undefined) {\n    obj.layers.mask = entityDef.attrs.layers;\n  }\n  if (entityDef.attrs.visible !== undefined) {\n    obj.visible = entityDef.attrs.visible;\n  }\n  entityDef.children.forEach(child => {\n    if (child.type === \"a-entity\") {\n      throw new Error(\"a-entity can only be children of a-entity\");\n    } else {\n      const childEid = renderAsEntity(world, child);\n      obj.add(world.eid2obj.get(childEid));\n    }\n  });\n  return eid;\n}\n","import { addComponent } from \"bitecs\";\nimport { addObject3DComponent } from \"../utils/jsx-entity\";\nimport { Slice9 } from \"../bit-components\";\nimport { updateSlice9Geometry } from \"../update-slice9-geometry\";\n\nexport function inflateSlice9(world, eid, { size, insets, texture }) {\n  const geometry = new THREE.PlaneBufferGeometry(1, 1, 3, 3);\n  const material = new THREE.MeshBasicMaterial({ map: texture, transparent: true, toneMapped: false });\n  const obj = new THREE.Mesh(geometry, material);\n  addObject3DComponent(world, eid, obj);\n\n  addComponent(world, Slice9, eid);\n  Slice9.insets[eid].set(insets);\n  Slice9.size[eid].set(size);\n  updateSlice9Geometry(world, eid);\n}\n","import { Slice9 } from \"./bit-components\";\n\nexport function updateSlice9Geometry(world, eid) {\n  const geometry = world.eid2obj.get(eid).geometry;\n  const pos = geometry.attributes.position.array;\n  const uvs = geometry.attributes.uv.array;\n\n  const [width, height] = Slice9.size[eid];\n  const [top, bottom, left, right] = Slice9.insets[eid];\n\n  /*\n      0--1------------------------------2--3\n      |  |                              |  |\n      4--5------------------------------6--7\n      |  |                              |  |\n      |  |                              |  |\n      |  |                              |  |\n      8--9-----------------------------10--11\n      |  |                              |  |\n      12-13----------------------------14--15\n    */\n  function setPos(id, x, y) {\n    pos[3 * id] = x;\n    pos[3 * id + 1] = y;\n  }\n\n  function setUV(id, u, v) {\n    uvs[2 * id] = u;\n    uvs[2 * id + 1] = v;\n  }\n\n  // Update UVS\n  // TODO hardcoded\n  const textureHeight = 128;\n  const textureWidth = 128;\n\n  const uv = {\n    left: left / textureWidth,\n    right: right / textureWidth,\n    top: top / textureHeight,\n    bottom: bottom / textureHeight\n  };\n\n  setUV(1, uv.left, 1);\n  setUV(2, uv.right, 1);\n\n  setUV(4, 0, uv.bottom);\n  setUV(5, uv.left, uv.bottom);\n  setUV(6, uv.right, uv.bottom);\n  setUV(7, 1, uv.bottom);\n\n  setUV(8, 0, uv.top);\n  setUV(9, uv.left, uv.top);\n  setUV(10, uv.right, uv.top);\n  setUV(11, 1, uv.top);\n\n  setUV(13, uv.left, 0);\n  setUV(14, uv.right, 0);\n\n  // Update vertex positions\n  const w2 = width / 2;\n  const h2 = height / 2;\n  const leftPadded = -w2 + 0.1;\n  const rightPadded = w2 - 0.1;\n  const topPadded = h2 - 0.1;\n  const bottomPadded = -h2 + 0.1;\n\n  setPos(0, -w2, h2);\n  setPos(1, leftPadded, h2);\n  setPos(2, rightPadded, h2);\n  setPos(3, w2, h2);\n\n  setPos(4, -w2, topPadded);\n  setPos(5, leftPadded, topPadded);\n  setPos(6, rightPadded, topPadded);\n  setPos(7, w2, topPadded);\n\n  setPos(8, -w2, bottomPadded);\n  setPos(9, leftPadded, bottomPadded);\n  setPos(10, rightPadded, bottomPadded);\n  setPos(11, w2, bottomPadded);\n\n  setPos(13, leftPadded, -h2);\n  setPos(14, rightPadded, -h2);\n  setPos(12, -w2, -h2);\n  setPos(15, w2, -h2);\n\n  geometry.attributes.position.needsUpdate = true;\n  geometry.attributes.uv.needsUpdate = true;\n}\n","import { addComponent, addEntity } from \"bitecs\";\nimport { GLTFModel } from \"../bit-components\";\nimport { loadModel } from \"../components/gltf-model-plus\";\nimport { addObject3DComponent } from \"../utils/jsx-entity\";\n\nexport function inflateModel(world, eid, { src }) {\n  const obj = new THREE.Group();\n  addObject3DComponent(world, eid, obj);\n  loadModel(src, null, true).then(gltf => {\n    // TODO inflating components and create animation mixers\n    const modelEid = addEntity(world);\n    addObject3DComponent(world, modelEid, gltf.scene);\n    addComponent(world, GLTFModel, modelEid);\n    gltf.scene.userData.gltfSrc = src;\n    obj.add(gltf.scene);\n  });\n}\n","import { sanitizeUrl } from \"@braintree/sanitize-url\";\nimport \"./components/gltf-model-plus\";\nimport { getSanitizedComponentMapping } from \"./utils/component-mappings\";\nimport { TYPE, SHAPE, FIT } from \"three-ammo/constants\";\nconst COLLISION_LAYERS = require(\"./constants\").COLLISION_LAYERS;\nimport { AudioType, DistanceModelType, SourceType } from \"./components/audio-params\";\nimport { updateAudioSettings } from \"./update-audio-settings\";\nimport { renderAsEntity } from \"./utils/jsx-entity\";\nimport { Networked } from \"./bit-components\";\nimport { addComponent } from \"bitecs\";\n\nAFRAME.GLTFModelPlus.registerComponent(\"duck\", \"duck\", el => {\n  el.setAttribute(\"duck\", \"\");\n  el.setAttribute(\"quack\", { quackPercentage: 0.1 });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"quack\", \"quack\");\nAFRAME.GLTFModelPlus.registerComponent(\"sound\", \"sound\");\nAFRAME.GLTFModelPlus.registerComponent(\"css-class\", \"css-class\");\nAFRAME.GLTFModelPlus.registerComponent(\"interactable\", \"css-class\", (el, componentName) => {\n  el.setAttribute(componentName, \"interactable\");\n});\nAFRAME.GLTFModelPlus.registerComponent(\"super-spawner\", \"super-spawner\", (el, componentName, componentData) => {\n  //TODO: Do not automatically add these components\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n  el.setAttribute(\"hoverable-visuals\", \"\");\n  el.setAttribute(componentName, componentData);\n});\nAFRAME.GLTFModelPlus.registerComponent(\"gltf-model-plus\", \"gltf-model-plus\");\nAFRAME.GLTFModelPlus.registerComponent(\"media-loader\", \"media-loader\");\nAFRAME.GLTFModelPlus.registerComponent(\"body\", \"body-helper\", el => {\n  //This is only required for migration of old environments with super-spawners\n  //will no longer be needed when spawners are added via Spoke instead.\n  el.setAttribute(\"body-helper\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ammo-shape\", \"shape-helper\");\nAFRAME.GLTFModelPlus.registerComponent(\"hide-when-quality\", \"hide-when-quality\");\nAFRAME.GLTFModelPlus.registerComponent(\"light\", \"light\", (el, componentName, componentData) => {\n  if (componentData.distance === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n  if (componentData.castShadow) {\n    // HACK: component.light isn't set until one frame after setArrtibute\n    setTimeout(() => {\n      el.components.light.light.shadow.camera.matrixNeedsUpdate = true;\n    }, 0);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ambient-light\", \"ambient-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"directional-light\", \"directional-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"hemisphere-light\", \"hemisphere-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"point-light\", \"point-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"spot-light\", \"spot-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"billboard\", \"billboard\");\nAFRAME.GLTFModelPlus.registerComponent(\"simple-water\", \"simple-water\");\nAFRAME.GLTFModelPlus.registerComponent(\"skybox\", \"skybox\");\nAFRAME.GLTFModelPlus.registerComponent(\"layers\", \"layers\");\nAFRAME.GLTFModelPlus.registerComponent(\"shadow\", \"shadow\");\nAFRAME.GLTFModelPlus.registerComponent(\"water\", \"water\");\nAFRAME.GLTFModelPlus.registerComponent(\"scale-audio-feedback\", \"scale-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"morph-audio-feedback\", \"morph-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"animation-mixer\", \"animation-mixer\");\nAFRAME.GLTFModelPlus.registerComponent(\"loop-animation\", \"loop-animation\");\nAFRAME.GLTFModelPlus.registerComponent(\"uv-scroll\", \"uv-scroll\");\nAFRAME.GLTFModelPlus.registerComponent(\"frustrum\", \"frustrum\");\nAFRAME.GLTFModelPlus.registerComponent(\"mirror\", \"mirror\");\nAFRAME.GLTFModelPlus.registerComponent(\n  \"box-collider\",\n  \"shape-helper\",\n  (() => {\n    const euler = new THREE.Euler();\n    return (el, componentName, componentData) => {\n      const { scale, rotation } = componentData;\n      euler.set(rotation.x, rotation.y, rotation.z);\n      const orientation = new THREE.Quaternion().setFromEuler(euler);\n      el.setAttribute(componentName, {\n        type: SHAPE.BOX,\n        fit: FIT.MANUAL,\n        offset: componentData.position,\n        halfExtents: { x: scale.x / 2, y: scale.y / 2, z: scale.z / 2 },\n        orientation: { x: orientation.x, y: orientation.y, z: orientation.z, w: orientation.w }\n      });\n    };\n  })()\n);\nAFRAME.GLTFModelPlus.registerComponent(\"visible\", \"visible\", (el, componentName, componentData) => {\n  if (typeof componentData === \"object\") {\n    el.setAttribute(componentName, componentData.visible);\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"spawn-point\", \"spawn-point\", el => {\n  el.setAttribute(\"waypoint\", {\n    canBeSpawnPoint: true,\n    canBeOccupied: false,\n    canBeClicked: false,\n    willDisableMotion: false,\n    willDisableTeleporting: false,\n    willMaintainWorldUp: true\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"nav-mesh\", \"nav-mesh\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"pinnable\", \"pinnable\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"waypoint\", \"waypoint\", (el, componentName, componentData, components) => {\n  if (componentData.canBeOccupied) {\n    el.setAttribute(\"networked\", {\n      template: \"#template-waypoint-avatar\",\n      attachTemplateToLocal: false,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n  el.setAttribute(\"waypoint\", componentData);\n});\n\nimport { findAncestorWithComponent } from \"./utils/scene-graph\";\nimport { createElementEntity } from \"./utils/jsx-entity\";\n/** @jsx createElementEntity */ createElementEntity;\n\nAFRAME.GLTFModelPlus.registerComponent(\"media-frame\", \"media-frame\", (el, _componentName, componentData) => {\n  const eid = renderAsEntity(APP.world, <entity media-frame={componentData} />);\n\n  addComponent(APP.world, Networked, eid);\n\n  const networkedEl = findAncestorWithComponent(el, \"networked\");\n  const rootNid = (networkedEl && networkedEl.components.networked.data.networkId) || \"scene\";\n  Networked.id[eid] = APP.getSid(`${rootNid}.${el.object3D.children[0].userData.gltfIndex}`);\n  APP.world.nid2eid.set(Networked.id[eid], eid);\n\n  el.object3D.add(APP.world.eid2obj.get(eid));\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"media\", \"media\", (el, componentName, componentData) => {\n  if (componentData.id) {\n    el.setAttribute(\"networked\", {\n      template: \"#interactable-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: componentData.id\n    });\n  }\n\n  const mediaLoaderAttributes = {\n    src: sanitizeUrl(componentData.src),\n    fitToBox: componentData.contentSubtype ? false : true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    contentSubtype: componentData.contentSubtype\n  };\n\n  if (componentData.version) {\n    mediaLoaderAttributes.version = componentData.version;\n  }\n\n  el.setAttribute(\"media-loader\", mediaLoaderAttributes);\n\n  if (componentData.pageIndex) {\n    el.setAttribute(\"media-pdf\", { index: componentData.pageIndex });\n    el.setAttribute(\"media-pager\", { index: componentData.pageIndex });\n  }\n\n  if (componentData.paused !== undefined) {\n    el.setAttribute(\"media-video\", { videoPaused: componentData.paused });\n  }\n\n  if (componentData.time) {\n    el.setAttribute(\"media-video\", { time: componentData.time });\n  }\n});\n\nasync function mediaInflator(el, componentName, componentData, components) {\n  let isControlled = true;\n\n  if (componentName === \"link\" && (components.video || components.image)) {\n    // video/image component will set link url specified in link component.\n    return;\n  }\n\n  if (components.networked) {\n    isControlled = componentData.controls || componentName === \"link\";\n\n    const hasVolume = componentName === \"video\" || componentName === \"audio\";\n    const templateName =\n      componentName === \"model\" || isControlled || hasVolume ? \"#static-controlled-media\" : \"#static-media\";\n\n    el.setAttribute(\"networked\", {\n      template: templateName,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n\n  const mediaOptions = {};\n\n  if (componentName === \"video\" || componentName === \"image\") {\n    mediaOptions.projection = componentData.projection;\n    mediaOptions.alphaMode = componentData.alphaMode;\n    mediaOptions.alphaCutoff = componentData.alphaCutoff;\n  }\n\n  if (componentName === \"video\" || componentName === \"audio\") {\n    mediaOptions.videoPaused = !componentData.autoPlay;\n    mediaOptions.loop = componentData.loop;\n    mediaOptions.hidePlaybackControls = !isControlled;\n\n    if (componentData.audioType) {\n      // This is an old version of this component, which had built-in audio parameters.\n      // The way we are handling it is wrong. If a user created a scene with this old version\n      // of the component, all of these parameters will be present whether the user explicitly set\n      // the values for them or not. But really, they should only count as \"overrides\" if the user\n      // meant for them to take precendence over the app and scene defaults.\n      // TODO: Fix this issue. One option is to just ignore this component data, which might break old scenes\n      //       but simplifying the handling. Another option is to compare the component data here with\n      //       the \"defaults\" and only save the values that are different from the defaults. However,\n      //       this loses information if the user changed the scene settings but wanted this specific\n      //       node to use the \"defaults\".\n      //       I don't see a perfect solution here and would prefer not to handle the \"legacy\" components.\n      //\n      // For legacy components we don't want artificial distance based attenuation to be applied to stereo audios\n      // so we set the distanceModel and rolloffFactor so the attenuation is always 1. The artificial distance based\n      // attenuation is calculated in the gain system for stereo audios.\n      APP.audioOverrides.set(el, {\n        audioType: componentData.audioType,\n        distanceModel:\n          componentData.audioType === AudioType.Stereo ? DistanceModelType.Linear : componentData.distanceModel,\n        rolloffFactor: componentData.audioType === AudioType.Stereo ? 0 : componentData.rolloffFactor,\n        refDistance: componentData.refDistance,\n        maxDistance: componentData.maxDistance,\n        coneInnerAngle: componentData.coneInnerAngle,\n        coneOuterAngle: componentData.coneOuterAngle,\n        coneOuterGain: componentData.coneOuterGain,\n        gain: componentData.volume\n      });\n      APP.sourceType.set(el, SourceType.MEDIA_VIDEO);\n\n      const audio = APP.audios.get(el);\n      if (audio) {\n        updateAudioSettings(el, audio);\n      }\n    }\n\n    el.setAttribute(\"video-pause-state\", { paused: mediaOptions.videoPaused });\n  }\n\n  if ((componentName === \"video\" || componentName === \"image\") && components.link) {\n    mediaOptions.href = sanitizeUrl(components.link.href);\n  }\n\n  const src = componentName === \"link\" ? componentData.href : componentData.src;\n\n  el.setAttribute(\"media-loader\", {\n    src: sanitizeUrl(src),\n    fitToBox: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    mediaOptions,\n    moveTheParentNotTheMesh: true\n  });\n}\n\nAFRAME.GLTFModelPlus.registerComponent(\"model\", \"model\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"image\", \"image\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"audio\", \"audio\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"video\", \"video\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"link\", \"link\", mediaInflator);\n\nAFRAME.GLTFModelPlus.registerComponent(\"hoverable\", \"is-remote-hover-target\", el => {\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"spawner\", \"spawner\", (el, componentName, componentData) => {\n  el.setAttribute(\"media-loader\", {\n    src: sanitizeUrl(componentData.src),\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    moveTheParentNotTheMesh: true\n  });\n  el.setAttribute(\"css-class\", \"interactable\");\n  el.setAttribute(\"super-spawner\", {\n    src: sanitizeUrl(componentData.src),\n    resolve: true,\n    template: \"#interactable-media\",\n    mediaOptions: componentData.mediaOptions || {}\n  });\n  el.setAttribute(\"hoverable-visuals\", \"\");\n  el.setAttribute(\"body-helper\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nconst publicComponents = {\n  video: {\n    mappedComponent: \"video-pause-state\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  },\n  \"loop-animation\": {\n    mappedComponent: \"loop-animation\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  }\n};\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"trigger-volume\",\n  \"trigger-volume\",\n  (el, componentName, componentData, components, indexToEntityMap) => {\n    const {\n      size,\n      target,\n      enterComponent,\n      enterProperty,\n      enterValue,\n      leaveComponent,\n      leaveProperty,\n      leaveValue\n    } = componentData;\n\n    let enterComponentMapping, leaveComponentMapping, targetEntity;\n\n    try {\n      enterComponentMapping = getSanitizedComponentMapping(enterComponent, enterProperty, publicComponents);\n      leaveComponentMapping = getSanitizedComponentMapping(leaveComponent, leaveProperty, publicComponents);\n\n      // indexToEntityMap should be considered depredcated. These references are now resovled by the GLTFHubsComponentExtension\n      if (typeof target === \"number\") {\n        targetEntity = indexToEntityMap[target];\n      } else {\n        targetEntity = target?.el;\n      }\n\n      if (!targetEntity) {\n        throw new Error(`Couldn't find target entity with index: ${target}.`);\n      }\n    } catch (e) {\n      console.warn(`Error inflating gltf component \"trigger-volume\": ${e.message}`);\n      return;\n    }\n\n    // Filter out scope and colliders properties.\n    el.setAttribute(\"trigger-volume\", {\n      colliders: \"#avatar-pov-node\",\n      size,\n      target: targetEntity,\n      enterComponent: enterComponentMapping.mappedComponent,\n      enterProperty: enterComponentMapping.mappedProperty,\n      enterValue: enterComponentMapping.getMappedValue(enterValue),\n      leaveComponent: leaveComponentMapping.mappedComponent,\n      leaveProperty: leaveComponentMapping.mappedProperty,\n      leaveValue: leaveComponentMapping.getMappedValue(leaveValue)\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"heightfield\", \"heightfield\", (el, componentName, componentData) => {\n  el.setAttribute(\"shape-helper__heightfield\", {\n    type: SHAPE.HEIGHTFIELD,\n    margin: 0.01,\n    fit: FIT.MANUAL,\n    heightfieldDistance: componentData.distance,\n    offset: componentData.offset,\n    heightfieldData: componentData.data\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"trimesh\", \"trimesh\", el => {\n  el.setAttribute(\"shape-helper__trimesh\", {\n    type: SHAPE.MESH,\n    margin: 0.01,\n    fit: FIT.ALL,\n    includeInvisible: true\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"particle-emitter\", \"particle-emitter\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"networked-drawing-buffer\", \"networked-drawing-buffer\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"audio-settings\", \"audio-settings\", (el, _componentName, componentData) => {\n  const removeUndefined = obj => {\n    return Object.entries(obj).reduce((result, [key, value]) => {\n      if (value !== undefined) {\n        result[key] = value;\n      }\n      return result;\n    }, {});\n  };\n  // TODO: This component should only overwrite the scene audio defaults if this\n  //       component is on the scene node. If this component is on some other node\n  //       we don't care about it and should ignore it.\n  APP.sceneAudioDefaults.set(\n    SourceType.MEDIA_VIDEO,\n    removeUndefined({\n      distanceModel: componentData.mediaDistanceModel,\n      rolloffFactor: componentData.mediaRolloffFactor,\n      refDistance: componentData.mediaRefDistance,\n      maxDistance: componentData.mediaMaxDistance,\n      coneInnerAngle: componentData.mediaConeInnerAngle,\n      coneOuterAngle: componentData.mediaConeOuterAngle,\n      coneOuterGain: componentData.mediaConeOuterGain,\n      gain: componentData.mediaVolume\n    })\n  );\n  APP.sceneAudioDefaults.set(\n    SourceType.AVATAR_AUDIO_SOURCE,\n    removeUndefined({\n      distanceModel: componentData.avatarDistanceModel,\n      rolloffFactor: componentData.avatarRolloffFactor,\n      refDistance: componentData.avatarRefDistance,\n      maxDistance: componentData.avatarMaxDistance,\n      coneInnerAngle: componentData.avatarConeInnerAngle,\n      coneOuterAngle: componentData.avatarConeOuterAngle,\n      coneOuterGain: componentData.avatarConeOuterGain,\n      gain: componentData.avatarVolume\n    })\n  );\n  for (const [el, audio] of APP.audios.entries()) {\n    updateAudioSettings(el, audio);\n  }\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"video-texture-target\",\n  \"video-texture-target\",\n  (el, componentName, componentData, _components, indexToEntityMap) => {\n    const { targetBaseColorMap, targetEmissiveMap, srcNode } = componentData;\n\n    let srcEl;\n    if (srcNode !== undefined) {\n      // indexToEntityMap should be considered depredcated. These references are now resovled by the GLTFHubsComponentExtension\n      if (typeof srcNode === \"number\") {\n        srcEl = indexToEntityMap[srcNode];\n      } else {\n        srcEl = srcNode?.el;\n      }\n      if (!srcEl) {\n        console.warn(\n          `Error inflating gltf component \"video-texture-srcEl\": Couldn't find srcEl entity with index ${srcNode}`\n        );\n      }\n    }\n\n    el.setAttribute(componentName, {\n      src: srcEl ? \"el\" : \"\",\n      targetBaseColorMap,\n      targetEmissiveMap,\n      srcEl\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"video-texture-source\", \"video-texture-source\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"text\", \"text\");\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"audio-target\",\n  \"audio-target\",\n  (el, componentName, componentData, _components, indexToEntityMap) => {\n    const { srcNode } = componentData;\n\n    let srcEl;\n    if (srcNode !== undefined) {\n      // indexToEntityMap should be considered depredcated. These references are now resovled by the GLTFHubsComponentExtension\n      if (typeof srcNode === \"number\") {\n        srcEl = indexToEntityMap[srcNode];\n      } else {\n        srcEl = srcNode?.el;\n      }\n      if (!srcEl) {\n        console.warn(\n          `Error inflating gltf component ${componentName}: Couldn't find srcEl entity with index ${srcNode}`\n        );\n      }\n    }\n\n    if (componentData.positional !== undefined) {\n      // This is an old version of the audio-target component, which had built-in audio parameters.\n      // The way we are handling it is wrong. If a user created a scene in spoke with this old version\n      // of this component, all of these parameters will be present whether the user explicitly set\n      // the values for them or not. But really, they should only count as \"overrides\" if the user\n      // meant for them to take precendence over the app and scene defaults.\n      // TODO: Fix this issue. One option is to just ignore this component data, which might break old scenes\n      //       but simplifying the handling. Another option is to compare the component data here with\n      //       the \"defaults\" and only save the values that are different from the defaults. However,\n      //       this loses information if the user changed the scene settings but wanted this specific\n      //       node to use the \"defaults\".\n      //       I don't see a perfect solution here and would prefer not to handle the \"legacy\" components.\n      APP.audioOverrides.set(el, {\n        audioType: componentData.positional ? AudioType.PannerNode : AudioType.Stereo,\n        distanceModel: componentData.distanceModel,\n        rolloffFactor: componentData.rolloffFactor,\n        refDistance: componentData.refDistance,\n        maxDistance: componentData.maxDistance,\n        coneInnerAngle: componentData.coneInnerAngle,\n        coneOuterAngle: componentData.coneOuterAngle,\n        coneOuterGain: componentData.coneOuterGain,\n        gain: componentData.gain\n      });\n      APP.sourceType.set(el, SourceType.AUDIO_TARGET);\n\n      const audio = APP.audios.get(el);\n      if (audio) {\n        updateAudioSettings(el, audio);\n      }\n    }\n\n    el.setAttribute(componentName, {\n      minDelay: componentData.minDelay,\n      maxDelay: componentData.maxDelay,\n      debug: componentData.debug,\n      srcEl\n    });\n  }\n);\nAFRAME.GLTFModelPlus.registerComponent(\"zone-audio-source\", \"zone-audio-source\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"audio-params\", \"audio-params\", (el, componentName, componentData) => {\n  APP.audioOverrides.set(el, componentData);\n  const audio = APP.audios.get(el);\n  if (audio) {\n    updateAudioSettings(el, audio);\n  }\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"audio-zone\", \"audio-zone\", (el, componentName, componentData) => {\n  el.setAttribute(componentName, { ...componentData });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"background\", \"background\", (el, _componentName, componentData) => {\n  console.warn(\n    \"The `background` component is deprecated, use `backgroundColor` on the `environment-settings` component instead.\"\n  );\n  // This assumes the background component is on the root entity, which it is for spoke, the only thing using this component\n  el.setAttribute(\"environment-settings\", { backgroundColor: new THREE.Color(componentData.color) });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"fog\", \"fog\", (el, _componentName, componentData) => {\n  // TODO need to actually implement this in blender exporter before showing this warning\n  // console.warn(\n  //   \"The `fog` component is deprecated, use the fog properties on the `environment-settings` component instead.\"\n  // );\n  // This assumes the fog component is on the root entitycoco\n  el.setAttribute(\"environment-settings\", {\n    fogType: componentData.type,\n    fogColor: new THREE.Color(componentData.color),\n    fogNear: componentData.near,\n    fogFar: componentData.far,\n    fogDensity: componentData.density\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"environment-settings\",\n  \"environment-settings\",\n  (el, componentName, componentData) => {\n    // TODO a bit silly to be storing this as an aframe component. Use a glboal store of some sort\n    el.setAttribute(componentName, {\n      ...componentData,\n      backgroundColor: new THREE.Color(componentData.backgroundColor)\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"reflection-probe\", \"reflection-probe\", (el, componentName, componentData) => {\n  // TODO PMREMGenerator should be fixed to not assume this\n  componentData.envMapTexture.flipY = true;\n  // Assume texture is always an equirect for now\n  componentData.envMapTexture.mapping = THREE.EquirectangularReflectionMapping;\n\n  el.setAttribute(componentName, componentData);\n});\n","import { GUI } from \"three/examples/jsm/libs/lil-gui.module.min\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nimport { LUTCubeLoader } from \"three/examples/jsm/loaders/LUTCubeLoader\";\nimport blenderLutPath from \"../assets/blender-lut.cube\";\n\nconst toneMappingOptions = {\n  None: \"NoToneMapping\",\n  Linear: \"LinearToneMapping\",\n  Reinhard: \"ReinhardToneMapping\",\n  Cineon: \"CineonToneMapping\",\n  ACESFilmic: \"ACESFilmicToneMapping\",\n  CustomToneMapping: \"CustomToneMapping\",\n  LUTToneMapping: \"LUTToneMapping\"\n};\n\nconst outputEncodingOptions = {\n  LinearEncoding: \"LinearEncoding\",\n  sRGBEncoding: \"sRGBEncoding\",\n  GBEEncoding: \"GBEEncoding\",\n  GBM7Encoding: \"GBM7Encoding\",\n  GBDEncoding: \"GBDEncoding\",\n  BasicDepthPacking: \"BasicDepthPacking\",\n  GBADepthPacking: \"GBADepthPackig\"\n};\n\nconst defaultEnvSettings = {\n  toneMapping: toneMappingOptions.Linear,\n  outputEncoding: outputEncodingOptions.sRGBEncoding,\n  toneMappingExposure: 1,\n  physicallyCorrectLights: true,\n  envMapTexture: null,\n  backgroundTexture: null,\n  backgroundColor: new THREE.Color(\"#000000\"),\n\n  fogType: null,\n  fogColor: new THREE.Color(\"#ffffff\"),\n  fogDensity: 0.00025,\n  fogFar: 1000,\n  fogNear: 1\n};\n\nlet blenderLUTPromise; // lazy loaded\n\nexport class EnvironmentSystem {\n  constructor(sceneEl) {\n    this.scene = sceneEl.object3D;\n    this.renderer = sceneEl.renderer;\n\n    this.pmremGenerator = new THREE.PMREMGenerator(this.renderer);\n\n    this.applyEnvSettings(defaultEnvSettings);\n\n    if (qsTruthy(\"envSettingsDebug\")) {\n      this.setupDebugView();\n    }\n  }\n\n  setupDebugView() {\n    const debugSettings = { ...defaultEnvSettings };\n\n    const updateDebug = () => {\n      this.applyEnvSettings(debugSettings);\n    };\n\n    const gui = new GUI();\n    gui\n      .add(debugSettings, \"toneMapping\", Object.values(toneMappingOptions))\n      .onChange(updateDebug)\n      .listen();\n    gui\n      .add(debugSettings, \"toneMappingExposure\", 0, 4, 0.01)\n      .onChange(updateDebug)\n      .listen();\n    gui\n      .add(debugSettings, \"outputEncoding\", Object.values(outputEncodingOptions))\n      .onChange(updateDebug)\n      .listen();\n    gui\n      .add(debugSettings, \"physicallyCorrectLights\", true)\n      .onChange(updateDebug)\n      .listen();\n    gui.open();\n\n    this.debugGui = gui;\n    this.debugSettings = debugSettings;\n    this.debugMode = true;\n\n    window.$E = this;\n  }\n\n  updateEnvironment(envEl) {\n    const envSettingsEl = envEl.querySelector(\"[environment-settings]\");\n    const skyboxEl = envEl.querySelector(\"[skybox]\");\n    const navmeshEl = envEl.querySelector(\"[nav-mesh]\");\n\n    const envSettings = {\n      ...defaultEnvSettings,\n      skybox: skyboxEl?.components[\"skybox\"]\n    };\n\n    if (envSettingsEl) {\n      Object.assign(envSettings, envSettingsEl.components[\"environment-settings\"].data);\n    }\n\n    const navMesh = navmeshEl?.object3D.getObjectByProperty(\"isMesh\", true);\n    if (navMesh) {\n      AFRAME.scenes[0].systems.nav.loadMesh(navMesh, navmeshEl.components[\"nav-mesh\"].data.zone);\n    }\n\n    // TODO animated objects should not be static\n    envEl.object3D.traverse(o => {\n      if (o.isMesh) {\n        o.reflectionProbeMode = \"static\";\n      }\n    });\n\n    this.applyEnvSettings(envSettings);\n  }\n\n  applyEnvSettings(settings) {\n    if (this.debugSettings) {\n      Object.assign(this.debugSettings, settings);\n    }\n\n    let materialsNeedUpdate = false;\n\n    if (this.debugMode) console.log(\"Applying environment settings\", settings);\n\n    if (this.renderer.physicallyCorrectLights !== settings.physicallyCorrectLights) {\n      this.renderer.physicallyCorrectLights = settings.physicallyCorrectLights;\n      materialsNeedUpdate = true;\n    }\n\n    const newToneMapping = THREE[settings.toneMapping];\n    if (this.renderer.toneMapping !== newToneMapping) {\n      this.renderer.toneMapping = newToneMapping;\n      materialsNeedUpdate = true;\n\n      // TODO clean up async behavior\n      if (newToneMapping === THREE.LUTToneMapping) {\n        if (!blenderLUTPromise) {\n          blenderLUTPromise = new Promise(function(resolve, reject) {\n            new LUTCubeLoader().load(blenderLutPath, ({ texture3D }) => resolve(texture3D), null, reject);\n          });\n        }\n\n        blenderLUTPromise\n          .then(t => {\n            this.renderer.tonemappingLUT = t;\n          })\n          .catch(function(e) {\n            console.error(\"Error loading Blender LUT\", e);\n            blenderLUTPromise = null;\n          });\n      } else {\n        this.renderer.tonemappingLUT = null;\n      }\n    }\n\n    this.renderer.toneMappingExposure = settings.toneMappingExposure;\n\n    const newOutputEncoding = THREE[settings.outputEncoding];\n    if (this.renderer.outputEncoding !== newOutputEncoding) {\n      this.renderer.outputEncoding = newOutputEncoding;\n      materialsNeedUpdate = true;\n    }\n\n    this.scene.remove(window.lp);\n\n    if (settings.backgroundTexture) {\n      // Assume texture is always an equirect for now\n      settings.backgroundTexture.mapping = THREE.EquirectangularReflectionMapping;\n      this.scene.background = settings.backgroundTexture;\n    } else {\n      this.scene.background = settings.backgroundColor;\n    }\n\n    if (settings.envMapTexture) {\n      if (this.prevEnvMapTextureUUID !== settings.envMapTexture.uuid) {\n        this.prevEnvMapTextureUUID = settings.envMapTexture.uuid;\n        // TODO PMREMGenerator should be fixed to not assume this\n        settings.envMapTexture.flipY = true;\n        // Assume texture is always an equirect for now\n        settings.envMapTexture.mapping = THREE.EquirectangularReflectionMapping;\n        this.scene.environment = settings.envMapTexture;\n      }\n    } else if (settings.skybox) {\n      if (this.prevEnvMapTextureUUID !== settings.skybox.uuid) {\n        this.prevEnvMapTextureUUID = settings.skybox.uuid;\n        this.scene.environment = settings.skybox.sky.generateEnvironmentMap(this.renderer);\n      }\n    } else {\n      this.scene.environment = null;\n      this.prevEnvMapTextureUUID = null;\n    }\n\n    if (this.scene.fog?.name !== settings.fogType) {\n      if (settings.fogType === \"linear\") {\n        this.scene.fog = new THREE.Fog(settings.fogColor, settings.fogNear, settings.fogFar);\n      } else if (settings.fogType === \"exponential\") {\n        this.scene.fog = new THREE.FogExp2(settings.fogColor, settings.fogDensity);\n      } else {\n        this.scene.fog = null;\n      }\n      materialsNeedUpdate = true;\n    } else if (settings.fogType) {\n      this.scene.fog.color.copy(settings.fogColor);\n      if (settings.fogType === \"linear\") {\n        this.scene.fog.near = settings.fogNear;\n        this.scene.fog.far = settings.fogFar;\n      } else if (settings.fogType === \"exponential\") {\n        this.scene.fog.density = settings.fogDensity;\n      }\n    }\n\n    if (materialsNeedUpdate) {\n      if (this.debugMode) console.log(\"materials need updating\");\n      this.scene.traverse(o => {\n        if (o.material) o.material.needsUpdate = true;\n      });\n    }\n  }\n}\n\nAFRAME.registerComponent(\"nav-mesh\", {\n  schema: {\n    zone: { default: \"character\" }\n  }\n});\n\nAFRAME.registerComponent(\"environment-settings\", {\n  schema: {\n    toneMapping: { default: defaultEnvSettings.toneMapping, oneOf: Object.values(toneMappingOptions) },\n    toneMappingExposure: { default: defaultEnvSettings.toneMappingExposure },\n    backgroundColor: { type: \"color\", default: defaultEnvSettings.background },\n\n    fogType: { type: \"string\", default: defaultEnvSettings.fogType },\n    fogColor: { type: \"color\", default: defaultEnvSettings.fogColor },\n    fogDensity: { type: \"number\", default: defaultEnvSettings.fogDensity },\n    fogNear: { type: \"number\", default: defaultEnvSettings.forNear },\n    fogFar: { type: \"number\", default: defaultEnvSettings.fogFar }\n  }\n});\n\nAFRAME.registerComponent(\"reflection-probe\", {\n  schema: {\n    size: { default: 1 },\n    envMapTexture: { type: \"map\" }\n  },\n\n  init: function() {\n    this.el.object3D.updateMatrices();\n\n    const box = new THREE.Box3()\n      .setFromCenterAndSize(new THREE.Vector3(), new THREE.Vector3().setScalar(this.data.size * 2))\n      .applyMatrix4(this.el.object3D.matrixWorld);\n\n    this.el.setObject3D(\"probe\", new THREE.ReflectionProbe(box, this.data.envMapTexture));\n\n    if (this.el.sceneEl.systems[\"hubs-systems\"].environmentSystem.debugMode) {\n      const debugBox = new THREE.Box3().setFromCenterAndSize(\n        new THREE.Vector3(),\n        new THREE.Vector3().setScalar(this.data.size * 2)\n      );\n      this.el.setObject3D(\n        \"helper\",\n        new THREE.Box3Helper(debugBox, new THREE.Color(Math.random(), Math.random(), Math.random()))\n      );\n    }\n  }\n});\n","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // Hash can't be overriden like the other elements, but needs to be preserved for things like deep linking waypoints\n  const hash = history.location.hash;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state, hash });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","import { addComponent, removeComponent } from \"bitecs\";\nimport {\n  RemoteRight,\n  RemoteLeft,\n  HandRight,\n  HandLeft,\n  RemoteHoverTarget,\n  NotRemoteHoverTarget,\n  RemoveNetworkedEntityButton,\n  DestroyAtExtremeDistance\n} from \"./bit-components\";\n\n[\n  [\"remote-right\", RemoteRight],\n  [\"remote-left\", RemoteLeft],\n  [\"hand-right\", HandRight],\n  [\"hand-left\", HandLeft],\n  [\"is-remote-hover-target\", RemoteHoverTarget],\n  [\"is-not-remote-hover-target\", NotRemoteHoverTarget],\n  [\"remove-networked-object-button\", RemoveNetworkedEntityButton],\n  [\"destroy-at-extreme-distances\", DestroyAtExtremeDistance]\n].forEach(([aframeComponentName, bitecsComponent]) => {\n  AFRAME.registerComponent(aframeComponentName, {\n    init: function() {\n      addComponent(APP.world, bitecsComponent, this.el.object3D.eid);\n    },\n    remove: function() {\n      removeComponent(APP.world, bitecsComponent, this.el.object3D.eid);\n    }\n  });\n});\n","import { EventTarget } from \"event-target-shim\";\nimport configs from \"../utils/configs\";\nimport { getReticulumFetchUrl, fetchReticulumAuthenticated, hasReticulumServer } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\n\nconst EMPTY_RESULT = { entries: [], meta: {} };\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  twitch: \"twitch\",\n  favorites: \"favorites\"\n};\n\nconst desiredSources = [\"sketchfab\", \"videos\", \"scenes\", \"avatars\", \"gifs\", \"images\"];\nconst availableSources = desiredSources.filter(source => {\n  const apiSource = URL_SOURCE_TO_TO_API_SOURCE[source];\n  return configs.integration(apiSource);\n});\nexport const SOURCES = availableSources;\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\",\n  favorites: \"my-favorites\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\", \"similar_to\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n    const locationSearchParams = new URLSearchParams(location.search);\n    const isMy = locationSearchParams.get(\"filter\") && locationSearchParams.get(\"filter\").startsWith(\"my-\");\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      source = isMy ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    let fetch = true;\n\n    if (source === \"avatars\" || source === \"scenes\" || source === \"favorites\") {\n      if (isMy) {\n        if (window.APP.store.credentialsAccountId) {\n          searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n        } else {\n          fetch = false; // Don't fetch my-* if not signed in\n        }\n      }\n    }\n\n    const path = `/api/v1/media/search?${searchParams.toString()}`;\n    const url = getReticulumFetchUrl(path);\n    if (this.lastSavedUrl === url) return;\n\n    this.isFetching = true;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    const result = fetch ? await fetchReticulumAuthenticated(path) : EMPTY_RESULT;\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result && this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.isFetching = false;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    searchParams.delete(\"similar_to\");\n    searchParams.delete(\"similar_name\");\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav, keepSelectAction) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n    searchParams.delete(\"similar_to\");\n    searchParams.delete(\"similar_name\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    if (!keepSelectAction) {\n      searchParams.delete(\"selectAction\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n\n    this._stashedParams = {};\n    this._stashedSource = null;\n\n    const source = this.getUrlMediaSource(location);\n\n    // HACK for now do not stash favorite search, since that ends up being a source\n    // we do not reveal in the media browser UX. Revisit the rules here when we have a\n    // proper favorites browser. Then, we should have two separate stashes.\n    if (source === \"favorites\") return;\n    this._stashedSource = source;\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = (source, selectAction) => {\n    this._sourceNavigate(source, true, false, selectAction);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams, selectAction) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (selectAction) {\n      searchParams.set(\"selectAction\", selectAction);\n    }\n\n    if (hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const result = await fetchReticulumAuthenticated(`/api/v1/media/search?${searchParams.toString()}`);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","import * as bitecs from \"bitecs\";\nimport { addEntity, createWorld } from \"bitecs\";\nimport \"./aframe-to-bit-components\";\nimport { AEntity, Networked, Object3DTag, Owned } from \"./bit-components\";\nimport MediaSearchStore from \"./storage/media-search-store\";\nimport Store from \"./storage/store\";\nimport qsTruthy from \"./utils/qs_truthy\";\n\nwindow.$B = bitecs;\n\nconst timeSystem = world => {\n  const { time } = world;\n  const now = performance.now();\n  const delta = now - time.then;\n  time.delta = delta;\n  time.elapsed += delta;\n  time.then = now;\n  time.tick++;\n  return world;\n};\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n    this.hubChannel = null;\n    this.mediaDevicesManager = null;\n\n    // TODO: Remove comments\n    // TODO: Rename or reconfigure these as needed\n    this.audios = new Map(); //                           el -> (THREE.Audio || THREE.PositionalAudio)\n    this.sourceType = new Map(); //                       el -> SourceType\n    this.audioOverrides = new Map(); //                   el -> AudioSettings\n    this.zoneOverrides = new Map(); //                    el -> AudioSettings\n    this.audioDebugPanelOverrides = new Map(); // SourceType -> AudioSettings\n    this.sceneAudioDefaults = new Map(); //       SourceType -> AudioSettings\n    this.gainMultipliers = new Map(); //                  el -> Number\n    this.supplementaryAttenuation = new Map(); //         el -> Number\n    this.clippingState = new Set();\n    this.mutedState = new Set();\n    this.isAudioPaused = new Set();\n\n    this.world = createWorld();\n\n    // TODO: Create accessor / update methods for these maps / set\n    this.world.eid2obj = new Map(); // eid -> Object3D\n\n    this.world.nid2eid = new Map();\n    this.world.deletedNids = new Set();\n    this.world.ignoredNids = new Set();\n\n    this.str2sid = new Map([[null, 0]]);\n    this.sid2str = new Map([[0, null]]);\n    this.nextSid = 1;\n\n    window.$o = eid => {\n      this.world.eid2obj.get(eid);\n    };\n\n    // reserve entity 0 to avoid needing to check for undefined everywhere eid is checked for existance\n    addEntity(this.world);\n\n    // used in aframe and networked aframe to avoid imports\n    this.world.nameToComponent = {\n      object3d: Object3DTag,\n      networked: Networked,\n      owned: Owned,\n      AEntity\n    };\n  }\n\n  // TODO nothing ever cleans these up\n  getSid(str) {\n    if (!this.str2sid.has(str)) {\n      const sid = this.nextSid;\n      this.nextSid = this.nextSid + 1;\n      this.str2sid.set(str, sid);\n      this.sid2str.set(sid, str);\n      return sid;\n    }\n    return this.str2sid.get(str);\n  }\n\n  getString(sid) {\n    return this.sid2str.get(sid);\n  }\n\n  // This gets called by a-scene to setup the renderer, camera, and audio listener\n  // TODO ideally the contorl flow here would be inverted, and we would setup this stuff,\n  // initialize aframe, and then run our own RAF loop\n  setupRenderer(sceneEl) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.classList.add(\"a-canvas\");\n    canvas.dataset.aframeCanvas = true;\n\n    // TODO this comes from aframe and prevents zoom on ipad.\n    // This should alreeady be handleed by disable-ios-zoom but it does not appear to work\n    canvas.addEventListener(\"touchmove\", function(event) {\n      event.preventDefault();\n    });\n\n    const renderer = new THREE.WebGLRenderer({\n      // TODO we should not be using alpha: false https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#avoid_alphafalse_which_can_be_expensive\n      alpha: true,\n      antialias: true,\n      depth: true,\n      stencil: true,\n      premultipliedAlpha: true,\n      preserveDrawingBuffer: false,\n      logarithmicDepthBuffer: false,\n      // TODO we probably want high-performance\n      powerPreference: \"high-performance\",\n      canvas\n    });\n\n    renderer.setPixelRatio(window.devicePixelRatio);\n\n    renderer.debug.checkShaderErrors = qsTruthy(\"checkShaderErrors\");\n\n    // These get overridden by environment-system but setting to the highly expected defaults to avoid any extra work\n    renderer.physicallyCorrectLights = true;\n    renderer.outputEncoding = THREE.sRGBEncoding;\n\n    sceneEl.appendChild(renderer.domElement);\n\n    const camera = new THREE.PerspectiveCamera(80, window.innerWidth / window.innerHeight, 0.05, 10000);\n\n    const audioListener = new THREE.AudioListener();\n    APP.audioListener = audioListener;\n    camera.add(audioListener);\n\n    const renderClock = new THREE.Clock();\n\n    // TODO NAF currently depends on this, it should not\n    sceneEl.clock = renderClock;\n\n    // TODO we should have 1 source of truth for time\n    APP.world.time = {\n      delta: 0,\n      elapsed: 0,\n      then: performance.now(),\n      tick: 0\n    };\n\n    APP.world.scene = sceneEl.object3D;\n\n    // Main RAF loop\n    function mainTick(_rafTime, xrFrame) {\n      // TODO we should probably be using time from the raf loop itself\n      const delta = renderClock.getDelta() * 1000;\n      const time = renderClock.elapsedTime * 1000;\n\n      // TODO pass this into systems that care about it (like input) once they are moved into this loop\n      sceneEl.frame = xrFrame;\n\n      timeSystem(APP.world);\n\n      // Tick AFrame systems and components\n      if (sceneEl.isPlaying) {\n        sceneEl.tick(time, delta);\n      }\n\n      renderer.render(sceneEl.object3D, camera);\n    }\n\n    // This gets called after all system and component init functions\n    sceneEl.addEventListener(\"loaded\", () => {\n      renderer.setAnimationLoop(mainTick);\n      sceneEl.renderStarted = true;\n    });\n\n    return {\n      renderer,\n      camera,\n      audioListener\n    };\n  }\n}\n","import Raven from \"raven-js\";\nimport configs from \"./utils/configs\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = configs.SENTRY_DSN;\n  const gaTrackingId = configs.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider } from \"react-intl\";\nimport \"@formatjs/intl-locale/polyfill\";\nimport \"@formatjs/intl-pluralrules/polyfill\";\nimport \"@formatjs/intl-pluralrules/locale-data/en\";\nimport \"@formatjs/intl-relativetimeformat/polyfill\";\nimport \"@formatjs/intl-relativetimeformat/locale-data/en\";\nimport { getLocale, getMessages } from \"../utils/i18n\";\n\nexport class WrappedIntlProvider extends React.Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired\n  };\n\n  state = {\n    locale: getLocale(),\n    messages: getMessages()\n  };\n\n  updateLocale = () => {\n    this.setState({ locale: getLocale(), messages: getMessages() });\n  };\n\n  componentDidMount() {\n    this.updateLocale();\n    window.addEventListener(\"locale-updated\", this.updateLocale);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"locale-updated\", this.updateLocale);\n  }\n\n  render() {\n    return (\n      <IntlProvider locale={this.state.locale} messages={this.state.messages}>\n        {this.props.children}\n      </IntlProvider>\n    );\n  }\n}\n","import \"./utils/theme\";\nimport \"./utils/configs\";\n\nconsole.log(`Hubs version: ${process.env.BUILD_VERSION || \"?\"}`);\n\nimport \"./react-components/styles/global.scss\";\nimport \"./assets/stylesheets/scene.scss\";\n\nimport \"aframe\";\nimport \"./utils/logging\";\nimport { patchWebGLRenderingContext } from \"./utils/webgl\";\npatchWebGLRenderingContext();\n\nimport \"./components/scene-components\";\nimport \"./components/debug\";\nimport \"./systems/nav\";\n\nimport { connectToReticulum, fetchReticulumAuthenticated } from \"./utils/phoenix-utils\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport jwtDecode from \"jwt-decode\";\nimport SceneUI from \"./react-components/scene-ui\";\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\n\nimport \"./systems/scene-systems\";\nimport \"./gltf-component-mappings\";\nimport { EnvironmentSystem } from \"./systems/environment-system\";\n\nimport { App } from \"./App\";\n\nwindow.APP = new App();\n\nconst qs = new URLSearchParams(location.search);\n\nimport \"./components/event-repeater\";\n\nimport registerTelemetry from \"./telemetry\";\nimport { WrappedIntlProvider } from \"./react-components/wrapped-intl-provider\";\nimport { ThemeProvider } from \"./react-components/styles/theme\";\n\ndisableiOSZoom();\n\nfunction mountUI(scene, props = {}) {\n  ReactDOM.render(\n    <WrappedIntlProvider>\n      <ThemeProvider store={window.APP.store}>\n        <SceneUI\n          {...{\n            scene,\n            store: window.APP.store,\n            ...props\n          }}\n        />\n      </ThemeProvider>\n    </WrappedIntlProvider>,\n    document.getElementById(\"ui-root\")\n  );\n}\n\nconst onReady = async () => {\n  console.log(\"Scene is ready\");\n\n  const scene = document.querySelector(\"a-scene\");\n  window.APP.scene = scene;\n\n  const sceneId = qs.get(\"scene_id\") || document.location.pathname.substring(1).split(\"/\")[1];\n  console.log(`Scene ID: ${sceneId}`);\n\n  let uiProps = { sceneId: sceneId };\n\n  mountUI(scene);\n\n  const remountUI = props => {\n    uiProps = { ...uiProps, ...props };\n    mountUI(scene, uiProps);\n  };\n\n  const sceneRoot = document.querySelector(\"#scene-root\");\n  const sceneModelEntity = document.createElement(\"a-entity\");\n  const gltfEl = document.createElement(\"a-entity\");\n  const camera = document.getElementById(\"camera\");\n\n  connectToReticulum().then(socket => {\n    const joinParams = { hub_id: \"scene\" };\n\n    if (window.APP.store.state.credentials && window.APP.store.state.credentials.token) {\n      joinParams.token = window.APP.store.state.credentials.token;\n    }\n\n    const retPhxChannel = socket.channel(\"ret\", joinParams);\n\n    retPhxChannel.join().receive(\"ok\", () => {\n      retPhxChannel.push(\"refresh_perms_token\").receive(\"ok\", ({ perms_token }) => {\n        const perms = jwtDecode(perms_token);\n        remountUI({ showCreateRoom: !!perms.create_hub });\n\n        retPhxChannel.leave();\n        socket.disconnect();\n      });\n    });\n  });\n\n  const envSystem = new EnvironmentSystem(scene);\n\n  sceneModelEntity.addEventListener(\"environment-scene-loaded\", () => {\n    remountUI({ sceneLoaded: true });\n    const previewCamera = gltfEl.object3D.getObjectByName(\"scene-preview-camera\");\n\n    if (previewCamera) {\n      console.log(\"Setting up preview camera\");\n      camera.object3D.position.copy(previewCamera.position);\n      camera.object3D.rotation.copy(previewCamera.rotation);\n      camera.object3D.matrixNeedsUpdate = true;\n    } else {\n      console.warn(\"No preview camera found\");\n    }\n\n    camera.setAttribute(\"scene-preview-camera\", \"\");\n\n    const environmentEl = sceneModelEntity.childNodes[0];\n    envSystem.updateEnvironment(environmentEl);\n  });\n\n  const res = await fetchReticulumAuthenticated(`/api/v1/scenes/${sceneId}`);\n  const sceneInfo = res.scenes[0];\n\n  // Delisted/Removed\n  if (!sceneInfo) {\n    remountUI({ unavailable: true });\n    return;\n  }\n\n  if (sceneInfo.allow_promotion) {\n    registerTelemetry(`/scene/${sceneId}`, `Hubs Scene: ${sceneInfo.title}`);\n  } else {\n    registerTelemetry(\"/scene\", \"Hubs Non-Promotable Scene Page\");\n  }\n\n  const modelUrl = sceneInfo.model_url;\n  console.log(`Scene Model URL: ${modelUrl}`);\n\n  gltfEl.setAttribute(\"gltf-model-plus\", { src: modelUrl, useCache: false, inflate: true });\n  gltfEl.addEventListener(\"model-loaded\", ({ detail: { model } }) =>\n    sceneModelEntity.emit(\"environment-scene-loaded\", model)\n  );\n  sceneModelEntity.appendChild(gltfEl);\n  sceneRoot.appendChild(sceneModelEntity);\n\n  const parentScene =\n    sceneInfo.parent_scene_id &&\n    (await fetchReticulumAuthenticated(`/api/v1/scenes/${sceneInfo.parent_scene_id}`)).scenes[0];\n\n  remountUI({\n    sceneName: sceneInfo.name,\n    sceneDescription: sceneInfo.description,\n    sceneAttributions: sceneInfo.attributions,\n    sceneScreenshotURL: sceneInfo.screenshot_url,\n    sceneId: sceneInfo.scene_id,\n    sceneProjectId: sceneInfo.project_id,\n    sceneAllowRemixing: sceneInfo.allow_remixing,\n    isOwner: sceneInfo.account_id && sceneInfo.account_id === window.APP.store.credentialsAccountId,\n    parentScene: parentScene\n  });\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", onReady);\n","/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nTHREE.Water = function(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const textureWidth = options.textureWidth !== undefined ? options.textureWidth : 512;\n  const textureHeight = options.textureHeight !== undefined ? options.textureHeight : 512;\n\n  const clipBias = options.clipBias !== undefined ? options.clipBias : 0.0;\n  const alpha = options.alpha !== undefined ? options.alpha : 1.0;\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  //\n\n  const mirrorPlane = new THREE.Plane();\n  const normal = new THREE.Vector3();\n  const mirrorWorldPosition = new THREE.Vector3();\n  const cameraWorldPosition = new THREE.Vector3();\n  const rotationMatrix = new THREE.Matrix4();\n  const lookAtPosition = new THREE.Vector3(0, 0, -1);\n  const clipPlane = new THREE.Vector4();\n\n  const view = new THREE.Vector3();\n  const target = new THREE.Vector3();\n  const q = new THREE.Vector4();\n\n  const textureMatrix = new THREE.Matrix4();\n\n  const mirrorCamera = new THREE.PerspectiveCamera();\n\n  const parameters = {\n    minFilter: THREE.LinearFilter,\n    magFilter: THREE.LinearFilter,\n    format: THREE.RGBAFormat,\n    stencilBuffer: false\n  };\n\n  const renderTarget = new THREE.WebGLRenderTarget(textureWidth, textureHeight, parameters);\n\n  if (!THREE.MathUtils.isPowerOfTwo(textureWidth) || !THREE.MathUtils.isPowerOfTwo(textureHeight)) {\n    renderTarget.texture.generateMipmaps = false;\n  }\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"fog\"],\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        mirrorSampler: { value: null },\n        alpha: { value: 1.0 },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        textureMatrix: { value: new THREE.Matrix4() },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: [\n      \"uniform mat4 textureMatrix;\",\n      \"uniform float time;\",\n\n      \"varying vec4 mirrorCoord;\",\n      \"varying vec4 worldPosition;\",\n\n      THREE.ShaderChunk[\"fog_pars_vertex\"],\n      THREE.ShaderChunk[\"shadowmap_pars_vertex\"],\n\n      \"void main() {\",\n      \"\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\",\n      \"\tworldPosition = mirrorCoord.xyzw;\",\n      \"\tmirrorCoord = textureMatrix * mirrorCoord;\",\n      \"\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\",\n      \"\tgl_Position = projectionMatrix * mvPosition;\",\n\n      THREE.ShaderChunk[\"fog_vertex\"],\n      THREE.ShaderChunk[\"shadowmap_vertex\"],\n\n      \"}\"\n    ].join(\"\\n\"),\n\n    fragmentShader: [\n      \"uniform sampler2D mirrorSampler;\",\n      \"uniform float alpha;\",\n      \"uniform float time;\",\n      \"uniform float size;\",\n      \"uniform float distortionScale;\",\n      \"uniform sampler2D normalSampler;\",\n      \"uniform vec3 sunColor;\",\n      \"uniform vec3 sunDirection;\",\n      \"uniform vec3 eye;\",\n      \"uniform vec3 waterColor;\",\n\n      \"varying vec4 mirrorCoord;\",\n      \"varying vec4 worldPosition;\",\n\n      \"vec4 getNoise( vec2 uv ) {\",\n      \"\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\",\n      \"\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\",\n      \"\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\",\n      \"\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\",\n      \"\tvec4 noise = texture2D( normalSampler, uv0 ) +\",\n      \"\t\ttexture2D( normalSampler, uv1 ) +\",\n      \"\t\ttexture2D( normalSampler, uv2 ) +\",\n      \"\t\ttexture2D( normalSampler, uv3 );\",\n      \"\treturn noise * 0.5 - 1.0;\",\n      \"}\",\n\n      \"void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\",\n      \"\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\",\n      \"\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\",\n      \"\tspecularColor += pow( direction, shiny ) * sunColor * spec;\",\n      \"\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\",\n      \"}\",\n\n      THREE.ShaderChunk[\"common\"],\n      THREE.ShaderChunk[\"packing\"],\n      THREE.ShaderChunk[\"bsdfs\"],\n      THREE.ShaderChunk[\"fog_pars_fragment\"],\n      THREE.ShaderChunk[\"lights_pars_begin\"],\n      THREE.ShaderChunk[\"shadowmap_pars_fragment\"],\n      THREE.ShaderChunk[\"shadowmask_pars_fragment\"],\n\n      \"void main() {\",\n      \"\tvec4 noise = getNoise( worldPosition.xz * size );\",\n      \"\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\",\n\n      \"\tvec3 diffuseLight = vec3(0.0);\",\n      \"\tvec3 specularLight = vec3(0.0);\",\n\n      \"\tvec3 worldToEye = eye-worldPosition.xyz;\",\n      \"\tvec3 eyeDirection = normalize( worldToEye );\",\n      \"\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\",\n\n      \"\tfloat distance = length(worldToEye);\",\n\n      \"\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\",\n      \"\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion ) );\",\n\n      \"\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\",\n      \"\tfloat rf0 = 0.3;\",\n      \"\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\",\n      \"\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\",\n      \"\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);\",\n      \"\tvec3 outgoingLight = albedo;\",\n      \"\tgl_FragColor = vec4( outgoingLight, alpha );\",\n\n      THREE.ShaderChunk[\"tonemapping_fragment\"],\n      THREE.ShaderChunk[\"fog_fragment\"],\n\n      \"}\"\n    ].join(\"\\n\")\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: true,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.mirrorSampler.value = renderTarget.texture;\n  material.uniforms.textureMatrix.value = textureMatrix;\n  material.uniforms.alpha.value = alpha;\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n  scope.mirrorCamera = mirrorCamera;\n\n  scope.onBeforeRender = function(renderer, scene, camera) {\n    mirrorWorldPosition.setFromMatrixPosition(scope.matrixWorld);\n    cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n\n    rotationMatrix.extractRotation(scope.matrixWorld);\n\n    normal.set(0, 0, 1);\n    normal.applyMatrix4(rotationMatrix);\n\n    view.subVectors(mirrorWorldPosition, cameraWorldPosition);\n\n    // Avoid rendering when mirror is facing away\n\n    if (view.dot(normal) > 0) return;\n\n    view.reflect(normal).negate();\n    view.add(mirrorWorldPosition);\n\n    rotationMatrix.extractRotation(camera.matrixWorld);\n\n    lookAtPosition.set(0, 0, -1);\n    lookAtPosition.applyMatrix4(rotationMatrix);\n    lookAtPosition.add(cameraWorldPosition);\n\n    target.subVectors(mirrorWorldPosition, lookAtPosition);\n    target.reflect(normal).negate();\n    target.add(mirrorWorldPosition);\n\n    mirrorCamera.position.copy(view);\n    mirrorCamera.up.set(0, 1, 0);\n    mirrorCamera.up.applyMatrix4(rotationMatrix);\n    mirrorCamera.up.reflect(normal);\n    mirrorCamera.lookAt(target);\n\n    mirrorCamera.far = camera.far; // Used in WebGLBackground\n\n    mirrorCamera.matrixNeedsUpdate = true;\n    mirrorCamera.updateMatrixWorld();\n    mirrorCamera.projectionMatrix.copy(camera.projectionMatrix);\n\n    // Update the texture matrix\n    textureMatrix.set(0.5, 0.0, 0.0, 0.5, 0.0, 0.5, 0.0, 0.5, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0);\n    textureMatrix.multiply(mirrorCamera.projectionMatrix);\n    textureMatrix.multiply(mirrorCamera.matrixWorldInverse);\n\n    // Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n    // Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n    mirrorPlane.setFromNormalAndCoplanarPoint(normal, mirrorWorldPosition);\n    mirrorPlane.applyMatrix4(mirrorCamera.matrixWorldInverse);\n\n    clipPlane.set(mirrorPlane.normal.x, mirrorPlane.normal.y, mirrorPlane.normal.z, mirrorPlane.constant);\n\n    const projectionMatrix = mirrorCamera.projectionMatrix;\n\n    q.x = (Math.sign(clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\n    q.y = (Math.sign(clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\n    q.z = -1.0;\n    q.w = (1.0 + projectionMatrix.elements[10]) / projectionMatrix.elements[14];\n\n    // Calculate the scaled plane vector\n    clipPlane.multiplyScalar(2.0 / clipPlane.dot(q));\n\n    // Replacing the third row of the projection matrix\n    projectionMatrix.elements[2] = clipPlane.x;\n    projectionMatrix.elements[6] = clipPlane.y;\n    projectionMatrix.elements[10] = clipPlane.z + 1.0 - clipBias;\n    projectionMatrix.elements[14] = clipPlane.w;\n\n    eye.setFromMatrixPosition(camera.matrixWorld);\n\n    //\n\n    const currentRenderTarget = renderer.getRenderTarget();\n\n    const currentXrEnabled = renderer.xr.enabled;\n    const currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n    scope.visible = false;\n\n    renderer.xr.enabled = false; // Avoid camera modification and recursion\n    renderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\n    renderer.setRenderTarget(renderTarget);\n    renderer.render(scene, mirrorCamera);\n    renderer.setRenderTarget(null);\n\n    scope.visible = true;\n\n    renderer.xr.enabled = currentXrEnabled;\n    renderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\n    renderer.setRenderTarget(currentRenderTarget);\n  };\n};\n\nTHREE.Water.prototype = Object.create(THREE.Mesh.prototype);\nTHREE.Water.prototype.constructor = THREE.Water;\n","'use strict';\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Helpers\n\n// Merge objects\n//\nfunction assign(obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n\n  sources.forEach(function (source) {\n    if (!source) { return; }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n\n  return obj;\n}\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\nfunction isString(obj) { return _class(obj) === '[object String]'; }\nfunction isObject(obj) { return _class(obj) === '[object Object]'; }\nfunction isRegExp(obj) { return _class(obj) === '[object RegExp]'; }\nfunction isFunction(obj) { return _class(obj) === '[object Function]'; }\n\n\nfunction escapeRE(str) { return str.replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&'); }\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nvar defaultOptions = {\n  fuzzyLink: true,\n  fuzzyEmail: true,\n  fuzzyIP: false\n};\n\n\nfunction isOptionsObj(obj) {\n  return Object.keys(obj || {}).reduce(function (acc, k) {\n    return acc || defaultOptions.hasOwnProperty(k);\n  }, false);\n}\n\n\nvar defaultSchemas = {\n  'http:': {\n    validate: function (text, pos, self) {\n      var tail = text.slice(pos);\n\n      if (!self.re.http) {\n        // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.http =  new RegExp(\n          '^\\\\/\\\\/' + self.re.src_auth + self.re.src_host_port_strict + self.re.src_path, 'i'\n        );\n      }\n      if (self.re.http.test(tail)) {\n        return tail.match(self.re.http)[0].length;\n      }\n      return 0;\n    }\n  },\n  'https:':  'http:',\n  'ftp:':    'http:',\n  '//':      {\n    validate: function (text, pos, self) {\n      var tail = text.slice(pos);\n\n      if (!self.re.no_http) {\n      // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.no_http =  new RegExp(\n          '^' +\n          self.re.src_auth +\n          // Don't allow single-level domains, because of false positives like '//test'\n          // with code comments\n          '(?:localhost|(?:(?:' + self.re.src_domain + ')\\\\.)+' + self.re.src_domain_root + ')' +\n          self.re.src_port +\n          self.re.src_host_terminator +\n          self.re.src_path,\n\n          'i'\n        );\n      }\n\n      if (self.re.no_http.test(tail)) {\n        // should not be `://` & `///`, that protects from errors in protocol name\n        if (pos >= 3 && text[pos - 3] === ':') { return 0; }\n        if (pos >= 3 && text[pos - 3] === '/') { return 0; }\n        return tail.match(self.re.no_http)[0].length;\n      }\n      return 0;\n    }\n  },\n  'mailto:': {\n    validate: function (text, pos, self) {\n      var tail = text.slice(pos);\n\n      if (!self.re.mailto) {\n        self.re.mailto =  new RegExp(\n          '^' + self.re.src_email_name + '@' + self.re.src_host_strict, 'i'\n        );\n      }\n      if (self.re.mailto.test(tail)) {\n        return tail.match(self.re.mailto)[0].length;\n      }\n      return 0;\n    }\n  }\n};\n\n/*eslint-disable max-len*/\n\n// RE pattern for 2-character tlds (autogenerated by ./support/tlds_2char_gen.js)\nvar tlds_2ch_src_re = 'a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]';\n\n// DON'T try to make PRs with changes. Extend TLDs with LinkifyIt.tlds() instead\nvar tlds_default = 'biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|'.split('|');\n\n/*eslint-enable max-len*/\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction resetScanCache(self) {\n  self.__index__ = -1;\n  self.__text_cache__   = '';\n}\n\nfunction createValidator(re) {\n  return function (text, pos) {\n    var tail = text.slice(pos);\n\n    if (re.test(tail)) {\n      return tail.match(re)[0].length;\n    }\n    return 0;\n  };\n}\n\nfunction createNormalizer() {\n  return function (match, self) {\n    self.normalize(match);\n  };\n}\n\n// Schemas compiler. Build regexps.\n//\nfunction compile(self) {\n\n  // Load & clone RE patterns.\n  var re = self.re = require('./lib/re')(self.__opts__);\n\n  // Define dynamic patterns\n  var tlds = self.__tlds__.slice();\n\n  self.onCompile();\n\n  if (!self.__tlds_replaced__) {\n    tlds.push(tlds_2ch_src_re);\n  }\n  tlds.push(re.src_xn);\n\n  re.src_tlds = tlds.join('|');\n\n  function untpl(tpl) { return tpl.replace('%TLDS%', re.src_tlds); }\n\n  re.email_fuzzy      = RegExp(untpl(re.tpl_email_fuzzy), 'i');\n  re.link_fuzzy       = RegExp(untpl(re.tpl_link_fuzzy), 'i');\n  re.link_no_ip_fuzzy = RegExp(untpl(re.tpl_link_no_ip_fuzzy), 'i');\n  re.host_fuzzy_test  = RegExp(untpl(re.tpl_host_fuzzy_test), 'i');\n\n  //\n  // Compile each schema\n  //\n\n  var aliases = [];\n\n  self.__compiled__ = {}; // Reset compiled data\n\n  function schemaError(name, val) {\n    throw new Error('(LinkifyIt) Invalid schema \"' + name + '\": ' + val);\n  }\n\n  Object.keys(self.__schemas__).forEach(function (name) {\n    var val = self.__schemas__[name];\n\n    // skip disabled methods\n    if (val === null) { return; }\n\n    var compiled = { validate: null, link: null };\n\n    self.__compiled__[name] = compiled;\n\n    if (isObject(val)) {\n      if (isRegExp(val.validate)) {\n        compiled.validate = createValidator(val.validate);\n      } else if (isFunction(val.validate)) {\n        compiled.validate = val.validate;\n      } else {\n        schemaError(name, val);\n      }\n\n      if (isFunction(val.normalize)) {\n        compiled.normalize = val.normalize;\n      } else if (!val.normalize) {\n        compiled.normalize = createNormalizer();\n      } else {\n        schemaError(name, val);\n      }\n\n      return;\n    }\n\n    if (isString(val)) {\n      aliases.push(name);\n      return;\n    }\n\n    schemaError(name, val);\n  });\n\n  //\n  // Compile postponed aliases\n  //\n\n  aliases.forEach(function (alias) {\n    if (!self.__compiled__[self.__schemas__[alias]]) {\n      // Silently fail on missed schemas to avoid errons on disable.\n      // schemaError(alias, self.__schemas__[alias]);\n      return;\n    }\n\n    self.__compiled__[alias].validate =\n      self.__compiled__[self.__schemas__[alias]].validate;\n    self.__compiled__[alias].normalize =\n      self.__compiled__[self.__schemas__[alias]].normalize;\n  });\n\n  //\n  // Fake record for guessed links\n  //\n  self.__compiled__[''] = { validate: null, normalize: createNormalizer() };\n\n  //\n  // Build schema condition\n  //\n  var slist = Object.keys(self.__compiled__)\n                      .filter(function (name) {\n                        // Filter disabled & fake schemas\n                        return name.length > 0 && self.__compiled__[name];\n                      })\n                      .map(escapeRE)\n                      .join('|');\n  // (?!_) cause 1.5x slowdown\n  self.re.schema_test   = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'i');\n  self.re.schema_search = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'ig');\n\n  self.re.pretest = RegExp(\n    '(' + self.re.schema_test.source + ')|(' + self.re.host_fuzzy_test.source + ')|@',\n    'i'\n  );\n\n  //\n  // Cleanup\n  //\n\n  resetScanCache(self);\n}\n\n/**\n * class Match\n *\n * Match result. Single element of array, returned by [[LinkifyIt#match]]\n **/\nfunction Match(self, shift) {\n  var start = self.__index__,\n      end   = self.__last_index__,\n      text  = self.__text_cache__.slice(start, end);\n\n  /**\n   * Match#schema -> String\n   *\n   * Prefix (protocol) for matched string.\n   **/\n  this.schema    = self.__schema__.toLowerCase();\n  /**\n   * Match#index -> Number\n   *\n   * First position of matched string.\n   **/\n  this.index     = start + shift;\n  /**\n   * Match#lastIndex -> Number\n   *\n   * Next position after matched string.\n   **/\n  this.lastIndex = end + shift;\n  /**\n   * Match#raw -> String\n   *\n   * Matched string.\n   **/\n  this.raw       = text;\n  /**\n   * Match#text -> String\n   *\n   * Notmalized text of matched string.\n   **/\n  this.text      = text;\n  /**\n   * Match#url -> String\n   *\n   * Normalized url of matched string.\n   **/\n  this.url       = text;\n}\n\nfunction createMatch(self, shift) {\n  var match = new Match(self, shift);\n\n  self.__compiled__[match.schema].normalize(match, self);\n\n  return match;\n}\n\n\n/**\n * class LinkifyIt\n **/\n\n/**\n * new LinkifyIt(schemas, options)\n * - schemas (Object): Optional. Additional schemas to validate (prefix/validator)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Creates new linkifier instance with optional additional schemas.\n * Can be called without `new` keyword for convenience.\n *\n * By default understands:\n *\n * - `http(s)://...` , `ftp://...`, `mailto:...` & `//...` links\n * - \"fuzzy\" links and emails (example.com, foo@bar.com).\n *\n * `schemas` is an object, where each key/value describes protocol/rule:\n *\n * - __key__ - link prefix (usually, protocol name with `:` at the end, `skype:`\n *   for example). `linkify-it` makes shure that prefix is not preceeded with\n *   alphanumeric char and symbols. Only whitespaces and punctuation allowed.\n * - __value__ - rule to check tail after link prefix\n *   - _String_ - just alias to existing rule\n *   - _Object_\n *     - _validate_ - validator function (should return matched length on success),\n *       or `RegExp`.\n *     - _normalize_ - optional function to normalize text & url of matched result\n *       (for example, for @twitter mentions).\n *\n * `options`:\n *\n * - __fuzzyLink__ - recognige URL-s without `http(s):` prefix. Default `true`.\n * - __fuzzyIP__ - allow IPs in fuzzy links above. Can conflict with some texts\n *   like version numbers. Default `false`.\n * - __fuzzyEmail__ - recognize emails without `mailto:` prefix.\n *\n **/\nfunction LinkifyIt(schemas, options) {\n  if (!(this instanceof LinkifyIt)) {\n    return new LinkifyIt(schemas, options);\n  }\n\n  if (!options) {\n    if (isOptionsObj(schemas)) {\n      options = schemas;\n      schemas = {};\n    }\n  }\n\n  this.__opts__           = assign({}, defaultOptions, options);\n\n  // Cache last tested result. Used to skip repeating steps on next `match` call.\n  this.__index__          = -1;\n  this.__last_index__     = -1; // Next scan position\n  this.__schema__         = '';\n  this.__text_cache__     = '';\n\n  this.__schemas__        = assign({}, defaultSchemas, schemas);\n  this.__compiled__       = {};\n\n  this.__tlds__           = tlds_default;\n  this.__tlds_replaced__  = false;\n\n  this.re = {};\n\n  compile(this);\n}\n\n\n/** chainable\n * LinkifyIt#add(schema, definition)\n * - schema (String): rule name (fixed pattern prefix)\n * - definition (String|RegExp|Object): schema definition\n *\n * Add new rule definition. See constructor description for details.\n **/\nLinkifyIt.prototype.add = function add(schema, definition) {\n  this.__schemas__[schema] = definition;\n  compile(this);\n  return this;\n};\n\n\n/** chainable\n * LinkifyIt#set(options)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Set recognition options for links without schema.\n **/\nLinkifyIt.prototype.set = function set(options) {\n  this.__opts__ = assign(this.__opts__, options);\n  return this;\n};\n\n\n/**\n * LinkifyIt#test(text) -> Boolean\n *\n * Searches linkifiable pattern and returns `true` on success or `false` on fail.\n **/\nLinkifyIt.prototype.test = function test(text) {\n  // Reset scan cache\n  this.__text_cache__ = text;\n  this.__index__      = -1;\n\n  if (!text.length) { return false; }\n\n  var m, ml, me, len, shift, next, re, tld_pos, at_pos;\n\n  // try to scan for link with schema - that's the most simple rule\n  if (this.re.schema_test.test(text)) {\n    re = this.re.schema_search;\n    re.lastIndex = 0;\n    while ((m = re.exec(text)) !== null) {\n      len = this.testSchemaAt(text, m[2], re.lastIndex);\n      if (len) {\n        this.__schema__     = m[2];\n        this.__index__      = m.index + m[1].length;\n        this.__last_index__ = m.index + m[0].length + len;\n        break;\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyLink && this.__compiled__['http:']) {\n    // guess schemaless links\n    tld_pos = text.search(this.re.host_fuzzy_test);\n    if (tld_pos >= 0) {\n      // if tld is located after found link - no need to check fuzzy pattern\n      if (this.__index__ < 0 || tld_pos < this.__index__) {\n        if ((ml = text.match(this.__opts__.fuzzyIP ? this.re.link_fuzzy : this.re.link_no_ip_fuzzy)) !== null) {\n\n          shift = ml.index + ml[1].length;\n\n          if (this.__index__ < 0 || shift < this.__index__) {\n            this.__schema__     = '';\n            this.__index__      = shift;\n            this.__last_index__ = ml.index + ml[0].length;\n          }\n        }\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyEmail && this.__compiled__['mailto:']) {\n    // guess schemaless emails\n    at_pos = text.indexOf('@');\n    if (at_pos >= 0) {\n      // We can't skip this check, because this cases are possible:\n      // 192.168.1.1@gmail.com, my.in@example.com\n      if ((me = text.match(this.re.email_fuzzy)) !== null) {\n\n        shift = me.index + me[1].length;\n        next  = me.index + me[0].length;\n\n        if (this.__index__ < 0 || shift < this.__index__ ||\n            (shift === this.__index__ && next > this.__last_index__)) {\n          this.__schema__     = 'mailto:';\n          this.__index__      = shift;\n          this.__last_index__ = next;\n        }\n      }\n    }\n  }\n\n  return this.__index__ >= 0;\n};\n\n\n/**\n * LinkifyIt#pretest(text) -> Boolean\n *\n * Very quick check, that can give false positives. Returns true if link MAY BE\n * can exists. Can be used for speed optimization, when you need to check that\n * link NOT exists.\n **/\nLinkifyIt.prototype.pretest = function pretest(text) {\n  return this.re.pretest.test(text);\n};\n\n\n/**\n * LinkifyIt#testSchemaAt(text, name, position) -> Number\n * - text (String): text to scan\n * - name (String): rule (schema) name\n * - position (Number): text offset to check from\n *\n * Similar to [[LinkifyIt#test]] but checks only specific protocol tail exactly\n * at given position. Returns length of found pattern (0 on fail).\n **/\nLinkifyIt.prototype.testSchemaAt = function testSchemaAt(text, schema, pos) {\n  // If not supported schema check requested - terminate\n  if (!this.__compiled__[schema.toLowerCase()]) {\n    return 0;\n  }\n  return this.__compiled__[schema.toLowerCase()].validate(text, pos, this);\n};\n\n\n/**\n * LinkifyIt#match(text) -> Array|null\n *\n * Returns array of found link descriptions or `null` on fail. We strongly\n * recommend to use [[LinkifyIt#test]] first, for best speed.\n *\n * ##### Result match description\n *\n * - __schema__ - link schema, can be empty for fuzzy links, or `//` for\n *   protocol-neutral  links.\n * - __index__ - offset of matched text\n * - __lastIndex__ - index of next char after mathch end\n * - __raw__ - matched text\n * - __text__ - normalized text\n * - __url__ - link, generated from matched text\n **/\nLinkifyIt.prototype.match = function match(text) {\n  var shift = 0, result = [];\n\n  // Try to take previous element from cache, if .test() called before\n  if (this.__index__ >= 0 && this.__text_cache__ === text) {\n    result.push(createMatch(this, shift));\n    shift = this.__last_index__;\n  }\n\n  // Cut head if cache was used\n  var tail = shift ? text.slice(shift) : text;\n\n  // Scan string until end reached\n  while (this.test(tail)) {\n    result.push(createMatch(this, shift));\n\n    tail = tail.slice(this.__last_index__);\n    shift += this.__last_index__;\n  }\n\n  if (result.length) {\n    return result;\n  }\n\n  return null;\n};\n\n\n/** chainable\n * LinkifyIt#tlds(list [, keepOld]) -> this\n * - list (Array): list of tlds\n * - keepOld (Boolean): merge with current list if `true` (`false` by default)\n *\n * Load (or merge) new tlds list. Those are user for fuzzy links (without prefix)\n * to avoid false positives. By default this algorythm used:\n *\n * - hostname with any 2-letter root zones are ok.\n * - biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\n *   are ok.\n * - encoded (`xn--...`) root zones are ok.\n *\n * If list is replaced, then exact match for 2-chars root zones will be checked.\n **/\nLinkifyIt.prototype.tlds = function tlds(list, keepOld) {\n  list = Array.isArray(list) ? list : [ list ];\n\n  if (!keepOld) {\n    this.__tlds__ = list.slice();\n    this.__tlds_replaced__ = true;\n    compile(this);\n    return this;\n  }\n\n  this.__tlds__ = this.__tlds__.concat(list)\n                                  .sort()\n                                  .filter(function (el, idx, arr) {\n                                    return el !== arr[idx - 1];\n                                  })\n                                  .reverse();\n\n  compile(this);\n  return this;\n};\n\n/**\n * LinkifyIt#normalize(match)\n *\n * Default normalizer (if schema does not define it's own).\n **/\nLinkifyIt.prototype.normalize = function normalize(match) {\n\n  // Do minimal possible changes by default. Need to collect feedback prior\n  // to move forward https://github.com/markdown-it/linkify-it/issues/1\n\n  if (!match.schema) { match.url = 'http://' + match.url; }\n\n  if (match.schema === 'mailto:' && !/^mailto:/i.test(match.url)) {\n    match.url = 'mailto:' + match.url;\n  }\n};\n\n\n/**\n * LinkifyIt#onCompile()\n *\n * Override to modify basic RegExp-s.\n **/\nLinkifyIt.prototype.onCompile = function onCompile() {\n};\n\n\nmodule.exports = LinkifyIt;\n","'use strict';\n\n\nmodule.exports = function (opts) {\n  var re = {};\n\n  // Use direct extract instead of `regenerate` to reduse browserified size\n  re.src_Any = require('uc.micro/properties/Any/regex').source;\n  re.src_Cc  = require('uc.micro/categories/Cc/regex').source;\n  re.src_Z   = require('uc.micro/categories/Z/regex').source;\n  re.src_P   = require('uc.micro/categories/P/regex').source;\n\n  // \\p{\\Z\\P\\Cc\\CF} (white spaces + control + format + punctuation)\n  re.src_ZPCc = [ re.src_Z, re.src_P, re.src_Cc ].join('|');\n\n  // \\p{\\Z\\Cc} (white spaces + control)\n  re.src_ZCc = [ re.src_Z, re.src_Cc ].join('|');\n\n  // Experimental. List of chars, completely prohibited in links\n  // because can separate it from other part of text\n  var text_separators = '[><\\uff5c]';\n\n  // All possible word characters (everything without punctuation, spaces & controls)\n  // Defined via punctuation & spaces to save space\n  // Should be something like \\p{\\L\\N\\S\\M} (\\w but without `_`)\n  re.src_pseudo_letter       = '(?:(?!' + text_separators + '|' + re.src_ZPCc + ')' + re.src_Any + ')';\n  // The same as abothe but without [0-9]\n  // var src_pseudo_letter_non_d = '(?:(?![0-9]|' + src_ZPCc + ')' + src_Any + ')';\n\n  ////////////////////////////////////////////////////////////////////////////////\n\n  re.src_ip4 =\n\n    '(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)';\n\n  // Prohibit any of \"@/[]()\" in user/pass to avoid wrong domain fetch.\n  re.src_auth    = '(?:(?:(?!' + re.src_ZCc + '|[@/\\\\[\\\\]()]).)+@)?';\n\n  re.src_port =\n\n    '(?::(?:6(?:[0-4]\\\\d{3}|5(?:[0-4]\\\\d{2}|5(?:[0-2]\\\\d|3[0-5])))|[1-5]?\\\\d{1,4}))?';\n\n  re.src_host_terminator =\n\n    '(?=$|' + text_separators + '|' + re.src_ZPCc + ')(?!-|_|:\\\\d|\\\\.-|\\\\.(?!$|' + re.src_ZPCc + '))';\n\n  re.src_path =\n\n    '(?:' +\n      '[/?#]' +\n        '(?:' +\n          '(?!' + re.src_ZCc + '|' + text_separators + '|[()[\\\\]{}.,\"\\'?!\\\\-]).|' +\n          '\\\\[(?:(?!' + re.src_ZCc + '|\\\\]).)*\\\\]|' +\n          '\\\\((?:(?!' + re.src_ZCc + '|[)]).)*\\\\)|' +\n          '\\\\{(?:(?!' + re.src_ZCc + '|[}]).)*\\\\}|' +\n          '\\\\\"(?:(?!' + re.src_ZCc + '|[\"]).)+\\\\\"|' +\n          \"\\\\'(?:(?!\" + re.src_ZCc + \"|[']).)+\\\\'|\" +\n          \"\\\\'(?=\" + re.src_pseudo_letter + '|[-]).|' +  // allow `I'm_king` if no pair found\n          '\\\\.{2,4}[a-zA-Z0-9%/]|' + // github has ... in commit range links,\n                                     // google has .... in links (issue #66)\n                                     // Restrict to\n                                     // - english\n                                     // - percent-encoded\n                                     // - parts of file path\n                                     // until more examples found.\n          '\\\\.(?!' + re.src_ZCc + '|[.]).|' +\n          (opts && opts['---'] ?\n            '\\\\-(?!--(?:[^-]|$))(?:-*)|' // `---` => long dash, terminate\n            :\n            '\\\\-+|'\n          ) +\n          '\\\\,(?!' + re.src_ZCc + ').|' +      // allow `,,,` in paths\n          '\\\\!(?!' + re.src_ZCc + '|[!]).|' +\n          '\\\\?(?!' + re.src_ZCc + '|[?]).' +\n        ')+' +\n      '|\\\\/' +\n    ')?';\n\n  // Allow anything in markdown spec, forbid quote (\") at the first position\n  // because emails enclosed in quotes are far more common\n  re.src_email_name =\n\n    '[\\\\-;:&=\\\\+\\\\$,\\\\.a-zA-Z0-9_][\\\\-;:&=\\\\+\\\\$,\\\\\"\\\\.a-zA-Z0-9_]*';\n\n  re.src_xn =\n\n    'xn--[a-z0-9\\\\-]{1,59}';\n\n  // More to read about domain names\n  // http://serverfault.com/questions/638260/\n\n  re.src_domain_root =\n\n    // Allow letters & digits (http://test1)\n    '(?:' +\n      re.src_xn +\n      '|' +\n      re.src_pseudo_letter + '{1,63}' +\n    ')';\n\n  re.src_domain =\n\n    '(?:' +\n      re.src_xn +\n      '|' +\n      '(?:' + re.src_pseudo_letter + ')' +\n      '|' +\n      '(?:' + re.src_pseudo_letter + '(?:-|' + re.src_pseudo_letter + '){0,61}' + re.src_pseudo_letter + ')' +\n    ')';\n\n  re.src_host =\n\n    '(?:' +\n    // Don't need IP check, because digits are already allowed in normal domain names\n    //   src_ip4 +\n    // '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)*' + re.src_domain/*_root*/ + ')' +\n    ')';\n\n  re.tpl_host_fuzzy =\n\n    '(?:' +\n      re.src_ip4 +\n    '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))' +\n    ')';\n\n  re.tpl_host_no_ip_fuzzy =\n\n    '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))';\n\n  re.src_host_strict =\n\n    re.src_host + re.src_host_terminator;\n\n  re.tpl_host_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_host_terminator;\n\n  re.src_host_port_strict =\n\n    re.src_host + re.src_port + re.src_host_terminator;\n\n  re.tpl_host_port_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_port + re.src_host_terminator;\n\n  re.tpl_host_port_no_ip_fuzzy_strict =\n\n    re.tpl_host_no_ip_fuzzy + re.src_port + re.src_host_terminator;\n\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Main rules\n\n  // Rude test fuzzy links by host, for quick deny\n  re.tpl_host_fuzzy_test =\n\n    'localhost|www\\\\.|\\\\.\\\\d{1,3}\\\\.|(?:\\\\.(?:%TLDS%)(?:' + re.src_ZPCc + '|>|$))';\n\n  re.tpl_email_fuzzy =\n\n      '(^|' + text_separators + '|\"|\\\\(|' + re.src_ZCc + ')' +\n      '(' + re.src_email_name + '@' + re.tpl_host_fuzzy_strict + ')';\n\n  re.tpl_link_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_fuzzy_strict + re.src_path + ')';\n\n  re.tpl_link_no_ip_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_no_ip_fuzzy_strict + re.src_path + ')';\n\n  return re;\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = {\n  GRAVITY: -9.8,\n  MAX_INTERVAL: 4 / 60,\n  ITERATIONS: 10,\n  SIMULATION_RATE: 8.333, // 8.333ms / 120hz\n  ACTIVATION_STATE: {\n    ACTIVE_TAG: \"active\",\n    ISLAND_SLEEPING: \"islandSleeping\",\n    WANTS_DEACTIVATION: \"wantsDeactivation\",\n    DISABLE_DEACTIVATION: \"disableDeactivation\",\n    DISABLE_SIMULATION: \"disableSimulation\"\n  },\n  COLLISION_FLAG: {\n    STATIC_OBJECT: 1,\n    KINEMATIC_OBJECT: 2,\n    NO_CONTACT_RESPONSE: 4,\n    CUSTOM_MATERIAL_CALLBACK: 8, //this allows per-triangle material (friction/restitution)\n    CHARACTER_OBJECT: 16,\n    DISABLE_VISUALIZE_OBJECT: 32, //disable debug drawing\n    DISABLE_SPU_COLLISION_PROCESSING: 64 //disable parallel/SPU processing\n  },\n  TYPE: {\n    STATIC: \"static\",\n    DYNAMIC: \"dynamic\",\n    KINEMATIC: \"kinematic\"\n  },\n  SHAPE: {\n    BOX: \"box\",\n    CYLINDER: \"cylinder\",\n    SPHERE: \"sphere\",\n    CAPSULE: \"capsule\",\n    CONE: \"cone\",\n    HULL: \"hull\",\n    HACD: \"hacd\",\n    VHACD: \"vhacd\",\n    MESH: \"mesh\",\n    HEIGHTFIELD: \"heightfield\"\n  },\n  FIT: {\n    ALL: \"all\",\n    MANUAL: \"manual\"\n  },\n  CONSTRAINT: {\n    LOCK: \"lock\",\n    FIXED: \"fixed\",\n    SPRING: \"spring\",\n    SLIDER: \"slider\",\n    HINGE: \"hinge\",\n    CONE_TWIST: \"coneTwist\",\n    POINT_TO_POINT: \"pointToPoint\"\n  },\n  MESSAGE_TYPES: {\n    INIT: 0,\n    READY: 1,\n    ADD_BODY: 2,\n    BODY_READY: 3,\n    UPDATE_BODY: 4,\n    REMOVE_BODY: 5,\n    ADD_SHAPES: 6,\n    REMOVE_SHAPES: 7,\n    ADD_CONSTRAINT: 8,\n    REMOVE_CONSTRAINT: 9,\n    ENABLE_DEBUG: 10,\n    RESET_DYNAMIC_BODY: 11,\n    ACTIVATE_BODY: 12,\n    TRANSFER_DATA: 13\n  },\n  BUFFER_CONFIG: {\n    HEADER_LENGTH: 2,\n    MAX_BODIES: 10000,\n    MATRIX_OFFSET: 0,\n    LINEAR_VELOCITY_OFFSET: 16,\n    ANGULAR_VELOCITY_OFFSET: 17,\n    COLLISIONS_OFFSET: 18,\n    BODY_DATA_SIZE: 26\n  },\n  BUFFER_STATE: {\n    UNINITIALIZED: 0,\n    READY: 1,\n    CONSUMED: 2\n  }\n};\n","import{BufferAttribute as t,BufferGeometry as e,Vector3 as r,Plane as s,Triangle as n,Color as o,Object3D as i,Mesh as h,SphereBufferGeometry as c,MeshBasicMaterial as a,BoxBufferGeometry as u,LineBasicMaterial as l,Line as d}from\"three\";class p{static roundNumber(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}static sample(t){return t[Math.floor(Math.random()*t.length)]}static distanceToSquared(t,e){var r=t.x-e.x,s=t.y-e.y,n=t.z-e.z;return r*r+s*s+n*n}static isPointInPoly(t,e){for(var r=!1,s=-1,n=t.length,o=n-1;++s<n;o=s)(t[s].z<=e.z&&e.z<t[o].z||t[o].z<=e.z&&e.z<t[s].z)&&e.x<(t[o].x-t[s].x)*(e.z-t[s].z)/(t[o].z-t[s].z)+t[s].x&&(r=!r);return r}static isVectorInPolygon(t,e,r){var s=1e5,n=-1e5,o=[];return e.vertexIds.forEach(t=>{s=Math.min(r[t].y,s),n=Math.max(r[t].y,n),o.push(r[t])}),!!(t.y<n+.5&&t.y>s-.5&&this.isPointInPoly(o,t))}static triarea2(t,e,r){return(r.x-t.x)*(e.z-t.z)-(e.x-t.x)*(r.z-t.z)}static vequal(t,e){return this.distanceToSquared(t,e)<1e-5}static mergeVertices(r,s=1e-4){s=Math.max(s,Number.EPSILON);for(var n={},o=r.getIndex(),i=r.getAttribute(\"position\"),h=o?o.count:i.count,c=0,a=[],u=[],l=Math.log10(1/s),d=Math.pow(10,l),p=0;p<h;p++){var g=o?o.getX(p):p,f=\"\";f+=~~(i.getX(g)*d)+\",\",f+=~~(i.getY(g)*d)+\",\",(f+=~~(i.getZ(g)*d)+\",\")in n?a.push(n[f]):(u.push(i.getX(g)),u.push(i.getY(g)),u.push(i.getZ(g)),n[f]=c,a.push(c),c++)}const v=new t(new Float32Array(u),i.itemSize,i.normalized),b=new e;return b.setAttribute(\"position\",v),b.setIndex(a),b}}class g{constructor(t){this.content=[],this.scoreFunction=t}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){const t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t}remove(t){const e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){const e=this.content[t];for(;t>0;){const r=(t+1>>1)-1,s=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(s)))break;this.content[r]=e,this.content[t]=s,t=r}}bubbleUp(t){const e=this.content.length,r=this.content[t],s=this.scoreFunction(r);for(;;){const n=t+1<<1,o=n-1;let i,h=null;if(o<e&&(i=this.scoreFunction(this.content[o]),i<s&&(h=o)),n<e&&this.scoreFunction(this.content[n])<(null===h?s:i)&&(h=n),null===h)break;this.content[t]=this.content[h],this.content[h]=r,t=h}}}class f{constructor(){this.portals=[]}push(t,e){void 0===e&&(e=t),this.portals.push({left:t,right:e})}stringPull(){const t=this.portals,e=[];let r,s,n,o=0,i=0,h=0;r=t[0].left,s=t[0].left,n=t[0].right,e.push(r);for(let c=1;c<t.length;c++){const a=t[c].left,u=t[c].right;if(p.triarea2(r,n,u)<=0){if(!(p.vequal(r,n)||p.triarea2(r,s,u)>0)){e.push(s),r=s,o=i,s=r,n=r,i=o,h=o,c=o;continue}n=u,h=c}if(p.triarea2(r,s,a)>=0){if(!(p.vequal(r,s)||p.triarea2(r,n,a)<0)){e.push(n),r=n,o=h,s=r,n=r,i=o,h=o,c=o;continue}s=a,i=c}}return 0!==e.length&&p.vequal(e[e.length-1],t[t.length-1].left)||e.push(t[t.length-1].left),this.path=e,e}}class v{constructor(){this.zones={}}static createZone(t,e=1e-4){return class{static buildZone(t,e){const s=this._buildNavigationMesh(t,e),n={};s.vertices.forEach(t=>{t.x=p.roundNumber(t.x,2),t.y=p.roundNumber(t.y,2),t.z=p.roundNumber(t.z,2)}),n.vertices=s.vertices;const o=this._buildPolygonGroups(s);return n.groups=new Array(o.length),o.forEach((t,e)=>{const s=new Map;t.forEach((t,e)=>{s.set(t,e)});const o=new Array(t.length);t.forEach((t,e)=>{const i=[];t.neighbours.forEach(t=>i.push(s.get(t)));const h=[];t.neighbours.forEach(e=>h.push(this._getSharedVerticesInOrder(t,e)));const c=new r(0,0,0);c.add(n.vertices[t.vertexIds[0]]),c.add(n.vertices[t.vertexIds[1]]),c.add(n.vertices[t.vertexIds[2]]),c.divideScalar(3),c.x=p.roundNumber(c.x,2),c.y=p.roundNumber(c.y,2),c.z=p.roundNumber(c.z,2),o[e]={id:e,neighbours:i,vertexIds:t.vertexIds,centroid:c,portals:h}}),n.groups[e]=o}),n}static _buildNavigationMesh(t,e){return t=p.mergeVertices(t,e),this._buildPolygonsFromGeometry(t)}static _spreadGroupId(t){let e=new Set([t]);for(;e.size>0;){const r=e;e=new Set,r.forEach(r=>{r.group=t.group,r.neighbours.forEach(t=>{void 0===t.group&&e.add(t)})})}}static _buildPolygonGroups(t){const e=[];return t.polygons.forEach(t=>{void 0!==t.group?e[t.group].push(t):(t.group=e.length,this._spreadGroupId(t),e.push([t]))}),e}static _buildPolygonNeighbours(t,e){const r=new Set,s=e[t.vertexIds[1]],n=e[t.vertexIds[2]];return e[t.vertexIds[0]].forEach(e=>{e!==t&&(s.includes(e)||n.includes(e))&&r.add(e)}),s.forEach(e=>{e!==t&&n.includes(e)&&r.add(e)}),r}static _buildPolygonsFromGeometry(t){const e=[],s=[],n=t.attributes.position,o=t.index,i=[];for(let t=0;t<n.count;t++)s.push((new r).fromBufferAttribute(n,t)),i[t]=[];for(let r=0;r<t.index.count;r+=3){const t=o.getX(r),s=o.getX(r+1),n=o.getX(r+2),h={vertexIds:[t,s,n],neighbours:null};e.push(h),i[t].push(h),i[s].push(h),i[n].push(h)}return e.forEach(t=>{t.neighbours=this._buildPolygonNeighbours(t,i)}),{polygons:e,vertices:s}}static _getSharedVerticesInOrder(t,e){const r=t.vertexIds,s=r[0],n=r[1],o=r[2],i=e.vertexIds,h=i.includes(s),c=i.includes(n),a=i.includes(o);return h&&c&&a?Array.from(r):h&&c?[s,n]:c&&a?[n,o]:h&&a?[o,s]:(console.warn(\"Error processing navigation mesh neighbors; neighbors with <2 shared vertices found.\"),[])}}.buildZone(t,e)}setZoneData(t,e){this.zones[t]=e}getRandomNode(t,e,s,n){if(!this.zones[t])return new r;s=s||null,n=n||0;const o=[];return this.zones[t].groups[e].forEach(t=>{s&&n?p.distanceToSquared(s,t.centroid)<n*n&&o.push(t.centroid):o.push(t.centroid)}),p.sample(o)||new r}getClosestNode(t,e,r,s=!1){const n=this.zones[e].vertices;let o=null,i=Infinity;return this.zones[e].groups[r].forEach(e=>{const r=p.distanceToSquared(e.centroid,t);r<i&&(!s||p.isVectorInPolygon(t,e,n))&&(o=e,i=r)}),o}findPath(t,e,s,n){const o=this.zones[s].groups[n],i=this.zones[s].vertices,h=this.getClosestNode(t,s,n,!0),c=this.getClosestNode(e,s,n,!0);if(!h||!c)return null;const a=class{static init(t){for(let e=0;e<t.length;e++){const r=t[e];r.f=0,r.g=0,r.h=0,r.cost=1,r.visited=!1,r.closed=!1,r.parent=null}}static cleanUp(t){for(let e=0;e<t.length;e++){const r=t[e];delete r.f,delete r.g,delete r.h,delete r.cost,delete r.visited,delete r.closed,delete r.parent}}static heap(){return new g(function(t){return t.f})}static search(t,e,r){this.init(t);const s=this.heap();for(s.push(e);s.size()>0;){const e=s.pop();if(e===r){let t=e;const r=[];for(;t.parent;)r.push(t),t=t.parent;return this.cleanUp(r),r.reverse()}e.closed=!0;const n=this.neighbours(t,e);for(let t=0,o=n.length;t<o;t++){const o=n[t];if(o.closed)continue;const i=e.g+o.cost,h=o.visited;if(!h||i<o.g){if(o.visited=!0,o.parent=e,!o.centroid||!r.centroid)throw new Error(\"Unexpected state\");o.h=o.h||this.heuristic(o.centroid,r.centroid),o.g=i,o.f=o.g+o.h,h?s.rescoreElement(o):s.push(o)}}}return[]}static heuristic(t,e){return p.distanceToSquared(t,e)}static neighbours(t,e){const r=[];for(let s=0;s<e.neighbours.length;s++)r.push(t[e.neighbours[s]]);return r}}.search(o,h,c),u=function(t,e){for(var r=0;r<t.neighbours.length;r++)if(t.neighbours[r]===e.id)return t.portals[r]},l=new f;l.push(t);for(let t=0;t<a.length;t++){const e=a[t],r=a[t+1];if(r){const t=u(e,r);l.push(i[t[0]],i[t[1]])}}l.push(e),l.stringPull();const d=l.path.map(t=>new r(t.x,t.y,t.z));return d.shift(),d}}v.prototype.getGroup=function(){const t=new s;return function(e,r,s=!1){if(!this.zones[e])return null;let n=null,o=Math.pow(50,2);const i=this.zones[e];for(let e=0;e<i.groups.length;e++){const h=i.groups[e];for(const c of h){if(s&&(t.setFromCoplanarPoints(i.vertices[c.vertexIds[0]],i.vertices[c.vertexIds[1]],i.vertices[c.vertexIds[2]]),Math.abs(t.distanceToPoint(r))<.01)&&p.isPointInPoly([i.vertices[c.vertexIds[0]],i.vertices[c.vertexIds[1]],i.vertices[c.vertexIds[2]]],r))return e;const h=p.distanceToSquared(c.centroid,r);h<o&&(n=e,o=h)}}return n}}(),v.prototype.clampStep=function(){const t=new r,e=new s,o=new n,i=new r;let h,c,a=new r;return function(r,s,n,u,l,d){const p=this.zones[u].vertices,g=this.zones[u].groups[l],f=[n],v={};v[n.id]=0,h=void 0,a.set(0,0,0),c=Infinity,e.setFromCoplanarPoints(p[n.vertexIds[0]],p[n.vertexIds[1]],p[n.vertexIds[2]]),e.projectPoint(s,t),i.copy(t);for(let e=f.pop();e;e=f.pop()){o.set(p[e.vertexIds[0]],p[e.vertexIds[1]],p[e.vertexIds[2]]),o.closestPointToPoint(i,t),t.distanceToSquared(i)<c&&(h=e,a.copy(t),c=t.distanceToSquared(i));const r=v[e.id];if(!(r>2))for(let t=0;t<e.neighbours.length;t++){const s=g[e.neighbours[t]];s.id in v||(f.push(s),v[s.id]=r+1)}}return d.copy(a),h}}();const b={PLAYER:new o(15631215).convertSRGBToLinear().getHex(),TARGET:new o(14469912).convertSRGBToLinear().getHex(),PATH:new o(41903).convertSRGBToLinear().getHex(),WAYPOINT:new o(41903).convertSRGBToLinear().getHex(),CLAMPED_STEP:new o(14472114).convertSRGBToLinear().getHex(),CLOSEST_NODE:new o(4417387).convertSRGBToLinear().getHex()};class w extends i{constructor(){super(),this._playerMarker=new h(new c(.25,32,32),new a({color:b.PLAYER})),this._targetMarker=new h(new u(.3,.3,.3),new a({color:b.TARGET})),this._nodeMarker=new h(new u(.1,.8,.1),new a({color:b.CLOSEST_NODE})),this._stepMarker=new h(new u(.1,1,.1),new a({color:b.CLAMPED_STEP})),this._pathMarker=new i,this._pathLineMaterial=new l({color:b.PATH,linewidth:2}),this._pathPointMaterial=new a({color:b.WAYPOINT}),this._pathPointGeometry=new c(.08),this._markers=[this._playerMarker,this._targetMarker,this._nodeMarker,this._stepMarker,this._pathMarker],this._markers.forEach(t=>{t.visible=!1,this.add(t)})}setPath(r){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);r=[this._playerMarker.position].concat(r);const s=new e;s.setAttribute(\"position\",new t(new Float32Array(3*r.length),3));for(let t=0;t<r.length;t++)s.attributes.position.setXYZ(t,r[t].x,r[t].y+.2,r[t].z);this._pathMarker.add(new d(s,this._pathLineMaterial));for(let t=0;t<r.length-1;t++){const e=new h(this._pathPointGeometry,this._pathPointMaterial);e.position.copy(r[t]),e.position.y+=.2,this._pathMarker.add(e)}return this._pathMarker.visible=!0,this}setPlayerPosition(t){return this._playerMarker.position.copy(t),this._playerMarker.visible=!0,this}setTargetPosition(t){return this._targetMarker.position.copy(t),this._targetMarker.visible=!0,this}setNodePosition(t){return this._nodeMarker.position.copy(t),this._nodeMarker.visible=!0,this}setStepPosition(t){return this._stepMarker.position.copy(t),this._stepMarker.visible=!0,this}reset(){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);return this._markers.forEach(t=>{t.visible=!1}),this}}export{v as Pathfinding,w as PathfindingHelper};\n//# sourceMappingURL=three-pathfinding.module.js.map\n","module.exports=/[\\0-\\x1F\\x7F-\\x9F]/","module.exports=/[!-#%-\\*,-\\/:;\\?@\\[-\\]_\\{\\}\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4E\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD803[\\uDF55-\\uDF59]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC8\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDC4B-\\uDC4F\\uDC5B\\uDC5D\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDE60-\\uDE6C\\uDF3C-\\uDF3E]|\\uD806[\\uDC3B\\uDE3F-\\uDE46\\uDE9A-\\uDE9C\\uDE9E-\\uDEA2]|\\uD807[\\uDC41-\\uDC45\\uDC70\\uDC71\\uDEF7\\uDEF8]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD81B[\\uDE97-\\uDE9A]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]|\\uD83A[\\uDD5E\\uDD5F]/","module.exports=/[ \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]/","module.exports=/[\\0-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/","/*! https://mths.be/punycode v1.3.2 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","\"use strict\";\n\n/* eslint-env browser */\n\n/* eslint-disable no-undef, no-use-before-define, new-cap */\nmodule.exports = function (content, workerConstructor, workerOptions, url) {\n  var globalScope = self || window;\n\n  try {\n    try {\n      var blob;\n\n      try {\n        // New API\n        blob = new globalScope.Blob([content]);\n      } catch (e) {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = globalScope.BlobBuilder || globalScope.WebKitBlobBuilder || globalScope.MozBlobBuilder || globalScope.MSBlobBuilder;\n        blob = new BlobBuilder();\n        blob.append(content);\n        blob = blob.getBlob();\n      }\n\n      var URL = globalScope.URL || globalScope.webkitURL;\n      var objectURL = URL.createObjectURL(blob);\n      var worker = new globalScope[workerConstructor](objectURL, workerOptions);\n      URL.revokeObjectURL(objectURL);\n      return worker;\n    } catch (e) {\n      return new globalScope[workerConstructor](\"data:application/javascript,\".concat(encodeURIComponent(content)), workerOptions);\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error(\"Inline worker is not supported\");\n    }\n\n    return new globalScope[workerConstructor](url, workerOptions);\n  }\n};","var map = {\n\t\"./de.json\": [\n\t\t33116,\n\t\t116\n\t],\n\t\"./es.json\": [\n\t\t27297,\n\t\t297\n\t],\n\t\"./fr.json\": [\n\t\t83056,\n\t\t56\n\t],\n\t\"./ja.json\": [\n\t\t23160,\n\t\t160\n\t],\n\t\"./ko.json\": [\n\t\t55540,\n\t\t540\n\t],\n\t\"./pt.json\": [\n\t\t10188,\n\t\t188\n\t],\n\t\"./ru.json\": [\n\t\t97441,\n\t\t441\n\t],\n\t\"./zh-cn.json\": [\n\t\t2030,\n\t\t30\n\t],\n\t\"./zh-tw.json\": [\n\t\t4076,\n\t\t76\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 37472;\nmodule.exports = webpackAsyncContext;","// src/Constants.js\nvar TYPES_ENUM = {\n  i8: \"i8\",\n  ui8: \"ui8\",\n  ui8c: \"ui8c\",\n  i16: \"i16\",\n  ui16: \"ui16\",\n  i32: \"i32\",\n  ui32: \"ui32\",\n  f32: \"f32\",\n  f64: \"f64\",\n  eid: \"eid\"\n};\nvar TYPES_NAMES = {\n  i8: \"Int8\",\n  ui8: \"Uint8\",\n  ui8c: \"Uint8Clamped\",\n  i16: \"Int16\",\n  ui16: \"Uint16\",\n  i32: \"Int32\",\n  ui32: \"Uint32\",\n  eid: \"Uint32\",\n  f32: \"Float32\",\n  f64: \"Float64\"\n};\nvar TYPES = {\n  i8: Int8Array,\n  ui8: Uint8Array,\n  ui8c: Uint8ClampedArray,\n  i16: Int16Array,\n  ui16: Uint16Array,\n  i32: Int32Array,\n  ui32: Uint32Array,\n  f32: Float32Array,\n  f64: Float64Array,\n  eid: Uint32Array\n};\nvar UNSIGNED_MAX = {\n  uint8: 2 ** 8,\n  uint16: 2 ** 16,\n  uint32: 2 ** 32\n};\n\n// src/Storage.js\nvar roundToMultiple = (mul) => (x) => Math.ceil(x / mul) * mul;\nvar roundToMultiple4 = roundToMultiple(4);\nvar $storeRef = Symbol(\"storeRef\");\nvar $storeSize = Symbol(\"storeSize\");\nvar $storeMaps = Symbol(\"storeMaps\");\nvar $storeFlattened = Symbol(\"storeFlattened\");\nvar $storeBase = Symbol(\"storeBase\");\nvar $storeType = Symbol(\"storeType\");\nvar $storeArrayElementCounts = Symbol(\"storeArrayElementCounts\");\nvar $storeSubarrays = Symbol(\"storeSubarrays\");\nvar $subarrayCursors = Symbol(\"subarrayCursors\");\nvar $subarray = Symbol(\"subarray\");\nvar $subarrayFrom = Symbol(\"subarrayFrom\");\nvar $subarrayTo = Symbol(\"subarrayTo\");\nvar $parentArray = Symbol(\"parentArray\");\nvar $tagStore = Symbol(\"tagStore\");\nvar $queryShadow = Symbol(\"queryShadow\");\nvar $serializeShadow = Symbol(\"serializeShadow\");\nvar $indexType = Symbol(\"indexType\");\nvar $indexBytes = Symbol(\"indexBytes\");\nvar $isEidType = Symbol(\"isEidType\");\nvar stores = {};\nvar resize = (ta, size) => {\n  const newBuffer = new ArrayBuffer(size * ta.BYTES_PER_ELEMENT);\n  const newTa = new ta.constructor(newBuffer);\n  newTa.set(ta, 0);\n  return newTa;\n};\nvar createShadow = (store, key) => {\n  if (!ArrayBuffer.isView(store)) {\n    const shadowStore = store[$parentArray].slice(0);\n    store[key] = store.map((_, eid) => {\n      const { length } = store[eid];\n      const start = length * eid;\n      const end = start + length;\n      return shadowStore.subarray(start, end);\n    });\n  } else {\n    store[key] = store.slice(0);\n  }\n};\nvar resizeSubarray = (metadata, store, storeSize) => {\n  const cursors = metadata[$subarrayCursors];\n  let type = store[$storeType];\n  const length = store[0].length;\n  const indexType = length <= UNSIGNED_MAX.uint8 ? TYPES_ENUM.ui8 : length <= UNSIGNED_MAX.uint16 ? TYPES_ENUM.ui16 : TYPES_ENUM.ui32;\n  if (cursors[type] === 0) {\n    const arrayElementCount = metadata[$storeArrayElementCounts][type];\n    const array = new TYPES[type](roundToMultiple4(arrayElementCount * storeSize));\n    array.set(metadata[$storeSubarrays][type]);\n    metadata[$storeSubarrays][type] = array;\n    array[$indexType] = TYPES_NAMES[indexType];\n    array[$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n  }\n  const start = cursors[type];\n  const end = start + storeSize * length;\n  cursors[type] = end;\n  store[$parentArray] = metadata[$storeSubarrays][type].subarray(start, end);\n  for (let eid = 0; eid < storeSize; eid++) {\n    const start2 = length * eid;\n    const end2 = start2 + length;\n    store[eid] = store[$parentArray].subarray(start2, end2);\n    store[eid][$indexType] = TYPES_NAMES[indexType];\n    store[eid][$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    store[eid][$subarray] = true;\n  }\n};\nvar resizeRecursive = (metadata, store, size) => {\n  Object.keys(store).forEach((key) => {\n    const ta = store[key];\n    if (Array.isArray(ta)) {\n      resizeSubarray(metadata, ta, size);\n      store[$storeFlattened].push(ta);\n    } else if (ArrayBuffer.isView(ta)) {\n      store[key] = resize(ta, size);\n      store[$storeFlattened].push(store[key]);\n    } else if (typeof ta === \"object\") {\n      resizeRecursive(metadata, store[key], size);\n    }\n  });\n};\nvar resizeStore = (store, size) => {\n  if (store[$tagStore])\n    return;\n  store[$storeSize] = size;\n  store[$storeFlattened].length = 0;\n  Object.keys(store[$subarrayCursors]).forEach((k) => {\n    store[$subarrayCursors][k] = 0;\n  });\n  resizeRecursive(store, store, size);\n};\nvar resetStoreFor = (store, eid) => {\n  if (store[$storeFlattened]) {\n    store[$storeFlattened].forEach((ta) => {\n      if (ArrayBuffer.isView(ta))\n        ta[eid] = 0;\n      else\n        ta[eid].fill(0);\n    });\n  }\n};\nvar createTypeStore = (type, length) => {\n  const totalBytes = length * TYPES[type].BYTES_PER_ELEMENT;\n  const buffer = new ArrayBuffer(totalBytes);\n  const store = new TYPES[type](buffer);\n  store[$isEidType] = type === TYPES_ENUM.eid;\n  return store;\n};\nvar parentArray = (store) => store[$parentArray];\nvar createArrayStore = (metadata, type, length) => {\n  const storeSize = metadata[$storeSize];\n  const store = Array(storeSize).fill(0);\n  store[$storeType] = type;\n  store[$isEidType] = type === TYPES_ENUM.eid;\n  const cursors = metadata[$subarrayCursors];\n  const indexType = length <= UNSIGNED_MAX.uint8 ? TYPES_ENUM.ui8 : length <= UNSIGNED_MAX.uint16 ? TYPES_ENUM.ui16 : TYPES_ENUM.ui32;\n  if (!length)\n    throw new Error(\"bitECS - Must define component array length\");\n  if (!TYPES[type])\n    throw new Error(`bitECS - Invalid component array property type ${type}`);\n  if (!metadata[$storeSubarrays][type]) {\n    const arrayElementCount = metadata[$storeArrayElementCounts][type];\n    const array = new TYPES[type](roundToMultiple4(arrayElementCount * storeSize));\n    array[$indexType] = TYPES_NAMES[indexType];\n    array[$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    metadata[$storeSubarrays][type] = array;\n  }\n  const start = cursors[type];\n  const end = start + storeSize * length;\n  cursors[type] = end;\n  store[$parentArray] = metadata[$storeSubarrays][type].subarray(start, end);\n  for (let eid = 0; eid < storeSize; eid++) {\n    const start2 = length * eid;\n    const end2 = start2 + length;\n    store[eid] = store[$parentArray].subarray(start2, end2);\n    store[eid][$indexType] = TYPES_NAMES[indexType];\n    store[eid][$indexBytes] = TYPES[indexType].BYTES_PER_ELEMENT;\n    store[eid][$subarray] = true;\n  }\n  return store;\n};\nvar isArrayType = (x) => Array.isArray(x) && typeof x[0] === \"string\" && typeof x[1] === \"number\";\nvar createStore = (schema, size) => {\n  const $store = Symbol(\"store\");\n  if (!schema || !Object.keys(schema).length) {\n    stores[$store] = {\n      [$storeSize]: size,\n      [$tagStore]: true,\n      [$storeBase]: () => stores[$store]\n    };\n    return stores[$store];\n  }\n  schema = JSON.parse(JSON.stringify(schema));\n  const arrayElementCounts = {};\n  const collectArrayElementCounts = (s) => {\n    const keys = Object.keys(s);\n    for (const k of keys) {\n      if (isArrayType(s[k])) {\n        if (!arrayElementCounts[s[k][0]])\n          arrayElementCounts[s[k][0]] = 0;\n        arrayElementCounts[s[k][0]] += s[k][1];\n      } else if (s[k] instanceof Object) {\n        collectArrayElementCounts(s[k]);\n      }\n    }\n  };\n  collectArrayElementCounts(schema);\n  const metadata = {\n    [$storeSize]: size,\n    [$storeMaps]: {},\n    [$storeSubarrays]: {},\n    [$storeRef]: $store,\n    [$subarrayCursors]: Object.keys(TYPES).reduce((a, type) => ({ ...a, [type]: 0 }), {}),\n    [$storeFlattened]: [],\n    [$storeArrayElementCounts]: arrayElementCounts\n  };\n  if (schema instanceof Object && Object.keys(schema).length) {\n    const recursiveTransform = (a, k) => {\n      if (typeof a[k] === \"string\") {\n        a[k] = createTypeStore(a[k], size);\n        a[k][$storeBase] = () => stores[$store];\n        metadata[$storeFlattened].push(a[k]);\n      } else if (isArrayType(a[k])) {\n        const [type, length] = a[k];\n        a[k] = createArrayStore(metadata, type, length);\n        a[k][$storeBase] = () => stores[$store];\n        metadata[$storeFlattened].push(a[k]);\n      } else if (a[k] instanceof Object) {\n        a[k] = Object.keys(a[k]).reduce(recursiveTransform, a[k]);\n      }\n      return a;\n    };\n    stores[$store] = Object.assign(Object.keys(schema).reduce(recursiveTransform, schema), metadata);\n    stores[$store][$storeBase] = () => stores[$store];\n    return stores[$store];\n  }\n};\n\n// src/Util.js\nvar SparseSet = () => {\n  const dense = [];\n  const sparse = [];\n  dense.sort = function(comparator) {\n    const result = Array.prototype.sort.call(this, comparator);\n    for (let i = 0; i < dense.length; i++) {\n      sparse[dense[i]] = i;\n    }\n    return result;\n  };\n  const has = (val) => dense[sparse[val]] === val;\n  const add = (val) => {\n    if (has(val))\n      return;\n    sparse[val] = dense.push(val) - 1;\n  };\n  const remove = (val) => {\n    if (!has(val))\n      return;\n    const index = sparse[val];\n    const swapped = dense.pop();\n    if (swapped !== val) {\n      dense[index] = swapped;\n      sparse[swapped] = index;\n    }\n  };\n  return {\n    add,\n    remove,\n    has,\n    sparse,\n    dense\n  };\n};\n\n// src/Serialize.js\nvar DESERIALIZE_MODE = {\n  REPLACE: 0,\n  APPEND: 1,\n  MAP: 2\n};\nvar resized = false;\nvar setSerializationResized = (v) => {\n  resized = v;\n};\nvar concat = (a, v) => a.concat(v);\nvar not = (fn) => (v) => !fn(v);\nvar storeFlattened = (c) => c[$storeFlattened];\nvar isFullComponent = storeFlattened;\nvar isProperty = not(isFullComponent);\nvar isModifier = (c) => typeof c === \"function\";\nvar isNotModifier = not(isModifier);\nvar isChangedModifier = (c) => isModifier(c) && c()[1] === \"changed\";\nvar isWorld = (w) => Object.getOwnPropertySymbols(w).includes($componentMap);\nvar fromModifierToComponent = (c) => c()[0];\nvar canonicalize = (target) => {\n  if (isWorld(target))\n    return [[], /* @__PURE__ */ new Map()];\n  const fullComponentProps = target.filter(isNotModifier).filter(isFullComponent).map(storeFlattened).reduce(concat, []);\n  const changedComponentProps = target.filter(isChangedModifier).map(fromModifierToComponent).filter(isFullComponent).map(storeFlattened).reduce(concat, []);\n  const props = target.filter(isNotModifier).filter(isProperty);\n  const changedProps = target.filter(isChangedModifier).map(fromModifierToComponent).filter(isProperty);\n  const componentProps = [...fullComponentProps, ...props, ...changedComponentProps, ...changedProps];\n  const allChangedProps = [...changedComponentProps, ...changedProps].reduce((map, prop) => {\n    const $ = Symbol();\n    createShadow(prop, $);\n    map.set(prop, $);\n    return map;\n  }, /* @__PURE__ */ new Map());\n  return [componentProps, allChangedProps];\n};\nvar defineSerializer = (target, maxBytes = 2e7) => {\n  const worldSerializer = isWorld(target);\n  let [componentProps, changedProps] = canonicalize(target);\n  const buffer = new ArrayBuffer(maxBytes);\n  const view = new DataView(buffer);\n  const entityComponentCache = /* @__PURE__ */ new Map();\n  return (ents) => {\n    if (resized) {\n      [componentProps, changedProps] = canonicalize(target);\n      resized = false;\n    }\n    if (worldSerializer) {\n      componentProps = [];\n      target[$componentMap].forEach((c, component) => {\n        if (component[$storeFlattened])\n          componentProps.push(...component[$storeFlattened]);\n        else\n          componentProps.push(component);\n      });\n    }\n    let world;\n    if (Object.getOwnPropertySymbols(ents).includes($componentMap)) {\n      world = ents;\n      ents = ents[$entityArray];\n    } else {\n      world = eidToWorld.get(ents[0]);\n    }\n    let where = 0;\n    if (!ents.length)\n      return buffer.slice(0, where);\n    const cache = /* @__PURE__ */ new Map();\n    for (let pid = 0; pid < componentProps.length; pid++) {\n      const prop = componentProps[pid];\n      const component = prop[$storeBase]();\n      const $diff = changedProps.get(prop);\n      const shadow = $diff ? prop[$diff] : null;\n      if (!cache.has(component))\n        cache.set(component, /* @__PURE__ */ new Map());\n      view.setUint8(where, pid);\n      where += 1;\n      const countWhere = where;\n      where += 4;\n      let writeCount = 0;\n      for (let i = 0; i < ents.length; i++) {\n        const eid = ents[i];\n        let componentCache = entityComponentCache.get(eid);\n        if (!componentCache)\n          componentCache = entityComponentCache.set(eid, /* @__PURE__ */ new Set()).get(eid);\n        componentCache.add(eid);\n        const newlyAddedComponent = shadow && cache.get(component).get(eid) || !componentCache.has(component) && hasComponent(world, component, eid);\n        cache.get(component).set(eid, newlyAddedComponent);\n        if (newlyAddedComponent) {\n          componentCache.add(component);\n        } else if (!hasComponent(world, component, eid)) {\n          componentCache.delete(component);\n          continue;\n        }\n        const rewindWhere = where;\n        view.setUint32(where, eid);\n        where += 4;\n        if (prop[$tagStore]) {\n          writeCount++;\n          continue;\n        }\n        if (ArrayBuffer.isView(prop[eid])) {\n          const type = prop[eid].constructor.name.replace(\"Array\", \"\");\n          const indexType = prop[eid][$indexType];\n          const indexBytes = prop[eid][$indexBytes];\n          const countWhere2 = where;\n          where += indexBytes;\n          let arrayWriteCount = 0;\n          for (let i2 = 0; i2 < prop[eid].length; i2++) {\n            if (shadow) {\n              const changed = shadow[eid][i2] !== prop[eid][i2];\n              shadow[eid][i2] = prop[eid][i2];\n              if (!changed && !newlyAddedComponent) {\n                continue;\n              }\n            }\n            view[`set${indexType}`](where, i2);\n            where += indexBytes;\n            const value = prop[eid][i2];\n            view[`set${type}`](where, value);\n            where += prop[eid].BYTES_PER_ELEMENT;\n            arrayWriteCount++;\n          }\n          if (arrayWriteCount > 0) {\n            view[`set${indexType}`](countWhere2, arrayWriteCount);\n            writeCount++;\n          } else {\n            where = rewindWhere;\n            continue;\n          }\n        } else {\n          if (shadow) {\n            const changed = shadow[eid] !== prop[eid];\n            shadow[eid] = prop[eid];\n            if (!changed && !newlyAddedComponent) {\n              where = rewindWhere;\n              continue;\n            }\n          }\n          const type = prop.constructor.name.replace(\"Array\", \"\");\n          view[`set${type}`](where, prop[eid]);\n          where += prop.BYTES_PER_ELEMENT;\n          writeCount++;\n        }\n      }\n      if (writeCount > 0) {\n        view.setUint32(countWhere, writeCount);\n      } else {\n        where -= 5;\n      }\n    }\n    return buffer.slice(0, where);\n  };\n};\nvar newEntities = /* @__PURE__ */ new Map();\nvar defineDeserializer = (target) => {\n  const isWorld2 = Object.getOwnPropertySymbols(target).includes($componentMap);\n  let [componentProps] = canonicalize(target);\n  const deserializedEntities = /* @__PURE__ */ new Set();\n  return (world, packet, mode = 0) => {\n    newEntities.clear();\n    if (resized) {\n      [componentProps] = canonicalize(target);\n      resized = false;\n    }\n    if (isWorld2) {\n      componentProps = [];\n      target[$componentMap].forEach((c, component) => {\n        if (component[$storeFlattened])\n          componentProps.push(...component[$storeFlattened]);\n        else\n          componentProps.push(component);\n      });\n    }\n    const localEntities = world[$localEntities];\n    const localEntityLookup = world[$localEntityLookup];\n    const view = new DataView(packet);\n    let where = 0;\n    while (where < packet.byteLength) {\n      const pid = view.getUint8(where);\n      where += 1;\n      const entityCount = view.getUint32(where);\n      where += 4;\n      const prop = componentProps[pid];\n      for (let i = 0; i < entityCount; i++) {\n        let eid = view.getUint32(where);\n        where += 4;\n        if (mode === DESERIALIZE_MODE.MAP) {\n          if (localEntities.has(eid)) {\n            eid = localEntities.get(eid);\n          } else if (newEntities.has(eid)) {\n            eid = newEntities.get(eid);\n          } else {\n            const newEid = addEntity(world);\n            localEntities.set(eid, newEid);\n            localEntityLookup.set(newEid, eid);\n            newEntities.set(eid, newEid);\n            eid = newEid;\n          }\n        }\n        if (mode === DESERIALIZE_MODE.APPEND || mode === DESERIALIZE_MODE.REPLACE && !world[$entitySparseSet].has(eid)) {\n          const newEid = newEntities.get(eid) || addEntity(world);\n          newEntities.set(eid, newEid);\n          eid = newEid;\n        }\n        const component = prop[$storeBase]();\n        if (!hasComponent(world, component, eid)) {\n          addComponent(world, component, eid);\n        }\n        deserializedEntities.add(eid);\n        if (component[$tagStore]) {\n          continue;\n        }\n        if (ArrayBuffer.isView(prop[eid])) {\n          const array = prop[eid];\n          const count = view[`get${array[$indexType]}`](where);\n          where += array[$indexBytes];\n          for (let i2 = 0; i2 < count; i2++) {\n            const index = view[`get${array[$indexType]}`](where);\n            where += array[$indexBytes];\n            const value = view[`get${array.constructor.name.replace(\"Array\", \"\")}`](where);\n            where += array.BYTES_PER_ELEMENT;\n            if (prop[$isEidType]) {\n              let localEid;\n              if (localEntities.has(value)) {\n                localEid = localEntities.get(value);\n              } else if (newEntities.has(value)) {\n                localEid = newEntities.get(value);\n              } else {\n                const newEid = addEntity(world);\n                localEntities.set(value, newEid);\n                localEntityLookup.set(newEid, value);\n                newEntities.set(value, newEid);\n                localEid = newEid;\n              }\n              prop[eid][index] = localEid;\n            } else\n              prop[eid][index] = value;\n          }\n        } else {\n          const value = view[`get${prop.constructor.name.replace(\"Array\", \"\")}`](where);\n          where += prop.BYTES_PER_ELEMENT;\n          if (prop[$isEidType]) {\n            let localEid;\n            if (localEntities.has(value)) {\n              localEid = localEntities.get(value);\n            } else if (newEntities.has(value)) {\n              localEid = newEntities.get(value);\n            } else {\n              const newEid = addEntity(world);\n              localEntities.set(value, newEid);\n              localEntityLookup.set(newEid, value);\n              newEntities.set(value, newEid);\n              localEid = newEid;\n            }\n            prop[eid] = localEid;\n          } else\n            prop[eid] = value;\n        }\n      }\n    }\n    const ents = Array.from(deserializedEntities);\n    deserializedEntities.clear();\n    return ents;\n  };\n};\n\n// src/Entity.js\nvar $entityMasks = Symbol(\"entityMasks\");\nvar $entityComponents = Symbol(\"entityComponents\");\nvar $entitySparseSet = Symbol(\"entitySparseSet\");\nvar $entityArray = Symbol(\"entityArray\");\nvar $entityIndices = Symbol(\"entityIndices\");\nvar $removedEntities = Symbol(\"removedEntities\");\nvar defaultSize = 1e5;\nvar globalEntityCursor = 0;\nvar globalSize = defaultSize;\nvar resizeThreshold = () => globalSize - globalSize / 5;\nvar getGlobalSize = () => globalSize;\nvar removed = [];\nvar defaultRemovedReuseThreshold = 0.01;\nvar removedReuseThreshold = defaultRemovedReuseThreshold;\nvar resetGlobals = () => {\n  globalSize = defaultSize;\n  globalEntityCursor = 0;\n  removedReuseThreshold = defaultRemovedReuseThreshold;\n  removed.length = 0;\n};\nvar setDefaultSize = (newSize) => {\n  const oldSize = globalSize;\n  defaultSize = newSize;\n  resetGlobals();\n  globalSize = newSize;\n  resizeWorlds(newSize);\n  resizeComponents(newSize);\n  setSerializationResized(true);\n  console.info(`\\u{1F47E} bitECS - resizing all data stores from ${oldSize} to ${newSize}`);\n};\nvar setRemovedRecycleThreshold = (newThreshold) => {\n  removedReuseThreshold = newThreshold;\n};\nvar getEntityCursor = () => globalEntityCursor;\nvar eidToWorld = /* @__PURE__ */ new Map();\nvar addEntity = (world) => {\n  if (globalEntityCursor >= resizeThreshold()) {\n    const size = globalSize;\n    const amount = Math.ceil(size / 2 / 4) * 4;\n    setDefaultSize(size + amount);\n  }\n  const eid = removed.length > Math.round(defaultSize * removedReuseThreshold) ? removed.shift() : globalEntityCursor++;\n  world[$entitySparseSet].add(eid);\n  eidToWorld.set(eid, world);\n  world[$notQueries].forEach((q) => {\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n  });\n  world[$entityComponents].set(eid, /* @__PURE__ */ new Set());\n  return eid;\n};\nvar removeEntity = (world, eid) => {\n  if (!world[$entitySparseSet].has(eid))\n    return;\n  world[$queries].forEach((q) => {\n    queryRemoveEntity(world, q, eid);\n  });\n  removed.push(eid);\n  world[$entitySparseSet].remove(eid);\n  world[$entityComponents].delete(eid);\n  world[$localEntities].delete(world[$localEntityLookup].get(eid));\n  world[$localEntityLookup].delete(eid);\n  for (let i = 0; i < world[$entityMasks].length; i++)\n    world[$entityMasks][i][eid] = 0;\n};\nvar getEntityComponents = (world, eid) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  return Array.from(world[$entityComponents].get(eid));\n};\nvar entityExists = (world, eid) => world[$entitySparseSet].has(eid);\n\n// src/Query.js\nfunction Not(c) {\n  return () => [c, \"not\"];\n}\nfunction Changed(c) {\n  return () => [c, \"changed\"];\n}\nfunction Any(...comps) {\n  return function QueryAny() {\n    return comps;\n  };\n}\nfunction All(...comps) {\n  return function QueryAll() {\n    return comps;\n  };\n}\nfunction None(...comps) {\n  return function QueryNone() {\n    return comps;\n  };\n}\nvar $queries = Symbol(\"queries\");\nvar $notQueries = Symbol(\"notQueries\");\nvar $queryAny = Symbol(\"queryAny\");\nvar $queryAll = Symbol(\"queryAll\");\nvar $queryNone = Symbol(\"queryNone\");\nvar $queryMap = Symbol(\"queryMap\");\nvar $dirtyQueries = Symbol(\"$dirtyQueries\");\nvar $queryComponents = Symbol(\"queryComponents\");\nvar $enterQuery = Symbol(\"enterQuery\");\nvar $exitQuery = Symbol(\"exitQuery\");\nvar enterQuery = (query) => (world) => {\n  if (!world[$queryMap].has(query))\n    registerQuery(world, query);\n  const q = world[$queryMap].get(query);\n  const entered = q.entered.dense.slice();\n  q.entered = SparseSet();\n  return entered;\n};\nvar exitQuery = (query) => (world) => {\n  if (!world[$queryMap].has(query))\n    registerQuery(world, query);\n  const q = world[$queryMap].get(query);\n  const exited = q.exited.dense.slice();\n  q.exited = SparseSet();\n  return exited;\n};\nvar registerQuery = (world, query) => {\n  const components2 = [];\n  const notComponents = [];\n  const changedComponents = [];\n  query[$queryComponents].forEach((c) => {\n    if (typeof c === \"function\") {\n      const [comp, mod] = c();\n      if (!world[$componentMap].has(comp))\n        registerComponent(world, comp);\n      if (mod === \"not\") {\n        notComponents.push(comp);\n      }\n      if (mod === \"changed\") {\n        changedComponents.push(comp);\n        components2.push(comp);\n      }\n    } else {\n      if (!world[$componentMap].has(c))\n        registerComponent(world, c);\n      components2.push(c);\n    }\n  });\n  const mapComponents = (c) => world[$componentMap].get(c);\n  const allComponents = components2.concat(notComponents).map(mapComponents);\n  const sparseSet = SparseSet();\n  const archetypes = [];\n  const changed = [];\n  const toRemove = SparseSet();\n  const entered = SparseSet();\n  const exited = SparseSet();\n  const generations = allComponents.map((c) => c.generationId).reduce((a, v) => {\n    if (a.includes(v))\n      return a;\n    a.push(v);\n    return a;\n  }, []);\n  const reduceBitflags = (a, c) => {\n    if (!a[c.generationId])\n      a[c.generationId] = 0;\n    a[c.generationId] |= c.bitflag;\n    return a;\n  };\n  const masks = components2.map(mapComponents).reduce(reduceBitflags, {});\n  const notMasks = notComponents.map(mapComponents).reduce(reduceBitflags, {});\n  const hasMasks = allComponents.reduce(reduceBitflags, {});\n  const flatProps = components2.filter((c) => !c[$tagStore]).map((c) => Object.getOwnPropertySymbols(c).includes($storeFlattened) ? c[$storeFlattened] : [c]).reduce((a, v) => a.concat(v), []);\n  const shadows = [];\n  const q = Object.assign(sparseSet, {\n    archetypes,\n    changed,\n    components: components2,\n    notComponents,\n    changedComponents,\n    allComponents,\n    masks,\n    notMasks,\n    hasMasks,\n    generations,\n    flatProps,\n    toRemove,\n    entered,\n    exited,\n    shadows\n  });\n  world[$queryMap].set(query, q);\n  world[$queries].add(q);\n  allComponents.forEach((c) => {\n    c.queries.add(q);\n  });\n  if (notComponents.length)\n    world[$notQueries].add(q);\n  for (let eid = 0; eid < getEntityCursor(); eid++) {\n    if (!world[$entitySparseSet].has(eid))\n      continue;\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n  }\n};\nvar generateShadow = (q, pid) => {\n  const $ = Symbol();\n  const prop = q.flatProps[pid];\n  createShadow(prop, $);\n  q.shadows[pid] = prop[$];\n  return prop[$];\n};\nvar diff = (q, clearDiff) => {\n  if (clearDiff)\n    q.changed = [];\n  const { flatProps, shadows } = q;\n  for (let i = 0; i < q.dense.length; i++) {\n    const eid = q.dense[i];\n    let dirty = false;\n    for (let pid = 0; pid < flatProps.length; pid++) {\n      const prop = flatProps[pid];\n      const shadow = shadows[pid] || generateShadow(q, pid);\n      if (ArrayBuffer.isView(prop[eid])) {\n        for (let i2 = 0; i2 < prop[eid].length; i2++) {\n          if (prop[eid][i2] !== shadow[eid][i2]) {\n            dirty = true;\n            break;\n          }\n        }\n        shadow[eid].set(prop[eid]);\n      } else {\n        if (prop[eid] !== shadow[eid]) {\n          dirty = true;\n          shadow[eid] = prop[eid];\n        }\n      }\n    }\n    if (dirty)\n      q.changed.push(eid);\n  }\n  return q.changed;\n};\nvar flatten = (a, v) => a.concat(v);\nvar aggregateComponentsFor = (mod) => (x) => x.filter((f) => f.name === mod().constructor.name).reduce(flatten);\nvar getAnyComponents = aggregateComponentsFor(Any);\nvar getAllComponents = aggregateComponentsFor(All);\nvar getNoneComponents = aggregateComponentsFor(None);\nvar defineQuery = (...args) => {\n  let components2;\n  let any, all, none;\n  if (Array.isArray(args[0])) {\n    components2 = args[0];\n  } else {\n  }\n  if (components2 === void 0 || components2[$componentMap] !== void 0) {\n    return (world) => world ? world[$entityArray] : components2[$entityArray];\n  }\n  const query = function(world, clearDiff = true) {\n    if (!world[$queryMap].has(query))\n      registerQuery(world, query);\n    const q = world[$queryMap].get(query);\n    commitRemovals(world);\n    if (q.changedComponents.length)\n      return diff(q, clearDiff);\n    return q.dense;\n  };\n  query[$queryComponents] = components2;\n  query[$queryAny] = any;\n  query[$queryAll] = all;\n  query[$queryNone] = none;\n  return query;\n};\nvar queryCheckEntity = (world, q, eid) => {\n  const { masks, notMasks, generations } = q;\n  let or = 0;\n  for (let i = 0; i < generations.length; i++) {\n    const generationId = generations[i];\n    const qMask = masks[generationId];\n    const qNotMask = notMasks[generationId];\n    const eMask = world[$entityMasks][generationId][eid];\n    if (qNotMask && (eMask & qNotMask) !== 0) {\n      return false;\n    }\n    if (qMask && (eMask & qMask) !== qMask) {\n      return false;\n    }\n  }\n  return true;\n};\nvar queryAddEntity = (q, eid) => {\n  q.toRemove.remove(eid);\n  q.entered.add(eid);\n  q.add(eid);\n};\nvar queryCommitRemovals = (q) => {\n  for (let i = q.toRemove.dense.length - 1; i >= 0; i--) {\n    const eid = q.toRemove.dense[i];\n    q.toRemove.remove(eid);\n    q.remove(eid);\n  }\n};\nvar commitRemovals = (world) => {\n  if (!world[$dirtyQueries].size)\n    return;\n  world[$dirtyQueries].forEach(queryCommitRemovals);\n  world[$dirtyQueries].clear();\n};\nvar queryRemoveEntity = (world, q, eid) => {\n  if (!q.has(eid) || q.toRemove.has(eid))\n    return;\n  q.toRemove.add(eid);\n  world[$dirtyQueries].add(q);\n  q.exited.add(eid);\n};\nvar resetChangedQuery = (world, query) => {\n  const q = world[$queryMap].get(query);\n  q.changed = [];\n};\nvar removeQuery = (world, query) => {\n  const q = world[$queryMap].get(query);\n  world[$queries].delete(q);\n  world[$queryMap].delete(query);\n};\n\n// src/Component.js\nvar $componentMap = Symbol(\"componentMap\");\nvar components = [];\nvar resizeComponents = (size) => {\n  components.forEach((component) => resizeStore(component, size));\n};\nvar defineComponent = (schema, size) => {\n  const component = createStore(schema, size || getGlobalSize());\n  if (schema && Object.keys(schema).length)\n    components.push(component);\n  return component;\n};\nvar incrementBitflag = (world) => {\n  world[$bitflag] *= 2;\n  if (world[$bitflag] >= 2 ** 31) {\n    world[$bitflag] = 1;\n    world[$entityMasks].push(new Uint32Array(world[$size]));\n  }\n};\nvar registerComponent = (world, component) => {\n  if (!component)\n    throw new Error(`bitECS - Cannot register null or undefined component`);\n  const queries = /* @__PURE__ */ new Set();\n  const notQueries = /* @__PURE__ */ new Set();\n  const changedQueries = /* @__PURE__ */ new Set();\n  world[$queries].forEach((q) => {\n    if (q.allComponents.includes(component)) {\n      queries.add(q);\n    }\n  });\n  world[$componentMap].set(component, {\n    generationId: world[$entityMasks].length - 1,\n    bitflag: world[$bitflag],\n    store: component,\n    queries,\n    notQueries,\n    changedQueries\n  });\n  if (component[$storeSize] < getGlobalSize()) {\n    resizeStore(component, getGlobalSize());\n  }\n  incrementBitflag(world);\n};\nvar registerComponents = (world, components2) => {\n  components2.forEach((c) => registerComponent(world, c));\n};\nvar hasComponent = (world, component, eid) => {\n  const registeredComponent = world[$componentMap].get(component);\n  if (!registeredComponent)\n    return false;\n  const { generationId, bitflag } = registeredComponent;\n  const mask = world[$entityMasks][generationId][eid];\n  return (mask & bitflag) === bitflag;\n};\nvar addComponent = (world, component, eid, reset = false) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  if (!world[$componentMap].has(component))\n    registerComponent(world, component);\n  if (hasComponent(world, component, eid))\n    return;\n  const c = world[$componentMap].get(component);\n  const { generationId, bitflag, queries, notQueries } = c;\n  world[$entityMasks][generationId][eid] |= bitflag;\n  queries.forEach((q) => {\n    if (q.toRemove.has(eid))\n      q.toRemove.remove(eid);\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n    if (!match)\n      queryRemoveEntity(world, q, eid);\n  });\n  world[$entityComponents].get(eid).add(component);\n  if (reset)\n    resetStoreFor(component, eid);\n};\nvar removeComponent = (world, component, eid, reset = true) => {\n  if (eid === void 0)\n    throw new Error(\"bitECS - entity is undefined.\");\n  if (!world[$entitySparseSet].has(eid))\n    throw new Error(\"bitECS - entity does not exist in the world.\");\n  if (!hasComponent(world, component, eid))\n    return;\n  const c = world[$componentMap].get(component);\n  const { generationId, bitflag, queries } = c;\n  world[$entityMasks][generationId][eid] &= ~bitflag;\n  queries.forEach((q) => {\n    if (q.toRemove.has(eid))\n      q.toRemove.remove(eid);\n    const match = queryCheckEntity(world, q, eid);\n    if (match)\n      queryAddEntity(q, eid);\n    if (!match)\n      queryRemoveEntity(world, q, eid);\n  });\n  world[$entityComponents].get(eid).delete(component);\n  if (reset)\n    resetStoreFor(component, eid);\n};\n\n// src/World.js\nvar $size = Symbol(\"size\");\nvar $resizeThreshold = Symbol(\"resizeThreshold\");\nvar $bitflag = Symbol(\"bitflag\");\nvar $archetypes = Symbol(\"archetypes\");\nvar $localEntities = Symbol(\"localEntities\");\nvar $localEntityLookup = Symbol(\"localEntityLookup\");\nvar worlds = [];\nvar resizeWorlds = (size) => {\n  worlds.forEach((world) => {\n    world[$size] = size;\n    for (let i = 0; i < world[$entityMasks].length; i++) {\n      const masks = world[$entityMasks][i];\n      world[$entityMasks][i] = resize(masks, size);\n    }\n    world[$resizeThreshold] = world[$size] - world[$size] / 5;\n  });\n};\nvar createWorld = (...args) => {\n  const world = typeof args[0] === \"object\" ? args[0] : {};\n  const size = typeof args[0] === \"number\" ? args[0] : typeof args[1] === \"number\" ? args[1] : getGlobalSize();\n  resetWorld(world, size);\n  worlds.push(world);\n  return world;\n};\nvar resetWorld = (world, size = getGlobalSize()) => {\n  world[$size] = size;\n  if (world[$entityArray])\n    world[$entityArray].forEach((eid) => removeEntity(world, eid));\n  world[$entityMasks] = [new Uint32Array(size)];\n  world[$entityComponents] = /* @__PURE__ */ new Map();\n  world[$archetypes] = [];\n  world[$entitySparseSet] = SparseSet();\n  world[$entityArray] = world[$entitySparseSet].dense;\n  world[$bitflag] = 1;\n  world[$componentMap] = /* @__PURE__ */ new Map();\n  world[$queryMap] = /* @__PURE__ */ new Map();\n  world[$queries] = /* @__PURE__ */ new Set();\n  world[$notQueries] = /* @__PURE__ */ new Set();\n  world[$dirtyQueries] = /* @__PURE__ */ new Set();\n  world[$localEntities] = /* @__PURE__ */ new Map();\n  world[$localEntityLookup] = /* @__PURE__ */ new Map();\n  return world;\n};\nvar deleteWorld = (world) => {\n  Object.getOwnPropertySymbols(world).forEach(($) => {\n    delete world[$];\n  });\n  Object.keys(world).forEach((key) => {\n    delete world[key];\n  });\n  worlds.splice(worlds.indexOf(world), 1);\n};\nvar getWorldComponents = (world) => Array.from(world[$componentMap].keys());\nvar getAllEntities = (world) => world[$entitySparseSet].dense.slice(0);\n\n// src/System.js\nvar defineSystem = (update) => (world, ...args) => {\n  update(world, ...args);\n  return world;\n};\n\n// src/index.js\nvar pipe = (...fns) => (input) => {\n  let tmp = input;\n  for (let i = 0; i < fns.length; i++) {\n    const fn = fns[i];\n    tmp = fn(tmp);\n  }\n  return tmp;\n};\nvar Types = TYPES_ENUM;\nexport {\n  Changed,\n  DESERIALIZE_MODE,\n  Not,\n  Types,\n  addComponent,\n  addEntity,\n  commitRemovals,\n  createWorld,\n  defineComponent,\n  defineDeserializer,\n  defineQuery,\n  defineSerializer,\n  defineSystem,\n  deleteWorld,\n  enterQuery,\n  entityExists,\n  exitQuery,\n  getAllEntities,\n  getEntityComponents,\n  getWorldComponents,\n  hasComponent,\n  parentArray,\n  pipe,\n  registerComponent,\n  registerComponents,\n  removeComponent,\n  removeEntity,\n  removeQuery,\n  resetChangedQuery,\n  resetWorld,\n  setDefaultSize,\n  setRemovedRecycleThreshold\n};\n//# sourceMappingURL=index.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"assets/js/\" + chunkId + \"-\" + {\"30\":\"33feee8912fbb9f86cb7\",\"56\":\"6355c5185b4e4ce6dcd8\",\"76\":\"e33c44d6605d1ba4d9e7\",\"116\":\"7bcf915010ef5cfec6b0\",\"160\":\"3a627c660bdcd661b30f\",\"188\":\"72828fae6854d71bb4e4\",\"297\":\"027c0244da655969168e\",\"441\":\"5f411d5aacab400324d8\",\"540\":\"88f7021158d167173ca5\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 324;","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t324: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkhubs\"] = self[\"webpackChunkhubs\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [495,542,119], function() { return __webpack_require__(89587); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","inProgress","dataWebpackPrefix","exports","invalidProtocolRegex","ctrlCharactersRegex","urlSchemeRegex","relativeFirstCharacters","url","sanitizedUrl","replace","trim","indexOf","isRelativeUrlWithoutProtocol","urlSchemeParseResults","match","urlScheme","test","Object","defineProperty","value","isUnicodeLanguageSubtag","isUnicodeScriptSubtag","isUnicodeRegionSubtag","isStructurallyValidLanguageTag","parseUnicodeLanguageId","parseUnicodeLocaleId","getCanonicalLocales","tslib_1","parser_1","emitter_1","canonicalizer_1","locales","undefined","seen","_i","locales_1","length","locale","canonicalizedTag","emitUnicodeLocaleId","canonicalizeUnicodeLocaleId","push","CanonicalizeLocaleList","parser_2","enumerable","get","__exportStar","variantAlias","scriptAlias","territoryAlias","languageAlias","canonicalizeUnicodeLanguageId","aliases_generated_1","likelySubtags_generated_1","canonicalizeKVs","arr","all","result","arr_1","kv","toLowerCase","sort","compareKV","t1","t2","compareExtension","e1","e2","type","mergeVariants","v1","v2","__spreadArray","v2_1","v","unicodeLanguageId","finalLangAst","variants","replacedLang_1","_a","variant","emitUnicodeLanguageId","lang","replacedLangAst","split","SEPARATOR","script","region","replacedLang_2","replacedLang_3","replacedLang","toUpperCase","regionAlias","replacedRegion","regions","likelySubtag","likelySubtags","likelyRegion","slice","i","alias","isUnicodeVariantSubtag","extensions","extension","keywords","attributes","strs","keys","reduce","str","fields","filter","Boolean","join","chunks","extensions_1","ext","apply","concat","ALPHANUM_1_8","ALPHANUM_2_8","ALPHANUM_3_8","KEY_REGEX","TYPE_REGEX","ALPHA_4","OTHER_EXTENSION_TYPE","UNICODE_REGION_SUBTAG_REGEX","UNICODE_VARIANT_SUBTAG_REGEX","UNICODE_LANGUAGE_SUBTAG_REGEX","TKEY_REGEX","shift","RangeError","parseUnicodeExtension","keyword","parseKeyword","key","parseTransformedExtension","e","parsePuExtension","exts","parseOtherExtensionValue","tag","__assign","unicodeExtension","transformedExtension","puExtension","otherExtensionMap","parseExtensions","internalSlotMap","WeakMap","x","internalSlots","create","set","Locale","ecma402_abstract_1","intl_getcanonicallocales_1","get_internal_slots_1","__importDefault","RELEVANT_EXTENSION_KEYS","UNICODE_TYPE_REGEX","mergeUnicodeLanguageId","replacement","addLikelySubtags","ast","unicodeLangId","match_1","parts_1","match_2","parts_2","match_3","parts_3","Error","parts","opts","this","constructor","TypeError","relevantExtensionKeys","internalSlotsList","default","initializedLocale","toString","options","CoerceOptionsToObject","invariant","language","GetOption","languageId","Intl","applyOptionsToTag","opt","calendar","ca","collation","co","hc","kf","kn","_kn","String","numberingSystem","nu","r","Array","isArray","_b","relevantExtensionKeys_1","entry","_c","keywords_1","optionsValue","applyUnicodeExtensionToTag","hourCycle","caseFirst","numeric","SameValue","prototype","maximize","minimize","maxLocale","removeLikelySubtags","configurable","Symbol","toStringTag","writable","_1","shouldPolyfill","hasIntlGetCanonicalLocalesBug","GetOperands","s","n","ToNumber","isFinite","iv","f","dp","fv","w","t","Math","abs","ft","Number","IntegerDigits","NumberOfFractionDigits","NumberOfFractionDigitsWithoutTrailing","FractionDigits","FractionDigitsWithoutTrailing","InitializePluralRules","intl_localematcher_1","pl","availableLocales","localeData","getDefaultLocale","getInternalSlots","requestedLocales","initializedPluralRules","matcher","localeMatcher","SetNumberFormatDigitOptions","ResolveLocale","ResolvePlural","GetOperands_1","PluralRuleSelect","Type","FormatNumericToString","formattedString","PluralRules","InitializePluralRules_1","ResolvePlural_1","validateInstance","instance","method","_n","fn","resolvedOptions","forEach","field","val","pluralCategories","categories","select","supportedLocalesOf","SupportedLocales","__addLocaleData","data","arguments","data_1","d","add","__defaultLocale","Set","polyfilled","error","ex","ord","v0","t0","n10","n100","supported_locales_1","minimumFractionDigits","supportedLocales","RelativeTimeFormat","InitializeRelativeTimeFormat","format","unit","initializedRelativeTimeFormat","PartitionRelativeTimePattern","ToString","map","el","formatToParts","style","minimizedLocale","getMagnitude","floor","log","LOG10E","repeat","times","setInternalSlot","setMultiInternalSlots","props","k","getInternalSlot","getMultiInternalSlots","slots","isLiteralPart","patternPart","target","name","UNICODE_EXTENSION_SEQUENCE_REGEX","condition","message","Err","RangePatternType","DATE_TIME_PROPS","removalPenalty","additionPenalty","differentNumericTypePenalty","longLessPenalty","longMorePenalty","shortLessPenalty","shortMorePenalty","DATE_TIME_REGEX","expPatternTrimmer","matchSkeletonPattern","len","era","year","month","day","weekday","hour12","hour","minute","second","timeZoneName","skeletonTokenToTable2","c","processDateTimePattern","pattern","literals","pattern12","_","literal","m","parseDateTimeSkeleton","skeleton","rawPattern","rangePatterns","intervalFormatFallback","rangePatterns12","intervalResult","patternParts","pattern_1","pattern12_1","splitRangePattern","source","startRange","endRange","shared","splitFallbackRangePattern","PART_REGEX","splitIndex","exec","index","isNumericType","bestFitFormatMatcherScore","score","DATE_TIME_PROPS_1","prop","optionsProp","formatProp","values","optionsPropIndex","formatPropIndex","delta","max","min","BestFitFormatMatcher","formats","bestScore","bestFormat","formats_1","skeletonFormat","patternFormat","skeletonValue","patternValue","requestedValue","CanonicalizeTimeZoneName","tz","tzData","uppercaseLinks","uppercasedTz","uppercasedZones","z","ianaTimeZone","o","NaN","TimeClip","time","number","isNaN","integer","ToInteger","ToObject","arg","y","is","ArrayCreate","HasOwnProperty","hasOwnProperty","call","MS_PER_DAY","mod","Day","WeekDay","DayFromYear","Date","UTC","TimeFromYear","YearFromTime","getUTCFullYear","DaysInYear","DayWithinYear","InLeapYear","MonthFromTime","dwy","leap","DateFromTime","mft","HOURS_PER_DAY","MINUTES_PER_HOUR","SECONDS_PER_MINUTE","MS_PER_SECOND","MS_PER_MINUTE","MS_PER_HOUR","HourFromTime","MinFromTime","SecFromTime","OrdinaryHasInstance","C","O","boundTargetFunction","P","isPrototypeOf","msFromTime","BasicFormatMatcher","DateTimeStyleFormat","dateStyle","timeStyle","dataLocaleData","dateFormat","timeFormat","connector","dateTimeFormat","ToLocalTime","timeZone","zoneData","offset","dst","getApplicableZoneData","timeZoneOffset","inDST","relatedYear","yearName","millisecond","pad","offsetToGmtString","gmtFormat","hourFormat","offsetInMs","offsetInMinutes","mins","hours","positivePattern","negativePattern","offsetStr","FormatDateTimePattern","dtf","getDefaultTimeZone","dataLocale","nfOptions","useGrouping","nf","NumberFormat","nf2Options","minimumIntegerDigits","nf3","nf2","fractionalSecondDigits","nf3Options","tm","patternParts_1","p","pow","timeZoneData","pm","am","PartitionPattern","beginIndex","endIndex","nextIndex","substring","PartitionDateTimePattern","implDetails","FormatDateTime","TABLE_2_FIELDS","PartitionDateTimeRangePattern","rangePattern","tm1","tm2","dateFieldsPracticallyEqual","patternContainsLargerDateField","TABLE_2_FIELDS_1","fieldName","rp","ampm","result_2","result_1","_d","_e","rangePatternPart","partResult","_f","partResult_1","FormatDateTimeRange","FormatDateTimeRangeToParts","part","FormatDateTimeToParts","ToDateTimeOptions","required","defaults","needDefaults","_g","fallback","BestAvailableLocale","candidate","has","pos","lastIndexOf","UnicodeExtensionValue","size","searchValue","start","end","done","requestedLocales_1","noExtensionLocale","availableLocale","LookupMatcher","foundLocale","minimizedAvailableLocaleMap","minimizedAvailableLocales","l","maximizedRequestedLocale","minimizedRequestedLocale","BestFitMatcher","supportedExtension","foundLocaleData","keyLocaleData","supportedExtensionAddition","privateIndex","preExtension","postExtension","IsValidTimeZoneName","zoneNames","DefaultNumberOption","GetNumberOption","property","minimum","maximum","resolveHourCycle","hcDefault","InitializeDateTimeFormat","formatMatcher","isTimeRelated","NOT_A_Z_REGEX","IsWellFormedCurrencyCode","currency","CanonicalCodeForDisplayNames","code","GetOptionsObject","SANCTIONED_UNITS","removeUnitNamespace","SIMPLE_UNITS","IsSanctionedSimpleUnitIdentifier","unitIdentifier","IsWellFormedUnitIdentifier","units","numerator","denominator","ComputeExponentForMagnitude","numberFormat","magnitude","notation","compactDisplay","currencyDisplay","thresholdMap","numbers","short","decimal","long","num","thresholds","magnitudeKey","other","ToRawPrecision","minPrecision","maxPrecision","xFinal","int","xToString","xToStringExponentIndex","xToStringMantissa","xToStringExponent","xToStringMantissaWithoutDecimalPoint","decimalPlaceOffset","round","adjustDecimalPlace","cut","roundedNumber","integerDigitsCount","ToRawFixed","minFraction","maxFraction","mantissa","exponent","a","b","intlObject","isNegative","roundingType","minimumSignificantDigits","maximumSignificantDigits","maximumFractionDigits","string","minInteger","ComputeExponent","formatNumberResult","CurrencyDigits","currencyDigitsData","S_UNICODE_REGEX","CARET_S_UNICODE_REGEX","RegExp","S_DOLLAR_UNICODE_REGEX","CLDR_NUMBER_PATTERN","numberResult","nonNameCurrencyPart","numberPattern","sign","defaultNumberingSystem","compactNumberPattern","compactPluralRules","byNumberingSystem","selectPlural","compactPlaralRule","getPatternForSign","getCompactDisplayPattern","byCurrencyDisplay","currencies","symbol","narrow","standard","currencyData","currencySign","percent","decimalNumberPattern","afterCurrency","currencySpacing","afterInsertBetween","beforeCurrency","beforeInsertBetween","numberPatternParts","numberParts","symbols","numberPatternParts_1","paritionNumberIntoParts","minusSign","plusSign","percentSign","unitName","unitPattern","currencyNameData","displayName","unitPatternParts_1","unitDisplay","unitData","simple","numeratorUnit","denominatorUnit","numeratorUnitPattern","perUnitPattern","perUnit","perPattern","compound","per","denominatorPattern","interpolateMatch","digitReplacementTable","digit","fraction","decimalSepIndex","groupSepSymbol","group","groups","patternGroups","primaryGroupingSize","secondaryGroupingSize","integerGroup","pop","exponential","exponentResult","zeroPattern","rules","PartitionNumberPattern","nan","infinity","signDisplay","FormatNumericToParts","SetNumberFormatUnitOptions","mnfdDefault","mxfdDefault","mnid","mnfd","mxfd","mnsd","mxsd","InitializeNumberFormat","numberingSystemNames","cDigits","SingularRelativeTimeUnit","MakePartsList","rtf","resolvedUnit","pluralRules","patterns","tl","po","FormatRelativeTime","FormatRelativeTimeToParts","_super","NUMBERING_SYSTEM_REGEX","subset","LookupSupportedLocales","isMissingLocaleDataError","__extends","_this","defaultInstanceSettings","update","begin","loopBegin","changeBegin","change","changeComplete","loopComplete","complete","loop","direction","autoplay","timelineOffset","defaultTweenSettings","duration","delay","endDelay","easing","validTransforms","cache","CSS","springs","minMax","stringContains","text","applyArguments","func","args","obj","pth","svg","SVGElement","inp","HTMLInputElement","dom","nodeType","fnc","und","hex","rgb","hsl","col","parseEasingParameters","parseFloat","spring","params","mass","stiffness","damping","velocity","w0","sqrt","zeta","wd","solver","progress","exp","cos","sin","cached","frame","elapsed","rest","elastic","amplitude","period","PI","asin","steps","bezier","kSampleStepSize","A","aA1","aA2","B","calcBezier","aT","getSlope","mX1","mY1","mX2","mY2","sampleValues","Float32Array","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","getTForX","penner","names","curves","In","Out","InOut","eases","linear","coords","ease","parseEasings","selectString","document","querySelectorAll","filterArray","callback","thisArg","flattenArray","toArray","NodeList","HTMLCollection","arrayContains","some","cloneObject","clone","replaceObjectProps","o1","o2","mergeObjects","getUnit","getFunctionValue","animatable","id","total","getAttribute","convertPxToUnit","tempEl","createElement","tagName","parentEl","parentNode","body","appendChild","position","width","factor","offsetWidth","removeChild","convertedUnit","getCSSValue","uppercasePropName","getComputedStyle","getPropertyValue","getAnimationType","getElementTransforms","transform","reg","transforms","Map","getOriginalTargetValue","propName","defaultVal","getTransformUnit","list","getTransformValue","getRelativeValue","to","from","operator","u","validateValue","rgbValue","hexValue","g","parseInt","hexToRgba","hslValue","h","hue2rgb","q","hslToRgba","colorToRgb","originalUnit","unitLess","substr","getDistance","p1","p2","getPolylineLength","previousPos","points","totalLength","numberOfItems","currentPos","getItem","getTotalLength","getCircleLength","getRectLength","getLineLength","getPolygonLength","getParentSvg","pathEl","svgData","parentSvgEl","getParentSvgEl","rect","getBoundingClientRect","viewBoxAttr","height","viewBox","getPathProgress","path","point","getPointAtLength","p0","atan2","decomposeValue","rgx","original","strings","parseTargets","targets","item","self","getAnimatables","parsed","normalizePropertyTweens","tweenSettings","settings","propArray","setProgressValue","css","attribute","setAttribute","object","manual","last","setTargetsValue","properties","valueUnit","originalValue","animType","getAnimations","animatables","tweens","previousTween","tween","normalizeTweenValues","tweenValue","toUnit","previousValue","fromUnit","isPath","isColor","normalizeTweens","lastTween","createAnimation","getInstanceTimings","animations","animLength","getTlOffset","anim","timings","raf","instanceID","activeInstances","pausedInstances","engine","play","setTimeout","step","activeInstancesLength","activeInstance","paused","instanceIndex","splice","tick","performance","now","clearTimeout","anime","children","startTime","lastTime","childrenLength","resolve","makePromise","promise","window","Promise","_resolve","finished","instanceSettings","keyframes","propertyNames","newKey","flattenKeyframes","getProperties","createNewInstance","toggleInstanceDirection","reversed","child","adjustTime","resetTime","currentTime","speed","seekCild","seek","setAnimationsProgress","insTime","animationsLength","tweenLength","eased","toNumbersLength","toNumber","fromNumber","stringsLength","n$1","currentValue","setCallback","cb","passThrough","setInstanceProgress","engineTime","insDuration","insDelay","insEndDelay","reversePlayback","i$1","syncInstanceChildren","began","changeBegan","changeCompleted","remaining","completed","reset","pause","reverse","restart","removeTargetsFromAnimations","targetsArray","addEventListener","hidden","ins","version","running","remove","childAnimations","convertPx","setDashoffset","pathLength","stagger","grid","axis","fromIndex","fromFirst","fromCenter","fromLast","isRange","val1","val2","maxValue","fromX","fromY","distanceX","distanceY","timeline","instanceParams","tlIndex","insParams","tlDuration","random","AFRAME","registerComponent","schema","color","intensity","init","light","THREE","AmbientLight","setObject3D","prevData","convertSRGBToLinear","removeObject3D","require","components","utils","animation","colorHelperFrom","Color","colorHelperTo","propertyPathCache","getComponentPropertyPath","delimiter","getComponentProperty","splitName","setComponentProperty","splitCache","TYPE_COLOR","PROP_ROTATION","PROP_SCALE","STRING_COMPONENTS","toRadians","MathUtils","degToRad","addEventListeners","eventNames","handler","removeEventListeners","removeEventListener","getRawProperty","splitDot","setRawProperty","propertyName","targetValue","startsWith","isRawProperty","dir","dur","elasticity","enabled","parse","startEvents","pauseEvents","resumeEvents","multiple","eventDetail","attrName","animationIsPlaying","onStartEvent","bind","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","updateConfigForDefault","updateConfigForRawColor","config","emit","oldData","createAndStartAnimation","dt","cancelDelayedStart","pausedWasPlaying","updateConfig","delayTimeout","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","lastValue","isBoolean","aframeProperty","updateConfigForVector","coordinates","object3D","matrixNeedsUpdate","propType","component","componentName","wait","evt","detail","DEBUG_BBAA_COLOR","debugMaterial","MeshBasicMaterial","transparent","opacity","side","DoubleSide","inOut","outIn","debuggable","debugGeometry","BoxGeometry","debugMesh","Mesh","debugBBAA","BoxHelper","updateMatrixWorld","sceneEl","systems","registerZone","audioZonesSystem","enableDebug","APP","store","state","preferences","showAudioDebugPanel","unregisterZone","isEnabled","getBoundingBox","bbaa","Box3","copy","geometry","boundingBox","applyMatrix4","matrixWorld","visible","getAudioParams","audioOverrides","contains","containsPoint","isMobileVR","device","onlyY","_updateBillboard","_updateIsInView","schedule","unschedule","isInView","frustum","Frustum","frustumMatrix","Matrix4","box","boxTemp","expandBox","updateMatrices","computeBoundingBox","expandByPoint","screenCamera","playerCamera","getElementById","getObject3D","multiplyMatrices","projectionMatrix","matrixWorldInverse","setFromProjectionMatrix","makeEmpty","traverse","intersectsBox","targetPos","Vector3","worldPos","camera","setFromMatrixPosition","getWorldPosition","lookAt","classList","origDispatch","dispatchEvent","includes","firstObject","console","info","JSON","stringify","castShadow","shadowMapResolution","shadowBias","shadowRadius","DirectionalLight","shadow","bias","radius","prevWidth","prevHeight","mapSize","dispose","initialForce","maxForce","maxScale","initialScale","scale","NAF","getNetworkedEntity","then","networkedEntity","isMine","entity","currentScale","force","angle","gravity","eventSource","events","eventListeners","event","_handleEvent","culled","updateDescendants","node","frustumCulled","generateAndAddHeightfield","shape","distance","orientation","CANNON","Quaternion","setFromAxisAngle","Vec3","rotation","mult","cannonOffset","Heightfield","elementSize","addShape","skyColor","groundColor","HemisphereLight","updateComponentState","materialQualitySetting","quality","range","decay","PointLight","matrixAutoUpdate","innerConeAngle","outerConeAngle","SpotLight","penumbra","sizeVec","boundingBoxWorldPositionVec","colliderWorldPositionVec","colliders","enterComponent","enterProperty","enterValue","leaveComponent","leaveProperty","leaveValue","collidingLastFrame","setFromCenterAndSize","isColliding","onPauseStateChange","videoComponent","onVideoLoaded","video","togglePlaying","bit","nextBit","CL","ALL","NONE","INTERACTABLES","ENVIRONMENT","AVATAR","HANDS","MEDIA_FRAMES","DEFAULT_INTERACTABLE","UNOWNED_INTERACTABLE","DEFAULT_SPAWNER","module","COLLISION_LAYERS","PRIVACY","TERMS","AVAILABLE_LOCALES","en","pt","ja","es","ru","fr","ko","de","FALLBACK_LOCALES","jp","defaultLocaleData","DEFAULT_LOCALE","cachedMessages","_locale","_localeData","setLocale","resolvedLocale","navigator","languages","userLanguage","unshift","curLocale","primaryLanguageSubtag","findLocale","CustomEvent","interval","setInterval","clearInterval","getLocale","getMessages","configs","configTranslations","messageKey","entries","messages","_match","subkey","acc","isAdmin","querySelector","process","BASE_ASSETS_PATH_KEY","URL","location","__webpack_public_path__","hasThumbnailServerMetaTag","IS_LOCAL_OR_CUSTOM_CLIENT","AVAILABLE_INTEGRATIONS","APP_CONFIG","theme","colorVars","innerHTML","head","insertBefore","firstChild","features","feature","featureName","localDevImages","image","imageName","cssUrl","images","link","linkName","defaultValue","links","setIsAdmin","_isAdmin","integration","availableIntegrations","translation","translationsConfig","translations","getMessage","STORYBOOK_APP_CONFIG","themes","useDarkMode","darkMode","setDarkMode","useState","changeListener","useCallback","matches","useEffect","darkmodeQuery","matchMedia","addListener","removeListener","useLogo","preferredThemeId","find","darkModeDefault","getCurrentTheme","getAppLogo","ThemeProvider","themeId","setThemeId","onStoreChanged","nextThemeId","variables","styleTag","useTheme","useThemeFromStore","propTypes","PropTypes","waitForEvent","eventName","eventObj","once","waitForDOMContentLoaded","readyState","DEFAULT_ACTION_COLOR","DEFAULT_ACTION_COLOR_LIGHT","DEFAULT_COLORS","getThemeColor","activateTheme","actionColor","actionHoverColor","newThemeId","qs","URLSearchParams","search","qsTruthy","param","qsGet","isDebug","logFilter","debug","AnimationMixerSystem","cmp","mixer","findAncestorWithComponent","initMixer","AnimationMixer","MediaDevicesEvents","freeze","PERMISSIONS_STATUS_CHANGED","MIC_SHARE_STARTED","MIC_SHARE_ENDED","VIDEO_SHARE_STARTED","VIDEO_SHARE_ENDED","DEVICE_CHANGE","NO_DEVICE_ID","GRANTED","DENIED","PROMPT","MICROPHONE","SPEAKERS","CAMERA","SCREEN","updateVolume","newRawVolume","analyser","levels","getByteTimeDomainData","sum","calculateVolume","newPerceivedVolume","mapLinear","E","volume","prevVolume","getAnalyser","ikRootEl","analyserEl","disableUpdates","avatarIsTalking","_updateAnalysis","_runScheduledWork","ctx","AudioContext","getContext","createAnalyser","fftSize","Uint8Array","soundSource","connect","playerSessionId","componentRegistry","lastSeenVolume","registerSystem","onMicEnabled","audioSystem","outboundAnalyser","analyserLevels","dialog","isMicEnabled","minScale","cameraEl","setScalar","minValue","meshes","object3DMap","skinnedmesh","isSkinnedMesh","morphs","mesh","morphNumber","morphTargetDictionary","morphValue","morphTargetInfluences","SPRITE_NAMES","MIC","MIC_HOVER","MIC_OFF","MIC_OFF_HOVER","active","tooltip","tooltipText","activeTooltipText","prevSpriteName","hovering","onHover","onHoverOut","textEl","audioAnalyser","spriteName","clamp","ceil","ObjectContentOrigins","objectTypeForOrigin","contentOrigin","urlType","fileType","clipboardType","spawnerType","objectTypeMimePrefixLookupMap","srcSuffixLookupMap","adjectives","nouns","generateHubName","randItem","charAt","isMergeableObject","isNonNullObject","stringValue","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","for","cloneUnlessOtherwiseSpecified","deepmerge","defaultArrayMerge","element","arrayMerge","sourceIsArray","destination","mergeObject","array","prev","next","hackyMobileSafariTestValue","MOBILE_RE","TABLET_RE","isIpadOS","maxTouchPoints","platform","isIOS","userAgent","_isMobile","vendor","opera","mockUserAgent","isTablet","hasTouchScreen","msMaxTouchPoints","mQ","media","UA","detectTouchScreen","chooseRandom","fetchRandomDefaultAvatarId","defaultAvatars","fetchReticulumAuthenticated","defaultAvatar","href","avatar","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","defaultMaterialQuality","MATERIAL_QUALITY_OPTIONS","isMobile","qsMobileDefault","qsDefault","isFirefoxReality","SCHEMA","definitions","profile","additionalProperties","avatarId","personalAvatarId","credentials","token","email","activity","hasFoundFreeze","hasChangedName","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","hasOpenedShare","entryCount","lastUsedMicDeviceId","micMuted","shouldPromptForRefresh","preferredMic","preferredSpeakers","preferredCamera","muteMicOnEntry","disableLeftRightPanning","audioNormalization","invertTouchscreenCameraMove","enableOnScreenJoystickLeft","detectMobile","enableOnScreenJoystickRight","enableGyro","animateWaypointTransitions","showFPSCounter","allowMultipleHubsInstances","disableIdleDetection","fastRoomSwitching","lazyLoadSceneMedia","preferMobileObjectInfoPanel","maxResolutionWidth","maxResolutionHeight","globalVoiceVolume","globalMediaVolume","globalSFXVolume","snapRotationDegrees","enableDynamicShadows","disableSoundEffects","disableMovement","disableBackwardsMovement","disableStrafing","disableTeleporter","disableAutoPixelRatio","movementSpeedModifier","disableEchoCancellation","disableNoiseSuppression","disableAutoGainControl","showRtcDebugPanel","enableAudioClipping","audioClippingThreshold","audioPanningQuality","cursorSize","nametagVisibility","nametagVisibilityDistance","avatarVoiceLevels","confirmedDiscordRooms","items","confirmedBroadcastedRooms","uploadPromotionTokens","fileId","promotionToken","creatorAssignmentTokens","hubId","creatorAssignmentToken","embedTokens","embedToken","onLoadActions","action","$ref","Store","EventTarget","super","_signOutOnExpiredAuthToken","jwtDecode","initProfile","_shouldResetAvatarOnInit","resetToRandomDefaultAvatar","_preferences","localStorage","setItem","oauthFlowCredentials","Cookies","maybeDispatchThemeChanged","previous","current","credentialsAccountId","sub","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","bumpEntryCount","currentEntryCount","enqueueOnLoadAction","executeOnLoadActions","clearOnLoadActions","destinationArray","sourceArray","newState","mergeOpts","finalState","merge","valid","errors","validate","argument","hasReticulumServer","resolverLink","directReticulumHostAndPort","reticulumMeta","invalidatedReticulumMetaThisSession","getReticulumFetchUrl","absolute","host","port","pool","phx_host","fetch","res","json","phxHostOverride","getReticulumMeta","protocol","socketClass","Socket","getNewSocketUrl","refreshDirectReticulumHostAndPort","socketUrl","socketSettings","logger","kind","msg","socket","onError","invalidateReticulumMeta","endPointPath","endPoint","pathname","newEndPoint","payload","retUrl","headers","authorization","sceneId","createUrl","hub","scene_id","creator_assignment_token","hub_id","embed_token","updateMaterials","material","HubsMeshBasicMaterial","fromMeshStandardMaterial","Material","emissive","emissiveIntensity","emissiveMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","alphaMap","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","onBeforeCompile","shader","uniforms","_emissive","_emissiveIntensity","_emissiveMap","fragmentShader","HubsMeshPhongMaterial","MeshPhongMaterial","vertexShader","normalMapType","normalMap","normalScale","bumpMap","bumpScale","displacementMap","displacementScale","displacementBias","reflectivity","refractionRatio","detectIOS","HAS_IMAGE_BITMAP","createImageBitmap","HubsTextureLoader","TextureLoader","manager","load","onLoad","onProgress","texture","conversionRatio","newWidth","newHeight","canvas","drawImage","close","RGBAFormat","UnsignedByteType","resizeIfNeeded","_loadImageBitmapTexture","onUpdate","loadAsync","reject","Texture","loader","ImageBitmapLoader","setCrossOrigin","crossOrigin","setPath","bitmap","needsUpdate","Cache","resolveURL","flipY","setDefaultSize","setRemovedRecycleThreshold","$isStringType","Networked","defineComponent","Types","creator","owner","lastOwnerTime","Owned","NetworkedMediaFrame","capturedNid","MediaFrame","mediaType","bounds","preview","previewingNid","Text","Slice9","insets","NetworkedTransform","AEntity","Object3DTag","GLTFModel","CursorRaycastable","RemoteHoverTarget","NotRemoteHoverTarget","Holdable","RemoveNetworkedEntityButton","HandRight","HandLeft","RemoteRight","RemoteLeft","HeldRemoteRight","HeldRemoteLeft","Held","OffersRemoteConstraint","HandCollisionTarget","OffersHandConstraint","TogglesHoveredActionSet","HoverButton","TextButton","labelRef","HoldableButton","SingleActionButton","Pen","HoverMenuChild","Static","Inspectable","PreventAudioBoost","IgnoreSpaceBubble","Rigidbody","bodyId","collisionGroup","collisionMask","flags","PhysicsShape","shapeId","halfExtents","DestroyAtExtremeDistance","MediaLoading","FloatyObject","releaseGravity","MakeKinematicOnRelease","CameraTool","snapTime","captureDurIdx","trackTarget","snapMenuRef","button_next","button_prev","snapRef","cancelRef","recVideoRef","screenRef","selfieScreenRef","cameraRef","countdownLblRef","captureDurLblRef","sndToggleRef","interactorOneTransform","interactorTwoTransform","validMaterials","enableSweepingEffect","geometryRadius","sweepParams","isTouchscreen","isFrozen","showEffect","isPinned","pinnable","pinned","isSpawner","isEmojiSpawner","template","canMove","emoji","hubChannel","can","showHoverEffect","toggling","cursorTogglingSystem","interactorOne","interactorTwo","interaction","ready","leftHand","hovered","held","leftRemote","leftToggledOff","rightRemote","rightToggledOff","rightHand","worldY","elements","ms1","ms2","ms3","scaledRadius","uniform","hubs_EnableSweepingEffect","hubs_IsFrozen","hubs_SweepParams","hubs_HighlightInteractorOne","hubs_InteractorOnePos","hubs_HighlightInteractorTwo","hubs_InteractorTwoPos","hubs_Time","nonCorsProxyDomains","hostname","commonKnownContentTypes","gltf","glb","png","jpg","jpeg","pdf","mp4","mp3","basis","ktx2","m3u8","mpd","isNonCorsProxyDomain","domain","endsWith","proxiedUrlFor","parsedUrl","getCustomGLTFParserURLResolver","gltfUrl","basisJsUrl","basisWasmUrl","dracoWrapperJsUrl","dracoWasmUrl","corsProxyPrefix","originalUrlParts","decodeURIComponent","dataUrlRegex","guessContentType","originIsHubsServer","isHubsServer","origin","hubsSceneRegex","hubsAvatarRegex","hubsRoomRegex","isLocalHubsUrl","isHubsSceneUrl","isLocalHubsSceneUrl","isHubsAvatarUrl","isLocalHubsAvatarUrl","isHubsRoomUrl","MediaType","MODEL","IMAGE","VIDEO","PDF","ALL_2D","linkify","Linkify","tlds","mediaAPIEndpoint","resolveUrlCache","getDefaultResolveQuality","useLowerQuality","resolveUrl","resultPromise","response","ok","statusText","addMedia","src","contentSubtype","fitToBox","animate","mediaOptions","networked","linkedEl","scene","scenes","nid","createNetworkId","networkId","templateBody","importNode","content","firstElementChild","cloneNode","elAttrs","attrIdx","needsToBeUploaded","File","els","getLatestMediaVersionOfSrc","urlOrText","fileIsOwned","file","reader","FileReader","onload","view","DataView","getUint16","byteLength","marker","getUint32","little","tags","readAsArrayBuffer","getOrientation","desiredContentType","formData","FormData","append","warn","getDirectReticulumFetchUrl","upload","srcUrl","searchParams","meta","access_token","file_id","promotion_token","catch","MediaStream","clientId","objectType","contentType","prefix","suffix","objectTypeForOriginAndContentType","textureLoader","textures","tex","actionButtonSrc","button","buttonSrc","nametag","nametagSrc","nametagBorderSrc","alphaTest","bottom","left","padding","right","oneOf","top","usingCustomMaterial","usingAtlas","uvAtlasMin","uvAtlasMax","textureSrc","PlaneBufferGeometry","plane","regenerateMesh","uvs","uv","setPos","setUV","w2","h2","diff","setStyle","BackSide","FrontSide","parseSide","updateMap","setMap","MeshBVHNode","getLongestEdgeIndex","splitDimIdx","splitDist","dist","FLOAT32_EPSILON","xyzFields","getBounds","triangleBounds","count","centroidTarget","minx","Infinity","miny","minz","maxx","maxy","maxz","cminx","cminy","cminz","cmaxx","cmaxy","cmaxz","includeCentroid","cx","hx","lx","rx","cy","hy","ly","ry","cz","hz","lz","rz","getCentroidBounds","SeparatingAxisBounds","setFromPointsField","setFromPoints","dot","isSeparated","setFromBox","boxMin","boxMax","closestPointLineToLine","dir1","dir2","v02","l1","l2","v10","v32","subVectors","d0232","d3210","d3232","d0210","denom","d2","closestPointsSegmentToSegment","paramResult","Vector2","temp1","temp2","target1","target2","at","closestPointToPoint","closestPoint","closestPoint2","distanceToSquared","sphereIntersectTriangle","closestPointTemp","projectedPointTemp","planeTemp","Plane","lineTemp","Line3","sphere","triangle","center","distanceTo","getPlane","distanceToPoint","pp","projectPoint","SeparatingAxisTriangle","Triangle","isSeparatingAxisTriangle","satAxes","fill","satBounds","Sphere","intersectsSphere","axis0","sab0","getNormal","axis1","sab1","axis2","sab2","axis3","sab3","closestPointToSegment","point1","point2","edge","segment","distSq","closestDistanceSq","nexti","intersectsTriangle","saTri2","arr1","arr2","cachedSatBounds","cachedSatBounds2","cachedAxis","satBounds1","satAxes1","sb","sa","satBounds2","satAxes2","sa1","i2","sa2","crossVectors","distanceToTriangle","cornerFields","line1","line2","getMidpoint","otherVec","thisVec","f11","f12","f21","f22","OrientedBox","isOrientedBox","matrix","invMatrix","alignedSatBounds","setTriangle","tri","ta","tb","tc","i3","getX","getY","getZ","minVec","pi","invert","aabbBounds","saTri","pointsArr","triSatBounds","triSatAxes","distanceToBox","segments1","segments2","threshold","getCenter","threshold2","i1","nextIndex2","index2","f1","f2","f3","vA","vB","vC","uvA","uvB","uvC","intersectionPoint","intersectionPointWorld","intersectTri","geo","raycaster","ray","intersections","triOffset","intersection","fromBufferAttribute","pA","pB","pC","intersectTriangle","near","far","checkIntersection","face","normal","materialIndex","faceIndex","checkBufferGeometryIntersection","intersectTris","intersectClosestTri","boxIntersection","intersectRay","boundingData","intersectBox","raycast","intersects","continueGeneration","raycastFirst","splitAxis","xyzAxis","leftToRight","c1","c2","c1Result","c2Result","shapecast","_triangle","_cachedBox1","_cachedBox2","iterateOverTriangles","intersectsTriangleFunc","contained","depth","intersectsBoundsFunc","nodeScoreFunc","cachedBox1","cachedBox2","getLeftOffset","getRightEndOffset","score1","score2","box1","box2","temp","c1Intersection","c1StopTraversal","c2Intersection","c2StopTraversal","intersectsGeometry","triangle2","cachedMesh","invertedMat","obb","obb2","geometryToBvh","cachedObb","thisGeometry","thisIndex","thisPos","boundsTree","raycastBuffer","stride4Offset","stride2Offset","float32Array","_float32Array","uint16Array","_uint16Array","uint32Array","_uint32Array","intersectRayBuffer","raycastFirstBuffer","shapecastBuffer","getLeftOffsetBuffer","getRightEndOffsetBuffer","arrayToBoxBuffer","intersectsGeometryBuffer","bufferStack","_prevBuffer","setBuffer","buffer","Uint16Array","Uint32Array","clearBuffer","SKIP_GENERATION","tri2","serialize","bvh","copyIndexBuffer","finishTree","countNodes","populateBuffer","byteOffset","isLeaf","nextUnusedPointer","roots","_roots","rootData","_isPacked","root","nodeCount","ArrayBuffer","indexAttribute","getIndex","deserialize","setIndex","newIndex","BufferAttribute","isBufferGeometry","isInterleavedBufferAttribute","assign","strategy","maxDepth","maxLeafTris","verbose","lazyGeneration","packData","splitNode","centroidBoundingData","reachedMaxDepth","nodeBoundingData","sahPlanes","avg","getAverage","TRAVERSAL_COST","INTERSECTION_COST","bb","dim","filteredLists","planes","getCost","sal","nl","sar","nr","bestCost","bmin","bmax","pinfo","ldim","rdim","ldimo1","rdimo1","ldimo2","rdimo2","cost","getOptimalSplit","splitOffset","axisOffset","partition","indexArray","lstart","lcount","cacheCentroidBoundingData","rstart","rcount","vertexCount","ensureIndex","verts","triCount","tri3","tri6","ai","bi","ci","el2","computeTriangleBounds","computeSAHPlanes","ranges","rangeBoundaries","sortedBoundaries","getRootIndexRanges","bx","boxToArray","rootBox","union","buildTree","rootIndex","_traverseBuffer","BYTES_PER_NODE","_traverseNode","isPacked","closestResult","geomToMesh","orderNodesFunc","boxToMesh","closestPointToGeometry","geom","minThreshold","maxThreshold","tempTarget1","tempTarget2","closestDistance","sphere1","sphere2","distanceToGeometry","LineBasicMaterial","Box3Helper","Ray","tmpInverseMatrix","origMeshRaycastFunc","mask","recursive","layers","disposeMaterial","mtrl","specularMap","envMap","metalnessMap","roughnessMap","disposeNode","IDENTITY","identity","tempMatrix4","setMatrixWorld","matrixIsModified","parent","multiply","decompose","quaternion","childrenNeedMatrixWorldUpdate","parallelTraverse","cloneObject3D","preserveUUIDs","cloneLookup","cloneUUIDLookup","sourceNode","clonedNode","uuid","animationClip","sourceAnimationClip","clonedTracks","tracks","keyframeTrack","sourceKeyframeTrack","nodeName","objectName","objectIndex","propertyIndex","PropertyBinding","parseTrackName","clonedUUID","clonedKeyframeTrack","cloneKeyframeTrack","AnimationClip","cloneAnimationClip","isMesh","isDirectionalLight","isSpotLight","sourceBones","bones","sourceBone","bindMatrix","inRotationMat4","inForward","outForward","outSide","worldUp","inMat4Copy","inverseParentWorld","childRelativeToParent","childInverse","newParentMatrix","firstHitOnly","gltfCache","retain","cacheItem","release","delete","inflightGltfs","extractZipFile","worker","nextItemId","outstanding","onmessage","err","handlers","transfer","postMessage","promisifyWorker","defaultInflator","componentData","cloneGltf","getHubsComponents","hubsComponents","userData","gltfExtensions","MOZ_hubs_components","HUBS_components","legacyComponents","getHubsComponentsFromMaterial","GLTFModelPlus","componentKey","inflator","inflateEntities","indexToEntityMap","templates","isRoot","modelToWorldScale","childEntities","entityComponents","materialComponents","className","order","setFromQuaternion","multiplyScalar","generateUUID","gltfIndex","inflatedEntity","isFirstInflation","objectInflations","objectInflation","resolveNodeRefs","__mhc_link_type","attachTemplate","templateRoot","targetEls","getHubsComponentsExtension","extras","ktxLoader","dracoLoader","GLTFHubsPlugin","parser","jsonPreprocessor","beforeRoot","oldHeightfieldNode","nodes","heightfield","runMigration","afterRoot","Object3D","DefaultMatrixAutoUpdate","materialQuality","convertStandardMaterial","isMeshStandardMaterial","track","parsedPath","findNode","GLTFHubsComponentsExtension","deps","resolveComponents","gltfRootType","idx","associations","getDependency","loadedDep","MOZ_texture_rgbe","encoding","sRGBEncoding","GLTFHubsLightMapExtension","loadMaterial","materialDef","materials","extensionDef","pending","results","isMeshBasicMaterial","GLTFHubsTextureBasisExtension","basisLoader","loadTexture","textureIndex","textureDef","BasisTextureLoader","detectSupport","renderer","loadTextureImage","GLTFMozTextureRGBE","minFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","NearestFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","LinearFilter","loadGLTF","fileMap","loadingManager","LoadingManager","setURLModifier","gltfLoader","GLTFLoader","register","RGBELoader","setDataType","HalfFloatType","KTX2Loader","DRACOLoader","setKTX2Loader","setDRACOLoader","finally","revokeObjectURL","loadModel","useCache","resolveAsset","assetEl","inflate","loadTemplates","applySrc","templateEl","lastSrc","inflatedEl","disposeLastInflatedEl","model","hasBufferGeometry","hasBoundsTree","MeshBVH","object3DToSet","inflateComponents","rewires","removeAttribute","clip","activeClipIndex","activeClipIndices","mixerEl","currentActions","updateClip","clipName","clips","clipNames","clipAction","setLoop","LoopRepeat","destroy","stop","textureToData","registeredTextures","increment","instances","computeObjectAABB","excludeInvisible","isVisibleUpToRoot","Euler","getBox","boxRoot","worldSpace","isEmpty","worldToLocal","matrixWorldNeedsUpdate","getScaleCoefficient","dX","dY","dZ","SourceType","MEDIA_VIDEO","AVATAR_AUDIO_SOURCE","SFX","AUDIO_TARGET","AUDIO_ZONE","AudioType","Stereo","PannerNode","DistanceModelType","Linear","Inverse","Exponential","PanningModelType","HRTF","EqualPower","AvatarAudioDefaults","audioType","distanceModel","panningModel","rolloffFactor","refDistance","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","gain","MediaAudioDefaults","TargetAudioDefaults","defaultSettingsForSourceType","updateAudioSettings","audio","sourceType","sceneOverrides","sceneAudioDefaults","audioDebugPanelOverrides","zoneSettings","zoneOverrides","preferencesOverrides","overriddenPanningModelType","getOverriddenPanningModelType","clippingState","mutedState","gainMultipliers","supplementaryAttenuation","getCurrentAudioSettings","panner","setDistanceModel","setRolloffFactor","setRefDistance","setMaxDistance","setTargetAtTime","context","applySettings","soundEnum","SOUND_QUACK","SOUND_SPECIAL_QUACK","SOUND_MEDIA_LOADING","SOUND_MEDIA_LOADED","loadingObject","loadingObjectSrc","playSoundEffect","moveTheParentNotTheMesh","showLoader","clearLoadingTimeout","onMediaLoaded","handleLinkedElRemoved","refresh","animating","networkedEl","updateScale","originalMeshMatrix","desiredObjectMatrix","addVectors","compose","scaleCoefficient","removeShape","loaderMixer","mirrorTarget","closeExistingMediaMirror","sfx","soundEffectsSystem","loadingSoundEffect","stopPositionalAudio","loadedSoundEffect","useFancyLoader","loadingClip","loadingScaleClip","VectorKeyframeTrack","SHAPE","playPositionalSoundFollowing","showLoaderTimeout","updateHoverableVisuals","boundingSphere","hoverableVisuals","injectedCustomShaderChunks","shaderUniforms","isTroikaText","reflectionProbeMode","hubs_InjectedCustomShaderChunks","newMaterial","injectCustomShaderChunks","setFromObject","getBoundingSphere","physicsShape","shouldUpdateScale","finish","minHalfExtent","registerLinkage","contentBounds","getSize","eid","entityExists","world","removeComponent","onComplete","MIN_VALUE","addMeshScaleAnimation","takeOwnership","forceLocalRefresh","srcChanged","addComponent","thumbnail","canonicalUrl","canonicalAudioUrl","accessibleUrl","isLocalModelAsset","is360","projection","origin_audio","expected_content_type","raw","isHLS","linkedVideoTexture","linkedAudioSource","linkedMediaElementAudioSource","linkedMediaVideo","videoTexture","audioSource","mediaElementAudioSource","qsTime","hash","reduceAngularFloat","audioSrc","isFlat","modelEl","modifyGravityOnRelease","applyGravity","mayChangeScene","permissions","maxIndex","onNext","onPrev","onSnap","getHoverMenu","menu","hoverMenu","nextButton","prevButton","snapButton","pageLabel","pinnableElement","quackPercentage","specialQuackPercentage","wasInteracting","isInteracting","isHeld","quack","rand","playSoundOneShot","paths","actions","toggleScreenShare","snapRotateLeft","snapRotateRight","angularVelocity","logDebugFrame","logInteractionState","debugUserInput","describeCurrentMasks","cameraDelta","lobbyCameraDelta","characterAcceleration","dCharSpeed","boost","startGazeTeleport","stopGazeTeleport","spawnPen","ensureFrozen","toggleFreeze","thaw","muteMic","toggleFly","toggleUI","waypointDeltaDistance","focusChat","focusChatCommand","toggleCamera","takeSnapshot","mediaExit","mediaSearch1","mediaSearch2","mediaSearch3","mediaSearch4","mediaSearch5","mediaSearch6","mediaSearch7","mediaSearch8","transformModifier","rayObjectRotation","cursor","pose","hideLine","grab","drop","modDelta","startDrawing","stopDrawing","undoDrawing","penNextColor","penPrevColor","scalePenTip","scaleGrabbedGrabbable","mediaVolumeMod","wake","pen","switchDrawMode","startTeleport","stopTeleport","thumb","middleRingPinky","exitMirror","startInspecting","startInspectingSelf","stopInspecting","inspectZoom","inspectPanY","resetInspectView","nextCameraMode","spawnEmoji0","spawnEmoji1","spawnEmoji2","spawnEmoji3","spawnEmoji4","spawnEmoji5","spawnEmoji6","haptics","actuators","mouse","movementXY","buttonLeft","buttonRight","buttonMiddle","wheel","smartMouse","cursorPose","shouldMoveCamera","touchscreen","touchCameraDelta","gyroCameraDelta","pinch","initialDistance","currentDistance","isTouching","isTouchingGrabbable","tap1","tap2","tap3","tap4","tap5","anything","gyro","averageDeltaX","averageDeltaY","hud","penButton","keyboard","gamepad","gamepadIndex","buttonIndex","pressed","touched","axisIndex","xbox","buttonName","axisName","axesSum","oculusgo","trigger","touchpad","axisX","axisY","gearVRController","daydream","rightOculusTouch","leftOculusTouch","axes","wmrController","wmr","grip","joystick","vive","webxr","thumbStick","touchpadX","touchpadY","joyX","joyY","tag2ecs","isHoldable","offersRemoteConstraint","isHandCollisionTarget","offersHandConstraint","togglesHoveredActionSet","singleActionButton","holdableButton","isPen","isHoverMenuChild","isStatic","inspectable","preventAudioBoost","ignoreSpaceBubble","didUpdateOnce","isSet","Layers","lerp","newRot","positionOnly","scenePreviewCameraSystem","startPoint","startRotation","targetPoint","targetRotDelta","targetRotation","setFromEuler","premultiply","backwards","ranOnePass","tick2","hubsSystems","streamerCamera","cameraSystem","mode","streamer","presence","playerInfos","presences","playerInfo","metas","streaming","getCurrentStreamer","getStreamerCamera","translateZ","fromRot","toRot","slerpQuaternions","unregister","BoxBufferGeometry","CubeCamera","PMREMGenerator","Scene","ShaderMaterial","UniformsLib","UniformsUtils","WebGLCubeRenderTarget","Sky","fog","sky","_geometry","_inclination","_azimuth","_distance","updateSunPosition","turbidity","rayleigh","luminance","mieCoefficient","mieDirectionalG","inclination","azimuth","theta","phi","sunPosition","normalize","generateEnvironmentMap","skyScene","cubeCamera","vrEnabled","xr","pmremGenerator","fromCubemap","renderTarget","generateLightProbe","magFilter","lightProbe","LightProbeGenerator","skyIndex","playerHeight","loadedEvent","moveToSpawnPoint","spawnPoints","spawnPoint","MakeStaticWhenAtRest","defineQuery","Not","exitQuery","heldFloatyObjectsQuery","enterQuery","unthrowable","spawnScale","spawnCooldown","spawnEvent","animateFromCursor","cooldownTimeout","handPosition","onSpawnEvent","tempSpawnHandPosition","handleMediaLoaded","spawnedMediaScale","spawnedEntity","divideScalar","hand","getWorldQuaternion","userinput","willAnimateFromCursor","activateCooldown","physicsSystem","resetDynamicBody","sx","sy","sz","collisionFilterMask","MobileWater","normalSampler","waterNormals","sunDirection","sunColor","waterColor","eye","distortionScale","mirrorShader","ShaderChunk","lights","wrapS","wrapT","RepeatWrapping","Water","forceMobile","waterMesh","waterGeometry","loadWaterNormals","waterNormalMap","waterConfig","textureWidth","textureHeight","water","mirrorCamera","MeshStandardMaterial","Octave","alternate","SimpleWater","resolution","lowQuality","rotateX","waterUniforms","ripplesSpeed","ripplesScale","materialClass","roughness","metalness","specular","receiveShadow","dynamic","octaves","simplex","SimplexNoise","tideHeight","tideScale","tideSpeed","waveHeight","waveScale","waveSpeed","positionAttribute","octave","noise","setY","computeVertexNormals","vec2Equals","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","flipV","waterNormalsUrl","usePhongShader","ParticleEmitter","planeGeometry","InstancedBufferGeometry","emitterMatrix","depthWrite","blendEquation","AddEquation","initialPositions","startSize","endSize","sizeRandomness","startVelocity","endVelocity","particleCount","lifetime","lifetimes","lifetimeRandomness","particleSizeRandomness","ageRandomness","initialAges","ages","colors","endColor","middleColor","startColor","startOpacity","middleOpacity","endOpacity","colorCurve","velocityCurve","sizeCurve","worldScale","inverseWorldScale","updateParticles","tempGeo","positions","angles","getWorldScale","InstancedBufferAttribute","setUsage","DynamicDrawUsage","particlePosition","particleColor","particleAngle","prevAge","curAge","normalizedAge","_EasingFunctions","velFactor","sizeFactor","colorFactor","colorFactor1","colorFactor2","sourceMaterial","defaultSrcUrl","defaultSrcImage","particleEmitter","setTexture","BespokeThenable","queue","scheduled","completeCalled","oneTime","reason","st","ignoreThrow","thenableObj","recursiveError","valThen","getThenableThen","scheduleQueueFlush","flushQueue","callIt","isFn","called","onResolve","onReject","nextThenable","resultThen","NativePromiseThenable","rej","originalAudioParamsData","registerSource","unregisterSource","getPosition","sourcePos","audios","restore","resultCount","out","DefaultThenable","itemThenable","workerBootstrap","modules","registerModule","ref","dependencies","getTransferables","dep","isWorkerModule","depResult","rehydrate","noLog","troikaDefine","createObjectURL","Blob","importScripts","messageId","success","isCallable","ref$1","handleResult","tx","callModule","transferables","stack","supportsWorkers","supported","Worker","terminate","_workerModuleId","_messageId","_allowInitAsString","workers","registeredModules","openRequests","defineWorkerModule","workerId","moduleFunc","_getInitResult","initResult","initThenable","defineMainThreadModule","registrationThenable","callWorker","workerModuleData","stringifyFunction","thenable","bootstrap","msgId","getWorker","ThenableWorkerModule","Thenable","voidMainRegExp","expandShaderIncludes","include","chunk","_lut","epoch","CONSTRUCTOR_CACHE","SHADER_UPGRADE_CACHE","materialInstanceId","createDerivedMaterial","baseMaterial","optionsKey","optionsHash","optionsJsonReplacer","optionsHashesToIds","_idCtr","getKeyForOptions","ctorsByDerivation","privateBeforeCompileProp","shaderInfo","cacheKey","customProgramCacheKey","upgradedShaders","upgraded","vertexDefs","vertexMainIntro","vertexMainOutro","vertexTransform","fragmentDefs","fragmentMainIntro","fragmentMainOutro","fragmentColorTransform","customRewriter","timeUniform","postChunks","match1","fullStr","injectIntoShaderCode","upgradeShaders","DerivedMaterial","derive","chained","base","derived","descriptor","d0","d1","d3","defines","_listeners","isDerivedMaterial","isShaderMaterial","newBase","getDepthMaterial","depthMaterial","_depthMaterial","MeshDepthMaterial","depthPacking","RGBADepthPacking","IS_DEPTH_MATERIAL","getDistanceMaterial","distanceMaterial","_distanceMaterial","MeshDistanceMaterial","IS_DISTANCE_MATERIAL","shaderCode","defs","intro","outro","createSDFGenerator","createGlyphSegmentsIndex","pointOnQuadraticBezier","x0","y0","x1","y1","x2","y2","pointOnCubicBezier","x3","y3","sdfWidth","sdfHeight","sdfExponent","textureData","viewBoxWidth","viewBoxHeight","lineSegmentsIndex","segmentRE","firstX","firstY","prevX","prevY","addLineSegment","prevPoint","nextPoint","sdfX","sdfY","signedDist","findNearestSignedDistance","alpha","timing","needsSort","segments","sortSegments","maxX","absSquareDistanceToLineSegment","lineX0","lineY0","lineX1","lineY1","ldx","ldy","lengthSq","dx","dy","minX","minY","maxY","closestDistSq","closestDist","seg","inside","isPointInPoly","workerModule","_bin","readASCII","readUshort","readUint","_readFont","readFixed","_data","_offset","_tabOffset","readF2dot14","readShort","readInt","_view","getInt32","readInt8","getInt8","getInt16","readUshorts","readUint64","fromCharCode","readUnicode","_tdec","TextDecoder","readUTF8","decode","readBytes","readASCIIArray","_dataView","_lctf","scriptList","readScriptList","featureList","readFeatureList","lookupList","readLookupList","readLookupTable","tabs","ltype","flag","numOfOnes","readClassDef","getInterval","readCoverage","fmt","tab","coverageIndex","readFeatureTable","featureParams","readScriptTable","readLangSysTable","reqFeature","CFF","readIndex","readDict","readSubrs","CharStrings","ROS","FDArray","_readFDict","FDSelect","U","Encoding","readEncoding","charset","readCharset","Private","Subrs","Bias","tableSE","glyphByUnicode","glyphBySE","getCharString","readCharString","S","cmap","tables","parse0","parse4","parse6","parse12","searchRange","entrySelector","rangeShift","endCount","startCount","idDelta","idRangeOffset","glyphIdArray","firstCode","glyf","maxp","numGlyphs","_parseGlyf","loca","noc","xMin","yMin","xMax","yMax","endPts","instructions","xs","ys","ty","glyphIndex","instr","GPOS","subt","coverage","readValueRecord","pairsets","gid2","F","classDef1","classDef2","I","GSUB","newg","vals","readLigatureSet","cDef","scset","readSubClassSet","backCvg","inptCvg","ahedCvg","lookupRec","readSubstLookupRecords","readSubClassRule","input","substLookupRecords","readChainSubClassSet","readChainSubClassRule","subst","readLigature","chain","nglyph","fontRevision","unitsPerEm","created","modified","macStyle","lowestRecPPEM","fontDirectionHint","indexToLocFormat","glyphDataFormat","hhea","ascender","descender","lineGap","advanceWidthMax","minLeftSideBearing","minRightSideBearing","xMaxExtent","caretSlopeRise","caretSlopeRun","caretOffset","metricDataFormat","numberOfHMetrics","hmtx","aWidth","lsBearing","kern","parseV1","glyph1","rval","readFormat0","glyph2","maxPoints","maxContours","maxCompositePoints","maxCompositeContours","maxZones","maxTwilightPoints","maxStorage","maxFunctionDefs","maxInstructionDefs","maxStackElements","maxSizeOfInstructions","maxComponentElements","maxComponentDepth","_lang","postScriptName","version0","version1","version2","version5","xAvgCharWidth","usWeightClass","usWidthClass","fsType","ySubscriptXSize","ySubscriptYSize","ySubscriptXOffset","ySubscriptYOffset","ySuperscriptXSize","ySuperscriptYSize","ySuperscriptXOffset","ySuperscriptYOffset","yStrikeoutSize","yStrikeoutPosition","sFamilyClass","panose","ulUnicodeRange1","ulUnicodeRange2","ulUnicodeRange3","ulUnicodeRange4","achVendID","fsSelection","usFirstCharIndex","usLastCharIndex","sTypoAscender","sTypoDescender","sTypoLineGap","usWinAscent","usWinDescent","ulCodePageRange1","ulCodePageRange2","sxHeight","sCapHeight","usDefault","usBreak","usMaxContext","usLowerOpticalPointSize","usUpperOpticalPointSize","post","italicAngle","underlinePosition","underlineThickness","codeToGlyph","p0e4","p3e1","p1e0","p0e3","glyphToPath","cmds","crds","SVG","toPath","nStems","haveWidth","defaultWidthX","open","_drawCFF","_drawGlyf","_simpleGlyph","_compoGlyph","moveTo","lineTo","qcurveTo","closePath","_getGlyphClass","getPairAdjustment","_applySubs","_glsCovered","glyphsToPath","curveTo","nominalWidthX","T","G","D","L","R","W","M","V","N","Typr","captureStackTrace","subarray","j","H","J","K","Q","X","Y","Z","$","rr","er","tr","stream","convert_streams","setUint16","setUint32","signature","flavor","numTables","reserved","totalSfntSize","majorVersion","minorVersion","metaOffset","metaLength","metaOrigLength","privOffset","privLength","compLength","origLength","origChecksum","outOffset","woff2otf","cmdArgLengths","joiningTypeRawData","JT_LEFT","JT_RIGHT","JT_DUAL","JT_TRANSPARENT","JT_JOIN_CAUSING","JT_NON_JOINING","joiningTypeMap","getCharJoiningType","ch","lastCode","skip","ISOL","INIT","FINA","MEDI","formsToFeatures","detectJoiningForms","joiningForms","prevJoiningType","prevForm","prevIndex","codePointAt","joiningType","form","peek","typrFont","glyphMap","fontObj","forEachGlyph","fontSize","letterSpacing","glyphX","fontScale","glyphIndices","font","glyphIds","cc","gsub","supportedFeatures","usedLookups","ti","isJoiningFeature","stringToGlyphs","charIndex","prevGlyphIndex","glyphObj","crdsIdx","numArgs","advanceWidth","pathCommandCount","wrapFontObj","typrFactory","woff2otfFactory","parserFactory","CONFIG","defaultFontURL","sdfGlyphSize","sdfMargin","tempColor","hasRequested","atlases","getTextRenderInfo","toObj","fromObj","totalStart","linkEl","colorRanges","getHex","atlas","glyphCount","sdfTexture","DataTexture","glyphsByFont","fontGlyphs","typesetInWorker","glyphPositions","neededSDFs","glyphBounds","fontSizeMult","boundsIdx","positionsIdx","quadsStart","glyphId","glyphInfo","pathBounds","glyphData","fontUnitsMargin","atlasIndex","sdfViewBox","posX","posY","quads","sdfStart","sdf","maxDist","generateSDFInWorker","sdfResults","texImg","biggerArray","squareIndex","cols","baseStartIndex","srcStartIndex","rowStartIndex","sdfTotal","parameters","glyphAtlasIndices","glyphColors","caretPositions","caretHeight","chunkedBounds","lineHeight","topBaseline","blockBounds","visibleBounds","totalBounds","totalBlockSize","typesetterWorkerModule","fontParser","bidi","fonts","INF","DEFAULT_IGNORABLE_CHARS","BREAK_AFTER_CHARS","loadFont","fontUrl","tryLoad","request","XMLHttpRequest","responseType","status","callbacks","onerror","send","typeset","maxWidth","textAlign","textIndent","whiteSpace","overflowWrap","anchorX","anchorY","includeCaretPositions","chunkedBoundsSize","metricsOnly","mainStart","fontLoad","typesetting","hasMaxWidth","maxLineWidth","renderableGlyphCount","canWrap","typesetStart","halfLeading","caretBottomOffset","lineXOffset","currentLine","TextLine","lines","char","glyphWidth","curLineCount","nextLine","isWhitespace","canBreakAfter","glyphAt","splitAt","adjustX","isSoftWrapped","fly","line","anchorXOffset","anchorYOffset","parsePercent","bidiLevelsResult","getEmbeddingLevels","lineYOffset","currentColor","renderableGlyphIndex","prevCharIndex","colorCharIndex","lineIndex","lineGlyphCount","lineWidth","trailingWhitespaceCount","justifyAdjust","whitespaceCount","justifyOffset","flips","getReorderSegments","fi","startInLine","endInLine","setGlyphObj","rtl","mirrored","getMirroredCharacter","caretLeft","caretRight","ligCount","fillLigatureCaretPositions","glyphY","visX0","visY0","visX1","visY1","chunkRect","pct","ligStartIndex","ligStartX","ligEndX","ligY","guessedAdvanceX","startIndex","textLineProps","flyweight","newLine","measure","DATA","TYPES","TYPES_TO_NAMES","ISOLATE_INIT_TYPES","LRI","RLI","FSI","STRONG_TYPES","AL","NEUTRAL_ISOLATE_TYPES","WS","ON","PDI","BN_LIKE_TYPES","BN","RLE","LRE","RLO","LRO","TRAILING_TYPES","getBidiCharType","parseData","openToClose","closeToOpen","canonical","data$1","parseCharacterMap","encodedString","includeReverse","prevPair","reverseMap","visit","fromCodePoint","parse$1","pairs","openingToClosingBracket","closingToOpeningBracket","getCanonicalBracket","mirrorMap","TYPE_L","TYPE_R","TYPE_EN","EN","TYPE_ES","ES","TYPE_ET","ET","TYPE_AN","AN","TYPE_CS","CS","TYPE_B","TYPE_S","TYPE_ON","TYPE_BN","TYPE_NSM","NSM","TYPE_AL","TYPE_LRO","TYPE_RLO","TYPE_LRE","TYPE_RLE","TYPE_PDF","TYPE_LRI","TYPE_RLI","TYPE_FSI","TYPE_PDI","embeddingLevelsResult","strLen","paragraphs","paragraph","lineStart","lineEnd","lineLevels","level","maxLevel","minOddLevel","lvl","i$2","segStart","getReorderedIndices","embedLevelsResult","indices","getBidiCharTypeName","baseDirection","charTypes","charTypeCounts","changeCharType","oldType","embedLevels","isolationPairs","determineAutoEmbedLevel","FORMATTING_TYPES","nextEven","nextOdd","paraIdx","statusStack","_level","_override","_isolate","stackTop","overflowIsolateCount","overflowEmbeddingCount","validIsolateCount","clear","charType","level$1","level$2","_isolInitIndex","isolInitIndex","levelRuns","currentRun","i$3","charType$1","isIsolInit","isPDI","_end","_endsWithIsolInit","_start","_startsWithPDI","isolatingRunSeqs","runIdx","run","seqRuns","pdiIndex","i$4","seqIndices","i$5","run$1","firstLevel","prevLevel","i$6","lastIndex","lastLevel","nextLevel","i$7","_seqIndices","_sosType","_eosType","seqIdx","seqIndices$1","sosType","eosType","si","i$8","prevType","sj","si$1","i$9","sj$1","prevCharType","si$2","i$10","si$3","i$11","prevType$1","nextType","sj$2","sj$3","si$4","i$12","sj$4","sj$5","si$5","i$13","sj$6","sj$7","si$6","prevStrongType","i$14","R_TYPES_FOR_N_STEPS","STRONG_TYPES_FOR_N_STEPS","bracketPairs","openerStack","si$7","oppositeBracket","seqIndex","stackIdx","stackChar","pairIdx","openSeqIdx","closeSeqIdx","foundStrongType","useStrongType","si$8","i$15","lr","getEmbedDirection","si$9","i$16","lr$1","si$10","si$11","si$12","niRunStart","niRunEnd","prevType$2","si2","nextType$1","si2$1","sj$8","i$17","level$3","type$1","j$1","isFSI","pdi","indexOfMatchingPDI","isolateStart","isolationLevel","getMirroredCharactersMap","embeddingLevels","mirror","getReorderedString","chars","createTypesetter","bidiFactory","threads","callNum","thread","requests","idleTimer","terminateWorker","typesetter","GlyphsGeometry","templateGeometries","glyphIndexAttrName","curveRadius","computeBoundingSphere","setSide","setDrawRange","_detail","tpl","front","back","frontAttrs","backAttrs","combined","BufferGeometry","vertCount","Float32BufferAttribute","itemSize","translate","getTemplateGeometry","attr","_curveRadius","_updateBounds","updateGlyphs","updateBufferAttr","_blockBounds","_chunkedBounds","setInstanceCount","bbox","halfPi","twoPi","absR","leftAngle","rightAngle","maxZ","applyClipRect","clipRect","newArray","_maxInstanceCount","deleteAttribute","defaultMaterial","defaultStrokeColor","tempMat4","tempVec3a","tempVec3b","tempArray","defaultOrient","first","getFlatRaycastMesh","getCurvedRaycastMesh","syncStartEvent","syncCompleteEvent","SYNCABLE_PROPS","COPYABLE_PROPS","outlineWidth","outlineColor","outlineOpacity","outlineBlur","outlineOffsetX","outlineOffsetY","strokeWidth","strokeColor","strokeOpacity","fillOpacity","depthOffset","glyphGeometryDetail","debugSDF","sync","_needsSync","_isSyncing","_queuedSyncs","textRenderInfo","_textRenderInfo","queued","onBeforeRender","isTroikaTextMaterial","_prepareForRender","_hadOwnSide","_actualSide","onAfterRender","derivedMaterial","_derivedMaterial","_baseMaterial","_defaultMaterial","textMaterial","derivatives","uTroikaSDFTexture","uTroikaSDFTextureSize","uTroikaSDFGlyphSize","uTroikaSDFExponent","uTroikaTotalBounds","Vector4","uTroikaClipRect","uTroikaDistanceOffset","uTroikaOutlineOpacity","uTroikaFillOpacity","uTroikaPositionOffset","uTroikaCurveRadius","uTroikaBlurRadius","uTroikaStrokeWidth","uTroikaStrokeColor","uTroikaStrokeOpacity","uTroikaOrient","Matrix3","uTroikaUseGlyphColors","uTroikaSDFDebug","uDiffuseRE","defineProperties","shadowSide","createTextDerivedMaterial","onDispose","outlineMaterial","_outlineMtl","isTextOutlineMaterial","customDepthMaterial","customDistanceMaterial","isOutline","textInfo","fromArray","distanceOffset","blurRadius","offsetX","offsetY","_parsePercent","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","colorObj","_input","orient","_orientation","rotMat","hSign","hAxis","vSign","vAxis","cross","setFromMatrix4","localPositionToTextCoords","worldPositionToTextCoords","raycastMesh","setXYZ","privateKey","deprMsgShown","_deprecated_anchor","THREE_SIDES","double","numberOrPercent","troikaTextMesh","toneMapped","outSize","Pathfinding","pathfinder","removeNavMeshData","loadMesh","zone","setZoneData","createZone","teleporters","queryCollisionEntities","helperMesh","_hubs_audio_debug_prev_material","removeFromParent","zones","IfFeature","_path","_extends","SvgTwitter","_ref","title","titleId","xmlns","SvgCodeBranch","_path2","SvgPen","_path3","SvgHmcLogo","AppLogo","forceConfigurableLogo","logo","alt","MapShim","class_1","__entries__","isBrowser","global$1","Function","requestAnimationFrame$1","requestAnimationFrame","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","throttle","addObserver","observer","connect_","removeObserver","observers","disconnect_","updateObservers_","activeObservers","gatherActive","hasActive","broadcastActive","observe","childList","characterData","subtree","disconnect","isReflowProperty","getInstance","instance_","defineConfigurable","getWindowOf","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","getBordersSize","styles","isSVGGraphicsElement","SVGGraphicsElement","getBBox","getContentRect","getSVGContentRect","clientWidth","clientHeight","paddings","positions_1","getPaddings","horizPad","vertPad","boxSizing","documentElement","isDocumentElement","vertScrollbar","horizScrollbar","getHTMLElementContentRect","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","broadcastRect","ResizeObserverEntry","rectInit","Constr","contentRect","DOMRectReadOnly","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","callback_","controller_","callbackCtx_","Element","observations","unobserve","clearActive","observation","ResizeObserver","addOrientationChangeListener","useCapture","ScreenOrientation","screen","removeOrientationChangeListener","isNaturalOrientation","getMaxResolutionWidth","getMaxResolutionHeight","ResizeHookWrapper","viewportRef","maxResolution","setMaxResolution","isPresenting","isVRPresenting","canvasRect","rendererSize","isVR","pixelRatio","devicePixelRatio","maxHeight","calculateRendererSize","setSize","aspect","updateProjectionMatrix","render","onOrientationChange","useResizeViewport","useRef","SceneUI","Component","showScreenshot","createRoom","createAndRedirectToNewHub","sceneLoaded","setState","componentDidMount","onSceneLoaded","componentWillUnmount","unavailable","defaultMessage","sceneAllowRemixing","isOwner","sceneProjectId","parentScene","intl","sceneUrl","tweetText","formatMessage","sceneName","shareHashtag","tweetLink","encodeURIComponent","unknown","attributions","toAttributionSpan","author","remix","_name","_author","rel","sceneAttributions","classNames","sceneScreenshotURL","showCreateRoom","onClick","editorName","sceneDescription","injectIntl","viewingCamera","uiRoot","ScenePreviewCameraSystem","entities","entered","isGhost","frustumBox","inverseShadowCameraMatrixWorld","tempBox","ShadowSystem","shadowCameraBoundingBox","previousShadowsEnabled","realtimeShadowsEnabled","shadowMap","PCFSoftShadowMap","autoUpdate","updatePrefs","hasLoaded","computeShadowCameraBoundingBox","resizeShadowCameraFrustum","DOMContentDidLoad","animationMixerSystem","shadowSystem","getSanitizedComponentMapping","inputComponent","inputProperty","publicComponents","publicComponent","publicProperty","publicProperties","mappedComponent","mappedProperty","getMappedValue","rigidbodyQuery","RIGIDBODY_FLAGS","DEFAULTS","isValidChild","characters","preloadFont","reservedAttrs","resolveRef","addEntity","addObject3DComponent","hasComponent","eid2obj","$isEidType","getOwnPropertySymbols","description","createDefaultInflator","componentProps","inflators","holdable","rigidbody","guide","Group","slice9","leftPadded","rightPadded","topPadded","bottomPadded","updateSlice9Geometry","TroikaText","modelEid","gltfSrc","renderAsEntity","entityDef","attrs","childEid","mediaInflator","isControlled","controls","templateName","persistent","alphaMode","alphaCutoff","videoPaused","autoPlay","hidePlaybackControls","sanitizeUrl","TYPE","collisionFilterGroup","euler","fit","FIT","canBeSpawnPoint","canBeOccupied","canBeClicked","willDisableMotion","willDisableTeleporting","willMaintainWorldUp","attachTemplateToLocal","_componentName","outputAttrs","flat","rootNid","getSid","nid2eid","mediaLoaderAttributes","pageIndex","enterComponentMapping","leaveComponentMapping","targetEntity","margin","heightfieldDistance","heightfieldData","includeInvisible","removeUndefined","mediaDistanceModel","mediaRolloffFactor","mediaRefDistance","mediaMaxDistance","mediaConeInnerAngle","mediaConeOuterAngle","mediaConeOuterGain","mediaVolume","avatarDistanceModel","avatarRolloffFactor","avatarRefDistance","avatarMaxDistance","avatarConeInnerAngle","avatarConeOuterAngle","avatarConeOuterGain","avatarVolume","_components","targetBaseColorMap","targetEmissiveMap","srcNode","srcEl","positional","minDelay","maxDelay","backgroundColor","fogType","fogColor","fogNear","fogFar","fogDensity","density","envMapTexture","mapping","EquirectangularReflectionMapping","toneMappingOptions","None","Reinhard","Cineon","ACESFilmic","CustomToneMapping","LUTToneMapping","outputEncodingOptions","LinearEncoding","GBEEncoding","GBM7Encoding","GBDEncoding","BasicDepthPacking","GBADepthPacking","defaultEnvSettings","toneMapping","outputEncoding","toneMappingExposure","physicallyCorrectLights","backgroundTexture","blenderLUTPromise","EnvironmentSystem","applyEnvSettings","setupDebugView","debugSettings","updateDebug","gui","GUI","onChange","listen","debugGui","debugMode","$E","updateEnvironment","envEl","envSettingsEl","skyboxEl","navmeshEl","envSettings","skybox","navMesh","getObjectByProperty","nav","materialsNeedUpdate","newToneMapping","LUTCubeLoader","blenderLutPath","texture3D","tonemappingLUT","newOutputEncoding","lp","background","prevEnvMapTextureUUID","environment","Fog","FogExp2","pushHistoryPath","history","newPathname","newSearch","newLength","__historyLength","__duplicate","isDuplicate","pushOrUpdateHistory","sluglessPath","withSlug","forNear","ReflectionProbe","environmentSystem","debugBox","aframeComponentName","bitecsComponent","EMPTY_RESULT","URL_SOURCE_TO_TO_API_SOURCE","videos","youtube","gifs","sketchfab","twitch","favorites","SOURCES","apiSource","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","_update","urlSource","getUrlMediaSource","previousSource","urlParams","requestIndex","currentRequestIndex","locationSearchParams","isMy","singular","lastSavedUrl","isFetching","nextCursor","next_cursor","lastFetchedUrl","pageNavigate","goBack","filterQueryNavigate","query","getSearchClearedSearchParams","keepSource","keepNav","keepSelectAction","_stashLastSearchParams","_stashedParams","_stashedSource","clearStashedQuery","sourceNavigate","_sourceNavigate","sourceNavigateToDefaultSource","sourceNavigateWithNoNav","selectAction","hideNav","useLastStashedParams","currentQuery","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","pushExitMediaBrowserHistory","stashLastSearchParams","setHistory","$B","bitecs","ga","registerTelemetry","trackedPage","trackedTitle","sentryDsn","gaTrackingId","Raven","install","WrappedIntlProvider","React","updateLocale","BUILD_VERSION","originalGetExtension","WebGLRenderingContext","getExtension","supportsFloatTextures","WebGLRenderer","forceWebVR","dataTexture","FloatType","Camera","getError","checkFloatTextureSupport","patchWebGLRenderingContext","mediaSearchStore","mediaDevicesManager","isAudioPaused","createWorld","deletedNids","ignoredNids","str2sid","sid2str","nextSid","$o","nameToComponent","object3d","owned","sid","getString","setupRenderer","dataset","aframeCanvas","preventDefault","antialias","stencil","premultipliedAlpha","preserveDrawingBuffer","logarithmicDepthBuffer","powerPreference","setPixelRatio","checkShaderErrors","domElement","PerspectiveCamera","innerWidth","innerHeight","audioListener","AudioListener","renderClock","Clock","mainTick","_rafTime","xrFrame","getDelta","elapsedTime","timeSystem","isPlaying","clock","setAnimationLoop","renderStarted","mountUI","ReactDOM","lastTouchAtMs","ev","getTime","isDoubleTouch","disableiOSZoom","onReady","uiProps","remountUI","sceneRoot","sceneModelEntity","gltfEl","connectToReticulum","joinParams","retPhxChannel","channel","receive","perms_token","perms","create_hub","leave","envSystem","previewCamera","getObjectByName","environmentEl","childNodes","sceneInfo","allow_promotion","modelUrl","model_url","parent_scene_id","screenshot_url","project_id","allow_remixing","account_id","scope","clipBias","mirrorPlane","mirrorWorldPosition","cameraWorldPosition","rotationMatrix","lookAtPosition","clipPlane","textureMatrix","stencilBuffer","WebGLRenderTarget","isPowerOfTwo","generateMipmaps","mirrorSampler","extractRotation","reflect","negate","up","setFromNormalAndCoplanarPoint","constant","currentRenderTarget","getRenderTarget","currentXrEnabled","currentShadowAutoUpdate","setRenderTarget","_class","isFunction","escapeRE","defaultOptions","fuzzyLink","fuzzyEmail","fuzzyIP","defaultSchemas","tail","re","http","src_auth","src_host_port_strict","src_path","no_http","src_domain","src_domain_root","src_port","src_host_terminator","mailto","src_email_name","src_host_strict","tlds_2ch_src_re","tlds_default","compile","__opts__","__tlds__","untpl","src_tlds","onCompile","__tlds_replaced__","src_xn","email_fuzzy","tpl_email_fuzzy","link_fuzzy","tpl_link_fuzzy","link_no_ip_fuzzy","tpl_link_no_ip_fuzzy","host_fuzzy_test","tpl_host_fuzzy_test","aliases","schemaError","__compiled__","__schemas__","compiled","createValidator","isString","slist","schema_test","src_ZPCc","schema_search","pretest","__index__","__text_cache__","resetScanCache","Match","__last_index__","__schema__","createMatch","LinkifyIt","schemas","definition","ml","me","tld_pos","testSchemaAt","keepOld","src_Any","src_Cc","src_Z","src_P","src_ZCc","src_pseudo_letter","src_ip4","src_host","tpl_host_fuzzy","tpl_host_no_ip_fuzzy","tpl_host_fuzzy_strict","tpl_host_port_fuzzy_strict","tpl_host_port_no_ip_fuzzy_strict","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","runClearTimeout","Item","noop","nextTick","browser","env","argv","versions","on","off","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","GRAVITY","MAX_INTERVAL","ITERATIONS","SIMULATION_RATE","ACTIVATION_STATE","ACTIVE_TAG","ISLAND_SLEEPING","WANTS_DEACTIVATION","DISABLE_DEACTIVATION","DISABLE_SIMULATION","COLLISION_FLAG","STATIC_OBJECT","KINEMATIC_OBJECT","NO_CONTACT_RESPONSE","CUSTOM_MATERIAL_CALLBACK","CHARACTER_OBJECT","DISABLE_VISUALIZE_OBJECT","DISABLE_SPU_COLLISION_PROCESSING","STATIC","DYNAMIC","KINEMATIC","BOX","CYLINDER","SPHERE","CAPSULE","CONE","HULL","HACD","VHACD","MESH","HEIGHTFIELD","MANUAL","CONSTRAINT","LOCK","FIXED","SPRING","SLIDER","HINGE","CONE_TWIST","POINT_TO_POINT","MESSAGE_TYPES","READY","ADD_BODY","BODY_READY","UPDATE_BODY","REMOVE_BODY","ADD_SHAPES","REMOVE_SHAPES","ADD_CONSTRAINT","REMOVE_CONSTRAINT","ENABLE_DEBUG","RESET_DYNAMIC_BODY","ACTIVATE_BODY","TRANSFER_DATA","BUFFER_CONFIG","HEADER_LENGTH","MAX_BODIES","MATRIX_OFFSET","LINEAR_VELOCITY_OFFSET","ANGULAR_VELOCITY_OFFSET","COLLISIONS_OFFSET","BODY_DATA_SIZE","BUFFER_STATE","UNINITIALIZED","CONSUMED","roundNumber","sample","isVectorInPolygon","vertexIds","triarea2","vequal","mergeVertices","EPSILON","log10","normalized","scoreFunction","sinkDown","bubbleUp","rescoreElement","portals","stringPull","buildZone","_buildNavigationMesh","vertices","_buildPolygonGroups","neighbours","_getSharedVerticesInOrder","centroid","_buildPolygonsFromGeometry","_spreadGroupId","polygons","_buildPolygonNeighbours","getRandomNode","getClosestNode","findPath","visited","closed","cleanUp","heap","heuristic","getGroup","setFromCoplanarPoints","clampStep","PLAYER","TARGET","PATH","WAYPOINT","CLAMPED_STEP","CLOSEST_NODE","_playerMarker","_targetMarker","_nodeMarker","_stepMarker","_pathMarker","_pathLineMaterial","linewidth","_pathPointMaterial","_pathPointGeometry","_markers","setPlayerPosition","setTargetPosition","setNodePosition","setStepPosition","freeGlobal","global","punycode","maxInt","tMax","skew","damp","regexPunycode","regexNonASCII","regexSeparators","baseMinusTMin","stringFromCharCode","mapDomain","ucs2decode","extra","output","counter","charCodeAt","ucs2encode","digitToBasic","adapt","numPoints","firstTime","basic","oldi","baseMinusT","codePoint","inputLength","encode","handledCPCount","basicLength","handledCPCountPlusOne","qMinusT","sep","eq","regexp","maxKeys","kstr","vstr","stringifyPrimitive","ks","util","Url","slashes","auth","urlParse","relative","resolveObject","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","isObject","queryIndex","splitter","uSplit","simplePath","proto","lowerProto","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","newpart","validParts","notHost","toASCII","ae","esc","escape","qm","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","isNullOrUndefined","authInHost","isNull","hasTrailingSlash","isAbsolute","workerConstructor","workerOptions","globalScope","blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","getBlob","webkitURL","objectURL","webpackAsyncContext","req","__webpack_require__","ids","TYPES_ENUM","i8","ui8","ui8c","i16","ui16","i32","ui32","f32","f64","TYPES_NAMES","Int8Array","Uint8ClampedArray","Int16Array","Int32Array","Float64Array","roundToMultiple4","$storeRef","$storeSize","$storeMaps","$storeFlattened","$storeBase","$storeType","$storeArrayElementCounts","$storeSubarrays","$subarrayCursors","$subarray","$parentArray","$tagStore","$indexType","$indexBytes","stores","resize","newBuffer","BYTES_PER_ELEMENT","newTa","createShadow","isView","shadowStore","resizeRecursive","metadata","storeSize","cursors","indexType","arrayElementCount","start2","end2","resizeSubarray","resizeStore","resetStoreFor","parentArray","isArrayType","SparseSet","dense","sparse","comparator","swapped","DESERIALIZE_MODE","REPLACE","APPEND","MAP","resized","not","storeFlattened","isFullComponent","isProperty","isModifier","isNotModifier","isChangedModifier","isWorld","$componentMap","fromModifierToComponent","canonicalize","fullComponentProps","changedComponentProps","changedProps","defineSerializer","maxBytes","worldSerializer","entityComponentCache","ents","$entityArray","eidToWorld","where","pid","$diff","setUint8","countWhere","writeCount","componentCache","newlyAddedComponent","rewindWhere","indexBytes","countWhere2","arrayWriteCount","changed","newEntities","defineDeserializer","isWorld2","deserializedEntities","packet","localEntities","$localEntities","localEntityLookup","$localEntityLookup","getUint8","entityCount","newEid","$entitySparseSet","localEid","$entityMasks","$entityComponents","defaultSize","globalEntityCursor","globalSize","getGlobalSize","removed","removedReuseThreshold","newSize","oldSize","resizeWorlds","resizeComponents","newThreshold","amount","$notQueries","queryCheckEntity","queryAddEntity","removeEntity","$queries","queryRemoveEntity","getEntityComponents","Changed","$queryAny","$queryAll","$queryNone","$queryMap","$dirtyQueries","$queryComponents","registerQuery","exited","components2","notComponents","changedComponents","comp","mapComponents","allComponents","sparseSet","toRemove","generations","generationId","reduceBitflags","bitflag","masks","notMasks","hasMasks","flatProps","archetypes","shadows","queries","generateShadow","flatten","aggregateComponentsFor","comps","clearDiff","commitRemovals","dirty","any","none","qMask","qNotMask","eMask","queryCommitRemovals","resetChangedQuery","removeQuery","$store","arrayElementCounts","collectArrayElementCounts","recursiveTransform","totalBytes","createTypeStore","createArrayStore","createStore","notQueries","changedQueries","$bitflag","$size","incrementBitflag","registerComponents","registeredComponent","$resizeThreshold","$archetypes","worlds","resetWorld","deleteWorld","getWorldComponents","getAllEntities","defineSystem","pipe","fns","tmp","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","chunkIds","priority","notFulfilled","fulfilled","every","getter","__esModule","getPrototypeOf","__proto__","ns","def","getOwnPropertyNames","chunkId","promises","miniCssF","globalThis","needAttach","scripts","getElementsByTagName","nc","onScriptComplete","doneFns","nmd","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}