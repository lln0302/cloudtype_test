self.addEventListener("install",(function(t){return t.waitUntil(self.skipWaiting())})),self.addEventListener("activate",(function(t){return t.waitUntil(self.clients.claim())})),self.addEventListener("fetch",(function(){}));let appFullName="";self.addEventListener("push",(function(t){const n=JSON.parse(t.data.text());return t.waitUntil(self.clients.matchAll({type:"window"}).then((function(i){for(let n=0;n<i.length;n++)if(i[n].url.indexOf(t.notification.data.hub_id)>=0)return;return self.registration.showNotification(appFullName,{body:"Someone has joined "+n.hub_name,image:n.image,icon:"/favicon.ico",badge:"/favicon.ico",tag:n.hub_id,data:{hub_url:n.hub_url}})})))})),self.addEventListener("notificationclick",(function(t){t.notification.close(),t.waitUntil(self.clients.matchAll({type:"window"}).then((function(n){for(let i=0;i<n.length;i++){const e=n[i];if(e.url.indexOf(t.notification.data.hub_url)>=0&&"focus"in e)return e.focus()}if(self.clients.openWindow)return self.clients.openWindow(t.notification.data.hub_url)})))}));