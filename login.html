<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title> 로그인</title>
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.2.0/kakao.min.js"
    integrity="sha384-x+WG2i7pOR+oWb6O5GV5f1KN2Ko6N7PTGPS7UlasYWNxZMKQA63Cj/B2lbUmUfuC" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- 추가된 Firebase 스크립트 -->
  <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-database.js"></script>

  <script>
    // Firebase 설정 정보
    const firebaseConfig = {
      apiKey: "AIzaSyD23BNt_CZ43ZasIVS3P_vMRFs6cW6TEr0",
      authDomain: "fire-test-mozilla.firebaseapp.com",
      databaseURL: "https://fire-test-mozilla-default-rtdb.firebaseio.com",
      projectId: "fire-test-mozilla",
      storageBucket: "fire-test-mozilla.appspot.com",
      messagingSenderId: "169534096470",
      appId: "1:169534096470:web:5bcd6ebfd76a311ee6e7f7",
      measurementId: "G-ERQ3SDV3ZK"
    };
    
    // Firebase 초기화
    firebase.initializeApp(firebaseConfig);
    
    Kakao.init('230ec1c3b4257be3358f7860a79d8416'); // 사용하려는 앱의 JavaScript 키 입력
    console.log(Kakao.isInitialized());

    // Kakao 인증 처리 함수
    function loginWithKakao() {
      Kakao.Auth.authorize({
        success: function(authObj) {
          // Kakao 인증 성공 후 Firebase에 로그인
          var accessToken = authObj.access_token;
          var credential = firebase.auth.OAuthProvider.credential('kakao.com', accessToken);

          firebase.auth().signInWithCredential(credential)
            .then(function(result) {
              // Firebase 로그인 성공 후 처리할 작업
              console.log("Firebase 로그인 성공");
              console.log(result);
            })
            .catch(function(error) {
              // Firebase 로그인 실패 시 처리할 작업
              console.log("Firebase 로그인 실패");
              console.log(error);
            });
        },
        fail: function(error) {
          // Kakao 인증 실패 시 처리할 작업
          console.log("Kakao 인증 실패");
          console.log(error);
        }
      });
    }
  </script>
</head>
<body>
  <a href="javascript:loginWithKakao()">
    <img src="https://k.kakaocdn.net/14/dn/btroDszwNrM/I6efHub1SN5KCJqLm1Ovx1/o.jpg" width="222"
    alt="카카오 로그인 버튼" />  
  </a>
    <!-- <a id="kakao-login-btn" href="javascript:loginWithKakao()">
        <img src="https://k.kakaocdn.net/14/dn/btroDszwNrM/I6efHub1SN5KCJqLm1Ovx1/o.jpg" width="222"
          alt="카카오 로그인 버튼" />
    </a>
    <p id="token-result"></p>
    
    <script>
        function loginWithKakao() {
            Kakao.Auth.authorize({
                redirectUri: 'https://metatest.nztoverse.com',
          });
       }
  </script> -->
  <!-- <script>
    function loginWithKakao() {
        Kakao.Auth.authorize({
            redirectUri: 'https://metatest.nztoverse.com',
            success: function(authObj) {
              // Kakao 인증 성공 후 Firebase에 로그인
              var credential = firebase.auth.OAuthProvider.credential(
                "kakao.com", 
                authObj.access_token
              );
              
              firebase.auth().signInWithCredential(credential)
                .then(function(result) {
                  // Firebase 로그인 성공 후 처리할 작업
                  console.log("Firebase 로그인 성공");
                  console.log(result);
                  document.getElementById("token-result").textContent = "로그인에 성공했습니다.";
                })
                .catch(function(error) {
                  // Firebase 로그인 실패 시 처리할 작업
                  console.log("Firebase 로그인 실패");
                  console.log(error);
                  document.getElementById("token-result").textContent = "로그인에 실패했습니다.";
                });
            },
            fail: function(error) {
              // Kakao 인증 실패 시 처리할 작업
              console.log("Kakao 인증 실패");
              console.log(error);
              document.getElementById("token-result").textContent = "인증에 실패했습니다.";
            }
      });
   }
</script> -->
</body>
</html>
